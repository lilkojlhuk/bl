var aD=Object.defineProperty;var rD=(t,a,s)=>a in t?aD(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;var x3=(t,a,s)=>(rD(t,typeof a!="symbol"?a+"":a,s),s);function sD(t,a){for(var s=0;s<a.length;s++){const l=a[s];if(typeof l!="string"&&!Array.isArray(l)){for(const f in l)if(f!=="default"&&!(f in t)){const g=Object.getOwnPropertyDescriptor(l,f);g&&Object.defineProperty(t,f,g.get?g:{enumerable:!0,get:()=>l[f]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))l(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const w of g.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&l(w)}).observe(document,{childList:!0,subtree:!0});function s(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(f){if(f.ep)return;f.ep=!0;const g=s(f);fetch(f.href,g)}})();var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var WE={exports:{}},y_={},HE={exports:{}},xa={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N0=Symbol.for("react.element"),iD=Symbol.for("react.portal"),oD=Symbol.for("react.fragment"),cD=Symbol.for("react.strict_mode"),lD=Symbol.for("react.profiler"),uD=Symbol.for("react.provider"),dD=Symbol.for("react.context"),pD=Symbol.for("react.forward_ref"),fD=Symbol.for("react.suspense"),hD=Symbol.for("react.memo"),mD=Symbol.for("react.lazy"),T7=Symbol.iterator;function gD(t){return t===null||typeof t!="object"?null:(t=T7&&t[T7]||t["@@iterator"],typeof t=="function"?t:null)}var ZE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YE=Object.assign,XE={};function th(t,a,s){this.props=t,this.context=a,this.refs=XE,this.updater=s||ZE}th.prototype.isReactComponent={};th.prototype.setState=function(t,a){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,a,"setState")};th.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function JE(){}JE.prototype=th.prototype;function Kx(t,a,s){this.props=t,this.context=a,this.refs=XE,this.updater=s||ZE}var Qx=Kx.prototype=new JE;Qx.constructor=Kx;YE(Qx,th.prototype);Qx.isPureReactComponent=!0;var E7=Array.isArray,KE=Object.prototype.hasOwnProperty,e5={current:null},QE={key:!0,ref:!0,__self:!0,__source:!0};function eI(t,a,s){var l,f={},g=null,w=null;if(a!=null)for(l in a.ref!==void 0&&(w=a.ref),a.key!==void 0&&(g=""+a.key),a)KE.call(a,l)&&!QE.hasOwnProperty(l)&&(f[l]=a[l]);var I=arguments.length-2;if(I===1)f.children=s;else if(1<I){for(var o=Array(I),M=0;M<I;M++)o[M]=arguments[M+2];f.children=o}if(t&&t.defaultProps)for(l in I=t.defaultProps,I)f[l]===void 0&&(f[l]=I[l]);return{$$typeof:N0,type:t,key:g,ref:w,props:f,_owner:e5.current}}function bD(t,a){return{$$typeof:N0,type:t.type,key:a,ref:t.ref,props:t.props,_owner:t._owner}}function t5(t){return typeof t=="object"&&t!==null&&t.$$typeof===N0}function _D(t){var a={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return a[s]})}var I7=/\/+/g;function w3(t,a){return typeof t=="object"&&t!==null&&t.key!=null?_D(""+t.key):a.toString(36)}function cb(t,a,s,l,f){var g=typeof t;(g==="undefined"||g==="boolean")&&(t=null);var w=!1;if(t===null)w=!0;else switch(g){case"string":case"number":w=!0;break;case"object":switch(t.$$typeof){case N0:case iD:w=!0}}if(w)return w=t,f=f(w),t=l===""?"."+w3(w,0):l,E7(f)?(s="",t!=null&&(s=t.replace(I7,"$&/")+"/"),cb(f,a,s,"",function(M){return M})):f!=null&&(t5(f)&&(f=bD(f,s+(!f.key||w&&w.key===f.key?"":(""+f.key).replace(I7,"$&/")+"/")+t)),a.push(f)),1;if(w=0,l=l===""?".":l+":",E7(t))for(var I=0;I<t.length;I++){g=t[I];var o=l+w3(g,I);w+=cb(g,a,s,o,f)}else if(o=gD(t),typeof o=="function")for(t=o.call(t),I=0;!(g=t.next()).done;)g=g.value,o=l+w3(g,I++),w+=cb(g,a,s,o,f);else if(g==="object")throw a=String(t),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.");return w}function M1(t,a,s){if(t==null)return t;var l=[],f=0;return cb(t,l,"","",function(g){return a.call(s,g,f++)}),l}function yD(t){if(t._status===-1){var a=t._result;a=a(),a.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=a)}if(t._status===1)return t._result.default;throw t._result}var pi={current:null},lb={transition:null},vD={ReactCurrentDispatcher:pi,ReactCurrentBatchConfig:lb,ReactCurrentOwner:e5};xa.Children={map:M1,forEach:function(t,a,s){M1(t,function(){a.apply(this,arguments)},s)},count:function(t){var a=0;return M1(t,function(){a++}),a},toArray:function(t){return M1(t,function(a){return a})||[]},only:function(t){if(!t5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xa.Component=th;xa.Fragment=oD;xa.Profiler=lD;xa.PureComponent=Kx;xa.StrictMode=cD;xa.Suspense=fD;xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vD;xa.cloneElement=function(t,a,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var l=YE({},t.props),f=t.key,g=t.ref,w=t._owner;if(a!=null){if(a.ref!==void 0&&(g=a.ref,w=e5.current),a.key!==void 0&&(f=""+a.key),t.type&&t.type.defaultProps)var I=t.type.defaultProps;for(o in a)KE.call(a,o)&&!QE.hasOwnProperty(o)&&(l[o]=a[o]===void 0&&I!==void 0?I[o]:a[o])}var o=arguments.length-2;if(o===1)l.children=s;else if(1<o){I=Array(o);for(var M=0;M<o;M++)I[M]=arguments[M+2];l.children=I}return{$$typeof:N0,type:t.type,key:f,ref:g,props:l,_owner:w}};xa.createContext=function(t){return t={$$typeof:dD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uD,_context:t},t.Consumer=t};xa.createElement=eI;xa.createFactory=function(t){var a=eI.bind(null,t);return a.type=t,a};xa.createRef=function(){return{current:null}};xa.forwardRef=function(t){return{$$typeof:pD,render:t}};xa.isValidElement=t5;xa.lazy=function(t){return{$$typeof:mD,_payload:{_status:-1,_result:t},_init:yD}};xa.memo=function(t,a){return{$$typeof:hD,type:t,compare:a===void 0?null:a}};xa.startTransition=function(t){var a=lb.transition;lb.transition={};try{t()}finally{lb.transition=a}};xa.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};xa.useCallback=function(t,a){return pi.current.useCallback(t,a)};xa.useContext=function(t){return pi.current.useContext(t)};xa.useDebugValue=function(){};xa.useDeferredValue=function(t){return pi.current.useDeferredValue(t)};xa.useEffect=function(t,a){return pi.current.useEffect(t,a)};xa.useId=function(){return pi.current.useId()};xa.useImperativeHandle=function(t,a,s){return pi.current.useImperativeHandle(t,a,s)};xa.useInsertionEffect=function(t,a){return pi.current.useInsertionEffect(t,a)};xa.useLayoutEffect=function(t,a){return pi.current.useLayoutEffect(t,a)};xa.useMemo=function(t,a){return pi.current.useMemo(t,a)};xa.useReducer=function(t,a,s){return pi.current.useReducer(t,a,s)};xa.useRef=function(t){return pi.current.useRef(t)};xa.useState=function(t){return pi.current.useState(t)};xa.useSyncExternalStore=function(t,a,s){return pi.current.useSyncExternalStore(t,a,s)};xa.useTransition=function(){return pi.current.useTransition()};xa.version="18.2.0";HE.exports=xa;var Te=HE.exports;const Hn=eh(Te),Pv=sD({__proto__:null,default:Hn},[Te]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xD=Te,wD=Symbol.for("react.element"),SD=Symbol.for("react.fragment"),TD=Object.prototype.hasOwnProperty,ED=xD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ID={key:!0,ref:!0,__self:!0,__source:!0};function tI(t,a,s){var l,f={},g=null,w=null;s!==void 0&&(g=""+s),a.key!==void 0&&(g=""+a.key),a.ref!==void 0&&(w=a.ref);for(l in a)TD.call(a,l)&&!ID.hasOwnProperty(l)&&(f[l]=a[l]);if(t&&t.defaultProps)for(l in a=t.defaultProps,a)f[l]===void 0&&(f[l]=a[l]);return{$$typeof:wD,type:t,key:g,ref:w,props:f,_owner:ED.current}}y_.Fragment=SD;y_.jsx=tI;y_.jsxs=tI;WE.exports=y_;var q=WE.exports,nI={exports:{}},uo={},aI={exports:{}},rI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function a(St,ke){var Ct=St.length;St.push(ke);e:for(;0<Ct;){var Et=Ct-1>>>1,Nt=St[Et];if(0<f(Nt,ke))St[Et]=ke,St[Ct]=Nt,Ct=Et;else break e}}function s(St){return St.length===0?null:St[0]}function l(St){if(St.length===0)return null;var ke=St[0],Ct=St.pop();if(Ct!==ke){St[0]=Ct;e:for(var Et=0,Nt=St.length,Sn=Nt>>>1;Et<Sn;){var Fn=2*(Et+1)-1,nr=St[Fn],Zn=Fn+1,cr=St[Zn];if(0>f(nr,Ct))Zn<Nt&&0>f(cr,nr)?(St[Et]=cr,St[Zn]=Ct,Et=Zn):(St[Et]=nr,St[Fn]=Ct,Et=Fn);else if(Zn<Nt&&0>f(cr,Ct))St[Et]=cr,St[Zn]=Ct,Et=Zn;else break e}}return ke}function f(St,ke){var Ct=St.sortIndex-ke.sortIndex;return Ct!==0?Ct:St.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;t.unstable_now=function(){return g.now()}}else{var w=Date,I=w.now();t.unstable_now=function(){return w.now()-I}}var o=[],M=[],B=1,L=null,O=3,j=!1,Z=!1,H=!1,te=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(St){for(var ke=s(M);ke!==null;){if(ke.callback===null)l(M);else if(ke.startTime<=St)l(M),ke.sortIndex=ke.expirationTime,a(o,ke);else break;ke=s(M)}}function ee(St){if(H=!1,W(St),!Z)if(s(o)!==null)Z=!0,Tn(me);else{var ke=s(M);ke!==null&&ea(ee,ke.startTime-St)}}function me(St,ke){Z=!1,H&&(H=!1,J(Ie),Ie=-1),j=!0;var Ct=O;try{for(W(ke),L=s(o);L!==null&&(!(L.expirationTime>ke)||St&&!Xe());){var Et=L.callback;if(typeof Et=="function"){L.callback=null,O=L.priorityLevel;var Nt=Et(L.expirationTime<=ke);ke=t.unstable_now(),typeof Nt=="function"?L.callback=Nt:L===s(o)&&l(o),W(ke)}else l(o);L=s(o)}if(L!==null)var Sn=!0;else{var Fn=s(M);Fn!==null&&ea(ee,Fn.startTime-ke),Sn=!1}return Sn}finally{L=null,O=Ct,j=!1}}var Se=!1,Me=null,Ie=-1,Ge=5,ge=-1;function Xe(){return!(t.unstable_now()-ge<Ge)}function rt(){if(Me!==null){var St=t.unstable_now();ge=St;var ke=!0;try{ke=Me(!0,St)}finally{ke?Ue():(Se=!1,Me=null)}}else Se=!1}var Ue;if(typeof K=="function")Ue=function(){K(rt)};else if(typeof MessageChannel<"u"){var Bt=new MessageChannel,un=Bt.port2;Bt.port1.onmessage=rt,Ue=function(){un.postMessage(null)}}else Ue=function(){te(rt,0)};function Tn(St){Me=St,Se||(Se=!0,Ue())}function ea(St,ke){Ie=te(function(){St(t.unstable_now())},ke)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(St){St.callback=null},t.unstable_continueExecution=function(){Z||j||(Z=!0,Tn(me))},t.unstable_forceFrameRate=function(St){0>St||125<St?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ge=0<St?Math.floor(1e3/St):5},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_getFirstCallbackNode=function(){return s(o)},t.unstable_next=function(St){switch(O){case 1:case 2:case 3:var ke=3;break;default:ke=O}var Ct=O;O=ke;try{return St()}finally{O=Ct}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(St,ke){switch(St){case 1:case 2:case 3:case 4:case 5:break;default:St=3}var Ct=O;O=St;try{return ke()}finally{O=Ct}},t.unstable_scheduleCallback=function(St,ke,Ct){var Et=t.unstable_now();switch(typeof Ct=="object"&&Ct!==null?(Ct=Ct.delay,Ct=typeof Ct=="number"&&0<Ct?Et+Ct:Et):Ct=Et,St){case 1:var Nt=-1;break;case 2:Nt=250;break;case 5:Nt=1073741823;break;case 4:Nt=1e4;break;default:Nt=5e3}return Nt=Ct+Nt,St={id:B++,callback:ke,priorityLevel:St,startTime:Ct,expirationTime:Nt,sortIndex:-1},Ct>Et?(St.sortIndex=Ct,a(M,St),s(o)===null&&St===s(M)&&(H?(J(Ie),Ie=-1):H=!0,ea(ee,Ct-Et))):(St.sortIndex=Nt,a(o,St),Z||j||(Z=!0,Tn(me))),St},t.unstable_shouldYield=Xe,t.unstable_wrapCallback=function(St){var ke=O;return function(){var Ct=O;O=ke;try{return St.apply(this,arguments)}finally{O=Ct}}}})(rI);aI.exports=rI;var PD=aI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI=Te,co=PD;function Jt(t){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iI=new Set,Qm={};function vp(t,a){Ff(t,a),Ff(t+"Capture",a)}function Ff(t,a){for(Qm[t]=a,t=0;t<a.length;t++)iI.add(a[t])}var Fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zv=Object.prototype.hasOwnProperty,zD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P7={},z7={};function AD(t){return zv.call(z7,t)?!0:zv.call(P7,t)?!1:zD.test(t)?z7[t]=!0:(P7[t]=!0,!1)}function CD(t,a,s,l){if(s!==null&&s.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MD(t,a,s,l){if(a===null||typeof a>"u"||CD(t,a,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function fi(t,a,s,l,f,g,w){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=l,this.attributeNamespace=f,this.mustUseProperty=s,this.propertyName=t,this.type=a,this.sanitizeURL=g,this.removeEmptyString=w}var zs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zs[t]=new fi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var a=t[0];zs[a]=new fi(a,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zs[t]=new fi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zs[t]=new fi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zs[t]=new fi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zs[t]=new fi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zs[t]=new fi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zs[t]=new fi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zs[t]=new fi(t,5,!1,t.toLowerCase(),null,!1,!1)});var n5=/[\-:]([a-z])/g;function a5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var a=t.replace(n5,a5);zs[a]=new fi(a,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var a=t.replace(n5,a5);zs[a]=new fi(a,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var a=t.replace(n5,a5);zs[a]=new fi(a,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zs[t]=new fi(t,1,!1,t.toLowerCase(),null,!1,!1)});zs.xlinkHref=new fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zs[t]=new fi(t,1,!1,t.toLowerCase(),null,!0,!0)});function r5(t,a,s,l){var f=zs.hasOwnProperty(a)?zs[a]:null;(f!==null?f.type!==0:l||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(MD(a,s,f,l)&&(s=null),l||f===null?AD(a)&&(s===null?t.removeAttribute(a):t.setAttribute(a,""+s)):f.mustUseProperty?t[f.propertyName]=s===null?f.type===3?!1:"":s:(a=f.attributeName,l=f.attributeNamespace,s===null?t.removeAttribute(a):(f=f.type,s=f===3||f===4&&s===!0?"":""+s,l?t.setAttributeNS(l,a,s):t.setAttribute(a,s))))}var $l=sI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R1=Symbol.for("react.element"),_f=Symbol.for("react.portal"),yf=Symbol.for("react.fragment"),s5=Symbol.for("react.strict_mode"),Av=Symbol.for("react.profiler"),oI=Symbol.for("react.provider"),cI=Symbol.for("react.context"),i5=Symbol.for("react.forward_ref"),Cv=Symbol.for("react.suspense"),Mv=Symbol.for("react.suspense_list"),o5=Symbol.for("react.memo"),Eu=Symbol.for("react.lazy"),lI=Symbol.for("react.offscreen"),A7=Symbol.iterator;function bm(t){return t===null||typeof t!="object"?null:(t=A7&&t[A7]||t["@@iterator"],typeof t=="function"?t:null)}var Cr=Object.assign,S3;function Cm(t){if(S3===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);S3=a&&a[1]||""}return`
`+S3+t}var T3=!1;function E3(t,a){if(!t||T3)return"";T3=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(M){var l=M}Reflect.construct(t,[],a)}else{try{a.call()}catch(M){l=M}t.call(a.prototype)}else{try{throw Error()}catch(M){l=M}t()}}catch(M){if(M&&l&&typeof M.stack=="string"){for(var f=M.stack.split(`
`),g=l.stack.split(`
`),w=f.length-1,I=g.length-1;1<=w&&0<=I&&f[w]!==g[I];)I--;for(;1<=w&&0<=I;w--,I--)if(f[w]!==g[I]){if(w!==1||I!==1)do if(w--,I--,0>I||f[w]!==g[I]){var o=`
`+f[w].replace(" at new "," at ");return t.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",t.displayName)),o}while(1<=w&&0<=I);break}}}finally{T3=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Cm(t):""}function RD(t){switch(t.tag){case 5:return Cm(t.type);case 16:return Cm("Lazy");case 13:return Cm("Suspense");case 19:return Cm("SuspenseList");case 0:case 2:case 15:return t=E3(t.type,!1),t;case 11:return t=E3(t.type.render,!1),t;case 1:return t=E3(t.type,!0),t;default:return""}}function Rv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yf:return"Fragment";case _f:return"Portal";case Av:return"Profiler";case s5:return"StrictMode";case Cv:return"Suspense";case Mv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cI:return(t.displayName||"Context")+".Consumer";case oI:return(t._context.displayName||"Context")+".Provider";case i5:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case o5:return a=t.displayName||null,a!==null?a:Rv(t.type)||"Memo";case Eu:a=t._payload,t=t._init;try{return Rv(t(a))}catch{}}return null}function kD(t){var a=t.type;switch(t.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=a.render,t=t.displayName||t.name||"",a.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rv(a);case 8:return a===s5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function qu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uI(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function LD(t){var a=uI(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,a),l=""+t[a];if(!t.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,g=s.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(w){l=""+w,g.call(this,w)}}),Object.defineProperty(t,a,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function k1(t){t._valueTracker||(t._valueTracker=LD(t))}function dI(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=uI(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function Pb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kv(t,a){var s=a.checked;return Cr({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function C7(t,a){var s=a.defaultValue==null?"":a.defaultValue,l=a.checked!=null?a.checked:a.defaultChecked;s=qu(a.value!=null?a.value:s),t._wrapperState={initialChecked:l,initialValue:s,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function pI(t,a){a=a.checked,a!=null&&r5(t,"checked",a,!1)}function Lv(t,a){pI(t,a);var s=qu(a.value),l=a.type;if(s!=null)l==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}a.hasOwnProperty("value")?Dv(t,a.type,s):a.hasOwnProperty("defaultValue")&&Dv(t,a.type,qu(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(t.defaultChecked=!!a.defaultChecked)}function M7(t,a,s){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var l=a.type;if(!(l!=="submit"&&l!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+t._wrapperState.initialValue,s||a===t.value||(t.value=a),t.defaultValue=a}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Dv(t,a,s){(a!=="number"||Pb(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Mm=Array.isArray;function Mf(t,a,s,l){if(t=t.options,a){a={};for(var f=0;f<s.length;f++)a["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=a.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&l&&(t[s].defaultSelected=!0)}else{for(s=""+qu(s),a=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Ov(t,a){if(a.dangerouslySetInnerHTML!=null)throw Error(Jt(91));return Cr({},a,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function R7(t,a){var s=a.value;if(s==null){if(s=a.children,a=a.defaultValue,s!=null){if(a!=null)throw Error(Jt(92));if(Mm(s)){if(1<s.length)throw Error(Jt(93));s=s[0]}a=s}a==null&&(a=""),s=a}t._wrapperState={initialValue:qu(s)}}function fI(t,a){var s=qu(a.value),l=qu(a.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),a.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),l!=null&&(t.defaultValue=""+l)}function k7(t){var a=t.textContent;a===t._wrapperState.initialValue&&a!==""&&a!==null&&(t.value=a)}function hI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bv(t,a){return t==null||t==="http://www.w3.org/1999/xhtml"?hI(a):t==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var L1,mI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,s,l,f){MSApp.execUnsafeLocalFunction(function(){return t(a,s,l,f)})}:t}(function(t,a){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=a;else{for(L1=L1||document.createElement("div"),L1.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=L1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;a.firstChild;)t.appendChild(a.firstChild)}});function e0(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var Om={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DD=["Webkit","ms","Moz","O"];Object.keys(Om).forEach(function(t){DD.forEach(function(a){a=a+t.charAt(0).toUpperCase()+t.substring(1),Om[a]=Om[t]})});function gI(t,a,s){return a==null||typeof a=="boolean"||a===""?"":s||typeof a!="number"||a===0||Om.hasOwnProperty(t)&&Om[t]?(""+a).trim():a+"px"}function bI(t,a){t=t.style;for(var s in a)if(a.hasOwnProperty(s)){var l=s.indexOf("--")===0,f=gI(s,a[s],l);s==="float"&&(s="cssFloat"),l?t.setProperty(s,f):t[s]=f}}var OD=Cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nv(t,a){if(a){if(OD[t]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(Jt(137,t));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(Jt(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(Jt(61))}if(a.style!=null&&typeof a.style!="object")throw Error(Jt(62))}}function Fv(t,a){if(t.indexOf("-")===-1)return typeof a.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jv=null;function c5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uv=null,Rf=null,kf=null;function L7(t){if(t=U0(t)){if(typeof Uv!="function")throw Error(Jt(280));var a=t.stateNode;a&&(a=T_(a),Uv(t.stateNode,t.type,a))}}function _I(t){Rf?kf?kf.push(t):kf=[t]:Rf=t}function yI(){if(Rf){var t=Rf,a=kf;if(kf=Rf=null,L7(t),a)for(t=0;t<a.length;t++)L7(a[t])}}function vI(t,a){return t(a)}function xI(){}var I3=!1;function wI(t,a,s){if(I3)return t(a,s);I3=!0;try{return vI(t,a,s)}finally{I3=!1,(Rf!==null||kf!==null)&&(xI(),yI())}}function t0(t,a){var s=t.stateNode;if(s===null)return null;var l=T_(s);if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(Jt(231,a,typeof s));return s}var Vv=!1;if(Fl)try{var _m={};Object.defineProperty(_m,"passive",{get:function(){Vv=!0}}),window.addEventListener("test",_m,_m),window.removeEventListener("test",_m,_m)}catch{Vv=!1}function BD(t,a,s,l,f,g,w,I,o){var M=Array.prototype.slice.call(arguments,3);try{a.apply(s,M)}catch(B){this.onError(B)}}var Bm=!1,zb=null,Ab=!1,Gv=null,ND={onError:function(t){Bm=!0,zb=t}};function FD(t,a,s,l,f,g,w,I,o){Bm=!1,zb=null,BD.apply(ND,arguments)}function jD(t,a,s,l,f,g,w,I,o){if(FD.apply(this,arguments),Bm){if(Bm){var M=zb;Bm=!1,zb=null}else throw Error(Jt(198));Ab||(Ab=!0,Gv=M)}}function xp(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,a.flags&4098&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function SI(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function D7(t){if(xp(t)!==t)throw Error(Jt(188))}function UD(t){var a=t.alternate;if(!a){if(a=xp(t),a===null)throw Error(Jt(188));return a!==t?null:t}for(var s=t,l=a;;){var f=s.return;if(f===null)break;var g=f.alternate;if(g===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===s)return D7(f),t;if(g===l)return D7(f),a;g=g.sibling}throw Error(Jt(188))}if(s.return!==l.return)s=f,l=g;else{for(var w=!1,I=f.child;I;){if(I===s){w=!0,s=f,l=g;break}if(I===l){w=!0,l=f,s=g;break}I=I.sibling}if(!w){for(I=g.child;I;){if(I===s){w=!0,s=g,l=f;break}if(I===l){w=!0,l=g,s=f;break}I=I.sibling}if(!w)throw Error(Jt(189))}}if(s.alternate!==l)throw Error(Jt(190))}if(s.tag!==3)throw Error(Jt(188));return s.stateNode.current===s?t:a}function TI(t){return t=UD(t),t!==null?EI(t):null}function EI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var a=EI(t);if(a!==null)return a;t=t.sibling}return null}var II=co.unstable_scheduleCallback,O7=co.unstable_cancelCallback,VD=co.unstable_shouldYield,GD=co.unstable_requestPaint,Ur=co.unstable_now,$D=co.unstable_getCurrentPriorityLevel,l5=co.unstable_ImmediatePriority,PI=co.unstable_UserBlockingPriority,Cb=co.unstable_NormalPriority,qD=co.unstable_LowPriority,zI=co.unstable_IdlePriority,v_=null,Wc=null;function WD(t){if(Wc&&typeof Wc.onCommitFiberRoot=="function")try{Wc.onCommitFiberRoot(v_,t,void 0,(t.current.flags&128)===128)}catch{}}var hc=Math.clz32?Math.clz32:YD,HD=Math.log,ZD=Math.LN2;function YD(t){return t>>>=0,t===0?32:31-(HD(t)/ZD|0)|0}var D1=64,O1=4194304;function Rm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mb(t,a){var s=t.pendingLanes;if(s===0)return 0;var l=0,f=t.suspendedLanes,g=t.pingedLanes,w=s&268435455;if(w!==0){var I=w&~f;I!==0?l=Rm(I):(g&=w,g!==0&&(l=Rm(g)))}else w=s&~f,w!==0?l=Rm(w):g!==0&&(l=Rm(g));if(l===0)return 0;if(a!==0&&a!==l&&!(a&f)&&(f=l&-l,g=a&-a,f>=g||f===16&&(g&4194240)!==0))return a;if(l&4&&(l|=s&16),a=t.entangledLanes,a!==0)for(t=t.entanglements,a&=l;0<a;)s=31-hc(a),f=1<<s,l|=t[s],a&=~f;return l}function XD(t,a){switch(t){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JD(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,g=t.pendingLanes;0<g;){var w=31-hc(g),I=1<<w,o=f[w];o===-1?(!(I&s)||I&l)&&(f[w]=XD(I,a)):o<=a&&(t.expiredLanes|=I),g&=~I}}function $v(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AI(){var t=D1;return D1<<=1,!(D1&4194240)&&(D1=64),t}function P3(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function F0(t,a,s){t.pendingLanes|=a,a!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,a=31-hc(a),t[a]=s}function KD(t,a){var s=t.pendingLanes&~a;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=a,t.mutableReadLanes&=a,t.entangledLanes&=a,a=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<s;){var f=31-hc(s),g=1<<f;a[f]=0,l[f]=-1,t[f]=-1,s&=~g}}function u5(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-hc(s),f=1<<l;f&a|t[l]&a&&(t[l]|=a),s&=~f}}var Qa=0;function CI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var MI,d5,RI,kI,LI,qv=!1,B1=[],ku=null,Lu=null,Du=null,n0=new Map,a0=new Map,Pu=[],QD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function B7(t,a){switch(t){case"focusin":case"focusout":ku=null;break;case"dragenter":case"dragleave":Lu=null;break;case"mouseover":case"mouseout":Du=null;break;case"pointerover":case"pointerout":n0.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":a0.delete(a.pointerId)}}function ym(t,a,s,l,f,g){return t===null||t.nativeEvent!==g?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:g,targetContainers:[f]},a!==null&&(a=U0(a),a!==null&&d5(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function eO(t,a,s,l,f){switch(a){case"focusin":return ku=ym(ku,t,a,s,l,f),!0;case"dragenter":return Lu=ym(Lu,t,a,s,l,f),!0;case"mouseover":return Du=ym(Du,t,a,s,l,f),!0;case"pointerover":var g=f.pointerId;return n0.set(g,ym(n0.get(g)||null,t,a,s,l,f)),!0;case"gotpointercapture":return g=f.pointerId,a0.set(g,ym(a0.get(g)||null,t,a,s,l,f)),!0}return!1}function DI(t){var a=rp(t.target);if(a!==null){var s=xp(a);if(s!==null){if(a=s.tag,a===13){if(a=SI(s),a!==null){t.blockedOn=a,LI(t.priority,function(){RI(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ub(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=Wv(t.domEventName,t.eventSystemFlags,a[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);jv=l,s.target.dispatchEvent(l),jv=null}else return a=U0(s),a!==null&&d5(a),t.blockedOn=s,!1;a.shift()}return!0}function N7(t,a,s){ub(t)&&s.delete(a)}function tO(){qv=!1,ku!==null&&ub(ku)&&(ku=null),Lu!==null&&ub(Lu)&&(Lu=null),Du!==null&&ub(Du)&&(Du=null),n0.forEach(N7),a0.forEach(N7)}function vm(t,a){t.blockedOn===a&&(t.blockedOn=null,qv||(qv=!0,co.unstable_scheduleCallback(co.unstable_NormalPriority,tO)))}function r0(t){function a(f){return vm(f,t)}if(0<B1.length){vm(B1[0],t);for(var s=1;s<B1.length;s++){var l=B1[s];l.blockedOn===t&&(l.blockedOn=null)}}for(ku!==null&&vm(ku,t),Lu!==null&&vm(Lu,t),Du!==null&&vm(Du,t),n0.forEach(a),a0.forEach(a),s=0;s<Pu.length;s++)l=Pu[s],l.blockedOn===t&&(l.blockedOn=null);for(;0<Pu.length&&(s=Pu[0],s.blockedOn===null);)DI(s),s.blockedOn===null&&Pu.shift()}var Lf=$l.ReactCurrentBatchConfig,Rb=!0;function nO(t,a,s,l){var f=Qa,g=Lf.transition;Lf.transition=null;try{Qa=1,p5(t,a,s,l)}finally{Qa=f,Lf.transition=g}}function aO(t,a,s,l){var f=Qa,g=Lf.transition;Lf.transition=null;try{Qa=4,p5(t,a,s,l)}finally{Qa=f,Lf.transition=g}}function p5(t,a,s,l){if(Rb){var f=Wv(t,a,s,l);if(f===null)B3(t,a,l,kb,s),B7(t,l);else if(eO(f,t,a,s,l))l.stopPropagation();else if(B7(t,l),a&4&&-1<QD.indexOf(t)){for(;f!==null;){var g=U0(f);if(g!==null&&MI(g),g=Wv(t,a,s,l),g===null&&B3(t,a,l,kb,s),g===f)break;f=g}f!==null&&l.stopPropagation()}else B3(t,a,l,null,s)}}var kb=null;function Wv(t,a,s,l){if(kb=null,t=c5(l),t=rp(t),t!==null)if(a=xp(t),a===null)t=null;else if(s=a.tag,s===13){if(t=SI(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null);return kb=t,null}function OI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($D()){case l5:return 1;case PI:return 4;case Cb:case qD:return 16;case zI:return 536870912;default:return 16}default:return 16}}var Au=null,f5=null,db=null;function BI(){if(db)return db;var t,a=f5,s=a.length,l,f="value"in Au?Au.value:Au.textContent,g=f.length;for(t=0;t<s&&a[t]===f[t];t++);var w=s-t;for(l=1;l<=w&&a[s-l]===f[g-l];l++);return db=f.slice(t,1<l?1-l:void 0)}function pb(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function N1(){return!0}function F7(){return!1}function po(t){function a(s,l,f,g,w){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var I in t)t.hasOwnProperty(I)&&(s=t[I],this[I]=s?s(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?N1:F7,this.isPropagationStopped=F7,this}return Cr(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=N1)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=N1)},persist:function(){},isPersistent:N1}),a}var nh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h5=po(nh),j0=Cr({},nh,{view:0,detail:0}),rO=po(j0),z3,A3,xm,x_=Cr({},j0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xm&&(xm&&t.type==="mousemove"?(z3=t.screenX-xm.screenX,A3=t.screenY-xm.screenY):A3=z3=0,xm=t),z3)},movementY:function(t){return"movementY"in t?t.movementY:A3}}),j7=po(x_),sO=Cr({},x_,{dataTransfer:0}),iO=po(sO),oO=Cr({},j0,{relatedTarget:0}),C3=po(oO),cO=Cr({},nh,{animationName:0,elapsedTime:0,pseudoElement:0}),lO=po(cO),uO=Cr({},nh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dO=po(uO),pO=Cr({},nh,{data:0}),U7=po(pO),fO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gO(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=mO[t])?!!a[t]:!1}function m5(){return gO}var bO=Cr({},j0,{key:function(t){if(t.key){var a=fO[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=pb(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m5,charCode:function(t){return t.type==="keypress"?pb(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pb(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_O=po(bO),yO=Cr({},x_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V7=po(yO),vO=Cr({},j0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m5}),xO=po(vO),wO=Cr({},nh,{propertyName:0,elapsedTime:0,pseudoElement:0}),SO=po(wO),TO=Cr({},x_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EO=po(TO),IO=[9,13,27,32],g5=Fl&&"CompositionEvent"in window,Nm=null;Fl&&"documentMode"in document&&(Nm=document.documentMode);var PO=Fl&&"TextEvent"in window&&!Nm,NI=Fl&&(!g5||Nm&&8<Nm&&11>=Nm),G7=" ",$7=!1;function FI(t,a){switch(t){case"keyup":return IO.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vf=!1;function zO(t,a){switch(t){case"compositionend":return jI(a);case"keypress":return a.which!==32?null:($7=!0,G7);case"textInput":return t=a.data,t===G7&&$7?null:t;default:return null}}function AO(t,a){if(vf)return t==="compositionend"||!g5&&FI(t,a)?(t=BI(),db=f5=Au=null,vf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return NI&&a.locale!=="ko"?null:a.data;default:return null}}var CO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q7(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!CO[t.type]:a==="textarea"}function UI(t,a,s,l){_I(l),a=Lb(a,"onChange"),0<a.length&&(s=new h5("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var Fm=null,s0=null;function MO(t){KI(t,0)}function w_(t){var a=Sf(t);if(dI(a))return t}function RO(t,a){if(t==="change")return a}var VI=!1;if(Fl){var M3;if(Fl){var R3="oninput"in document;if(!R3){var W7=document.createElement("div");W7.setAttribute("oninput","return;"),R3=typeof W7.oninput=="function"}M3=R3}else M3=!1;VI=M3&&(!document.documentMode||9<document.documentMode)}function H7(){Fm&&(Fm.detachEvent("onpropertychange",GI),s0=Fm=null)}function GI(t){if(t.propertyName==="value"&&w_(s0)){var a=[];UI(a,s0,t,c5(t)),wI(MO,a)}}function kO(t,a,s){t==="focusin"?(H7(),Fm=a,s0=s,Fm.attachEvent("onpropertychange",GI)):t==="focusout"&&H7()}function LO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return w_(s0)}function DO(t,a){if(t==="click")return w_(a)}function OO(t,a){if(t==="input"||t==="change")return w_(a)}function BO(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var gc=typeof Object.is=="function"?Object.is:BO;function i0(t,a){if(gc(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!zv.call(a,f)||!gc(t[f],a[f]))return!1}return!0}function Z7(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Y7(t,a){var s=Z7(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Z7(s)}}function $I(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?$I(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function qI(){for(var t=window,a=Pb();a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=Pb(t.document)}return a}function b5(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}function NO(t){var a=qI(),s=t.focusedElem,l=t.selectionRange;if(a!==s&&s&&s.ownerDocument&&$I(s.ownerDocument.documentElement,s)){if(l!==null&&b5(s)){if(a=l.start,t=l.end,t===void 0&&(t=a),"selectionStart"in s)s.selectionStart=a,s.selectionEnd=Math.min(t,s.value.length);else if(t=(a=s.ownerDocument||document)&&a.defaultView||window,t.getSelection){t=t.getSelection();var f=s.textContent.length,g=Math.min(l.start,f);l=l.end===void 0?g:Math.min(l.end,f),!t.extend&&g>l&&(f=l,l=g,g=f),f=Y7(s,g);var w=Y7(s,l);f&&w&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==w.node||t.focusOffset!==w.offset)&&(a=a.createRange(),a.setStart(f.node,f.offset),t.removeAllRanges(),g>l?(t.addRange(a),t.extend(w.node,w.offset)):(a.setEnd(w.node,w.offset),t.addRange(a)))}}for(a=[],t=s;t=t.parentNode;)t.nodeType===1&&a.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<a.length;s++)t=a[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var FO=Fl&&"documentMode"in document&&11>=document.documentMode,xf=null,Hv=null,jm=null,Zv=!1;function X7(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Zv||xf==null||xf!==Pb(l)||(l=xf,"selectionStart"in l&&b5(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),jm&&i0(jm,l)||(jm=l,l=Lb(Hv,"onSelect"),0<l.length&&(a=new h5("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=xf)))}function F1(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var wf={animationend:F1("Animation","AnimationEnd"),animationiteration:F1("Animation","AnimationIteration"),animationstart:F1("Animation","AnimationStart"),transitionend:F1("Transition","TransitionEnd")},k3={},WI={};Fl&&(WI=document.createElement("div").style,"AnimationEvent"in window||(delete wf.animationend.animation,delete wf.animationiteration.animation,delete wf.animationstart.animation),"TransitionEvent"in window||delete wf.transitionend.transition);function S_(t){if(k3[t])return k3[t];if(!wf[t])return t;var a=wf[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in WI)return k3[t]=a[s];return t}var HI=S_("animationend"),ZI=S_("animationiteration"),YI=S_("animationstart"),XI=S_("transitionend"),JI=new Map,J7="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xu(t,a){JI.set(t,a),vp(a,[t])}for(var L3=0;L3<J7.length;L3++){var D3=J7[L3],jO=D3.toLowerCase(),UO=D3[0].toUpperCase()+D3.slice(1);Xu(jO,"on"+UO)}Xu(HI,"onAnimationEnd");Xu(ZI,"onAnimationIteration");Xu(YI,"onAnimationStart");Xu("dblclick","onDoubleClick");Xu("focusin","onFocus");Xu("focusout","onBlur");Xu(XI,"onTransitionEnd");Ff("onMouseEnter",["mouseout","mouseover"]);Ff("onMouseLeave",["mouseout","mouseover"]);Ff("onPointerEnter",["pointerout","pointerover"]);Ff("onPointerLeave",["pointerout","pointerover"]);vp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vp("onBeforeInput",["compositionend","keypress","textInput","paste"]);vp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var km="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VO=new Set("cancel close invalid load scroll toggle".split(" ").concat(km));function K7(t,a,s){var l=t.type||"unknown-event";t.currentTarget=s,jD(l,a,void 0,t),t.currentTarget=null}function KI(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],f=l.event;l=l.listeners;e:{var g=void 0;if(a)for(var w=l.length-1;0<=w;w--){var I=l[w],o=I.instance,M=I.currentTarget;if(I=I.listener,o!==g&&f.isPropagationStopped())break e;K7(f,I,M),g=o}else for(w=0;w<l.length;w++){if(I=l[w],o=I.instance,M=I.currentTarget,I=I.listener,o!==g&&f.isPropagationStopped())break e;K7(f,I,M),g=o}}}if(Ab)throw t=Gv,Ab=!1,Gv=null,t}function _r(t,a){var s=a[Qv];s===void 0&&(s=a[Qv]=new Set);var l=t+"__bubble";s.has(l)||(QI(a,t,2,!1),s.add(l))}function O3(t,a,s){var l=0;a&&(l|=4),QI(s,t,l,a)}var j1="_reactListening"+Math.random().toString(36).slice(2);function o0(t){if(!t[j1]){t[j1]=!0,iI.forEach(function(s){s!=="selectionchange"&&(VO.has(s)||O3(s,!1,t),O3(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[j1]||(a[j1]=!0,O3("selectionchange",!1,a))}}function QI(t,a,s,l){switch(OI(a)){case 1:var f=nO;break;case 4:f=aO;break;default:f=p5}s=f.bind(null,a,s,t),f=void 0,!Vv||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(a,s,{capture:!0,passive:f}):t.addEventListener(a,s,!0):f!==void 0?t.addEventListener(a,s,{passive:f}):t.addEventListener(a,s,!1)}function B3(t,a,s,l,f){var g=l;if(!(a&1)&&!(a&2)&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var I=l.stateNode.containerInfo;if(I===f||I.nodeType===8&&I.parentNode===f)break;if(w===4)for(w=l.return;w!==null;){var o=w.tag;if((o===3||o===4)&&(o=w.stateNode.containerInfo,o===f||o.nodeType===8&&o.parentNode===f))return;w=w.return}for(;I!==null;){if(w=rp(I),w===null)return;if(o=w.tag,o===5||o===6){l=g=w;continue e}I=I.parentNode}}l=l.return}wI(function(){var M=g,B=c5(s),L=[];e:{var O=JI.get(t);if(O!==void 0){var j=h5,Z=t;switch(t){case"keypress":if(pb(s)===0)break e;case"keydown":case"keyup":j=_O;break;case"focusin":Z="focus",j=C3;break;case"focusout":Z="blur",j=C3;break;case"beforeblur":case"afterblur":j=C3;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=j7;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=iO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=xO;break;case HI:case ZI:case YI:j=lO;break;case XI:j=SO;break;case"scroll":j=rO;break;case"wheel":j=EO;break;case"copy":case"cut":case"paste":j=dO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=V7}var H=(a&4)!==0,te=!H&&t==="scroll",J=H?O!==null?O+"Capture":null:O;H=[];for(var K=M,W;K!==null;){W=K;var ee=W.stateNode;if(W.tag===5&&ee!==null&&(W=ee,J!==null&&(ee=t0(K,J),ee!=null&&H.push(c0(K,ee,W)))),te)break;K=K.return}0<H.length&&(O=new j(O,Z,null,s,B),L.push({event:O,listeners:H}))}}if(!(a&7)){e:{if(O=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",O&&s!==jv&&(Z=s.relatedTarget||s.fromElement)&&(rp(Z)||Z[jl]))break e;if((j||O)&&(O=B.window===B?B:(O=B.ownerDocument)?O.defaultView||O.parentWindow:window,j?(Z=s.relatedTarget||s.toElement,j=M,Z=Z?rp(Z):null,Z!==null&&(te=xp(Z),Z!==te||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(j=null,Z=M),j!==Z)){if(H=j7,ee="onMouseLeave",J="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(H=V7,ee="onPointerLeave",J="onPointerEnter",K="pointer"),te=j==null?O:Sf(j),W=Z==null?O:Sf(Z),O=new H(ee,K+"leave",j,s,B),O.target=te,O.relatedTarget=W,ee=null,rp(B)===M&&(H=new H(J,K+"enter",Z,s,B),H.target=W,H.relatedTarget=te,ee=H),te=ee,j&&Z)t:{for(H=j,J=Z,K=0,W=H;W;W=df(W))K++;for(W=0,ee=J;ee;ee=df(ee))W++;for(;0<K-W;)H=df(H),K--;for(;0<W-K;)J=df(J),W--;for(;K--;){if(H===J||J!==null&&H===J.alternate)break t;H=df(H),J=df(J)}H=null}else H=null;j!==null&&Q7(L,O,j,H,!1),Z!==null&&te!==null&&Q7(L,te,Z,H,!0)}}e:{if(O=M?Sf(M):window,j=O.nodeName&&O.nodeName.toLowerCase(),j==="select"||j==="input"&&O.type==="file")var me=RO;else if(q7(O))if(VI)me=OO;else{me=LO;var Se=kO}else(j=O.nodeName)&&j.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(me=DO);if(me&&(me=me(t,M))){UI(L,me,s,B);break e}Se&&Se(t,O,M),t==="focusout"&&(Se=O._wrapperState)&&Se.controlled&&O.type==="number"&&Dv(O,"number",O.value)}switch(Se=M?Sf(M):window,t){case"focusin":(q7(Se)||Se.contentEditable==="true")&&(xf=Se,Hv=M,jm=null);break;case"focusout":jm=Hv=xf=null;break;case"mousedown":Zv=!0;break;case"contextmenu":case"mouseup":case"dragend":Zv=!1,X7(L,s,B);break;case"selectionchange":if(FO)break;case"keydown":case"keyup":X7(L,s,B)}var Me;if(g5)e:{switch(t){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else vf?FI(t,s)&&(Ie="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Ie="onCompositionStart");Ie&&(NI&&s.locale!=="ko"&&(vf||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&vf&&(Me=BI()):(Au=B,f5="value"in Au?Au.value:Au.textContent,vf=!0)),Se=Lb(M,Ie),0<Se.length&&(Ie=new U7(Ie,t,null,s,B),L.push({event:Ie,listeners:Se}),Me?Ie.data=Me:(Me=jI(s),Me!==null&&(Ie.data=Me)))),(Me=PO?zO(t,s):AO(t,s))&&(M=Lb(M,"onBeforeInput"),0<M.length&&(B=new U7("onBeforeInput","beforeinput",null,s,B),L.push({event:B,listeners:M}),B.data=Me))}KI(L,a)})}function c0(t,a,s){return{instance:t,listener:a,currentTarget:s}}function Lb(t,a){for(var s=a+"Capture",l=[];t!==null;){var f=t,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=t0(t,s),g!=null&&l.unshift(c0(t,g,f)),g=t0(t,a),g!=null&&l.push(c0(t,g,f))),t=t.return}return l}function df(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Q7(t,a,s,l,f){for(var g=a._reactName,w=[];s!==null&&s!==l;){var I=s,o=I.alternate,M=I.stateNode;if(o!==null&&o===l)break;I.tag===5&&M!==null&&(I=M,f?(o=t0(s,g),o!=null&&w.unshift(c0(s,o,I))):f||(o=t0(s,g),o!=null&&w.push(c0(s,o,I)))),s=s.return}w.length!==0&&t.push({event:a,listeners:w})}var GO=/\r\n?/g,$O=/\u0000|\uFFFD/g;function eS(t){return(typeof t=="string"?t:""+t).replace(GO,`
`).replace($O,"")}function U1(t,a,s){if(a=eS(a),eS(t)!==a&&s)throw Error(Jt(425))}function Db(){}var Yv=null,Xv=null;function Jv(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kv=typeof setTimeout=="function"?setTimeout:void 0,qO=typeof clearTimeout=="function"?clearTimeout:void 0,tS=typeof Promise=="function"?Promise:void 0,WO=typeof queueMicrotask=="function"?queueMicrotask:typeof tS<"u"?function(t){return tS.resolve(null).then(t).catch(HO)}:Kv;function HO(t){setTimeout(function(){throw t})}function N3(t,a){var s=a,l=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"){if(l===0){t.removeChild(f),r0(a);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=f}while(s);r0(a)}function Ou(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return t}function nS(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return t;a--}else s==="/$"&&a++}t=t.previousSibling}return null}var ah=Math.random().toString(36).slice(2),Gc="__reactFiber$"+ah,l0="__reactProps$"+ah,jl="__reactContainer$"+ah,Qv="__reactEvents$"+ah,ZO="__reactListeners$"+ah,YO="__reactHandles$"+ah;function rp(t){var a=t[Gc];if(a)return a;for(var s=t.parentNode;s;){if(a=s[jl]||s[Gc]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=nS(t);t!==null;){if(s=t[Gc])return s;t=nS(t)}return a}t=s,s=t.parentNode}return null}function U0(t){return t=t[Gc]||t[jl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Jt(33))}function T_(t){return t[l0]||null}var ex=[],Tf=-1;function Ju(t){return{current:t}}function yr(t){0>Tf||(t.current=ex[Tf],ex[Tf]=null,Tf--)}function hr(t,a){Tf++,ex[Tf]=t.current,t.current=a}var Wu={},Hs=Ju(Wu),ki=Ju(!1),up=Wu;function jf(t,a){var s=t.type.contextTypes;if(!s)return Wu;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===a)return l.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in s)f[g]=a[g];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=f),f}function Li(t){return t=t.childContextTypes,t!=null}function Ob(){yr(ki),yr(Hs)}function aS(t,a,s){if(Hs.current!==Wu)throw Error(Jt(168));hr(Hs,a),hr(ki,s)}function eP(t,a,s){var l=t.stateNode;if(a=a.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var f in l)if(!(f in a))throw Error(Jt(108,kD(t)||"Unknown",f));return Cr({},s,l)}function Bb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wu,up=Hs.current,hr(Hs,t),hr(ki,ki.current),!0}function rS(t,a,s){var l=t.stateNode;if(!l)throw Error(Jt(169));s?(t=eP(t,a,up),l.__reactInternalMemoizedMergedChildContext=t,yr(ki),yr(Hs),hr(Hs,t)):yr(ki),hr(ki,s)}var Ll=null,E_=!1,F3=!1;function tP(t){Ll===null?Ll=[t]:Ll.push(t)}function XO(t){E_=!0,tP(t)}function Ku(){if(!F3&&Ll!==null){F3=!0;var t=0,a=Qa;try{var s=Ll;for(Qa=1;t<s.length;t++){var l=s[t];do l=l(!0);while(l!==null)}Ll=null,E_=!1}catch(f){throw Ll!==null&&(Ll=Ll.slice(t+1)),II(l5,Ku),f}finally{Qa=a,F3=!1}}return null}var Ef=[],If=0,Nb=null,Fb=0,Co=[],Mo=0,dp=null,Dl=1,Ol="";function Xd(t,a){Ef[If++]=Fb,Ef[If++]=Nb,Nb=t,Fb=a}function nP(t,a,s){Co[Mo++]=Dl,Co[Mo++]=Ol,Co[Mo++]=dp,dp=t;var l=Dl;t=Ol;var f=32-hc(l)-1;l&=~(1<<f),s+=1;var g=32-hc(a)+f;if(30<g){var w=f-f%5;g=(l&(1<<w)-1).toString(32),l>>=w,f-=w,Dl=1<<32-hc(a)+f|s<<f|l,Ol=g+t}else Dl=1<<g|s<<f|l,Ol=t}function _5(t){t.return!==null&&(Xd(t,1),nP(t,1,0))}function y5(t){for(;t===Nb;)Nb=Ef[--If],Ef[If]=null,Fb=Ef[--If],Ef[If]=null;for(;t===dp;)dp=Co[--Mo],Co[Mo]=null,Ol=Co[--Mo],Co[Mo]=null,Dl=Co[--Mo],Co[Mo]=null}var so=null,no=null,Er=!1,dc=null;function aP(t,a){var s=Ro(5,null,null,0);s.elementType="DELETED",s.stateNode=a,s.return=t,a=t.deletions,a===null?(t.deletions=[s],t.flags|=16):a.push(s)}function sS(t,a){switch(t.tag){case 5:var s=t.type;return a=a.nodeType!==1||s.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(t.stateNode=a,so=t,no=Ou(a.firstChild),!0):!1;case 6:return a=t.pendingProps===""||a.nodeType!==3?null:a,a!==null?(t.stateNode=a,so=t,no=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(s=dp!==null?{id:Dl,overflow:Ol}:null,t.memoizedState={dehydrated:a,treeContext:s,retryLane:1073741824},s=Ro(18,null,null,0),s.stateNode=a,s.return=t,t.child=s,so=t,no=null,!0):!1;default:return!1}}function tx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function nx(t){if(Er){var a=no;if(a){var s=a;if(!sS(t,a)){if(tx(t))throw Error(Jt(418));a=Ou(s.nextSibling);var l=so;a&&sS(t,a)?aP(l,s):(t.flags=t.flags&-4097|2,Er=!1,so=t)}}else{if(tx(t))throw Error(Jt(418));t.flags=t.flags&-4097|2,Er=!1,so=t}}}function iS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;so=t}function V1(t){if(t!==so)return!1;if(!Er)return iS(t),Er=!0,!1;var a;if((a=t.tag!==3)&&!(a=t.tag!==5)&&(a=t.type,a=a!=="head"&&a!=="body"&&!Jv(t.type,t.memoizedProps)),a&&(a=no)){if(tx(t))throw rP(),Error(Jt(418));for(;a;)aP(t,a),a=Ou(a.nextSibling)}if(iS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Jt(317));e:{for(t=t.nextSibling,a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(a===0){no=Ou(t.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++}t=t.nextSibling}no=null}}else no=so?Ou(t.stateNode.nextSibling):null;return!0}function rP(){for(var t=no;t;)t=Ou(t.nextSibling)}function Uf(){no=so=null,Er=!1}function v5(t){dc===null?dc=[t]:dc.push(t)}var JO=$l.ReactCurrentBatchConfig;function lc(t,a){if(t&&t.defaultProps){a=Cr({},a),t=t.defaultProps;for(var s in t)a[s]===void 0&&(a[s]=t[s]);return a}return a}var jb=Ju(null),Ub=null,Pf=null,x5=null;function w5(){x5=Pf=Ub=null}function S5(t){var a=jb.current;yr(jb),t._currentValue=a}function ax(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function Df(t,a){Ub=t,x5=Pf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&a&&(Ri=!0),t.firstContext=null)}function Oo(t){var a=t._currentValue;if(x5!==t)if(t={context:t,memoizedValue:a,next:null},Pf===null){if(Ub===null)throw Error(Jt(308));Pf=t,Ub.dependencies={lanes:0,firstContext:t}}else Pf=Pf.next=t;return a}var sp=null;function T5(t){sp===null?sp=[t]:sp.push(t)}function sP(t,a,s,l){var f=a.interleaved;return f===null?(s.next=s,T5(a)):(s.next=f.next,f.next=s),a.interleaved=s,Ul(t,l)}function Ul(t,a){t.lanes|=a;var s=t.alternate;for(s!==null&&(s.lanes|=a),s=t,t=t.return;t!==null;)t.childLanes|=a,s=t.alternate,s!==null&&(s.childLanes|=a),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Iu=!1;function E5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iP(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nl(t,a){return{eventTime:t,lane:a,tag:0,payload:null,callback:null,next:null}}function Bu(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,Ra&2){var f=l.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),l.pending=a,Ul(t,s)}return f=l.interleaved,f===null?(a.next=a,T5(l)):(a.next=f.next,f.next=a),l.interleaved=a,Ul(t,s)}function fb(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194240)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,u5(t,s)}}function oS(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var w={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};g===null?f=g=w:g=g.next=w,s=s.next}while(s!==null);g===null?f=g=a:g=g.next=a}else f=g=a;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:l.shared,effects:l.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}function Vb(t,a,s,l){var f=t.updateQueue;Iu=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var o=I,M=o.next;o.next=null,w===null?g=M:w.next=M,w=o;var B=t.alternate;B!==null&&(B=B.updateQueue,I=B.lastBaseUpdate,I!==w&&(I===null?B.firstBaseUpdate=M:I.next=M,B.lastBaseUpdate=o))}if(g!==null){var L=f.baseState;w=0,B=M=o=null,I=g;do{var O=I.lane,j=I.eventTime;if((l&O)===O){B!==null&&(B=B.next={eventTime:j,lane:0,tag:I.tag,payload:I.payload,callback:I.callback,next:null});e:{var Z=t,H=I;switch(O=a,j=s,H.tag){case 1:if(Z=H.payload,typeof Z=="function"){L=Z.call(j,L,O);break e}L=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=H.payload,O=typeof Z=="function"?Z.call(j,L,O):Z,O==null)break e;L=Cr({},L,O);break e;case 2:Iu=!0}}I.callback!==null&&I.lane!==0&&(t.flags|=64,O=f.effects,O===null?f.effects=[I]:O.push(I))}else j={eventTime:j,lane:O,tag:I.tag,payload:I.payload,callback:I.callback,next:null},B===null?(M=B=j,o=L):B=B.next=j,w|=O;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;O=I,I=O.next,O.next=null,f.lastBaseUpdate=O,f.shared.pending=null}}while(!0);if(B===null&&(o=L),f.baseState=o,f.firstBaseUpdate=M,f.lastBaseUpdate=B,a=f.shared.interleaved,a!==null){f=a;do w|=f.lane,f=f.next;while(f!==a)}else g===null&&(f.shared.lanes=0);fp|=w,t.lanes=w,t.memoizedState=L}}function cS(t,a,s){if(t=a.effects,a.effects=null,t!==null)for(a=0;a<t.length;a++){var l=t[a],f=l.callback;if(f!==null){if(l.callback=null,l=s,typeof f!="function")throw Error(Jt(191,f));f.call(l)}}}var oP=new sI.Component().refs;function rx(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:Cr({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var I_={isMounted:function(t){return(t=t._reactInternals)?xp(t)===t:!1},enqueueSetState:function(t,a,s){t=t._reactInternals;var l=ui(),f=Fu(t),g=Nl(l,f);g.payload=a,s!=null&&(g.callback=s),a=Bu(t,g,f),a!==null&&(mc(a,t,f,l),fb(a,t,f))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=ui(),f=Fu(t),g=Nl(l,f);g.tag=1,g.payload=a,s!=null&&(g.callback=s),a=Bu(t,g,f),a!==null&&(mc(a,t,f,l),fb(a,t,f))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=ui(),l=Fu(t),f=Nl(s,l);f.tag=2,a!=null&&(f.callback=a),a=Bu(t,f,l),a!==null&&(mc(a,t,l,s),fb(a,t,l))}};function lS(t,a,s,l,f,g,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,g,w):a.prototype&&a.prototype.isPureReactComponent?!i0(s,l)||!i0(f,g):!0}function cP(t,a,s){var l=!1,f=Wu,g=a.contextType;return typeof g=="object"&&g!==null?g=Oo(g):(f=Li(a)?up:Hs.current,l=a.contextTypes,g=(l=l!=null)?jf(t,f):Wu),a=new a(s,g),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=I_,t.stateNode=a,a._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=g),a}function uS(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&I_.enqueueReplaceState(a,a.state,null)}function sx(t,a,s,l){var f=t.stateNode;f.props=s,f.state=t.memoizedState,f.refs=oP,E5(t);var g=a.contextType;typeof g=="object"&&g!==null?f.context=Oo(g):(g=Li(a)?up:Hs.current,f.context=jf(t,g)),f.state=t.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(rx(t,a,g,s),f.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(a=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),a!==f.state&&I_.enqueueReplaceState(f,f.state,null),Vb(t,s,f,l),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function wm(t,a,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Jt(309));var l=s.stateNode}if(!l)throw Error(Jt(147,t));var f=l,g=""+t;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===g?a.ref:(a=function(w){var I=f.refs;I===oP&&(I=f.refs={}),w===null?delete I[g]:I[g]=w},a._stringRef=g,a)}if(typeof t!="string")throw Error(Jt(284));if(!s._owner)throw Error(Jt(290,t))}return t}function G1(t,a){throw t=Object.prototype.toString.call(a),Error(Jt(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t))}function dS(t){var a=t._init;return a(t._payload)}function lP(t){function a(J,K){if(t){var W=J.deletions;W===null?(J.deletions=[K],J.flags|=16):W.push(K)}}function s(J,K){if(!t)return null;for(;K!==null;)a(J,K),K=K.sibling;return null}function l(J,K){for(J=new Map;K!==null;)K.key!==null?J.set(K.key,K):J.set(K.index,K),K=K.sibling;return J}function f(J,K){return J=ju(J,K),J.index=0,J.sibling=null,J}function g(J,K,W){return J.index=W,t?(W=J.alternate,W!==null?(W=W.index,W<K?(J.flags|=2,K):W):(J.flags|=2,K)):(J.flags|=1048576,K)}function w(J){return t&&J.alternate===null&&(J.flags|=2),J}function I(J,K,W,ee){return K===null||K.tag!==6?(K=W3(W,J.mode,ee),K.return=J,K):(K=f(K,W),K.return=J,K)}function o(J,K,W,ee){var me=W.type;return me===yf?B(J,K,W.props.children,ee,W.key):K!==null&&(K.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Eu&&dS(me)===K.type)?(ee=f(K,W.props),ee.ref=wm(J,K,W),ee.return=J,ee):(ee=yb(W.type,W.key,W.props,null,J.mode,ee),ee.ref=wm(J,K,W),ee.return=J,ee)}function M(J,K,W,ee){return K===null||K.tag!==4||K.stateNode.containerInfo!==W.containerInfo||K.stateNode.implementation!==W.implementation?(K=H3(W,J.mode,ee),K.return=J,K):(K=f(K,W.children||[]),K.return=J,K)}function B(J,K,W,ee,me){return K===null||K.tag!==7?(K=lp(W,J.mode,ee,me),K.return=J,K):(K=f(K,W),K.return=J,K)}function L(J,K,W){if(typeof K=="string"&&K!==""||typeof K=="number")return K=W3(""+K,J.mode,W),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case R1:return W=yb(K.type,K.key,K.props,null,J.mode,W),W.ref=wm(J,null,K),W.return=J,W;case _f:return K=H3(K,J.mode,W),K.return=J,K;case Eu:var ee=K._init;return L(J,ee(K._payload),W)}if(Mm(K)||bm(K))return K=lp(K,J.mode,W,null),K.return=J,K;G1(J,K)}return null}function O(J,K,W,ee){var me=K!==null?K.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return me!==null?null:I(J,K,""+W,ee);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case R1:return W.key===me?o(J,K,W,ee):null;case _f:return W.key===me?M(J,K,W,ee):null;case Eu:return me=W._init,O(J,K,me(W._payload),ee)}if(Mm(W)||bm(W))return me!==null?null:B(J,K,W,ee,null);G1(J,W)}return null}function j(J,K,W,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return J=J.get(W)||null,I(K,J,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case R1:return J=J.get(ee.key===null?W:ee.key)||null,o(K,J,ee,me);case _f:return J=J.get(ee.key===null?W:ee.key)||null,M(K,J,ee,me);case Eu:var Se=ee._init;return j(J,K,W,Se(ee._payload),me)}if(Mm(ee)||bm(ee))return J=J.get(W)||null,B(K,J,ee,me,null);G1(K,ee)}return null}function Z(J,K,W,ee){for(var me=null,Se=null,Me=K,Ie=K=0,Ge=null;Me!==null&&Ie<W.length;Ie++){Me.index>Ie?(Ge=Me,Me=null):Ge=Me.sibling;var ge=O(J,Me,W[Ie],ee);if(ge===null){Me===null&&(Me=Ge);break}t&&Me&&ge.alternate===null&&a(J,Me),K=g(ge,K,Ie),Se===null?me=ge:Se.sibling=ge,Se=ge,Me=Ge}if(Ie===W.length)return s(J,Me),Er&&Xd(J,Ie),me;if(Me===null){for(;Ie<W.length;Ie++)Me=L(J,W[Ie],ee),Me!==null&&(K=g(Me,K,Ie),Se===null?me=Me:Se.sibling=Me,Se=Me);return Er&&Xd(J,Ie),me}for(Me=l(J,Me);Ie<W.length;Ie++)Ge=j(Me,J,Ie,W[Ie],ee),Ge!==null&&(t&&Ge.alternate!==null&&Me.delete(Ge.key===null?Ie:Ge.key),K=g(Ge,K,Ie),Se===null?me=Ge:Se.sibling=Ge,Se=Ge);return t&&Me.forEach(function(Xe){return a(J,Xe)}),Er&&Xd(J,Ie),me}function H(J,K,W,ee){var me=bm(W);if(typeof me!="function")throw Error(Jt(150));if(W=me.call(W),W==null)throw Error(Jt(151));for(var Se=me=null,Me=K,Ie=K=0,Ge=null,ge=W.next();Me!==null&&!ge.done;Ie++,ge=W.next()){Me.index>Ie?(Ge=Me,Me=null):Ge=Me.sibling;var Xe=O(J,Me,ge.value,ee);if(Xe===null){Me===null&&(Me=Ge);break}t&&Me&&Xe.alternate===null&&a(J,Me),K=g(Xe,K,Ie),Se===null?me=Xe:Se.sibling=Xe,Se=Xe,Me=Ge}if(ge.done)return s(J,Me),Er&&Xd(J,Ie),me;if(Me===null){for(;!ge.done;Ie++,ge=W.next())ge=L(J,ge.value,ee),ge!==null&&(K=g(ge,K,Ie),Se===null?me=ge:Se.sibling=ge,Se=ge);return Er&&Xd(J,Ie),me}for(Me=l(J,Me);!ge.done;Ie++,ge=W.next())ge=j(Me,J,Ie,ge.value,ee),ge!==null&&(t&&ge.alternate!==null&&Me.delete(ge.key===null?Ie:ge.key),K=g(ge,K,Ie),Se===null?me=ge:Se.sibling=ge,Se=ge);return t&&Me.forEach(function(rt){return a(J,rt)}),Er&&Xd(J,Ie),me}function te(J,K,W,ee){if(typeof W=="object"&&W!==null&&W.type===yf&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case R1:e:{for(var me=W.key,Se=K;Se!==null;){if(Se.key===me){if(me=W.type,me===yf){if(Se.tag===7){s(J,Se.sibling),K=f(Se,W.props.children),K.return=J,J=K;break e}}else if(Se.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Eu&&dS(me)===Se.type){s(J,Se.sibling),K=f(Se,W.props),K.ref=wm(J,Se,W),K.return=J,J=K;break e}s(J,Se);break}else a(J,Se);Se=Se.sibling}W.type===yf?(K=lp(W.props.children,J.mode,ee,W.key),K.return=J,J=K):(ee=yb(W.type,W.key,W.props,null,J.mode,ee),ee.ref=wm(J,K,W),ee.return=J,J=ee)}return w(J);case _f:e:{for(Se=W.key;K!==null;){if(K.key===Se)if(K.tag===4&&K.stateNode.containerInfo===W.containerInfo&&K.stateNode.implementation===W.implementation){s(J,K.sibling),K=f(K,W.children||[]),K.return=J,J=K;break e}else{s(J,K);break}else a(J,K);K=K.sibling}K=H3(W,J.mode,ee),K.return=J,J=K}return w(J);case Eu:return Se=W._init,te(J,K,Se(W._payload),ee)}if(Mm(W))return Z(J,K,W,ee);if(bm(W))return H(J,K,W,ee);G1(J,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,K!==null&&K.tag===6?(s(J,K.sibling),K=f(K,W),K.return=J,J=K):(s(J,K),K=W3(W,J.mode,ee),K.return=J,J=K),w(J)):s(J,K)}return te}var Vf=lP(!0),uP=lP(!1),V0={},Hc=Ju(V0),u0=Ju(V0),d0=Ju(V0);function ip(t){if(t===V0)throw Error(Jt(174));return t}function I5(t,a){switch(hr(d0,a),hr(u0,t),hr(Hc,V0),t=a.nodeType,t){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Bv(null,"");break;default:t=t===8?a.parentNode:a,a=t.namespaceURI||null,t=t.tagName,a=Bv(a,t)}yr(Hc),hr(Hc,a)}function Gf(){yr(Hc),yr(u0),yr(d0)}function dP(t){ip(d0.current);var a=ip(Hc.current),s=Bv(a,t.type);a!==s&&(hr(u0,t),hr(Hc,s))}function P5(t){u0.current===t&&(yr(Hc),yr(u0))}var zr=Ju(0);function Gb(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var j3=[];function z5(){for(var t=0;t<j3.length;t++)j3[t]._workInProgressVersionPrimary=null;j3.length=0}var hb=$l.ReactCurrentDispatcher,U3=$l.ReactCurrentBatchConfig,pp=0,Ar=null,ts=null,ls=null,$b=!1,Um=!1,p0=0,KO=0;function Gs(){throw Error(Jt(321))}function A5(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!gc(t[s],a[s]))return!1;return!0}function C5(t,a,s,l,f,g){if(pp=g,Ar=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,hb.current=t===null||t.memoizedState===null?nB:aB,t=s(l,f),Um){g=0;do{if(Um=!1,p0=0,25<=g)throw Error(Jt(301));g+=1,ls=ts=null,a.updateQueue=null,hb.current=rB,t=s(l,f)}while(Um)}if(hb.current=qb,a=ts!==null&&ts.next!==null,pp=0,ls=ts=Ar=null,$b=!1,a)throw Error(Jt(300));return t}function M5(){var t=p0!==0;return p0=0,t}function Uc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?Ar.memoizedState=ls=t:ls=ls.next=t,ls}function Bo(){if(ts===null){var t=Ar.alternate;t=t!==null?t.memoizedState:null}else t=ts.next;var a=ls===null?Ar.memoizedState:ls.next;if(a!==null)ls=a,ts=t;else{if(t===null)throw Error(Jt(310));ts=t,t={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},ls===null?Ar.memoizedState=ls=t:ls=ls.next=t}return ls}function f0(t,a){return typeof a=="function"?a(t):a}function V3(t){var a=Bo(),s=a.queue;if(s===null)throw Error(Jt(311));s.lastRenderedReducer=t;var l=ts,f=l.baseQueue,g=s.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}l.baseQueue=f=g,s.pending=null}if(f!==null){g=f.next,l=l.baseState;var I=w=null,o=null,M=g;do{var B=M.lane;if((pp&B)===B)o!==null&&(o=o.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),l=M.hasEagerState?M.eagerState:t(l,M.action);else{var L={lane:B,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};o===null?(I=o=L,w=l):o=o.next=L,Ar.lanes|=B,fp|=B}M=M.next}while(M!==null&&M!==g);o===null?w=l:o.next=I,gc(l,a.memoizedState)||(Ri=!0),a.memoizedState=l,a.baseState=w,a.baseQueue=o,s.lastRenderedState=l}if(t=s.interleaved,t!==null){f=t;do g=f.lane,Ar.lanes|=g,fp|=g,f=f.next;while(f!==t)}else f===null&&(s.lanes=0);return[a.memoizedState,s.dispatch]}function G3(t){var a=Bo(),s=a.queue;if(s===null)throw Error(Jt(311));s.lastRenderedReducer=t;var l=s.dispatch,f=s.pending,g=a.memoizedState;if(f!==null){s.pending=null;var w=f=f.next;do g=t(g,w.action),w=w.next;while(w!==f);gc(g,a.memoizedState)||(Ri=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),s.lastRenderedState=g}return[g,l]}function pP(){}function fP(t,a){var s=Ar,l=Bo(),f=a(),g=!gc(l.memoizedState,f);if(g&&(l.memoizedState=f,Ri=!0),l=l.queue,R5(gP.bind(null,s,l,t),[t]),l.getSnapshot!==a||g||ls!==null&&ls.memoizedState.tag&1){if(s.flags|=2048,h0(9,mP.bind(null,s,l,f,a),void 0,null),ds===null)throw Error(Jt(349));pp&30||hP(s,a,f)}return f}function hP(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=Ar.updateQueue,a===null?(a={lastEffect:null,stores:null},Ar.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function mP(t,a,s,l){a.value=s,a.getSnapshot=l,bP(a)&&_P(t)}function gP(t,a,s){return s(function(){bP(a)&&_P(t)})}function bP(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!gc(t,s)}catch{return!0}}function _P(t){var a=Ul(t,1);a!==null&&mc(a,t,1,-1)}function pS(t){var a=Uc();return typeof t=="function"&&(t=t()),a.memoizedState=a.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f0,lastRenderedState:t},a.queue=t,t=t.dispatch=tB.bind(null,Ar,t),[a.memoizedState,t]}function h0(t,a,s,l){return t={tag:t,create:a,destroy:s,deps:l,next:null},a=Ar.updateQueue,a===null?(a={lastEffect:null,stores:null},Ar.updateQueue=a,a.lastEffect=t.next=t):(s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t)),t}function yP(){return Bo().memoizedState}function mb(t,a,s,l){var f=Uc();Ar.flags|=t,f.memoizedState=h0(1|a,s,void 0,l===void 0?null:l)}function P_(t,a,s,l){var f=Bo();l=l===void 0?null:l;var g=void 0;if(ts!==null){var w=ts.memoizedState;if(g=w.destroy,l!==null&&A5(l,w.deps)){f.memoizedState=h0(a,s,g,l);return}}Ar.flags|=t,f.memoizedState=h0(1|a,s,g,l)}function fS(t,a){return mb(8390656,8,t,a)}function R5(t,a){return P_(2048,8,t,a)}function vP(t,a){return P_(4,2,t,a)}function xP(t,a){return P_(4,4,t,a)}function wP(t,a){if(typeof a=="function")return t=t(),a(t),function(){a(null)};if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function SP(t,a,s){return s=s!=null?s.concat([t]):null,P_(4,4,wP.bind(null,a,t),s)}function k5(){}function TP(t,a){var s=Bo();a=a===void 0?null:a;var l=s.memoizedState;return l!==null&&a!==null&&A5(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function EP(t,a){var s=Bo();a=a===void 0?null:a;var l=s.memoizedState;return l!==null&&a!==null&&A5(a,l[1])?l[0]:(t=t(),s.memoizedState=[t,a],t)}function IP(t,a,s){return pp&21?(gc(s,a)||(s=AI(),Ar.lanes|=s,fp|=s,t.baseState=!0),a):(t.baseState&&(t.baseState=!1,Ri=!0),t.memoizedState=s)}function QO(t,a){var s=Qa;Qa=s!==0&&4>s?s:4,t(!0);var l=U3.transition;U3.transition={};try{t(!1),a()}finally{Qa=s,U3.transition=l}}function PP(){return Bo().memoizedState}function eB(t,a,s){var l=Fu(t);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},zP(t))AP(a,s);else if(s=sP(t,a,s,l),s!==null){var f=ui();mc(s,t,l,f),CP(s,a,l)}}function tB(t,a,s){var l=Fu(t),f={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(zP(t))AP(a,f);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var w=a.lastRenderedState,I=g(w,s);if(f.hasEagerState=!0,f.eagerState=I,gc(I,w)){var o=a.interleaved;o===null?(f.next=f,T5(a)):(f.next=o.next,o.next=f),a.interleaved=f;return}}catch{}finally{}s=sP(t,a,f,l),s!==null&&(f=ui(),mc(s,t,l,f),CP(s,a,l))}}function zP(t){var a=t.alternate;return t===Ar||a!==null&&a===Ar}function AP(t,a){Um=$b=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function CP(t,a,s){if(s&4194240){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,u5(t,s)}}var qb={readContext:Oo,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useInsertionEffect:Gs,useLayoutEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useMutableSource:Gs,useSyncExternalStore:Gs,useId:Gs,unstable_isNewReconciler:!1},nB={readContext:Oo,useCallback:function(t,a){return Uc().memoizedState=[t,a===void 0?null:a],t},useContext:Oo,useEffect:fS,useImperativeHandle:function(t,a,s){return s=s!=null?s.concat([t]):null,mb(4194308,4,wP.bind(null,a,t),s)},useLayoutEffect:function(t,a){return mb(4194308,4,t,a)},useInsertionEffect:function(t,a){return mb(4,2,t,a)},useMemo:function(t,a){var s=Uc();return a=a===void 0?null:a,t=t(),s.memoizedState=[t,a],t},useReducer:function(t,a,s){var l=Uc();return a=s!==void 0?s(a):a,l.memoizedState=l.baseState=a,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},l.queue=t,t=t.dispatch=eB.bind(null,Ar,t),[l.memoizedState,t]},useRef:function(t){var a=Uc();return t={current:t},a.memoizedState=t},useState:pS,useDebugValue:k5,useDeferredValue:function(t){return Uc().memoizedState=t},useTransition:function(){var t=pS(!1),a=t[0];return t=QO.bind(null,t[1]),Uc().memoizedState=t,[a,t]},useMutableSource:function(){},useSyncExternalStore:function(t,a,s){var l=Ar,f=Uc();if(Er){if(s===void 0)throw Error(Jt(407));s=s()}else{if(s=a(),ds===null)throw Error(Jt(349));pp&30||hP(l,a,s)}f.memoizedState=s;var g={value:s,getSnapshot:a};return f.queue=g,fS(gP.bind(null,l,g,t),[t]),l.flags|=2048,h0(9,mP.bind(null,l,g,s,a),void 0,null),s},useId:function(){var t=Uc(),a=ds.identifierPrefix;if(Er){var s=Ol,l=Dl;s=(l&~(1<<32-hc(l)-1)).toString(32)+s,a=":"+a+"R"+s,s=p0++,0<s&&(a+="H"+s.toString(32)),a+=":"}else s=KO++,a=":"+a+"r"+s.toString(32)+":";return t.memoizedState=a},unstable_isNewReconciler:!1},aB={readContext:Oo,useCallback:TP,useContext:Oo,useEffect:R5,useImperativeHandle:SP,useInsertionEffect:vP,useLayoutEffect:xP,useMemo:EP,useReducer:V3,useRef:yP,useState:function(){return V3(f0)},useDebugValue:k5,useDeferredValue:function(t){var a=Bo();return IP(a,ts.memoizedState,t)},useTransition:function(){var t=V3(f0)[0],a=Bo().memoizedState;return[t,a]},useMutableSource:pP,useSyncExternalStore:fP,useId:PP,unstable_isNewReconciler:!1},rB={readContext:Oo,useCallback:TP,useContext:Oo,useEffect:R5,useImperativeHandle:SP,useInsertionEffect:vP,useLayoutEffect:xP,useMemo:EP,useReducer:G3,useRef:yP,useState:function(){return G3(f0)},useDebugValue:k5,useDeferredValue:function(t){var a=Bo();return ts===null?a.memoizedState=t:IP(a,ts.memoizedState,t)},useTransition:function(){var t=G3(f0)[0],a=Bo().memoizedState;return[t,a]},useMutableSource:pP,useSyncExternalStore:fP,useId:PP,unstable_isNewReconciler:!1};function $f(t,a){try{var s="",l=a;do s+=RD(l),l=l.return;while(l);var f=s}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:a,stack:f,digest:null}}function $3(t,a,s){return{value:t,source:null,stack:s??null,digest:a??null}}function ix(t,a){try{console.error(a.value)}catch(s){setTimeout(function(){throw s})}}var sB=typeof WeakMap=="function"?WeakMap:Map;function MP(t,a,s){s=Nl(-1,s),s.tag=3,s.payload={element:null};var l=a.value;return s.callback=function(){Hb||(Hb=!0,gx=l),ix(t,a)},s}function RP(t,a,s){s=Nl(-1,s),s.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var f=a.value;s.payload=function(){return l(f)},s.callback=function(){ix(t,a)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(s.callback=function(){ix(t,a),typeof l!="function"&&(Nu===null?Nu=new Set([this]):Nu.add(this));var w=a.stack;this.componentDidCatch(a.value,{componentStack:w!==null?w:""})}),s}function hS(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new sB;var f=new Set;l.set(a,f)}else f=l.get(a),f===void 0&&(f=new Set,l.set(a,f));f.has(s)||(f.add(s),t=yB.bind(null,t,a,s),a.then(t,t))}function mS(t){do{var a;if((a=t.tag===13)&&(a=t.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return t;t=t.return}while(t!==null);return null}function gS(t,a,s,l,f){return t.mode&1?(t.flags|=65536,t.lanes=f,t):(t===a?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(a=Nl(-1,1),a.tag=2,Bu(s,a,1))),s.lanes|=1),t)}var iB=$l.ReactCurrentOwner,Ri=!1;function ci(t,a,s,l){a.child=t===null?uP(a,null,s,l):Vf(a,t.child,s,l)}function bS(t,a,s,l,f){s=s.render;var g=a.ref;return Df(a,f),l=C5(t,a,s,l,g,f),s=M5(),t!==null&&!Ri?(a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~f,Vl(t,a,f)):(Er&&s&&_5(a),a.flags|=1,ci(t,a,l,f),a.child)}function _S(t,a,s,l,f){if(t===null){var g=s.type;return typeof g=="function"&&!U5(g)&&g.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(a.tag=15,a.type=g,kP(t,a,g,l,f)):(t=yb(s.type,null,l,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(g=t.child,!(t.lanes&f)){var w=g.memoizedProps;if(s=s.compare,s=s!==null?s:i0,s(w,l)&&t.ref===a.ref)return Vl(t,a,f)}return a.flags|=1,t=ju(g,l),t.ref=a.ref,t.return=a,a.child=t}function kP(t,a,s,l,f){if(t!==null){var g=t.memoizedProps;if(i0(g,l)&&t.ref===a.ref)if(Ri=!1,a.pendingProps=l=g,(t.lanes&f)!==0)t.flags&131072&&(Ri=!0);else return a.lanes=t.lanes,Vl(t,a,f)}return ox(t,a,s,l,f)}function LP(t,a,s){var l=a.pendingProps,f=l.children,g=t!==null?t.memoizedState:null;if(l.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(Af,eo),eo|=s;else{if(!(s&1073741824))return t=g!==null?g.baseLanes|s:s,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:t,cachePool:null,transitions:null},a.updateQueue=null,hr(Af,eo),eo|=t,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=g!==null?g.baseLanes:s,hr(Af,eo),eo|=l}else g!==null?(l=g.baseLanes|s,a.memoizedState=null):l=s,hr(Af,eo),eo|=l;return ci(t,a,f,s),a.child}function DP(t,a){var s=a.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(a.flags|=512,a.flags|=2097152)}function ox(t,a,s,l,f){var g=Li(s)?up:Hs.current;return g=jf(a,g),Df(a,f),s=C5(t,a,s,l,g,f),l=M5(),t!==null&&!Ri?(a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~f,Vl(t,a,f)):(Er&&l&&_5(a),a.flags|=1,ci(t,a,s,f),a.child)}function yS(t,a,s,l,f){if(Li(s)){var g=!0;Bb(a)}else g=!1;if(Df(a,f),a.stateNode===null)gb(t,a),cP(a,s,l),sx(a,s,l,f),l=!0;else if(t===null){var w=a.stateNode,I=a.memoizedProps;w.props=I;var o=w.context,M=s.contextType;typeof M=="object"&&M!==null?M=Oo(M):(M=Li(s)?up:Hs.current,M=jf(a,M));var B=s.getDerivedStateFromProps,L=typeof B=="function"||typeof w.getSnapshotBeforeUpdate=="function";L||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==l||o!==M)&&uS(a,w,l,M),Iu=!1;var O=a.memoizedState;w.state=O,Vb(a,l,w,f),o=a.memoizedState,I!==l||O!==o||ki.current||Iu?(typeof B=="function"&&(rx(a,s,B,l),o=a.memoizedState),(I=Iu||lS(a,s,I,l,O,o,M))?(L||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(a.flags|=4194308)):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=o),w.props=l,w.state=o,w.context=M,l=I):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{w=a.stateNode,iP(t,a),I=a.memoizedProps,M=a.type===a.elementType?I:lc(a.type,I),w.props=M,L=a.pendingProps,O=w.context,o=s.contextType,typeof o=="object"&&o!==null?o=Oo(o):(o=Li(s)?up:Hs.current,o=jf(a,o));var j=s.getDerivedStateFromProps;(B=typeof j=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(I!==L||O!==o)&&uS(a,w,l,o),Iu=!1,O=a.memoizedState,w.state=O,Vb(a,l,w,f);var Z=a.memoizedState;I!==L||O!==Z||ki.current||Iu?(typeof j=="function"&&(rx(a,s,j,l),Z=a.memoizedState),(M=Iu||lS(a,s,M,l,O,Z,o)||!1)?(B||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(l,Z,o),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(l,Z,o)),typeof w.componentDidUpdate=="function"&&(a.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof w.componentDidUpdate!="function"||I===t.memoizedProps&&O===t.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&O===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=Z),w.props=l,w.state=Z,w.context=o,l=M):(typeof w.componentDidUpdate!="function"||I===t.memoizedProps&&O===t.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&O===t.memoizedState||(a.flags|=1024),l=!1)}return cx(t,a,s,l,g,f)}function cx(t,a,s,l,f,g){DP(t,a);var w=(a.flags&128)!==0;if(!l&&!w)return f&&rS(a,s,!1),Vl(t,a,g);l=a.stateNode,iB.current=a;var I=w&&typeof s.getDerivedStateFromError!="function"?null:l.render();return a.flags|=1,t!==null&&w?(a.child=Vf(a,t.child,null,g),a.child=Vf(a,null,I,g)):ci(t,a,I,g),a.memoizedState=l.state,f&&rS(a,s,!0),a.child}function OP(t){var a=t.stateNode;a.pendingContext?aS(t,a.pendingContext,a.pendingContext!==a.context):a.context&&aS(t,a.context,!1),I5(t,a.containerInfo)}function vS(t,a,s,l,f){return Uf(),v5(f),a.flags|=256,ci(t,a,s,l),a.child}var lx={dehydrated:null,treeContext:null,retryLane:0};function ux(t){return{baseLanes:t,cachePool:null,transitions:null}}function BP(t,a,s){var l=a.pendingProps,f=zr.current,g=!1,w=(a.flags&128)!==0,I;if((I=w)||(I=t!==null&&t.memoizedState===null?!1:(f&2)!==0),I?(g=!0,a.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),hr(zr,f&1),t===null)return nx(a),t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(a.mode&1?t.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(w=l.children,t=l.fallback,g?(l=a.mode,g=a.child,w={mode:"hidden",children:w},!(l&1)&&g!==null?(g.childLanes=0,g.pendingProps=w):g=C_(w,l,0,null),t=lp(t,l,s,null),g.return=a,t.return=a,g.sibling=t,a.child=g,a.child.memoizedState=ux(s),a.memoizedState=lx,t):L5(a,w));if(f=t.memoizedState,f!==null&&(I=f.dehydrated,I!==null))return oB(t,a,w,l,I,f,s);if(g){g=l.fallback,w=a.mode,f=t.child,I=f.sibling;var o={mode:"hidden",children:l.children};return!(w&1)&&a.child!==f?(l=a.child,l.childLanes=0,l.pendingProps=o,a.deletions=null):(l=ju(f,o),l.subtreeFlags=f.subtreeFlags&14680064),I!==null?g=ju(I,g):(g=lp(g,w,s,null),g.flags|=2),g.return=a,l.return=a,l.sibling=g,a.child=l,l=g,g=a.child,w=t.child.memoizedState,w=w===null?ux(s):{baseLanes:w.baseLanes|s,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=t.childLanes&~s,a.memoizedState=lx,l}return g=t.child,t=g.sibling,l=ju(g,{mode:"visible",children:l.children}),!(a.mode&1)&&(l.lanes=s),l.return=a,l.sibling=null,t!==null&&(s=a.deletions,s===null?(a.deletions=[t],a.flags|=16):s.push(t)),a.child=l,a.memoizedState=null,l}function L5(t,a){return a=C_({mode:"visible",children:a},t.mode,0,null),a.return=t,t.child=a}function $1(t,a,s,l){return l!==null&&v5(l),Vf(a,t.child,null,s),t=L5(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function oB(t,a,s,l,f,g,w){if(s)return a.flags&256?(a.flags&=-257,l=$3(Error(Jt(422))),$1(t,a,w,l)):a.memoizedState!==null?(a.child=t.child,a.flags|=128,null):(g=l.fallback,f=a.mode,l=C_({mode:"visible",children:l.children},f,0,null),g=lp(g,f,w,null),g.flags|=2,l.return=a,g.return=a,l.sibling=g,a.child=l,a.mode&1&&Vf(a,t.child,null,w),a.child.memoizedState=ux(w),a.memoizedState=lx,g);if(!(a.mode&1))return $1(t,a,w,null);if(f.data==="$!"){if(l=f.nextSibling&&f.nextSibling.dataset,l)var I=l.dgst;return l=I,g=Error(Jt(419)),l=$3(g,l,void 0),$1(t,a,w,l)}if(I=(w&t.childLanes)!==0,Ri||I){if(l=ds,l!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(l.suspendedLanes|w)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Ul(t,f),mc(l,t,f,-1))}return j5(),l=$3(Error(Jt(421))),$1(t,a,w,l)}return f.data==="$?"?(a.flags|=128,a.child=t.child,a=vB.bind(null,t),f._reactRetry=a,null):(t=g.treeContext,no=Ou(f.nextSibling),so=a,Er=!0,dc=null,t!==null&&(Co[Mo++]=Dl,Co[Mo++]=Ol,Co[Mo++]=dp,Dl=t.id,Ol=t.overflow,dp=a),a=L5(a,l.children),a.flags|=4096,a)}function xS(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),ax(t.return,a,s)}function q3(t,a,s,l,f){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=s,g.tailMode=f)}function NP(t,a,s){var l=a.pendingProps,f=l.revealOrder,g=l.tail;if(ci(t,a,l.children,s),l=zr.current,l&2)l=l&1|2,a.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xS(t,s,a);else if(t.tag===19)xS(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(hr(zr,l),!(a.mode&1))a.memoizedState=null;else switch(f){case"forwards":for(s=a.child,f=null;s!==null;)t=s.alternate,t!==null&&Gb(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=a.child,a.child=null):(f=s.sibling,s.sibling=null),q3(a,!1,f,s,g);break;case"backwards":for(s=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Gb(t)===null){a.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}q3(a,!0,s,null,g);break;case"together":q3(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function gb(t,a){!(a.mode&1)&&t!==null&&(t.alternate=null,a.alternate=null,a.flags|=2)}function Vl(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),fp|=a.lanes,!(s&a.childLanes))return null;if(t!==null&&a.child!==t.child)throw Error(Jt(153));if(a.child!==null){for(t=a.child,s=ju(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=ju(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function cB(t,a,s){switch(a.tag){case 3:OP(a),Uf();break;case 5:dP(a);break;case 1:Li(a.type)&&Bb(a);break;case 4:I5(a,a.stateNode.containerInfo);break;case 10:var l=a.type._context,f=a.memoizedProps.value;hr(jb,l._currentValue),l._currentValue=f;break;case 13:if(l=a.memoizedState,l!==null)return l.dehydrated!==null?(hr(zr,zr.current&1),a.flags|=128,null):s&a.child.childLanes?BP(t,a,s):(hr(zr,zr.current&1),t=Vl(t,a,s),t!==null?t.sibling:null);hr(zr,zr.current&1);break;case 19:if(l=(s&a.childLanes)!==0,t.flags&128){if(l)return NP(t,a,s);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),hr(zr,zr.current),l)break;return null;case 22:case 23:return a.lanes=0,LP(t,a,s)}return Vl(t,a,s)}var FP,dx,jP,UP;FP=function(t,a){for(var s=a.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};dx=function(){};jP=function(t,a,s,l){var f=t.memoizedProps;if(f!==l){t=a.stateNode,ip(Hc.current);var g=null;switch(s){case"input":f=kv(t,f),l=kv(t,l),g=[];break;case"select":f=Cr({},f,{value:void 0}),l=Cr({},l,{value:void 0}),g=[];break;case"textarea":f=Ov(t,f),l=Ov(t,l),g=[];break;default:typeof f.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=Db)}Nv(s,l);var w;s=null;for(M in f)if(!l.hasOwnProperty(M)&&f.hasOwnProperty(M)&&f[M]!=null)if(M==="style"){var I=f[M];for(w in I)I.hasOwnProperty(w)&&(s||(s={}),s[w]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(Qm.hasOwnProperty(M)?g||(g=[]):(g=g||[]).push(M,null));for(M in l){var o=l[M];if(I=f!=null?f[M]:void 0,l.hasOwnProperty(M)&&o!==I&&(o!=null||I!=null))if(M==="style")if(I){for(w in I)!I.hasOwnProperty(w)||o&&o.hasOwnProperty(w)||(s||(s={}),s[w]="");for(w in o)o.hasOwnProperty(w)&&I[w]!==o[w]&&(s||(s={}),s[w]=o[w])}else s||(g||(g=[]),g.push(M,s)),s=o;else M==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,I=I?I.__html:void 0,o!=null&&I!==o&&(g=g||[]).push(M,o)):M==="children"?typeof o!="string"&&typeof o!="number"||(g=g||[]).push(M,""+o):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(Qm.hasOwnProperty(M)?(o!=null&&M==="onScroll"&&_r("scroll",t),g||I===o||(g=[])):(g=g||[]).push(M,o))}s&&(g=g||[]).push("style",s);var M=g;(a.updateQueue=M)&&(a.flags|=4)}};UP=function(t,a,s,l){s!==l&&(a.flags|=4)};function Sm(t,a){if(!Er)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function $s(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&14680064,l|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function lB(t,a,s){var l=a.pendingProps;switch(y5(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(a),null;case 1:return Li(a.type)&&Ob(),$s(a),null;case 3:return l=a.stateNode,Gf(),yr(ki),yr(Hs),z5(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(V1(a)?a.flags|=4:t===null||t.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,dc!==null&&(yx(dc),dc=null))),dx(t,a),$s(a),null;case 5:P5(a);var f=ip(d0.current);if(s=a.type,t!==null&&a.stateNode!=null)jP(t,a,s,l,f),t.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!l){if(a.stateNode===null)throw Error(Jt(166));return $s(a),null}if(t=ip(Hc.current),V1(a)){l=a.stateNode,s=a.type;var g=a.memoizedProps;switch(l[Gc]=a,l[l0]=g,t=(a.mode&1)!==0,s){case"dialog":_r("cancel",l),_r("close",l);break;case"iframe":case"object":case"embed":_r("load",l);break;case"video":case"audio":for(f=0;f<km.length;f++)_r(km[f],l);break;case"source":_r("error",l);break;case"img":case"image":case"link":_r("error",l),_r("load",l);break;case"details":_r("toggle",l);break;case"input":C7(l,g),_r("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!g.multiple},_r("invalid",l);break;case"textarea":R7(l,g),_r("invalid",l)}Nv(s,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var I=g[w];w==="children"?typeof I=="string"?l.textContent!==I&&(g.suppressHydrationWarning!==!0&&U1(l.textContent,I,t),f=["children",I]):typeof I=="number"&&l.textContent!==""+I&&(g.suppressHydrationWarning!==!0&&U1(l.textContent,I,t),f=["children",""+I]):Qm.hasOwnProperty(w)&&I!=null&&w==="onScroll"&&_r("scroll",l)}switch(s){case"input":k1(l),M7(l,g,!0);break;case"textarea":k1(l),k7(l);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(l.onclick=Db)}l=f,a.updateQueue=l,l!==null&&(a.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hI(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=w.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=w.createElement(s,{is:l.is}):(t=w.createElement(s),s==="select"&&(w=t,l.multiple?w.multiple=!0:l.size&&(w.size=l.size))):t=w.createElementNS(t,s),t[Gc]=a,t[l0]=l,FP(t,a,!1,!1),a.stateNode=t;e:{switch(w=Fv(s,l),s){case"dialog":_r("cancel",t),_r("close",t),f=l;break;case"iframe":case"object":case"embed":_r("load",t),f=l;break;case"video":case"audio":for(f=0;f<km.length;f++)_r(km[f],t);f=l;break;case"source":_r("error",t),f=l;break;case"img":case"image":case"link":_r("error",t),_r("load",t),f=l;break;case"details":_r("toggle",t),f=l;break;case"input":C7(t,l),f=kv(t,l),_r("invalid",t);break;case"option":f=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},f=Cr({},l,{value:void 0}),_r("invalid",t);break;case"textarea":R7(t,l),f=Ov(t,l),_r("invalid",t);break;default:f=l}Nv(s,f),I=f;for(g in I)if(I.hasOwnProperty(g)){var o=I[g];g==="style"?bI(t,o):g==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&mI(t,o)):g==="children"?typeof o=="string"?(s!=="textarea"||o!=="")&&e0(t,o):typeof o=="number"&&e0(t,""+o):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Qm.hasOwnProperty(g)?o!=null&&g==="onScroll"&&_r("scroll",t):o!=null&&r5(t,g,o,w))}switch(s){case"input":k1(t),M7(t,l,!1);break;case"textarea":k1(t),k7(t);break;case"option":l.value!=null&&t.setAttribute("value",""+qu(l.value));break;case"select":t.multiple=!!l.multiple,g=l.value,g!=null?Mf(t,!!l.multiple,g,!1):l.defaultValue!=null&&Mf(t,!!l.multiple,l.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=Db)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return $s(a),null;case 6:if(t&&a.stateNode!=null)UP(t,a,t.memoizedProps,l);else{if(typeof l!="string"&&a.stateNode===null)throw Error(Jt(166));if(s=ip(d0.current),ip(Hc.current),V1(a)){if(l=a.stateNode,s=a.memoizedProps,l[Gc]=a,(g=l.nodeValue!==s)&&(t=so,t!==null))switch(t.tag){case 3:U1(l.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&U1(l.nodeValue,s,(t.mode&1)!==0)}g&&(a.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Gc]=a,a.stateNode=l}return $s(a),null;case 13:if(yr(zr),l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Er&&no!==null&&a.mode&1&&!(a.flags&128))rP(),Uf(),a.flags|=98560,g=!1;else if(g=V1(a),l!==null&&l.dehydrated!==null){if(t===null){if(!g)throw Error(Jt(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(Jt(317));g[Gc]=a}else Uf(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;$s(a),g=!1}else dc!==null&&(yx(dc),dc=null),g=!0;if(!g)return a.flags&65536?a:null}return a.flags&128?(a.lanes=s,a):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(a.child.flags|=8192,a.mode&1&&(t===null||zr.current&1?ns===0&&(ns=3):j5())),a.updateQueue!==null&&(a.flags|=4),$s(a),null);case 4:return Gf(),dx(t,a),t===null&&o0(a.stateNode.containerInfo),$s(a),null;case 10:return S5(a.type._context),$s(a),null;case 17:return Li(a.type)&&Ob(),$s(a),null;case 19:if(yr(zr),g=a.memoizedState,g===null)return $s(a),null;if(l=(a.flags&128)!==0,w=g.rendering,w===null)if(l)Sm(g,!1);else{if(ns!==0||t!==null&&t.flags&128)for(t=a.child;t!==null;){if(w=Gb(t),w!==null){for(a.flags|=128,Sm(g,!1),l=w.updateQueue,l!==null&&(a.updateQueue=l,a.flags|=4),a.subtreeFlags=0,l=s,s=a.child;s!==null;)g=s,t=l,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=t,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,t=w.dependencies,g.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return hr(zr,zr.current&1|2),a.child}t=t.sibling}g.tail!==null&&Ur()>qf&&(a.flags|=128,l=!0,Sm(g,!1),a.lanes=4194304)}else{if(!l)if(t=Gb(w),t!==null){if(a.flags|=128,l=!0,s=t.updateQueue,s!==null&&(a.updateQueue=s,a.flags|=4),Sm(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Er)return $s(a),null}else 2*Ur()-g.renderingStartTime>qf&&s!==1073741824&&(a.flags|=128,l=!0,Sm(g,!1),a.lanes=4194304);g.isBackwards?(w.sibling=a.child,a.child=w):(s=g.last,s!==null?s.sibling=w:a.child=w,g.last=w)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Ur(),a.sibling=null,s=zr.current,hr(zr,l?s&1|2:s&1),a):($s(a),null);case 22:case 23:return F5(),l=a.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(a.flags|=8192),l&&a.mode&1?eo&1073741824&&($s(a),a.subtreeFlags&6&&(a.flags|=8192)):$s(a),null;case 24:return null;case 25:return null}throw Error(Jt(156,a.tag))}function uB(t,a){switch(y5(a),a.tag){case 1:return Li(a.type)&&Ob(),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Gf(),yr(ki),yr(Hs),z5(),t=a.flags,t&65536&&!(t&128)?(a.flags=t&-65537|128,a):null;case 5:return P5(a),null;case 13:if(yr(zr),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(Jt(340));Uf()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return yr(zr),null;case 4:return Gf(),null;case 10:return S5(a.type._context),null;case 22:case 23:return F5(),null;case 24:return null;default:return null}}var q1=!1,qs=!1,dB=typeof WeakSet=="function"?WeakSet:Set,xn=null;function zf(t,a){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){Rr(t,a,l)}else s.current=null}function px(t,a,s){try{s()}catch(l){Rr(t,a,l)}}var wS=!1;function pB(t,a){if(Yv=Rb,t=qI(),b5(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var w=0,I=-1,o=-1,M=0,B=0,L=t,O=null;t:for(;;){for(var j;L!==s||f!==0&&L.nodeType!==3||(I=w+f),L!==g||l!==0&&L.nodeType!==3||(o=w+l),L.nodeType===3&&(w+=L.nodeValue.length),(j=L.firstChild)!==null;)O=L,L=j;for(;;){if(L===t)break t;if(O===s&&++M===f&&(I=w),O===g&&++B===l&&(o=w),(j=L.nextSibling)!==null)break;L=O,O=L.parentNode}L=j}s=I===-1||o===-1?null:{start:I,end:o}}else s=null}s=s||{start:0,end:0}}else s=null;for(Xv={focusedElem:t,selectionRange:s},Rb=!1,xn=a;xn!==null;)if(a=xn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,xn=t;else for(;xn!==null;){a=xn;try{var Z=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var H=Z.memoizedProps,te=Z.memoizedState,J=a.stateNode,K=J.getSnapshotBeforeUpdate(a.elementType===a.type?H:lc(a.type,H),te);J.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var W=a.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Jt(163))}}catch(ee){Rr(a,a.return,ee)}if(t=a.sibling,t!==null){t.return=a.return,xn=t;break}xn=a.return}return Z=wS,wS=!1,Z}function Vm(t,a,s){var l=a.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var f=l=l.next;do{if((f.tag&t)===t){var g=f.destroy;f.destroy=void 0,g!==void 0&&px(a,s,g)}f=f.next}while(f!==l)}}function z_(t,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&t)===t){var l=s.create;s.destroy=l()}s=s.next}while(s!==a)}}function fx(t){var a=t.ref;if(a!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof a=="function"?a(t):a.current=t}}function VP(t){var a=t.alternate;a!==null&&(t.alternate=null,VP(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&(delete a[Gc],delete a[l0],delete a[Qv],delete a[ZO],delete a[YO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GP(t){return t.tag===5||t.tag===3||t.tag===4}function SS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hx(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.nodeType===8?s.parentNode.insertBefore(t,a):s.insertBefore(t,a):(s.nodeType===8?(a=s.parentNode,a.insertBefore(t,s)):(a=s,a.appendChild(t)),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=Db));else if(l!==4&&(t=t.child,t!==null))for(hx(t,a,s),t=t.sibling;t!==null;)hx(t,a,s),t=t.sibling}function mx(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(mx(t,a,s),t=t.sibling;t!==null;)mx(t,a,s),t=t.sibling}var Ts=null,uc=!1;function Su(t,a,s){for(s=s.child;s!==null;)$P(t,a,s),s=s.sibling}function $P(t,a,s){if(Wc&&typeof Wc.onCommitFiberUnmount=="function")try{Wc.onCommitFiberUnmount(v_,s)}catch{}switch(s.tag){case 5:qs||zf(s,a);case 6:var l=Ts,f=uc;Ts=null,Su(t,a,s),Ts=l,uc=f,Ts!==null&&(uc?(t=Ts,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Ts.removeChild(s.stateNode));break;case 18:Ts!==null&&(uc?(t=Ts,s=s.stateNode,t.nodeType===8?N3(t.parentNode,s):t.nodeType===1&&N3(t,s),r0(t)):N3(Ts,s.stateNode));break;case 4:l=Ts,f=uc,Ts=s.stateNode.containerInfo,uc=!0,Su(t,a,s),Ts=l,uc=f;break;case 0:case 11:case 14:case 15:if(!qs&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){f=l=l.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&(g&2||g&4)&&px(s,a,w),f=f.next}while(f!==l)}Su(t,a,s);break;case 1:if(!qs&&(zf(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(I){Rr(s,a,I)}Su(t,a,s);break;case 21:Su(t,a,s);break;case 22:s.mode&1?(qs=(l=qs)||s.memoizedState!==null,Su(t,a,s),qs=l):Su(t,a,s);break;default:Su(t,a,s)}}function TS(t){var a=t.updateQueue;if(a!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new dB),a.forEach(function(l){var f=xB.bind(null,t,l);s.has(l)||(s.add(l),l.then(f,f))})}}function cc(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l];try{var g=t,w=a,I=w;e:for(;I!==null;){switch(I.tag){case 5:Ts=I.stateNode,uc=!1;break e;case 3:Ts=I.stateNode.containerInfo,uc=!0;break e;case 4:Ts=I.stateNode.containerInfo,uc=!0;break e}I=I.return}if(Ts===null)throw Error(Jt(160));$P(g,w,f),Ts=null,uc=!1;var o=f.alternate;o!==null&&(o.return=null),f.return=null}catch(M){Rr(f,a,M)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)qP(a,t),a=a.sibling}function qP(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cc(a,t),jc(t),l&4){try{Vm(3,t,t.return),z_(3,t)}catch(H){Rr(t,t.return,H)}try{Vm(5,t,t.return)}catch(H){Rr(t,t.return,H)}}break;case 1:cc(a,t),jc(t),l&512&&s!==null&&zf(s,s.return);break;case 5:if(cc(a,t),jc(t),l&512&&s!==null&&zf(s,s.return),t.flags&32){var f=t.stateNode;try{e0(f,"")}catch(H){Rr(t,t.return,H)}}if(l&4&&(f=t.stateNode,f!=null)){var g=t.memoizedProps,w=s!==null?s.memoizedProps:g,I=t.type,o=t.updateQueue;if(t.updateQueue=null,o!==null)try{I==="input"&&g.type==="radio"&&g.name!=null&&pI(f,g),Fv(I,w);var M=Fv(I,g);for(w=0;w<o.length;w+=2){var B=o[w],L=o[w+1];B==="style"?bI(f,L):B==="dangerouslySetInnerHTML"?mI(f,L):B==="children"?e0(f,L):r5(f,B,L,M)}switch(I){case"input":Lv(f,g);break;case"textarea":fI(f,g);break;case"select":var O=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var j=g.value;j!=null?Mf(f,!!g.multiple,j,!1):O!==!!g.multiple&&(g.defaultValue!=null?Mf(f,!!g.multiple,g.defaultValue,!0):Mf(f,!!g.multiple,g.multiple?[]:"",!1))}f[l0]=g}catch(H){Rr(t,t.return,H)}}break;case 6:if(cc(a,t),jc(t),l&4){if(t.stateNode===null)throw Error(Jt(162));f=t.stateNode,g=t.memoizedProps;try{f.nodeValue=g}catch(H){Rr(t,t.return,H)}}break;case 3:if(cc(a,t),jc(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{r0(a.containerInfo)}catch(H){Rr(t,t.return,H)}break;case 4:cc(a,t),jc(t);break;case 13:cc(a,t),jc(t),f=t.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(B5=Ur())),l&4&&TS(t);break;case 22:if(B=s!==null&&s.memoizedState!==null,t.mode&1?(qs=(M=qs)||B,cc(a,t),qs=M):cc(a,t),jc(t),l&8192){if(M=t.memoizedState!==null,(t.stateNode.isHidden=M)&&!B&&t.mode&1)for(xn=t,B=t.child;B!==null;){for(L=xn=B;xn!==null;){switch(O=xn,j=O.child,O.tag){case 0:case 11:case 14:case 15:Vm(4,O,O.return);break;case 1:zf(O,O.return);var Z=O.stateNode;if(typeof Z.componentWillUnmount=="function"){l=O,s=O.return;try{a=l,Z.props=a.memoizedProps,Z.state=a.memoizedState,Z.componentWillUnmount()}catch(H){Rr(l,s,H)}}break;case 5:zf(O,O.return);break;case 22:if(O.memoizedState!==null){IS(L);continue}}j!==null?(j.return=O,xn=j):IS(L)}B=B.sibling}e:for(B=null,L=t;;){if(L.tag===5){if(B===null){B=L;try{f=L.stateNode,M?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(I=L.stateNode,o=L.memoizedProps.style,w=o!=null&&o.hasOwnProperty("display")?o.display:null,I.style.display=gI("display",w))}catch(H){Rr(t,t.return,H)}}}else if(L.tag===6){if(B===null)try{L.stateNode.nodeValue=M?"":L.memoizedProps}catch(H){Rr(t,t.return,H)}}else if((L.tag!==22&&L.tag!==23||L.memoizedState===null||L===t)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===t)break e;for(;L.sibling===null;){if(L.return===null||L.return===t)break e;B===L&&(B=null),L=L.return}B===L&&(B=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:cc(a,t),jc(t),l&4&&TS(t);break;case 21:break;default:cc(a,t),jc(t)}}function jc(t){var a=t.flags;if(a&2){try{e:{for(var s=t.return;s!==null;){if(GP(s)){var l=s;break e}s=s.return}throw Error(Jt(160))}switch(l.tag){case 5:var f=l.stateNode;l.flags&32&&(e0(f,""),l.flags&=-33);var g=SS(t);mx(t,g,f);break;case 3:case 4:var w=l.stateNode.containerInfo,I=SS(t);hx(t,I,w);break;default:throw Error(Jt(161))}}catch(o){Rr(t,t.return,o)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function fB(t,a,s){xn=t,WP(t)}function WP(t,a,s){for(var l=(t.mode&1)!==0;xn!==null;){var f=xn,g=f.child;if(f.tag===22&&l){var w=f.memoizedState!==null||q1;if(!w){var I=f.alternate,o=I!==null&&I.memoizedState!==null||qs;I=q1;var M=qs;if(q1=w,(qs=o)&&!M)for(xn=f;xn!==null;)w=xn,o=w.child,w.tag===22&&w.memoizedState!==null?PS(f):o!==null?(o.return=w,xn=o):PS(f);for(;g!==null;)xn=g,WP(g),g=g.sibling;xn=f,q1=I,qs=M}ES(t)}else f.subtreeFlags&8772&&g!==null?(g.return=f,xn=g):ES(t)}}function ES(t){for(;xn!==null;){var a=xn;if(a.flags&8772){var s=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:qs||z_(5,a);break;case 1:var l=a.stateNode;if(a.flags&4&&!qs)if(s===null)l.componentDidMount();else{var f=a.elementType===a.type?s.memoizedProps:lc(a.type,s.memoizedProps);l.componentDidUpdate(f,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var g=a.updateQueue;g!==null&&cS(a,g,l);break;case 3:var w=a.updateQueue;if(w!==null){if(s=null,a.child!==null)switch(a.child.tag){case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}cS(a,w,s)}break;case 5:var I=a.stateNode;if(s===null&&a.flags&4){s=I;var o=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break;case"img":o.src&&(s.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var M=a.alternate;if(M!==null){var B=M.memoizedState;if(B!==null){var L=B.dehydrated;L!==null&&r0(L)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Jt(163))}qs||a.flags&512&&fx(a)}catch(O){Rr(a,a.return,O)}}if(a===t){xn=null;break}if(s=a.sibling,s!==null){s.return=a.return,xn=s;break}xn=a.return}}function IS(t){for(;xn!==null;){var a=xn;if(a===t){xn=null;break}var s=a.sibling;if(s!==null){s.return=a.return,xn=s;break}xn=a.return}}function PS(t){for(;xn!==null;){var a=xn;try{switch(a.tag){case 0:case 11:case 15:var s=a.return;try{z_(4,a)}catch(o){Rr(a,s,o)}break;case 1:var l=a.stateNode;if(typeof l.componentDidMount=="function"){var f=a.return;try{l.componentDidMount()}catch(o){Rr(a,f,o)}}var g=a.return;try{fx(a)}catch(o){Rr(a,g,o)}break;case 5:var w=a.return;try{fx(a)}catch(o){Rr(a,w,o)}}}catch(o){Rr(a,a.return,o)}if(a===t){xn=null;break}var I=a.sibling;if(I!==null){I.return=a.return,xn=I;break}xn=a.return}}var hB=Math.ceil,Wb=$l.ReactCurrentDispatcher,D5=$l.ReactCurrentOwner,Lo=$l.ReactCurrentBatchConfig,Ra=0,ds=null,Zr=null,Ps=0,eo=0,Af=Ju(0),ns=0,m0=null,fp=0,A_=0,O5=0,Gm=null,Mi=null,B5=0,qf=1/0,kl=null,Hb=!1,gx=null,Nu=null,W1=!1,Cu=null,Zb=0,$m=0,bx=null,bb=-1,_b=0;function ui(){return Ra&6?Ur():bb!==-1?bb:bb=Ur()}function Fu(t){return t.mode&1?Ra&2&&Ps!==0?Ps&-Ps:JO.transition!==null?(_b===0&&(_b=AI()),_b):(t=Qa,t!==0||(t=window.event,t=t===void 0?16:OI(t.type)),t):1}function mc(t,a,s,l){if(50<$m)throw $m=0,bx=null,Error(Jt(185));F0(t,s,l),(!(Ra&2)||t!==ds)&&(t===ds&&(!(Ra&2)&&(A_|=s),ns===4&&zu(t,Ps)),Di(t,l),s===1&&Ra===0&&!(a.mode&1)&&(qf=Ur()+500,E_&&Ku()))}function Di(t,a){var s=t.callbackNode;JD(t,a);var l=Mb(t,t===ds?Ps:0);if(l===0)s!==null&&O7(s),t.callbackNode=null,t.callbackPriority=0;else if(a=l&-l,t.callbackPriority!==a){if(s!=null&&O7(s),a===1)t.tag===0?XO(zS.bind(null,t)):tP(zS.bind(null,t)),WO(function(){!(Ra&6)&&Ku()}),s=null;else{switch(CI(l)){case 1:s=l5;break;case 4:s=PI;break;case 16:s=Cb;break;case 536870912:s=zI;break;default:s=Cb}s=ez(s,HP.bind(null,t))}t.callbackPriority=a,t.callbackNode=s}}function HP(t,a){if(bb=-1,_b=0,Ra&6)throw Error(Jt(327));var s=t.callbackNode;if(Of()&&t.callbackNode!==s)return null;var l=Mb(t,t===ds?Ps:0);if(l===0)return null;if(l&30||l&t.expiredLanes||a)a=Yb(t,l);else{a=l;var f=Ra;Ra|=2;var g=YP();(ds!==t||Ps!==a)&&(kl=null,qf=Ur()+500,cp(t,a));do try{bB();break}catch(I){ZP(t,I)}while(!0);w5(),Wb.current=g,Ra=f,Zr!==null?a=0:(ds=null,Ps=0,a=ns)}if(a!==0){if(a===2&&(f=$v(t),f!==0&&(l=f,a=_x(t,f))),a===1)throw s=m0,cp(t,0),zu(t,l),Di(t,Ur()),s;if(a===6)zu(t,l);else{if(f=t.current.alternate,!(l&30)&&!mB(f)&&(a=Yb(t,l),a===2&&(g=$v(t),g!==0&&(l=g,a=_x(t,g))),a===1))throw s=m0,cp(t,0),zu(t,l),Di(t,Ur()),s;switch(t.finishedWork=f,t.finishedLanes=l,a){case 0:case 1:throw Error(Jt(345));case 2:Jd(t,Mi,kl);break;case 3:if(zu(t,l),(l&130023424)===l&&(a=B5+500-Ur(),10<a)){if(Mb(t,0)!==0)break;if(f=t.suspendedLanes,(f&l)!==l){ui(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=Kv(Jd.bind(null,t,Mi,kl),a);break}Jd(t,Mi,kl);break;case 4:if(zu(t,l),(l&4194240)===l)break;for(a=t.eventTimes,f=-1;0<l;){var w=31-hc(l);g=1<<w,w=a[w],w>f&&(f=w),l&=~g}if(l=f,l=Ur()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*hB(l/1960))-l,10<l){t.timeoutHandle=Kv(Jd.bind(null,t,Mi,kl),l);break}Jd(t,Mi,kl);break;case 5:Jd(t,Mi,kl);break;default:throw Error(Jt(329))}}}return Di(t,Ur()),t.callbackNode===s?HP.bind(null,t):null}function _x(t,a){var s=Gm;return t.current.memoizedState.isDehydrated&&(cp(t,a).flags|=256),t=Yb(t,a),t!==2&&(a=Mi,Mi=s,a!==null&&yx(a)),t}function yx(t){Mi===null?Mi=t:Mi.push.apply(Mi,t)}function mB(t){for(var a=t;;){if(a.flags&16384){var s=a.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var f=s[l],g=f.getSnapshot;f=f.value;try{if(!gc(g(),f))return!1}catch{return!1}}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function zu(t,a){for(a&=~O5,a&=~A_,t.suspendedLanes|=a,t.pingedLanes&=~a,t=t.expirationTimes;0<a;){var s=31-hc(a),l=1<<s;t[s]=-1,a&=~l}}function zS(t){if(Ra&6)throw Error(Jt(327));Of();var a=Mb(t,0);if(!(a&1))return Di(t,Ur()),null;var s=Yb(t,a);if(t.tag!==0&&s===2){var l=$v(t);l!==0&&(a=l,s=_x(t,l))}if(s===1)throw s=m0,cp(t,0),zu(t,a),Di(t,Ur()),s;if(s===6)throw Error(Jt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=a,Jd(t,Mi,kl),Di(t,Ur()),null}function N5(t,a){var s=Ra;Ra|=1;try{return t(a)}finally{Ra=s,Ra===0&&(qf=Ur()+500,E_&&Ku())}}function hp(t){Cu!==null&&Cu.tag===0&&!(Ra&6)&&Of();var a=Ra;Ra|=1;var s=Lo.transition,l=Qa;try{if(Lo.transition=null,Qa=1,t)return t()}finally{Qa=l,Lo.transition=s,Ra=a,!(Ra&6)&&Ku()}}function F5(){eo=Af.current,yr(Af)}function cp(t,a){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,qO(s)),Zr!==null)for(s=Zr.return;s!==null;){var l=s;switch(y5(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Ob();break;case 3:Gf(),yr(ki),yr(Hs),z5();break;case 5:P5(l);break;case 4:Gf();break;case 13:yr(zr);break;case 19:yr(zr);break;case 10:S5(l.type._context);break;case 22:case 23:F5()}s=s.return}if(ds=t,Zr=t=ju(t.current,null),Ps=eo=a,ns=0,m0=null,O5=A_=fp=0,Mi=Gm=null,sp!==null){for(a=0;a<sp.length;a++)if(s=sp[a],l=s.interleaved,l!==null){s.interleaved=null;var f=l.next,g=s.pending;if(g!==null){var w=g.next;g.next=f,l.next=w}s.pending=l}sp=null}return t}function ZP(t,a){do{var s=Zr;try{if(w5(),hb.current=qb,$b){for(var l=Ar.memoizedState;l!==null;){var f=l.queue;f!==null&&(f.pending=null),l=l.next}$b=!1}if(pp=0,ls=ts=Ar=null,Um=!1,p0=0,D5.current=null,s===null||s.return===null){ns=1,m0=a,Zr=null;break}e:{var g=t,w=s.return,I=s,o=a;if(a=Ps,I.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var M=o,B=I,L=B.tag;if(!(B.mode&1)&&(L===0||L===11||L===15)){var O=B.alternate;O?(B.updateQueue=O.updateQueue,B.memoizedState=O.memoizedState,B.lanes=O.lanes):(B.updateQueue=null,B.memoizedState=null)}var j=mS(w);if(j!==null){j.flags&=-257,gS(j,w,I,g,a),j.mode&1&&hS(g,M,a),a=j,o=M;var Z=a.updateQueue;if(Z===null){var H=new Set;H.add(o),a.updateQueue=H}else Z.add(o);break e}else{if(!(a&1)){hS(g,M,a),j5();break e}o=Error(Jt(426))}}else if(Er&&I.mode&1){var te=mS(w);if(te!==null){!(te.flags&65536)&&(te.flags|=256),gS(te,w,I,g,a),v5($f(o,I));break e}}g=o=$f(o,I),ns!==4&&(ns=2),Gm===null?Gm=[g]:Gm.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,a&=-a,g.lanes|=a;var J=MP(g,o,a);oS(g,J);break e;case 1:I=o;var K=g.type,W=g.stateNode;if(!(g.flags&128)&&(typeof K.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Nu===null||!Nu.has(W)))){g.flags|=65536,a&=-a,g.lanes|=a;var ee=RP(g,I,a);oS(g,ee);break e}}g=g.return}while(g!==null)}JP(s)}catch(me){a=me,Zr===s&&s!==null&&(Zr=s=s.return);continue}break}while(!0)}function YP(){var t=Wb.current;return Wb.current=qb,t===null?qb:t}function j5(){(ns===0||ns===3||ns===2)&&(ns=4),ds===null||!(fp&268435455)&&!(A_&268435455)||zu(ds,Ps)}function Yb(t,a){var s=Ra;Ra|=2;var l=YP();(ds!==t||Ps!==a)&&(kl=null,cp(t,a));do try{gB();break}catch(f){ZP(t,f)}while(!0);if(w5(),Ra=s,Wb.current=l,Zr!==null)throw Error(Jt(261));return ds=null,Ps=0,ns}function gB(){for(;Zr!==null;)XP(Zr)}function bB(){for(;Zr!==null&&!VD();)XP(Zr)}function XP(t){var a=QP(t.alternate,t,eo);t.memoizedProps=t.pendingProps,a===null?JP(t):Zr=a,D5.current=null}function JP(t){var a=t;do{var s=a.alternate;if(t=a.return,a.flags&32768){if(s=uB(s,a),s!==null){s.flags&=32767,Zr=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ns=6,Zr=null;return}}else if(s=lB(s,a,eo),s!==null){Zr=s;return}if(a=a.sibling,a!==null){Zr=a;return}Zr=a=t}while(a!==null);ns===0&&(ns=5)}function Jd(t,a,s){var l=Qa,f=Lo.transition;try{Lo.transition=null,Qa=1,_B(t,a,s,l)}finally{Lo.transition=f,Qa=l}return null}function _B(t,a,s,l){do Of();while(Cu!==null);if(Ra&6)throw Error(Jt(327));s=t.finishedWork;var f=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(Jt(177));t.callbackNode=null,t.callbackPriority=0;var g=s.lanes|s.childLanes;if(KD(t,g),t===ds&&(Zr=ds=null,Ps=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||W1||(W1=!0,ez(Cb,function(){return Of(),null})),g=(s.flags&15990)!==0,s.subtreeFlags&15990||g){g=Lo.transition,Lo.transition=null;var w=Qa;Qa=1;var I=Ra;Ra|=4,D5.current=null,pB(t,s),qP(s,t),NO(Xv),Rb=!!Yv,Xv=Yv=null,t.current=s,fB(s),GD(),Ra=I,Qa=w,Lo.transition=g}else t.current=s;if(W1&&(W1=!1,Cu=t,Zb=f),g=t.pendingLanes,g===0&&(Nu=null),WD(s.stateNode),Di(t,Ur()),a!==null)for(l=t.onRecoverableError,s=0;s<a.length;s++)f=a[s],l(f.value,{componentStack:f.stack,digest:f.digest});if(Hb)throw Hb=!1,t=gx,gx=null,t;return Zb&1&&t.tag!==0&&Of(),g=t.pendingLanes,g&1?t===bx?$m++:($m=0,bx=t):$m=0,Ku(),null}function Of(){if(Cu!==null){var t=CI(Zb),a=Lo.transition,s=Qa;try{if(Lo.transition=null,Qa=16>t?16:t,Cu===null)var l=!1;else{if(t=Cu,Cu=null,Zb=0,Ra&6)throw Error(Jt(331));var f=Ra;for(Ra|=4,xn=t.current;xn!==null;){var g=xn,w=g.child;if(xn.flags&16){var I=g.deletions;if(I!==null){for(var o=0;o<I.length;o++){var M=I[o];for(xn=M;xn!==null;){var B=xn;switch(B.tag){case 0:case 11:case 15:Vm(8,B,g)}var L=B.child;if(L!==null)L.return=B,xn=L;else for(;xn!==null;){B=xn;var O=B.sibling,j=B.return;if(VP(B),B===M){xn=null;break}if(O!==null){O.return=j,xn=O;break}xn=j}}}var Z=g.alternate;if(Z!==null){var H=Z.child;if(H!==null){Z.child=null;do{var te=H.sibling;H.sibling=null,H=te}while(H!==null)}}xn=g}}if(g.subtreeFlags&2064&&w!==null)w.return=g,xn=w;else e:for(;xn!==null;){if(g=xn,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Vm(9,g,g.return)}var J=g.sibling;if(J!==null){J.return=g.return,xn=J;break e}xn=g.return}}var K=t.current;for(xn=K;xn!==null;){w=xn;var W=w.child;if(w.subtreeFlags&2064&&W!==null)W.return=w,xn=W;else e:for(w=K;xn!==null;){if(I=xn,I.flags&2048)try{switch(I.tag){case 0:case 11:case 15:z_(9,I)}}catch(me){Rr(I,I.return,me)}if(I===w){xn=null;break e}var ee=I.sibling;if(ee!==null){ee.return=I.return,xn=ee;break e}xn=I.return}}if(Ra=f,Ku(),Wc&&typeof Wc.onPostCommitFiberRoot=="function")try{Wc.onPostCommitFiberRoot(v_,t)}catch{}l=!0}return l}finally{Qa=s,Lo.transition=a}}return!1}function AS(t,a,s){a=$f(s,a),a=MP(t,a,1),t=Bu(t,a,1),a=ui(),t!==null&&(F0(t,1,a),Di(t,a))}function Rr(t,a,s){if(t.tag===3)AS(t,t,s);else for(;a!==null;){if(a.tag===3){AS(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Nu===null||!Nu.has(l))){t=$f(s,t),t=RP(a,t,1),a=Bu(a,t,1),t=ui(),a!==null&&(F0(a,1,t),Di(a,t));break}}a=a.return}}function yB(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),a=ui(),t.pingedLanes|=t.suspendedLanes&s,ds===t&&(Ps&s)===s&&(ns===4||ns===3&&(Ps&130023424)===Ps&&500>Ur()-B5?cp(t,0):O5|=s),Di(t,a)}function KP(t,a){a===0&&(t.mode&1?(a=O1,O1<<=1,!(O1&130023424)&&(O1=4194304)):a=1);var s=ui();t=Ul(t,a),t!==null&&(F0(t,a,s),Di(t,s))}function vB(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),KP(t,s)}function xB(t,a){var s=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(Jt(314))}l!==null&&l.delete(a),KP(t,s)}var QP;QP=function(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps||ki.current)Ri=!0;else{if(!(t.lanes&s)&&!(a.flags&128))return Ri=!1,cB(t,a,s);Ri=!!(t.flags&131072)}else Ri=!1,Er&&a.flags&1048576&&nP(a,Fb,a.index);switch(a.lanes=0,a.tag){case 2:var l=a.type;gb(t,a),t=a.pendingProps;var f=jf(a,Hs.current);Df(a,s),f=C5(null,a,l,t,f,s);var g=M5();return a.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Li(l)?(g=!0,Bb(a)):g=!1,a.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,E5(a),f.updater=I_,a.stateNode=f,f._reactInternals=a,sx(a,l,t,s),a=cx(null,a,l,!0,g,s)):(a.tag=0,Er&&g&&_5(a),ci(null,a,f,s),a=a.child),a;case 16:l=a.elementType;e:{switch(gb(t,a),t=a.pendingProps,f=l._init,l=f(l._payload),a.type=l,f=a.tag=SB(l),t=lc(l,t),f){case 0:a=ox(null,a,l,t,s);break e;case 1:a=yS(null,a,l,t,s);break e;case 11:a=bS(null,a,l,t,s);break e;case 14:a=_S(null,a,l,lc(l.type,t),s);break e}throw Error(Jt(306,l,""))}return a;case 0:return l=a.type,f=a.pendingProps,f=a.elementType===l?f:lc(l,f),ox(t,a,l,f,s);case 1:return l=a.type,f=a.pendingProps,f=a.elementType===l?f:lc(l,f),yS(t,a,l,f,s);case 3:e:{if(OP(a),t===null)throw Error(Jt(387));l=a.pendingProps,g=a.memoizedState,f=g.element,iP(t,a),Vb(a,l,null,s);var w=a.memoizedState;if(l=w.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){f=$f(Error(Jt(423)),a),a=vS(t,a,l,s,f);break e}else if(l!==f){f=$f(Error(Jt(424)),a),a=vS(t,a,l,s,f);break e}else for(no=Ou(a.stateNode.containerInfo.firstChild),so=a,Er=!0,dc=null,s=uP(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Uf(),l===f){a=Vl(t,a,s);break e}ci(t,a,l,s)}a=a.child}return a;case 5:return dP(a),t===null&&nx(a),l=a.type,f=a.pendingProps,g=t!==null?t.memoizedProps:null,w=f.children,Jv(l,f)?w=null:g!==null&&Jv(l,g)&&(a.flags|=32),DP(t,a),ci(t,a,w,s),a.child;case 6:return t===null&&nx(a),null;case 13:return BP(t,a,s);case 4:return I5(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Vf(a,null,l,s):ci(t,a,l,s),a.child;case 11:return l=a.type,f=a.pendingProps,f=a.elementType===l?f:lc(l,f),bS(t,a,l,f,s);case 7:return ci(t,a,a.pendingProps,s),a.child;case 8:return ci(t,a,a.pendingProps.children,s),a.child;case 12:return ci(t,a,a.pendingProps.children,s),a.child;case 10:e:{if(l=a.type._context,f=a.pendingProps,g=a.memoizedProps,w=f.value,hr(jb,l._currentValue),l._currentValue=w,g!==null)if(gc(g.value,w)){if(g.children===f.children&&!ki.current){a=Vl(t,a,s);break e}}else for(g=a.child,g!==null&&(g.return=a);g!==null;){var I=g.dependencies;if(I!==null){w=g.child;for(var o=I.firstContext;o!==null;){if(o.context===l){if(g.tag===1){o=Nl(-1,s&-s),o.tag=2;var M=g.updateQueue;if(M!==null){M=M.shared;var B=M.pending;B===null?o.next=o:(o.next=B.next,B.next=o),M.pending=o}}g.lanes|=s,o=g.alternate,o!==null&&(o.lanes|=s),ax(g.return,s,a),I.lanes|=s;break}o=o.next}}else if(g.tag===10)w=g.type===a.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(Jt(341));w.lanes|=s,I=w.alternate,I!==null&&(I.lanes|=s),ax(w,s,a),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===a){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}ci(t,a,f.children,s),a=a.child}return a;case 9:return f=a.type,l=a.pendingProps.children,Df(a,s),f=Oo(f),l=l(f),a.flags|=1,ci(t,a,l,s),a.child;case 14:return l=a.type,f=lc(l,a.pendingProps),f=lc(l.type,f),_S(t,a,l,f,s);case 15:return kP(t,a,a.type,a.pendingProps,s);case 17:return l=a.type,f=a.pendingProps,f=a.elementType===l?f:lc(l,f),gb(t,a),a.tag=1,Li(l)?(t=!0,Bb(a)):t=!1,Df(a,s),cP(a,l,f),sx(a,l,f,s),cx(null,a,l,!0,t,s);case 19:return NP(t,a,s);case 22:return LP(t,a,s)}throw Error(Jt(156,a.tag))};function ez(t,a){return II(t,a)}function wB(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ro(t,a,s,l){return new wB(t,a,s,l)}function U5(t){return t=t.prototype,!(!t||!t.isReactComponent)}function SB(t){if(typeof t=="function")return U5(t)?1:0;if(t!=null){if(t=t.$$typeof,t===i5)return 11;if(t===o5)return 14}return 2}function ju(t,a){var s=t.alternate;return s===null?(s=Ro(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function yb(t,a,s,l,f,g){var w=2;if(l=t,typeof t=="function")U5(t)&&(w=1);else if(typeof t=="string")w=5;else e:switch(t){case yf:return lp(s.children,f,g,a);case s5:w=8,f|=8;break;case Av:return t=Ro(12,s,a,f|2),t.elementType=Av,t.lanes=g,t;case Cv:return t=Ro(13,s,a,f),t.elementType=Cv,t.lanes=g,t;case Mv:return t=Ro(19,s,a,f),t.elementType=Mv,t.lanes=g,t;case lI:return C_(s,f,g,a);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oI:w=10;break e;case cI:w=9;break e;case i5:w=11;break e;case o5:w=14;break e;case Eu:w=16,l=null;break e}throw Error(Jt(130,t==null?t:typeof t,""))}return a=Ro(w,s,a,f),a.elementType=t,a.type=l,a.lanes=g,a}function lp(t,a,s,l){return t=Ro(7,t,l,a),t.lanes=s,t}function C_(t,a,s,l){return t=Ro(22,t,l,a),t.elementType=lI,t.lanes=s,t.stateNode={isHidden:!1},t}function W3(t,a,s){return t=Ro(6,t,null,a),t.lanes=s,t}function H3(t,a,s){return a=Ro(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}function TB(t,a,s,l,f){this.tag=a,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=P3(0),this.expirationTimes=P3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P3(0),this.identifierPrefix=l,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function V5(t,a,s,l,f,g,w,I,o){return t=new TB(t,a,s,I,o),a===1?(a=1,g===!0&&(a|=8)):a=0,g=Ro(3,null,null,a),t.current=g,g.stateNode=t,g.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},E5(g),t}function EB(t,a,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_f,key:l==null?null:""+l,children:t,containerInfo:a,implementation:s}}function tz(t){if(!t)return Wu;t=t._reactInternals;e:{if(xp(t)!==t||t.tag!==1)throw Error(Jt(170));var a=t;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Li(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(Jt(171))}if(t.tag===1){var s=t.type;if(Li(s))return eP(t,s,a)}return a}function nz(t,a,s,l,f,g,w,I,o){return t=V5(s,l,!0,t,f,g,w,I,o),t.context=tz(null),s=t.current,l=ui(),f=Fu(s),g=Nl(l,f),g.callback=a??null,Bu(s,g,f),t.current.lanes=f,F0(t,f,l),Di(t,l),t}function M_(t,a,s,l){var f=a.current,g=ui(),w=Fu(f);return s=tz(s),a.context===null?a.context=s:a.pendingContext=s,a=Nl(g,w),a.payload={element:t},l=l===void 0?null:l,l!==null&&(a.callback=l),t=Bu(f,a,w),t!==null&&(mc(t,f,w,g),fb(t,f,w)),w}function Xb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function CS(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function G5(t,a){CS(t,a),(t=t.alternate)&&CS(t,a)}function IB(){return null}var az=typeof reportError=="function"?reportError:function(t){console.error(t)};function $5(t){this._internalRoot=t}R_.prototype.render=$5.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(Jt(409));M_(t,a,null,null)};R_.prototype.unmount=$5.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;hp(function(){M_(null,t,null,null)}),a[jl]=null}};function R_(t){this._internalRoot=t}R_.prototype.unstable_scheduleHydration=function(t){if(t){var a=kI();t={blockedOn:null,target:t,priority:a};for(var s=0;s<Pu.length&&a!==0&&a<Pu[s].priority;s++);Pu.splice(s,0,t),s===0&&DI(t)}};function q5(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function k_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function MS(){}function PB(t,a,s,l,f){if(f){if(typeof l=="function"){var g=l;l=function(){var M=Xb(w);g.call(M)}}var w=nz(a,l,t,0,null,!1,!1,"",MS);return t._reactRootContainer=w,t[jl]=w.current,o0(t.nodeType===8?t.parentNode:t),hp(),w}for(;f=t.lastChild;)t.removeChild(f);if(typeof l=="function"){var I=l;l=function(){var M=Xb(o);I.call(M)}}var o=V5(t,0,!1,null,null,!1,!1,"",MS);return t._reactRootContainer=o,t[jl]=o.current,o0(t.nodeType===8?t.parentNode:t),hp(function(){M_(a,o,s,l)}),o}function L_(t,a,s,l,f){var g=s._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var I=f;f=function(){var o=Xb(w);I.call(o)}}M_(a,w,t,f)}else w=PB(s,a,t,f,l);return Xb(w)}MI=function(t){switch(t.tag){case 3:var a=t.stateNode;if(a.current.memoizedState.isDehydrated){var s=Rm(a.pendingLanes);s!==0&&(u5(a,s|1),Di(a,Ur()),!(Ra&6)&&(qf=Ur()+500,Ku()))}break;case 13:hp(function(){var l=Ul(t,1);if(l!==null){var f=ui();mc(l,t,1,f)}}),G5(t,1)}};d5=function(t){if(t.tag===13){var a=Ul(t,134217728);if(a!==null){var s=ui();mc(a,t,134217728,s)}G5(t,134217728)}};RI=function(t){if(t.tag===13){var a=Fu(t),s=Ul(t,a);if(s!==null){var l=ui();mc(s,t,a,l)}G5(t,a)}};kI=function(){return Qa};LI=function(t,a){var s=Qa;try{return Qa=t,a()}finally{Qa=s}};Uv=function(t,a,s){switch(a){case"input":if(Lv(t,s),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var f=T_(l);if(!f)throw Error(Jt(90));dI(l),Lv(l,f)}}}break;case"textarea":fI(t,s);break;case"select":a=s.value,a!=null&&Mf(t,!!s.multiple,a,!1)}};vI=N5;xI=hp;var zB={usingClientEntryPoint:!1,Events:[U0,Sf,T_,_I,yI,N5]},Tm={findFiberByHostInstance:rp,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},AB={bundleType:Tm.bundleType,version:Tm.version,rendererPackageName:Tm.rendererPackageName,rendererConfig:Tm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$l.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=TI(t),t===null?null:t.stateNode},findFiberByHostInstance:Tm.findFiberByHostInstance||IB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H1.isDisabled&&H1.supportsFiber)try{v_=H1.inject(AB),Wc=H1}catch{}}uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zB;uo.createPortal=function(t,a){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q5(a))throw Error(Jt(200));return EB(t,a,null,s)};uo.createRoot=function(t,a){if(!q5(t))throw Error(Jt(299));var s=!1,l="",f=az;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onRecoverableError!==void 0&&(f=a.onRecoverableError)),a=V5(t,1,!1,null,null,s,!1,l,f),t[jl]=a.current,o0(t.nodeType===8?t.parentNode:t),new $5(a)};uo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(Jt(188)):(t=Object.keys(t).join(","),Error(Jt(268,t)));return t=TI(a),t=t===null?null:t.stateNode,t};uo.flushSync=function(t){return hp(t)};uo.hydrate=function(t,a,s){if(!k_(a))throw Error(Jt(200));return L_(null,t,a,!0,s)};uo.hydrateRoot=function(t,a,s){if(!q5(t))throw Error(Jt(405));var l=s!=null&&s.hydratedSources||null,f=!1,g="",w=az;if(s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),a=nz(a,null,t,1,s??null,f,!1,g,w),t[jl]=a.current,o0(t),l)for(t=0;t<l.length;t++)s=l[t],f=s._getVersion,f=f(s._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[s,f]:a.mutableSourceEagerHydrationData.push(s,f);return new R_(a)};uo.render=function(t,a,s){if(!k_(a))throw Error(Jt(200));return L_(null,t,a,!1,s)};uo.unmountComponentAtNode=function(t){if(!k_(t))throw Error(Jt(40));return t._reactRootContainer?(hp(function(){L_(null,null,t,!1,function(){t._reactRootContainer=null,t[jl]=null})}),!0):!1};uo.unstable_batchedUpdates=N5;uo.unstable_renderSubtreeIntoContainer=function(t,a,s,l){if(!k_(s))throw Error(Jt(200));if(t==null||t._reactInternals===void 0)throw Error(Jt(38));return L_(t,a,s,!1,l)};uo.version="18.2.0-next-9e3b772b8-20220608";function rz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rz)}catch(t){console.error(t)}}rz(),nI.exports=uo;var D_=nI.exports;const sz=eh(D_);var iz={exports:{}},oz={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0=Te;function CB(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var MB=typeof Object.is=="function"?Object.is:CB,RB=G0.useSyncExternalStore,kB=G0.useRef,LB=G0.useEffect,DB=G0.useMemo,OB=G0.useDebugValue;oz.useSyncExternalStoreWithSelector=function(t,a,s,l,f){var g=kB(null);if(g.current===null){var w={hasValue:!1,value:null};g.current=w}else w=g.current;g=DB(function(){function o(j){if(!M){if(M=!0,B=j,j=l(j),f!==void 0&&w.hasValue){var Z=w.value;if(f(Z,j))return L=Z}return L=j}if(Z=L,MB(B,j))return Z;var H=l(j);return f!==void 0&&f(Z,H)?Z:(B=j,L=H)}var M=!1,B,L,O=s===void 0?null:s;return[function(){return o(a())},O===null?void 0:function(){return o(O())}]},[a,s,l,f]);var I=RB(t,g[0],g[1]);return LB(function(){w.hasValue=!0,w.value=I},[I]),OB(I),I};iz.exports=oz;var BB=iz.exports,ao="default"in Pv?Hn:Pv,RS=Symbol.for("react-redux-context"),kS=typeof globalThis<"u"?globalThis:{};function NB(){if(!ao.createContext)return{};const t=kS[RS]??(kS[RS]=new Map);let a=t.get(ao.createContext);return a||(a=ao.createContext(null),t.set(ao.createContext,a)),a}var Hu=NB(),FB=()=>{throw new Error("uSES not initialized!")};function W5(t=Hu){return function(){return ao.useContext(t)}}var cz=W5(),lz=FB,jB=t=>{lz=t},UB=(t,a)=>t===a;function VB(t=Hu){const a=t===Hu?cz:W5(t),s=(l,f={})=>{const{equalityFn:g=UB,devModeChecks:w={}}=typeof f=="function"?{equalityFn:f}:f,{store:I,subscription:o,getServerState:M,stabilityCheck:B,identityFunctionCheck:L}=a();ao.useRef(!0);const O=ao.useCallback({[l.name](Z){return l(Z)}}[l.name],[l,B,w.stabilityCheck]),j=lz(o.addNestedSub,I.getState,M||I.getState,O,g);return ao.useDebugValue(j),j};return Object.assign(s,{withTypes:()=>s}),s}var GB=VB();function uz(t){t()}function $B(){let t=null,a=null;return{clear(){t=null,a=null},notify(){uz(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){const s=[];let l=t;for(;l;)s.push(l),l=l.next;return s},subscribe(s){let l=!0;const f=a={callback:s,next:null,prev:a};return f.prev?f.prev.next=f:t=f,function(){!l||t===null||(l=!1,f.next?f.next.prev=f.prev:a=f.prev,f.prev?f.prev.next=f.next:t=f.next)}}}}var LS={notify(){},get:()=>[]};function qB(t,a){let s,l=LS,f=0,g=!1;function w(H){B();const te=l.subscribe(H);let J=!1;return()=>{J||(J=!0,te(),L())}}function I(){l.notify()}function o(){Z.onStateChange&&Z.onStateChange()}function M(){return g}function B(){f++,s||(s=a?a.addNestedSub(o):t.subscribe(o),l=$B())}function L(){f--,s&&f===0&&(s(),s=void 0,l.clear(),l=LS)}function O(){g||(g=!0,B())}function j(){g&&(g=!1,L())}const Z={addNestedSub:w,notifyNestedSubs:I,handleChangeWrapper:o,isSubscribed:M,trySubscribe:O,tryUnsubscribe:j,getListeners:()=>l};return Z}var WB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HB=WB?ao.useLayoutEffect:ao.useEffect;function DS(t,a){return t===a?t!==0||a!==0||1/t===1/a:t!==t&&a!==a}function qm(t,a){if(DS(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;const s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(let f=0;f<s.length;f++)if(!Object.prototype.hasOwnProperty.call(a,s[f])||!DS(t[s[f]],a[s[f]]))return!1;return!0}function ZB({store:t,context:a,children:s,serverState:l,stabilityCheck:f="once",identityFunctionCheck:g="once"}){const w=ao.useMemo(()=>{const M=qB(t);return{store:t,subscription:M,getServerState:l?()=>l:void 0,stabilityCheck:f,identityFunctionCheck:g}},[t,l,f,g]),I=ao.useMemo(()=>t.getState(),[t]);HB(()=>{const{subscription:M}=w;return M.onStateChange=M.notifyNestedSubs,M.trySubscribe(),I!==t.getState()&&M.notifyNestedSubs(),()=>{M.tryUnsubscribe(),M.onStateChange=void 0}},[w,I]);const o=a||Hu;return ao.createElement(o.Provider,{value:w},s)}var YB=ZB;function dz(t=Hu){const a=t===Hu?cz:W5(t),s=()=>{const{store:l}=a();return l};return Object.assign(s,{withTypes:()=>s}),s}var pz=dz();function XB(t=Hu){const a=t===Hu?pz:dz(t),s=()=>a().dispatch;return Object.assign(s,{withTypes:()=>s}),s}var JB=XB(),KB=uz;jB(BB.useSyncExternalStoreWithSelector);function Ss(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var QB=typeof Symbol=="function"&&Symbol.observable||"@@observable",OS=QB,Z3=()=>Math.random().toString(36).substring(7).split("").join("."),eN={INIT:`@@redux/INIT${Z3()}`,REPLACE:`@@redux/REPLACE${Z3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Z3()}`},Jb=eN;function Yc(t){if(typeof t!="object"||t===null)return!1;let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a||Object.getPrototypeOf(t)===null}function fz(t,a,s){if(typeof t!="function")throw new Error(Ss(2));if(typeof a=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(Ss(0));if(typeof a=="function"&&typeof s>"u"&&(s=a,a=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(Ss(1));return s(fz)(t,a)}let l=t,f=a,g=new Map,w=g,I=0,o=!1;function M(){w===g&&(w=new Map,g.forEach((te,J)=>{w.set(J,te)}))}function B(){if(o)throw new Error(Ss(3));return f}function L(te){if(typeof te!="function")throw new Error(Ss(4));if(o)throw new Error(Ss(5));let J=!0;M();const K=I++;return w.set(K,te),function(){if(J){if(o)throw new Error(Ss(6));J=!1,M(),w.delete(K),g=null}}}function O(te){if(!Yc(te))throw new Error(Ss(7));if(typeof te.type>"u")throw new Error(Ss(8));if(typeof te.type!="string")throw new Error(Ss(17));if(o)throw new Error(Ss(9));try{o=!0,f=l(f,te)}finally{o=!1}return(g=w).forEach(K=>{K()}),te}function j(te){if(typeof te!="function")throw new Error(Ss(10));l=te,O({type:Jb.REPLACE})}function Z(){const te=L;return{subscribe(J){if(typeof J!="object"||J===null)throw new Error(Ss(11));function K(){const ee=J;ee.next&&ee.next(B())}return K(),{unsubscribe:te(K)}},[OS](){return this}}}return O({type:Jb.INIT}),{dispatch:O,subscribe:L,getState:B,replaceReducer:j,[OS]:Z}}function tN(t){Object.keys(t).forEach(a=>{const s=t[a];if(typeof s(void 0,{type:Jb.INIT})>"u")throw new Error(Ss(12));if(typeof s(void 0,{type:Jb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ss(13))})}function hz(t){const a=Object.keys(t),s={};for(let g=0;g<a.length;g++){const w=a[g];typeof t[w]=="function"&&(s[w]=t[w])}const l=Object.keys(s);let f;try{tN(s)}catch(g){f=g}return function(w={},I){if(f)throw f;let o=!1;const M={};for(let B=0;B<l.length;B++){const L=l[B],O=s[L],j=w[L],Z=O(j,I);if(typeof Z>"u")throw I&&I.type,new Error(Ss(14));M[L]=Z,o=o||Z!==j}return o=o||l.length!==Object.keys(w).length,o?M:w}}function Kb(...t){return t.length===0?a=>a:t.length===1?t[0]:t.reduce((a,s)=>(...l)=>a(s(...l)))}function nN(...t){return a=>(s,l)=>{const f=a(s,l);let g=()=>{throw new Error(Ss(15))};const w={getState:f.getState,dispatch:(o,...M)=>g(o,...M)},I=t.map(o=>o(w));return g=Kb(...I)(f.dispatch),{...f,dispatch:g}}}function mz(t){return Yc(t)&&"type"in t&&typeof t.type=="string"}var H5=Symbol.for("immer-nothing"),Wm=Symbol.for("immer-draftable"),Bi=Symbol.for("immer-state");function Es(t,...a){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var mp=Object.getPrototypeOf;function bc(t){return!!t&&!!t[Bi]}function _c(t){var a;return t?gz(t)||Array.isArray(t)||!!t[Wm]||!!((a=t.constructor)!=null&&a[Wm])||$0(t)||q0(t):!1}var aN=Object.prototype.constructor.toString();function gz(t){if(!t||typeof t!="object")return!1;const a=mp(t);if(a===null)return!0;const s=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return s===Object?!0:typeof s=="function"&&Function.toString.call(s)===aN}function rN(t){return bc(t)||Es(15,t),t[Bi].base_}function g0(t,a){gp(t)===0?Reflect.ownKeys(t).forEach(s=>{a(s,t[s],t)}):t.forEach((s,l)=>a(l,s,t))}function gp(t){const a=t[Bi];return a?a.type_:Array.isArray(t)?1:$0(t)?2:q0(t)?3:0}function b0(t,a){return gp(t)===2?t.has(a):Object.prototype.hasOwnProperty.call(t,a)}function Y3(t,a){return gp(t)===2?t.get(a):t[a]}function bz(t,a,s){const l=gp(t);l===2?t.set(a,s):l===3?t.add(s):t[a]=s}function sN(t,a){return t===a?t!==0||1/t===1/a:t!==t&&a!==a}function $0(t){return t instanceof Map}function q0(t){return t instanceof Set}function Kd(t){return t.copy_||t.base_}function vx(t,a){if($0(t))return new Map(t);if(q0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!a&&gz(t))return mp(t)?{...t}:Object.assign(Object.create(null),t);const s=Object.getOwnPropertyDescriptors(t);delete s[Bi];let l=Reflect.ownKeys(s);for(let f=0;f<l.length;f++){const g=l[f],w=s[g];w.writable===!1&&(w.writable=!0,w.configurable=!0),(w.get||w.set)&&(s[g]={configurable:!0,writable:!0,enumerable:w.enumerable,value:t[g]})}return Object.create(mp(t),s)}function Z5(t,a=!1){return O_(t)||bc(t)||!_c(t)||(gp(t)>1&&(t.set=t.add=t.clear=t.delete=iN),Object.freeze(t),a&&Object.entries(t).forEach(([s,l])=>Z5(l,!0))),t}function iN(){Es(2)}function O_(t){return Object.isFrozen(t)}var xx={};function bp(t){const a=xx[t];return a||Es(0,t),a}function oN(t,a){xx[t]||(xx[t]=a)}var _0;function _z(){return _0}function cN(t,a){return{drafts_:[],parent_:t,immer_:a,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function BS(t,a){a&&(bp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=a)}function wx(t){Sx(t),t.drafts_.forEach(lN),t.drafts_=null}function Sx(t){t===_0&&(_0=t.parent_)}function NS(t){return _0=cN(_0,t)}function lN(t){const a=t[Bi];a.type_===0||a.type_===1?a.revoke_():a.revoked_=!0}function FS(t,a){a.unfinalizedDrafts_=a.drafts_.length;const s=a.drafts_[0];return t!==void 0&&t!==s?(s[Bi].modified_&&(wx(a),Es(4)),_c(t)&&(t=Qb(a,t),a.parent_||e_(a,t)),a.patches_&&bp("Patches").generateReplacementPatches_(s[Bi].base_,t,a.patches_,a.inversePatches_)):t=Qb(a,s,[]),wx(a),a.patches_&&a.patchListener_(a.patches_,a.inversePatches_),t!==H5?t:void 0}function Qb(t,a,s){if(O_(a))return a;const l=a[Bi];if(!l)return g0(a,(f,g)=>jS(t,l,a,f,g,s)),a;if(l.scope_!==t)return a;if(!l.modified_)return e_(t,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const f=l.copy_;let g=f,w=!1;l.type_===3&&(g=new Set(f),f.clear(),w=!0),g0(g,(I,o)=>jS(t,l,f,I,o,s,w)),e_(t,f,!1),s&&t.patches_&&bp("Patches").generatePatches_(l,s,t.patches_,t.inversePatches_)}return l.copy_}function jS(t,a,s,l,f,g,w){if(bc(f)){const I=g&&a&&a.type_!==3&&!b0(a.assigned_,l)?g.concat(l):void 0,o=Qb(t,f,I);if(bz(s,l,o),bc(o))t.canAutoFreeze_=!1;else return}else w&&s.add(f);if(_c(f)&&!O_(f)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Qb(t,f),(!a||!a.scope_.parent_)&&typeof l!="symbol"&&Object.prototype.propertyIsEnumerable.call(s,l)&&e_(t,f)}}function e_(t,a,s=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Z5(a,s)}function uN(t,a){const s=Array.isArray(t),l={type_:s?1:0,scope_:a?a.scope_:_z(),modified_:!1,finalized_:!1,assigned_:{},parent_:a,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let f=l,g=Y5;s&&(f=[l],g=y0);const{revoke:w,proxy:I}=Proxy.revocable(f,g);return l.draft_=I,l.revoke_=w,I}var Y5={get(t,a){if(a===Bi)return t;const s=Kd(t);if(!b0(s,a))return dN(t,s,a);const l=s[a];return t.finalized_||!_c(l)?l:l===X3(t.base_,a)?(J3(t),t.copy_[a]=Ex(l,t)):l},has(t,a){return a in Kd(t)},ownKeys(t){return Reflect.ownKeys(Kd(t))},set(t,a,s){const l=yz(Kd(t),a);if(l!=null&&l.set)return l.set.call(t.draft_,s),!0;if(!t.modified_){const f=X3(Kd(t),a),g=f==null?void 0:f[Bi];if(g&&g.base_===s)return t.copy_[a]=s,t.assigned_[a]=!1,!0;if(sN(s,f)&&(s!==void 0||b0(t.base_,a)))return!0;J3(t),Tx(t)}return t.copy_[a]===s&&(s!==void 0||a in t.copy_)||Number.isNaN(s)&&Number.isNaN(t.copy_[a])||(t.copy_[a]=s,t.assigned_[a]=!0),!0},deleteProperty(t,a){return X3(t.base_,a)!==void 0||a in t.base_?(t.assigned_[a]=!1,J3(t),Tx(t)):delete t.assigned_[a],t.copy_&&delete t.copy_[a],!0},getOwnPropertyDescriptor(t,a){const s=Kd(t),l=Reflect.getOwnPropertyDescriptor(s,a);return l&&{writable:!0,configurable:t.type_!==1||a!=="length",enumerable:l.enumerable,value:s[a]}},defineProperty(){Es(11)},getPrototypeOf(t){return mp(t.base_)},setPrototypeOf(){Es(12)}},y0={};g0(Y5,(t,a)=>{y0[t]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}});y0.deleteProperty=function(t,a){return y0.set.call(this,t,a,void 0)};y0.set=function(t,a,s){return Y5.set.call(this,t[0],a,s,t[0])};function X3(t,a){const s=t[Bi];return(s?Kd(s):t)[a]}function dN(t,a,s){var f;const l=yz(a,s);return l?"value"in l?l.value:(f=l.get)==null?void 0:f.call(t.draft_):void 0}function yz(t,a){if(!(a in t))return;let s=mp(t);for(;s;){const l=Object.getOwnPropertyDescriptor(s,a);if(l)return l;s=mp(s)}}function Tx(t){t.modified_||(t.modified_=!0,t.parent_&&Tx(t.parent_))}function J3(t){t.copy_||(t.copy_=vx(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var pN=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(a,s,l)=>{if(typeof a=="function"&&typeof s!="function"){const g=s;s=a;const w=this;return function(o=g,...M){return w.produce(o,B=>s.call(this,B,...M))}}typeof s!="function"&&Es(6),l!==void 0&&typeof l!="function"&&Es(7);let f;if(_c(a)){const g=NS(this),w=Ex(a,void 0);let I=!0;try{f=s(w),I=!1}finally{I?wx(g):Sx(g)}return BS(g,l),FS(f,g)}else if(!a||typeof a!="object"){if(f=s(a),f===void 0&&(f=a),f===H5&&(f=void 0),this.autoFreeze_&&Z5(f,!0),l){const g=[],w=[];bp("Patches").generateReplacementPatches_(a,f,g,w),l(g,w)}return f}else Es(1,a)},this.produceWithPatches=(a,s)=>{if(typeof a=="function")return(w,...I)=>this.produceWithPatches(w,o=>a(o,...I));let l,f;return[this.produce(a,s,(w,I)=>{l=w,f=I}),l,f]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){_c(t)||Es(8),bc(t)&&(t=vz(t));const a=NS(this),s=Ex(t,void 0);return s[Bi].isManual_=!0,Sx(a),s}finishDraft(t,a){const s=t&&t[Bi];(!s||!s.isManual_)&&Es(9);const{scope_:l}=s;return BS(l,a),FS(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,a){let s;for(s=a.length-1;s>=0;s--){const f=a[s];if(f.path.length===0&&f.op==="replace"){t=f.value;break}}s>-1&&(a=a.slice(s+1));const l=bp("Patches").applyPatches_;return bc(t)?l(t,a):this.produce(t,f=>l(f,a))}};function Ex(t,a){const s=$0(t)?bp("MapSet").proxyMap_(t,a):q0(t)?bp("MapSet").proxySet_(t,a):uN(t,a);return(a?a.scope_:_z()).drafts_.push(s),s}function vz(t){return bc(t)||Es(10,t),xz(t)}function xz(t){if(!_c(t)||O_(t))return t;const a=t[Bi];let s;if(a){if(!a.modified_)return a.base_;a.finalized_=!0,s=vx(t,a.scope_.immer_.useStrictShallowCopy_)}else s=vx(t,!0);return g0(s,(l,f)=>{bz(s,l,xz(f))}),a&&(a.finalized_=!1),s}function fN(){const a="replace",s="add",l="remove";function f(O,j,Z,H){switch(O.type_){case 0:case 2:return w(O,j,Z,H);case 1:return g(O,j,Z,H);case 3:return I(O,j,Z,H)}}function g(O,j,Z,H){let{base_:te,assigned_:J}=O,K=O.copy_;K.length<te.length&&([te,K]=[K,te],[Z,H]=[H,Z]);for(let W=0;W<te.length;W++)if(J[W]&&K[W]!==te[W]){const ee=j.concat([W]);Z.push({op:a,path:ee,value:L(K[W])}),H.push({op:a,path:ee,value:L(te[W])})}for(let W=te.length;W<K.length;W++){const ee=j.concat([W]);Z.push({op:s,path:ee,value:L(K[W])})}for(let W=K.length-1;te.length<=W;--W){const ee=j.concat([W]);H.push({op:l,path:ee})}}function w(O,j,Z,H){const{base_:te,copy_:J}=O;g0(O.assigned_,(K,W)=>{const ee=Y3(te,K),me=Y3(J,K),Se=W?b0(te,K)?a:s:l;if(ee===me&&Se===a)return;const Me=j.concat(K);Z.push(Se===l?{op:Se,path:Me}:{op:Se,path:Me,value:me}),H.push(Se===s?{op:l,path:Me}:Se===l?{op:s,path:Me,value:L(ee)}:{op:a,path:Me,value:L(ee)})})}function I(O,j,Z,H){let{base_:te,copy_:J}=O,K=0;te.forEach(W=>{if(!J.has(W)){const ee=j.concat([K]);Z.push({op:l,path:ee,value:W}),H.unshift({op:s,path:ee,value:W})}K++}),K=0,J.forEach(W=>{if(!te.has(W)){const ee=j.concat([K]);Z.push({op:s,path:ee,value:W}),H.unshift({op:l,path:ee,value:W})}K++})}function o(O,j,Z,H){Z.push({op:a,path:[],value:j===H5?void 0:j}),H.push({op:a,path:[],value:O})}function M(O,j){return j.forEach(Z=>{const{path:H,op:te}=Z;let J=O;for(let me=0;me<H.length-1;me++){const Se=gp(J);let Me=H[me];typeof Me!="string"&&typeof Me!="number"&&(Me=""+Me),(Se===0||Se===1)&&(Me==="__proto__"||Me==="constructor")&&Es(19),typeof J=="function"&&Me==="prototype"&&Es(19),J=Y3(J,Me),typeof J!="object"&&Es(18,H.join("/"))}const K=gp(J),W=B(Z.value),ee=H[H.length-1];switch(te){case a:switch(K){case 2:return J.set(ee,W);case 3:Es(16);default:return J[ee]=W}case s:switch(K){case 1:return ee==="-"?J.push(W):J.splice(ee,0,W);case 2:return J.set(ee,W);case 3:return J.add(W);default:return J[ee]=W}case l:switch(K){case 1:return J.splice(ee,1);case 2:return J.delete(ee);case 3:return J.delete(Z.value);default:return delete J[ee]}default:Es(17,te)}}),O}function B(O){if(!_c(O))return O;if(Array.isArray(O))return O.map(B);if($0(O))return new Map(Array.from(O.entries()).map(([Z,H])=>[Z,B(H)]));if(q0(O))return new Set(Array.from(O).map(B));const j=Object.create(mp(O));for(const Z in O)j[Z]=B(O[Z]);return b0(O,Wm)&&(j[Wm]=O[Wm]),j}function L(O){return bc(O)?B(O):O}oN("Patches",{applyPatches_:M,generatePatches_:f,generateReplacementPatches_:o})}var lo=new pN,W0=lo.produce,wz=lo.produceWithPatches.bind(lo);lo.setAutoFreeze.bind(lo);lo.setUseStrictShallowCopy.bind(lo);var US=lo.applyPatches.bind(lo);lo.createDraft.bind(lo);lo.finishDraft.bind(lo);function hN(t,a=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(a)}function mN(t,a=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(a)}function gN(t,a="expected all items to be functions, instead received the following types: "){if(!t.every(s=>typeof s=="function")){const s=t.map(l=>typeof l=="function"?`function ${l.name||"unnamed"}()`:typeof l).join(", ");throw new TypeError(`${a}[${s}]`)}}var VS=t=>Array.isArray(t)?t:[t];function bN(t){const a=Array.isArray(t[0])?t[0]:t;return gN(a,"createSelector expects all input-selectors to be functions, but received the following types: "),a}function _N(t,a){const s=[],{length:l}=t;for(let f=0;f<l;f++)s.push(t[f].apply(null,a));return s}var yN=class{constructor(t){this.value=t}deref(){return this.value}},vN=typeof WeakRef<"u"?WeakRef:yN,xN=0,GS=1;function Z1(){return{s:xN,v:void 0,o:null,p:null}}function v0(t,a={}){let s=Z1();const{resultEqualityCheck:l}=a;let f,g=0;function w(){var L;let I=s;const{length:o}=arguments;for(let O=0,j=o;O<j;O++){const Z=arguments[O];if(typeof Z=="function"||typeof Z=="object"&&Z!==null){let H=I.o;H===null&&(I.o=H=new WeakMap);const te=H.get(Z);te===void 0?(I=Z1(),H.set(Z,I)):I=te}else{let H=I.p;H===null&&(I.p=H=new Map);const te=H.get(Z);te===void 0?(I=Z1(),H.set(Z,I)):I=te}}const M=I;let B;if(I.s===GS?B=I.v:(B=t.apply(null,arguments),g++),M.s=GS,l){const O=((L=f==null?void 0:f.deref)==null?void 0:L.call(f))??f;O!=null&&l(O,B)&&(B=O,g!==0&&g--),f=typeof B=="object"&&B!==null||typeof B=="function"?new vN(B):B}return M.v=B,B}return w.clearCache=()=>{s=Z1(),w.resetResultsCount()},w.resultsCount=()=>g,w.resetResultsCount=()=>{g=0},w}function Sz(t,...a){const s=typeof t=="function"?{memoize:t,memoizeOptions:a}:t,l=(...f)=>{let g=0,w=0,I,o={},M=f.pop();typeof M=="object"&&(o=M,M=f.pop()),hN(M,`createSelector expects an output function after the inputs, but received: [${typeof M}]`);const B={...s,...o},{memoize:L,memoizeOptions:O=[],argsMemoize:j=v0,argsMemoizeOptions:Z=[],devModeChecks:H={}}=B,te=VS(O),J=VS(Z),K=bN(f),W=L(function(){return g++,M.apply(null,arguments)},...te),ee=j(function(){w++;const Se=_N(K,arguments);return I=W.apply(null,Se),I},...J);return Object.assign(ee,{resultFunc:M,memoizedResultFunc:W,dependencies:K,dependencyRecomputations:()=>w,resetDependencyRecomputations:()=>{w=0},lastResult:()=>I,recomputations:()=>g,resetRecomputations:()=>{g=0},memoize:L,argsMemoize:j})};return Object.assign(l,{withTypes:()=>l}),l}var X5=Sz(v0),wN=Object.assign((t,a=X5)=>{mN(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const s=Object.keys(t),l=s.map(g=>t[g]);return a(l,(...g)=>g.reduce((w,I,o)=>(w[s[o]]=I,w),{}))},{withTypes:()=>wN});function Tz(t){return({dispatch:s,getState:l})=>f=>g=>typeof g=="function"?g(s,l,t):f(g)}var SN=Tz(),TN=Tz,EN=(...t)=>{const a=Sz(...t),s=Object.assign((...l)=>{const f=a(...l),g=(w,...I)=>f(bc(w)?vz(w):w,...I);return Object.assign(g,f),g},{withTypes:()=>s});return s};EN(v0);var IN=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Kb:Kb.apply(null,arguments)},PN=t=>t&&typeof t.match=="function";function di(t,a){function s(...l){if(a){let f=a(...l);if(!f)throw new Error(Ws(0));return{type:t,payload:f.payload,..."meta"in f&&{meta:f.meta},..."error"in f&&{error:f.error}}}return{type:t,payload:l[0]}}return s.toString=()=>`${t}`,s.type=t,s.match=l=>mz(l)&&l.type===t,s}var Ez=class Lm extends Array{constructor(...a){super(...a),Object.setPrototypeOf(this,Lm.prototype)}static get[Symbol.species](){return Lm}concat(...a){return super.concat.apply(this,a)}prepend(...a){return a.length===1&&Array.isArray(a[0])?new Lm(...a[0].concat(this)):new Lm(...a.concat(this))}};function $S(t){return _c(t)?W0(t,()=>{}):t}function qS(t,a,s){if(t.has(a)){let f=t.get(a);return s.update&&(f=s.update(f,a,t),t.set(a,f)),f}if(!s.insert)throw new Error(Ws(10));const l=s.insert(a,t);return t.set(a,l),l}function zN(t){return typeof t=="boolean"}var AN=()=>function(a){const{thunk:s=!0,immutableCheck:l=!0,serializableCheck:f=!0,actionCreatorCheck:g=!0}=a??{};let w=new Ez;return s&&(zN(s)?w.push(SN):w.push(TN(s.extraArgument))),w},Cf="RTK_autoBatch",Em=()=>t=>({payload:t,meta:{[Cf]:!0}}),Iz=t=>a=>{setTimeout(a,t)},CN=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Iz(10),MN=(t={type:"raf"})=>a=>(...s)=>{const l=a(...s);let f=!0,g=!1,w=!1;const I=new Set,o=t.type==="tick"?queueMicrotask:t.type==="raf"?CN:t.type==="callback"?t.queueNotification:Iz(t.timeout),M=()=>{w=!1,g&&(g=!1,I.forEach(B=>B()))};return Object.assign({},l,{subscribe(B){const L=()=>f&&B(),O=l.subscribe(L);return I.add(B),()=>{O(),I.delete(B)}},dispatch(B){var L;try{return f=!((L=B==null?void 0:B.meta)!=null&&L[Cf]),g=!f,g&&(w||(w=!0,o(M))),l.dispatch(B)}finally{f=!0}}})},RN=t=>function(s){const{autoBatch:l=!0}=s??{};let f=new Ez(t);return l&&f.push(MN(typeof l=="object"?l:void 0)),f},kN=!0;function LN(t){const a=AN(),{reducer:s=void 0,middleware:l,devTools:f=!0,preloadedState:g=void 0,enhancers:w=void 0}=t||{};let I;if(typeof s=="function")I=s;else if(Yc(s))I=hz(s);else throw new Error(Ws(1));let o;typeof l=="function"?o=l(a):o=a();let M=Kb;f&&(M=IN({trace:!kN,...typeof f=="object"&&f}));const B=nN(...o),L=RN(B);let O=typeof w=="function"?w(L):L();const j=M(...O);return fz(I,g,j)}function Pz(t){const a={},s=[];let l;const f={addCase(g,w){const I=typeof g=="string"?g:g.type;if(!I)throw new Error(Ws(28));if(I in a)throw new Error(Ws(29));return a[I]=w,f},addMatcher(g,w){return s.push({matcher:g,reducer:w}),f},addDefaultCase(g){return l=g,f}};return t(f),[a,s,l]}function DN(t){return typeof t=="function"}function ON(t,a){let[s,l,f]=Pz(a),g;if(DN(t))g=()=>$S(t());else{const I=$S(t);g=()=>I}function w(I=g(),o){let M=[s[o.type],...l.filter(({matcher:B})=>B(o)).map(({reducer:B})=>B)];return M.filter(B=>!!B).length===0&&(M=[f]),M.reduce((B,L)=>{if(L)if(bc(B)){const j=L(B,o);return j===void 0?B:j}else{if(_c(B))return W0(B,O=>L(O,o));{const O=L(B,o);if(O===void 0){if(B===null)return B;throw new Error(Ws(9))}return O}}return B},I)}return w.getInitialState=g,w}var BN="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",J5=(t=21)=>{let a="",s=t;for(;s--;)a+=BN[Math.random()*64|0];return a},zz=(t,a)=>PN(t)?t.match(a):t(a);function Gl(...t){return a=>t.some(s=>zz(s,a))}function Hm(...t){return a=>t.every(s=>zz(s,a))}function B_(t,a){if(!t||!t.meta)return!1;const s=typeof t.meta.requestId=="string",l=a.indexOf(t.meta.requestStatus)>-1;return s&&l}function H0(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function K5(...t){return t.length===0?a=>B_(a,["pending"]):H0(t)?a=>{const s=t.map(f=>f.pending);return Gl(...s)(a)}:K5()(t[0])}function Wf(...t){return t.length===0?a=>B_(a,["rejected"]):H0(t)?a=>{const s=t.map(f=>f.rejected);return Gl(...s)(a)}:Wf()(t[0])}function N_(...t){const a=s=>s&&s.meta&&s.meta.rejectedWithValue;return t.length===0?s=>Hm(Wf(...t),a)(s):H0(t)?s=>Hm(Wf(...t),a)(s):N_()(t[0])}function Zu(...t){return t.length===0?a=>B_(a,["fulfilled"]):H0(t)?a=>{const s=t.map(f=>f.fulfilled);return Gl(...s)(a)}:Zu()(t[0])}function Ix(...t){return t.length===0?a=>B_(a,["pending","fulfilled","rejected"]):H0(t)?a=>{const s=[];for(const f of t)s.push(f.pending,f.rejected,f.fulfilled);return Gl(...s)(a)}:Ix()(t[0])}var NN=["name","message","stack","code"],K3=class{constructor(t,a){x3(this,"_type");this.payload=t,this.meta=a}},WS=class{constructor(t,a){x3(this,"_type");this.payload=t,this.meta=a}},FN=t=>{if(typeof t=="object"&&t!==null){const a={};for(const s of NN)typeof t[s]=="string"&&(a[s]=t[s]);return a}return{message:String(t)}},HS=(()=>{function t(a,s,l){const f=di(a+"/fulfilled",(o,M,B,L)=>({payload:o,meta:{...L||{},arg:B,requestId:M,requestStatus:"fulfilled"}})),g=di(a+"/pending",(o,M,B)=>({payload:void 0,meta:{...B||{},arg:M,requestId:o,requestStatus:"pending"}})),w=di(a+"/rejected",(o,M,B,L,O)=>({payload:L,error:(l&&l.serializeError||FN)(o||"Rejected"),meta:{...O||{},arg:B,requestId:M,rejectedWithValue:!!L,requestStatus:"rejected",aborted:(o==null?void 0:o.name)==="AbortError",condition:(o==null?void 0:o.name)==="ConditionError"}}));function I(o){return(M,B,L)=>{const O=l!=null&&l.idGenerator?l.idGenerator(o):J5(),j=new AbortController;let Z,H;function te(K){H=K,j.abort()}const J=async function(){var ee,me;let K;try{let Se=(ee=l==null?void 0:l.condition)==null?void 0:ee.call(l,o,{getState:B,extra:L});if(UN(Se)&&(Se=await Se),Se===!1||j.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const Me=new Promise((Ie,Ge)=>{Z=()=>{Ge({name:"AbortError",message:H||"Aborted"})},j.signal.addEventListener("abort",Z)});M(g(O,o,(me=l==null?void 0:l.getPendingMeta)==null?void 0:me.call(l,{requestId:O,arg:o},{getState:B,extra:L}))),K=await Promise.race([Me,Promise.resolve(s(o,{dispatch:M,getState:B,extra:L,requestId:O,signal:j.signal,abort:te,rejectWithValue:(Ie,Ge)=>new K3(Ie,Ge),fulfillWithValue:(Ie,Ge)=>new WS(Ie,Ge)})).then(Ie=>{if(Ie instanceof K3)throw Ie;return Ie instanceof WS?f(Ie.payload,O,o,Ie.meta):f(Ie,O,o)})])}catch(Se){K=Se instanceof K3?w(null,O,o,Se.payload,Se.meta):w(Se,O,o)}finally{Z&&j.signal.removeEventListener("abort",Z)}return l&&!l.dispatchConditionRejection&&w.match(K)&&K.meta.condition||M(K),K}();return Object.assign(J,{abort:te,requestId:O,arg:o,unwrap(){return J.then(jN)}})}}return Object.assign(I,{pending:g,rejected:w,fulfilled:f,settled:Gl(w,f),typePrefix:a})}return t.withTypes=()=>t,t})();function jN(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function UN(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var VN=Symbol.for("rtk-slice-createasyncthunk");function GN(t,a){return`${t}/${a}`}function $N({creators:t}={}){var s;const a=(s=t==null?void 0:t.asyncThunk)==null?void 0:s[VN];return function(f){const{name:g,reducerPath:w=g}=f;if(!g)throw new Error(Ws(11));typeof process<"u";const I=(typeof f.reducers=="function"?f.reducers(WN()):f.reducers)||{},o=Object.keys(I),M={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},B={addCase(W,ee){const me=typeof W=="string"?W:W.type;if(!me)throw new Error(Ws(12));if(me in M.sliceCaseReducersByType)throw new Error(Ws(13));return M.sliceCaseReducersByType[me]=ee,B},addMatcher(W,ee){return M.sliceMatchers.push({matcher:W,reducer:ee}),B},exposeAction(W,ee){return M.actionCreators[W]=ee,B},exposeCaseReducer(W,ee){return M.sliceCaseReducersByName[W]=ee,B}};o.forEach(W=>{const ee=I[W],me={reducerName:W,type:GN(g,W),createNotation:typeof f.reducers=="function"};ZN(ee)?XN(me,ee,B,a):HN(me,ee,B)});function L(){const[W={},ee=[],me=void 0]=typeof f.extraReducers=="function"?Pz(f.extraReducers):[f.extraReducers],Se={...W,...M.sliceCaseReducersByType};return ON(f.initialState,Me=>{for(let Ie in Se)Me.addCase(Ie,Se[Ie]);for(let Ie of M.sliceMatchers)Me.addMatcher(Ie.matcher,Ie.reducer);for(let Ie of ee)Me.addMatcher(Ie.matcher,Ie.reducer);me&&Me.addDefaultCase(me)})}const O=W=>W,j=new Map;let Z;function H(W,ee){return Z||(Z=L()),Z(W,ee)}function te(){return Z||(Z=L()),Z.getInitialState()}function J(W,ee=!1){function me(Me){let Ie=Me[W];return typeof Ie>"u"&&ee&&(Ie=te()),Ie}function Se(Me=O){const Ie=qS(j,ee,{insert:()=>new WeakMap});return qS(Ie,Me,{insert:()=>{const Ge={};for(const[ge,Xe]of Object.entries(f.selectors??{}))Ge[ge]=qN(Xe,Me,te,ee);return Ge}})}return{reducerPath:W,getSelectors:Se,get selectors(){return Se(me)},selectSlice:me}}const K={name:g,reducer:H,actions:M.actionCreators,caseReducers:M.sliceCaseReducersByName,getInitialState:te,...J(w),injectInto(W,{reducerPath:ee,...me}={}){const Se=ee??w;return W.inject({reducerPath:Se,reducer:H},me),{...K,...J(Se,!0)}}};return K}}function qN(t,a,s,l){function f(g,...w){let I=a(g);return typeof I>"u"&&l&&(I=s()),t(I,...w)}return f.unwrapped=t,f}var pf=$N();function WN(){function t(a,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:a,...s}}return t.withTypes=()=>t,{reducer(a){return Object.assign({[a.name](...s){return a(...s)}}[a.name],{_reducerDefinitionType:"reducer"})},preparedReducer(a,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:a,reducer:s}},asyncThunk:t}}function HN({type:t,reducerName:a,createNotation:s},l,f){let g,w;if("reducer"in l){if(s&&!YN(l))throw new Error(Ws(17));g=l.reducer,w=l.prepare}else g=l;f.addCase(t,g).exposeCaseReducer(a,g).exposeAction(a,w?di(t,w):di(t))}function ZN(t){return t._reducerDefinitionType==="asyncThunk"}function YN(t){return t._reducerDefinitionType==="reducerWithPrepare"}function XN({type:t,reducerName:a},s,l,f){if(!f)throw new Error(Ws(18));const{payloadCreator:g,fulfilled:w,pending:I,rejected:o,settled:M,options:B}=s,L=f(t,g,B);l.exposeAction(a,L),w&&l.addCase(L.fulfilled,w),I&&l.addCase(L.pending,I),o&&l.addCase(L.rejected,o),M&&l.addMatcher(L.settled,M),l.exposeCaseReducer(a,{fulfilled:w||Y1,pending:I||Y1,rejected:o||Y1,settled:M||Y1})}function Y1(){}var JN=(t,a)=>{if(typeof t!="function")throw new Error(Ws(32))},Q5="listenerMiddleware",KN=t=>{let{type:a,actionCreator:s,matcher:l,predicate:f,effect:g}=t;if(a)f=di(a).match;else if(s)a=s.type,f=s.match;else if(l)f=l;else if(!f)throw new Error(Ws(21));return JN(g),{predicate:f,type:a,effect:g}},QN=Object.assign(t=>{const{type:a,predicate:s,effect:l}=KN(t);return{id:J5(),effect:l,type:a,predicate:s,pending:new Set,unsubscribe:()=>{throw new Error(Ws(22))}}},{withTypes:()=>QN}),eF=Object.assign(di(`${Q5}/add`),{withTypes:()=>eF});di(`${Q5}/removeAll`);var tF=Object.assign(di(`${Q5}/remove`),{withTypes:()=>tF});function Ws(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Az=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(Az||{});function nF(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}function aF(t){return new RegExp("(^|:)//").test(t)}var rF=t=>t.replace(/\/$/,""),sF=t=>t.replace(/^\//,"");function iF(t,a){if(!t)return a;if(!a)return t;if(aF(a))return a;const s=t.endsWith("/")||!a.startsWith("?")?"/":"";return t=rF(t),a=sF(a),`${t}${s}${a}`}var ZS=t=>[].concat(...t);function oF(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function cF(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var YS=Yc;function Cz(t,a){if(t===a||!(YS(t)&&YS(a)||Array.isArray(t)&&Array.isArray(a)))return a;const s=Object.keys(a),l=Object.keys(t);let f=s.length===l.length;const g=Array.isArray(a)?[]:{};for(const w of s)g[w]=Cz(t[w],a[w]),f&&(f=t[w]===g[w]);return f?t:g}var XS=(...t)=>fetch(...t),lF=t=>t.status>=200&&t.status<=299,uF=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function JS(t){if(!Yc(t))return t;const a={...t};for(const[s,l]of Object.entries(a))l===void 0&&delete a[s];return a}function e6({baseUrl:t,prepareHeaders:a=L=>L,fetchFn:s=XS,paramsSerializer:l,isJsonContentType:f=uF,jsonContentType:g="application/json",jsonReplacer:w,timeout:I,responseHandler:o,validateStatus:M,...B}={}){return typeof fetch>"u"&&s===XS&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(O,j)=>{const{signal:Z,getState:H,extra:te,endpoint:J,forced:K,type:W}=j;let ee,{url:me,headers:Se=new Headers(B.headers),params:Me=void 0,responseHandler:Ie=o??"json",validateStatus:Ge=M??lF,timeout:ge=I,...Xe}=typeof O=="string"?{url:O}:O,rt={...B,signal:Z,...Xe};Se=new Headers(JS(Se)),rt.headers=await a(Se,{getState:H,extra:te,endpoint:J,forced:K,type:W})||Se;const Ue=Nt=>typeof Nt=="object"&&(Yc(Nt)||Array.isArray(Nt)||typeof Nt.toJSON=="function");if(!rt.headers.has("content-type")&&Ue(rt.body)&&rt.headers.set("content-type",g),Ue(rt.body)&&f(rt.headers)&&(rt.body=JSON.stringify(rt.body,w)),Me){const Nt=~me.indexOf("?")?"&":"?",Sn=l?l(Me):new URLSearchParams(JS(Me));me+=Nt+Sn}me=iF(t,me);const Bt=new Request(me,rt);ee={request:new Request(me,rt)};let Tn,ea=!1,St=ge&&setTimeout(()=>{ea=!0,j.abort()},ge);try{Tn=await s(Bt)}catch(Nt){return{error:{status:ea?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(Nt)},meta:ee}}finally{St&&clearTimeout(St)}const ke=Tn.clone();ee.response=ke;let Ct,Et="";try{let Nt;if(await Promise.all([L(Tn,Ie).then(Sn=>Ct=Sn,Sn=>Nt=Sn),ke.text().then(Sn=>Et=Sn,()=>{})]),Nt)throw Nt}catch(Nt){return{error:{status:"PARSING_ERROR",originalStatus:Tn.status,data:Et,error:String(Nt)},meta:ee}}return Ge(Tn,Ct)?{data:Ct,meta:ee}:{error:{status:Tn.status,data:Ct},meta:ee}};async function L(O,j){if(typeof j=="function")return j(O);if(j==="content-type"&&(j=f(O.headers)?"json":"text"),j==="json"){const Z=await O.text();return Z.length?JSON.parse(Z):null}return O.text()}}var KS=class{constructor(t,a=void 0){this.value=t,this.meta=a}},x0=di("__rtkq/focused"),t_=di("__rtkq/unfocused"),w0=di("__rtkq/online"),n_=di("__rtkq/offline"),Q3=!1;function dF(t,a){function s(){const l=()=>t(x0()),f=()=>t(t_()),g=()=>t(w0()),w=()=>t(n_()),I=()=>{window.document.visibilityState==="visible"?l():f()};return Q3||typeof window<"u"&&window.addEventListener&&(window.addEventListener("visibilitychange",I,!1),window.addEventListener("focus",l,!1),window.addEventListener("online",g,!1),window.addEventListener("offline",w,!1),Q3=!0),()=>{window.removeEventListener("focus",l),window.removeEventListener("visibilitychange",I),window.removeEventListener("online",g),window.removeEventListener("offline",w),Q3=!1}}return a?a(t,{onFocus:x0,onFocusLost:t_,onOffline:n_,onOnline:w0}):s()}function Mz(t){return t.type==="query"}function pF(t){return t.type==="mutation"}function t6(t,a,s,l,f,g){return fF(t)?t(a,s,l,f).map(Px).map(g):Array.isArray(t)?t.map(Px).map(g):[]}function fF(t){return typeof t=="function"}function Px(t){return typeof t=="string"?{type:t}:t}function QS(t){return t!=null}function Bf(t){let a=0;for(const s in t)a++;return a}function hF(t,a){return t.catch(a)}var S0=Symbol("forceQueryFn"),zx=t=>typeof t[S0]=="function";function mF({serializeQueryArgs:t,queryThunk:a,mutationThunk:s,api:l,context:f}){const g=new Map,w=new Map,{unsubscribeQueryResult:I,removeMutationResult:o,updateSubscriptionOptions:M}=l.internalActions;return{buildInitiateQuery:Z,buildInitiateMutation:H,getRunningQueryThunk:B,getRunningMutationThunk:L,getRunningQueriesThunk:O,getRunningMutationsThunk:j};function B(te,J){return K=>{var me;const W=f.endpointDefinitions[te],ee=t({queryArgs:J,endpointDefinition:W,endpointName:te});return(me=g.get(K))==null?void 0:me[ee]}}function L(te,J){return K=>{var W;return(W=w.get(K))==null?void 0:W[J]}}function O(){return te=>Object.values(g.get(te)||{}).filter(QS)}function j(){return te=>Object.values(w.get(te)||{}).filter(QS)}function Z(te,J){const K=(W,{subscribe:ee=!0,forceRefetch:me,subscriptionOptions:Se,[S0]:Me,...Ie}={})=>(Ge,ge)=>{var Nt;const Xe=t({queryArgs:W,endpointDefinition:J,endpointName:te}),rt=a({...Ie,type:"query",subscribe:ee,forceRefetch:me,subscriptionOptions:Se,endpointName:te,originalArgs:W,queryCacheKey:Xe,[S0]:Me}),Ue=l.endpoints[te].select(W),Bt=Ge(rt),un=Ue(ge()),{requestId:Tn,abort:ea}=Bt,St=un.requestId!==Tn,ke=(Nt=g.get(Ge))==null?void 0:Nt[Xe],Ct=()=>Ue(ge()),Et=Object.assign(Me?Bt.then(Ct):St&&!ke?Promise.resolve(un):Promise.all([ke,Bt]).then(Ct),{arg:W,requestId:Tn,subscriptionOptions:Se,queryCacheKey:Xe,abort:ea,async unwrap(){const Sn=await Et;if(Sn.isError)throw Sn.error;return Sn.data},refetch:()=>Ge(K(W,{subscribe:!1,forceRefetch:!0})),unsubscribe(){ee&&Ge(I({queryCacheKey:Xe,requestId:Tn}))},updateSubscriptionOptions(Sn){Et.subscriptionOptions=Sn,Ge(M({endpointName:te,requestId:Tn,queryCacheKey:Xe,options:Sn}))}});if(!ke&&!St&&!Me){const Sn=g.get(Ge)||{};Sn[Xe]=Et,g.set(Ge,Sn),Et.then(()=>{delete Sn[Xe],Bf(Sn)||g.delete(Ge)})}return Et};return K}function H(te){return(J,{track:K=!0,fixedCacheKey:W}={})=>(ee,me)=>{const Se=s({type:"mutation",endpointName:te,originalArgs:J,track:K,fixedCacheKey:W}),Me=ee(Se),{requestId:Ie,abort:Ge,unwrap:ge}=Me,Xe=hF(Me.unwrap().then(un=>({data:un})),un=>({error:un})),rt=()=>{ee(o({requestId:Ie,fixedCacheKey:W}))},Ue=Object.assign(Xe,{arg:Me.arg,requestId:Ie,abort:Ge,unwrap:ge,reset:rt}),Bt=w.get(ee)||{};return w.set(ee,Bt),Bt[Ie]=Ue,Ue.then(()=>{delete Bt[Ie],Bf(Bt)||w.delete(ee)}),W&&(Bt[W]=Ue,Ue.then(()=>{Bt[W]===Ue&&(delete Bt[W],Bf(Bt)||w.delete(ee))})),Ue}}}function eT(t){return t}function gF({reducerPath:t,baseQuery:a,context:{endpointDefinitions:s},serializeQueryArgs:l,api:f,assertTagType:g}){const w=(K,W,ee,me)=>(Se,Me)=>{const Ie=s[K],Ge=l({queryArgs:W,endpointDefinition:Ie,endpointName:K});if(Se(f.internalActions.queryResultPatched({queryCacheKey:Ge,patches:ee})),!me)return;const ge=f.endpoints[K].select(W)(Me()),Xe=t6(Ie.providesTags,ge.data,void 0,W,{},g);Se(f.internalActions.updateProvidedBy({queryCacheKey:Ge,providedTags:Xe}))},I=(K,W,ee,me=!0)=>(Se,Me)=>{const Ge=f.endpoints[K].select(W)(Me());let ge={patches:[],inversePatches:[],undo:()=>Se(f.util.patchQueryData(K,W,ge.inversePatches,me))};if(Ge.status==="uninitialized")return ge;let Xe;if("data"in Ge)if(_c(Ge.data)){const[rt,Ue,Bt]=wz(Ge.data,ee);ge.patches.push(...Ue),ge.inversePatches.push(...Bt),Xe=rt}else Xe=ee(Ge.data),ge.patches.push({op:"replace",path:[],value:Xe}),ge.inversePatches.push({op:"replace",path:[],value:Ge.data});return ge.patches.length===0||Se(f.util.patchQueryData(K,W,ge.patches,me)),ge},o=(K,W,ee)=>me=>me(f.endpoints[K].initiate(W,{subscribe:!1,forceRefetch:!0,[S0]:()=>({data:ee})})),M=async(K,{signal:W,abort:ee,rejectWithValue:me,fulfillWithValue:Se,dispatch:Me,getState:Ie,extra:Ge})=>{const ge=s[K.endpointName];try{let Xe=eT,rt;const Ue={signal:W,abort:ee,dispatch:Me,getState:Ie,extra:Ge,endpoint:K.endpointName,type:K.type,forced:K.type==="query"?B(K,Ie()):void 0},Bt=K.type==="query"?K[S0]:void 0;if(Bt?rt=Bt():ge.query?(rt=await a(ge.query(K.originalArgs),Ue,ge.extraOptions),ge.transformResponse&&(Xe=ge.transformResponse)):rt=await ge.queryFn(K.originalArgs,Ue,ge.extraOptions,un=>a(un,Ue,ge.extraOptions)),typeof process<"u",rt.error)throw new KS(rt.error,rt.meta);return Se(await Xe(rt.data,rt.meta,K.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:rt.meta,[Cf]:!0})}catch(Xe){let rt=Xe;if(rt instanceof KS){let Ue=eT;ge.query&&ge.transformErrorResponse&&(Ue=ge.transformErrorResponse);try{return me(await Ue(rt.value,rt.meta,K.originalArgs),{baseQueryMeta:rt.meta,[Cf]:!0})}catch(Bt){rt=Bt}}throw typeof process<"u",console.error(rt),rt}};function B(K,W){var Ie,Ge,ge;const ee=(Ge=(Ie=W[t])==null?void 0:Ie.queries)==null?void 0:Ge[K.queryCacheKey],me=(ge=W[t])==null?void 0:ge.config.refetchOnMountOrArgChange,Se=ee==null?void 0:ee.fulfilledTimeStamp,Me=K.forceRefetch??(K.subscribe&&me);return Me?Me===!0||(Number(new Date)-Number(Se))/1e3>=Me:!1}const L=HS(`${t}/executeQuery`,M,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Cf]:!0}},condition(K,{getState:W}){var ge,Xe,rt;const ee=W(),me=(Xe=(ge=ee[t])==null?void 0:ge.queries)==null?void 0:Xe[K.queryCacheKey],Se=me==null?void 0:me.fulfilledTimeStamp,Me=K.originalArgs,Ie=me==null?void 0:me.originalArgs,Ge=s[K.endpointName];return zx(K)?!0:(me==null?void 0:me.status)==="pending"?!1:B(K,ee)||Mz(Ge)&&((rt=Ge==null?void 0:Ge.forceRefetch)!=null&&rt.call(Ge,{currentArg:Me,previousArg:Ie,endpointState:me,state:ee}))?!0:!Se},dispatchConditionRejection:!0}),O=HS(`${t}/executeMutation`,M,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Cf]:!0}}}),j=K=>"force"in K,Z=K=>"ifOlderThan"in K,H=(K,W,ee)=>(me,Se)=>{const Me=j(ee)&&ee.force,Ie=Z(ee)&&ee.ifOlderThan,Ge=(Xe=!0)=>{const rt={forceRefetch:Xe,isPrefetch:!0};return f.endpoints[K].initiate(W,rt)},ge=f.endpoints[K].select(W)(Se());if(Me)me(Ge());else if(Ie){const Xe=ge==null?void 0:ge.fulfilledTimeStamp;if(!Xe){me(Ge());return}(Number(new Date)-Number(new Date(Xe)))/1e3>=Ie&&me(Ge())}else me(Ge(!1))};function te(K){return W=>{var ee,me;return((me=(ee=W==null?void 0:W.meta)==null?void 0:ee.arg)==null?void 0:me.endpointName)===K}}function J(K,W){return{matchPending:Hm(K5(K),te(W)),matchFulfilled:Hm(Zu(K),te(W)),matchRejected:Hm(Wf(K),te(W))}}return{queryThunk:L,mutationThunk:O,prefetch:H,updateQueryData:I,upsertQueryData:o,patchQueryData:w,buildMatchThunkActions:J}}function Rz(t,a,s,l){return t6(s[t.meta.arg.endpointName][a],Zu(t)?t.payload:void 0,N_(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,l)}function X1(t,a,s){const l=t[a];l&&s(l)}function T0(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function tT(t,a,s){const l=t[T0(a)];l&&s(l)}var Im={};function bF({reducerPath:t,queryThunk:a,mutationThunk:s,context:{endpointDefinitions:l,apiUid:f,extractRehydrationInfo:g,hasRehydrationInfo:w},assertTagType:I,config:o}){const M=di(`${t}/resetApiState`),B=pf({name:`${t}/queries`,initialState:Im,reducers:{removeQueryResult:{reducer(W,{payload:{queryCacheKey:ee}}){delete W[ee]},prepare:Em()},queryResultPatched:{reducer(W,{payload:{queryCacheKey:ee,patches:me}}){X1(W,ee,Se=>{Se.data=US(Se.data,me.concat())})},prepare:Em()}},extraReducers(W){W.addCase(a.pending,(ee,{meta:me,meta:{arg:Se}})=>{var Ie;const Me=zx(Se);ee[Ie=Se.queryCacheKey]??(ee[Ie]={status:"uninitialized",endpointName:Se.endpointName}),X1(ee,Se.queryCacheKey,Ge=>{Ge.status="pending",Ge.requestId=Me&&Ge.requestId?Ge.requestId:me.requestId,Se.originalArgs!==void 0&&(Ge.originalArgs=Se.originalArgs),Ge.startedTimeStamp=me.startedTimeStamp})}).addCase(a.fulfilled,(ee,{meta:me,payload:Se})=>{X1(ee,me.arg.queryCacheKey,Me=>{if(Me.requestId!==me.requestId&&!zx(me.arg))return;const{merge:Ie}=l[me.arg.endpointName];if(Me.status="fulfilled",Ie)if(Me.data!==void 0){const{fulfilledTimeStamp:Ge,arg:ge,baseQueryMeta:Xe,requestId:rt}=me;let Ue=W0(Me.data,Bt=>Ie(Bt,Se,{arg:ge.originalArgs,baseQueryMeta:Xe,fulfilledTimeStamp:Ge,requestId:rt}));Me.data=Ue}else Me.data=Se;else Me.data=l[me.arg.endpointName].structuralSharing??!0?Cz(bc(Me.data)?rN(Me.data):Me.data,Se):Se;delete Me.error,Me.fulfilledTimeStamp=me.fulfilledTimeStamp})}).addCase(a.rejected,(ee,{meta:{condition:me,arg:Se,requestId:Me},error:Ie,payload:Ge})=>{X1(ee,Se.queryCacheKey,ge=>{if(!me){if(ge.requestId!==Me)return;ge.status="rejected",ge.error=Ge??Ie}})}).addMatcher(w,(ee,me)=>{const{queries:Se}=g(me);for(const[Me,Ie]of Object.entries(Se))((Ie==null?void 0:Ie.status)==="fulfilled"||(Ie==null?void 0:Ie.status)==="rejected")&&(ee[Me]=Ie)})}}),L=pf({name:`${t}/mutations`,initialState:Im,reducers:{removeMutationResult:{reducer(W,{payload:ee}){const me=T0(ee);me in W&&delete W[me]},prepare:Em()}},extraReducers(W){W.addCase(s.pending,(ee,{meta:me,meta:{requestId:Se,arg:Me,startedTimeStamp:Ie}})=>{Me.track&&(ee[T0(me)]={requestId:Se,status:"pending",endpointName:Me.endpointName,startedTimeStamp:Ie})}).addCase(s.fulfilled,(ee,{payload:me,meta:Se})=>{Se.arg.track&&tT(ee,Se,Me=>{Me.requestId===Se.requestId&&(Me.status="fulfilled",Me.data=me,Me.fulfilledTimeStamp=Se.fulfilledTimeStamp)})}).addCase(s.rejected,(ee,{payload:me,error:Se,meta:Me})=>{Me.arg.track&&tT(ee,Me,Ie=>{Ie.requestId===Me.requestId&&(Ie.status="rejected",Ie.error=me??Se)})}).addMatcher(w,(ee,me)=>{const{mutations:Se}=g(me);for(const[Me,Ie]of Object.entries(Se))((Ie==null?void 0:Ie.status)==="fulfilled"||(Ie==null?void 0:Ie.status)==="rejected")&&Me!==(Ie==null?void 0:Ie.requestId)&&(ee[Me]=Ie)})}}),O=pf({name:`${t}/invalidation`,initialState:Im,reducers:{updateProvidedBy:{reducer(W,ee){var Me,Ie;const{queryCacheKey:me,providedTags:Se}=ee.payload;for(const Ge of Object.values(W))for(const ge of Object.values(Ge)){const Xe=ge.indexOf(me);Xe!==-1&&ge.splice(Xe,1)}for(const{type:Ge,id:ge}of Se){const Xe=(Me=W[Ge]??(W[Ge]={}))[Ie=ge||"__internal_without_id"]??(Me[Ie]=[]);Xe.includes(me)||Xe.push(me)}},prepare:Em()}},extraReducers(W){W.addCase(B.actions.removeQueryResult,(ee,{payload:{queryCacheKey:me}})=>{for(const Se of Object.values(ee))for(const Me of Object.values(Se)){const Ie=Me.indexOf(me);Ie!==-1&&Me.splice(Ie,1)}}).addMatcher(w,(ee,me)=>{var Me,Ie;const{provided:Se}=g(me);for(const[Ge,ge]of Object.entries(Se))for(const[Xe,rt]of Object.entries(ge)){const Ue=(Me=ee[Ge]??(ee[Ge]={}))[Ie=Xe||"__internal_without_id"]??(Me[Ie]=[]);for(const Bt of rt)Ue.includes(Bt)||Ue.push(Bt)}}).addMatcher(Gl(Zu(a),N_(a)),(ee,me)=>{const Se=Rz(me,"providesTags",l,I),{queryCacheKey:Me}=me.meta.arg;O.caseReducers.updateProvidedBy(ee,O.actions.updateProvidedBy({queryCacheKey:Me,providedTags:Se}))})}}),j=pf({name:`${t}/subscriptions`,initialState:Im,reducers:{updateSubscriptionOptions(W,ee){},unsubscribeQueryResult(W,ee){},internal_getRTKQSubscriptions(){}}}),Z=pf({name:`${t}/internalSubscriptions`,initialState:Im,reducers:{subscriptionsUpdated:{reducer(W,ee){return US(W,ee.payload)},prepare:Em()}}}),H=pf({name:`${t}/config`,initialState:{online:oF(),focused:cF(),middlewareRegistered:!1,...o},reducers:{middlewareRegistered(W,{payload:ee}){W.middlewareRegistered=W.middlewareRegistered==="conflict"||f!==ee?"conflict":!0}},extraReducers:W=>{W.addCase(w0,ee=>{ee.online=!0}).addCase(n_,ee=>{ee.online=!1}).addCase(x0,ee=>{ee.focused=!0}).addCase(t_,ee=>{ee.focused=!1}).addMatcher(w,ee=>({...ee}))}}),te=hz({queries:B.reducer,mutations:L.reducer,provided:O.reducer,subscriptions:Z.reducer,config:H.reducer}),J=(W,ee)=>te(M.match(ee)?void 0:W,ee),K={...H.actions,...B.actions,...j.actions,...Z.actions,...L.actions,...O.actions,resetApiState:M};return{reducer:J,actions:K}}var op=Symbol.for("RTKQ/skipToken"),kz={status:"uninitialized"},nT=W0(kz,()=>{}),aT=W0(kz,()=>{});function _F({serializeQueryArgs:t,reducerPath:a,createSelector:s}){const l=L=>nT,f=L=>aT;return{buildQuerySelector:I,buildMutationSelector:o,selectInvalidatedBy:M,selectCachedArgsForQuery:B};function g(L){return{...L,...nF(L.status)}}function w(L){return L[a]}function I(L,O){return j=>{const Z=t({queryArgs:j,endpointDefinition:O,endpointName:L});return s(j===op?l:J=>{var K,W;return((W=(K=w(J))==null?void 0:K.queries)==null?void 0:W[Z])??nT},g)}}function o(){return L=>{let O;return typeof L=="object"?O=T0(L)??op:O=L,s(O===op?f:H=>{var te,J;return((J=(te=w(H))==null?void 0:te.mutations)==null?void 0:J[O])??aT},g)}}function M(L,O){const j=L[a],Z=new Set;for(const H of O.map(Px)){const te=j.provided[H.type];if(!te)continue;let J=(H.id!==void 0?te[H.id]:ZS(Object.values(te)))??[];for(const K of J)Z.add(K)}return ZS(Array.from(Z.values()).map(H=>{const te=j.queries[H];return te?[{queryCacheKey:H,endpointName:te.endpointName,originalArgs:te.originalArgs}]:[]}))}function B(L,O){return Object.values(L[a].queries).filter(j=>(j==null?void 0:j.endpointName)===O&&j.status!=="uninitialized").map(j=>j.originalArgs)}}var ff=WeakMap?new WeakMap:void 0,rT=({endpointName:t,queryArgs:a})=>{let s="";const l=ff==null?void 0:ff.get(a);if(typeof l=="string")s=l;else{const f=JSON.stringify(a,(g,w)=>Yc(w)?Object.keys(w).sort().reduce((I,o)=>(I[o]=w[o],I),{}):w);Yc(a)&&(ff==null||ff.set(a,f)),s=f}return`${t}(${s})`};function yF(...t){return function(s){const l=v0(M=>{var B;return(B=s.extractRehydrationInfo)==null?void 0:B.call(s,M,{reducerPath:s.reducerPath??"api"})}),f={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...s,extractRehydrationInfo:l,serializeQueryArgs(M){let B=rT;if("serializeQueryArgs"in M.endpointDefinition){const L=M.endpointDefinition.serializeQueryArgs;B=O=>{const j=L(O);return typeof j=="string"?j:rT({...O,queryArgs:j})}}else s.serializeQueryArgs&&(B=s.serializeQueryArgs);return B(M)},tagTypes:[...s.tagTypes||[]]},g={endpointDefinitions:{},batch(M){M()},apiUid:J5(),extractRehydrationInfo:l,hasRehydrationInfo:v0(M=>l(M)!=null)},w={injectEndpoints:o,enhanceEndpoints({addTagTypes:M,endpoints:B}){if(M)for(const L of M)f.tagTypes.includes(L)||f.tagTypes.push(L);if(B)for(const[L,O]of Object.entries(B))typeof O=="function"?O(g.endpointDefinitions[L]):Object.assign(g.endpointDefinitions[L]||{},O);return w}},I=t.map(M=>M.init(w,f,g));function o(M){const B=M.endpoints({query:L=>({...L,type:"query"}),mutation:L=>({...L,type:"mutation"})});for(const[L,O]of Object.entries(B)){if(M.overrideExisting!==!0&&L in g.endpointDefinitions){if(M.overrideExisting==="throw")throw new Error(Ws(39));typeof process<"u";continue}g.endpointDefinitions[L]=O;for(const j of I)j.injectEndpoint(L,O)}return w}return w.injectEndpoints({endpoints:s.endpoints})}}function vF(t){for(let a in t)return!1;return!0}var xF=2147483647/1e3-1,wF=({reducerPath:t,api:a,queryThunk:s,context:l,internalState:f})=>{const{removeQueryResult:g,unsubscribeQueryResult:w}=a.internalActions,I=Gl(w.match,s.fulfilled,s.rejected);function o(O){const j=f.currentSubscriptions[O];return!!j&&!vF(j)}const M={},B=(O,j,Z)=>{var H;if(I(O)){const te=j.getState()[t],{queryCacheKey:J}=w.match(O)?O.payload:O.meta.arg;L(J,(H=te.queries[J])==null?void 0:H.endpointName,j,te.config)}if(a.util.resetApiState.match(O))for(const[te,J]of Object.entries(M))J&&clearTimeout(J),delete M[te];if(l.hasRehydrationInfo(O)){const te=j.getState()[t],{queries:J}=l.extractRehydrationInfo(O);for(const[K,W]of Object.entries(J))L(K,W==null?void 0:W.endpointName,j,te.config)}};function L(O,j,Z,H){const te=l.endpointDefinitions[j],J=(te==null?void 0:te.keepUnusedDataFor)??H.keepUnusedDataFor;if(J===1/0)return;const K=Math.max(0,Math.min(J,xF));if(!o(O)){const W=M[O];W&&clearTimeout(W),M[O]=setTimeout(()=>{o(O)||Z.dispatch(g({queryCacheKey:O})),delete M[O]},K*1e3)}}return B},SF=({reducerPath:t,context:a,context:{endpointDefinitions:s},mutationThunk:l,queryThunk:f,api:g,assertTagType:w,refetchQuery:I,internalState:o})=>{const{removeQueryResult:M}=g.internalActions,B=Gl(Zu(l),N_(l)),L=Gl(Zu(l,f),Wf(l,f));let O=[];const j=(te,J)=>{B(te)?H(Rz(te,"invalidatesTags",s,w),J):L(te)?H([],J):g.util.invalidateTags.match(te)&&H(t6(te.payload,void 0,void 0,void 0,void 0,w),J)};function Z(te){var J,K;for(const W in te.queries)if(((J=te.queries[W])==null?void 0:J.status)==="pending")return!0;for(const W in te.mutations)if(((K=te.mutations[W])==null?void 0:K.status)==="pending")return!0;return!1}function H(te,J){const K=J.getState(),W=K[t];if(O.push(...te),W.config.invalidationBehavior==="delayed"&&Z(W))return;const ee=O;if(O=[],ee.length===0)return;const me=g.util.selectInvalidatedBy(K,ee);a.batch(()=>{const Se=Array.from(me.values());for(const{queryCacheKey:Me}of Se){const Ie=W.queries[Me],Ge=o.currentSubscriptions[Me]??{};Ie&&(Bf(Ge)===0?J.dispatch(M({queryCacheKey:Me})):Ie.status!=="uninitialized"&&J.dispatch(I(Ie,Me)))}})}return j},TF=({reducerPath:t,queryThunk:a,api:s,refetchQuery:l,internalState:f})=>{const g={},w=(O,j)=>{(s.internalActions.updateSubscriptionOptions.match(O)||s.internalActions.unsubscribeQueryResult.match(O))&&o(O.payload,j),(a.pending.match(O)||a.rejected.match(O)&&O.meta.condition)&&o(O.meta.arg,j),(a.fulfilled.match(O)||a.rejected.match(O)&&!O.meta.condition)&&I(O.meta.arg,j),s.util.resetApiState.match(O)&&B()};function I({queryCacheKey:O},j){const Z=j.getState()[t],H=Z.queries[O],te=f.currentSubscriptions[O];if(!H||H.status==="uninitialized")return;const{lowestPollingInterval:J,skipPollingIfUnfocused:K}=L(te);if(!Number.isFinite(J))return;const W=g[O];W!=null&&W.timeout&&(clearTimeout(W.timeout),W.timeout=void 0);const ee=Date.now()+J;g[O]={nextPollTimestamp:ee,pollingInterval:J,timeout:setTimeout(()=>{(Z.config.focused||!K)&&j.dispatch(l(H,O)),I({queryCacheKey:O},j)},J)}}function o({queryCacheKey:O},j){const H=j.getState()[t].queries[O],te=f.currentSubscriptions[O];if(!H||H.status==="uninitialized")return;const{lowestPollingInterval:J}=L(te);if(!Number.isFinite(J)){M(O);return}const K=g[O],W=Date.now()+J;(!K||W<K.nextPollTimestamp)&&I({queryCacheKey:O},j)}function M(O){const j=g[O];j!=null&&j.timeout&&clearTimeout(j.timeout),delete g[O]}function B(){for(const O of Object.keys(g))M(O)}function L(O={}){let j=!1,Z=Number.POSITIVE_INFINITY;for(let H in O)O[H].pollingInterval&&(Z=Math.min(O[H].pollingInterval,Z),j=O[H].skipPollingIfUnfocused||j);return{lowestPollingInterval:Z,skipPollingIfUnfocused:j}}return w},EF=({reducerPath:t,context:a,api:s,refetchQuery:l,internalState:f})=>{const{removeQueryResult:g}=s.internalActions,w=(o,M)=>{x0.match(o)&&I(M,"refetchOnFocus"),w0.match(o)&&I(M,"refetchOnReconnect")};function I(o,M){const B=o.getState()[t],L=B.queries,O=f.currentSubscriptions;a.batch(()=>{for(const j of Object.keys(O)){const Z=L[j],H=O[j];if(!H||!Z)continue;(Object.values(H).some(J=>J[M]===!0)||Object.values(H).every(J=>J[M]===void 0)&&B.config[M])&&(Bf(H)===0?o.dispatch(g({queryCacheKey:j})):Z.status!=="uninitialized"&&o.dispatch(l(Z,j)))}})}return w},sT=new Error("Promise never resolved before cacheEntryRemoved."),IF=({api:t,reducerPath:a,context:s,queryThunk:l,mutationThunk:f,internalState:g})=>{const w=Ix(l),I=Ix(f),o=Zu(l,f),M={},B=(j,Z,H)=>{const te=L(j);if(l.pending.match(j)){const J=H[a].queries[te],K=Z.getState()[a].queries[te];!J&&K&&O(j.meta.arg.endpointName,j.meta.arg.originalArgs,te,Z,j.meta.requestId)}else if(f.pending.match(j))Z.getState()[a].mutations[te]&&O(j.meta.arg.endpointName,j.meta.arg.originalArgs,te,Z,j.meta.requestId);else if(o(j)){const J=M[te];J!=null&&J.valueResolved&&(J.valueResolved({data:j.payload,meta:j.meta.baseQueryMeta}),delete J.valueResolved)}else if(t.internalActions.removeQueryResult.match(j)||t.internalActions.removeMutationResult.match(j)){const J=M[te];J&&(delete M[te],J.cacheEntryRemoved())}else if(t.util.resetApiState.match(j))for(const[J,K]of Object.entries(M))delete M[J],K.cacheEntryRemoved()};function L(j){return w(j)?j.meta.arg.queryCacheKey:I(j)?j.meta.arg.fixedCacheKey??j.meta.requestId:t.internalActions.removeQueryResult.match(j)?j.payload.queryCacheKey:t.internalActions.removeMutationResult.match(j)?T0(j.payload):""}function O(j,Z,H,te,J){const K=s.endpointDefinitions[j],W=K==null?void 0:K.onCacheEntryAdded;if(!W)return;let ee={};const me=new Promise(Xe=>{ee.cacheEntryRemoved=Xe}),Se=Promise.race([new Promise(Xe=>{ee.valueResolved=Xe}),me.then(()=>{throw sT})]);Se.catch(()=>{}),M[H]=ee;const Me=t.endpoints[j].select(K.type==="query"?Z:H),Ie=te.dispatch((Xe,rt,Ue)=>Ue),Ge={...te,getCacheEntry:()=>Me(te.getState()),requestId:J,extra:Ie,updateCachedData:K.type==="query"?Xe=>te.dispatch(t.util.updateQueryData(j,Z,Xe)):void 0,cacheDataLoaded:Se,cacheEntryRemoved:me},ge=W(Z,Ge);Promise.resolve(ge).catch(Xe=>{if(Xe!==sT)throw Xe})}return B},PF=({api:t,context:a,queryThunk:s,mutationThunk:l})=>{const f=K5(s,l),g=Wf(s,l),w=Zu(s,l),I={};return(M,B)=>{var L,O;if(f(M)){const{requestId:j,arg:{endpointName:Z,originalArgs:H}}=M.meta,te=a.endpointDefinitions[Z],J=te==null?void 0:te.onQueryStarted;if(J){const K={},W=new Promise((Me,Ie)=>{K.resolve=Me,K.reject=Ie});W.catch(()=>{}),I[j]=K;const ee=t.endpoints[Z].select(te.type==="query"?H:j),me=B.dispatch((Me,Ie,Ge)=>Ge),Se={...B,getCacheEntry:()=>ee(B.getState()),requestId:j,extra:me,updateCachedData:te.type==="query"?Me=>B.dispatch(t.util.updateQueryData(Z,H,Me)):void 0,queryFulfilled:W};J(H,Se)}}else if(w(M)){const{requestId:j,baseQueryMeta:Z}=M.meta;(L=I[j])==null||L.resolve({data:M.payload,meta:Z}),delete I[j]}else if(g(M)){const{requestId:j,rejectedWithValue:Z,baseQueryMeta:H}=M.meta;(O=I[j])==null||O.reject({error:M.payload??M.error,isUnhandledError:!Z,meta:H}),delete I[j]}}},zF=({api:t,context:{apiUid:a},reducerPath:s})=>(l,f)=>{t.util.resetApiState.match(l)&&f.dispatch(t.internalActions.middlewareRegistered(a)),typeof process<"u"},AF=({api:t,queryThunk:a,internalState:s})=>{const l=`${t.reducerPath}/subscriptions`;let f=null,g=null;const{updateSubscriptionOptions:w,unsubscribeQueryResult:I}=t.internalActions,o=(j,Z)=>{var te,J,K;if(w.match(Z)){const{queryCacheKey:W,requestId:ee,options:me}=Z.payload;return(te=j==null?void 0:j[W])!=null&&te[ee]&&(j[W][ee]=me),!0}if(I.match(Z)){const{queryCacheKey:W,requestId:ee}=Z.payload;return j[W]&&delete j[W][ee],!0}if(t.internalActions.removeQueryResult.match(Z))return delete j[Z.payload.queryCacheKey],!0;if(a.pending.match(Z)){const{meta:{arg:W,requestId:ee}}=Z,me=j[J=W.queryCacheKey]??(j[J]={});return me[`${ee}_running`]={},W.subscribe&&(me[ee]=W.subscriptionOptions??me[ee]??{}),!0}let H=!1;if(a.fulfilled.match(Z)||a.rejected.match(Z)){const W=j[Z.meta.arg.queryCacheKey]||{},ee=`${Z.meta.requestId}_running`;H||(H=!!W[ee]),delete W[ee]}if(a.rejected.match(Z)){const{meta:{condition:W,arg:ee,requestId:me}}=Z;if(W&&ee.subscribe){const Se=j[K=ee.queryCacheKey]??(j[K]={});Se[me]=ee.subscriptionOptions??Se[me]??{},H=!0}}return H},M=()=>s.currentSubscriptions,O={getSubscriptions:M,getSubscriptionCount:j=>{const H=M()[j]??{};return Bf(H)},isRequestSubscribed:(j,Z)=>{var te;const H=M();return!!((te=H==null?void 0:H[j])!=null&&te[Z])}};return(j,Z)=>{if(f||(f=JSON.parse(JSON.stringify(s.currentSubscriptions))),t.util.resetApiState.match(j))return f=s.currentSubscriptions={},g=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(j))return[!1,O];const H=o(s.currentSubscriptions,j);let te=!0;if(H){g||(g=setTimeout(()=>{const W=JSON.parse(JSON.stringify(s.currentSubscriptions)),[,ee]=wz(f,()=>W);Z.next(t.internalActions.subscriptionsUpdated(ee)),f=W,g=null},500));const J=typeof j.type=="string"&&!!j.type.startsWith(l),K=a.rejected.match(j)&&j.meta.condition&&!!j.meta.arg.subscribe;te=!J&&!K}return[te,!1]}};function CF(t){const{reducerPath:a,queryThunk:s,api:l,context:f}=t,{apiUid:g}=f,w={invalidateTags:di(`${a}/invalidateTags`)},I=L=>L.type.startsWith(`${a}/`),o=[zF,wF,SF,TF,IF,PF];return{middleware:L=>{let O=!1;const Z={...t,internalState:{currentSubscriptions:{}},refetchQuery:B,isThisApiSliceAction:I},H=o.map(K=>K(Z)),te=AF(Z),J=EF(Z);return K=>W=>{if(!mz(W))return K(W);O||(O=!0,L.dispatch(l.internalActions.middlewareRegistered(g)));const ee={...L,next:K},me=L.getState(),[Se,Me]=te(W,ee,me);let Ie;if(Se?Ie=K(W):Ie=Me,L.getState()[a]&&(J(W,ee,me),I(W)||f.hasRehydrationInfo(W)))for(let Ge of H)Ge(W,ee,me);return Ie}},actions:w};function B(L,O,j={}){return s({type:"query",endpointName:L.endpointName,originalArgs:L.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:O,...j})}}function Tu(t,...a){return Object.assign(t,...a)}var iT=Symbol(),MF=({createSelector:t=X5}={})=>({name:iT,init(a,{baseQuery:s,tagTypes:l,reducerPath:f,serializeQueryArgs:g,keepUnusedDataFor:w,refetchOnMountOrArgChange:I,refetchOnFocus:o,refetchOnReconnect:M,invalidationBehavior:B},L){fN();const O=St=>(typeof process<"u",St);Object.assign(a,{reducerPath:f,endpoints:{},internalActions:{onOnline:w0,onOffline:n_,onFocus:x0,onFocusLost:t_},util:{}});const{queryThunk:j,mutationThunk:Z,patchQueryData:H,updateQueryData:te,upsertQueryData:J,prefetch:K,buildMatchThunkActions:W}=gF({baseQuery:s,reducerPath:f,context:L,api:a,serializeQueryArgs:g,assertTagType:O}),{reducer:ee,actions:me}=bF({context:L,queryThunk:j,mutationThunk:Z,reducerPath:f,assertTagType:O,config:{refetchOnFocus:o,refetchOnReconnect:M,refetchOnMountOrArgChange:I,keepUnusedDataFor:w,reducerPath:f,invalidationBehavior:B}});Tu(a.util,{patchQueryData:H,updateQueryData:te,upsertQueryData:J,prefetch:K,resetApiState:me.resetApiState}),Tu(a.internalActions,me);const{middleware:Se,actions:Me}=CF({reducerPath:f,context:L,queryThunk:j,mutationThunk:Z,api:a,assertTagType:O});Tu(a.util,Me),Tu(a,{reducer:ee,middleware:Se});const{buildQuerySelector:Ie,buildMutationSelector:Ge,selectInvalidatedBy:ge,selectCachedArgsForQuery:Xe}=_F({serializeQueryArgs:g,reducerPath:f,createSelector:t});Tu(a.util,{selectInvalidatedBy:ge,selectCachedArgsForQuery:Xe});const{buildInitiateQuery:rt,buildInitiateMutation:Ue,getRunningMutationThunk:Bt,getRunningMutationsThunk:un,getRunningQueriesThunk:Tn,getRunningQueryThunk:ea}=mF({queryThunk:j,mutationThunk:Z,api:a,serializeQueryArgs:g,context:L});return Tu(a.util,{getRunningMutationThunk:Bt,getRunningMutationsThunk:un,getRunningQueryThunk:ea,getRunningQueriesThunk:Tn}),{name:iT,injectEndpoint(St,ke){var Et;const Ct=a;(Et=Ct.endpoints)[St]??(Et[St]={}),Mz(ke)?Tu(Ct.endpoints[St],{name:St,select:Ie(St,ke),initiate:rt(St,ke)},W(j,St)):pF(ke)&&Tu(Ct.endpoints[St],{name:St,select:Ge(),initiate:Ue(St)},W(Z,St))}}}});function RF(t){return t.type==="query"}function kF(t){return t.type==="mutation"}function J1(t,...a){return Object.assign(t,...a)}function ev(t){return t.replace(t[0],t[0].toUpperCase())}var hf=WeakMap?new WeakMap:void 0,LF=({endpointName:t,queryArgs:a})=>{let s="";const l=hf==null?void 0:hf.get(a);if(typeof l=="string")s=l;else{const f=JSON.stringify(a,(g,w)=>Yc(w)?Object.keys(w).sort().reduce((I,o)=>(I[o]=w[o],I),{}):w);Yc(a)&&(hf==null||hf.set(a,f)),s=f}return`${t}(${s})`},tv=Symbol();function oT(t,a,s,l){const f=Te.useMemo(()=>({queryArgs:t,serialized:typeof t=="object"?a({queryArgs:t,endpointDefinition:s,endpointName:l}):t}),[t,a,s,l]),g=Te.useRef(f);return Te.useEffect(()=>{g.current.serialized!==f.serialized&&(g.current=f)},[f]),g.current.serialized===f.serialized?g.current.queryArgs:t}function nv(t){const a=Te.useRef(t);return Te.useEffect(()=>{qm(a.current,t)||(a.current=t)},[t]),qm(a.current,t)?a.current:t}var DF=typeof window<"u"&&window.document&&window.document.createElement?Te.useLayoutEffect:Te.useEffect,OF=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:Az.pending}:t;function BF({api:t,moduleOptions:{batch:a,hooks:{useDispatch:s,useSelector:l,useStore:f},unstable__sideEffectsInRender:g,createSelector:w},serializeQueryArgs:I,context:o}){const M=g?Z=>Z():Te.useEffect;return{buildQueryHooks:O,buildMutationHook:j,usePrefetch:L};function B(Z,H,te){if(H!=null&&H.endpointName&&Z.isUninitialized){const{endpointName:Se}=H,Me=o.endpointDefinitions[Se];I({queryArgs:H.originalArgs,endpointDefinition:Me,endpointName:Se})===I({queryArgs:te,endpointDefinition:Me,endpointName:Se})&&(H=void 0)}let J=Z.isSuccess?Z.data:H==null?void 0:H.data;J===void 0&&(J=Z.data);const K=J!==void 0,W=Z.isLoading,ee=!K&&W,me=Z.isSuccess||W&&K;return{...Z,data:J,currentData:Z.data,isFetching:W,isLoading:ee,isSuccess:me}}function L(Z,H){const te=s(),J=nv(H);return Te.useCallback((K,W)=>te(t.util.prefetch(Z,K,{...J,...W})),[Z,te,J])}function O(Z){const H=(K,{refetchOnReconnect:W,refetchOnFocus:ee,refetchOnMountOrArgChange:me,skip:Se=!1,pollingInterval:Me=0,skipPollingIfUnfocused:Ie=!1}={})=>{const{initiate:Ge}=t.endpoints[Z],ge=s(),Xe=Te.useRef();if(!Xe.current){const Ct=ge(t.internalActions.internal_getRTKQSubscriptions());Xe.current=Ct}const rt=oT(Se?op:K,LF,o.endpointDefinitions[Z],Z),Ue=nv({refetchOnReconnect:W,refetchOnFocus:ee,pollingInterval:Me,skipPollingIfUnfocused:Ie}),Bt=Te.useRef(!1),un=Te.useRef();let{queryCacheKey:Tn,requestId:ea}=un.current||{},St=!1;Tn&&ea&&(St=Xe.current.isRequestSubscribed(Tn,ea));const ke=!St&&Bt.current;return M(()=>{Bt.current=St}),M(()=>{ke&&(un.current=void 0)},[ke]),M(()=>{var Nt;const Ct=un.current;if(typeof process<"u",rt===op){Ct==null||Ct.unsubscribe(),un.current=void 0;return}const Et=(Nt=un.current)==null?void 0:Nt.subscriptionOptions;if(!Ct||Ct.arg!==rt){Ct==null||Ct.unsubscribe();const Sn=ge(Ge(rt,{subscriptionOptions:Ue,forceRefetch:me}));un.current=Sn}else Ue!==Et&&Ct.updateSubscriptionOptions(Ue)},[ge,Ge,me,rt,Ue,ke]),Te.useEffect(()=>()=>{var Ct;(Ct=un.current)==null||Ct.unsubscribe(),un.current=void 0},[]),Te.useMemo(()=>({refetch:()=>{var Ct;if(!un.current)throw new Error(Ws(38));return(Ct=un.current)==null?void 0:Ct.refetch()}}),[])},te=({refetchOnReconnect:K,refetchOnFocus:W,pollingInterval:ee=0,skipPollingIfUnfocused:me=!1}={})=>{const{initiate:Se}=t.endpoints[Z],Me=s(),[Ie,Ge]=Te.useState(tv),ge=Te.useRef(),Xe=nv({refetchOnReconnect:K,refetchOnFocus:W,pollingInterval:ee,skipPollingIfUnfocused:me});M(()=>{var un,Tn;const Bt=(un=ge.current)==null?void 0:un.subscriptionOptions;Xe!==Bt&&((Tn=ge.current)==null||Tn.updateSubscriptionOptions(Xe))},[Xe]);const rt=Te.useRef(Xe);M(()=>{rt.current=Xe},[Xe]);const Ue=Te.useCallback(function(Bt,un=!1){let Tn;return a(()=>{var ea;(ea=ge.current)==null||ea.unsubscribe(),ge.current=Tn=Me(Se(Bt,{subscriptionOptions:rt.current,forceRefetch:!un})),Ge(Bt)}),Tn},[Me,Se]);return Te.useEffect(()=>()=>{var Bt;(Bt=ge==null?void 0:ge.current)==null||Bt.unsubscribe()},[]),Te.useEffect(()=>{Ie!==tv&&!ge.current&&Ue(Ie,!0)},[Ie,Ue]),Te.useMemo(()=>[Ue,Ie],[Ue,Ie])},J=(K,{skip:W=!1,selectFromResult:ee}={})=>{const{select:me}=t.endpoints[Z],Se=oT(W?op:K,I,o.endpointDefinitions[Z],Z),Me=Te.useRef(),Ie=Te.useMemo(()=>w([me(Se),(Ue,Bt)=>Bt,Ue=>Se],B,{memoizeOptions:{resultEqualityCheck:qm}}),[me,Se]),Ge=Te.useMemo(()=>ee?w([Ie],ee,{devModeChecks:{identityFunctionCheck:"never"}}):Ie,[Ie,ee]),ge=l(Ue=>Ge(Ue,Me.current),qm),Xe=f(),rt=Ie(Xe.getState(),Me.current);return DF(()=>{Me.current=rt},[rt]),ge};return{useQueryState:J,useQuerySubscription:H,useLazyQuerySubscription:te,useLazyQuery(K){const[W,ee]=te(K),me=J(ee,{...K,skip:ee===tv}),Se=Te.useMemo(()=>({lastArg:ee}),[ee]);return Te.useMemo(()=>[W,me,Se],[W,me,Se])},useQuery(K,W){const ee=H(K,W),me=J(K,{selectFromResult:K===op||W!=null&&W.skip?void 0:OF,...W}),{data:Se,status:Me,isLoading:Ie,isSuccess:Ge,isError:ge,error:Xe}=me;return Te.useDebugValue({data:Se,status:Me,isLoading:Ie,isSuccess:Ge,isError:ge,error:Xe}),Te.useMemo(()=>({...me,...ee}),[me,ee])}}}function j(Z){return({selectFromResult:H,fixedCacheKey:te}={})=>{const{select:J,initiate:K}=t.endpoints[Z],W=s(),[ee,me]=Te.useState();Te.useEffect(()=>()=>{ee!=null&&ee.arg.fixedCacheKey||ee==null||ee.reset()},[ee]);const Se=Te.useCallback(function(Et){const Nt=W(K(Et,{fixedCacheKey:te}));return me(Nt),Nt},[W,K,te]),{requestId:Me}=ee||{},Ie=Te.useMemo(()=>J({fixedCacheKey:te,requestId:ee==null?void 0:ee.requestId}),[te,ee,J]),Ge=Te.useMemo(()=>H?w([Ie],H):Ie,[H,Ie]),ge=l(Ge,qm),Xe=te==null?ee==null?void 0:ee.arg.originalArgs:void 0,rt=Te.useCallback(()=>{a(()=>{ee&&me(void 0),te&&W(t.internalActions.removeMutationResult({requestId:Me,fixedCacheKey:te}))})},[W,te,ee,Me]),{endpointName:Ue,data:Bt,status:un,isLoading:Tn,isSuccess:ea,isError:St,error:ke}=ge;Te.useDebugValue({endpointName:Ue,data:Bt,status:un,isLoading:Tn,isSuccess:ea,isError:St,error:ke});const Ct=Te.useMemo(()=>({...ge,originalArgs:Xe,reset:rt}),[ge,Xe,rt]);return Te.useMemo(()=>[Se,Ct],[Se,Ct])}}}var NF=Symbol(),FF=({batch:t=KB,hooks:a={useDispatch:JB,useSelector:GB,useStore:pz},createSelector:s=X5,unstable__sideEffectsInRender:l=!1,...f}={})=>({name:NF,init(g,{serializeQueryArgs:w},I){const o=g,{buildQueryHooks:M,buildMutationHook:B,usePrefetch:L}=BF({api:g,moduleOptions:{batch:t,hooks:a,unstable__sideEffectsInRender:l,createSelector:s},serializeQueryArgs:w,context:I});return J1(o,{usePrefetch:L}),J1(I,{batch:t}),{injectEndpoint(O,j){if(RF(j)){const{useQuery:Z,useLazyQuery:H,useLazyQuerySubscription:te,useQueryState:J,useQuerySubscription:K}=M(O);J1(o.endpoints[O],{useQuery:Z,useLazyQuery:H,useLazyQuerySubscription:te,useQueryState:J,useQuerySubscription:K}),g[`use${ev(O)}Query`]=Z,g[`useLazy${ev(O)}Query`]=H}else if(kF(j)){const Z=B(O);J1(o.endpoints[O],{useMutation:Z}),g[`use${ev(O)}Mutation`]=Z}}}}}),n6=yF(MF(),FF());const a6="https://server.propart.ae",cT=localStorage.getItem("token"),vb=n6({reducerPath:"projectsAPI",baseQuery:e6({baseUrl:`${a6}/projects`,prepareHeaders:t=>(cT&&t.set("Authorization",`Bearer ${cT}`),t)}),endpoints:t=>({getProjects:t.query({query:()=>"/all"}),getProjectsFilter:t.query({query:a=>`/filter/projects${a}`}),addProjects:t.mutation({query:a=>({url:"/create",method:"POST",body:a})}),addTogleTop:t.mutation({query:({id:a,value:s})=>({url:`/toggle/top?projectId=${a}&value=${s}`,method:"POST",body:{id:a,value:s}})}),addHidden:t.mutation({query:({id:a,value:s})=>({url:`/toggle/hidden?projectId=${a}&value=${s}`,method:"POST",body:{id:a,value:s}})}),updateProject:t.mutation({query:a=>({url:"/update",method:"POST",body:a})}),addFloor:t.mutation({query:({id:a,key:s,data:l})=>({url:`/add/plan?projectId=${a}&key=${s}`,method:"POST",body:l})}),deleteFloor:t.mutation({query:({id:a,key:s,position:l})=>({url:`/remove/plan?projectId=${a}&key=${s}&position=${l}`,method:"POST"})}),addHiddenFloor:t.mutation({query:({id:a,key:s,position:l})=>({url:`/toggle/plan?projectId=${a}&key=${s}&position=${l}`,method:"POST"})}),deleteProject:t.mutation({query:({id:a})=>({url:`/delete?projectId=${a}`,method:"DELETE"})})})}),{useGetProjectsQuery:Lz,useGetProjectsFilterQuery:jF,useAddProjectsMutation:UF,useAddTogleTopMutation:Dz,useAddHiddenMutation:VF,useUpdateProjectMutation:GF,useAddFloorMutation:$F,useDeleteFloorMutation:qF,useAddHiddenFloorMutation:WF,useDeleteProjectMutation:HF}=vb,xb=n6({reducerPath:"userAPI",baseQuery:e6({baseUrl:`${a6}/users`}),endpoints:t=>({registerUser:t.mutation({query:a=>({url:"/create",method:"POST",body:a})}),loginUser:t.mutation({query:a=>({url:"/login",method:"POST",body:a})})})}),{useRegisterUserMutation:lK,useLoginUserMutation:ZF}=xb,lT=localStorage.getItem("token"),wb=n6({reducerPath:"developersAPI",baseQuery:e6({baseUrl:`${a6}/developers`,prepareHeaders:t=>(lT&&t.set("Authorization",`Bearer ${lT}`),t)}),endpoints:t=>({getDev:t.query({query:()=>"/all"}),getDevId:t.query({query:a=>`/developer?developerId=${a}`}),addDev:t.mutation({query:a=>({url:"/create",method:"POST",body:a})})})}),{useGetDevQuery:YF,useGetDevIdQuery:XF,useAddDevMutation:JF}=wb,Oz=LN({reducer:{[vb.reducerPath]:vb.reducer,[xb.reducerPath]:xb.reducer,[wb.reducerPath]:wb.reducer},middleware:t=>t().concat(vb.middleware,xb.middleware,wb.middleware)});dF(Oz.dispatch);/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E0(){return E0=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},E0.apply(this,arguments)}var Mu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mu||(Mu={}));const uT="popstate";function KF(t){t===void 0&&(t={});function a(l,f){let{pathname:g,search:w,hash:I}=l.location;return Ax("",{pathname:g,search:w,hash:I},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function s(l,f){return typeof f=="string"?f:a_(f)}return ej(a,s,null,t)}function Yr(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Bz(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function QF(){return Math.random().toString(36).substr(2,8)}function dT(t,a){return{usr:t.state,key:t.key,idx:a}}function Ax(t,a,s,l){return s===void 0&&(s=null),E0({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof a=="string"?rh(a):a,{state:s,key:a&&a.key||l||QF()})}function a_(t){let{pathname:a="/",search:s="",hash:l=""}=t;return s&&s!=="?"&&(a+=s.charAt(0)==="?"?s:"?"+s),l&&l!=="#"&&(a+=l.charAt(0)==="#"?l:"#"+l),a}function rh(t){let a={};if(t){let s=t.indexOf("#");s>=0&&(a.hash=t.substr(s),t=t.substr(0,s));let l=t.indexOf("?");l>=0&&(a.search=t.substr(l),t=t.substr(0,l)),t&&(a.pathname=t)}return a}function ej(t,a,s,l){l===void 0&&(l={});let{window:f=document.defaultView,v5Compat:g=!1}=l,w=f.history,I=Mu.Pop,o=null,M=B();M==null&&(M=0,w.replaceState(E0({},w.state,{idx:M}),""));function B(){return(w.state||{idx:null}).idx}function L(){I=Mu.Pop;let te=B(),J=te==null?null:te-M;M=te,o&&o({action:I,location:H.location,delta:J})}function O(te,J){I=Mu.Push;let K=Ax(H.location,te,J);s&&s(K,te),M=B()+1;let W=dT(K,M),ee=H.createHref(K);try{w.pushState(W,"",ee)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;f.location.assign(ee)}g&&o&&o({action:I,location:H.location,delta:1})}function j(te,J){I=Mu.Replace;let K=Ax(H.location,te,J);s&&s(K,te),M=B();let W=dT(K,M),ee=H.createHref(K);w.replaceState(W,"",ee),g&&o&&o({action:I,location:H.location,delta:0})}function Z(te){let J=f.location.origin!=="null"?f.location.origin:f.location.href,K=typeof te=="string"?te:a_(te);return K=K.replace(/ $/,"%20"),Yr(J,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,J)}let H={get action(){return I},get location(){return t(f,w)},listen(te){if(o)throw new Error("A history only accepts one active listener");return f.addEventListener(uT,L),o=te,()=>{f.removeEventListener(uT,L),o=null}},createHref(te){return a(f,te)},createURL:Z,encodeLocation(te){let J=Z(te);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:O,replace:j,go(te){return w.go(te)}};return H}var pT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pT||(pT={}));function tj(t,a,s){s===void 0&&(s="/");let l=typeof a=="string"?rh(a):a,f=r6(l.pathname||"/",s);if(f==null)return null;let g=Nz(t);nj(g);let w=null;for(let I=0;w==null&&I<g.length;++I){let o=hj(f);w=dj(g[I],o)}return w}function Nz(t,a,s,l){a===void 0&&(a=[]),s===void 0&&(s=[]),l===void 0&&(l="");let f=(g,w,I)=>{let o={relativePath:I===void 0?g.path||"":I,caseSensitive:g.caseSensitive===!0,childrenIndex:w,route:g};o.relativePath.startsWith("/")&&(Yr(o.relativePath.startsWith(l),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(l.length));let M=Uu([l,o.relativePath]),B=s.concat(o);g.children&&g.children.length>0&&(Yr(g.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+M+'".')),Nz(g.children,a,B,M)),!(g.path==null&&!g.index)&&a.push({path:M,score:lj(M,g.index),routesMeta:B})};return t.forEach((g,w)=>{var I;if(g.path===""||!((I=g.path)!=null&&I.includes("?")))f(g,w);else for(let o of Fz(g.path))f(g,w,o)}),a}function Fz(t){let a=t.split("/");if(a.length===0)return[];let[s,...l]=a,f=s.endsWith("?"),g=s.replace(/\?$/,"");if(l.length===0)return f?[g,""]:[g];let w=Fz(l.join("/")),I=[];return I.push(...w.map(o=>o===""?g:[g,o].join("/"))),f&&I.push(...w),I.map(o=>t.startsWith("/")&&o===""?"/":o)}function nj(t){t.sort((a,s)=>a.score!==s.score?s.score-a.score:uj(a.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}const aj=/^:[\w-]+$/,rj=3,sj=2,ij=1,oj=10,cj=-2,fT=t=>t==="*";function lj(t,a){let s=t.split("/"),l=s.length;return s.some(fT)&&(l+=cj),a&&(l+=sj),s.filter(f=>!fT(f)).reduce((f,g)=>f+(aj.test(g)?rj:g===""?ij:oj),l)}function uj(t,a){return t.length===a.length&&t.slice(0,-1).every((l,f)=>l===a[f])?t[t.length-1]-a[a.length-1]:0}function dj(t,a){let{routesMeta:s}=t,l={},f="/",g=[];for(let w=0;w<s.length;++w){let I=s[w],o=w===s.length-1,M=f==="/"?a:a.slice(f.length)||"/",B=pj({path:I.relativePath,caseSensitive:I.caseSensitive,end:o},M);if(!B)return null;Object.assign(l,B.params);let L=I.route;g.push({params:l,pathname:Uu([f,B.pathname]),pathnameBase:_j(Uu([f,B.pathnameBase])),route:L}),B.pathnameBase!=="/"&&(f=Uu([f,B.pathnameBase]))}return g}function pj(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,l]=fj(t.path,t.caseSensitive,t.end),f=a.match(s);if(!f)return null;let g=f[0],w=g.replace(/(.)\/+$/,"$1"),I=f.slice(1);return{params:l.reduce((M,B,L)=>{let{paramName:O,isOptional:j}=B;if(O==="*"){let H=I[L]||"";w=g.slice(0,g.length-H.length).replace(/(.)\/+$/,"$1")}const Z=I[L];return j&&!Z?M[O]=void 0:M[O]=(Z||"").replace(/%2F/g,"/"),M},{}),pathname:g,pathnameBase:w,pattern:t}}function fj(t,a,s){a===void 0&&(a=!1),s===void 0&&(s=!0),Bz(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let l=[],f="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,I,o)=>(l.push({paramName:I,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(l.push({paramName:"*"}),f+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?f+="\\/*$":t!==""&&t!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,a?void 0:"i"),l]}function hj(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Bz(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+a+").")),t}}function r6(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let s=a.endsWith("/")?a.length-1:a.length,l=t.charAt(s);return l&&l!=="/"?null:t.slice(s)||"/"}function mj(t,a){a===void 0&&(a="/");let{pathname:s,search:l="",hash:f=""}=typeof t=="string"?rh(t):t;return{pathname:s?s.startsWith("/")?s:gj(s,a):a,search:yj(l),hash:vj(f)}}function gj(t,a){let s=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(f=>{f===".."?s.length>1&&s.pop():f!=="."&&s.push(f)}),s.length>1?s.join("/"):"/"}function av(t,a,s,l){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+a+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bj(t){return t.filter((a,s)=>s===0||a.route.path&&a.route.path.length>0)}function jz(t,a){let s=bj(t);return a?s.map((l,f)=>f===t.length-1?l.pathname:l.pathnameBase):s.map(l=>l.pathnameBase)}function Uz(t,a,s,l){l===void 0&&(l=!1);let f;typeof t=="string"?f=rh(t):(f=E0({},t),Yr(!f.pathname||!f.pathname.includes("?"),av("?","pathname","search",f)),Yr(!f.pathname||!f.pathname.includes("#"),av("#","pathname","hash",f)),Yr(!f.search||!f.search.includes("#"),av("#","search","hash",f)));let g=t===""||f.pathname==="",w=g?"/":f.pathname,I;if(w==null)I=s;else{let L=a.length-1;if(!l&&w.startsWith("..")){let O=w.split("/");for(;O[0]==="..";)O.shift(),L-=1;f.pathname=O.join("/")}I=L>=0?a[L]:"/"}let o=mj(f,I),M=w&&w!=="/"&&w.endsWith("/"),B=(g||w===".")&&s.endsWith("/");return!o.pathname.endsWith("/")&&(M||B)&&(o.pathname+="/"),o}const Uu=t=>t.join("/").replace(/\/\/+/g,"/"),_j=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Vz=["post","put","patch","delete"];new Set(Vz);const wj=["get",...Vz];new Set(wj);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function I0(){return I0=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},I0.apply(this,arguments)}const s6=Te.createContext(null),Sj=Te.createContext(null),wp=Te.createContext(null),F_=Te.createContext(null),Qu=Te.createContext({outlet:null,matches:[],isDataRoute:!1}),Gz=Te.createContext(null);function Tj(t,a){let{relative:s}=a===void 0?{}:a;Z0()||Yr(!1);let{basename:l,navigator:f}=Te.useContext(wp),{hash:g,pathname:w,search:I}=qz(t,{relative:s}),o=w;return l!=="/"&&(o=w==="/"?l:Uu([l,w])),f.createHref({pathname:o,search:I,hash:g})}function Z0(){return Te.useContext(F_)!=null}function j_(){return Z0()||Yr(!1),Te.useContext(F_).location}function $z(t){Te.useContext(wp).static||Te.useLayoutEffect(t)}function Y0(){let{isDataRoute:t}=Te.useContext(Qu);return t?Nj():Ej()}function Ej(){Z0()||Yr(!1);let t=Te.useContext(s6),{basename:a,future:s,navigator:l}=Te.useContext(wp),{matches:f}=Te.useContext(Qu),{pathname:g}=j_(),w=JSON.stringify(jz(f,s.v7_relativeSplatPath)),I=Te.useRef(!1);return $z(()=>{I.current=!0}),Te.useCallback(function(M,B){if(B===void 0&&(B={}),!I.current)return;if(typeof M=="number"){l.go(M);return}let L=Uz(M,JSON.parse(w),g,B.relative==="path");t==null&&a!=="/"&&(L.pathname=L.pathname==="/"?a:Uu([a,L.pathname])),(B.replace?l.replace:l.push)(L,B.state,B)},[a,l,w,g,t])}function Ij(){let{matches:t}=Te.useContext(Qu),a=t[t.length-1];return a?a.params:{}}function qz(t,a){let{relative:s}=a===void 0?{}:a,{future:l}=Te.useContext(wp),{matches:f}=Te.useContext(Qu),{pathname:g}=j_(),w=JSON.stringify(jz(f,l.v7_relativeSplatPath));return Te.useMemo(()=>Uz(t,JSON.parse(w),g,s==="path"),[t,w,g,s])}function Pj(t,a){return zj(t,a)}function zj(t,a,s,l){Z0()||Yr(!1);let{navigator:f}=Te.useContext(wp),{matches:g}=Te.useContext(Qu),w=g[g.length-1],I=w?w.params:{};w&&w.pathname;let o=w?w.pathnameBase:"/";w&&w.route;let M=j_(),B;if(a){var L;let te=typeof a=="string"?rh(a):a;o==="/"||(L=te.pathname)!=null&&L.startsWith(o)||Yr(!1),B=te}else B=M;let O=B.pathname||"/",j=O;if(o!=="/"){let te=o.replace(/^\//,"").split("/");j="/"+O.replace(/^\//,"").split("/").slice(te.length).join("/")}let Z=tj(t,{pathname:j}),H=kj(Z&&Z.map(te=>Object.assign({},te,{params:Object.assign({},I,te.params),pathname:Uu([o,f.encodeLocation?f.encodeLocation(te.pathname).pathname:te.pathname]),pathnameBase:te.pathnameBase==="/"?o:Uu([o,f.encodeLocation?f.encodeLocation(te.pathnameBase).pathname:te.pathnameBase])})),g,s,l);return a&&H?Te.createElement(F_.Provider,{value:{location:I0({pathname:"/",search:"",hash:"",state:null,key:"default"},B),navigationType:Mu.Pop}},H):H}function Aj(){let t=Bj(),a=xj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,f={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Te.createElement(Te.Fragment,null,Te.createElement("h2",null,"Unexpected Application Error!"),Te.createElement("h3",{style:{fontStyle:"italic"}},a),s?Te.createElement("pre",{style:f},s):null,null)}const Cj=Te.createElement(Aj,null);class Mj extends Te.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,s){return s.location!==a.location||s.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:s.error,location:s.location,revalidation:a.revalidation||s.revalidation}}componentDidCatch(a,s){console.error("React Router caught the following error during render",a,s)}render(){return this.state.error!==void 0?Te.createElement(Qu.Provider,{value:this.props.routeContext},Te.createElement(Gz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rj(t){let{routeContext:a,match:s,children:l}=t,f=Te.useContext(s6);return f&&f.static&&f.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=s.route.id),Te.createElement(Qu.Provider,{value:a},l)}function kj(t,a,s,l){var f;if(a===void 0&&(a=[]),s===void 0&&(s=null),l===void 0&&(l=null),t==null){var g;if((g=s)!=null&&g.errors)t=s.matches;else return null}let w=t,I=(f=s)==null?void 0:f.errors;if(I!=null){let B=w.findIndex(L=>L.route.id&&(I==null?void 0:I[L.route.id]));B>=0||Yr(!1),w=w.slice(0,Math.min(w.length,B+1))}let o=!1,M=-1;if(s&&l&&l.v7_partialHydration)for(let B=0;B<w.length;B++){let L=w[B];if((L.route.HydrateFallback||L.route.hydrateFallbackElement)&&(M=B),L.route.id){let{loaderData:O,errors:j}=s,Z=L.route.loader&&O[L.route.id]===void 0&&(!j||j[L.route.id]===void 0);if(L.route.lazy||Z){o=!0,M>=0?w=w.slice(0,M+1):w=[w[0]];break}}}return w.reduceRight((B,L,O)=>{let j,Z=!1,H=null,te=null;s&&(j=I&&L.route.id?I[L.route.id]:void 0,H=L.route.errorElement||Cj,o&&(M<0&&O===0?(Fj("route-fallback",!1),Z=!0,te=null):M===O&&(Z=!0,te=L.route.hydrateFallbackElement||null)));let J=a.concat(w.slice(0,O+1)),K=()=>{let W;return j?W=H:Z?W=te:L.route.Component?W=Te.createElement(L.route.Component,null):L.route.element?W=L.route.element:W=B,Te.createElement(Rj,{match:L,routeContext:{outlet:B,matches:J,isDataRoute:s!=null},children:W})};return s&&(L.route.ErrorBoundary||L.route.errorElement||O===0)?Te.createElement(Mj,{location:s.location,revalidation:s.revalidation,component:H,error:j,children:K(),routeContext:{outlet:null,matches:J,isDataRoute:!0}}):K()},null)}var Wz=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Wz||{}),r_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(r_||{});function Lj(t){let a=Te.useContext(s6);return a||Yr(!1),a}function Dj(t){let a=Te.useContext(Sj);return a||Yr(!1),a}function Oj(t){let a=Te.useContext(Qu);return a||Yr(!1),a}function Hz(t){let a=Oj(),s=a.matches[a.matches.length-1];return s.route.id||Yr(!1),s.route.id}function Bj(){var t;let a=Te.useContext(Gz),s=Dj(r_.UseRouteError),l=Hz(r_.UseRouteError);return a!==void 0?a:(t=s.errors)==null?void 0:t[l]}function Nj(){let{router:t}=Lj(Wz.UseNavigateStable),a=Hz(r_.UseNavigateStable),s=Te.useRef(!1);return $z(()=>{s.current=!0}),Te.useCallback(function(f,g){g===void 0&&(g={}),s.current&&(typeof f=="number"?t.navigate(f):t.navigate(f,I0({fromRouteId:a},g)))},[t,a])}const hT={};function Fj(t,a,s){!a&&!hT[t]&&(hT[t]=!0)}function Dm(t){Yr(!1)}function jj(t){let{basename:a="/",children:s=null,location:l,navigationType:f=Mu.Pop,navigator:g,static:w=!1,future:I}=t;Z0()&&Yr(!1);let o=a.replace(/^\/*/,"/"),M=Te.useMemo(()=>({basename:o,navigator:g,static:w,future:I0({v7_relativeSplatPath:!1},I)}),[o,I,g,w]);typeof l=="string"&&(l=rh(l));let{pathname:B="/",search:L="",hash:O="",state:j=null,key:Z="default"}=l,H=Te.useMemo(()=>{let te=r6(B,o);return te==null?null:{location:{pathname:te,search:L,hash:O,state:j,key:Z},navigationType:f}},[o,B,L,O,j,Z,f]);return H==null?null:Te.createElement(wp.Provider,{value:M},Te.createElement(F_.Provider,{children:s,value:H}))}function Uj(t){let{children:a,location:s}=t;return Pj(Cx(a),s)}new Promise(()=>{});function Cx(t,a){a===void 0&&(a=[]);let s=[];return Te.Children.forEach(t,(l,f)=>{if(!Te.isValidElement(l))return;let g=[...a,f];if(l.type===Te.Fragment){s.push.apply(s,Cx(l.props.children,g));return}l.type!==Dm&&Yr(!1),!l.props.index||!l.props.children||Yr(!1);let w={id:l.props.id||g.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(w.children=Cx(l.props.children,g)),s.push(w)}),s}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mx(){return Mx=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},Mx.apply(this,arguments)}function Vj(t,a){if(t==null)return{};var s={},l=Object.keys(t),f,g;for(g=0;g<l.length;g++)f=l[g],!(a.indexOf(f)>=0)&&(s[f]=t[f]);return s}function Gj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $j(t,a){return t.button===0&&(!a||a==="_self")&&!Gj(t)}const qj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Wj="6";try{window.__reactRouterVersion=Wj}catch{}const Hj="startTransition",mT=Pv[Hj];function Zj(t){let{basename:a,children:s,future:l,window:f}=t,g=Te.useRef();g.current==null&&(g.current=KF({window:f,v5Compat:!0}));let w=g.current,[I,o]=Te.useState({action:w.action,location:w.location}),{v7_startTransition:M}=l||{},B=Te.useCallback(L=>{M&&mT?mT(()=>o(L)):o(L)},[o,M]);return Te.useLayoutEffect(()=>w.listen(B),[w,B]),Te.createElement(jj,{basename:a,children:s,location:I.location,navigationType:I.action,navigator:w,future:l})}const Yj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zm=Te.forwardRef(function(a,s){let{onClick:l,relative:f,reloadDocument:g,replace:w,state:I,target:o,to:M,preventScrollReset:B,unstable_viewTransition:L}=a,O=Vj(a,qj),{basename:j}=Te.useContext(wp),Z,H=!1;if(typeof M=="string"&&Xj.test(M)&&(Z=M,Yj))try{let W=new URL(window.location.href),ee=M.startsWith("//")?new URL(W.protocol+M):new URL(M),me=r6(ee.pathname,j);ee.origin===W.origin&&me!=null?M=me+ee.search+ee.hash:H=!0}catch{}let te=Tj(M,{relative:f}),J=Jj(M,{replace:w,state:I,target:o,preventScrollReset:B,relative:f,unstable_viewTransition:L});function K(W){l&&l(W),W.defaultPrevented||J(W)}return Te.createElement("a",Mx({},O,{href:Z||te,onClick:H||g?l:K,ref:s,target:o}))});var gT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gT||(gT={}));var bT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bT||(bT={}));function Jj(t,a){let{target:s,replace:l,state:f,preventScrollReset:g,relative:w,unstable_viewTransition:I}=a===void 0?{}:a,o=Y0(),M=j_(),B=qz(t,{relative:w});return Te.useCallback(L=>{if($j(L,s)){L.preventDefault();let O=l!==void 0?l:a_(M)===a_(B);o(t,{replace:O,state:f,preventScrollReset:g,relative:w,unstable_viewTransition:I})}},[M,o,B,l,f,s,t,g,w,I])}function Zc({children:t,handler:a,className:s,disabled:l}){return q.jsx("button",{onClick:a,className:`button ${s}`,disabled:l,children:t})}const Kj=()=>{const[t,a]=Te.useState(""),[s,l]=Te.useState(""),f=Y0(),[g,{isLoading:w}]=ZF(),I=async()=>{try{const M=await g({email:t,password:s}).unwrap();localStorage.setItem("token",M.token),f("/"),window.location.reload(!1)}catch(o){console.error("Login failed:",o)}};return q.jsxs("section",{className:"formAuthP",children:[q.jsx("div",{className:"formAuthP__block",style:{backgroundImage:"url(/assets/AuthPage/authBG.png)"}}),q.jsxs("div",{className:"formAuthP__block",children:[q.jsx("img",{src:"/assets/Global/authLogo.svg",alt:"Image logo",width:38,height:38}),q.jsxs("div",{className:"formAuthP__block-wrapper",children:[q.jsx("h1",{className:"formAuthP__block-title",children:"Login"}),q.jsxs("div",{className:"formAuthP__block-inputWrapper",children:[q.jsx("span",{className:"formAuthP__block-inputTitle",children:"Email address"}),q.jsx("input",{type:"text",className:"formAuthP__block-input",placeholder:"Your E-Mail address",value:t,onChange:o=>a(o.target.value),maxLength:50})]}),q.jsxs("div",{className:"formAuthP__block-inputWrapper",children:[q.jsx("span",{className:"formAuthP__block-inputTitle",children:"Password"}),q.jsx("input",{type:"password",className:"formAuthP__block-input",placeholder:"Enter your password",value:s,onChange:o=>l(o.target.value),maxLength:50})]}),q.jsx(Zc,{className:"button--orange",handler:I,disabled:w,children:w?"Logging in...":"Login"})]})]})]})},Qj=()=>q.jsx("main",{children:q.jsx(Kj,{})}),eU=[{_id:"653461c6fa2662129d9aef21",userId:"6532ca1e8464db644f95ff17",developer:"Meraas",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/7b30687e-2e63-40a5-a914-ede1e05944e3.png",selectedType:"Project for investment",selectedYear:"27",selectedMonth:"3",selectedBathroom:"4+",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Any",projectName:"Bluewaters Bay",priceFrom:"3518480",sizeFrom:"798",selectedLocation:"Bluewaters Island",ownLocation:"",lng:"55.12215310443697",lat:"25.07985332360754",exterior:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/f53ec619-56de-4f0a-92e3-cc04231ca6e1.png",description:'"Bluewaters Bay, a resort-style residence on the scenic Bluewaters Peninsula, boasts elegant architecture that harmonizes with its premier location. Choose from 1-4 bedroom apartments, each thoughtfully designed and lavishly furnished for ultimate comfort.',descriptionRu:null,plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/bf8032f4-7beb-489d-a4bc-a03943ef1730.png",price:"3518480",size:"798"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/717bf88d-aa6d-40be-92e4-cade98667efe.png",price:"4000000",size:"799"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/49a5d770-f55c-426b-bf44-e5011575f63b.png",price:"4050000 ",size:"916"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/1d5ea53b-81f1-40af-8799-915d538441b7.png",price:"4500000",size:"975"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/e5d691fa-c767-4942-9275-9fa2a46f933f.png",price:"6000000",size:"1309"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/6408bb62-6ac5-4bc4-a28e-d0dd8e04c923.png",price:"6050000",size:"1309"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/9b0217d5-77de-41dd-8be8-ac0f33ab22ff.png",price:"6,475,950",size:"1309"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/3cbffe1b-1c9d-4d23-83c3-0d47078b63ea.png",price:"6,660,000",size:"1670"}],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/ed4ea853-089b-4e68-ace3-1e537d5b43fa.png",price:"7582000 ",size:"2047"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/d75a7e9f-6b1c-4e05-8c2b-24a37ed740b1.png",price:"8653230",size:"2034 "},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/b0e44810-fb9f-4dc3-b14e-ef501c7ae75d.png",price:"9140240",size:"2047"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/8aee2019-4c7c-41b1-9adf-20e6bcbcead5.png","https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/7609dfa9-d3be-40b2-ac41-fb1e7cfbb06c.png","https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/3e2a64f0-d546-479e-9e8f-7f55844931b6.png","https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/6727ff65-3e16-472d-be43-fd2991acb16e.png","https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/e1a4e463-63e4-46ab-aa1e-88ac8fd33995.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/6dbd1e3e-778d-4aa8-90f2-45f639d74054.png","https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/54e7617d-dd71-4301-b911-1f794e9395e7.png","https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/3ba2c13b-0af9-4d90-a8b9-fdce98b5d352.png","https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/8ba70120-a18b-4128-92fa-8834149fb36a.png","https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/8a45d6d2-e768-4862-b5b6-d992962befbd.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/ee272e86-699e-42dc-b7ce-3ab0413bba8f.png",name:" ",nameRu:null,desc:"  -   ,     .",descRu:null},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/db49d235-ee48-4caf-b661-49c61ae290f5.png",name:"",nameRu:null,desc:"        :   ,   .",descRu:null},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d0fe06af-5319-4121-945d-d3bb58a8d46d/b27929cc-4b6d-4631-8dc8-a28360939bf1.png",name:"",nameRu:null,desc:"           ,         .",descRu:null}],activeProject:!0,paymentPlans:{1:{percent1:"40",sum1:"1407392",percent2:"40",sum2:"1407392",percent3:"20",sum3:"703696",percent4:"0",sum4:"0"},2:{percent1:"40",sum1:"1800000",percent2:"40",sum2:"1800000",percent3:"20",sum3:"900000",percent4:"0",sum4:"0"},3:{percent1:"40",sum1:"3032800",percent2:"40",sum2:"3032800",percent3:"20",sum3:"1516400",percent4:"0",sum4:"0"}}},{_id:"6539884fb00af61c77568938",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/d7250c2f-34b5-4096-a679-1dc559858293.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"4",selectedBathroom:"3",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Address The Bay",priceFrom:"3570000",sizeFrom:"753",selectedLocation:"Al Wasl (City Walk)",ownLocation:"Emaar beachfront",lng:"55.14291642336109",lat:"25.102173880205946",exterior:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/662edb33-0591-40c9-98a3-8e4e3eb5ef89.png",description:"Emaar Properties launches Address Residences The Bay in Dubai's Emaar Beachfront, featuring 17 podium and 50 residential floors. It includes a 5-star hotel and upscale serviced boutique apartments (1-3 bedrooms, 70-192 sqm) with panoramic coastal views",descriptionRu:"Emaar Properties,   ,  Address Residences The Bay -    Emaar Beachfront. 17   50  ,   Address Hotels + Resorts  -    ",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/00a54829-90e9-4839-87df-31ac3f630203.png",price:"3600000",size:"850"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/acea8947-c64a-465e-80c5-d22689a31067.png",price:"3300000",size:"753"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/5d8c0736-3cc0-40d2-b59c-b90dbf3b7b71.png",price:"3600000",size:"850"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/6007cf0f-666c-43d6-8aec-c0b4deb6a0bd.png",price:"3742360",size:"795"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/301463e0-3be9-4917-841a-d8e099ea60b8.png",price:"3570000",size:"787"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/55dae06a-a1a7-4210-ad5c-f756df53767e.png",price:"9572849",size:"1828"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/2830d756-9ba3-4e87-8a46-4617fb2a2f6e.png",price:"4714860",size:"1264"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/179c9e82-3f38-460b-97b2-3c6462f9ce37.png",price:"6000000",size:"1323"}],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/dcaf99f6-9010-420c-8e5f-bb7a91797cce.png",price:"10500000",size:"2055"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/03916c31-fa95-4a41-8f6c-5b5bd4106055.png","https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/cb4f280c-8f04-4de4-b1c8-11bff123923f.png","https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/b1a3466e-3562-4965-ae58-8cb85ea2c7b3.png","https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/7b503ca9-ea27-4ff9-9bbc-d157df0a4145.png","https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/a8c2efc0-c2bd-4a81-9c35-d65791121be7.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/b2d385df-0cde-4dbe-8a63-7407f338bcac.png","https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/3243b701-7c1e-46f3-9475-38f05e2171de.png","https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/1e7d5af6-009c-4503-8e9d-c9ef373925cb.png","https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/3e13b07b-aea6-42dc-b893-0fdca4b4afa0.png","https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/e0fe01b3-5a13-4362-b49b-8e119c617eb5.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/84126dcd-804c-4de2-95ea-1fe8e389d6f9.png",name:"Gym",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"     -      "},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/7db33904-07a8-4fa0-8821-6209e852056a.png",name:"Pool",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"  ,      -           ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2a751830-d81b-4ba6-a651-2a93a2ccbd81/f68797ee-a517-45e3-80c5-109a08c28968.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"  -  ,         ,  ,   "}],activeProject:!0,paymentPlans:{1:{percent1:"50",sum1:"1800000",percent2:"30",sum2:"1080000",percent3:"20",sum3:"720000",percent4:"0",sum4:"0"},2:{percent1:"50",sum1:"4786424.5",percent2:"30",sum2:"2871854.7",percent3:"20",sum3:"1914569.8",percent4:"0",sum4:"0"},3:{percent1:"50",sum1:"5250000",percent2:"30",sum2:"3150000",percent3:"20",sum3:"2100000",percent4:"0",sum4:"0"}}},{_id:"6539c5e2b00af61c7756893b",userId:"6533fb61fa2662129d9aef1c",developer:"Meraas",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/c4f16db2-f984-4da5-8e01-54236e0d7ac0.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"1",selectedBathroom:"1",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Erin",priceFrom:"2000000",sizeFrom:"779",selectedLocation:"Al Wasl (City Walk)",ownLocation:"",lng:"55.26170914606175",lat:"25.207096454315725",exterior:"https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/e10eefbb-0851-4bc3-a6fa-7de2779cdbd9.png",description:"Erin is a new complex in the Central Park community, part of Dubai's creative space City Walk, owned by leading UAE developer Meraas. Surrounded by greenery, it offers modern 1-4 bedroom apartments and an exclusive five-bedroom penthouse. Completion expected in Q2 2026",descriptionRu:"Erin -     Central Park,    City Walk,   Meraas.        14       .   -  2  2026 ",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/58a39f21-1840-418d-9022-a95dfb300379.png",price:"2000000",size:"779"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/c80ba03c-935c-4fe4-94cf-98a493f69891.png","https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/4aecfdb1-a6aa-423d-854b-d79031bdbb4b.png","https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/50052f50-1580-43b1-910b-c2f6b30c781c.png","https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/668daa4e-bed5-4433-851f-85218c491806.png","https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/3ffc1ff4-01bf-42cd-a66f-1e367e0d5370.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/58bb6487-e718-48c3-b2cb-72a4629023d5.png","https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/5c4a903d-0fbb-4681-bd05-106e529e04ff.png","https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/4d4b6fc1-5bd5-474b-8460-8e3d5274094e.png","https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/e556eda5-8d65-4aa7-81cd-a0f1f201682b.png","https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/04545973-ba0d-4958-8852-bed7273d4146.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/faf5a34a-c88e-4723-b713-58f1c0b6770c.png",name:"Pool",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests",descRu:"   -     ,     ,      "},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/dac0ea9b-9115-430a-8642-03c6a12ffe9c.png",name:"Tennis",nameRu:"",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living",descRu:"     ,       ,         "},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c5e65a56-d204-4b14-8358-1b671244a06d/cb232148-e2cd-4892-bd0e-00a9156b1044.png",name:"Gym",nameRu:" ",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines",descRu:"    -  ,      ,       "}],activeProject:!0,paymentPlans:{1:{percent1:"20",sum1:"400000",percent2:"50",sum2:"1000000",percent3:"30",sum3:"600000",percent4:"0",sum4:"0"}}},{_id:"653a0637b00af61c7756893d",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/1de84759-378f-458e-bb1a-cf8675eff834.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"3",selectedBedrooms:"3",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Amargo",priceFrom:"1500000",sizeFrom:"1978",selectedLocation:"Damac Hills 2",ownLocation:"",lng:"55.41861343569542",lat:"24.99283459035526",exterior:"https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/534b9ae7-7d72-431a-b122-deabc7ce78d8.png",description:"Damac Properties, one of the leading developers of luxury real estate in the Middle East, has launched a new project in Dubai called Amargo. The project is designed to offer its residents a luxurious lifestyle with its stunning architecture, world-class amenities, and advantageous location.",descriptionRu:"Damac Properties,         ,        Amargo.  ,           ,      .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/368904cd-41c8-4592-b3a7-fac48827d5ff.png",price:"1500000",size:"1978"}],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/f6c234e9-4613-4998-9c39-3f5499f3d0fd.png",price:"1935000",size:"2453"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/48923547-0018-4a04-b7f5-b4c0cf3d027d.png","https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/aadf3d83-19fe-4d63-8f9d-50ddd867b50d.png","https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/36cbdd93-f750-43d0-b25d-eb9a1675c17c.png","https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/bb4e02b9-38c3-4500-baff-85daa727cea6.png","https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/9caa6db4-b098-4739-9e09-680fe6a51281.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/f5f75e64-e753-4ba0-b2ec-2bd28af7fb89.png","https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/80ca8369-6342-4334-8844-ee950177f71d.png","https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/7bc2ca4d-32db-40db-9529-f21b632192ff.png","https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/5ecaed63-346f-424d-b04a-94f8c751c091.png","https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/25868cd2-11e5-41f8-a416-fc7918402f94.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/88ab2f1a-40ac-47ab-9286-a2ecbc116996.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/85243af7-ab34-48fa-b396-6c114f1147aa.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28d90afd-8384-46d1-b694-c48cd9c4decf/5a835ea2-55e4-49f8-9b45-6f68fcad25b1.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{3:{percent1:"59",sum1:"885000",percent2:"41",sum2:"615000",percent3:"0",sum3:"0",percent4:"0",sum4:"0"},"4+":{percent1:"100",sum1:"1935000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"653a1682b00af61c7756893e",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/fb865737-d38e-487d-9aa3-adeda6c8c68b.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"3",selectedBathroom:"1",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Savanna Creek Beach",priceFrom:"1530000",sizeFrom:"672",selectedLocation:"Dubai Creek Harbour",ownLocation:"",lng:"55.3499315562653",lat:"25.201914301323836",exterior:"https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/982377b5-137c-4a8b-acf3-aaf19b33e92f.png",description:"Savanna, a new Emaar Properties development in Creek Beach, Dubai Creek Harbour, offers a family-friendly residential space with a strategic location and excellent infrastructure.",descriptionRu:"Savanna,   Emaar Properties  Creek Beach, Dubai Creek Harbour,  -        .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/b2987d2d-40d2-4989-b591-669e16f16385.png",price:"1530000",size:"672"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/2dc3b3bd-e707-41aa-9ee7-13e8e75d3786.png",price:"2350000",size:"954"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/5b9a2a89-6169-484f-8688-06decf315ad2.png","https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/1f57ede0-23f2-407d-9853-af86c8cde41a.png","https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/2b577efa-409a-4454-baf0-11bf690e48c1.png","https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/4e6832c0-22a1-46d7-a5a9-be77711ddd1d.png","https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/1d4f9322-1067-4fee-8cf5-c1815d71aacf.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/243f820c-4ae1-416e-babc-82ab80e231ff.png","https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/d234c551-7b58-4981-8e48-0145d9f2d391.png","https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/bfd317e7-77fe-4da3-8a0e-1a504f2c763c.png","https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/d59b9df9-0d9c-4152-8d6c-4523b35ce8be.png","https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/ede8d995-42d0-41e6-8f20-41d3ffd92a16.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/9fa0b704-2030-4a48-be03-f1dd819df991.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/186e510a-e765-4c72-9585-e00c26286e40.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2ba3469a-b6d0-400c-8940-5209f20ebefd/4de29093-3b69-4088-b208-4850f56aab62.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{1:{percent1:"10",sum1:"153000",percent2:"80",sum2:"1224000",percent3:"10",sum3:"153000",percent4:"0",sum4:"0"},2:{percent1:"10",sum1:"235000",percent2:"80",sum2:"1880000",percent3:"10",sum3:"235000",percent4:"0",sum4:"0"}}},{_id:"653a1f2bb00af61c77568940",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/0dbf574c-816e-413f-a6d2-3a1b86a9c942.png",selectedType:"Project for investment",selectedYear:"27",selectedMonth:"3",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Damac Bay",priceFrom:"3744500",sizeFrom:"834",selectedLocation:"Dubai Harbour",ownLocation:"",lng:"55.141719422834555",lat:"25.093106022933",exterior:"https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/3a6b723c-08f7-46a7-bbf6-94a614c4d557.png",description:"Damac Bay by Cavalli is an ultra-luxurious project by the renowned developer Damac Properties. This promising residential complex, already becoming iconic today, represents a new embodiment of luxury situated in a premium coastal community.",descriptionRu:"Damac Bay by Cavalli  -     Damac Properties.    ,     ,     ,     -.",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/36e49db5-bd7f-439a-a510-ceecbe38b653.png",price:"3744500",size:"834"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/4886f86d-ed65-4ee7-8386-7f71a2844981.png",price:"5563400",size:"1276"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/d39de117-62ce-4fd1-a046-b4f68526676e.png","https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/d50e3689-ef2c-4a0b-b638-82ccfe283ba6.png","https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/540738a6-5911-44f1-b9a0-f3a3e62499e8.png","https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/19bbc398-c376-451e-a887-2116fb4f3be4.png","https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/700026b6-167e-4853-8e9f-d87bbe1b5fff.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/17ef0bd9-0022-48d1-b577-2c85eae0ca88.png","https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/87439943-807c-4c25-b33d-fea16205ab53.png","https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/92c2b4ff-e729-4639-abee-3cdd4df3dc87.png","https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/19d68454-65a5-4ef9-8f16-c357982ef3a1.png","https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/e1e4542f-8979-469e-9505-bc71934610b2.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/ced9662f-76c1-4706-a7ac-12c9c49fabe4.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/df9736b5-0470-4a7e-a004-14e465abfbb7.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/32a795e0-57b5-4531-931f-54b1ff3d6d85/591bccce-933a-4faf-bb23-349782c59b23.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{1:{percent1:"41",sum1:"1535245",percent2:"43",sum2:"1610135",percent3:"16",sum3:"599120",percent4:"0",sum4:"0"},2:{percent1:"42",sum1:"2336628",percent2:"43",sum2:"2392262",percent3:"15",sum3:"834510",percent4:"0",sum4:"0"}}},{_id:"653a219fb00af61c77568941",userId:"6533fb61fa2662129d9aef1c",developer:"DAMAC Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/cced68d6-9daf-4ace-83fc-4aab8f65cc2e.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"3",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Gems Estate",priceFrom:"7615000",sizeFrom:"4059",selectedLocation:"Damac Hills",ownLocation:"",lng:"55.24357583357518",lat:"25.022514947613608",exterior:"https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/47056d74-5324-4918-8752-9429c23c5180.png",description:"Indulge in luxury with Gems Estate's premium villas in DAMAC Hills. Every detail exudes elegance, with input from iconic brands like de Grisogono and Cavalli.",descriptionRu:"      Gems Estate  DAMAC Hills.        ,   de Grisogono  Cavalli.",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/66f4967f-cff1-4dce-a334-8e61c18e0a86.png",price:"7615000",size:"4059"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/2b5438c2-d9b8-4cb4-a908-1433a8f631a1.png","https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/ab04fa82-c55d-4074-8132-760635a8e9b3.png","https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/4b966ffe-828c-4723-8649-1f1fc943b2d5.png","https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/8b177ed5-2bdf-4706-b47f-11dcb95b190f.png","https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/1fcdc905-aa73-423a-9dd0-6b972fd74d1d.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/fb4fb516-e86c-43fa-a9cf-4037bb212a5f.png","https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/d48fffc2-7423-473f-847a-6351a1748bbe.png","https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/1c34d9be-0238-4b09-9257-1c1ca2373420.png","https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/1af80bb6-0b12-4961-9b97-f05f85e45826.png","https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/36fa9aaa-8086-40bb-ab84-5d6e986b9ab7.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/29c321ef-31fa-400c-8964-04615c723458.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/3e845393-da8c-484c-ac60-b77c2b3338bd.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/72c9cf7b-f16b-44f1-b90f-df85750f8bf2/c62f8c2f-ab99-487b-88e7-fdbcca4727e3.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"51",sum1:"3883650",percent2:"17",sum2:"1294550",percent3:"32",sum3:"2436800",percent4:"0",sum4:"0"}}},{_id:"653a284ab00af61c77568943",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/acc07a2b-cf32-453a-91bd-aca5c6e56b18.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"2",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Belair Phase 2",priceFrom:"3100000",sizeFrom:"2005",selectedLocation:"Damac Hills",ownLocation:"",lng:"55.25474978431834",lat:"25.012583915496105",exterior:"https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/3ce91522-ec54-4586-a65d-525d187523d7.png",description:"Explore Belair Phase 2 by Damac Properties in Trump Estate Damac Hills, Dubai. Luxurious villas and mansions, unique design, and a taste of California-style living.",descriptionRu:" Belair Phase 2  Damac Properties   ,  , .    ,       .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/5f7cc465-4f59-4241-9751-18f50394a53a.png",price:"3100000",size:"2005"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/bc3920e7-6d9a-4de1-9fcb-ad4cfedb4cef.png","https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/b30ec8c6-a9e2-4dea-a706-b2cc3f3b5c9b.png","https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/9a00f016-0fdc-4ab5-ac15-2d495651de5b.png","https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/f0912584-2e44-46aa-a613-d16ccd447ba9.png","https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/fe0f8c58-851e-4b34-8791-0eeab328e70a.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/1fc9c039-ec9c-4017-9f51-a56699f44c14.png","https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/ced9e5c1-3b6b-4198-8250-6486998dba0a.png","https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/34c45723-ecef-4b78-97f7-6fb91943f0a4.png","https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/f37b655f-0ac7-497b-9aa9-9acda69a464e.png","https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/be8658b7-03d8-43d5-9258-b99da36d7974.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/aa0a890c-b93f-494d-ac03-eee9a758445e.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/d338667b-a562-4ec0-bfd4-cf61899f691f.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/63e72b85-80d1-4bd1-bd8d-c642b1a14496/6c21ff59-30b7-4551-a5df-57296c58354f.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"44",sum1:"1364000",percent2:"49",sum2:"1519000",percent3:"7",sum3:"217000",percent4:"0",sum4:"0"}}},{_id:"653a30c5b00af61c77568944",userId:"6533fb61fa2662129d9aef1c",developer:"DarGlobal",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/7d9bed70-d0d4-4dbb-bc78-7e132f055602.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"4",selectedBathroom:"1",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"DG1 Living",priceFrom:"2400000",sizeFrom:"807",selectedLocation:"Business Bay",ownLocation:"",lng:"55.17723479584445",lat:"25.10546594802086",exterior:"https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/c7a26e08-c09c-4e64-9bf6-119d14bc1d7a.png",description:"DG1 Living is a new premium residential complex by the developer DarGlobal. Situated in the business district of Business Bay, in close proximity to the scenic Dubai Water Canal, the complex offers access to a well-developed infrastructure and Dubai's top attractions.",descriptionRu:"DG1 Living -        DarGlobal.     Business Bay,      ,           .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/0065edee-6ced-43bc-8cf1-94eb75088ce2.png",price:"2175333",size:"807"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/cfa53ab9-9e77-4160-8cff-c6d9e51c68c5.png","https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/ffa67df2-042f-438a-af48-0147d2f9cc84.png","https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/a6591b31-d471-4701-b7d6-c94e352de2c9.png","https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/e18329e6-b772-452a-9fb2-8a613f5060dd.png","https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/96289df4-495a-433b-b5b3-d5605dc91f4d.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/c6d90ab9-b744-4395-a0ca-3ce66cf5a341.png","https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/01569e42-827d-4297-ba41-32d674fe1ce4.png","https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/987098d5-eb36-47e8-9659-78e22a526959.png","https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/9a75d519-3b5a-40d3-8ab9-be968e1e9a57.png","https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/4a817c95-a8c2-438e-b56f-c4a1274351b3.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/5aafb169-37ae-4cb0-9fb8-68da77a3919e.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/ec161974-56c0-47c1-9bcd-3f453430034f.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/129e54bd-c621-4993-b4ab-4fe0dc511e62/a8ad2fcf-9cd3-46d6-8881-c5027516ce4b.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{1:{percent1:"20",sum1:"435066.6",percent2:"50",sum2:"1087666.5",percent3:"30",sum3:"652599.9",percent4:"0",sum4:"0"}}},{_id:"653a3871b00af61c77568945",userId:"6533fb61fa2662129d9aef1c",developer:"Select Group",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/a0062b05-7759-4e6c-8102-d5703a64d026.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"3",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"The Edge",priceFrom:"1620000",sizeFrom:"636",selectedLocation:"Business Bay",ownLocation:"",lng:"55.266669687982855",lat:"25.187226759916022",exterior:"https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/3e5db675-eedf-4dde-a77c-3ccb7f3c7f80.png",description:"The Edge is a new premium residential complex by the renowned developer Select Group. Located in the central part of the Business Bay district, this complex offers an excellent investment opportunity and is ideal for those who appreciate a comfortable lifestyle in Dubai.",descriptionRu:"The Edge     -    Select Group.       Business Bay,       ,         .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/36ac8bea-4824-4b90-bcd3-5861b64da89c.png",price:"1620000",size:"636"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/52a91681-cc72-4a1d-883e-738f211058d3.png",price:"2320000",size:"906"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/64130f12-7e03-4c4b-b6f2-345b02016dc6.png","https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/3963a693-f26c-458f-b110-c7c9e59dacae.png","https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/b71de22d-c676-4f08-b9ca-18f6b7d51e3f.png","https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/d4e0d417-3328-4bff-94f5-dd54eef5fa8a.png","https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/82ff3397-97e4-4249-9da9-add79bda5bb1.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/4c0a80d7-0622-485a-a20e-875ad49c3444.png","https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/4e829c51-5b90-4a30-89b7-0c26743b1237.png","https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/c989e8ae-faf6-487e-bc61-3d2b699c221a.png","https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/b81ea308-1e02-411e-958b-859ba76ceb8f.png","https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/7165b6f0-3fe1-4881-88be-bd63a4849f5b.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/b5adffc3-96a2-45c4-af78-3bf0ac66bf2d.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/c3647d6f-de81-4f31-9454-bdd5100354be.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d9baf58e-d7f4-4748-8df4-2e90343d6b81/ca0e13ac-492f-414c-8ded-ea88a3c9c42c.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{1:{percent1:"20",sum1:"324000",percent2:"20",sum2:"324000",percent3:"60",sum3:"972000",percent4:"0",sum4:"0"},2:{percent1:"20",sum1:"464000",percent2:"20",sum2:"464000",percent3:"60",sum3:"1392000",percent4:"0",sum4:"0"}}},{_id:"653a5cfa019ed66a0e87a4eb",userId:"6533fb61fa2662129d9aef1c",developer:"DAMAC Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/6730999b-8a1a-497d-8ad7-baad04e27a2d.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"1",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Elegance Tower",priceFrom:"2397472",sizeFrom:"767",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.28421146149106",lat:"25.196256618167",exterior:"https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/35d8eab5-d240-45fd-ab41-74c401004f96.png",description:"Elegance Tower is a prestigious residential complex located in the heart of the central Downtown Dubai area. This remarkable skyscraper, meticulously recreated through an exclusive design project, proudly stands among other residential structures, ensuring residents the utmost comfort.",descriptionRu:"Elegance Tower    ,       Downtown Dubai.   ,    -,      ,    .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/ccf75056-9d1b-43a9-bf09-a808bc40b00b.png",price:"2397472",size:"767"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/877a987f-aee7-44b1-b640-6e26b57da69b.png",price:"3177944",size:"1093"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/4af398e6-d6c8-4a1d-a015-3abf92e42b73.png","https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/6bdb499d-54af-4634-8699-37c40f646a36.png","https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/631db749-9d9f-4174-87ba-793fef2c4718.png","https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/c1f47309-7f81-418e-bfac-5ef93f6cc4f1.png","https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/27aaa6e4-c88c-45cf-a221-f093b647d8a5.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/7400d07b-a0d8-465c-84b6-d7a0fbf17640.png","https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/4d9a7bd7-4358-474f-a869-b9b1e1da736f.png","https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/8bc5ba0e-512b-4f54-9b5c-0a15e48d3149.png","https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/2b25b36a-0c7f-4891-803a-9eb5e80c8711.png","https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/cd1b14ca-877e-4774-abea-b0f2455ba5c9.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/692fe186-d294-4d17-897d-1759a0b584a0.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/f5d3fe0e-2c8d-4b9f-9ee2-86f383acecc9.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7eaf94dc-4f39-44e7-b98c-0b1a2fb1dee0/aa824b8e-9982-4cdf-88a0-fdc2e67429bf.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{1:{percent1:"20",sum1:"479494.4",percent2:"60",sum2:"1438483.2",percent3:"20",sum3:"479494.4",percent4:"0",sum4:"0"},2:{percent1:"20",sum1:"635588.8",percent2:"60",sum2:"1906766.4",percent3:"20",sum3:"635588.8",percent4:"0",sum4:"0"}}},{_id:"653a5f74019ed66a0e87a4ec",userId:"6533fb61fa2662129d9aef1c",developer:"DAMAC Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/0d473509-20ed-43be-a9df-143dcf53d869.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"2",selectedBathroom:"2",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Ibiza",priceFrom:"2325000",sizeFrom:"2282",selectedLocation:"Damac Lagoons",ownLocation:"",lng:"55.176840550979975",lat:"25.101539635490774",exterior:"https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/a4d4c3d0-9128-46f2-8886-077515067dce.png",description:"Ibiza, in Damac Lagoons, offers resort-style living in the final phase. With vast green spaces, luxury amenities, and opulent residences, it's an ideal haven for a tranquil lifestyle.",descriptionRu:"Ibiza,   Damac Lagoons,         .    ,      ,       .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/a97b523a-a8be-410e-aa7e-e7cae549d69d.png",price:"2325000",size:"2282"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/0fdc5136-ba64-4d63-b6db-5177378f3e75.png","https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/7c667392-1e14-4865-a6b6-44eca23d2f56.png","https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/f9678949-d63a-4838-a704-8d6d3a70a961.png","https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/8bf61ee9-f94c-4e5c-af77-32eeb7f8f116.png","https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/1ad9d156-3dd7-4449-b972-f14b9e2814cd.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/faa77253-be5d-4153-b07f-e82759246957.png","https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/f630f4e5-fcf7-458e-a15c-adeca32ea341.png","https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/d4f4d9a9-4276-4cd0-8563-ef4a948bef79.png","https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/2a630641-4a7a-4ae4-afc0-5ab84423a0d7.png","https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/80871aea-5fa8-4ccb-97ab-480eb61f167d.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/2d251e42-26a1-44eb-b4b2-8557922c9960.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/3ce581cc-bf3f-48a8-a01b-e089ff450837.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/73a17221-f4f7-436f-ac92-998d5ca2bb0d/4b4901b3-7a29-4afd-b5f5-00e600457dc1.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"41",sum1:"953250",percent2:"41",sum2:"953250",percent3:"18",sum3:"418500",percent4:"0",sum4:"0"}}},{_id:"653a6514019ed66a0e87a4ed",userId:"6533fb61fa2662129d9aef1c",developer:" LIV Real Estate Development LLC",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/c204aa92-01ff-44da-bb3d-d55ce630f470.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"2",selectedBathroom:"1",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"LIV Residence",priceFrom:"2650000",sizeFrom:"1056",selectedLocation:"Dubai Marina",ownLocation:"",lng:"55.14332481727774",lat:"25.079189099059537",exterior:"https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/a3b3f581-9306-4ffa-9a25-1117600a2f33.png",description:"LIV Residence in Dubai Marina offers waterfront living in a 28-story complex. It boasts studios, 1-3 bedroom apartments with sea views, and a grand penthouse covering 600+ sqm. The blend of modern and classic design creates an elegant and tranquil atmosphere.",descriptionRu:"LIV Residence    -  , 28 , , 1-3        600+ . .         .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/6efbb613-61dc-42db-98f1-aff4aedd1045.png",price:"2650000",size:"1056"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/c05e7ba8-23bd-46aa-81e2-1de9a30d5703.png","https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/d169526b-eb84-4f52-a7b5-9996c545478e.png","https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/7d4eed51-5ac8-4141-8373-ed63ba7c7645.png","https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/7e0d363c-ca4e-43db-acef-9dbba02383ea.png","https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/11fc9b51-99d6-4042-97f3-d3cbd3d1b6f2.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/13b05ca6-384b-4c24-ba04-1f62973d85cf.png","https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/ae1c8a39-12b5-48fd-9e81-3aed49508d72.png","https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/7a1eb637-554d-4443-8bc3-fa9b12662079.png","https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/42a6c802-7602-4977-884a-a518a4d08353.png","https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/9d96fc29-2314-4f50-a261-eb4e287b82cf.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/d60ebb95-85b4-42fe-8f64-51f5b8d46c08.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/36421232-7530-4808-ab8e-fad7e14eee98.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6ff24e15-458f-4825-996a-f3f57feb1489/6ad2064c-9234-4440-b35e-9c0dd884639c.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"10",sum1:"265000",percent2:"40",sum2:"1060000",percent3:"50",sum3:"1325000",percent4:"0",sum4:"0"}}},{_id:"653a6745019ed66a0e87a4ee",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/a9703833-6ab2-4d2d-b3ac-c8d6c88fe38f.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"2",selectedBathroom:"2",selectedBedrooms:"4+",selectedProperty:"Town house",selectedStatus:"Off-Plan",projectName:"Monte Carlo",priceFrom:"2500000",sizeFrom:"2315",selectedLocation:"Damac Lagoons",ownLocation:"",lng:"55.24007199024074",lat:"25.011380852574252",exterior:"https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/d481ac79-45ea-4272-84d7-16da0a2ca19d.png",description:"Monte Carlo is one of the final communities by Damac Properties, situated in the prestigious Damac Lagoons area. Live surrounded by water-based entertainment, top attractions, and luxurious green spaces, savoring every moment of a new lifestyle.",descriptionRu:"Monte Carlo  Damac Lagoons -    Damac Properties   .     ,        .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/6bc63b0a-5c02-4207-88d9-a402a8d67920.png",price:"2500000",size:"2315"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/09b8fc4b-0d48-434b-9ece-7706dc0ebaac.png","https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/b4b7252b-a5e6-429b-8703-09ce1c087ddb.png","https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/e8aac371-3ea4-4e81-8e8b-f77cbe90f63a.png","https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/09210cbc-76d7-4587-b6c7-fd387a3de4df.png","https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/6b97568f-5bae-49f9-a7ac-15594c3d9cd1.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/9449f33c-c47a-4e36-b475-72632d6f2a75.png","https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/5131ef1d-d1b5-4255-9bb0-5d1bce6f9308.png","https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/08d47974-aac7-412d-9ba5-6365a7ed3f6a.png","https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/460d3c42-fb9d-419f-ab7c-971df9fdce86.png","https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/5faa452c-932b-4058-9c85-f5a094d1fb8a.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/95d12610-4db4-4ba5-aa67-78f1feed51ce.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/7ad58360-2e41-4e02-8356-b5697190f603.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/57a85169-03b7-4a2e-93df-0623a5b8ab01/0c10d6b2-1410-45c0-a1f9-7997af6d7fe3.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"46",sum1:"1150000",percent2:"40",sum2:"1000000",percent3:"14",sum3:"350000",percent4:"0",sum4:"0"}}},{_id:"653a68ea019ed66a0e87a4f0",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/fb5926ee-a5d6-4a9d-ad52-7ab7bac08b2e.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"2",selectedBathroom:"1",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Palace Residences North",priceFrom:"1600000",sizeFrom:"638",selectedLocation:"Dubai Creek Harbour",ownLocation:"",lng:"55.34475056899921",lat:"25.2035049219412",exterior:"https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/c7aefe4a-ae56-4d24-9ac4-841d2c299858.png",description:"Palace Residence, a 33-story tower by Emaar Properties and a subsidiary division, offers stunning views of Creek Beach and Creek Promenade. The unique architecture with sleek lines and natural colors enhances the development's premium quality, making it attractive to discerning buyers and investors",descriptionRu:"Palace Residence  Emaar Properties     - 33-     Creek Beach  Creek Promenade.             .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/b818495a-0b9a-4579-8a98-544f9461cea2.png",price:"1600000",size:"638"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/26758337-d5a1-4c2f-9ffb-8ba449a85947.png","https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/f04e60c0-5051-45f5-a3a3-2397c973d972.png","https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/74adc64a-2bc7-4110-8625-e24fdcb91901.png","https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/076b48dc-618b-49f3-a449-37ac3846708d.png","https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/aa38f811-852b-45ca-b99e-fc672f458cc0.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/142ad203-6b44-4ab0-b1dc-8e0b49431de5.png","https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/3782ec77-1ec7-4768-b237-091eadb6bce5.png","https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/593d73f6-ad64-4c22-a697-e2b6bfe6fcb7.png","https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/cc2eb29b-25ee-4f2c-9f42-7062f1764414.png","https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/b26deee3-3ed0-46e1-8fdd-6863dce12c65.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/778a0464-ed21-4ef7-8c35-651ef0f8439c.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/d2c5d90d-8a67-4a05-822a-ee347236fede.png",name:"Library",nameRu:"",desc:"A private library awaits within the property, providing a quiet sanctuary filled with books, perfect for avid readers to immerse themselves in captivating stories.",descRu:"    ,  ,      ,    ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b40ea10e-cf0d-40cc-9f30-719f8916a6af/137db505-d73d-4b48-bb1c-90a93950a2eb.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"10",sum1:"160000",percent2:"70",sum2:"1120000",percent3:"20",sum3:"320000",percent4:"0",sum4:"0"}}},{_id:"653a6ba9019ed66a0e87a4f1",userId:"6533fb61fa2662129d9aef1c",developer:"Damac",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/d0a3df09-b64b-44f4-9721-1b24c97dc095.png",selectedType:"Project for self-use",selectedYear:"23",selectedMonth:"4",selectedBathroom:"3",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Costa Brava 1",priceFrom:"2500000",sizeFrom:"2280",selectedLocation:"Damac Lagoons",ownLocation:"",lng:"55.24289534519222",lat:"24.99559915544139",exterior:"https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/bc3c6050-ed41-4a95-98b5-4410ec203d79.png",description:"Lagoons Phase 2, known as Costa Brava, is Damac Properties' latest waterfront project, featuring townhouses and villas with premium amenities. This exclusive residential development exudes community charm and provides access to top-notch lifestyle facilities",descriptionRu:'Lagoons Phase 2",   " ",        Damac Properties,       .                   ',plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/87704e51-7fec-47b7-b9e7-c83af9e4b574.png",price:"2500000",size:"2280"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/a58e9c1e-b2f6-4dbd-8006-e23e22067aad.png","https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/b5e79663-645d-4773-ad09-deea450ffc85.png","https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/1a5fdb17-cf8b-4fd5-9f36-532043c02d7d.png","https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/fb1ba078-ea27-451c-b1a4-4531efb2d14a.png","https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/4cb8ad66-1b38-4b46-b4f8-d7a441039bee.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/8be5d5ab-29cc-4660-9209-14d54fbbb9e8.png","https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/51c6cfc6-00e0-4772-a8c8-b254c13bdda1.png","https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/4f8ae30a-9f28-4de1-99a7-c1a662129da9.png","https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/c3794dd2-be02-416d-b799-1b81dadd4f08.png","https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/fee5a02b-9716-4745-8e2e-e950adc3393d.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/219a61b6-eaaf-4cce-91f0-275042bca28a.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:`     -   ,     ,       .\r
`},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/36d79010-a1bb-4866-aac3-522eb6ae6970.png",name:"Gym",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       "},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/14560421-9714-432c-992a-9508f0d2df97/6e7843d1-d0c3-4667-960a-384ba86c011a.png",name:"Tennis",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         "}],activeProject:!0,paymentPlans:{"4+":{percent1:"57",sum1:"1425000",percent2:"9",sum2:"225000",percent3:"34",sum3:"850000",percent4:"0",sum4:"0"}}},{_id:"653b515e2b1aba1c3869928c",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties ",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/b9db1a02-0efc-428c-bfd0-2e50e7b640a9.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Cavalli Tower",priceFrom:"4000000",sizeFrom:"1446",selectedLocation:"Dubai Marina",ownLocation:"",lng:"55.1514314208982",lat:"25.090542322988583",exterior:"https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/9be3294f-f4f3-47e2-ad16-8ea8a5a58156.png",description:"Cavalli Tower, launched in Q3 2021, is a standout in DAMAC Properties' portfolio. It's the first global Cavalli-branded residential complex with a unique design by Sean Killa, the visionary behind the eagerly awaited Museum of the Future.",descriptionRu:" Cavalli,     2021 ,    DAMAC Properties.         Cavalli      , ,     .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/44276e80-5ca2-485c-aa3e-f9c62440e041.png",price:"4000000",size:"1446"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/258dc699-fc6a-4b6d-9441-ebad4d02f343.png","https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/d9f9d0e5-0c21-4bfc-999f-707c70cbc139.png","https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/45dd22a4-555e-4fed-9df4-c5e339d3ca6e.png","https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/ec56f395-2cdf-411a-a4b2-90f4b2c80256.png","https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/9afe6f49-1bb0-435f-be0c-bcc8f603c279.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/cb060c44-391e-4628-883c-2c03d1f5b64c.png","https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/174b1f3d-4655-4840-8f8b-79fd6ad48968.png","https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/8983460e-b078-4098-9557-eb54d7eb8d09.png","https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/27134ac7-b2bf-4a17-beec-91c2ec034544.png","https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/bc61dcde-959d-4d4d-8ad8-87e07bbc31f1.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/9b1ab507-4324-4590-b367-86c1e6baa670.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/9318c2c4-8b33-4bf0-bafc-2512b7596862.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d2342e69-8bb7-4617-a8a6-3db91600ce3a/e7df43cd-f75d-4ded-89c9-629a430815e6.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{2:{percent1:"15",sum1:"600000",percent2:"75",sum2:"3000000",percent3:"10",sum3:"400000",percent4:"0",sum4:"0"}}},{_id:"653b5d802b1aba1c3869928f",userId:"6533fb61fa2662129d9aef1c",developer:" Select Group",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/715e68c4-8c92-40f9-ad77-0b2840ece1be.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"2",selectedBathroom:"2",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Peninsula four",priceFrom:"5269000",sizeFrom:"1948",selectedLocation:"Business Bay",ownLocation:"",lng:"55.26770077695202",lat:"25.184600422197317",exterior:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/4b643a92-fb2c-46ab-bbbe-078fa2ba78e5.png",description:"Peninsula 4 Plaza, in the heart of Dubai, is a breathtaking residential complex by Select Group, a prominent Dubai developer. Anticipated to be completed in Q1 2026, Select Group boasts a portfolio featuring numerous renowned and beloved projects.",descriptionRu:"Peninsula 4 Plaza    -       Dubai, Select Group.       2026 ,   Select Group  ,      .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/7501ee4c-9879-4a92-96e3-75475a09f7dc.png",price:"5269000",size:"1948"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/f3140e1f-b177-4f9d-ab7b-e5add5942544.png",price:"5316000",size:"1948"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/ba4e3400-0d53-4c71-bb95-b65b90c2ee1e.png",price:"5339000",size:"1948"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/2a880231-6ea1-4523-93c0-9fc01d027a27.png",price:"5363000",size:"1948"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/c91955c7-09b0-46e1-8c31-0033cc55ee6a.png",price:"5410000",size:"1948"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/c6a5ab00-28d2-4273-b73d-644525f132e6.png","https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/89e387a5-bb37-477a-bf27-d0b42de013d9.png","https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/4f8ab213-3eb9-43f3-a077-2e65a95e7fcb.png","https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/1fb45fce-be69-4eef-b417-44af1ea3f59f.png","https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/6fedb8e7-9e88-4d40-9ebd-a8288965cc4e.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/4b4028ce-4284-4c2d-a3f2-cfb677943cbc.png","https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/eb775db1-9ab4-4e30-8b2d-d2ffbc363111.png","https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/55846370-19b2-40d1-90d2-d006d8213b1c.png","https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/4ca6c81d-ba2a-4bcf-a364-82efa2c35c24.png","https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/084eac15-9813-49af-a659-07e6cac05506.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/51cce7f6-7f7b-467c-b6e0-8feaeb8b4030.png",name:"Library",nameRu:"",desc:"A private library awaits within the property, providing a quiet sanctuary filled with books, perfect for avid readers to immerse themselves in captivating stories.",descRu:"    ,  ,      ,    ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/db47ea4a-c248-47a0-a003-8397776e8112.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e8ebe13a-9366-41ab-a8ef-6b71cbae0587/f6a7f714-95da-4ba3-a758-9bee248eaefe.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{3:{percent1:"20",sum1:"1053800",percent2:"20",sum2:"1053800",percent3:"60",sum3:"3161400",percent4:"0",sum4:"0"}}},{_id:"653b62b02b1aba1c38699290",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/50aebde8-4c25-403e-b3fc-49bf7a92af42.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"3",selectedBedrooms:"4+",selectedProperty:"Town house",selectedStatus:"Off-Plan",projectName:"Portofino",priceFrom:"2200000",sizeFrom:"2073",selectedLocation:"Damac Lagoons",ownLocation:"",lng:"55.23215872484659",lat:"25.013363411220112",exterior:"https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/36f08955-681c-46a5-9921-884af08adfa0.png",description:"Portofino at Damac Lagoons is a new development by Damac Properties, offering elegant designer townhouses and villas in Italian style in Dubai. The project represents a gem of the Italian Riviera with a touch of Old-World Italian glamour.",descriptionRu:"Portofino at Damac Lagoons -    Damac Properties,           .            .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/acd22416-aedf-454d-8de7-ed4f2848c1e7.png",price:"2200000",size:"2073"}],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/3fa90b37-586d-4182-878d-59cdf8ea4bb2.png",price:"2600000",size:"2275"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/f5e5c063-d610-4c0b-9c91-174a39f02826.png","https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/4faade30-6078-40cb-8f30-59291c3f900d.png","https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/9a3e4798-c3ae-4c41-ad3c-bae91b4d0319.png","https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/c9794233-bf94-44a8-924c-b4d5ca08cca4.png","https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/a6a8ecbe-a423-4658-b0eb-631f212f1d1a.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/2eb1535e-1282-40ec-9bd7-7052176c31ed.png","https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/fdc3a24e-db85-40a6-9b02-a7fe7e667ac5.png","https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/db61b2aa-00c8-407e-a0fb-cb63058b83ed.png","https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/9d49d3f4-7a8b-4e57-9a21-ec5b7fcc1fa1.png","https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/0c172c57-4545-4564-bbfc-7cf583763e3b.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/ff8334b2-45ef-461a-8e5e-25544a1dd703.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/c0ad906b-e2b6-4d58-b128-8131a87a997c.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e5c4ed7-5092-4528-80c6-9c5bc5767033/ce93741c-33bb-48b8-88f8-1917ef762ddf.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{3:{percent1:"53",sum1:"1166000",percent2:"26",sum2:"572000",percent3:"21",sum3:"462000",percent4:"0",sum4:"0"},"4+":{percent1:"63",sum1:"1638000",percent2:"17",sum2:"442000",percent3:"20",sum3:"520000",percent4:"0",sum4:"0"}}},{_id:"653b6ce52b1aba1c38699291",userId:"6533fb61fa2662129d9aef1c",developer:"DAMAC Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/d2c23ea5-f8cd-49da-b366-bec53538ad0b.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"1",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Safa TWO",priceFrom:"1900000",sizeFrom:"753",selectedLocation:"Wadi Al Safa 5",ownLocation:"",lng:"55.247751380454794",lat:"25.18321423986003",exterior:"https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/44c6cbdc-fb52-4155-b159-7baa9ac8cd44.png",description:"Safa TWO, by DAMAC Properties, is a luxury residential complex in Dubai's Al Safa. It features two towers, 44 and 60 stories tall, offering 1-3 bedroom apartments (41-139 sqm) and exclusive 5-bedroom penthouses. Designed by De Grisogono, a renowned jewelry brand.",descriptionRu:"Safa TWO  DAMAC Properties -     -, ,    (44  60 ).     1-3  (41-139 .)   5- ,   De Grisogono.",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/bf364ab7-8374-4fc2-ad5e-282f801a6e99.png",price:"1900000",size:"753"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/14fa0716-4b1a-47fc-9053-cd069839470c.png","https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/d0787168-1480-4e9f-8d60-13887bd7c171.png","https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/361a91e1-2c25-4be5-8280-e73b102c47ad.png","https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/1c3564e8-4f59-4356-86e1-d616900c8d06.png","https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/ec7be9ed-248e-4836-a3f2-14159b310b8d.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/d8dbdf10-1903-4c51-9d54-1327d8c03b25.png","https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/c52204d2-cac4-436c-8571-aeb42f227dca.png","https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/218cd923-7594-40d5-b65c-ffe6aab1d7ed.png","https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/f143a347-9eea-48f4-9270-f4b96357ed0e.png","https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/88a53e47-6025-4ad8-9fb7-0dbb5f86567d.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/88cc490f-c156-4dc3-aad3-c54b24bcbe09.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/2cf00065-559e-4f35-a11a-2cf699fd84ff.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/92d33ca1-351e-4d70-b555-80adc429a639/2f84bb4d-2e71-4fbd-87e4-e83e069a1396.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{1:{percent1:"15",sum1:"285000",percent2:"60",sum2:"1140000",percent3:"25",sum3:"475000",percent4:"0",sum4:"0"}}},{_id:"653b70692b1aba1c38699292",userId:"6533fb61fa2662129d9aef1c",developer:"DAMAC Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/66f3d914-1b82-4eca-b20d-c08be8a21690.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"3",selectedBedrooms:"4+",selectedProperty:"Town house",selectedStatus:"Off-Plan",projectName:"Santorini",priceFrom:"2375000",sizeFrom:"2268",selectedLocation:"Damac Lagoons",ownLocation:"",lng:"55.23747744075085",lat:"25.01122684242839",exterior:"https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/b593cdc6-8a17-4e5d-988b-07bdfaf1ade6.png",description:"Experience the allure of an expansive crystal lagoon leading to the promenade of your new home. Welcome to Santorini in DAMAC Lagoons, offering meticulously designed townhouses and villas with spacious living areas for enhanced security and privacy.",descriptionRu:"    ,      .      DAMAC Lagoons,                 .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/2e9dd9c7-ca74-4ef2-8acc-34757e565d4d.png",price:"2375000",size:"2268"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/beeeb3e6-4866-45e8-88d2-d7d16b43220f.png",price:"3220000",size:"2930"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/62fe0996-96d9-4850-bfda-c731a93639b2.png","https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/ad8d1bdc-dca6-4a96-b41f-4df1c45cdbb4.png","https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/35c59b0f-671d-4663-b5a9-eedc7160dd8b.png","https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/3b3e05ba-6a3a-407e-9403-f0c7f5aeb69d.png","https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/77c79343-9c0a-4632-95fc-202a4dd2e683.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/fc394a0a-c16c-489b-b9de-892696c4c579.png","https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/8d95e17c-6206-429c-95cc-7173707dfb9a.png","https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/e0745e47-2482-443e-92e5-75a6617b26ad.png","https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/e320f40a-aa66-455f-ae39-074b326b2689.png","https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/dfa5a532-0fb5-43fa-bf75-ff8ac9ff4c7f.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/d8ebad67-9c66-4cce-b77d-716238e274d6.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/31bc9d24-5e99-464d-bd4f-f7d7b92a1f1e.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/860d9ce4-d109-4575-9452-8d745f0e0c02/4e5781b8-82e2-48d8-93b5-376ecf3fb748.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"62",sum1:"1472500",percent2:"14",sum2:"332500",percent3:"24",sum3:"570000",percent4:"0",sum4:"0"}}},{_id:"653b7fb12b1aba1c38699293",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/2b4b0e6e-2636-4f8e-8130-b6c686533cd2.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"3",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Seagate",priceFrom:"2250000",sizeFrom:"1152",selectedLocation:"Mina Rashid",ownLocation:"",lng:"55.28454794718949",lat:"25.272237406430534",exterior:"https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/128c14d1-aa06-4b1e-bff0-bac5e35fe901.png",description:"Seagate is an elite residential complex located on the waterfront in the bustling Rashid Yachts & Marina area (formerly Mina Rashid). Construction began in the second quarter of 2022, and the project is developed by Emaar Properties.",descriptionRu:"Seagate -    ,       Rashid Yachts & Marina (   Mina Rashid).      2022 ,    Emaar Properties.",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/2a400603-9112-4cfa-815f-ddd305e68b4e.png",price:"2250000",size:"1152"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/b2ebc421-84c5-48e0-afbc-dabc12e75007.png",price:"2550000",size:"1240"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/6ef4e74a-7728-45f2-96bf-4160ae46b1ed.png","https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/29c4fe1e-5452-42cf-9ff8-68938ac47e80.png","https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/4dd17815-977b-4098-be58-fc4d7ade73ec.png","https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/779a0805-1eee-4209-9481-2e69a2d899ad.png","https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/dd951a05-8532-47d1-8891-29a4cd8de8f3.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/648313d4-289b-4346-ad34-13597765fc96.png","https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/f5a00def-6cb1-45d2-b8ab-d51d14745abd.png","https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/688a692e-53e7-4972-a057-a0a90b7ff76d.png","https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/34b5fd26-6a66-4ac4-a4cd-73c904048d39.png","https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/aa6ab1d2-5adc-4a37-a275-1f2fbc2e88dc.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/9dea2e50-0009-4c7a-97bb-ef3329dc3baa.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/70edcf87-16ef-47f5-a920-5b4f71b697e6.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4d939a72-0587-4da4-9a40-d1206d97ed8a/e7488bec-975a-4326-a769-fb2f3a90fb4e.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"50",sum1:"1125000",percent2:"20",sum2:"450000",percent3:"30",sum3:"675000",percent4:"0",sum4:"0"}}},{_id:"653b84132b1aba1c38699294",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/86720736-7036-4bf7-b03c-47df64c43f3c.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"4",selectedBathroom:"1",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Seascape",priceFrom:"2450000",sizeFrom:"1319",selectedLocation:"Mina Rashid",ownLocation:"",lng:"55.27608957195439",lat:"25.258623515297216",exterior:"https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/cefaa941-cf6f-4c3a-9be2-bdadd21b00ae.png",description:"Seascape, a residential complex by the renowned developer Emaar Properties, is a new gem in the prestigious Rashid Yachts and Marina area. Here, luxurious residences coexist with the waterfront and yacht marina, creating a truly resort-style lifestyle.",descriptionRu:"Seascape,     Emaar Properties, -     Rashid Yachts and Marina.        -,     .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/ae8bf237-4080-45ea-abc2-9c0714ab66f2.png",price:"2450000",size:"1393"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/7ff93ac4-9f1e-4f16-a715-85c966ffb114.png",price:"2600000",size:"1319"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/06adc4ec-ee86-4f5c-80b7-6de7ab2864fc.png","https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/c41b8108-a2db-4bdf-b2e3-73819319620a.png","https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/669d74da-c4cb-42bd-81b2-4ba640f8cadc.png","https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/83e1a9de-937d-41ec-9934-cf6aaaef052d.png","https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/6790121c-baa8-4f25-a6f3-387909de14d7.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/00ce2efa-08ea-4b56-8069-14563e618c0e.png","https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/c6265736-345c-4051-95a7-a4581ab6ddb5.png","https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/74dfc05b-280c-4aa0-b935-73fe085bc7c5.png","https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/0c28235d-3e8a-47ba-8d83-d691622cfceb.png","https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/9547e0b1-9fdf-48e4-b3a2-529a27ec47a5.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/40713675-07ce-4999-a9d4-af96f52004ca.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/25866864-1762-4cf7-9022-dc6c68d94982.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/42bb1261-3d79-45da-bfd9-91fb5207f51f/14f5c89e-d6ea-4554-8784-0966275652cb.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{2:{percent1:"40",sum1:"980000",percent2:"60",sum2:"1470000",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"653b87b22b1aba1c38699295",userId:"6533fb61fa2662129d9aef1c",developer:"DAMAC Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/f71458f1-8ecf-4ddd-8ec3-d745ef082663.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"4+",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Silver Springs",priceFrom:"5100000",sizeFrom:"3552",selectedLocation:"Damac Hills",ownLocation:"",lng:"55.236896006174206",lat:"25.020380661351716",exterior:"https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/c0348d29-8708-4529-a596-39058f812cec.png",description:"Silver Springs Villas by Damac Properties in Damac Hills, Dubai, feature limited edition 4-bedroom luxury villas with mansion-like backyards. This new addition to the community offers a tranquil setting and proximity to an 18-hole championship golf course.",descriptionRu:"Silver Springs Villas  Damac Properties  Damac Hills,  -    4-    ,   .            18-    .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/3bdcf865-995b-446b-b108-0bf2078a8441.png",price:"5100000",size:"3552"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/439316a2-f28d-48fc-9f6a-292066687fe1.png","https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/1ebc75e3-442f-41e9-b36b-68881c7b646e.png","https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/94d4d7a3-9203-4ca1-8b65-bec1c537ddd0.png","https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/b4aff780-40c1-4ee8-8348-dd7d24bc7f1a.png","https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/bfd4ca2e-cfeb-4a75-957f-6889f995480c.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/d729e5be-1031-4c75-9b90-c6731f9a8ee0.png","https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/0250150a-715b-4050-9f20-0c77fd310e7b.png","https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/6648858a-e93e-4e74-888f-327c2265f99d.png","https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/4d45a700-1295-49d3-9b46-43ed2b971261.png","https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/56d0f6be-4388-42e6-a1f1-ce03d84a7517.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/aa4ae8ca-0eb7-4320-9bc1-a4fb61f79fb7.png",name:" Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/82e2818f-5306-47df-adf4-3d109a7dc8b5.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/827971f9-2bc4-4a74-9a41-ea5b965c1919/1eef9b8e-ffc9-4765-9ca8-ead33a13d878.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"63",sum1:"3213000",percent2:"29",sum2:"1479000",percent3:"8",sum3:"408000",percent4:"0",sum4:"0"}}},{_id:"653b9bb22b1aba1c38699297",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/fb298855-26dc-4263-ab38-a43fb81f46cd.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"4",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"St. Regis Residences",priceFrom:"3843610",sizeFrom:"1220",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.27455114054212",lat:"25.198036369434764",exterior:"https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/abe7fe9f-ab53-4ab1-95e4-43ef538c1dac.png",description:"St. Regis Residences: Premium project in Downtown Dubai, 2 towers (Tower A, Tower B), 1-4 bedroom residences, half or full floors available. Developed by Emaar Properties with St. Regis Hotels & Resorts.",descriptionRu:"St. Regis Residences:     ,   2  ( A,  B),    1  4 ,   ,    .  Emaar Properties       St. Regis.",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/f7d4a110-0d49-4583-a253-17f503c7dac9.png",price:"3843610",size:"1220"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/0f9d813b-61d0-4a1c-9de5-66144ca3d7c0.png","https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/2b6b0237-2579-4798-be39-732cd74ec8fb.png","https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/a1b327f2-3467-4a51-89c3-a927fbf5f085.png","https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/531ad6de-a2de-4811-8f1a-8105fdbd3e21.png","https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/4564e373-5f7e-4656-8cec-d84b0b9ebbb5.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/1222465b-aa05-4edf-9b43-27a87ed16caf.png","https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/e81e7ba8-7ef6-4257-bd53-801989704062.png","https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/44d718f0-8629-43cd-b3ae-b1172856acc3.png","https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/6b26b566-6fac-40e3-ad57-6745ed0ed07f.png","https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/5f35aea5-6b5a-4cc1-bdce-3d153b3636ee.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/9da5879d-61f8-4762-b266-f1e1c965b712.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/6ddc30c7-be16-461c-a8e2-f80e74772b0b.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2dfa5c21-4c2c-4545-b595-b375baff625a/e4a79bb2-06bb-4735-a404-f77b1250fe01.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"55",sum1:"2113985.5",percent2:"15",sum2:"576541.5",percent3:"30",sum3:"1153083",percent4:"0",sum4:"0"}}},{_id:"653ba2ae2b1aba1c38699298",userId:"6533fb61fa2662129d9aef1c",developer:" EMAAR Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/b82fc1e4-338a-4bb3-8e66-a3ef6138baa4.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"1",selectedBathroom:"2",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:" The Cove",priceFrom:"2750000",sizeFrom:"1244",selectedLocation:"Dubai Creek Harbour",ownLocation:"",lng:"55.342408579401315",lat:"25.202797369485346",exterior:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/9e2a08df-7f55-48dc-86f2-ae327aae6852.png",description:"The Cove, a Dubai real estate project by a top UAE developer, advances with a new phase for discerning buyers. It combines Dubai's natural beauty and modern amenities, offering diverse real estate options to suit every buyer.",descriptionRu:'"The Cove"           ,      ,       .        .',plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/84cacdb5-9027-473d-9fa2-a3bf9064a73d.png",price:"2750000",size:"1244"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/7ced9756-4413-4d8b-87e6-c03d2cbd212c.png",price:"2799224",size:"1140"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/11b8b616-1f7e-4013-9321-df52deff701d.png",price:"2960000",size:"1386"}],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/bf4994b2-a0b6-4a7c-a4ce-e2e0452bb50c.png",price:"3999643",size:"1563"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/3304f435-a849-4bdd-874f-9a4757eb464e.png",price:"4961924",size:"1828"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/514ebd40-6efa-4a13-9a37-237ef4ae663c.png",price:"5050619",size:"1828"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/1464a879-2fd5-4a7f-b9b7-2125d57695c1.png",price:"5672699",size:"1871"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/6465f3ee-7c71-469e-95a1-0989e942c131.png","https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/5cc1aa1e-218e-47d2-b61e-37402c117cc6.png","https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/7aee7e4b-760a-4a73-b149-2c7ce57ebd31.png","https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/113a52a0-c737-4e8a-b0a4-3a0292ca8d2d.png","https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/afe0f10a-6317-4ab0-a30d-c9958621ec19.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/0e250095-20d9-4dd3-9746-a7f5ffd47cd0.png","https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/b1e7bc8f-c1a2-4afe-9379-30422414896b.png","https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/aa21f9a1-bb0b-4f4d-be65-aa78287b0aa9.png","https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/ed1bceb0-6c60-4510-af33-a2a50ec11d20.png","https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/51b9842d-a37e-4849-b7fc-68455d75c536.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/118edcd5-498c-4887-9d4b-607b5669b937.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/d8eeee68-2eb1-4064-a61a-0f1bc4b96330.png",name:"Library",nameRu:"",desc:"A private library awaits within the property, providing a quiet sanctuary filled with books, perfect for avid readers to immerse themselves in captivating stories.",descRu:"    ,  ,      ,    ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/dd7db39a-2466-4772-b4c7-239621ae4cc3/3abcfcbd-3154-4908-b66f-f00777418748.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"50",sum1:"1375000",percent2:"20",sum2:"550000",percent3:"30",sum3:"825000",percent4:"0",sum4:"0"},3:{percent1:"40",sum1:"1599857.2",percent2:"40",sum2:"1599857.2",percent3:"20",sum3:"799928.6",percent4:"0",sum4:"0"}}},{_id:"653ba6e82b1aba1c38699299",userId:"6533fb61fa2662129d9aef1c",developer:"Ellington Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/d9d5603f-dac6-40c2-96cc-d41f77fa1fb1.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"3",selectedBathroom:"1",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"The Highbury",priceFrom:"1852000",sizeFrom:"847",selectedLocation:"Nad Al Sheba",ownLocation:"",lng:"55.303404058641895",lat:"25.17746840116575",exterior:"https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/f2482390-b9ab-4dde-8fdb-c39e7f8c0bef.png",description:"The Highbury is a new premium residential complex presented by Ellington Properties. Located in one of the most popular areas of Mohammed Bin Rashid City, the complex offers a wide range of real estate options for buyers and investors.",descriptionRu:"Highbury -   -  ,   Ellington Properties.           ,          .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/58393086-c5d8-4c31-8c71-60c6cc3d38a7.png",price:"1852000",size:"847"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/a9fce692-4b16-4a66-bd10-b88d9c4cee17.png","https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/0dff2277-e6ef-49c7-a684-9c6ebb03bbca.png","https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/ac620527-50a0-4993-907f-f71522461fe4.png","https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/1f055207-9798-4c16-86c8-497572afad67.png","https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/9c0b4788-bc8f-4aaf-bac0-867d04d360cd.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/aac164b5-1e9b-491a-bde3-bcf015a95a0d.png","https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/6d297878-230a-4e8f-9385-7bbfae742240.png","https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/59ca48ab-21f3-496b-b4a3-b603dedd1a20.png","https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/f53477b6-98f3-490a-8bfb-755d0cfd5aa4.png","https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/3eebcdae-4082-4cac-b4c7-54763389edc4.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/58bfe401-70da-4052-93a4-34f148b9a58a.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/b9104a67-a571-4478-babe-05051dfcc97c.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/772e87f5-d363-4fd7-9ffb-adf9327b418b/4da322cf-34f6-4966-afda-360485f14f58.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"40",sum1:"740800",percent2:"30",sum2:"555600",percent3:"30",sum3:"555600",percent4:"0",sum4:"0"}}},{_id:"653bade82b1aba1c3869929a",userId:"6533fb61fa2662129d9aef1c",developer:"IGO",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/2fb02921-a850-4abe-adb7-3fcd31c38487.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"1",selectedBathroom:"1",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"The Paragon",priceFrom:"900000",sizeFrom:"441",selectedLocation:"Business Bay",ownLocation:"",lng:"55.27416135303066",lat:"25.18010695389486",exterior:"https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/fc88494e-ffd1-4c55-9fb2-91fcd23816df.png",description:"Paragon by IGO: 21-story modern residential complex, studio to three-bedroom apartments, prime location near Downtown and business centers, offering urban style and abundant amenities for forward-looking buyers seeking unparalleled excellence and a high-end lifestyle.",descriptionRu:"Paragon  IGO:  21-  ,  -  ,        ,        ,       .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/3acf74cb-ead5-43ca-9abf-92ebb9527c9b.png",price:"1407000",size:"767"}],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/a30c8858-9853-46e6-b6d6-fce6383b1114.png",price:"900000",size:"441"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/81cc4d82-4564-4aba-8bce-9ae4712e76e6.png","https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/fac6cc4c-2e2e-4591-92ba-fbb514ee025b.png","https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/cb7c71b4-e975-4f66-b826-fd78ad45d3af.png","https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/87d46675-6865-42b3-9412-3bbace0a3eed.png","https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/a41a3c8f-b170-4273-91cb-110802d5c758.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/c14d400c-608c-4640-bea0-238d1404dea4.png","https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/2522bcce-9d1a-4ec4-a0e8-62a38f504fa4.png","https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/d4994dc2-3a17-40e1-9c55-cb2d90faf9c1.png","https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/74517e84-9e66-47d9-a063-02822dff2452.png","https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/b51a00ab-b9f1-481a-8a8e-ff0329435544.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/1eee2cf3-80de-43cc-a9c7-0ba940970d9c.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/d238fc4f-7539-47ac-a2c3-29d646067dee.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5036224b-8b57-43c9-a0bf-ead7d8cc0fdc/aff5aead-56f7-4803-bbfa-715806103ce7.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"10",sum1:"140700",percent2:"40",sum2:"562800",percent3:"10",sum3:"140700",percent4:"40",sum4:"562800"},Studio:{percent1:"10",sum1:"90000",percent2:"40",sum2:"360000",percent3:"10",sum3:"90000",percent4:"40",sum4:"360000"}}},{_id:"653bb17f2b1aba1c3869929b",userId:"6533fb61fa2662129d9aef1c",developer:"Deyaar Development",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/ffbe85f8-cf16-4e34-81fb-eb1b97973b22.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"2",selectedBathroom:"1",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Deyaar Tria",priceFrom:"590000",sizeFrom:"440",selectedLocation:"Dubai Silicon Oasis",ownLocation:"",lng:"55.38917370735717",lat:"25.10487440303684",exterior:"https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/64ffa22d-2d01-4c4c-b3a0-044282129bbc.png",description:"Deyaar Tria, Dubai Silicon Oasis: Studios & 1-2 bedroom apts with modern design, eco-friendly features, and Welltech smart homes. Traditionally inspired with earth, light, air, and water elements.",descriptionRu:"Deyaar Tria,   :           ,         Welltech.     , ,   .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/c97910af-4add-43a7-9271-83fb990a7bf2.png",price:"980000",size:"805"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/69a33314-0767-48ac-acef-e2082d62408e.png",price:"1460000",size:"1255"}],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/08196be9-458c-40e9-833b-97da0b1e69d2.png",price:"590000",size:"440"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/21a08eea-5c21-46e0-a2ea-b7be4daec9fe.png","https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/324424c9-5d7e-4fe5-9b51-422520579bde.png","https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/566a2d1a-2b1b-4a77-95bd-5492ea00e8a3.png","https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/44200d2e-3049-4d9b-b7a1-fb35f4a84627.png","https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/3d7cfda4-ba7e-480f-a763-923a140de9b7.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/a4562b1a-8467-4df4-af3b-9f8ffb374649.png","https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/277d68b7-f433-4545-ae1f-6216c5b5aee4.png","https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/658d076f-bf28-4a6b-8d0e-3745e5773e7b.png","https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/5361ff24-3d5c-4e8b-a1e1-c670d7d2c06f.png","https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/ff71d289-0ba1-467d-9d8d-8ee192b35434.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/00b72697-db98-43de-8de3-503e3682edb9.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/8d1596c4-e020-44d3-b37d-6ce288ee2826.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6c9a6555-ddb1-448e-822b-d9d781a5366d/560bffb4-de55-4d93-a1b6-578e386b0730.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"12",sum1:"117600",percent2:"58",sum2:"568400",percent3:"30",sum3:"294000",percent4:"0",sum4:"0"},2:{percent1:"12",sum1:"175200",percent2:"58",sum2:"846800",percent3:"30",sum3:"438000",percent4:"0",sum4:"0"},Studio:{percent1:"12",sum1:"70800",percent2:"58",sum2:"342200",percent3:"30",sum3:"177000",percent4:"0",sum4:"0"}}},{_id:"653f4db836b4893bc7806e40",userId:"6533fb61fa2662129d9aef1c",developer:"Ellington Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/cab49dfc-1a91-436b-8db2-e0b7181dc7d0.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"4",selectedBathroom:"1",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Upper House",priceFrom:"1600000",sizeFrom:"824",selectedLocation:"Jumeirah Lake Towers (JLT)",ownLocation:"",lng:"55.144569967050906",lat:"25.06725183804116",exterior:"https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/dbb35652-bc03-4018-9c8e-e13e331679ed.png",description:"Upper House, by Ellington Properties, is a new residential complex that graces the Dubai skyline and Jumeirah Island with its contemporary architectural design. The sleek facade, panoramic glazing, and airy balconies and terraces epitomize modernity in its architecture.",descriptionRu:"Upper House  Ellington Properties -            .  ,        -    .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/dbfd2cf5-10ed-402e-a8ff-a4f1b02c9731.png",price:"1600000",size:"824"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/158d8f9d-de00-4dc8-94c6-7493e96820df.png","https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/ebb43b76-609a-4587-8359-832c69e80d24.png","https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/8db8c027-1d29-4984-b75e-8328187a0001.png","https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/1dde3b0e-19af-42d1-a3fa-cb3bcf24143c.png","https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/b7a63974-4fca-4019-9d39-3116da8d6a01.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/005067c0-a845-4b74-a8b4-6a45bef84727.png","https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/15cd3914-0ad4-422d-ae9a-10ea41596ba2.png","https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/6446710b-f2ad-4a71-86e2-a010c82d6707.png","https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/ddfa17c8-0a39-4d53-a1e9-0d6ae9a50dc2.png","https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/0f29b20b-cdaf-415a-bdd2-a0f7e8769ceb.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/fed9b26d-96e0-454c-a408-be79235088eb.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/e5abf971-78cd-4b8f-beab-3c7a62075ab2.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/125000dd-e7ca-463c-acd7-347e43a48459/d152597a-d5d9-4c35-bd4d-ce7226fb8301.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"20",sum1:"320000",percent2:"50",sum2:"800000",percent3:"30",sum3:"480000",percent4:"0",sum4:"0"}}},{_id:"653f4fa436b4893bc7806e41",userId:"6533fb61fa2662129d9aef1c",developer:"Missoni",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/77df3177-80e4-4956-b60e-73f725107bb5.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"4",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"The Urban Oasis",priceFrom:"2618851",sizeFrom:"1113",selectedLocation:"Business Bay",ownLocation:"",lng:"55.25980765713067",lat:"25.183919403098194",exterior:"https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/bebf7353-f835-477b-9369-41a65ee4ea34.png",description:"Urban Oasis, in Dubai's Business Bay, inspired by Miami's coastal style, is the second residential project globally designed by Missoni for both interior and exterior. Developed by Dar Al Arkan Properties, it's currently under construction, with an anticipated completion date in December 2023.",descriptionRu:"Urban Oasis,     (Business Bay),                Missoni.  Dar Al Arkan Properties,   ,     2023 .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/11d7a330-7eba-4591-96a7-14c665fb6cf1.png",price:"2618851",size:"1113"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/458db34a-7c2f-4ec7-bf1c-f25a4aca1f65.png",price:"2700000",size:"1182"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/1d93aada-ff0b-4758-958c-525c6d921874.png","https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/02edf5c3-ac83-4054-86b5-35838bb2af6e.png","https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/a64fd346-e711-403d-8b53-d43cef795f25.png","https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/b8ab3c34-44ec-4a49-8c64-b9014264ca2b.png","https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/aeb93f70-54b6-42e9-8e91-b7501aaaf9d8.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/76523cb0-4fdc-4560-8b2c-738846db0ae5.png","https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/e9a42b5e-1150-4500-a64d-262ccf52ccbc.png","https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/882b671a-3a78-492b-b737-472de2790a2d.png","https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/dc259b04-2aea-44ef-abba-45e4f32c2844.png","https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/924d173b-fd06-4365-b40d-73bd545ead5b.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/7d1570cd-54a3-4607-bfb9-208073debfa9.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/fa829ddf-27f4-4729-a258-93836bfb9da3.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/203a0b4e-bb07-4c2b-815f-489f6b3bbf96/471bc4ab-0733-4679-b8db-31fa3565b8f7.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{2:{percent1:"40",sum1:"1047540.4",percent2:"60",sum2:"1571310.6",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"653f51c336b4893bc7806e42",userId:"6533fb61fa2662129d9aef1c",developer:"DAMAC Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/d0e8506a-0d79-45b4-921c-5d6e5fa3c3a0.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"4+",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Venice",priceFrom:"11850000",sizeFrom:"10672",selectedLocation:"Damac Lagoons",ownLocation:"",lng:"55.24195939272688",lat:"25.01567330311438",exterior:"https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/2b979209-7c40-451c-a13e-6aaa10f4cdca.png",description:"Welcome to the latest cluster in Lagoons by Damac. This is Venice. Offering a choice of fantastic 6 -7 bedroom villas, this is a dreamy cluster representing Venice in Dubai. Come home to fantastic waterfront living in a coveted and hot community in Dubais prime location.",descriptionRu:"    Lagoons  Damac -   !    6-7     .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/4221daa3-ef4e-4fc8-a837-e2343d034824.png",price:"11850000",size:"10672"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/9e0893c6-cf45-4f19-ad5f-e774aef6e425.png","https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/8bda7ff5-a916-4e6b-95bb-6df3d1f59549.png","https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/052a1c7d-acff-4952-a66e-263592fc5ce0.png","https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/a2e90d2e-c4a7-4443-a06c-1428449ab8b1.png","https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/6a91a74b-54c6-4d00-be15-e6c083028a85.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/c7a68748-d38f-4a73-8e9f-3eb016b0a740.png","https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/9929ae20-a292-433d-a257-15958cbbdfa6.png","https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/0778ec16-7bef-4853-9d33-33fc590ff40f.png","https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/a73cfdab-5beb-483f-a6e5-f91e7aa1c734.png","https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/a40ae75b-1ccc-4ae7-b2e3-73f573ac7410.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/8875122b-f8ae-44fd-bb55-b865e5cbb7d0.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/bcebfadf-24f9-4fef-85c8-24a06a482cf4.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f2de87cf-98c3-4dd0-924c-38c22e5a4d35/b92219a3-2cf5-4182-b0ca-84d61a934e30.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"40",sum1:"4740000",percent2:"45",sum2:"5332500",percent3:"15",sum3:"1777500",percent4:"0",sum4:"0"}}},{_id:"653f537436b4893bc7806e43",userId:"6533fb61fa2662129d9aef1c",developer:"Danube Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/000e29fc-af1e-4a58-87da-3f0db41f46e6.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"2",selectedBathroom:"1",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Viewz Residences",priceFrom:"999000",sizeFrom:"420",selectedLocation:"Jumeirah Lake Towers (JLT)",ownLocation:"",lng:"55.17689604123165",lat:"25.10450112178596",exterior:"https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/0eb396e5-0f7b-4439-a1b7-8079bbb5663a.png",description:"Viewz Residences is a new residential complex located in the well-developed infrastructure area of Jumeirah Lake Towers. The project is developed by the renowned company Danube Properties, which drew inspiration from the impeccable design of Aston Martin when creating this project.",descriptionRu:"Viewz Residences -    ,    Jumeirah Lake Towers    .     Danube Properties,     Aston Martin    .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/8502a9d9-fc4d-4898-8756-b0b898cde225.png",price:"999000",size:"420"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/85c6eea8-0384-46ee-988a-e676b3d13b6c.png",price:"1150000",size:"450"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/8b4df5c7-bafb-4950-b298-268892e40530.png","https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/23c41659-a2fb-4207-95e9-449e83e58e88.png","https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/60db1c8f-47fc-4794-a407-899d5a63cffe.png","https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/91d370a8-881c-484b-9896-25b9c62d7ab3.png","https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/18d8fe43-e88f-4251-a2ed-e8f523525cc5.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/6a9ca8dd-3c34-4566-9b74-266c412b1ba7.png","https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/8624e7fa-62ef-4f65-9b7a-50a0aedcff7e.png","https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/ad23a4d8-f803-4c3b-9137-a214861383e0.png","https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/748a72ab-c62a-452d-9937-0e8026101799.png","https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/81a07e8d-e05c-4cee-85f9-7361f693f3f8.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/2c6d5022-6fa8-4bd7-8e3e-a0628793b02c.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/e0deaed4-697f-4af8-994f-912384794549.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6fb860c9-1df1-4678-959f-4d68eef67c2d/777b99b0-15d2-4b56-8b1f-40f9bf4bdb5e.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"10",sum1:"99900",percent2:"55",sum2:"549450",percent3:"35",sum3:"349650",percent4:"0",sum4:"0"}}},{_id:"653f566c36b4893bc7806e44",userId:"6533fb61fa2662129d9aef1c",developer:"Amali Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/cbf1de2d-5671-4ed5-a659-683cd569960f.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"2",selectedBathroom:"4+",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Villa Amaya",priceFrom:"90000000",sizeFrom:"13140",selectedLocation:"Palm Jumeirah",ownLocation:"",lng:"55.12616547786548",lat:"25.098150467226365",exterior:"https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/7cde3216-1788-4926-955c-145102a0f464.png",description:"Introducing Villa Amaya, an exquisite architectural masterpiece nestled in the prestigious enclave of Palm Jumeirah, Dubai. This magnificent villa, crafted in collaboration with Amali Properties, redefines opulent coastal living.",descriptionRu:"  Villa Amaya -     ,     Palm Jumeirah, .   ,     Amali Properties,        .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/f1b95645-30f9-48b6-8c0c-3e0885dcc320.png",price:"90000000",size:"13140"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/e591d349-9ab9-473e-82b3-22269b4fcdf9.png","https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/682956c3-2ab9-417d-948a-9e6fc722826e.png","https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/e1928049-465a-44dc-a26a-01e639d22403.png","https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/57d8aeed-7a5b-4c43-9d6d-94cffa4a3a2f.png","https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/465d7810-87ef-437b-bd1e-b039c2714ce2.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/6db3fa16-3b01-49bb-9c63-6f2c4e0a2ecd.png","https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/bc3ec623-61d3-4c5e-af22-df6b4b805cc4.png","https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/34499fda-a449-46dd-9232-179ae65bd02a.png","https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/609582ee-35ba-47f3-a9ad-ecd3a9c4459b.png","https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/f60fdb51-f640-49a7-9ccc-f5bd111c9afb.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/9cc9a900-2364-4863-bc55-57321142e167.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/fbaa4740-e5cd-4ea0-9ec6-dd71529f5994.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/62c2fb4d-474d-43a7-9707-4a1cc4bba82c/da193aa4-561f-49c8-83a9-deb1a3608384.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"30",sum1:"27000000",percent2:"30",sum2:"27000000",percent3:"40",sum3:"36000000",percent4:"0",sum4:"0"}}},{_id:"653f68e836b4893bc7806e46",userId:"6533fb61fa2662129d9aef1c",developer:"Meraas",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/203c0229-e026-48ab-9623-c5021a474378.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"2",selectedBathroom:"2",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Jomana",priceFrom:"7150000",sizeFrom:"2189",selectedLocation:"Madina Jumeirah Living",ownLocation:"",lng:"55.18388654689198",lat:"25.131154906783234",exterior:"https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/5cdaea04-0e8b-4603-b83d-670e6f051acc.png",description:"Jomana is a new premium residential complex by the developer Meraas. The complex is part of the extensive Madinat Jumeirah Living community and is located in the Umm Suqeim area, renowned for its well-developed infrastructure.",descriptionRu:"   -   Meraas  Jomana.      Madinat Jumeirah Living     Umm Suqeim,    . ",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/7eac1c2a-addb-45fd-b67a-231db2f8805c.png",price:"7150000",size:"2189"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/432bccda-e7d2-469e-93bc-69b5cb71cce0.png","https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/460acc18-19b5-465c-94ab-aa0f0cb595a2.png","https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/99e489b0-ddbb-4ff8-88d9-e7564e709f5c.png","https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/a90eb6b7-4756-4fc6-9318-92a148edd7b9.png","https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/f319682d-e853-4b0c-b948-ce7cee45a00b.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/449f8877-2492-47fb-9b4c-2afc13507574.png","https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/266fa6b7-f780-4cb3-bfbb-648b5c59b33d.png","https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/20d7bfd2-a9d3-435b-8b61-d92e999d8fa4.png","https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/1b738a8d-c572-4707-98ba-3841fc252dfc.png","https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/7f35b2ad-9607-4a58-bcf9-760f22b45337.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/d8a067e1-5dfe-4d71-a528-869409ad2e9c.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/b7afb979-62c1-4814-abaa-15f0b71d6b44.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/572ead13-3d5c-4ae4-8cae-56ca2efdea13/aefaf89d-3cfb-462a-a32a-d437f7422b6e.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{3:{percent1:"20",sum1:"1430000",percent2:"50",sum2:"3575000",percent3:"30",sum3:"2145000",percent4:"0",sum4:"0"}}},{_id:"653f6b2b36b4893bc7806e47",userId:"6533fb61fa2662129d9aef1c",developer:"Meraas",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/263db7bc-8942-48c9-b3da-4eade9d67f63.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"3",selectedBathroom:"2",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"La Sirene",priceFrom:"2927500",sizeFrom:"1211",selectedLocation:"Jumeirah",ownLocation:"",lng:"55.251457512297975",lat:"25.241773841060123",exterior:"https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/8269454c-fddb-41c6-a648-bc80894a5668.png",description:"This is a complex of exquisite apartments with 1-4 bedrooms that offer an exclusive beachfront lifestyle, providing a life away from the urban hustle and bustle, yet close to the central areas of Dubai.",descriptionRu:"     1-4 ,        ,       ,         .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/dd19bd42-add7-44cb-886e-03b8fedba398.png",price:"2927500",size:"1211"}],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/91af49a1-2a91-4954-ac11-40e423c804bd.png",price:"7300000",size:"2319"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/64d594d6-a3d3-4afb-9d10-861adb8dc7e0.png","https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/22e05b6b-45a6-4a51-a41c-a40997fc9115.png","https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/42766ece-7f45-4742-896e-f79c44ae5548.png","https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/75daaf8a-ffc7-4402-a635-5808d2670603.png","https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/1e1fc7f8-3c20-445e-970a-c327b9510783.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/fe8c80cc-47b4-4fc4-b2e0-20cb70f8732f.png","https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/bd73ea85-6542-44db-80c8-a425c466af0f.png","https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/ace6a62a-cc2c-46d4-9d09-7debaf7f01d9.png","https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/17c248dc-8db1-4afd-a49d-63845fd1ae58.png","https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/587ffcca-2214-482d-8925-e88aba671eea.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/36fbe798-a77f-4150-b08c-1031d296f07a.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/40139d42-fc5a-474b-97a7-00470a4cb56d.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0864542a-d58b-47fc-a0b9-be36d32f000e/4d1af56a-ae52-40b6-8cf2-7dbbf4434a96.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{2:{percent1:"40",sum1:"1171000",percent2:"10",sum2:"292750",percent3:"50",sum3:"1463750",percent4:"0",sum4:"0"},3:{percent1:"40",sum1:"2920000",percent2:"10",sum2:"730000",percent3:"50",sum3:"3650000",percent4:"0",sum4:"0"}}},{_id:"653f797d36b4893bc7806e48",userId:"6533fb61fa2662129d9aef1c",developer:"Dubai Holding",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/b4dade8a-2303-4141-97df-6fdfec6c4a79.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"2",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Lamaa",priceFrom:"1870000",sizeFrom:"736",selectedLocation:"Madina Jumeirah Living",ownLocation:"",lng:"55.19201401409099",lat:"25.131432507845837",exterior:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/161e1789-9116-4780-a09a-224ba6f845e8.png",description:"The Lamaa residential project is part of the premium Madinat Jumeirah Living complex. This project consists of a collection of 4 buildings unified by a single architectural podium. Dubai Holding, one of the leading developers in Dubai, is the developer of this project.",descriptionRu:"  Lamaa     - Madinat Jumeirah Living.       4 ,    .      Dubai Holding      .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/00713c06-23b4-43bf-b434-ef42191903cb.png",price:"1871100",size:"738"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/d4aa9c73-24a1-49d0-9170-68494f0540f1.png",price:"1879605",size:"738"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/efa74147-234c-4a44-a5b7-398dc0664712.png",price:"2012040",size:"735"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/b8439277-e79d-4d22-a28c-26f616ffe8bc.png",price:"2081295",size:"765"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/a7d0172a-1d95-42ca-9b30-cfe152eeeca6.png",price:"2092230",size:"766"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/69e3aa5a-228b-4014-b5fc-356a49595e9d.png",price:"1870000",size:"736"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/15575350-3814-40c1-8148-f9f2cc7c76d0.png",price:"2739825",size:"1115"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/55f6a6e6-24c9-4814-a77a-46c564f8aac3.png",price:"2754405",size:"1115"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/b3601c98-6b2b-45de-887f-0c2dbe81027b.png",price:"3024135",size:"1185"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/236dd9eb-c69c-4832-8942-8ac37535b576.png",price:"3100000",size:"1185"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/a21275a1-ffbe-4425-ae11-50aa4c1f0d25.png",price:"3185000",size:"1380"}],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/f2d33210-75d8-4514-9087-2c614385de76.png",price:"4480000",size:"1831"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/0f631ff8-91c6-46fb-a538-fbb12378cd68.png",price:"5149170",size:"1827"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/55df8583-1f6e-4742-8e29-345a12c34385.png",price:"5264595",size:"1873"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/f03cfe31-7d76-452a-a536-8c77c650df9a.png",price:"5296185",size:"1819"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/fe15ef23-d7df-465e-93e5-988ae430005a.png",price:"5322915",size:"1819"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/f484b99e-d4ab-4720-8b0d-38ea39c8df85.png",price:"5458750",size:"1943"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/f3e2e070-4c90-45b0-a436-d9bbd670c12c.png","https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/9415fb0a-5ae3-422c-8402-0854e8355fcd.png","https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/8b095c5c-f21c-4df8-b6ab-a35bd3b17ef2.png","https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/46b28fcb-5bb0-43b8-a421-060a3bba927b.png","https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/81487fb1-f6fb-4a18-856a-2919a636b329.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/d9270124-8138-4b98-b13a-7a3ab4568d93.png","https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/41dfca10-693f-401d-942a-9429d6c42034.png","https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/fdcafba4-3d01-4142-b452-6274d208b744.png","https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/c3e2eabe-c655-4ae9-b5f6-c649cd9527d3.png","https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/81053f3d-238e-4c99-a73f-205d0301b9c4.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/19a428e2-a4fa-46d7-ba87-f903694003ae.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/d6ba5eec-2b99-4340-896b-5bb258fa5f44.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e91475b-425c-4511-9d71-9ea58e535cdb/8b95ddb9-6ab6-4ab5-a838-ee796ce23767.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{1:{percent1:"20",sum1:"374220",percent2:"30",sum2:"561330",percent3:"50",sum3:"935550",percent4:"0",sum4:"0"},2:{percent1:"20",sum1:"547965",percent2:"30",sum2:"821947.5",percent3:"50",sum3:"1369912.5",percent4:"0",sum4:"0"},3:{percent1:"20",sum1:"896000",percent2:"30",sum2:"1344000",percent3:"50",sum3:"2240000",percent4:"0",sum4:"0"}}},{_id:"653f84a636b4893bc7806e49",userId:"6533fb61fa2662129d9aef1c",developer:"Meraas",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/05bf2f33-5508-40b4-ab64-e32e6c38a203.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"3",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Al Jazi",priceFrom:"1835670",sizeFrom:"735",selectedLocation:"Jumeirah",ownLocation:"",lng:"55.194351622782925",lat:"25.13572102422704",exterior:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/b281dd6f-6fc7-45e6-a454-515efddf28fb.png",description:"Near Al Jazi, residents can enjoy a perfect blend of green spaces, including landscaped podiums, shops, gyms, spas, fitness centers, nurseries, play areas, inner courtyards, parks, open spaces, and rooftop terraces with barbecue areas. Work, life, and comfort in the UAE.",descriptionRu:" Al Jazi       ,   , , , -, -,  ,  ,  , ,       . ,     .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/93f18aba-fad3-41a0-bfbf-38453c167327.png",price:"1835670",size:"735"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/4e0d3c6d-5c1d-450e-b3af-e0ec4683d12a.png",price:"1847280",size:"737"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/a3b6985e-c8da-4a39-b19a-70ccbf88e856.png",price:"1866630",size:"734"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/5d1e28e8-f6ae-4d2e-97da-a830df8dd450.png",price:"2003370",size:"750"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/f27dfbba-8f2a-45d3-afaa-73bca1b65d9f.png",price:"2630000",size:"1094"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/6b5af415-c7c5-43f1-bdb2-3d8cdededd44.png",price:"2858640",size:"1169"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/5205051c-7d02-4923-873c-7197c5d0e86f.png",price:"2941200",size:"1099"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/e90eedf6-9304-41aa-9d4d-5bc5571e2aa9.png",price:"3602970",size:"1308"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/b28b18e6-1b94-4f4f-9fb2-6c2b68a733e1.png","https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/816029a6-35f9-4c42-9c53-d696b2690b59.png","https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/9166efcf-942f-4231-9cce-2a6ef52d4858.png","https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/5250716b-0c81-477c-b07e-c4090280d156.png","https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/28b4be22-7d45-48c5-8777-3a1f7d51302f.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/fc7baa7e-25bf-4f66-9de5-0162a99aaee8.png","https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/90054274-2a7d-4622-a3ca-feca27641795.png","https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/eb7dc05a-8ac8-440e-a0bc-129652abdbe1.png","https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/e26ae3b8-5897-4883-8b2c-fcb2efcf1ab8.png","https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/a4a0a8ac-c82f-45b0-985a-316ce09ee98f.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/9f31821e-22b4-48bc-8bea-7d1c19cfd558.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/929951e4-cf0f-4051-9a7b-66d0821fdb13.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7b9a71db-f659-49d3-8354-ac77dae48152/9a9b9eba-0803-43c9-bacf-751ff267e0d9.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{1:{percent1:"40",sum1:"734268",percent2:"10",sum2:"183567",percent3:"50",sum3:"917835",percent4:"0",sum4:"0"},2:{percent1:"40",sum1:"1052000",percent2:"10",sum2:"263000",percent3:"50",sum3:"1315000",percent4:"0",sum4:"0"}}},{_id:"653f8c2a36b4893bc7806e4a",userId:"6533fb61fa2662129d9aef1c",developer:"Nakheel",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/112fed18-4069-4472-ba31-097eb44f6976.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"1",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Any",projectName:"Palm Beach Tower 3",priceFrom:"5745492",sizeFrom:"1356",selectedLocation:"Palm Jumeirah",ownLocation:"",lng:"55.155116120763346",lat:"25.10083570793309",exterior:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/c9a650b0-9bcd-4173-868f-0279d02f3a51.png",description:"Palm Beach Tower 3, in the prestigious Palm Jumeirah area, offers luxury living. Developed by Nakheel, this 51-story tower boasts 1-3 bedroom apartments with sophisticated design. Noteworthy are the exquisite interiors and furnishings by B&B Italia.",descriptionRu:"Palm Beach Tower 3,     ,   .  Nakheel,  51-     1  3    .        B&B Italia.",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/387e1251-4ee8-4b16-9912-802eb4650ab6.png",price:"5745492",size:"1356"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/5c27c496-ce23-4c98-b171-1d571be1d0d4.png",price:"5745492",size:"1356"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/727f5095-09ac-4c0a-ab1e-63c143316ea4.png",price:"5879142",size:"1559"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/ff83573d-1b84-4d39-b763-b3cda2070179.png",price:"11400000",size:"2578"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/ba06a3bd-c38a-40d1-a2e0-fccf58e85100.png","https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/d60be65f-e3c9-4dac-b76a-92631b1f9e01.png","https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/8ba0a273-f720-45d8-9ab7-f5c87983442e.png","https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/b21cce55-03af-4662-84a0-c7a801b3824f.png","https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/9f0308df-01ca-48a3-af38-c9babe857575.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/43782d38-f035-4636-8db0-a37002c219ae.png","https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/1db208fd-3c2b-429f-91c9-23d2cf0dce6e.png","https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/70428de7-9a10-4ba4-aeb3-3810fa29aa83.png","https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/4d6633e7-6fb1-4e30-adb7-b6f0b27a04d0.png","https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/62d21739-2a97-4ce6-b262-1a515e02f4d0.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/5c605d14-2541-477b-b4eb-4cd98cc1a624.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/4309de6a-f056-4a3b-9979-75c92dd04789.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/9f40ce49-bf17-482d-a7ca-c95169e49ba7/48b0b665-692a-418c-83d4-12cdeb434347.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"40",sum1:"2298196.8",percent2:"20",sum2:"1149098.4",percent3:"40",sum3:"2298196.8",percent4:"0",sum4:"0"}}},{_id:"653f960c36b4893bc7806e4b",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/ad772cff-4672-4505-853c-61663d722111.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"3",selectedBathroom:"2",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Park Horizon",priceFrom:"1390000",sizeFrom:"654",selectedLocation:"Dubai Hills",ownLocation:"",lng:"55.23784044252389",lat:"25.10149006526593",exterior:"https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/63f6cc08-c199-48cb-8631-32ed2d991913.png",description:"Our complex offers 1-3 bedroom apartments (60-212 sqm) blending Middle Eastern and modern design, reflecting the premium location. Thoughtful layouts, abundant natural light through panoramic windows, and high-quality finishes create unforgettable living spaces.",descriptionRu:"    1-3  (60-212 . ),     ,   .  ,              ",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/a7766c45-58e2-43a5-aaab-890ec848c546.png",price:"1390000",size:"654"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/0c35295a-5be9-4ada-add1-8e297744aa5e.png",price:"2070000",size:"1012"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/78080300-ab94-4049-b329-e9dd6ed7476e.png",price:"2300000",size:"1036"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/94d5bf93-f379-4b7c-be4d-51f1cae5aade.png","https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/64471a34-64d5-4183-bc84-3719bf6ebda9.png","https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/7b72ce14-3304-433a-98ee-d2c936064c83.png","https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/a2d62a14-1e88-4b76-99e8-bfcf3de3d043.png","https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/99e85d1f-dd0c-4192-9e2f-a6e098a25719.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/142a2d17-4855-4b29-a54e-e420646415ea.png","https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/c0c09e0b-cf74-4ba0-9026-23c6ff656219.png","https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/c5dc3903-ddd6-455a-ae39-aa5e1941ec0d.png","https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/cc388b0f-558a-459b-851f-7877d307271b.png","https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/b343222b-1ac3-4acc-880b-190259d66c4b.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/e9c29580-16a9-432d-ab96-210ec1191a61.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/4c4c0cdb-aa86-4c35-b57d-99591c2041d1.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c50e85ed-819d-461e-942d-f9ed423fab13/80aaa899-7be5-4a8b-8080-860b16caca91.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"10",sum1:"139000",percent2:"70",sum2:"973000",percent3:"20",sum3:"278000",percent4:"0",sum4:"0"},2:{percent1:"10",sum1:"207000",percent2:"70",sum2:"1449000",percent3:"20",sum3:"414000",percent4:"0",sum4:"0"}}},{_id:"653fa52936b4893bc7806e4c",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/81d9fa83-40cf-42bf-bdb0-fd75aaa864ea.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"2",selectedBathroom:"2",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"17 icon bay",priceFrom:"3900000",sizeFrom:"1669",selectedLocation:"Dubai Creek Harbour",ownLocation:"",lng:"55.35030243396557",lat:"25.201559314318715",exterior:"https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/ede4a16f-a52d-498e-aa9e-0a89297a139e.png",description:"17 Icon Bay, which offers an incredible view of the Dubai Creek Tower and the Ras Al Khor Wildlife Sanctuary, embodies the essence of Creek Island. This magnificent building consists of apartments with 1, 2, and 3 bedrooms and is adjacent to the island's park area.",descriptionRu:"17 Icon Bay,        -     --,      .   ,     1, 2  3 ,     .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/913c4ac1-2572-406f-aaec-17a0a932f844.png",price:"3900000",size:"1669"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/5efb553f-d785-4085-a994-c8cd242d7c3c.png",price:"4050000",size:"1687"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/6b2c38cf-cd5c-4ec2-b247-e77c3f08a624.png","https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/b5bce0de-da37-4411-b747-733bee3b68a7.png","https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/7152d96f-7d06-402f-b627-f926f8c0ac1e.png","https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/e80c686a-182e-4389-acb0-b37312f3e119.png","https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/fe65580f-c5dd-43b3-9d20-00a740af528e.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/34c764d0-27b2-422d-b47b-ae93b18eed73.png","https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/ee357254-cbc5-4246-99e1-31af02f3596f.png","https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/54b72655-2adb-4735-bbde-1b0f3b9912d8.png","https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/398f8f36-8974-442e-872c-a04ecc15240d.png","https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/be683a7d-d2b8-4f12-b7c5-5db3a60c3754.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/af06a6b4-d882-48ef-a634-8d9742d98ff4.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/a0c82744-ca41-433f-afe3-734439f81b8f.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/706c84c7-eb73-4ea0-9ea2-13eb55b0fc59/239a4c7f-c33f-450a-b32f-83f587894e53.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{3:{percent1:"60",sum1:"2340000",percent2:"0",sum2:"0",percent3:"40",sum3:"1560000",percent4:"0",sum4:"0"}}},{_id:"653fba7236b4893bc7806e4d",userId:"6533fb61fa2662129d9aef1c",developer:"AHAD Group",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/0ec826a9-e032-4467-8f9f-659adf05e0f4.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Ahad Residences",priceFrom:"1050000",sizeFrom:"417",selectedLocation:"Business Bay",ownLocation:"",lng:"55.26597637700974",lat:"25.18609066904194",exterior:"https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/8e45a179-e690-448a-bd7d-70d9c7050ca8.png",description:"AHAD Residences, by Ahad Group, is a premium-class community with a 31-story contemporary building in Business Bay, Dubai's sought-after business district. Its central location near key business and leisure hubs makes it a popular choice for residents and businesses.",descriptionRu:"AHAD Residences,  Ahad Group, - -    31-      Business Bay,  .                 ,    .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/23c8058b-8793-41d6-856e-b2a2f56d135c.png",price:"1850000",size:"720"}],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/0d4434f6-a829-49d9-bab5-3e54c98a2fb4.png",price:"1050000",size:"417"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/f0ab1183-ca85-4f92-b7b1-a9a0733c7096.png","https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/cf7fb56b-a37d-4e22-9c16-3ef308776c37.png","https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/048d9bbe-1514-4d51-aa7a-f932806e0f9f.png","https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/277974ec-7c74-4812-847b-0ce9046c3abb.png","https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/382d58fe-9436-4567-a9c5-02bd5db03bdf.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/b6b3f718-36e8-463b-b2a2-41bf142beac7.png","https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/4af1b268-375b-4a58-9160-056b5270061e.png","https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/0322e09f-5e17-4baf-9494-50c72da61470.png","https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/f3076be8-da31-4c0a-a3ef-bd9f50fae320.png","https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/41b7413b-00a1-4b50-a9dd-32aacdeccced.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/781e8b2c-4510-40a2-a5c3-ce8174bd5eb9.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/36a55c5d-74cb-4a2b-a852-03eabb7c4e17.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/297ef58d-20ac-4e37-a17a-8a1a9eef7870/f41c3c16-8353-42d0-abff-7c7113ea6928.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1850000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"},Studio:{percent1:"100",sum1:"1050000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"653fbe2736b4893bc7806e4e",userId:"6533fb61fa2662129d9aef1c",developer:" Seven Tides",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/f530f364-ebe0-4da7-af3d-2b37a4e47979.png",selectedType:"Project for investment",selectedYear:"17",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Anantara Residences",priceFrom:"2900000",sizeFrom:"1151",selectedLocation:"Palm Jumeirah",ownLocation:"",lng:"55.152288786019334",lat:"25.13145619628406",exterior:"https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/85094344-fa96-412d-a0a6-d0d288ee1b66.png",description:"Anantara Residences is near top Dubai hotels (e.g., Waldorf Astoria, Rixos, Taj) and acclaimed restaurants (Palm Avenue, Luchador, Highlights). The Aquaventure Waterpark and Palm Jumeirah's monorail to mainland Dubai are a quick 10-minute drive.",descriptionRu:" Anantara      ,   Waldorf Astoria, Rixos, Taj,    ,  Palm Avenue, Luchador  Highlights.  Aquaventure   -       10  ",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/b9cfd040-13c5-43be-a696-a701b42fa551.png",price:"2900000",size:"1151"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/b6884112-9b28-4006-b7cf-69af5aa98330.png","https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/af70a098-ed35-4dca-b657-119a213bd4fa.png","https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/896ff9b5-8abe-439f-9bed-cb9cfcaa9eaf.png","https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/a982414e-0178-49c0-a121-57815a8c3813.png","https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/6da55127-a0bd-4ac6-96eb-b46473b658a3.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/5b2a7205-1d2f-4c4c-b64c-2d1ae311c90c.png","https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/0c4310d2-401e-44c1-80ac-8440965ae66b.png","https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/3eaee176-3f0e-4a53-a759-ec456bcc8678.png","https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/11428978-7d03-4bdd-84c3-ad206aa6002e.png","https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/a41f3fad-781e-42e5-ac69-e8c500590713.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/09b64ab1-09c4-45e2-b736-b721965b0d39.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/542c1408-237d-4586-8aec-ea1191b04841.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/667b3328-4f17-4e2c-89d6-3c78a9f723c9/649e8624-f105-4a99-8efb-26934d7aeefd.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"2900000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540a9806e2d1136bf2982e6",userId:"6533fb61fa2662129d9aef1c",developer:"DAMAC PROPERTIES",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/81c63f97-602e-4f0e-b43d-18463fa80077.png",selectedType:"Project for investment",selectedYear:"20",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Villa",selectedStatus:"Ready",projectName:"Aquilegia",priceFrom:"2100000",sizeFrom:"2143",selectedLocation:"Damac Hills",ownLocation:"",lng:"55.371970902415576",lat:"25.00008780091533",exterior:"https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/66bd7da7-edad-432c-9120-ca3ffe090796.png",description:"Just Cavalli Villas - Aquilegia is the Luxurious Residential Villa spread in 1262 Acres with 122 Villa at Prime Location of Dubai, Dubai. The architecture of the Villa has a pre-processing look with a touch of uniqueness and modernity.",descriptionRu:"Just Cavalli Villas - Aquilegia -    ,   1262      122 ,      , .          .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/b49cc008-9afc-48f0-8913-8d0253f94c68.png",price:"2100000",size:"2143"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/6f60c00d-897d-419c-b58b-27ffdea6ac12.png","https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/d1ee4c07-82e5-4ee0-b6a8-23994ed4a338.png","https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/828bdfb5-7c0a-447d-8548-362eb6e61007.png","https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/3c3b52cf-1015-4edc-b536-8bece52742ec.png","https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/2418ad3e-fc11-414c-befd-d6536f51532d.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/e0cfdecc-c5ae-4872-b9e2-c5d060abafad.png","https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/ad45b815-caa9-4c4f-8813-ea03ea9a8a45.png","https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/21855266-e499-4023-aace-84873d115a6a.png","https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/d782137a-b06a-413b-9dc8-ee4d86fdc88b.png","https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/c6340ba3-c56d-4fb8-9972-711ee45913a1.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/96eab3a7-f464-429d-99dc-af8d392ac104.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/85070594-a1d4-4940-b03c-87ceffe4f0dd.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/d01d5860-a6b1-46cf-9424-696916821c30/71b46e63-0d46-4484-8bb6-9fe88043583d.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{3:{percent1:"100",sum1:"2100000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540abae6e2d1136bf2982e7",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/2ec6c1d8-33bb-4b71-b597-529add7b919b.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Artesia",priceFrom:"1150000",sizeFrom:"739",selectedLocation:"Damac Hills",ownLocation:"",lng:"55.24507373980695",lat:"25.019965941791817",exterior:"https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/0927e6a8-0edc-423c-a6b3-8f13c7fb7a98.png",description:`Artesia DAMAC Hills is a prestigious golf community in Dubai's DAMAC Hills, covering 42 million square feet. It's built around the renowned Trump Golf Club and received the "Best Golf Development in the World" award at the International Property Awards in London.`,descriptionRu:'Artesia DAMAC Hills -  -  DAMAC Hills, ,  42 . . ,   -    " -  "     .',plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/834d48cc-d97d-40ca-ac26-fef33c873062.png",price:"1150000",size:"739"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/9a715de4-26fe-4b17-9473-985d3fb276e0.png",price:"1200000",size:"816"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/41f2e5ad-540b-4e04-b945-018b46f28d04.png","https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/08026698-8112-4cab-bd9c-51ac907b8eec.png","https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/498ba662-5c05-4f94-9816-77ebba7d268f.png","https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/00d0028e-65aa-4584-8cae-dcd8f499a272.png","https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/a3964a38-84d8-4ad0-bf73-182c3c2548cf.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/063f99bf-7b70-4378-a5e0-0d0a8087b197.png","https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/3e8cf50e-8d3d-4eed-8f05-a3890c898342.png","https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/fd4763a6-dbf3-4e98-94fa-f99e310f2cd5.png","https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/200420db-8b02-4815-a553-e030996e42d2.png","https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/3c59cf6c-ad24-4f55-b39c-b14a25242c92.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/c6854b4b-c21d-40cf-b775-9b21852e149c.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/954f72a5-26c8-4933-815d-29dc3e1f1bc9.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/aedd3417-82de-40d3-b650-ed169a2c8218/c0c8cf46-fd7c-482a-b26d-b09879dea519.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1150000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540af7b6e2d1136bf2982e8",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/8b2f4a96-1451-4faf-ad51-3f234492146c.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Town house",selectedStatus:"Ready",projectName:"Avencia",priceFrom:"1500000",sizeFrom:"1732",selectedLocation:"Damac Hills 2",ownLocation:"",lng:"55.38516844704684",lat:"25.01761392991709",exterior:"https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/7fda589d-0b66-40a2-8828-1c9d6f089523.png",description:"Avencia Residential Complex in DAMAC Hills 2 offers villas and townhouses with unique features, unified by a common architectural concept. Featuring panoramic windows, minimalist forms, and natural facade shades, it creates a rural living atmosphere.",descriptionRu:"  Avencia  DAMAC Hills 2       ,    .    ,      ,    .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/fe3414b1-81a7-4dfd-a572-1ef2cef6d2e6.png",price:"1500000",size:"1732"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/c95d5a4f-48b9-4cec-8581-a26e3e4a065e.png","https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/8142a502-b723-451c-a238-e7064f08407e.png","https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/bd24e726-86e4-4267-9665-18b64c61a214.png","https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/fa53256c-8416-43b4-8942-02a81d0c3e13.png","https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/05f3d153-0fe0-4d7e-9ac9-7ee10d618c14.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/93bbfe0b-6a91-4479-a320-8e697eefab35.png","https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/378f282f-01f9-4e1f-841a-84af17e386af.png","https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/123def49-8c0c-48e6-b2b8-c641324c4401.png","https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/f73d8526-2fca-4a61-8efa-573348610edf.png","https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/a7fa9ac6-1591-4067-b8ce-27fa65f62b9d.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/861e7756-d242-4549-bf05-5ba5557497a3.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/4f2b469f-9e62-4c02-8186-09f05b455ec3.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7a2668ca-b89b-4576-8851-22052a2a6301/3393daa0-ecf4-4584-9d2a-6d5eef9d3b8e.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1500000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540b2b66e2d1136bf2982e9",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/5cc90670-3377-414d-8dbb-a5704e1f64a4.png",selectedType:"Project for investment",selectedYear:"22",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Carson Towers",priceFrom:"600000",sizeFrom:"413",selectedLocation:"Damac Hills",ownLocation:"",lng:"55.242495165284964",lat:"25.023540298907484",exterior:"https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/7d7ea810-4e26-409e-be93-d3f697634b62.png",description:"Carson Towers by Damac Properties offers studio, 1, and 2-bedroom apartments with stunning DAMAC Hills views and great outdoor amenities near Trump Golf Club Dubai.",descriptionRu:"Carson Towers  Damac Properties  ,           DAMAC Hills      ,    Trump Golf Club Dubai.",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/2bc9e348-90b2-45da-9054-34799e297769.png",price:"600000",size:"413"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/462a6baa-b144-473c-87a9-aa2909c7f82f.png","https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/03521ee8-797d-49fa-82a6-f013b276e777.png","https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/c123ef19-1524-499e-b0d2-e7ef5db964f4.png","https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/a2dfa43c-89cd-4d34-ac44-59b02d2c51db.png","https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/f6bdd905-ab49-437a-974a-da7d8eadaa16.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/5ad04fb7-2682-4fce-b66d-fde12fc6d2ca.png","https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/9daa7dbe-a5d0-4582-a0d2-6430ab5658af.png","https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/174f86e2-1c88-4b05-9471-d04f80f8413e.png","https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/fda3d031-5b88-442d-b143-371595f52e98.png","https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/63b5329a-8e46-4e5f-9408-ab85583a593a.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/27c3b7e1-e1a3-4d81-b417-5f73fcc2a54d.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/1f37aab3-7ce5-4d77-8005-bc2fe52addf5.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64c8c9c5-d44c-4dfe-a945-ca3016ed6be9/38fec96f-887e-4541-8063-d613737d8a4c.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"100",sum1:"600000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540bdc56e2d1136bf2982ea",userId:"6533fb61fa2662129d9aef1c",developer:" Seven Tides",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/8855e43d-fd94-4da9-98ca-8b7e4dabb371.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Golf views Seven City",priceFrom:"7950000",sizeFrom:"415",selectedLocation:"Jumeirah Lake Towers (JLT)",ownLocation:"",lng:"55.15480425252287",lat:"25.079205022727052",exterior:"https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/28586c5e-0516-4c35-bf27-74e49e3640ae.png",description:"Golf Views Seven City by Seven Tides is a residential complex consisting of two interconnected 27-story towers with a glass facade. The residential complex is located in the Jumeirah Lakes Towers area. Golf Views Seven City is the largest project of the Seven Tides company, which is not surprising.",descriptionRu:"Golf Views Seven City by Seven Tides        27-    .      Jumeirah Lakes Towers. Golf Views Seven City     Seven Tides ,  .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/a144d19c-6c15-4bb0-a473-68207adc5f53.png",price:"7950000",size:"415"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/e0a3e0a6-565b-4a75-a128-3c665fe49dc7.png","https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/1e3687a4-6b9b-41ba-abaf-293fea285412.png","https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/942b9f93-ea63-45d2-be03-6553ab3e19dd.png","https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/d64a19ec-fa56-4dc3-ad5a-6ef69b2ac8a4.png","https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/750c0380-8487-4286-8233-17dff094caa9.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/30234d4e-9b77-491a-940c-651429be9c6a.png","https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/23eab738-5268-45c0-a751-c961878b58a2.png","https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/cf383c6f-2fcd-4d42-92e3-9ae8cb516136.png","https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/61d16368-1d4d-479d-a2fe-ac831a510780.png","https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/b209c834-2a42-49bb-9d05-b6eadd89effe.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/10f73c02-33c2-4761-ab1f-6d10b04a675a.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/ab7fd789-e9cd-41e4-9853-2954085d03d7.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/97c25a2b-b955-41f6-a575-3d01d95ce22b/e9abde7c-c1d3-4245-9c93-f7d81f17671f.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"100",sum1:"7950000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540bf716e2d1136bf2982eb",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/9c29e7f2-5cdf-4dc2-a1ea-729a301a75dc.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Harbour Gate",priceFrom:"2600000",sizeFrom:"1164",selectedLocation:"Dubai Creek Harbour",ownLocation:"",lng:"55.34734496831755",lat:"25.208723189265264",exterior:"https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/d5483989-9ac3-4d5d-ae0f-bda7bbc5a352.png",description:"Harbour Gate in Dubai Creek Harbour offers 1, 2, and 3-bedroom apartments. The complex includes two high-rise towers (45 and 70 floors), connected by a podium with shops, cafes, and recreational areas. These modern apartments feature panoramic windows for stunning Dubai views.",descriptionRu:"  Harbour Gate, Dubai Creek Harbour,  1-3 , 2  (45  70 ),   , ,      .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/ac243a67-51b8-440f-b4c8-c3f23e2deed1.png",price:"2600000",size:"1164"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/30573059-d5eb-4fda-b087-cb2c1f75d64b.png","https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/de6af512-8756-42ba-acd6-e950a115c082.png","https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/903664cf-365f-4fd3-918d-bd84ab35756b.png","https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/5d214e37-c34c-4bd3-ba46-8cdf317eb32f.png","https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/34d1d28f-8433-4018-9830-952cef30adfa.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/dd999914-9c30-4628-a887-837ae4e77a87.png","https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/6009bd61-dc17-477f-bc1d-65bece71dbb4.png","https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/6e773563-bc49-4983-9fa8-369486752d33.png","https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/cad213d6-45d5-400f-83c7-4a0c63945ff0.png","https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/fa846b75-46ef-4fb7-b805-43cd1a986854.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/68c8ac92-3cb7-4726-a749-a03765046405.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/020bdbdb-c0e2-4420-97ff-6c2a001df5d1.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f5323feb-eaf3-44c9-a098-52285110c810/11045fd0-9af5-4043-8b2f-9b29131ca618.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"100",sum1:"2600000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540d1a86e2d1136bf2982ec",userId:"6533fb61fa2662129d9aef1c",developer:"Meraas",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/f209cd81-dbf1-444c-9a08-8c0bc37798b2.png",selectedType:"Project for investment",selectedYear:"20",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"La Cote",priceFrom:"2400000",sizeFrom:"792",selectedLocation:"Jumeirah",ownLocation:"",lng:"55.25050624221379",lat:"25.23906972387561",exterior:"https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/f8ec72a4-8472-43b9-a972-b68f81a32a1b.png",description:"La Cote by Meraas Holdings in Port de La Mer (PDLM) offers 1, 2, 3, and 4-bedroom apartments with modern amenities. In this master-planned community, 408 coastal residences are available with flexible payment options.",descriptionRu:"La Cote  Meraas Holdings  Port de La Mer (PDLM)    , ,       .   -   408       .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/8276807d-5d1c-4a7c-84f2-129f6ea6eca2.png",price:"2400000",size:"792"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/fffbacc9-05f3-42c8-b8bc-099dedc9e99f.png","https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/d7b2a3e7-196e-4d9d-bd5e-d57e721df9ae.png","https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/06c23634-920b-4a16-9fbd-d1d0b0b186ac.png","https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/5f00351f-fdf1-4264-ba53-fb83f47d7d8f.png","https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/d6da7588-b37c-4de6-904e-54311a70094e.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/94e242b2-996e-4cbd-984e-eb465f4233a2.png","https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/3c226b67-d064-4792-b95e-8a0aa2716abf.png","https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/f50f5919-1385-4ecf-a7d8-470b0c9403c1.png","https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/d819720d-7127-4215-9f34-72ec7175336f.png","https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/135f901d-0c5e-45b7-acab-929cc3cf50cf.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/8b467854-1e6b-4358-9221-b7ff3f3c4594.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/76447c1a-01cd-4bfe-a9d4-fa3f9eb54ba7.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      "},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/680a64e7-028c-490b-88d9-6ad060270770/96fe1b9e-9077-47e7-a7ec-943b24a0d298.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"2400000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540d3eb6e2d1136bf2982ed",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/960ee93f-dd80-4976-b725-297c13d509d4.png",selectedType:"Project for investment",selectedYear:"17",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Marina Pinnacle",priceFrom:"870000",sizeFrom:"845",selectedLocation:"Dubai Marina",ownLocation:"",lng:"55.14917805949537",lat:"25.089369271236524",exterior:"https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/ceaed8c4-b529-4d79-a19f-05cf8f66f1c8.png",description:"Marina Pinnacle by Tiger Properties offers studios, 1 & 2-bedroom apartments in Dubai, UAE. This 77-storey high-rise boasts impressive architecture and luxurious amenities for a prestigious lifestyle.",descriptionRu:"Marina Pinnacle  Tiger Properties  ,        , .  77-           .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/4f7ddcc4-64b9-4052-a805-5c8c2d65c66f.png",price:"870000",size:"845"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/a58b677e-de7c-42f5-8ee2-69d53cd6a0f6.png",price:"1150000",size:"1219"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/63c73c93-1697-4884-9a05-ca9baba5971d.png","https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/672dbe7f-8515-40b2-8c60-4ba29ad7be60.png","https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/1366037d-5393-49a2-b862-80a0a4e9db5c.png","https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/65709134-b091-46fd-b3ec-1c7541367f91.png","https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/3a300a11-5e4a-40c4-bdd0-d4eb4be7c435.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/1c94c33f-e0aa-4bb6-b7ce-e31005e5cc65.png","https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/526e86bb-673d-478e-80e3-67fcc6c9d85f.png","https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/1d21f7ca-8411-485b-b129-6e89f777bbdb.png","https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/80e84dd8-25a3-40a5-9afb-470d7eef1ba1.png","https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/27be0416-5194-4abb-8730-0925d85c4317.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/0d1c2643-0a08-46c4-9cca-cd8aa15e2b59.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/7fdf265e-2f83-4fd8-b758-8eb7c6a30c54.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2c9393f4-db4c-4d63-9389-b987ab244f72/54d2e2f3-0ece-4ac9-b1fa-7f57b048b400.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"870000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"},2:{percent1:"25",sum1:"287500",percent2:"25",sum2:"287500",percent3:"25",sum3:"287500",percent4:"25",sum4:"287500"}}},{_id:"6540d5ce6e2d1136bf2982ee",userId:"6533fb61fa2662129d9aef1c",developer:"Al Habtoor City",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/30d0e9ef-d184-421c-9ea8-85557c1056d5.png",selectedType:"Project for investment",selectedYear:"19",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Noora Tower 2",priceFrom:"2650000",sizeFrom:"1367",selectedLocation:"Business Bay",ownLocation:"",lng:"55.255032343645674",lat:"25.183895132970587",exterior:"https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/df1a7e9a-3b3b-41b7-99d0-31e5ea94373b.png",description:"Noora Tower, part of The Residences Collection in Al Habtoor City, Business Bay, offers panoramic views of Burj Khalifa and the Dubai Water Canal. It's among luxury towers, including Amna Tower (74 storeys) and Meera Tower (52 storeys).",descriptionRu:" Noora,    The Residences   Al Habtoor City, Business Bay,           .     ,  Amna Tower (74 )  Meera Tower (52 ).",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/c747e571-2306-4cca-b8ee-11b3f4622313.png",price:"2650000",size:"1367"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/143cfa4c-b970-4140-8c0f-bab0e8c4ca22.png","https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/e5c62085-6cfa-426d-bdfa-55481089bea4.png","https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/6d88ab4f-91c1-4b0e-9e8c-919e14e69ba9.png","https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/0e121c9b-afa6-417d-b7bb-761eef12370b.png","https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/8df64cbc-6276-4ba8-8638-5669e03f1f77.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/d4cd79f0-9035-4c0a-90d0-db80cbd55717.png","https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/0f9f0fb2-b5ec-48dc-8cdb-3c563c10ee53.png","https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/6b08c2ed-077c-4f02-8ec9-4442d92f593b.png","https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/48a480e2-26d6-466b-acad-641bccb8cc55.png","https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/6b1b6b2e-6ff6-4c1f-9cab-be4d26b45047.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/264ff6e9-1621-4481-b861-5fc52864135e.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/53c62017-3e57-40f9-9b64-20480f854b77.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/eacee06e-4b2a-42f1-b220-2db3f5d4779d/9e85d6c4-151c-4eaa-ac4d-790c90954770.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"100",sum1:"2650000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540dfec6e2d1136bf2982f0",userId:"6533fb61fa2662129d9aef1c",developer:"Dubai Holding",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/70e8e0e1-45ad-4867-a43e-fb545d9dded6.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Rahaal Apartments",priceFrom:"3600000",sizeFrom:"1157",selectedLocation:"Madina Jumeirah Living",ownLocation:"",lng:"55.19071180830015",lat:"25.135900638148716",exterior:"https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/87191ad6-094b-4806-a9b9-069bbff80da6.png",description:"Rahaal Apartments is a high-class complex by Dubai Holding, offering 1 to 4-bedroom apartments within the Madinat Jumeirah Living complex.",descriptionRu:"Rahaal Apartments      Dubai Holding,    14    Madinat Jumeirah Living.",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/e979d927-27a8-4e2e-9779-c6a38ef08b94.png",price:"3600000",size:"1157"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/61833d37-656b-46bc-b6a8-666edc5280a3.png","https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/b02bdf08-f086-4275-ab91-b93b11bcf1bc.png","https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/0a8dbcc3-fb23-4600-a202-9727ee2574ae.png","https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/2ce5ff66-237d-481c-b224-dff17dea5813.png","https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/9513cfb5-cda4-403e-9d65-366e14e62138.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/d35252ef-c3b9-4635-95ac-75b1482b1629.png","https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/4ccb97aa-e460-49c4-b4df-67f956b9f57f.png","https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/27b23c41-45d3-48bd-a012-b619b44abed0.png","https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/1648e4b1-0426-46d0-84be-1e77709a35b7.png","https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/a58c1830-5beb-4c94-be37-8924de93a516.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/1570549e-9ad2-45f0-80a1-03572fed270a.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/13c37500-a864-4156-92fd-e2acc14c4620.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f8b44583-69da-44ed-a7cc-608ba24e00fd/223c7c0f-4897-4f9e-b8c0-c84e7304df8e.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{2:{percent1:"100",sum1:"3600000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6540e1b76e2d1136bf2982f1",userId:"6533fb61fa2662129d9aef1c",developer:"WOW Real Estate",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/2ec393a1-7d37-4199-aa1d-cb82319cb21a.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"SLS DUBAI",priceFrom:"1295000",sizeFrom:"678",selectedLocation:"Business Bay",ownLocation:"",lng:"55.289838622028",lat:"25.18499665956485",exterior:"https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/897becc5-5b10-4f26-a864-741425519698.png",description:"SLS Dubai Hotel & Residences is a high-rise residential building by WOW Real Estate, located in the center of Dubai. The project aims to be one of the tallest hotels in the United Arab Emirates, offering panoramic views of Dubai's skyline.",descriptionRu:"SLS Dubai Hotel & Residences      WOW Real Estate,    .            ,       .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/d50efd58-5ac0-4230-bd71-5cdbb721361e.png",price:"1295000",size:"678"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/a97b308f-2023-42f2-b20b-1a83fab4bf2e.png","https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/83f5feb3-36fe-46b9-990f-8bd195432e44.png","https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/834496e3-e1b9-42bd-92f9-8cc916154ab4.png","https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/c7484d63-2620-4183-b3d8-b66680279f04.png","https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/ee36e28a-87d2-4c5b-bc09-30a22177160d.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/9726790d-1a7b-4b5e-b6e0-c88487ca72a0.png","https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/ff221478-cac6-43ad-92f5-d561068ffc1d.png","https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/8b201fab-f7e8-41a1-be32-53205c89df3a.png","https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/bdfeec4e-9882-40a4-a237-9a70f18d4c18.png","https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/8c753e3e-19f3-43eb-87ef-c342d93c3e0e.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/5b6000ed-0f82-4616-8aa1-618c4fd8840b.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/c0c9c73a-9273-43af-91a6-9145cb503742.png",name:"Library",nameRu:"",desc:"A private library awaits within the property, providing a quiet sanctuary filled with books, perfect for avid readers to immerse themselves in captivating stories.",descRu:"    ,  ,      ,    ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/330bf013-d01d-4f92-86e3-ff6a5b7bd886/4474e346-d9ed-41c8-8f9c-8c12bed5fe09.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"65",sum1:"841750",percent2:"0",sum2:"0",percent3:"35",sum3:"453250",percent4:"0",sum4:"0"}}},{_id:"6541098c6e2d1136bf2982f2",userId:"6533fb61fa2662129d9aef1c",developer:"Omniyat ",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/c2cd194a-a211-40ce-8ee9-1290d5ad997c.png",selectedType:"Project for investment",selectedYear:"20",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"The Pad",priceFrom:"1800000",sizeFrom:"1027",selectedLocation:"Business Bay",ownLocation:"",lng:"55.2827789396697",lat:"25.184959669382366",exterior:"https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/15e48c35-755e-48bc-88eb-8cb3f5254140.png",description:"The Pad is one of the most original, attractive, and technologically advanced residential complexes in the entire Dubai. Situated on the banks of the Dubai Canal, practically in the heart of the Business Bay district, The Pad offers a plethora of incredible experiences and a high standard of living.",descriptionRu:"The Pad     ,         .     ,      Business Bay, The Pad        .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/4ba3bd3f-a6d9-4c30-8a18-36d64637e649.png",price:"1800000",size:"1027"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/94ec2d2a-f0f7-4f17-a749-25273efd304a.png","https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/fea21f69-6252-4ef0-8206-e7dac78c5c7c.png","https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/ffb40f6f-ecb2-42c5-bac4-6eb572528e25.png","https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/ebef18bc-0df0-4e27-8bf9-f0dd4d2cb7df.png","https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/e12b9a56-a264-4867-b89b-ba6e342a66b2.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/c1636924-3aab-4bef-aaab-70b4e99c7d57.png","https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/bbd28262-9685-4ca0-a53f-bbfdca2fe03f.png","https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/1a55c54d-e252-4f6b-b519-763ec5226a9f.png","https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/2787a339-1242-4236-acd9-c8f019500f87.png","https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/1560f278-7628-4e93-aee0-06a453187ecd.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/0657fc34-0c18-4f8a-8216-f9fc7d38749a.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/e172dcc9-a24a-4678-aafb-f9da8270b841.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/ccd33512-357b-4d5d-a7e9-6b5546204a8c/c1224645-e6ca-42c6-a6e3-3d46fd9cadea.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1800000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"65410ad56e2d1136bf2982f3",userId:"6533fb61fa2662129d9aef1c",developer:"Damac",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/b0ddeceb-c464-4dfb-a48e-79afc4069382.png",selectedType:"Project for investment",selectedYear:"17",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Tower 108",priceFrom:"1400000",sizeFrom:"1342",selectedLocation:"Jumeirah Village Circle (JVC)",ownLocation:"",lng:"55.2056766769455",lat:"25.06861021647877",exterior:"https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/e9ec93b3-8638-4dc5-acfe-750fa1c908e9.png",description:"Tower 108 is a luxurious project by the renowned developer DAMAC Properties, fully completed and operational in 2015. This 33-story tower is located in the JVC District 18, Jumeirah Village Circle area and is surrounded by various amenities and green spaces.",descriptionRu:"Tower 108        DAMAC Properties,      2015 .    33     JVC District 18, Jumeirah Village Circle        .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/40691f23-f228-42bf-b51f-66a3192dc782.png",price:"1400000",size:"1342"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/34b00820-2404-4e66-b2c6-5fdf8c96d114.png","https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/442fb8a7-c6f6-412b-8e85-3c10a3a1c533.png","https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/47514487-3f53-4266-a9ee-c5b5d646d87a.png","https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/c13c486b-a8f6-4281-9d7f-7e62ad7e6893.png","https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/b6866cda-c7d8-498b-be02-649c9ecf3d9e.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/8382f62a-ca64-4f2c-b9e5-36fa427dd80f.png","https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/153a476b-1b9d-47a2-9017-92bed6a0f735.png","https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/fbfb13fe-972d-40a2-9b4b-c901e9de143c.png","https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/9573cba7-1bfe-4362-a4cd-71f993638010.png","https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/b0db4984-f939-42fb-b326-40ed338b4cfd.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/a3e3a7a1-ac2e-4e33-823f-34db34b6a1ab.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/683ae23c-99eb-4690-99c7-954731be5178.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/27a86da3-5919-4990-8cbc-b00d7a51217c/2b88bd54-2591-4d23-9270-8b68a8a00ee3.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"100",sum1:"1400000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"65410c716e2d1136bf2982f4",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/a1c1cdbe-a882-4962-bab3-804eebd79342.png",selectedType:"Project for investment",selectedYear:"22",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Vera Residences",priceFrom:"1200000",sizeFrom:"472",selectedLocation:"Business Bay",ownLocation:"",lng:"55.28271703154131",lat:"25.18751403188646",exterior:"https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/0ee9abab-8710-4b9a-8f69-6bc3629355d4.png",description:"The Vera Residences in Business Bay is a multi-story residential building with serviced apartments and premium amenities. It's conveniently located near supermarkets, cafes, restaurants, shopping centers, luxury hotels, schools, nurseries, hospitals, and clinics.",descriptionRu:" Vera Residences  Business Bay -          .   , , ,  ,  ,  , ,   .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/e0568c38-83c8-4053-b04a-16a6d16eb7b1.png",price:"1200000",size:"472"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/565bc8b3-c2a7-41c7-9a58-031e3604b792.png",price:"1800000",size:"897"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/3e07fab7-2907-4f2b-8611-30427c4148ee.png","https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/abd54d70-6183-46ee-ab31-71f19dcf3935.png","https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/def6efd2-c358-49ce-a889-fd792d0f998b.png","https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/49511429-5086-4e5d-be8e-3be3d5cab125.png","https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/8efed94c-3b8b-486a-aa7e-dd065cd2115e.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/3813d8a8-0719-4029-8c43-4dcb629e9749.png","https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/cfdebe11-476e-41fa-b25f-255a01af4383.png","https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/1c84c5a2-40ae-4e82-9c13-f9237246d194.png","https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/63cd9765-4cc7-409d-b39d-1d623833c57a.png","https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/01812272-c2a7-4c3e-be0e-b1d2bfba11b8.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/384104ef-1222-4b7f-bf86-349bcc9f87dd.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/295cf2b6-cae8-4b8c-b34b-5a4896515b98.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/53536766-645c-49a9-86a2-18263551e0a9/a7bb8a5a-00d8-45ad-8a00-c1fe17214d49.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1200000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"},2:{percent1:"100",sum1:"1800000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"65410d776e2d1136bf2982f5",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/f24e20a4-6400-49a0-a04d-3f7deb46f256.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Zada Tower",priceFrom:"1025000",sizeFrom:"468",selectedLocation:"Business Bay",ownLocation:"",lng:"55.26368363203527",lat:"25.187952400640636",exterior:"https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/c274af63-cb43-42de-ab90-e6b05bad73aa.png",description:"Zada Tower by Damac Properties is a luxurious high-rise building conveniently located in Business Bay. It offers residents top-notch amenities, including beautiful landscaped areas, a health center, and an outdoor cinema. Nearby, you'll find West Zone and Al Maya supermarkets for your convenience.",descriptionRu:"Zada Tower  Damac Properties -     Business Bay   .    ,         .   West Zone  Al Maya.",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/b964c66c-8c14-4994-abae-88b52372b903.png",price:"1025000",size:"468"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/0e6ca872-7298-4338-9581-cccaf5a85a8b.png","https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/df1b67a2-2e25-4af7-ad71-1456bc152233.png","https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/f5df3742-0582-45de-8aea-8bfce54f14e6.png","https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/9adab904-a15b-4bdd-bb5e-b6a3bc148943.png","https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/9301882d-d8a4-4a2f-b097-ca557a5cab04.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/710e8f6a-f10c-4a66-be04-085060305764.png","https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/d7a08163-c1d1-47d4-883e-742171849518.png","https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/20f1e38a-e5e2-49e1-8f69-322a7b80efdb.png","https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/f4f2624a-aa38-415b-822e-110aea9e71ce.png","https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/a35c72ac-e1f0-49b9-9b7c-7dd0a8322dee.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/13296858-12d1-4b1f-ac4a-b1bd06e76b56.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/074d893c-c3b2-498d-8eae-8aae377b91aa.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7f6a5476-ec92-4c4c-827f-56d25ba37fe6/6ff9eebb-d693-495a-8e69-9a225c89206b.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1025000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"65438423dc91c56067f549af",userId:"6532ca1e8464db644f95ff17",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/4e93c1aa-2cb0-43e1-96d3-3f973623fab3.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Any",projectName:"Burj Crown",priceFrom:"3150000",sizeFrom:"1352",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.29048997335611",lat:"25.206095482045875",exterior:"https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/ba5cd940-10d9-43b2-91ca-4e7cab3df548.png",description:`"Burj Crown    -     Emaar Properties,      Downtown Dubai    .\r
\r
 Burj Crown    44 .          1,2  3 `,descriptionRu:`"Burj Crown    -     Emaar Properties,      Downtown Dubai    .\r
\r
 Burj Crown    44 .          1,2  3 `,plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/cab9d61b-d34c-499e-ac00-1287aa6a32e3.png",price:"3150000",size:"1352"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/ba343db3-5d83-46f3-8980-55b5f710c215.png","https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/067bd21e-c27a-41d9-a63e-e8dc85e0a939.png","https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/75af95ea-86b1-44b6-bc6c-0f2538d25805.png","https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/6f000640-199f-40bf-a060-7f0557f8c7c9.png","https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/1b35e8d4-db65-41fb-b547-b9b258bd2ccc.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/a16f1c63-6353-486e-8926-0c7111e7e034.png","https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/8419225c-763d-42f1-a595-14b229db367e.png","https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/abe63f90-066a-4517-8a8d-62593c6c885e.png","https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/25af2591-601d-4a11-bf4a-e3e65f31b224.png","https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/03f4e8ad-581c-4306-98a7-3f9474e2a6d7.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/78924538-2bb7-4343-8a2d-97e41c612200.png",name:"Pool",nameRu:"fasd",desc:"fds",descRu:"fsad"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/1ca328f2-fdef-4586-ad04-22434e4567f0.png",name:"sdf",nameRu:"sdaf",desc:"fsdaf",descRu:"fsdaf"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5710cec8-7383-4227-a825-1ca6640b5989/435c8afd-76ba-46f8-a796-410467b08e44.png",name:"fdsaf",nameRu:"sadfasd",desc:"sdafsd",descRu:"sfda"}],activeProject:!0,paymentPlans:{Studio:{percent1:"0",sum1:"0",percent2:"80",sum2:"2520000",percent3:"20",sum3:"630000",percent4:"0",sum4:"0"}}},{_id:"6544a1ddd374b65e6d87f246",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/9e010a3a-8acc-4298-b0b4-faf585941eeb.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Ruba",priceFrom:"2300000",sizeFrom:"1877",selectedLocation:"Arabian Ranches",ownLocation:"",lng:"55.318407226268754",lat:"25.063080395496637",exterior:"https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/4326e60f-0f4b-453f-8579-c03bc6ae39fc.png",description:"Ruba at Arabian Ranches III is a new residential complex in central Dubai by Emaar Properties. It offers 3 and 4-bedroom townhouses with sleek, clean design and high-quality finishes. Each apartment includes a private garden and spacious panoramic windows.",descriptionRu:'"Ruba at Arabian Ranches III" -          Emaar Properties.      3  4 ,       .           .',plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/d8bedfab-2c63-46e5-9d4c-ff1b7caf8e28.png",price:"2300000",size:"1877"}],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/b8ef5d05-c900-4c28-91bd-a19ac3c376f4.png",price:"2034",size:"2700000"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/2a85a258-1f36-4454-878b-4cfcd40fd059.png","https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/4ab6868b-1187-40a0-b00f-20abb5c4a834.png","https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/4133ccd6-7f08-45a4-960e-6cd4c9d287f8.png","https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/d5ab94f7-c755-4c37-aade-45035b7a0d68.png","https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/01a330c8-cd77-4bfe-93a3-a988deba16f6.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/85bde0ab-b969-4d73-bad2-35c7aadddc64.png","https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/66ef5eb5-e3fa-4abf-ac46-36df1d5d27d7.png","https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/34490c4c-5c9a-4de5-9f19-90d89d6d97aa.png","https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/563ff5b4-e1ff-4312-bdba-bf8a012c7a31.png","https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/3c88ec31-e2b4-4533-8169-22b66d71e5b7.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/2d2e6f3c-e631-4c52-b598-e5bbcaffb19c.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/aa21dfc6-16f8-4940-b44c-12d7e323faca.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/2277b98d-a37d-4d9f-88af-4f90b65d7889/fa501b1c-857b-443b-b4ef-1f03435860d8.png",name:" Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{3:{percent1:"50",sum1:"1150000",percent2:"50",sum2:"1150000",percent3:"0",sum3:"0",percent4:"0",sum4:"0"},"4+":{percent1:"50",sum1:"1017",percent2:"50",sum2:"1017",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544a9ced374b65e6d87f247",userId:"6533fb61fa2662129d9aef1c",developer:"Meraas",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/b82d7c70-5a11-4a8a-950e-3becba781f9b.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Castleton",priceFrom:"2800000",sizeFrom:"778",selectedLocation:"Al Wasl (City Walk)",ownLocation:"",lng:"55.26217430975219",lat:"25.19890779738248",exterior:"https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/6abd5eed-4f1f-44fc-87da-75a147b68921.png",description:"City Walk's Castleton by Meraas offers stylish urban living with 1-4 bedroom apartments and an exclusive penthouse, blending modern amenities, lush greenery, and staff rooms in some units. A chic addition to Dubai's real estate scene.",descriptionRu:"Castleton  Meraas  City Walk      1-4    ,     ,        .      .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/1d6da00f-4228-4aeb-a57c-88e17fd4e632.png",price:"2800000",size:"778"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/2c53732f-dbdb-45d4-8034-a66570af376e.png","https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/c0400ef7-6f6e-4cc8-8bce-f4d704178a90.png","https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/896a6a49-5cbc-4e37-b96f-3443265fbbef.png","https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/38ea3f88-7ecd-4749-ac92-7e1b454d2253.png","https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/d9f91110-bec1-42df-933a-c5e9518ee283.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/19829bba-5d80-4ab2-ab3e-34be5d011088.png","https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/06c42746-9400-4f96-8fdf-a3e36a5bbf57.png","https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/2a69bc1a-a9b8-4986-8f1e-a6640a5d5430.png","https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/3bf22451-61dc-4e9a-8027-d3ab414fc330.png","https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/996bab30-d2c8-48dd-bd53-3691b8420431.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/a4c4c0dc-7926-4da6-9b7a-74ff9ddcbece.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/0c769f76-0533-45ee-97c5-7d0ba78f58f1.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/984c05a8-cb7f-458f-accb-ee7277a726bb/37549cb8-bac6-4c87-bc93-837a8399ceee.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"50",sum1:"1400000",percent2:"50",sum2:"1400000",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544aad6d374b65e6d87f248",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/080f91c3-b590-48e8-9401-aef66d3275b2.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Chic Tower",priceFrom:"1900000",sizeFrom:"833",selectedLocation:"Business Bay",ownLocation:"",lng:"55.261439799711326",lat:"25.183461648634463",exterior:"https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/0381c2e9-2ee8-4d6d-8dca-55f9c6e8b2fd.png",description:"Chic Tower by Damac Properties is a new project offering studios and 1-2 bedroom apartments located in Business Bay, Dubai. Chic Tower is another designer project by DAMAC Properties in partnership with de GRISOGONO.",descriptionRu:"Chic Tower  Damac Properties    ,       1  2 ,   Business Bay,  . Chic Tower       DAMAC Properties    de GRISOGONO.",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/92e44e42-6c8b-468b-841f-1cc621f00fc1.png",price:"1900000",size:"833"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/7f1c42e4-d0f6-4668-a22a-cc0fa40dd9d6.png","https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/dd42a0db-4d67-4d4d-ab9f-ec33c5c4969e.png","https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/e25d1289-d99d-4e80-bec0-4d2c9eb974f2.png","https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/db5f3f9b-50a0-4e73-b92d-5c1eebefa729.png","https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/af9a4e9e-5016-4ac0-9336-4f6f02ddba23.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/7a42f05e-1396-4064-bdbf-37d1d81fc776.png","https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/a0e795d1-1bdd-42f2-82f4-0786f6774062.png","https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/66520cad-56bc-4476-bac0-044777bf478a.png","https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/ffaa48ee-5bea-40d2-8d7b-689ed36a13d5.png","https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/784e3896-47be-46e8-90a8-92a4b28853ad.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/28c2b8b3-db9b-433c-bb45-83769f659fb1.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/3e8e149b-25b8-4e8d-9a91-4eed2cf2b674.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f48fbf1d-917b-4b1d-84de-42d275dad07b/c345e3f6-6727-4867-9bc8-af7169e35705.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"80",sum1:"1520000",percent2:"20",sum2:"380000",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544b02bd374b65e6d87f249",userId:"6533fb61fa2662129d9aef1c",developer:"Damac Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/b638efec-2aa6-4251-be0f-46eaf0931b02.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"3",selectedBathroom:"Auto",selectedBedrooms:"4+",selectedProperty:"Town house",selectedStatus:"Off-Plan",projectName:"Marbella",priceFrom:"2250000",sizeFrom:"2286",selectedLocation:"Damac Lagoons",ownLocation:"",lng:"55.24002477176474",lat:"25.018973267941206",exterior:"https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/b9c36bf3-144d-4cbe-97fd-94a32ab85470.png",description:"Marbella, the final stage of Damac Lagoons by Damac Properties, promises a lavish lifestyle in a gated community with premium amenities. Stylish 4-5 bedroom townhouses near a scenic lagoon offer luxury, joy, and entertainment.",descriptionRu:",   Damac Lagoons  Damac Properties,          .    4-5       ,   .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/662c9365-4e6c-45f4-bc25-be1ce84c7894.png",price:"2250000",size:"2286"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/594443e5-b7c9-43e0-916f-bbcb05761aed.png","https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/9b011c90-9c3f-41ae-b6be-71eac745e05d.png","https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/930e078e-04a1-4e50-9a1b-85c6a8acaf0d.png","https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/3bc172ac-0702-493d-9b72-e35bfdd6de88.png","https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/638e5541-92a8-46c5-a9e2-3d02ee9f7f8f.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/02879eb2-e0cb-4a01-b1c6-124288c92500.png","https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/2b4658e4-df89-46ca-8e7d-f7cbe3e5d6ce.png","https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/02122e7f-9116-4906-b318-7a2f97c9bfee.png","https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/14fe5420-9a1d-44af-a544-0658f1c392f0.png","https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/a859874e-b59c-43f8-ad11-eda88c611ce2.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/5b639e32-25f6-4c66-9dcf-d8f98a6fa7c6.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/d57bc2c4-59eb-45c0-a9d4-8c6cc3aa7c63.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c6bfd759-6cf3-46f4-a44a-e039fb314312/8b0adaf9-df53-4259-92d3-49701d901d1f.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"80",sum1:"1800000",percent2:"20",sum2:"450000",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544b1f6d374b65e6d87f24a",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/84efb5e9-702d-4114-882b-48d23a44600e.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Downtown Views",priceFrom:"3000000",sizeFrom:"1217",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.279730502045766",lat:"25.19680866877725",exterior:"https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/db1bc230-0a37-4531-9d1c-4dd80d657c17.png",description:"Downtown Views, by Emaar since 2017, sold its first tower in under 48 hours. The next tower links to Dubai Mall, with 3 towers (52, 59, 64 floors) offering 1-4 bedroom apartments in the financial district.",descriptionRu:"Downtown Views,  Emaar  2017 ,        48 .       Dubai Mall     1  4    .   52, 59  64 .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/7ee35278-075c-461f-ab98-0f4f437c55be.png",price:"3000000",size:"1217"}],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/4a3cb1c5-d7ae-442e-8b19-f481fba2ef8b.png",price:"4300000",size:"1800"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/ebcc896b-3a98-4a8f-8772-ef87485dfa3f.png","https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/4ee6adee-f1f6-486e-8305-24ce2f3a27c8.png","https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/aaf3a99e-060e-4feb-bf3b-a195e6f5e39f.png","https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/9547f046-2de5-4811-aed1-052c107fcd32.png","https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/eefead92-7768-467d-81a1-a194b4214e34.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/46f54565-7896-45f5-a045-9767f6b9fcd2.png","https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/aa046c20-0ea9-4aca-80a4-75c967bf8a1b.png","https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/05903ca1-8da5-4fd5-bda2-82d7cef10590.png","https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/68390288-ac35-4ea7-8b46-6d9f031ac4b0.png","https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/4ed90a79-2c54-47ce-b087-cff55882f5f6.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/5064d78d-b775-46fd-a9cc-9a64d13da520.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/89e1889f-7508-4e6c-8bdf-99f807ebd1aa.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/489a673f-7261-49af-a436-3d5e7b94b0ca/9491ad6a-d8d7-439f-ade4-65e59f18d1a9.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{2:{percent1:"20",sum1:"600000",percent2:"20",sum2:"600000",percent3:"60",sum3:"1800000",percent4:"0",sum4:"0"},3:{percent1:"100",sum1:"4300000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544b58dd374b65e6d87f24b",userId:"6533fb61fa2662129d9aef1c",developer:"EMAAR Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/5aee8b69-16fa-4de0-af53-21d2982b45bb.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"4+",selectedProperty:"Plots",selectedStatus:"Ready",projectName:"Emerald Hills Plots",priceFrom:"12500000",sizeFrom:"10420",selectedLocation:"Damac Hills",ownLocation:"",lng:"55.26926135546212",lat:"25.13085096207137",exterior:"https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/f7faec39-8032-4255-9a9b-4372df9ce04f.png",description:"Emerald Hills is a collection of luxurious land plots within the prestigious Dubai Hills Estate community. This project offers buyers and investors a unique opportunity to build a villa in the best location according to their own preferences.",descriptionRu:"Emerald Hills           Dubai Hills Estate.                 .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/79f941c8-228f-43bc-a119-3ae2287994d6.png",price:"12500000",size:"10420"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/9aee62d1-05ca-45a8-97ad-06599a864fc1.png","https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/14558b85-edbd-4668-9c4f-8a3ff7426aa8.png","https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/4761a6a2-8800-427c-94e2-95c711ba7174.png","https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/a1b5e30d-a28f-4611-ad50-b9ba370c0c69.png","https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/92ae3c54-75df-4c0a-ba16-cd1f3aa1593a.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/7e87111f-62e4-4885-beb0-a6d2fd90890d.png","https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/5dc6b940-2fa1-4ca5-8cba-a134835aab72.png","https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/4527cc1a-9cf3-41e5-8191-672a1a781552.png","https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/fa1e4ba0-4992-4f0f-aeb4-d5e77a682cbd.png","https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/11f3f33a-811a-4e09-97e2-a2ca5712e65f.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/a2825f5e-1196-4adf-9573-8d62ff548333.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/38c784b8-0d2b-433f-9f75-3a1e6b74a579.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/fd0b298c-5999-443b-80c4-37d3efa1fdc5/5bcb2cba-c6f8-4ded-b143-18c02ad1a5c3.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"80",sum1:"10000000",percent2:"20",sum2:"2500000",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544c774d374b65e6d87f24c",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/3351e16a-66b2-4283-8736-9ed57a7ae9c8.png",selectedType:"Project for investment",selectedYear:"19",selectedMonth:"3",selectedBathroom:"Auto",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Ready",projectName:"Fairway Vistas",priceFrom:"32500000",sizeFrom:"13500",selectedLocation:"Dubai Hills",ownLocation:"",lng:"55.27381513196788",lat:"25.1098050759043",exterior:"https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/24fb8f2c-0f30-4909-92ea-106a7083817e.png",description:"Fairway Vistas in Dubai Hills Estate is a community of spacious residential villas resembling mini-mansions, sized from 770 to 855 square meters. Developed by Emaar Properties, construction is finished, and the villas are available for sale.",descriptionRu:"Fairway Vistas  Dubai Hills Estate -     ,  -,   770  855  .  Emaar Properties,  ,     .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/30f9be06-64cc-4a66-8319-ca252eeeca4f.png",price:"32500000",size:"13500"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/3c0c39c4-5da6-479f-8f41-8cce579786d5.png","https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/ebc18b0a-0522-4e40-bc02-8d4fa76afa31.png","https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/29e09492-4c26-46b2-9ad1-e294967596da.png","https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/0f43797b-515c-46af-8200-b64df6d84c97.png","https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/68f12625-1d12-45c8-882f-59b74f1b4934.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/2e809568-aa62-4efc-a3d2-b53eb1b4bce2.png","https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/dcf16b74-96c3-4a7c-ae46-10033948619d.png","https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/dd618d8e-1799-4be3-80cd-69b4eb29fb08.png","https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/7f16c491-2477-4722-901c-001019f9a4d2.png","https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/1d02aee9-adec-453d-a397-aec54c3629ca.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/1f0844e6-4648-4795-baab-547b80b6d848.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/fc12a29d-4e06-444b-b8ac-a054c814482d.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/4196b39f-9d28-4c5f-a3a4-95e6e0d646bb/1d51ce05-933b-42f9-8fe5-3debfb718bb9.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"100",sum1:"32500000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544c925d374b65e6d87f24d",userId:"6533fb61fa2662129d9aef1c",developer:"Meraas",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/269c29b7-0bc7-4c9d-945e-bdc089f67e21.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"3",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Fern",priceFrom:"2200000",sizeFrom:"783",selectedLocation:"Al Wasl (City Walk)",ownLocation:"",lng:"55.26332710641764",lat:"25.210625497318592",exterior:"https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/04758b07-91cc-4665-a368-b568a1201a76.png",description:"Fern is the final phase of the large residential project Central Park, located in the new district of City Walk. The developer behind this project is Meraas, known for its popular and ambitious developments.",descriptionRu:"Fern       Central Park,     City Walk.      Meraas,      .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/4b2b398f-4825-4c02-b12d-1503c52de40d.png",price:"2200000",size:"783"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/725c79ff-9bc6-4aee-a48b-c95b0efebd96.png",price:"3800000",size:"1352"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/52422356-2bd9-4d9d-b22a-bb5e7f626504.png","https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/709d7c12-620f-44de-81d1-875987232986.png","https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/8b3f4ea3-bda4-4772-9117-33b645c78e31.png","https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/57d47174-16b5-4e85-b0e6-c18794d61b62.png","https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/75153e20-f144-4dc2-88a6-e270fe205cd1.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/40236f3b-0094-4256-b7dd-d4a559c4e616.png","https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/89293a29-a836-404d-9d20-c16dfcde789f.png","https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/8d42eaae-91c2-48c6-b157-868744ac7a1b.png","https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/501798d6-b7ef-48e3-a9c4-8b1db580a84a.png","https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/ab958aeb-dc62-4cba-a9fa-fa92380de5b0.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/eab7fd1f-e2a9-4f93-8757-8fe78c3141c3.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/da0709e2-baeb-4b0b-b3c9-02c0ef47271f.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6996b32-7883-4483-956a-8e259c6677cb/b739dc45-f11f-4995-a1a8-b159cbd065d0.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"50",sum1:"1100000",percent2:"0",sum2:"0",percent3:"50",sum3:"1100000",percent4:"0",sum4:"0"},2:{percent1:"50",sum1:"1900000",percent2:"0",sum2:"0",percent3:"50",sum3:"1900000",percent4:"0",sum4:"0"}}},{_id:"6544ca73d374b65e6d87f24e",userId:"6533fb61fa2662129d9aef1c",developer:"Mama Shelter",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/5eda008f-342c-456c-b980-33d62a861b9b.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Mama Residences",priceFrom:"1300000",sizeFrom:"452",selectedLocation:"Business Bay",ownLocation:"",lng:"55.271851355063625",lat:"25.179760125668654",exterior:"https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/ebc96622-0a43-45aa-9995-14ba2be2f46f.png",description:"MAMA Residences by Mama Shelter is a residential high-rise tower located in the Business Bay area. The project is a collaborative effort with the international hotel holding company Mama Shelter, known for offering residents and guests a truly high level of service.",descriptionRu:"MAMA Residences by Mama Shelter    ,    Business Bay.         Mama Shelter,      -   .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/683bec59-15e2-464a-8145-26fa1d968c3f.png",price:"1300000",size:"452"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/a9ad0d24-c36c-4d6d-b23d-32bd4547387a.png","https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/bb738011-e4e0-4833-82f5-a3b50fb7fd09.png","https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/0a05d9ad-5bec-48a4-b6cf-505a7ed46afc.png","https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/c7ead609-3c51-4dd9-bf94-7c2be3f75f17.png","https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/0f69352b-b7b4-42d8-8ef2-0ba5fa2e04fa.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/9f17b32c-3286-41a5-baa1-edb4b78818a7.png","https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/ed583844-9d73-4c24-9532-15a4a2e3fef6.png","https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/df86f660-b1f0-4a34-adb3-e9b400a1adf9.png","https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/6a7b9ce1-e46f-4d75-bec6-3ca9d38b8b2b.png","https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/d365edfe-5fdf-4f3b-b43d-b4d6167801c2.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/2b22cc61-f107-4b43-b56b-eeb816868b1b.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/27ca1144-3107-400a-ac2a-9f4ddc87b30f.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/ceed8870-e9ce-4513-810b-8df5497b17c9/b1ee6b2b-f8b0-4a98-83e5-87ee4895560a.png",name:"Library",nameRu:"",desc:"A private library awaits within the property, providing a quiet sanctuary filled with books, perfect for avid readers to immerse themselves in captivating stories.",descRu:"    ,  ,      ,    ."}],activeProject:!0,paymentPlans:{1:{percent1:"20",sum1:"260000",percent2:"20",sum2:"260000",percent3:"60",sum3:"780000",percent4:"0",sum4:"0"}}},{_id:"6544ceb5d374b65e6d87f24f",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/969a2b1b-f6e3-46b4-8571-92fb44e7d1b9.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Marina Shores",priceFrom:"2200000",sizeFrom:"878",selectedLocation:"Dubai Marina",ownLocation:"",lng:"55.14363642594281",lat:"25.083102178513002",exterior:"https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/ad0bbd41-2d87-4587-81be-436031aa423d.png",description:"Marina Shores, in the bustling Dubai Marina, is a new 53-story residential project. It features stylish 1-4 bedroom apartments and a lavish 5-bedroom penthouse with a pool and private terrace, boasting stunning Dubai Marina and sea views.",descriptionRu:"Marina Shores         . 53-    1-4     5 ,   ,        .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/94d88ae9-aef0-4cdd-ad45-0ab6b33ac401.png",price:"2200000",size:"878"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/68ba65f1-1973-4698-bbde-85078f0708f1.png",price:"3500000",size:"1181"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/81997e0a-9889-496d-91e3-379acb9859dd.png","https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/14ad0dda-3165-440c-a815-664fb41c28f5.png","https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/8ab83aee-3e5e-4215-bea4-3202fe68997d.png","https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/aee8bb8b-7d8b-4cd4-b1db-12b97c0f4a8d.png","https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/48304059-8266-4cd5-abd5-e121963335a5.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/3b3c2d99-6b64-464a-bb40-09563a995fe4.png","https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/61166cd2-0098-46f7-a8d2-21ed3ecbcb58.png","https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/176a99cc-4455-4ba3-b77b-d140d1933738.png","https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/2210e95f-3212-4e29-bf3f-911eb97c582d.png","https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/742a2da1-cfa3-48e9-add6-bb688de3b144.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/621dec8f-7094-465d-9927-6a2123c7629d.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/4db52b6c-e7f9-440a-871e-5cdc6eb6a644.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/afeda4bc-beae-4dd3-ac56-e8ff35ec5818/1baf85b1-4b7e-4e3d-83db-32ce53b7e3fa.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{1:{percent1:"70",sum1:"1540000",percent2:"0",sum2:"0",percent3:"30",sum3:"660000",percent4:"0",sum4:"0"},2:{percent1:"70",sum1:"2450000",percent2:"0",sum2:"0",percent3:"30",sum3:"1050000",percent4:"0",sum4:"0"}}},{_id:"6544d0bcd374b65e6d87f250",userId:"6533fb61fa2662129d9aef1c",developer:"Seven Tides",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/02b18513-57cb-4d0d-830e-88cd45e5b553.png",selectedType:"Project for investment",selectedYear:"19",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Marquise Square",priceFrom:"1100000",sizeFrom:"559",selectedLocation:"Business Bay",ownLocation:"",lng:"55.2750973671115",lat:"25.18455035923028",exterior:"https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/2da2fc46-5bcc-4480-a652-2a6a1ff6aa83.png",description:"Marquise Square: New upscale complex in Business Bay, Dubai, near Dubai Creek Canal, public transport, and iconic attractions like Burj Khalifa, Dancing Fountains, Dubai Opera, and Dubai Mall.",descriptionRu:"Marquise Square:      Business Bay  ,   Dubai Creek Canal,     ,    ,  ,      Dubai Mall.",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/bf41ffba-0aa5-4b30-a75a-16cba0cfc738.png",price:"1100000",size:"559"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/9a6dbe80-418c-4096-a897-2d50e0f2438b.png","https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/73dc660a-343f-4790-b2c7-ca3a29fcb701.png","https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/4ab65925-fc6e-4afa-ba8e-7e25c707cd33.png","https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/bcc733f0-6787-46a0-95e6-0af82640a7ef.png","https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/580a7c99-20fe-4b0e-b2fb-b7d2b8e02981.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/01e191c2-bdc0-447e-b9d6-fa730daf51fd.png","https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/7767d89f-c54b-42ef-901f-7b65626d4106.png","https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/da25ccc8-fc73-47c7-9ea6-1fbbff68fb8f.png","https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/ef006837-9e0c-4e0d-a8ad-3c6916f635aa.png","https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/8e4057e0-37ee-4b40-96e3-63afd5f7f44d.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/f05cae3c-193d-448c-ba17-6f419d29afbd.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/a4c9a5f5-c763-41aa-b211-997da05d3fff.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/386212ec-9054-4059-b114-448d69892dd6/178b79cf-e839-4ffe-b0a3-ef9046737407.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1100000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544d677d374b65e6d87f251",userId:"6533fb61fa2662129d9aef1c",developer:"MAG Property Development",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/c95f2a01-5e2c-4f46-a148-e1bff4966608.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"MBL Royal",priceFrom:"1500000",sizeFrom:"700",selectedLocation:"Jumeirah Lake Towers (JLT)",ownLocation:"",lng:"55.14003886093827",lat:"25.06676262908546",exterior:"https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/e6cc8392-a55c-409a-9162-a04c4540db4c.png",description:"MBL Royal is a new multi-purpose luxury tower by MAG Property Development, a subsidiary of the MAG Group, one of the largest real estate companies in the region. This 42-story building is located in the Jumeirah Lakes Towers (JLT) area, specifically in Cluster K.",descriptionRu:"MBL Royal        MAG Property Development,        MAG Group,     . 42-     JLT,   K.",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/03711c64-023f-4f49-8d8c-a093e8f75606.png",price:"1500000",size:"838"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/7fdadfd9-7b2b-41b5-82c2-7285446d78fb.png",price:"1600000",size:"848"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/a96762c3-520b-4b6f-b935-f063a709e590.png",price:"1500000",size:"700"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/1c75a950-bc55-47be-a768-4c547866637c.png","https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/eab13537-7b53-47a4-b08e-0e47b870f287.png","https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/6396a6b3-f1e8-497c-9a27-6e9fb7a7f1ff.png","https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/5b4d6126-905e-45b9-ad9d-ab03dce13f83.png","https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/d62094e7-400f-4da9-aa3e-dea115619859.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/253338dd-8757-417e-991c-a4e0589ec28b.png","https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/816fa9a3-7efb-4f5d-a54e-5d8417d00871.png","https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/7d9ca972-991f-45f6-8b9b-934cc2b758ae.png","https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/a83a5740-2303-4c1d-8d9d-bb1e10a7abd1.png","https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/32765c59-9915-436b-825f-7e4a371e564b.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/5f99dab7-b6c9-4b07-b1f4-6efa92608234.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/43c4a6c0-5f06-41a4-b083-7750e2e30eca.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/f338b05f-eab1-46e8-b38f-71b507b1f3ee/53701762-ffec-44be-8ed3-5e0b4504d102.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"60",sum1:"900000",percent2:"0",sum2:"0",percent3:"40",sum3:"600000",percent4:"0",sum4:"0"}}},{_id:"6544d7c0d374b65e6d87f252",userId:"6533fb61fa2662129d9aef1c",developer:"Ellington Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/62607d09-0b62-4ae4-932d-d5bd042aa149.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Oakley Square Residences",priceFrom:"1250000",sizeFrom:"798",selectedLocation:"Jumeirah Village Circle (JVC)",ownLocation:"",lng:"55.211957433249225",lat:"25.0612029985361",exterior:"https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/b18e62d2-ca68-481c-bf1e-031e3d8d8d65.png",description:"Ellington Properties presents Oakley Square Residences, new luxury real estate in Dubai, situated in Jumeirah Village Circle (JVC). It offers a tranquil lifestyle close to nature, with seafront views, comfort, and luxury, allowing residents to relax and enjoy life worry-free.",descriptionRu:"Ellington Properties  Oakley Square Residences,     ,   Jumeirah Village Circle (JVC).          ,   ,      .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/7bb1d808-4f3e-42e0-a896-80e9271e9abe.png",price:"1250000",size:"798"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/350a9e23-bc14-4867-b693-0252e5f6eb46.png","https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/53d29583-4c08-4fdb-841e-3f85cf786370.png","https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/89431973-0ca2-4234-be5d-9e0f502bc66c.png","https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/37c4958f-8726-4a9d-b1af-e6b42c61c989.png","https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/1b9180e1-8053-4ccd-93e2-948c489be116.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/7c7d1c21-2cd8-4519-a9df-15309329c532.png","https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/d5a802b7-c420-4b25-8a64-982ffec2fa22.png","https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/5b37e70d-4407-4498-85f2-cbb96ea47472.png","https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/fddf790d-21dd-4d2c-9cc9-f761578e90a6.png","https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/e7e4dfd3-b1d8-4674-8d7d-9f1ec84223fe.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/77fbd640-e535-43d7-bb37-aa8c1a55e37c.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/34db954d-c4db-4fe6-aef2-0b51d6fa3503.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/c1659e79-5aa2-46a1-9901-46412971cece/2387eda2-c8d8-4b2d-a952-e9e889068938.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."}],activeProject:!0,paymentPlans:{1:{percent1:"20",sum1:"250000",percent2:"50",sum2:"625000",percent3:"30",sum3:"375000",percent4:"0",sum4:"0"}}},{_id:"6544d935d374b65e6d87f253",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/92ba91bc-5724-40ab-8e86-e990ccfd22bf.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Opera Grand",priceFrom:"14100000",sizeFrom:"2616",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.27102583416403",lat:"25.193137006099132",exterior:"https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/d23157e2-6e59-4157-8811-7aad9593acf9.png",description:"Opera Grand, a 66-floor premium residential tower by Emaar Properties, offers 249 luxury apartments. Buyers can choose from 2, 3, and 4-bedroom apartments, as well as 5-bedroom penthouses.",descriptionRu:"Opera Grand, 66-     Emaar Properties,  249  .     2-, 3-  4- ,   5- .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/ee216a5b-afff-4ae0-a751-b8a92224cfaa.png",price:"14100000",size:"2616"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/2e42cee4-7863-4d63-8bcf-5f28f1e2482a.png",price:"14200000",size:"2690"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/933e45be-3259-4b46-8668-99f5e01f0c8d.png","https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/85106795-921a-49d3-955a-aa185402f715.png","https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/ec5601e2-9ad4-46e4-8275-66e4e2b18755.png","https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/94358679-da11-40d1-9970-b1daf6566a76.png","https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/f6a3b255-4d81-4ac2-bdaf-11760dc9a79c.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/e0330221-fb5c-42b6-90e7-abce36e75d5f.png","https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/53d39971-6c7b-4bc9-bb12-c3fdf0fd52f1.png","https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/8d66b95a-d1af-426f-a1b7-998ef0c3cf6f.png","https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/e0b7f4a5-ee5b-4eb5-96f7-349ca1f9d696.png","https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/48e3c441-6783-4711-bacd-31c9888eaa47.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/cdeb2213-851d-4ded-841c-4c7b028f756f.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/0fd27de2-70eb-419f-b9cc-8639cba0a98d.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/494f737a-4c20-4e8a-acdd-edad9cd7ec38/30556dd2-585b-4e0c-bce3-ccc9c3a97882.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{3:{percent1:"100",sum1:"14100000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544df34d374b65e6d87f254",userId:"6533fb61fa2662129d9aef1c",developer:"Residence 11",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/e1251c92-b61f-40b0-8280-46ac1c0f102a.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"District One",priceFrom:"1950000",sizeFrom:"914",selectedLocation:"Mohammed Bin Rashid City (MBR)",ownLocation:"",lng:"55.28320185353375",lat:"25.15522289252789",exterior:"https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/f29bedcc-5fd2-4d39-a977-82de57b4dd76.png",description:"District One Residences are modern apartments in the upscale MBR City District, featuring waterfront views of the lagoon. Enjoy the scenic surroundings with a cup of coffee, take leisurely strolls along the promenade, or even swim in the crystal-clear lagoon.",descriptionRu:"District One Residences -       MBR City District,    .      ,            .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/d11a46fa-0b36-4970-b821-326d6541fd3f.png",price:"1950000",size:"914"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/f2dba79e-ace6-4e6e-a2b2-1ef36e6eab0a.png","https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/8202a239-b634-40bc-9369-78b8418db7a3.png","https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/92390b8c-91bc-49fc-93ba-a838864cebfd.png","https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/eccf8a5a-3ac6-4bc9-84ea-98516f8dc1c9.png","https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/c9a47222-4337-4317-b833-c7c8dd17727b.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/667458a8-7530-43f1-96d7-2775df9d8145.png","https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/2a3c9166-e428-4120-ac2c-86d5d88a8964.png","https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/08c56db5-69e3-448a-8545-2f274b2f80f8.png","https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/d4996900-b985-4e09-b743-c4157c8e7cfa.png","https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/84facdfa-5941-4514-8df9-9504b493dcd9.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/7a95e431-2a22-4da8-a3b5-61558feee013.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/51f39daa-f181-4e88-bd84-5841f7818662.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b6d4fad0-d763-4204-b843-944179c787c5/45de8345-76f2-4898-974f-aea62167fb4a.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1950000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6544e0d9d374b65e6d87f255",userId:"6533fb61fa2662129d9aef1c",developer:"IGO",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/5db1e81f-0986-4b28-b4f3-93d74ee6cdaf.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"The Paragon",priceFrom:"860431",sizeFrom:"416",selectedLocation:"Business Bay",ownLocation:"",lng:"55.27403764470699",lat:"25.177757839158154",exterior:"https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/f1d99a7e-c1da-4a78-96c7-08fd08c730e0.png",description:"Paragon by IGO Residences is a modern 21-story project near Downtown Dubai. It offers studio to three-bedroom apartments, combining urban style with city living benefits. Designed for excellence, these apartments provide a high-class lifestyle and numerous amenities for discerning buyers.",descriptionRu:"Paragon  IGO Residences -    , 21 ,      ,         .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/c8b131a4-87d4-4369-a83f-c7e47b7828d8.png",price:"1104195",size:"723"}],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/104ac0bd-c64e-49a7-9aef-3c48f6817a89.png",price:"860431",size:"416"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/015eeba1-ccc6-4da3-8697-d8e78d211b46.png",price:"1100000",size:"416"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/87f5d3e5-34dc-4819-8191-d722253e88b0.png","https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/7171d31a-647b-4f6a-a77f-a7d83c2aa297.png","https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/44b27421-d217-4aff-a96f-7d2057c540ea.png","https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/3d46b66f-d6ca-40eb-9a3a-fb6dfc0e83eb.png","https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/7343c7d1-1619-4539-8e7b-6291b5bc8438.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/54b4ab70-951f-42c1-b304-291b20626b51.png","https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/164420d1-87eb-4253-bd00-556e1a777563.png","https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/1d878205-b803-450c-b428-eccd3c91d212.png","https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/c73a7ec6-0c14-4196-b3d5-6c2fb3e7b928.png","https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/2c6f1d1d-7652-4285-9ba8-fcb040600a7c.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/b85b5011-318b-4832-b972-91a3c6816054.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/7d092b45-a788-45ae-93ce-231edc199dd0.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3fc53ad2-8d83-4f25-a184-872bce25d30f/a7003a76-003b-4465-befb-478baa9d403a.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"60",sum1:"662517",percent2:"0",sum2:"0",percent3:"40",sum3:"441678",percent4:"0",sum4:"0"},Studio:{percent1:"60",sum1:"516258.6",percent2:"0",sum2:"0",percent3:"40",sum3:"344172.4",percent4:"0",sum4:"0"}}},{_id:"65488814aad46e2246526214",userId:"6533fb61fa2662129d9aef1c",developer:"Sobha",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/ac091726-ec27-41af-ad5d-1dadb2587621.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Ready",projectName:"Forest Villas",priceFrom:"22000000",sizeFrom:"8700",selectedLocation:"Mohammed Bin Rashid City (MBR)",ownLocation:"",lng:"55.31100639765569",lat:"25.17722575508033",exterior:"https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/c4ea6de5-28a6-424a-93ec-da1286f2a763.png",description:"Forest Villas is a collection of four and five-bedroom villas introduced by the developer Sobha. This community is located in MBR City and is a part of the Sobha Hartland residential area, which is situated not far from the center of Dubai.",descriptionRu:"Forest Villas         ,    Sobha.    MBR City       ,     .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/df1be553-a854-489e-be36-04edcad5b8c3.png",price:"22000000",size:"8700"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/15a44d64-64ad-4a1e-bbdf-a1ef3d8eabc8.png","https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/164b7ebe-43bc-4c1c-b8e8-1c48a1483816.png","https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/0ba3341f-4e5e-4936-80a0-feeb6206d83f.png","https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/7198e5fd-0ee7-496b-920d-3adc2bd11202.png","https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/71e74430-7631-4fe7-9bb1-75b35ac08cd4.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/3cc9b06b-98c3-4a78-90a3-414c35b42a56.png","https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/4423fa57-43c0-41ab-bb5e-142f982dab17.png","https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/8267529a-44ad-4291-992f-8e0c7fd882cf.png","https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/f25bd607-bee4-49e0-93b3-99cc22e9663f.png","https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/28d1fe58-3646-4afd-9f95-50d57b8c3498.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/9d0db3ff-e025-4f9b-8fe8-2694f0b918c1.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/f09001b6-0d09-4f56-8b2a-b27c33c391d7.png",name:"Golf Course",nameRu:"",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/107e9077-869f-4e52-a990-4847e439f464/562dc373-2d12-454e-9cf2-6828a6cadbb6.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"80",sum1:"17600000",percent2:"0",sum2:"0",percent3:"20",sum3:"4400000",percent4:"0",sum4:"0"}}},{_id:"65488a57aad46e2246526215",userId:"6533fb61fa2662129d9aef1c",developer:"Ellington",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/3b70571f-0cb0-4bcd-9b4d-9aea3a0a06b1.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Ellington The Portman",priceFrom:"650000",sizeFrom:"409",selectedLocation:"Jumeirah Village Circle (JVC)",ownLocation:"",lng:"55.21864013173161",lat:"25.052235590006305",exterior:"https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/58047983-d878-4547-bb40-9bd3c0bcb0f1.png",description:"Ellington's Portman in Jumeirah Village Circle (JVC) is a promising investment, by Ellington Properties. Construction is underway.",descriptionRu:"Ellington's Portman  Jumeirah Village Circle (JVC) -       Ellington Properties.  .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/e6d756ea-275a-4206-99fd-54716df3c529.png",price:"650000",size:"409"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/de01cb86-5a24-4b26-a434-32d4ee04d1c7.png","https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/080065d4-cb8b-4b38-b824-2174a11de3d6.png","https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/0829643f-ee0d-46bb-a974-69fd8eb2ff75.png","https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/fb5b0505-5e08-4403-b551-e2243c6bb978.png","https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/5c7924d3-0b85-471f-8990-91989f9c23fb.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/1c8b4795-abdb-4668-bac4-693f27d5a60d.png","https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/81d9fc94-010b-4abd-846f-8f0cb5fffd08.png","https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/6b43a8a5-45bc-4832-979c-3528e9180365.png","https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/2b654bfb-58e7-47ba-aa98-1e12245cd08f.png","https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/ad2625e9-a0cc-4db1-b714-7ec429872fb8.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/247c8655-f43f-42e6-a4aa-c4d0ef974691.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/c4720666-d522-44bb-80fb-40d3e81dcd02.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/144e58c4-adfc-4421-8c19-30d37d934a2b/28f6cfbc-c153-49ec-8066-a01af291fd70.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"70",sum1:"455000",percent2:"0",sum2:"0",percent3:"30",sum3:"195000",percent4:"0",sum4:"0"}}},{_id:"65488fbdaad46e2246526216",userId:"6533fb61fa2662129d9aef1c",developer:"Nakheel",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/245933fe-64b1-42c0-83dd-00884ed7253b.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Canal Front Residences",priceFrom:"4900000",sizeFrom:"1980",selectedLocation:"Wadi Al Safa 5",ownLocation:"",lng:"55.25013847818712",lat:"25.191409013960556",exterior:"https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/e1ceb022-f605-49b5-8f62-a75de7d23dfe.png",description:"Canal Front Residences is a new waterfront project in the Al Safa area by Meydan, a renowned developer. The complex is conveniently located in the heart of the city, just a few steps away from Safa Park. The project is scheduled for completion in 2024.",descriptionRu:"Canal Front Residences         -,   Meydan.             .     2024 .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/c8c87a7a-01e6-480b-9c69-af85cc1dbe62.png",price:"4900000",size:"1980"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/3cbb427a-ddea-4dca-8150-fc39f975f2c9.png","https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/a9319127-7e5b-4d8d-b21e-1478668e7466.png","https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/69d7bf81-0efe-486a-b111-bd6ccba6d0c4.png","https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/d49129f7-7838-4393-81ff-b326c26b2dd9.png","https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/1ca68a9c-a1ef-4650-a205-874c2e95bed4.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/7be30414-5bc8-4c8f-ac27-bf3d5a009986.png","https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/f79bab14-c642-4e56-aee4-b7ac6554eaaa.png","https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/ca1f8dc0-d18e-4b9b-9056-0cc26304c9c5.png","https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/173db319-db59-4c14-9007-af3754148771.png","https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/0be9732f-3ea0-45fd-b093-b1e1bb96da36.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/6d22e849-dbec-463c-bf4f-3cea571bd064.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/b65c92a3-fdfe-4e93-82b0-48decb8fabe9.png",name:"Pool Area",nameRu:" ",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/3dcda05f-1cbf-4bcc-a685-14695a8bbc9e/ab575489-3fb0-4ad8-a67d-d454a59df800.png",name:"Tennis Court",nameRu:"",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{2:{percent1:"60",sum1:"2940000",percent2:"0",sum2:"0",percent3:"40",sum3:"1960000",percent4:"0",sum4:"0"}}},{_id:"654892bbaad46e2246526217",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/208b9107-5fa2-44dd-a4ef-285b6989125f.png",selectedType:"Project for investment",selectedYear:"20",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Creekside 18",priceFrom:"8100000",sizeFrom:"2723",selectedLocation:"Dubai Creek Harbour",ownLocation:"",lng:"55.344926616395554",lat:"25.203473830737906",exterior:"https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/f875e3e9-04de-4d87-bffa-0169e6d5bb2a.png",description:"In the newly developed Dubai Creek Harbour area, you can find the premium residential complex called Creekside 18. Two impressive 37-story towers, connected by an elegant podium, rise above the surroundings, offering breathtaking views of the canal, Dubai's skyline, and Creek Beach.",descriptionRu:" Dubai Creek Harbour    Creekside 18 - 2   37         Creek Beach.",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/f21248e3-513d-4898-96ed-324d027dcab6.png",price:"8100000",size:"2723"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/cfaa9148-7629-4099-9cda-e7fee5a29907.png","https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/be23085b-7c5b-4d3c-b942-8d9a6e3db35e.png","https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/cfbbae53-d526-4aaf-9676-ad9df47b6be4.png","https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/32a7affd-2150-4c70-9f2f-03389615cee2.png","https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/39797ff7-f006-4aad-a0c8-6f256a10b14f.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/e6c6340e-a4b5-4ff7-9614-2b94a10cfa9c.png","https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/119e5ef2-3097-4370-8f53-9794319aadda.png","https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/311d2c3f-4ef5-43d2-b5b3-1e6407a39dd7.png","https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/6b6afc5f-ae6a-45ee-88c9-da39194c1367.png","https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/320a8281-87e5-4ef1-825a-359a5a30d240.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/ec478ae9-cf6f-46c9-9f19-e34d016818e1.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/7a808f49-172b-48a5-b49f-cdd78ea213c8.png",name:"Gym Facility",nameRu:"-",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/0e6ad7a5-09e0-4244-9d5b-5fb811cc0526/722533f7-7394-480f-a673-c748bfae4812.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{3:{percent1:"100",sum1:"8100000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"65489564aad46e2246526218",userId:"6533fb61fa2662129d9aef1c",developer:" Seven Tides",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/05023fa1-e3f8-4466-a93e-54809b7eded7.png",selectedType:"Project for investment",selectedYear:"20",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Golf Views",priceFrom:"550000",sizeFrom:"415",selectedLocation:"The Meadows",ownLocation:"",lng:"55.15364069286657",lat:"25.080689066557426",exterior:"https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/b898a574-26c2-4f1b-a74b-8a90e7d47213.png",description:"Golf Views Seven City by Seven Tides is a residential complex consisting of two interconnected 27-story towers with glass facades. The residential complex is located in the Jumeirah Lakes Towers area. Golf Views Seven City is the largest project by Seven Tides, which is quite remarkable.",descriptionRu:"Golf Views Seven City by Seven Tides        27-    .      Jumeirah Lakes Towers. Golf Views Seven City     Seven Tides ,  .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/d9ff0cf2-e4b0-433d-b80a-acb812092cec.png",price:"550000",size:"415"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/7c3913c8-8f19-4909-ab72-d63873c73425.png","https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/777d4087-6312-455c-9d2a-f8d5354fd05b.png","https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/c35d2fa3-a6fe-4260-a9c0-275d27b6ef28.png","https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/af7aa886-fea7-4e14-a3d0-386eef6a9f0a.png","https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/29b056c5-ef60-48c2-a941-f5be991637a5.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/af3897a9-81a6-47f4-86d3-1389dd7132cb.png","https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/3f35621c-bc34-4dc2-a65d-46d02566bb85.png","https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/00aa192c-622f-419a-b04d-15d69cd63649.png","https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/6e523a99-7e37-4800-bb9c-ee815ef12146.png","https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/3ad5237e-0725-4cf5-b5a9-c2c4789d9be3.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/5cd10a72-c9a2-4aee-a4e1-077fff92e8c8.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/b33df9a0-ffc7-46fa-a42f-d73d8707ba2f.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/67efa632-3dfc-4377-aa8a-d828b14e6c35/4abdcdd0-0803-4166-a871-ff59acf138cc.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"100",sum1:"550000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"65489825aad46e2246526219",userId:"6533fb61fa2662129d9aef1c",developer:"Aqua Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/6b53312d-97a7-4b07-bbcb-56cbd28c7102.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"O Ten",priceFrom:"925000",sizeFrom:"448",selectedLocation:"Dubai Healthcare City",ownLocation:"",lng:"55.325459907916404",lat:"25.233458744692395",exterior:"https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/405731bd-e85e-480a-92c5-a65dec851917.png",description:"O Ten Apartments by Aqua Properties is a ten-story residential project located in Dubai Healthcare City (DHCC), offering studios, one-bedroom, and two-bedroom apartments. These luxurious homes are situated within a gated complex, ensuring the security and safety of its residents.",descriptionRu:"O Ten Apartments by Aqua Properties     ,   Dubai Healthcare City (DHCC),  ,      .       ,       .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/65e655f1-f377-4109-bf0b-c63beecada75.png",price:"925000",size:"448"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/ff2e8010-50a4-485a-b171-de0df4dde342.png","https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/cc4acb88-f732-4cce-b5f6-382bee6bba8e.png","https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/e953b507-1fd7-4945-9938-0977acfd1ac4.png","https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/b5228884-4ec4-49b4-80d7-8570aa5e43b3.png","https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/1474fb8f-f53b-4838-9d4c-19205157b0e1.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/50236bd4-72e7-4d68-bbc8-55ad432fb513.png","https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/4acc39a7-ee07-4165-85e0-26fff804fb9b.png","https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/4046d7dd-ba9b-444b-a449-0c493e7e4d6a.png","https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/e40ebbad-01fa-46c8-9eba-607c800e5bc5.png","https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/872c87a1-1ed9-492c-b57a-b7e6095f3b9f.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/9bc0c079-3f49-483b-8475-607c84317eb4.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/179fcb74-1bb4-490b-b88f-c26acc5d1aeb.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/94919ad2-64bc-481d-81c0-5f9e5ca296ce/90e3e37b-cd3a-41bd-9644-d723686a5300.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"100",sum1:"925000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"65489ad4aad46e224652621a",userId:"6533fb61fa2662129d9aef1c",developer:"Nakheel",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/5ce069b2-7107-4c25-83c7-d3140a3bd5da.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"3",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Seven Palm",priceFrom:"3550000",sizeFrom:"1130",selectedLocation:"Palm Jumeirah",ownLocation:"",lng:"55.13847705541484",lat:"25.112251556492655",exterior:"https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/723d5341-a0a5-458e-bded-bab64d9cf5e8.png",description:"Seven Palm includes two buildings: one with private residential units, and the other with a luxurious hotel and hotel residences. Both buildings are connected by a suspended terrace, and they boast a stunning terrace with the region's largest suspended infinity pool at the top.",descriptionRu:"Seven Palm       .       .         .               Infinity.",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/8ebc7faf-ebf4-4316-ab7e-f05b42f7be07.png",price:"3550000",size:"1130"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/eab2e334-ccc4-4edb-8f6c-600f00e3d617.png","https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/47e00896-88f6-4d8b-9d68-45f7c4d6086c.png","https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/0e028710-3768-4c8c-a7cb-fe1f30903f05.png","https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/56d831bd-bf57-4579-b48f-689836a43975.png","https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/08335179-d5b2-4b0b-965c-4313b9ca414b.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/29d8c56b-16b0-4d87-bf00-632e9c985086.png","https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/41349cae-b74f-421e-8d7b-5d99c2219136.png","https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/60b6e755-9b04-46cd-83bb-0f49c1097be7.png","https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/f2f9e9a3-276c-4fec-bb61-83cd36ed2465.png","https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/08acad7e-ded0-4045-a598-d7238a6d38aa.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/cd097c50-6594-4d89-9b1a-2f2e4ab044dd.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/9de1423d-5758-4ba9-b7de-0305ce77f226.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a0aba44e-1105-492e-a9be-9fc083d15b71/2ac8b0da-982d-41ee-abb8-e3f334d087ce.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"5",sum1:"177500",percent2:"75",sum2:"2662500",percent3:"20",sum3:"710000",percent4:"0",sum4:"0"}}},{_id:"65489da5aad46e224652621b",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/3c20fc42-ab3d-4d0b-86d2-db192bf9b697.png",selectedType:"Project for investment",selectedYear:"19",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Vida Residence",priceFrom:"3800000",sizeFrom:"1431",selectedLocation:"Emirates Hills",ownLocation:"",lng:"55.355431074827166",lat:"25.198101764532836",exterior:"https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/becaa2c6-f9ed-425f-b810-c3b009ddd5c5.png",description:"These apartments have laundry, balconies, spacious kitchens, and closets. 3-bed units with maid's room and terraces. Near beach and marina, with amenities like gym, pool, playground. Valet parking and 24/7 concierge. Direct Creek Beach access.",descriptionRu:"  , ,   .       .     . , ,  .  , 24/7 .     .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/f53d05cb-53c1-4838-829c-1f313412df2f.png",price:"3800000",size:"1431"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/901e4430-b43e-47a4-9371-2adb45cb6fdd.png","https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/91537491-ddda-4e52-90aa-7a0902ef4112.png","https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/8c4e9df1-196c-41c9-a8e4-ec550f4a10e9.png","https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/d903aee3-f337-4897-9c38-aa2de41ceb4f.png","https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/fac82420-81b4-4c19-8f58-b0151fef3d49.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/f67c1cd7-f05b-46f5-a170-95f782730319.png","https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/92c1e05b-44f4-4787-b7dc-247f2e682bc1.png","https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/91d1af9a-5968-430d-8bdc-47f068abc3c7.png","https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/977e9911-6fc5-400d-9514-b2d8972cd203.png","https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/499ba462-d942-4ea2-bab3-a5def8dd9073.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/cb4bc80b-00e9-4214-9c01-87a9229d8164.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/9fd25250-e62e-4f86-a3e5-cef93db0fc1c.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/50d58369-3b2c-429f-9ca2-288026272186/e31404d7-5fe0-4554-9abd-5d9939775373.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{2:{percent1:"100",sum1:"3800000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6549e31c7234f239eeb0e10a",userId:"6533fb61fa2662129d9aef1c",developer:"Tiger",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/658483e8-724f-48db-a7dc-bd68f9bff184.png",selectedType:"Project for investment",selectedYear:"22",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"V Tower",priceFrom:"550000",sizeFrom:"583",selectedLocation:"Complex (Dubailand)",ownLocation:"",lng:"55.3806732744285",lat:"25.085088883815875",exterior:"https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/8460d3b9-3c5d-4dd7-82e5-b39828b82f5d.png",description:"V Tower in Dubai's central Vadi Al Safa 5 is a luxury architectural masterpiece. It offers a variety of residences, including studios, 1, 2, and 3-bedroom apartments, and duplexes.",descriptionRu:"V Tower    ,       .    ,     Vadi Al Safa 5,           ,   1, 2  3 , .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/b848f7f5-29c9-4df0-8da0-3cf437328f6f.png",price:"550000",size:"583"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/1514c7f4-dbbf-42ac-b545-c0400b8e5316.png","https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/7760d31a-2b4e-42bf-9f09-b81c98db32ad.png","https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/657d1c02-74df-48cc-b389-75b3df628937.png","https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/bd11912b-6142-48e0-babf-f681e6b8bbe1.png","https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/dd4b1e36-89b5-4f8f-b546-39c330e64e00.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/acf178bf-bb69-444f-93ff-e8254c244411.png","https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/98968729-6759-4ab9-816b-21b2b90ea3ed.png","https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/a4ba1394-5661-46f3-bf90-481661935c63.png","https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/94835d9e-b1fe-4d37-8c63-a491b8b67423.png","https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/d11a4b89-1709-4363-9337-8f066bf3cc8e.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/c76d7521-d73a-4099-91f5-b2c6e869309d.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/442057ec-d886-4057-a2b2-64b94fe8e14f.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/6a0b9242-31c1-466f-8ffe-35eec95d7b1a/7fd600d7-e6b4-4430-8fc8-93477028caa7.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"100",sum1:"550000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6549e5187234f239eeb0e10b",userId:"6533fb61fa2662129d9aef1c",developer:"Imtiaz Developments",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/bd8b5f96-d340-4dc4-8661-8a521169368d.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Pearl House",priceFrom:"650000",sizeFrom:"412",selectedLocation:"Jumeirah Village Circle (JVC)",ownLocation:"",lng:"55.21291524303999",lat:"25.054199254913115",exterior:"https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/16241737-8146-4af8-8916-0a50a7be6175.png",description:"Pearl House is a new residential complex from the reliable developer Imtiaz Developments. This project is located in the Jumeirah Village Circle area, surrounded by lush greenery, developed infrastructure, and excellent views of the surroundings.",descriptionRu:"Pearl House        Imtiaz Developments.      Jumeirah Village Circle,     ,       .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/d56d1679-e864-44cd-9070-fc6348281e83.png",price:"650000",size:"412"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/b98f363b-3480-41d1-a549-0b238d9d3b88.png",price:"670000",size:"412"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/45b74254-c360-453e-9aa7-2f430391ffa3.png","https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/f0e3a5de-4882-4e8d-a318-ec2c34d351e4.png","https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/d5bc4368-f4b0-4caf-9dba-c31b57d821d2.png","https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/308a39a9-663e-4e80-9c80-9c90c010ccb8.png","https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/ed03010f-f586-4ff1-bd56-687eda735682.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/e0110a48-abf5-4562-8989-4c3bf0457300.png","https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/0f022d68-f020-4d9d-9b6d-36e67ee8a7b8.png","https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/410f7506-933f-4b89-af03-0bb8d1189abf.png","https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/099519cb-d6ec-4978-b38f-8776ff61436d.png","https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/9a1af673-a2d3-48c9-a136-a2047d5a533c.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/6b0f06ab-e24a-491f-b9cb-3df8cfe16466.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/932616cc-ffd8-4dcc-9249-8e4d94345ba2.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/82e79f65-b239-4dbc-b4a8-cd38b60778f5/77075c5c-9c36-4afb-a278-ca1ce3013a80.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"20",sum1:"130000",percent2:"40",sum2:"260000",percent3:"40",sum3:"260000",percent4:"0",sum4:"0"}}},{_id:"6549f2c47234f239eeb0e10c",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/14999144-0dde-4def-ac8c-68c103e7d50e.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"3",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Orchid Creek Beach",priceFrom:"1380000",sizeFrom:"760",selectedLocation:"Dubai Creek Harbour",ownLocation:"",lng:"55.341329916102595",lat:"25.202943080498763",exterior:"https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/cdeefc3e-1bfb-4b87-89b0-50492a5b1c4c.png",description:"Orchid Creek Beach, by Emaar Properties, comprises two 11-story buildings in Dubai. It features beautifully designed apartments with 1, 2, and 3 bedrooms, along with 4-bedroom penthouses.",descriptionRu:"Orchid Creek Beach,  Emaar Properties,    11-   .       1, 2  3 ,   4- .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/5357f44b-ce25-40b4-85f2-b0857b92f5a3.png",price:"1380000",size:"760"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/45512632-963c-4473-a80a-df905acbc276.png",price:"1420000",size:"690"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/b220d85d-09b6-4174-ad4c-545626fba8d2.png","https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/b9e8e66e-3d8e-45db-ab72-4a974fee9287.png","https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/202631bd-f7d4-48d9-a72e-530e63c0ddf7.png","https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/0ace71f3-b385-475b-ab05-41909d29a76a.png","https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/f6722077-9376-43c5-bfe5-86c7e4e9551d.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/f58b78d6-5cc4-4bfb-a35b-b42283fc1833.png","https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/41ca2a1d-8047-4991-8d9e-c4a620969e9f.png","https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/7262d391-3e1c-4581-89db-ca962d10c7f3.png","https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/022400d8-0a08-4a2f-b32d-d2ad3967802c.png","https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/c2584356-d2d9-437e-b6bc-b0cc22d55da4.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/765e6ae8-ead5-415e-8e3d-7f0cdce58625.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/a7576741-28f3-44d9-a002-16a864426f46.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/651d34a4-27f2-42b5-95b0-a5364d390a1c/f433e4d4-dcbb-493d-8a77-0a997d36b4cc.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"70",sum1:"966000",percent2:"0",sum2:"0",percent3:"30",sum3:"414000",percent4:"0",sum4:"0"}}},{_id:"6549f4747234f239eeb0e10d",userId:"6533fb61fa2662129d9aef1c",developer:"Dubai Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/b82af801-0268-4783-bf8f-e34ac8bc8359.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"3",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Town house",selectedStatus:"Off-Plan",projectName:"Mudon Al Ranim",priceFrom:"2400000",sizeFrom:"2277",selectedLocation:"Mudon",ownLocation:"",lng:"55.271656622995515",lat:"25.025233639495482",exterior:"https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/7bc34589-00f4-4c80-9108-60d770292e55.png",description:"Mudon Al Ranim offers luxurious 3-4 bedroom townhouses, providing residents with a harmonious connection to nature and excellent amenities. Townhouse sizes vary from 206 to 277 square meters, and buyers can select between 2-story and 3-story options.",descriptionRu:"Mudon Al Ranim     3-4 ,         .     206  277  ,      2-  3- .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/71aebd6b-be8b-4934-8dd5-679e8de10490.png",price:"2400000",size:"2277"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/50755970-123f-4487-963f-5761603f400a.png","https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/46e3df54-56f7-4092-a073-b193f6efd3c1.png","https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/9025c49f-a5b0-4dad-aa79-7275be1662dd.png","https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/97565421-94e7-48b6-a2a1-3c963f5ecaf9.png","https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/195ddef8-7828-4c4d-a0ba-343b5d437932.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/528ec431-2c8b-4fe9-9838-d4945efdae06.png","https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/250698ef-bb07-4858-a298-467f7b847c6f.png","https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/95fc4c6f-6fe3-4af2-84ca-ce74d3afb0c2.png","https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/96aa57cf-64fb-4230-9b3c-e2cff2c4c6f7.png","https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/dedbfa09-96e3-4f66-a1a4-876cd213fd14.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/fa16ec0b-bfe3-45ca-ab25-d78fe20c9bce.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/6167ab39-1458-41be-9f8e-aa7782212d51.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/899b892d-8de2-447b-8f3b-e679ced230f3/e973f546-145d-4c64-abc8-46ec008b8911.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."}],activeProject:!0,paymentPlans:{3:{percent1:"10",sum1:"240000",percent2:"50",sum2:"1200000",percent3:"40",sum3:"960000",percent4:"0",sum4:"0"}}},{_id:"6549f6087234f239eeb0e10e",userId:"6533fb61fa2662129d9aef1c",developer:"Nakheel",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/78a97749-cc78-415a-a5f2-9d6ae369f845.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Luma 21",priceFrom:"685000",sizeFrom:"552",selectedLocation:"Jumeirah Village Circle (JVC)",ownLocation:"",lng:"55.20478726182951",lat:"25.048603355480232",exterior:"https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/071922b5-a845-4e98-8fba-b4d21ca38557.png",description:"These premium apartments offer a range of sizes, comfort, beauty, and modern living amenities. Luma 21 is ideal for busy professionals, couples, and families.",descriptionRu:"     , ,      . Luma 21     ,   .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/8302da76-d4ef-45ac-adf0-ac8e161c4e1d.png",price:"685000",size:"552"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/f21f5d73-f1f9-429d-b41c-148cfdbbe300.png","https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/cd185b2d-9b5f-4d42-938f-1eb3e33372a4.png","https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/abe15bf2-9236-479d-a45e-c55126595599.png","https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/746bec17-7d53-411d-bd2c-8fd839d2bb82.png","https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/688ad117-36ed-4b44-8936-4623ce309300.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/8fa23c2b-d10f-499a-aee8-f02aec69c084.png","https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/22e36cd5-8193-4d9e-99aa-dd1bdf7dab4e.png","https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/1597d16a-38f6-40eb-b95f-2923436ac78c.png","https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/963c37d0-cc24-4a08-83c2-02e8cfbd8b2c.png","https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/16159c07-7b22-4de7-9797-2828a4ce4f18.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/024b2cdb-ba18-472d-b326-47a9b6f3a8d6.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/e2fcb0ae-bf15-465e-8750-c95445cc8dc9.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e1d3bf-c34b-4d14-b4cb-db6cceb1f6c2/27bc609c-3f09-4e52-959e-36ce97c749ac.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"10",sum1:"68500",percent2:"40",sum2:"274000",percent3:"50",sum3:"342500",percent4:"0",sum4:"0"}}},{_id:"6549fa307234f239eeb0e110",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/d2431424-f8eb-49fe-962e-be8984fc13b4.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Act One/Act Two",priceFrom:"6500000",sizeFrom:"1778",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.27222425488033",lat:"25.19178576826771",exterior:"https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/07f9c105-0b91-4dc9-bd5b-294b6d7ce0ee.png",description:"Act One/Act Two is a new premium high-rise residential complex by the well-known and reliable developer, Emaar. The complex is located in the Downtown Dubai area, right in the center of Dubai.",descriptionRu:"Act One/Act Two       -      Emaar,      Downtown Dubai   .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/59cfd0ad-725f-4902-ac4d-c06abbc54995.png",price:"6500000",size:"1778"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/3b3400be-69bb-4171-8cf5-cf3c9b15205c.png","https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/85317b24-b8cc-408d-9440-1476ad2f2989.png","https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/e7ebdf83-7afc-4509-8bed-28eb33afcafa.png","https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/05e1a7a8-e65f-4094-813c-8958ab698a43.png","https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/8cf67828-ec7b-4e5f-9f7c-9741500f1617.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/49135f22-7c18-4c47-9650-eabcd6bada88.png","https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/e453d9bf-a2f2-48af-9b1a-c597b5a802d6.png","https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/2a28e6bb-8308-4b8d-80a7-3a7a81ecd968.png","https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/fb423e3d-2e5c-4581-a1d2-557f91378b7e.png","https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/dde6a44d-091a-4791-8a5e-6f5fed3ce228.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/d7ea31d2-b311-4724-b4bc-d93074f0f00a.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/8b5490f1-19be-4922-bb2d-20e8cf4ec502.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/1c09ad3d-a979-4602-908d-71c1767528f6/0c61de4b-16f0-4df1-958b-e9dfea49438b.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{3:{percent1:"100",sum1:"6500000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"6549fbef7234f239eeb0e111",userId:"6533fb61fa2662129d9aef1c",developer:"Sobha Realty",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/cbafacd6-7959-44f7-97aa-6091ac023a98.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Sobha SeaHaven",priceFrom:"7500000",sizeFrom:"1444",selectedLocation:"Dubai Harbour",ownLocation:"",lng:"55.14544534851774",lat:"25.089007499812933",exterior:"https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/b733203b-ecb1-48ce-84c7-ec35334a88b2.png",description:"Sobha SeaHaven is a new premium-class residential complex by the well-known developer Sobha Realty. Another real estate masterpiece with unique architectural touches is situated in the developed Dubai Harbour area, offering breathtaking views of the surroundings.",descriptionRu:"Sobha SeaHaven     -    Sobha Realty.            Dubai Harbour,      .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/0753b5e0-c774-4665-9138-6e0fe528ccde.png",price:"7500000",size:"1444"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/b8a7c3a1-6629-4f0e-b3ba-3d7b138ad748.png","https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/18652444-358f-409f-953c-64fe6f683fd6.png","https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/ff8d7a74-0c25-484c-b367-082b6f4fe3d4.png","https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/15b6d5a6-017c-421c-b31a-5379939c4b7f.png","https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/b55d2361-e588-4dbd-b6a9-6a3f6a79f418.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/51cdf5d6-2223-474d-81ed-706ff864d08f.png","https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/a607001e-414c-4981-8faa-6cc623605a22.png","https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/97d1b4e8-ddd7-4f5f-a263-9030c19b57b7.png","https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/20341120-f209-4eb7-9225-e4583dc4bea2.png","https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/4b219b02-4fdf-4988-9906-032bbc88b7a4.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/8e359800-e0fb-42b2-98d3-599acf60a8c7.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/dca6da9b-22de-4f8e-ad94-54f5aebf1858.png",name:"Library",nameRu:"",desc:"A private library awaits within the property, providing a quiet sanctuary filled with books, perfect for avid readers to immerse themselves in captivating stories.",descRu:"    ,  ,      ,    ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a0e662a5-824e-4a16-af62-aceae33017dc/504bb44c-2e22-4863-bb40-db07117d4af2.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"20",sum1:"1500000",percent2:"60",sum2:"4500000",percent3:"20",sum3:"1500000",percent4:"0",sum4:"0"}}},{_id:"6549ff207234f239eeb0e113",userId:"6533fb61fa2662129d9aef1c",developer:"Omniyat Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/5675b37e-742a-4c49-b077-4d2e5cabc1bf.png",selectedType:"Project for investment",selectedYear:"21",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"The Sterling",priceFrom:"2600000",sizeFrom:"1125",selectedLocation:"Business Bay",ownLocation:"",lng:"55.28358160231413",lat:"25.186918040139858",exterior:"https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/951bc4a3-fa0d-4e99-b6e1-3630538499cd.png",description:"Sterling by Omniyat features two towers: West House and East House, offering fully furnished studios and 1-4 bedroom apartments with European appliances. Situated between Dubai Water Canal and Burj Khalifa, it offers stunning downtown and Burj Khalifa views.",descriptionRu:"Sterling  Omniyat   : West House  East House,        1-4     .        ,          .",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/8ee2ec86-ef56-4755-bd6c-0ba7111344c0.png",price:"2600000",size:"1125"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/081090d8-cdaa-4e16-ae29-6e497b4cb1e3.png","https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/d80482d4-83b4-4878-9b17-80bb1941865e.png","https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/ccd1276f-2ab0-440f-9716-9c8c59d104b2.png","https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/18f2922c-b18c-4c17-b2ee-4ac695a47a2f.png","https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/39d5e75c-4bcd-4a37-9281-3f4a47ac30d5.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/c7ac4e13-9b8d-4bbd-aff6-a715fcbd48ce.png","https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/d990613b-1603-4665-a57b-f22b53162c25.png","https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/a20897c0-079d-4291-a644-feea5d72115b.png","https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/258dd945-3b68-40d6-a69b-1d8aa078a265.png","https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/09fa326f-8802-45a1-85dc-a44e77d15084.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/25855f5f-50db-4b8b-a782-f800a915c002.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/e4d6d674-3bb5-48a2-898f-9a761a9086db.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/28dd5aa2-91d2-43e1-bd7a-db22575b1b80/e0e23471-a2ce-42d5-80db-d71de9e8b276.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"2600000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"654c842113dbb72968e007eb",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/4edec6d6-b4f9-4d18-9945-246b60fc36c5.png",selectedType:"Project for investment",selectedYear:"27",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Golf Grand",priceFrom:"4650000",sizeFrom:"1770",selectedLocation:"Dubai Hills",ownLocation:"",lng:"55.25608741843569",lat:"25.12176841117171",exterior:"https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/5ba18c15-d1ae-466c-b773-6159e23cebac.png",description:"Golf Grand is a new unique project by the well-known developer Emaar Properties, located in the heart of the prestigious and green Dubai Hills area.",descriptionRu:"Golf Grand        Emaar Properties,         Dubai Hills.",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/2ea036aa-6240-4ba7-a2a7-8a9a669adbd0.png",price:"4650000",size:"1770"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/b4dac89a-e90c-415b-a379-b24192da79ad.png","https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/b7ef6f1d-cf7b-4bf0-b1c4-94a97d518a54.png","https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/b0434348-35dd-45ed-9521-b9dcd6b15538.png","https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/5d01a4d1-8143-43ac-a4fb-337255118d5f.png","https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/d9404b0f-eb31-4412-a26c-112d710b02c1.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/50846ff3-e58b-4210-bca0-958b23182161.png","https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/ff2807a3-9086-4390-ba3f-926e7ce37e1d.png","https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/8dc6a918-e943-4737-835b-5fe5bc8ba34e.png","https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/3849c7c3-efc3-4129-ab40-adbc65ea7276.png","https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/12313f9b-1599-4593-aee6-add9a2619c3f.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/d3d0b417-6f09-44b1-b5ea-c6fbec2ed84a.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/60bcd9d4-6d81-4101-b917-4c2bafe78784.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/744d82ce-812c-4ac7-83ea-f19cc1ee07a2/1c20f4f4-d4c0-4b57-8954-cd94dbfc876b.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{3:{percent1:"0",sum1:"0",percent2:"0",sum2:"0",percent3:"100",sum3:"4650000",percent4:"0",sum4:"0"}}},{_id:"654c859113dbb72968e007ec",userId:"6533fb61fa2662129d9aef1c",developer:"ORO 24",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/adbedbf2-a773-4ebb-a24c-f6ce7bfc2b19.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Levanto",priceFrom:"600000",sizeFrom:"396",selectedLocation:"Jumeirah Village Circle (JVC)",ownLocation:"",lng:"55.21341090963967",lat:"25.049762219410816",exterior:"https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/b706c989-4938-41b3-ab9b-484258d6c293.png",description:"The new residential project Levanto by the developer ORO 24 is poised for tremendous success among buyers. The project's popularity is driven by its convenient location, unique set of amenities, and distinctive architectural features.",descriptionRu:"   Levanto   ORO 24      .     ,       .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/8032a0e7-8e74-4082-aeae-9a03c710409f.png",price:"600000",size:"396"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/4f273640-6caa-4c11-a628-fd003c36f0ab.png","https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/1c04be9f-4e84-40b8-802a-4753f275fc51.png","https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/23e8389d-9ed6-447e-a0e8-1e6fb53c35c7.png","https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/d578b14d-5a58-4a66-b098-7a2c01979fb3.png","https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/4214f635-025c-49f0-a20e-e72abc0295fc.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/faf9d32e-2f68-4fb0-930b-4e27c33ed449.png","https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/ee0146e3-67eb-4b0a-b39e-148991bf4cdd.png","https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/63447e2e-cf96-4df9-a0f3-33b2b301ec8b.png","https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/98383bfa-cfd4-402d-87d9-17c79709127e.png","https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/1b22e502-9e49-4023-adb2-da46b3c51930.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/7b1a2d01-215c-48b0-911d-ea78da2feebb.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/7580f72a-4107-426c-b808-62d44cb5f774.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b5badcb2-15f9-4180-ac7c-e6ba4597f56c/cd09bb06-7c97-4c1b-9b4c-4480f3b3a66f.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"0",sum1:"0",percent2:"0",sum2:"0",percent3:"100",sum3:"600000",percent4:"0",sum4:"0"}}},{_id:"654c877a13dbb72968e007ed",userId:"6533fb61fa2662129d9aef1c",developer:"Danube Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/7012999f-e315-447c-924e-c5ab8f4c1783.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Elitz 2",priceFrom:"700000",sizeFrom:"386",selectedLocation:"Jumeirah Village Circle (JVC)",ownLocation:"",lng:"55.395048344448476",lat:"25.161373515963774",exterior:"https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/8d965edc-f1c4-41f9-acea-751de46c12e4.png",description:"Elitz 2     -   Danube Properties.     Jumeirah Village Circle,         ,    .",descriptionRu:"Elitz 2     -   Danube Properties.     Jumeirah Village Circle,         ,    .",plans:{1:[],2:[],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/88214902-b126-4b1b-9d0b-ff18af39be3b.png",price:"700000",size:"386"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/d3de8ae3-6f2b-4350-8af1-592e1620c251.png","https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/ed68925d-e2ec-4811-821c-6beeda7acd03.png","https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/0594b936-ffbd-4694-b9aa-88252babd420.png","https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/0744628d-ab47-4751-a0b6-c727b0006a3e.png","https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/6ed8bd8d-655d-46d2-a747-45e64fc9a6c9.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/f875faa6-22c8-4d69-8dd5-bb6f55ae53da.png","https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/bfb70dbf-455e-4880-a087-74a96ef876a6.png","https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/6450e14c-940e-477f-96c6-d981d75351a4.png","https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/c71b9a91-ba28-4521-b7e3-8f975edbcebb.png","https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/aaeedc78-cab5-4a92-b308-3381271f8473.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/39a181b1-d69a-477a-ac98-b2e6b8028186.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/61a63bd3-73a2-404a-9c78-2390881b222d.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/40fc9795-6a56-4198-b0d4-4b20590fad47/4c9ebd00-df0f-43e2-a2f4-b9f09fa4b843.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{Studio:{percent1:"10",sum1:"70000",percent2:"55",sum2:"385000",percent3:"35",sum3:"245000",percent4:"0",sum4:"0"}}},{_id:"654ca58813dbb72968e007f1",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/17c3ddfe-4ca6-4157-a8fd-6d0ac00e3334.png",selectedType:"Project for investment",selectedYear:"19",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"4+",selectedProperty:"Villa",selectedStatus:"Ready",projectName:"Aseel",priceFrom:"9900000",sizeFrom:"5395",selectedLocation:"Complex (Dubailand)",ownLocation:"",lng:"55.26955104673189",lat:"25.188409227970155",exterior:"https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/dd40ceaa-db73-464b-8ba3-7bc1925e57b2.png",description:"Aseel -      55    Arabian Ranches Golf Course.     ,        .   4, 5, 6  7         ,   ",descriptionRu:"Aseel -      55    Arabian Ranches Golf Course.     ,        .   4, 5, 6  7         , .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/25f3de3f-948f-4886-a37c-f20b2a6406a5.png",price:"9900000",size:"5395"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/bbf8de8c-78c2-496d-ad4c-499e374e8f98.png","https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/a461e614-bea0-4657-ad95-64f0804d249d.png","https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/e4a759ea-95bb-4012-a3a7-b0e3afae8ca6.png","https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/393c6a2a-3973-4231-9373-1e2bbcf625c2.png","https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/523d76fc-5a43-403c-b7dc-a42934b8cc06.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/ac246ac6-79f5-4479-8ec0-92675962ef35.png","https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/44ce7f35-f961-4771-ac80-4b5528f483f2.png","https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/abfd7885-7eb8-4a95-ae29-a0c9fd2ea85d.png","https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/128f2f48-ec6a-4d27-8ad3-961fe851216d.png","https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/450eaa0f-d863-4a3c-ae52-448edc93a176.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/57a12112-1d5c-4918-bb44-5da6554164a7.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/89ff4273-bef7-426f-8f1b-d6169ebd1ee7.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/7e9e2912-ca4e-4138-ac5b-0b313676de34/ac655ede-5f87-4385-82d1-0c7a1c47f0e3.png",name:"Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"65",sum1:"6435000",percent2:"0",sum2:"0",percent3:"35",sum3:"3465000",percent4:"0",sum4:"0"}}},{_id:"654ca6d913dbb72968e007f2",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/114364ed-df40-4a37-a4f5-584b5e19b665.png",selectedType:"Project for investment",selectedYear:"22",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Grande Signature Residence",priceFrom:"3600000",sizeFrom:"1265",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.27508733565352",lat:"25.191196614396482",exterior:"https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/c3d0e01a-d190-465e-8762-401fdb830f95.png",description:"The residential complex Grande Signature Residence is a new project by the well-known and reliable developer Emaar Properties. The complex is situated in the heart of Dubai, in one of the most prestigious areasDowntown Dubai.",descriptionRu:"  Grande Signature Residence           Emaar Properties.      ,        Downtown Dubai.",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/0a3891f4-9520-4b82-8ae3-38732f416cfe.png",price:"3600000",size:"1265"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/32b510ec-9f1a-4876-b8a7-13331fbd7e16.png","https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/adc83364-0eeb-49dd-90dc-3442a66cbc7e.png","https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/4693062d-1fc2-4b22-8a45-e4f8512e7c90.png","https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/6f096913-cf58-4a3a-83e1-2d2f0b20a60e.png","https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/63c6e898-cf37-4934-9d7f-4f5875eac73d.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/db1a6808-1f76-4793-997f-474692f3d6f0.png","https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/df2361ec-a3e8-4585-9adb-2b63c650852a.png","https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/9b364871-2395-483c-aeb8-bf2b17550f71.png","https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/acecc630-c95e-49e4-a7e2-f43ce5a18fe0.png","https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/34dd1707-bf8a-438a-be47-d5e24c90fef4.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/d069bbef-69fa-46f4-80a8-21b2dd0c6074.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/c220dd75-c138-4d65-b0b6-dd29d315c012.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/b8d55642-27ce-4c65-9d2d-1f68d6b4d9ef/e604c054-6594-4c82-b47a-be06b06c6ef9.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"40",sum1:"1440000",percent2:"0",sum2:"0",percent3:"60",sum3:"2160000",percent4:"0",sum4:"0"}}},{_id:"654cb6ab13dbb72968e007f3",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/8625d6de-e58b-4baa-abcf-2c2305f8fa51.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Forte",priceFrom:"2700000",sizeFrom:"1083",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.265241789430654",lat:"25.19409284780154",exterior:"https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/520fb9e5-ea86-4ae4-9e83-a5704edd40bf.png",description:"Forte offers residents a luxurious, stylish, and comfortable haven in a magnificent location. From striking one-bedroom apartments with modern design to elegant four-bedroom family homes, every detail is perfected. Forte brings together luxury, culture, and a refined lifestyle.",descriptionRu:"Forte   ,       .            ,   . Forte    ,     .",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/69461335-21b9-4d27-b17d-12d21b4761ff.png",price:"2700000",size:"1083"}],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/59dac076-14e6-4a50-a0c2-f0143bb77bc5.png",price:"5700000",size:"1709"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/9b057920-b8a9-4050-8cab-77b2177e20c2.png","https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/63fbe3dd-8366-4534-ac4d-360bffc5dee9.png","https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/d1f745b1-692d-4263-9d34-6312436d8f73.png","https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/2a672b6c-b22e-4ec4-abde-9249bc37efa6.png","https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/e342697f-d382-4613-9e5c-f775c73743c4.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/d437fb83-caa2-4740-bc5d-54143356ec0d.png","https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/47e156ea-097c-48b3-a60c-45c9d5ea8012.png","https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/64b087ea-22b0-4017-9d67-3e7881e9d0d2.png","https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/b336aebe-ad54-4b8f-baa8-00565365dc4e.png","https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/909ebecd-cf71-4d14-9248-97a65507f23d.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/219c7cb1-6800-4dbf-b0b4-816d7bc7c273.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/ccdab440-b227-48c1-aeaf-81ae91cc9c4a.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/5d422cd3-1305-4829-b530-31e5e6542750/abd07072-59b5-4555-bd07-3fec4acc9785.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."}],activeProject:!0,paymentPlans:{2:{percent1:"70",sum1:"1890000",percent2:"0",sum2:"0",percent3:"30",sum3:"810000",percent4:"0",sum4:"0"},3:{percent1:"50",sum1:"2850000",percent2:"0",sum2:"0",percent3:"50",sum3:"2850000",percent4:"0",sum4:"0"}}},{_id:"654cc3f513dbb72968e007f4",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/b2e76aaf-aaea-497c-910a-5347da476aa2.png",selectedType:"Project for investment",selectedYear:"23",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"1",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Burj Royale",priceFrom:"1910000",sizeFrom:"631",selectedLocation:"Downtown Dubai",ownLocation:"",lng:"55.279780579160104",lat:"25.192062589376576",exterior:"https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/e96ca24c-b6f6-4c00-b677-0d2d5f10c60a.png",description:"Burj Royale, the latest addition to Downtown Dubai, offers views of Burj Khalifa and Dubai Fountain. Developed by Emaar Properties, Dubai's trusted real estate developer, it joins other popular projects like Arabian Ranches, The Valley, Dubai Hills Estate, and Emaar Beachfront.",descriptionRu:"Burj Royale,    Downtown Dubai,        .  Emaar Properties,    ,    Arabian Ranches, The Valley, Dubai Hills Estate  Emaar Beachfront.",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/989166be-14fb-4d16-bf75-5cbb1d243580.png",price:"1910000",size:"631"}],2:[],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/c390f17b-5513-448e-8956-5b8db58af3e4.png","https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/92254e7a-d4dc-4837-94b7-435d9b4f5ae4.png","https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/4304dd5d-481e-4014-b01b-ac4101e2b3ad.png","https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/667c1603-97fe-4639-9706-d447a5db5748.png","https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/cf0f407b-a743-4adf-afd3-24bb46129c54.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/f2f4b3a9-fbf5-4682-8a48-757482e66d3b.png","https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/1ff15bc8-226f-4a85-a217-3fda5a7aa79e.png","https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/8e981f2c-44ad-47df-8ac0-df0c42f29d10.png","https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/37e54cba-3d65-4d91-b38a-6b94c1fd2666.png","https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/aabac824-1a41-48c6-9acf-100e66187e4f.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/82f780b9-6165-4cce-aa6d-c222311252e3.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/07d02815-2172-459f-bd7a-6417623577a1.png",name:" Tennis Court",nameRu:" ",desc:"Residents have the privilege of on-site tennis courts, where tennis lovers can practice their skills, fostering a sense of community and active living.",descRu:"     ,       ,         ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/779c0df1-7702-475d-8799-743b525d4f81/ec1f21e0-f079-4903-9e29-7104d1a3f5d6.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"100",sum1:"1910000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"654cc57f13dbb72968e007f5",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/c53e0a3c-d3ed-465c-81bb-77655eea4bbb.png",selectedType:"Project for investment",selectedYear:"22",selectedMonth:"1",selectedBathroom:"Auto",selectedBedrooms:"2",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Collective 2.0",priceFrom:"1760000",sizeFrom:"742",selectedLocation:"Dubai Hills",ownLocation:"",lng:"55.24608934045277",lat:"25.112091961425257",exterior:"https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/00ceb202-7db6-4fbf-b8b3-611bd65cb013.png",description:"One of Dubai's leading developers, Emaar Properties, is renowned for its ambitious and elite real estate projects. Within its extensive portfolio, the Collective 2.0 project stands out, situated in the Dubai Hills community.",descriptionRu:"     Emaar Properties       .       Collective 2.0,    Dubai Hills.",plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/4d82804a-959a-4aff-bdc0-a00b6b7b8c8c.png",price:"1760000",size:"742"}],3:[],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/da01646b-29e7-4a73-bd26-76644bccc2e3.png","https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/868b7c60-46cd-45e7-acad-85a11da7b53a.png","https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/634e09f9-3985-4025-988a-19ccc7826769.png","https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/2a63b156-5211-4991-aafe-e83949cfe7c2.png","https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/2d302f1f-0107-44b7-a8fc-efc76009bff5.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/cc4b83f2-aa7e-495a-bb7e-4e40b743a8e4.png","https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/5d7e42f1-5dee-4616-90b4-8dbe6b89d296.png","https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/14d77a49-5292-461c-831a-d2a4dbaa10f7.png","https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/cd0f55e0-2ba2-4c3d-a2e4-915becf29385.png","https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/c8c4ec52-8178-40e1-ad95-cc101e014fb7.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/8c048cd3-d045-42ac-a32f-3d16457a629a.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/ab9b07ae-e2ba-48ad-9289-4816a7012ec7.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/de7942ac-a172-4227-8ae5-ac4f6fcf8396/3cffb943-ff38-48b5-b6be-f3c1a657a31f.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."}],activeProject:!0,paymentPlans:{2:{percent1:"30",sum1:"528000",percent2:"0",sum2:"0",percent3:"70",sum3:"1232000",percent4:"0",sum4:"0"}}},{_id:"654cc6e913dbb72968e007f6",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/fe045ac0-cc51-497d-b7cc-0516795194ea.png",selectedType:"Project for investment",selectedYear:"22",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Park Heights II",priceFrom:"2935000",sizeFrom:"1609",selectedLocation:"Dubai Hills",ownLocation:"",lng:"55.24626566790141",lat:"25.123372988656225",exterior:"https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/49cb4469-0dee-451c-a886-1975831f0bec.png",description:"Park Heights II by Emaar Properties is an exceptional complex featuring 1, 2, and 3-bedroom apartments, located in Dubai Hills Estate, Dubai.",descriptionRu:"Park Heights II  Emaar Properties,      1, 2  3 ,   Dubai Hills Estate, .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/a99b3e18-6c26-43ad-9335-e9194989234b.png",price:"2935000",size:"1609"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/13daf919-5bb8-4fa9-9498-8d50e3584a33.png","https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/3ffedb28-2ba5-4de3-ba7c-c7d7009ffb77.png","https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/6ef1c716-ff4a-4b39-9c4c-f0f4f26f7050.png","https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/7700a8ba-3265-43d9-b736-ae32f6117efb.png","https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/248159aa-b19c-4d0e-b9fc-0d7f1c43ccb5.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/133ecdfe-9fb5-4c13-ac97-e7d2fe99d6e4.png","https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/a4ca110c-1642-49e6-b7b9-a197f708e4d3.png","https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/01e120e7-05a0-4139-824f-3ca46ab1ee66.png","https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/4c80bac6-3b21-4a1e-aa51-900cc5993f08.png","https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/c52d0e55-173e-4776-b3c7-bc08d4868962.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/ca8be843-c4ea-48e3-afee-6870e53bb84f.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/ce8111b7-f9d6-4e18-a0ca-f665fc4e7182.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/8bbf801f-c566-4fcc-b86a-ab056951775c/e1a95f3d-c690-47f8-8279-422c257a79a1.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."}],activeProject:!0,paymentPlans:{3:{percent1:"100",sum1:"2935000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"654cc8fc13dbb72968e007f7",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/995419f8-c0e7-4ba3-9752-5eec2f20f16d.png",selectedType:"Project for investment",selectedYear:"20",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Ready",projectName:"Park Point",priceFrom:"1850000",sizeFrom:"874",selectedLocation:"Dubai Hills",ownLocation:"",lng:"55.24371546166799",lat:"25.11256877803425",exterior:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/17112604-fa73-4f69-ac61-2eb6a6388190.png",description:`Emaar introduces "Park Point" in Dubai Hills Estate, bringing a peaceful lifestyle. It offers 1, 2, and 3-bedroom apartments and duplexes, elegantly designed, ranging from 668 to 2770 square meters. The apartments feature turquoise pools with views of the Burj Khalifa, the world's tallest building.`,descriptionRu:'Emaar  "Park Point"  Dubai Hills Estate,    .     ,    ,      668  2770  .        -,     ',plans:{1:[],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/531014a3-abfd-4b22-91c9-113d9623c5f7.png",price:"1850000",size:"874"}],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/4202a700-deeb-46d3-9ac6-840666e1e8ab.png",price:"2924000",size:"1381"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/7787ecc7-3353-4b86-91b9-7a4a2b3a8157.png",price:"3300000",size:"1614"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/eadea42e-8940-47b6-b656-b8f26b0bb782.png",price:"3340000",size:"1577"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/d77180c8-fe0f-44cf-844f-d4eefb86e26e.png",price:"3357000",size:"1583"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/61e5c9cb-6d8e-479d-98ae-aa3d917deba4.png",price:"3386000",size:"1091"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/f352372c-1356-45d7-877f-4cf3b795322e.png",price:"3538000",size:"2015"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/a10ffebe-ac25-489e-92d3-4cc2135ebd05.png","https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/fd80cfba-d17d-46ec-8ff7-fed6a6c5dfed.png","https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/a808586b-a236-48e2-bc05-524066cca66f.png","https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/fac44fc4-6098-4468-a4ff-ccd4daddb337.png","https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/ed5f5d6f-1d70-462e-9f73-71fe2f9fb03e.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/dd905f04-1d3e-47f7-a104-067ac90be3de.png","https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/634f5637-dec9-49f8-afdc-bd49d56d4a62.png","https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/b85aae82-d27a-4834-a629-e6d8afdad7c5.png","https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/6c3674fd-f36f-40b2-91a7-fd3840c3833d.png","https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/ed5801a0-0d48-4c73-9266-83b465214f07.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/8c657998-c7a1-40f5-ba08-731d84fa1719.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/d0ed9960-128a-4e2c-b8ee-d6f7479e4db5.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/daeba9de-e54d-431a-83d8-ce10bfa56b75/6a52c2da-1015-4837-b4bb-e932afe57563.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{2:{percent1:"100",sum1:"1850000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"},3:{percent1:"100",sum1:"2924000",percent2:"0",sum2:"0",percent3:"0",sum3:"0",percent4:"0",sum4:"0"}}},{_id:"654cce5a13dbb72968e007f8",userId:"6533fb61fa2662129d9aef1c",developer:"Emaar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/194c39c5-7195-47b7-8407-cd610880f05f.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Park Field",priceFrom:"3125000",sizeFrom:"1359",selectedLocation:"Dubai Hills",ownLocation:"",lng:"55.24545285896593",lat:"25.107228732330878",exterior:"https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/c7c4a75f-e582-457a-871f-aa6b82139cc7.png",description:"Park Field, a premium residential complex, exceeds expectations for comfort and luxury. Situated in a well-developed neighborhood, it boasts emerald green golf courses, parks, shopping venues, and sports facilities, providing a host of amenities for residents to enjoy.",descriptionRu:"Park Field,   ,      .     ,   -   , ,      ,      .",plans:{1:[],2:[],3:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/3c253b92-9c5f-4521-8ea1-44557f165d02.png",price:"3125000",size:"1359"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/61ea8449-efc0-4b61-91c0-e1c225fdf6d8.png",price:"3200000",size:"1359"}],"4+":[],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/02859495-109b-4e3a-a8e8-074be41eb53b.png","https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/f2f098b8-858f-4ff3-9432-344f185710b1.png","https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/aae019e7-ef60-4f00-9d86-3bb8285ed153.png","https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/f98fb959-61eb-46e7-ade5-f42be26c76aa.png","https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/caae4e69-0aac-4305-9a4c-4c587a495874.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/05192a79-9acd-4315-94f0-d2a942b4d300.png","https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/8aeb8533-6a27-43b3-a001-2610b5bcb82b.png","https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/b0abcca3-0240-4909-9bad-748dfea1bda6.png","https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/010bf9a3-ef04-407a-b7ea-0c3cfd37cbef.png","https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/b808557c-91a1-4c5c-b4a8-dd9f8d87f9e6.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/9c30730e-d493-4176-90ce-d54ec65f956e.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/4713b0b1-8cc5-4bb6-b703-667aea368fa9.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/64f9d9e9-941a-4b8e-85cc-e5641f36408e/6f821333-5477-4df8-9491-f286c1858c51.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."}],activeProject:!0,paymentPlans:{3:{percent1:"10",sum1:"312500",percent2:"70",sum2:"2187500",percent3:"30",sum3:"937500",percent4:"25",sum4:"781250"}}},{_id:"654e308bf5c4162c0be03aa7",userId:"6533fb61fa2662129d9aef1c",developer:"Aldar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/92ecb0ff-f5ff-4f6c-afc1-f08c662a6441.png",selectedType:"Project for investment",selectedYear:"25",selectedMonth:"3",selectedBathroom:"Auto",selectedBedrooms:"3",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Yas Golf Collection",priceFrom:"895690",sizeFrom:"464",selectedLocation:"YAS Island",ownLocation:"",lng:"54.59799544221162",lat:"24.48481059851643",exterior:"https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/171d34ff-5192-499c-ad92-b5e10526fe86.png",description:"Yas Golf Collection is a resort-style complex by Aldar Properties, situated on Yas Island. The complex overlooks the Yas Links golf course and the mangrove forests of Abu Dhabi.",descriptionRu:" Yas Golf Collection       Aldar Properties,    .        Yas Links    -.",plans:{1:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/f6d96141-c3da-40f7-b4c1-dd4b697a92a0.png",price:"1638801",size:"951"}],2:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/c4a12ed9-c15f-4d8a-a146-5d6473882cae.png",price:"2624691",size:"1057"}],3:[],"4+":[],Studio:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/3df4c1fc-0633-4172-8d46-035cbcbe3f52.png",price:"895960",size:"464"}]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/ae642fdc-9515-4d8c-a26f-c922de7d6d5e.png","https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/63d2fa68-5d29-4129-a4dc-bc9b0844c408.png","https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/92906d00-1a4c-4aca-942c-496989ae45b8.png","https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/6a0f330c-4b93-4108-9ce9-52a83f9def1e.png","https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/332e2d88-fb4c-49ea-ae27-1a8990acfb36.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/1af4c020-4371-41aa-bfa0-c6fb69ca5203.png","https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/dfd05943-4bdf-4d64-a1ed-caffb2dff0ad.png","https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/5ed948de-daa6-47c1-ab1c-509648683e11.png","https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/2e66aaab-0d31-4bc8-a366-d93daccad633.png","https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/a4919194-fb0e-414c-ba1d-647bccc7698d.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/1ac2b28a-f7d7-4323-b837-22009f40a01d.png",name:"Park",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/8b63d034-38a0-4e21-9349-56e7a6c3198f.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/e7e59e40-be75-4405-b695-27689f54f10f/8a1d8591-ecd2-43b4-a5ff-ba3d6be8d42c.png",name:"Golf Course",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{1:{percent1:"10",sum1:"163880.1",percent2:"30",sum2:"491640.3",percent3:"60",sum3:"983280.6",percent4:"0",sum4:"0"},2:{percent1:"10",sum1:"262469.1",percent2:"30",sum2:"787407.3",percent3:"60",sum3:"1574814.6",percent4:"0",sum4:"0"},Studio:{percent1:"10",sum1:"89596",percent2:"30",sum2:"268788",percent3:"60",sum3:"537576",percent4:"0",sum4:"0"}}},{_id:"654e3f6ff5c4162c0be03aa9",userId:"6533fb61fa2662129d9aef1c",developer:"Aldar Properties",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/73e84d6e-9ccd-4a32-86d0-decc4c0e09ca.png",selectedType:"Project for investment",selectedYear:"26",selectedMonth:"2",selectedBathroom:"Auto",selectedBedrooms:"Studio",selectedProperty:"Villa",selectedStatus:"Off-Plan",projectName:"Yas Park Views",priceFrom:"4863745",sizeFrom:"3186",selectedLocation:"YAS Island",ownLocation:"",lng:"54.62216284208718",lat:"24.504524536793067",exterior:"https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/7fdedf12-c1e9-4342-89e1-987783e1a74b.png",description:"Yas Park Views, a novel project by Aldar Properties, introduces a lifestyle of comfort, luxury, and leisure. This Mediterranean-inspired oasis seamlessly blends with nature, providing an ideal home for all.",descriptionRu:"Yas Park Views,    Aldar Properties,    ,   .  ,   ,    ,     .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/d2c4267f-1e89-4a14-95b1-8db30dfde2c3.png",price:"4863745",size:"3186"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/f688ba22-6aed-440e-aeff-960e767f9f23.png","https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/47f81fd3-1b7d-4f15-8064-d5e83a37f70f.png","https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/283300cb-0a11-4207-9bbe-52a933e3b0b2.png","https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/21c15e3c-acef-48f5-9bb6-4506b7b12494.png","https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/3c8b0ff7-c674-422e-ba57-9ee340393761.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/c3fd415a-e0ac-4515-866b-378736dac539.png","https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/37b7d7f4-412e-4b69-a4d9-168e9ae2afa7.png","https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/9608c501-3162-401d-b963-c189bb61af66.png","https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/9d58079d-df79-47aa-99a9-53c97bdf6c16.png","https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/1047cf1e-3914-4800-99c6-9b576fa25695.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/110530d9-7dd4-4bc9-94ce-c87d434eb557.png",name:"Golf Course",nameRu:"  ",desc:"Enjoy access to an adjacent 18-hole golf course, offering challenging gameplay and scenic views, catering to golfers of all levels right at your doorstep.",descRu:"    18-   ,      ,     ,     ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/4eb5ffae-ec5c-4b64-aced-8aef79e481ac.png",name:"Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1ba3ec9-77c7-4eb1-a223-e78717eca08d/7d7711f2-b256-4855-bccd-0faa9e8e16a5.png",name:"Park",nameRu:"",desc:"This property boasts a nearby park, a serene green space perfect for picnics and leisure, providing a refreshing escape surrounded by nature.",descRu:"     -   ,     ,       ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"5",sum1:"243187.25",percent2:"35",sum2:"1702310.75",percent3:"60",sum3:"2918247",percent4:"0",sum4:"0"}}},{_id:"654e4120f5c4162c0be03aaa",userId:"6533fb61fa2662129d9aef1c",developer:"Select Group",imageSrcMain:"https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/a768f4a7-156d-4138-ade5-b2b30441f84a.png",selectedType:"Project for investment",selectedYear:"24",selectedMonth:"4",selectedBathroom:"Auto",selectedBedrooms:"4+",selectedProperty:"Apartments",selectedStatus:"Off-Plan",projectName:"Six Senses Residences",priceFrom:"28329000",sizeFrom:"2851",selectedLocation:"Palm Jumeirah",ownLocation:"",lng:"55.12251647337375",lat:"25.098005118818975",exterior:"https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/447f4441-2832-48fe-9b3d-64711e4b2e88.png",description:"Six Senses Residences, a luxury project on Palm Jumeirah's waterfront in Dubai, is a collaboration between Select Group and ESIC. In partnership with Six Senses Hotels Resorts Spas, it introduces the first Six Senses hotel and signature residences in the UAE, providing opulent seaside living.",descriptionRu:"Six Senses Residences          Select Group  ESIC.   Six Senses Hotels Resorts Spas,     Six Senses       ,     .",plans:{1:[],2:[],3:[],"4+":[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/8ec3a473-0e4b-4d37-bb46-58820fb2474b.png",price:"28329000",size:"2851"},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/ced48029-b5c5-44bd-a982-4577faf17869.png",price:"28704060",size:"3400"}],Studio:[]},architectureGallery:["https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/2476adc4-2949-4b8b-ab30-7a79ab843919.png","https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/ba4dc01b-559c-4865-b63c-145b5864d1fc.png","https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/016bfb19-61aa-443d-99e3-1045bde43e7a.png","https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/5da4c989-fb22-4b77-83fc-411aaa505e7b.png","https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/9ce4d86d-609d-4414-93c5-830872dff3bc.png"],interiorGallery:["https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/e281e452-1497-49c7-a015-16fe0c5420b6.png","https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/03cf0aab-31cc-4b15-96bf-8b9bc5ec1173.png","https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/10e590d3-a1e9-440d-845b-15f671fb6b7a.png","https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/81766c66-e461-4b0e-a007-20d121e49da3.png","https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/f432a9a7-9802-468f-adbf-ea2afd733a57.png"],infrastructures:[{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/f62ac8c9-7a89-4fd3-84ad-ed59369d369a.png",name:"Gym Facility",nameRu:"-",desc:"Stay fit with the on-site gym facility, equipped with modern machines and expert trainers, ensuring residents have a convenient space for their fitness routines.",descRu:"    -  ,      ,       ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/99777830-a4dd-43eb-923a-57afb0b3f62e.png",name:" Pool Area",nameRu:"",desc:"Indulge in the property's pool area, a delightful oasis with a sparkling pool, sunbathing decks, and a refreshing ambiance, ideal for unwinding and entertaining guests.",descRu:"   -     ,     ,      ."},{imgSrc:"https://images-props.s3.me-south-1.amazonaws.com/a1179ce2-f778-4df6-8376-3ac6ec41a266/68baf797-4016-4a89-84a3-28039dc5b6f9.png",name:"Lounge Area",nameRu:" ",desc:"The property features a cozy lounge area, complete with comfortable seating and a diverse menu, offering an inviting space for socializing and relaxation.",descRu:"              ,       ."}],activeProject:!0,paymentPlans:{"4+":{percent1:"40",sum1:"11331600",percent2:"0",sum2:"0",percent3:"60",sum3:"16997400",percent4:"0",sum4:"0"}}}];function K1({img:t,placeholder:a,state:s,setState:l,items:f,valute:g,valueToChange:w}){return g?q.jsxs("div",{className:"select",children:[q.jsx("span",{children:a}),q.jsx("img",{src:t,alt:"selectIcon",width:18,height:18}),q.jsx("div",{className:"select__items",children:q.jsxs("div",{className:"select__itemsInputBox","data-valute":g,children:[q.jsx("input",{type:"number",className:"select__itemsInput",placeholder:"from",value:s[w].from,onChange:I=>l({...s,[w]:{...s[w],from:I.target.value}})}),g==="ft"?q.jsxs("span",{children:[g,q.jsx("sup",{children:"2"})]}):g,q.jsx("input",{type:"number",className:"select__itemsInput",placeholder:"to",value:s[w].to,onChange:I=>l({...s,[w]:{...s[w],to:I.target.value}})}),g==="ft"?q.jsxs("span",{children:[g,q.jsx("sup",{children:"2"})]}):g]})})]}):q.jsxs("div",{className:"select",children:[q.jsx("span",{children:a}),q.jsx("img",{src:t,alt:"selectIcon",width:18,height:18}),q.jsx("div",{className:"select__items",children:f.map((I,o)=>q.jsx(tU,{property:I,handleState:l,state:s,placeholder:w},o))})]})}function tU({property:t,handleState:a,state:s,placeholder:l}){const f=Math.random();return q.jsxs("div",{className:"form-group",children:[q.jsx("input",{type:"checkbox",id:f,onChange:()=>a({...s,[l]:s[l]===t?"":t}),checked:s[l]===t}),q.jsx("label",{htmlFor:f,children:t})]})}function ql({children:t,handlerClose:a,isVisible:s}){return q.jsxs("div",{className:`popup ${s&&"popup--active"}`,children:[q.jsx("div",{className:"popup__bgBlur",onClick:a}),q.jsx("div",{className:"popup__contentBox",children:q.jsx("div",{className:"popup__content",children:t})})]})}const nU=({handler:t,isVisible:a,id:s,handleDeleteProject:l})=>q.jsx("div",{className:"popupDeleteProject",children:q.jsx(ql,{handlerClose:f=>{f.preventDefault(),t(!1)},isVisible:a,children:q.jsx("div",{className:"popupDeleteProject__content",children:q.jsxs("div",{className:"popupDeleteProject__content-wrapper",children:[q.jsx("img",{src:"/assets/components/deleteAlert.png",alt:"Image alert",width:35,height:35}),q.jsxs("div",{className:"popupDeleteProject__content-texts",children:[q.jsx("h5",{className:"popupDeleteProject__content-title",children:"Are you sure you want to delete?"}),q.jsx("p",{className:"popupDeleteProject__content-descr",children:"This action cannot be undone. All values associated with this field will be lost."})]}),q.jsxs("div",{className:"popupDeleteProject__content-buttons",children:[q.jsx(Zc,{className:"button--orange",handler:()=>{l(s),t(!1)},children:"Delete field"}),q.jsx("button",{className:"popupDeleteProject__content-btn",onClick:()=>t(!1),children:"cancel"})]})]})})})}),aU=({filterCriteria:t,setFilterCriteria:a,data:s,handleToggleTop:l,handleHidden:f,handleDeleteProject:g})=>{const[w,I]=Te.useState(""),[o,M]=Te.useState(!1),[B,L]=Te.useState([]),O=H=>{a({...t,projectName:H.target.value}),Z({...t,name:H.target.value})};Te.useEffect(()=>{Z(t)},[t]);const j=H=>{I(H),M(!0)};function Z(H){L(eU.filter(te=>{if(H.projectName&&!te.projectName.toLowerCase().includes(H.projectName.toLowerCase())||H.Type.length>0&&!H.Type.includes(te.selectedType)||H.Location.length>0&&!H.Location.includes(te.selectedLocation))return!1;if(H.Size.from&&H.Size.to){const J=parseInt(H.Size.from),K=parseInt(H.Size.to),W=parseInt(te.sizeFrom);if(W<J||W>K)return!1}if(H.Price.from&&H.Price.to){const J=parseInt(H.Price.from),K=parseInt(H.Price.to),W=parseInt(te.priceFrom);if(W<J||W>K)return!1}return!0}))}return q.jsxs("section",{className:"projectsProjectsP",children:[q.jsxs("aside",{children:[q.jsx(Zm,{to:"/",children:q.jsx("img",{src:"/assets/Global/authLogo.svg",alt:"Image logo",width:36,height:36})}),q.jsx(Zm,{to:"/project",children:q.jsx("button",{children:q.jsx("img",{src:"/assets/ProjectsPage/btnPlus.svg",alt:"Image btn",width:26.67,height:26.67})})})]}),q.jsxs("div",{children:[q.jsx("div",{className:"filterPage__wrapper",children:q.jsxs("div",{className:"filterPage__content-filerSelect",children:[q.jsxs("span",{className:"filterPage__content-search",children:[q.jsx("img",{src:"/assets/ProjectsPage/search.svg",alt:"searchIcon",width:20,height:20,className:"filterPage__content-searchImg"}),q.jsx("input",{type:"text",name:"projectName",value:t.projectName,onChange:O,className:"filterPage__content-searchInput",placeholder:"Search by address"})]}),q.jsx(K1,{placeholder:"Type",img:"/assets/Global/blackArrowBottom.svg",items:s.map(H=>H.generalInfo.projectMainInfo.type).filter((H,te,J)=>H!==""&&J.indexOf(H)===te),setState:a,state:t,valueToChange:"Type"}),q.jsx(K1,{placeholder:"Size",img:"/assets/Global/blackArrowBottom.svg",valute:"ft",setState:a,state:t,valueToChange:"Size"}),q.jsx(K1,{placeholder:"Price",img:"/assets/Global/blackArrowBottom.svg",valute:"",setState:a,state:t,valueToChange:"Price"}),q.jsx(K1,{placeholder:"Area",img:"/assets/Global/blackArrowBottom.svg",items:s.map(H=>H.generalInfo.location).filter((H,te,J)=>H!==""&&J.indexOf(H)===te),setState:a,state:t,valueToChange:"Location"}),q.jsxs("button",{className:"filterPage__clearBtn",onClick:()=>{a({projectName:"",Type:"",Location:"",Size:{from:"",to:""},Price:{from:"",to:""}})},children:[q.jsx("img",{src:"/assets/Global/clearBtnIcon.svg",alt:"clearBtnIcon",width:20,height:20}),"Clear"]})]})}),q.jsxs("div",{children:[q.jsx("ul",{className:"filterPage__list",children:s.map((H,te)=>q.jsxs("li",{className:"filterPage__item",children:[q.jsx(Zm,{to:`/project/${H._id}`,children:q.jsxs("div",{className:"filterPage__item-wrapper",children:[q.jsxs("div",{className:"filterPage__item-image",children:[q.jsx("div",{className:"filterPage__item-imageWrapper",children:H.generalInfo.images[0]&&H.generalInfo.images[0].photos&&H.generalInfo.images[0].photos[0]&&q.jsx("img",{src:H.generalInfo.images[0].photos[0],className:"filterPage__item-img",alt:"Image flat",width:328,height:189})}),q.jsxs("div",{className:"filterPage__item-information",children:[q.jsxs("div",{children:[q.jsx("img",{src:"/assets/ProjectsPage/beds.svg",alt:"Beds img",width:18,height:18}),q.jsx("span",{children:H.generalInfo.projectMainInfo.rooms}),q.jsx("span",{children:"Bed"})]}),q.jsxs("div",{children:[q.jsx("img",{src:"/assets/ProjectsPage/calendar.svg",alt:"Year img",width:18,height:18}),q.jsx("span",{children:"2024"})]}),q.jsxs("div",{children:[q.jsx("img",{src:"/assets/ProjectsPage/size.svg",alt:"Size img",width:18,height:18}),q.jsxs("span",{children:["AED"," ",H.generalInfo.projectMainInfo.size]}),q.jsxs("span",{className:"filterPage__item-size",children:["m",q.jsx("sub",{children:"2"})]})]})]})]}),q.jsxs("div",{className:"filterPage__item-info",children:[q.jsx("span",{children:H.generalInfo.name}),q.jsxs("div",{className:"filterPage__item-name",children:[q.jsx("span",{className:"filterPage__item-location",children:H.generalInfo.location}),q.jsxs("div",{className:"filterPage__item-price",children:[q.jsx("span",{children:"AED"}),q.jsx("span",{children:H.generalInfo.priceFrom.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",").replace(/\.\d{2}$/,"")})]})]})]})]})}),q.jsxs("div",{className:"filterPage__item-buttons",children:[q.jsx("div",{className:"filterPage__item-favotite",children:q.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>l(H._id,!H.isTop),children:[q.jsxs("g",{filter:"url(#filter0_b_2362_2873)",children:[q.jsx("rect",{width:"28",height:"28",rx:"8",fill:"white"}),q.jsx("path",{d:"M13.4822 8.62489C13.6462 8.257 13.7282 8.07305 13.8424 8.0164C13.9416 7.96719 14.058 7.96719 14.1572 8.0164C14.2714 8.07305 14.3534 8.257 14.5174 8.62489L15.8236 11.5552C15.8721 11.664 15.8963 11.7184 15.9339 11.76C15.967 11.7968 16.0076 11.8263 16.0529 11.8465C16.1041 11.8693 16.1633 11.8755 16.2817 11.888L19.4723 12.2248C19.8728 12.2671 20.0731 12.2882 20.1622 12.3793C20.2397 12.4584 20.2757 12.5692 20.2595 12.6787C20.2409 12.8048 20.0913 12.9396 19.7921 13.2093L17.4088 15.3571C17.3204 15.4368 17.2761 15.4766 17.2482 15.5252C17.2234 15.5682 17.2079 15.6158 17.2027 15.6651C17.1968 15.7209 17.2091 15.7791 17.2339 15.8956L17.8995 19.034C17.9831 19.4281 18.0249 19.6251 17.9658 19.738C17.9145 19.8361 17.8203 19.9046 17.7111 19.9231C17.5855 19.9443 17.411 19.8437 17.0621 19.6425L14.2829 18.0395C14.1798 17.98 14.1282 17.9503 14.0734 17.9387C14.0249 17.9284 13.9747 17.9284 13.9262 17.9387C13.8714 17.9503 13.8198 17.98 13.7167 18.0395L10.9376 19.6425C10.5887 19.8437 10.4142 19.9443 10.2885 19.9231C10.1794 19.9046 10.0851 19.8361 10.0338 19.738C9.97476 19.6251 10.0165 19.4281 10.1001 19.034L10.7658 15.8956C10.7905 15.7791 10.8028 15.7209 10.797 15.6651C10.7918 15.6158 10.7763 15.5682 10.7515 15.5252C10.7235 15.4766 10.6793 15.4368 10.5908 15.3571L8.20754 13.2093C7.90833 12.9396 7.75872 12.8048 7.74012 12.6787C7.72397 12.5692 7.75996 12.4584 7.83741 12.3793C7.92658 12.2882 8.12686 12.2671 8.52742 12.2248L11.718 11.888C11.8364 11.8755 11.8956 11.8693 11.9468 11.8465C11.9921 11.8263 12.0326 11.7968 12.0658 11.76C12.1033 11.7184 12.1276 11.664 12.1761 11.5552L13.4822 8.62489Z",fill:`${H.isTop?"yellow":"#808080"}`,stroke:`${H.isTop?"yellow":"#808080"}`,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),q.jsx("defs",{children:q.jsxs("filter",{id:"filter0_b_2362_2873",x:"-50.9",y:"-50.9",width:"129.8",height:"129.8",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[q.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),q.jsx("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"25.45"}),q.jsx("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_2362_2873"}),q.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_2362_2873",result:"shape"})]})})]})}),q.jsxs("div",{className:"filterPage__item-nextButtons",children:[q.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>f(H._id,!H.hidden),children:[q.jsxs("g",{filter:"url(#filter0_b_2362_2870)",children:[q.jsx("rect",{width:"28",height:"28",rx:"8",fill:"white"}),q.jsx("path",{d:"M9.48387 17.4552L7.68913 19.25L8.75 20.3105L10.7394 18.3211C11.7001 18.872 12.7955 19.25 14 19.25C18.5 19.25 21.5 14 21.5 14C21.5 14 20.3926 12.0653 18.5161 10.5447L20.3109 8.74995L19.25 7.68945L17.2606 9.67883C16.2999 9.12795 15.2045 8.74995 14 8.74995C9.5 8.74995 6.5 14 6.5 14C6.5 14 7.60737 15.9346 9.48387 17.4552ZM11 14C11 12.3432 12.3432 11 14 11C14.5561 11 15.0751 11.1541 15.5218 11.4177L14.3836 12.5558C14.2603 12.5232 14.1335 12.5 14 12.5C13.1727 12.5 12.5 13.1727 12.5 14C12.5 14.1335 12.5233 14.2602 12.5559 14.3836L11.4178 15.5217C11.1541 15.0751 11 14.5561 11 14ZM17 14C17 15.6567 15.6567 17 14 17C13.4439 17 12.9249 16.8458 12.4782 16.5822L13.6164 15.4441C13.7397 15.4767 13.8665 15.5 14 15.5C14.8273 15.5 15.5 14.8272 15.5 14C15.5 13.8665 15.4768 13.7397 15.4441 13.6163L16.5822 12.4782C16.8459 12.9248 17 13.4438 17 14Z",fill:`${H.hidden?"#FF5959":"#4D4D4D"}`})]}),q.jsx("defs",{children:q.jsxs("filter",{id:"filter0_b_2362_2870",x:"-50.9",y:"-50.9",width:"129.8",height:"129.8",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[q.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),q.jsx("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"25.45"}),q.jsx("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_2362_2870"}),q.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_2362_2870",result:"shape"})]})})]}),q.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>j(H._id),children:[q.jsxs("g",{filter:"url(#filter0_b_2362_2868)",children:[q.jsx("rect",{width:"28",height:"28",rx:"8",fill:"white"}),q.jsx("path",{d:"M8 10.257C8 9.93402 8.23025 9.6722 8.51429 9.6722L10.2904 9.67189C10.6433 9.66172 10.9547 9.40656 11.0748 9.02909C11.0779 9.01916 11.0815 9.00692 11.0946 8.9625L11.1711 8.70138C11.2179 8.54128 11.2587 8.4018 11.3158 8.27712C11.5414 7.78458 11.9587 7.44255 12.441 7.35499C12.563 7.33282 12.6923 7.33291 12.8407 7.33302H15.1594C15.3078 7.33291 15.4371 7.33282 15.5591 7.35499C16.0414 7.44255 16.4587 7.78458 16.6843 8.27712C16.7414 8.4018 16.7822 8.54128 16.829 8.70138L16.9055 8.9625C16.9186 9.00692 16.9222 9.01916 16.9254 9.02909C17.0454 9.40656 17.4185 9.66203 17.7714 9.6722H19.4857C19.7697 9.6722 20 9.93402 20 10.257C20 10.58 19.7697 10.8418 19.4857 10.8418H8.51429C8.23025 10.8418 8 10.58 8 10.257Z",fill:"#FF5959"}),q.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7304 20.6664H14.2696C16.1247 20.6664 17.0523 20.6664 17.6554 20.0758C18.2585 19.4852 18.3202 18.5164 18.4436 16.5788L18.6214 13.7868C18.6884 12.7355 18.7219 12.2098 18.4193 11.8767C18.1167 11.5436 17.6058 11.5436 16.584 11.5436H11.416C10.3942 11.5436 9.88325 11.5436 9.5807 11.8767C9.27815 12.2098 9.31163 12.7355 9.37858 13.7868L9.55639 16.5788C9.6798 18.5164 9.7415 19.4852 10.3446 20.0758C10.9477 20.6664 11.8753 20.6664 13.7304 20.6664ZM12.8309 14.1254C12.8034 13.8362 12.5584 13.6252 12.2836 13.6541C12.0088 13.683 11.8083 13.9409 11.8358 14.2302L12.1691 17.7389C12.1966 18.0282 12.4416 18.2392 12.7164 18.2103C12.9912 18.1813 13.1917 17.9234 13.1642 17.6342L12.8309 14.1254ZM15.7164 13.6541C15.9912 13.683 16.1917 13.9409 16.1642 14.2302L15.8309 17.7389C15.8034 18.0282 15.5584 18.2392 15.2836 18.2103C15.0088 18.1813 14.8083 17.9234 14.8358 17.6342L15.1691 14.1254C15.1966 13.8362 15.4416 13.6252 15.7164 13.6541Z",fill:"#FF5959"})]}),q.jsx("defs",{children:q.jsxs("filter",{id:"filter0_b_2362_2868",x:"-50.9",y:"-50.9",width:"129.8",height:"129.8",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[q.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),q.jsx("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"25.45"}),q.jsx("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_2362_2868"}),q.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_2362_2868",result:"shape"})]})})]})]})]})]},te))}),q.jsx(nU,{handler:M,isVisible:o,id:w,handleDeleteProject:g})]})]})]})},rU=({token:t})=>{const a=Y0(),[s,l]=Te.useState({projectName:"",Type:"",Location:"",Size:{from:"",to:""},Price:{from:"",to:""}}),{data:f,isLoading:g,isError:w,error:I,refetch:o}=jF(`?nameStartsWith=${s.projectName}&type=${s.Type}&minSize=${s.Size.from}&maxSize=${s.Size.to}&minPrice=${s.Price.from}&maxPrice=${s.Price.to}&location=${s.Location}`),{data:M}=Lz(),[B]=Dz(),[L]=VF(),[O]=HF();Te.useEffect(()=>{o()},[M]),Te.useEffect(()=>{(!t||t==null)&&a("/")},[t,a]),Te.useEffect(()=>{w&&(I==null?void 0:I.status)===401&&(localStorage.removeItem("token"),a("/"))},[w,I,a]);const j=async(te,J)=>{try{await B({id:te,value:J}),o()}catch(K){console.error("Failed to hide project:",K)}},Z=async(te,J)=>{try{await L({id:te,value:J}),o()}catch(K){console.error("Failed to hide project:",K)}},H=async te=>{try{await O({id:te}),o()}catch(J){console.error("Failed to delete project:",J)}};return q.jsx("main",{children:g||w?q.jsx("div",{className:"loaderProjects__wrapper map",children:q.jsx("span",{className:"loaderProjects"})}):q.jsx(aU,{filterCriteria:s,setFilterCriteria:l,data:f,handleToggleTop:j,handleHidden:Z,handleDeleteProject:H})})};function sU({children:t,className:a}){return q.jsx("div",{className:`container ${a}`,children:t})}const iU=({handler:t,isVisible:a,onDeletePicture:s,infoProject:l})=>{const f=l.images.reduce((g,w)=>(g.push(...w.photos),g),[]);return q.jsx("div",{className:"popupProjects",children:q.jsx(ql,{handlerClose:g=>{g.preventDefault(),t(!1)},isVisible:a,children:q.jsxs("div",{className:"popupProjects__content",children:[q.jsx("button",{onClick:()=>t(!1),className:"popupProjects__content-closeBtnWrapper",children:q.jsx("img",{src:"/assets/ProjectPage/close.svg",alt:""})}),q.jsx("div",{className:"popupProjects__content-images",children:q.jsxs("ul",{className:"popupProjects__content-list",children:[f.map((g,w)=>q.jsx("li",{className:"popupProjects__content-item",children:q.jsx("img",{src:typeof g=="string"?g:URL.createObjectURL(g),alt:`Image ${w+1}`,width:384,height:203})},w)),f.length===0&&q.jsx(q.Fragment,{})]})})]})})})},Sp=({setFile:t,accept:a,children:s})=>{const l=Te.useRef(null),f=g=>{const w=g.target.files&&g.target.files[0];w&&t(w)};return q.jsxs("div",{onClick:()=>{var g;return(g=l.current)==null?void 0:g.click()},children:[q.jsx("input",{type:"file",accept:a,className:"fileUpload__input",ref:l,onChange:f}),s]})};function oU({img:t,setImg:a,title:s}){const l=f=>{a({...t,tempImg:f})};return q.jsx(Sp,{setFile:l,accept:"image/*",children:q.jsx("div",{className:"buildingInfo__fileUploader",children:q.jsxs("div",{className:"buildingInfo__fileUploader-content",children:[q.jsx("img",{src:"/assets/ProjectPage/addPhoto.svg",alt:"Img clip",className:"nextChat__content-clip",width:29,height:29}),q.jsx("span",{children:s})]})})})}function cU({img:t,setImg:a,title:s}){const l=f=>{a({...t,qrCode:f})};return q.jsx(Sp,{setFile:l,accept:"image/*",children:q.jsx("div",{className:"buildingInfo__fileUploader",children:q.jsxs("div",{className:"buildingInfo__fileUploader-content",children:[q.jsx("img",{src:"/assets/ProjectPage/addPhoto.svg",alt:"Img clip",className:"nextChat__content-clip",width:29,height:29}),q.jsx("span",{children:s})]})})})}function lU({img:t,setImg:a,title:s}){const l=f=>{a({...t,logoUrl:f})};return q.jsx(Sp,{setFile:l,accept:"image/*",children:q.jsx("div",{className:"buildingInfo__fileUploader",children:q.jsxs("div",{className:"buildingInfo__fileUploader-content",children:[q.jsx("img",{src:"/assets/ProjectPage/addPhoto.svg",alt:"Img clip",className:"nextChat__content-clip",width:29,height:29}),q.jsx("span",{children:s})]})})})}function uU({img:t,setImg:a,title:s}){const l=f=>{a({...t,logo:f})};return q.jsx(Sp,{setFile:l,accept:"image/*",children:q.jsx("div",{className:"buildingInfo__fileUploader",children:q.jsxs("div",{className:"buildingInfo__fileUploader-content",children:[q.jsx("img",{src:"/assets/ProjectPage/addPhoto.svg",alt:"Img clip",className:"nextChat__content-clip",width:29,height:29}),q.jsx("span",{children:s})]})})})}function _T({img:t,setImg:a,children:s}){const l=f=>{a({...t,file:f})};return q.jsx(Sp,{setFile:l,accept:"image/*",children:s})}function yT({img:t,setImg:a,children:s}){const l=f=>{a({...t,brochure:f})};return q.jsx(Sp,{setFile:l,accept:"image/*",children:s})}function vT({setImg:t,index:a}){const s=l=>{t(f=>{const g=[...f];return g[a]={...g[a],photos:[...g[a].photos,l]},g})};return q.jsx(Sp,{setFile:s,accept:"image/*",children:q.jsx("div",{className:"buildingInfo__fileUploader",children:q.jsx("div",{className:"buildingInfo__fileUploader-content",children:q.jsx("img",{src:"/assets/ProjectPage/addPhoto.svg",alt:"Img clip",className:"nextChat__content-clip",width:29,height:29})})})})}var Zz={exports:{}};(function(t,a){var s={};(function(l,f){t.exports=f()})(gf,function(){var l,f,g;function w(o,M){if(!l)l=M;else if(!f)f=M;else{var B="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+l+")(sharedChunk); ("+f+")(sharedChunk); self.onerror = null;",L={};l(L),g=M(L),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(g.workerUrl=window.URL.createObjectURL(new Blob([B],{type:"text/javascript"})))}}w(["exports"],function(o){var M="3.2.0";let B;const L={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(B==null){const n=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{B=s.API_URL_REGEX!=null?new RegExp(s.API_URL_REGEX):n}catch{B=n}}return B},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!L.API_URL)return null;try{const n=new URL(L.API_URL);return n.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":n.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},O={supported:!1,testSupport:function(n){!H&&Z&&(te?K(n):j=n)}};let j,Z,H=!1,te=!1;const J=typeof self<"u"?self:{};function K(n){const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,Z),n.isContextLost())return;O.supported=!0}catch{}n.deleteTexture(e),H=!0}J.document&&(Z=J.document.createElement("img"),Z.onload=function(){j&&K(j),j=null,te=!0},Z.onerror=function(){H=!0,j=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const W="01";function ee(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var me=Se;function Se(n,e,r,i){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=e,this.p2x=r,this.p2y=i}Se.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,e){if(e===void 0&&(e=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,i=0;i<8;i++){var u=this.sampleCurveX(r)-n;if(Math.abs(u)<e)return r;var p=this.sampleCurveDerivativeX(r);if(Math.abs(p)<1e-6)break;r-=u/p}var h=0,b=1;for(r=n,i=0;i<20&&(u=this.sampleCurveX(r),!(Math.abs(u-n)<e));i++)n>u?h=r:b=r,r=.5*(b-h)+h;return r},solve:function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))}};var Me=ee(me),Ie=Ge;function Ge(n,e){this.x=n,this.y=e}Ge.prototype={clone:function(){return new Ge(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,e){return this.clone()._rotateAround(n,e)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var e=n.x-this.x,r=n.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,e){return Math.atan2(this.x*e-this.y*n,this.x*n+this.y*e)},_matMult:function(n){var e=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=e,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var e=Math.cos(n),r=Math.sin(n),i=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=i,this},_rotateAround:function(n,e){var r=Math.cos(n),i=Math.sin(n),u=e.y+i*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-i*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ge.convert=function(n){return n instanceof Ge?n:Array.isArray(n)?new Ge(n[0],n[1]):n};var ge=ee(Ie);const Xe=Math.PI/180,rt=180/Math.PI;function Ue(n){return n*Xe}function Bt(n){return n*rt}const un=[[0,0],[1,0],[1,1],[0,1]];function Tn(n){if(n<=0)return 0;if(n>=1)return 1;const e=n*n,r=e*n;return 4*(n<.5?r:3*(n-e)+r-.75)}function ea(n,e,r,i){const u=new Me(n,e,r,i);return function(p){return u.solve(p)}}const St=ea(.25,.1,.25,1);function ke(n,e,r){return Math.min(r,Math.max(e,n))}function Ct(n,e,r){return(r=ke((r-n)/(e-n),0,1))*r*(3-2*r)}function Et(n,e,r){const i=r-e,u=((n-e)%i+i)%i+e;return u===e?r:u}function Nt(n,e,r){if(!n.length)return r(null,[]);let i=n.length;const u=new Array(n.length);let p=null;n.forEach((h,b)=>{e(h,(y,x)=>{y&&(p=y),u[b]=x,--i==0&&r(p,u)})})}function Sn(n){const e=[];for(const r in n)e.push(n[r]);return e}function Fn(n,...e){for(const r of e)for(const i in r)n[i]=r[i];return n}let nr=1;function Zn(){return nr++}function cr(){return function n(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function Vr(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ya(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function jn(n,e){n.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function As(n,e){return n.indexOf(e,n.length-e.length)!==-1}function vr(n,e,r){const i={};for(const u in n)i[u]=e.call(r||this,n[u],u,n);return i}function sn(n,e,r){const i={};for(const u in n)e.call(r||this,n[u],u,n)&&(i[u]=n[u]);return i}function kn(n){return Array.isArray(n)?n.map(kn):typeof n=="object"&&n?vr(n,kn):n}const an={};function Yt(n){an[n]||(typeof console<"u"&&console.warn(n),an[n]=!0)}function it(n,e,r){return(r.y-n.y)*(e.x-n.x)>(e.y-n.y)*(r.x-n.x)}function fe(n){let e=0;for(let r,i,u=0,p=n.length,h=p-1;u<p;h=u++)r=n[u],i=n[h],e+=(i.x-r.x)*(r.y+i.y);return e}function ve([n,e,r]){const i=Ue(e+90),u=Ue(r);return{x:n*Math.cos(i)*Math.sin(u),y:n*Math.sin(i)*Math.sin(u),z:n*Math.cos(u),azimuthal:e,polar:r}}function Re(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function dt(n){const e={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,i,u,p)=>{const h=u||p;return e[i]=!h||h.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let ut=null;function Ft(n){try{const e=self[n];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function Ut(n,e){return[n[4*e],n[4*e+1],n[4*e+2],n[4*e+3]]}function pt(n,e,r,i){for(;e<r;){const u=e+r>>1;n[u]<i?e=u+1:r=u}return e}function nn(n,e,r,i){for(;e<r;){const u=e+r>>1;n[u]<=i?e=u+1:r=u}return e}const gn="mapbox-tiles";let bn=500,aa=50,la,La;function ra(){try{return caches}catch{}}function fa(){const n=ra();n&&!la&&(la=n.open(gn))}function ca(n){const e=n.indexOf("?");if(e<0)return n;const r=function(u){const p=u.indexOf("?");return p>0?u.slice(p+1).split("&"):[]}(n),i=r.filter(u=>{const p=u.split("=");return p[0]==="language"||p[0]==="worldview"});return i.length?`${n.slice(0,e)}?${i.join("&")}`:n.slice(0,e)}let mr=1/0;const Ua={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Ua);class Xr extends Error{constructor(e,r,i){r===401&&Tt(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=i}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const xr=Re()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,kr=function(n,e){if(!(/^file:/.test(r=n.url)||/^file:/.test(xr())&&!/^\w+:/.test(r))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(i,u){const p=new AbortController,h=new Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:xr(),referrerPolicy:i.referrerPolicy,signal:p.signal});let b=!1,y=!1;const x=(T=h.url).indexOf("sku=")>0&&Tt(T);var T;i.type==="json"&&h.headers.set("Accept","application/json");const P=(R,D,F)=>{if(y)return;if(R&&R.message!=="SecurityError"&&Yt(R.toString()),D&&F)return A(D);const V=Date.now();fetch(h).then(Y=>{if(Y.ok){const ie=x?Y.clone():null;return A(Y,ie,V)}return u(new Xr(Y.statusText,Y.status,i.url))}).catch(Y=>{Y.name!=="AbortError"&&u(new Error(`${Y.message} ${i.url}`))})},A=(R,D,F)=>{(i.type==="arrayBuffer"?R.arrayBuffer():i.type==="json"?R.json():R.text()).then(V=>{y||(D&&F&&function(Y,ie,oe){if(fa(),!la)return;const le={status:ie.status,statusText:ie.statusText,headers:new Headers};ie.headers.forEach((ze,De)=>le.headers.set(De,ze));const he=dt(ie.headers.get("Cache-Control")||"");if(he["no-store"])return;he["max-age"]&&le.headers.set("Expires",new Date(oe+1e3*he["max-age"]).toUTCString());const _e=le.headers.get("Expires");_e&&(new Date(_e).getTime()-oe<42e4||function(ze,De){if(La===void 0)try{new Response(new ReadableStream),La=!0}catch{La=!1}La?De(ze.body):ze.blob().then(De)}(ie,ze=>{const De=new Response(ze,le);fa(),la&&la.then(Ne=>Ne.put(ca(Y.url),De)).catch(Ne=>Yt(Ne.message))}))}(h,D,F),b=!0,u(null,V,R.headers.get("Cache-Control"),R.headers.get("Expires")))}).catch(V=>{y||u(new Error(V.message))})};return x?function(R,D){if(fa(),!la)return D(null);const F=ca(R.url);la.then(V=>{V.match(F).then(Y=>{const ie=function(oe){if(!oe)return!1;const le=new Date(oe.headers.get("Expires")||0),he=dt(oe.headers.get("Cache-Control")||"");return le>Date.now()&&!he["no-cache"]}(Y);V.delete(F),ie&&V.put(F,Y.clone()),D(null,Y,ie)}).catch(D)}).catch(D)}(h,P):P(null,null),{cancel:()=>{y=!0,b||p.abort()}}}(n,e);if(Re()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,e,void 0,!0)}var r;return function(i,u){const p=new XMLHttpRequest;p.open(i.method||"GET",i.url,!0),i.type==="arrayBuffer"&&(p.responseType="arraybuffer");for(const h in i.headers)p.setRequestHeader(h,i.headers[h]);return i.type==="json"&&(p.responseType="text",p.setRequestHeader("Accept","application/json")),p.withCredentials=i.credentials==="include",p.onerror=()=>{u(new Error(p.statusText))},p.onload=()=>{if((p.status>=200&&p.status<300||p.status===0)&&p.response!==null){let h=p.response;if(i.type==="json")try{h=JSON.parse(p.response)}catch(b){return u(b)}u(null,h,p.getResponseHeader("Cache-Control"),p.getResponseHeader("Expires"))}else u(new Xr(p.statusText,p.status,i.url))},p.send(i.body),{cancel:()=>p.abort()}}(n,e)},It=function(n,e){return kr(Fn(n,{type:"arrayBuffer"}),e)};function _n(n){const e=document.createElement("a");return e.href=n,e.protocol===location.protocol&&e.host===location.host}const Ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Pn,Ye;Pn=[],Ye=0;const Ke=function(n,e){if(O.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),Ye>=L.MAX_PARALLEL_IMAGE_REQUESTS){const p={requestParameters:n,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Pn.push(p),p}Ye++;let r=!1;const i=()=>{if(!r)for(r=!0,Ye--;Pn.length&&Ye<L.MAX_PARALLEL_IMAGE_REQUESTS;){const p=Pn.shift(),{requestParameters:h,callback:b,cancelled:y}=p;y||(p.cancel=Ke(h,b).cancel)}},u=It(n,(p,h,b,y)=>{i(),p?e(p):h&&(self.createImageBitmap?function(x,T){const P=new Blob([new Uint8Array(x)],{type:"image/png"});createImageBitmap(P).then(A=>{T(null,A)}).catch(A=>{T(new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(h,(x,T)=>e(x,T,b,y)):function(x,T){const P=new Image;P.onload=()=>{T(null,P),URL.revokeObjectURL(P.src),P.onload=null,requestAnimationFrame(()=>{P.src=Ln})},P.onerror=()=>T(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const A=new Blob([new Uint8Array(x)],{type:"image/png"});P.src=x.byteLength?URL.createObjectURL(A):Ln}(h,(x,T)=>e(x,T,b,y)))});return{cancel:()=>{u.cancel(),i()}}},ft="NO_ACCESS_TOKEN";function yt(n){return n.indexOf("mapbox:")===0}function Tt(n){return L.API_URL_REGEX.test(n)}function Mt(n){return L.API_CDN_URL_REGEX.test(n)}function Ot(n){return L.API_STYLE_REGEX.test(n)&&!Pt(n)}function Pt(n){return L.API_SPRITE_REGEX.test(n)}const Zt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function gt(n){const e=n.match(Zt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function In(n){const e=n.params.length?`?${n.params.join("&")}`:"";return`${n.protocol}://${n.authority}${n.path}${e}`}const na="mapbox.eventData";function on(n){if(!n)return null;const e=n.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(atob(e[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Kn{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=on(L.ACCESS_TOKEN);let i="";return i=r&&r.u?btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(u,p)=>String.fromCharCode(+("0x"+p)))):L.ACCESS_TOKEN||"",e?`${na}.${e}:${i}`:`${na}:${i}`}fetchEventData(){const e=Ft("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{const u=localStorage.getItem(r);u&&(this.eventData=JSON.parse(u));const p=localStorage.getItem(i);p&&(this.anonId=p)}catch{Yt("Unable to read from LocalStorage")}}saveEventData(){const e=Ft("localStorage"),r=this.getStorageKey(),i=this.getStorageKey("uuid"),u=this.anonId;if(e&&u)try{localStorage.setItem(i,u),Object.keys(this.eventData).length>=1&&localStorage.setItem(r,JSON.stringify(this.eventData))}catch{Yt("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,i,u){if(!L.EVENTS_URL)return;const p=gt(L.EVENTS_URL);p.params.push(`access_token=${u||L.ACCESS_TOKEN||""}`);const h={event:this.type,created:new Date(e).toISOString()},b=r?Fn(h,r):h,y={url:In(p),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(x,T){return kr(Fn(x,{method:"POST"}),T)}(y,x=>{this.pendingRequest=null,i(x),this.saveEventData(),this.processRequests(u)})}queueRequest(e,r){this.queue.push(e),this.processRequests(r)}}const Da=new class extends Kn{constructor(n){super("appUserTurnstile"),this._customAccessToken=n}postTurnstileEvent(n,e){L.EVENTS_URL&&L.ACCESS_TOKEN&&Array.isArray(n)&&n.some(r=>yt(r)||Tt(r))&&this.queueRequest(Date.now(),e)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=on(L.ACCESS_TOKEN),r=e?e.u:L.ACCESS_TOKEN;let i=r!==this.eventData.tokenU;Ya(this.anonId)||(this.anonId=cr(),i=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const p=new Date(this.eventData.lastSuccess),h=new Date(u),b=(u-this.eventData.lastSuccess)/864e5;i=i||b>=1||b<-1||p.getDate()!==h.getDate()}else i=!0;i?this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:M,skuId:W,"enabled.telemetry":!1,userId:this.anonId},p=>{p||(this.eventData.lastSuccess=u,this.eventData.tokenU=r)},n):this.processRequests()}},ka=Da.postTurnstileEvent.bind(Da),Va=new class extends Kn{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(n,e,r,i){this.skuToken=e,this.errorCb=i,L.EVENTS_URL&&(r||L.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},r):this.errorCb(new Error(ft)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),Ya(this.anonId)||(this.anonId=cr()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:M,skuId:W,skuToken:this.skuToken,userId:this.anonId},i=>{i?this.errorCb(i):e&&(this.success[e]=!0)},n))}},Lr=Va.postMapLoadEvent.bind(Va),ms=new class extends Kn{constructor(){super("gljs.performance")}postPerformanceEvent(n,e){L.EVENTS_URL&&(n||L.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},n)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:e,performanceData:r}=this.queue.shift(),i=function(u){const p=performance.getEntriesByType("resource"),h=performance.getEntriesByType("mark"),b=function(R){const D={};if(R){for(const F in R)if(F!=="other")for(const V of R[F]){const Y=`${F}ResolveRangeMin`,ie=`${F}ResolveRangeMax`,oe=`${F}RequestCount`,le=`${F}RequestCachedCount`;D[Y]=Math.min(D[Y]||1/0,V.startTime),D[ie]=Math.max(D[ie]||-1/0,V.responseEnd);const he=_e=>{D[_e]===void 0&&(D[_e]=0),++D[_e]};V.transferSize!==void 0&&V.transferSize===0&&he(le),he(oe)}}return D}(function(R,D){const F={};if(R)for(const V of R){const Y=D(V);F[Y]===void 0&&(F[Y]=[]),F[Y].push(V)}return F}(p,yc)),y=window.devicePixelRatio,x=navigator.connection||navigator.mozConnection||navigator.webkitConnection,T=x?x.effectiveType:void 0,P={counters:[],metadata:[],attributes:[]},A=(R,D,F)=>{F!=null&&R.push({name:D,value:F.toString()})};for(const R in b)A(P.counters,R,b[R]);if(u.interactionRange[0]!==1/0&&u.interactionRange[1]!==-1/0&&(A(P.counters,"interactionRangeMin",u.interactionRange[0]),A(P.counters,"interactionRangeMax",u.interactionRange[1])),h)for(const R of Object.keys(hi)){const D=hi[R],F=h.find(V=>V.name===D);F&&A(P.counters,D,F.startTime)}return A(P.counters,"visibilityHidden",u.visibilityHidden),A(P.attributes,"style",function(R){if(R)for(const D of R){const F=D.name.split("?")[0];if(Ot(F)){const V=F.split("/").slice(-2);if(V.length===2)return`mapbox://styles/${V[0]}/${V[1]}`}}}(p)),A(P.attributes,"terrainEnabled",u.terrainEnabled?"true":"false"),A(P.attributes,"fogEnabled",u.fogEnabled?"true":"false"),A(P.attributes,"projection",u.projection),A(P.attributes,"zoom",u.zoom),A(P.metadata,"devicePixelRatio",y),A(P.metadata,"connectionEffectiveType",T),A(P.metadata,"navigatorUserAgent",navigator.userAgent),A(P.metadata,"screenWidth",window.screen.width),A(P.metadata,"screenHeight",window.screen.height),A(P.metadata,"windowWidth",window.innerWidth),A(P.metadata,"windowHeight",window.innerHeight),A(P.metadata,"mapWidth",u.width/y),A(P.metadata,"mapHeight",u.height/y),A(P.metadata,"webglRenderer",u.renderer),A(P.metadata,"webglVendor",u.vendor),A(P.metadata,"sdkVersion",M),A(P.metadata,"sdkIdentifier","mapbox-gl-js"),P}(r);for(const u of i.metadata);for(const u of i.counters);for(const u of i.attributes);this.postEvent(e,i,()=>{},n)}},Ga=ms.postPerformanceEvent.bind(ms),gs=new class extends Kn{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(n,e,r,i){if(!L.API_URL||!L.SESSION_PATH)return;const u=gt(L.API_URL+L.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${i||L.ACCESS_TOKEN||""}`);const p={url:In(u),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(h,b){return kr(Fn(h,{method:"GET"}),b)}(p,h=>{this.pendingRequest=null,r(h),this.saveEventData(),this.processRequests(i)})}getSessionAPI(n,e,r,i){this.skuToken=e,this.errorCb=i,L.SESSION_PATH&&L.API_URL&&(r||L.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},r):this.errorCb(new Error(ft)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,i=>{i?this.errorCb(i):e&&(this.success[e]=!0)},n)}},Dr=gs.getSessionAPI.bind(gs),as=new Set,hi={create:"create",load:"load",fullLoad:"fullLoad"};function yc(n){const e=n.name.split("?")[0];return Mt(e)&&e.includes("mapbox-gl.js")?"javascript":Mt(e)&&e.includes("mapbox-gl.css")?"css":function(r){return L.API_FONTS_REGEX.test(r)}(e)?"fontRange":Pt(e)?"sprite":Ot(e)?"style":function(r){return L.API_TILEJSON_REGEX.test(r)}(e)?"tilejson":"other"}function Xc(n){const e=n?n.url.toString():void 0;return e?performance.getEntriesByName(e):[]}let Hl,Fo,Jc,jo,Xa;function ed(){return Hl==null&&(Hl=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Hl}const Gr={now:()=>jo!==void 0?jo:performance.now(),setNow(n){jo=n},restoreNow(){jo=void 0},frame(n){const e=requestAnimationFrame(n);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(n,e=0){const{width:r,height:i}=n;Xa||(Xa=document.createElement("canvas"));const u=Xa.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return(r>Xa.width||i>Xa.height)&&(Xa.width=r,Xa.height=i),u.clearRect(-e,-e,r+2*e,i+2*e),u.drawImage(n,0,0,r,i),u.getImageData(-e,-e,r+2*e,i+2*e)},resolveURL:n=>(Fo||(Fo=document.createElement("a")),Fo.href=n,Fo.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Jc==null&&(Jc=window.matchMedia("(prefers-reduced-motion: reduce)")),Jc.matches)},hasCanvasFingerprintNoise(){if(!ed())return!1;const n=new OffscreenCanvas(85,1),e=n.getContext("2d",{willReadFrequently:!0});let r=0;for(let u=0;u<n.width;++u)e.fillStyle=`rgba(${r++},${r++},${r++}, 255)`,e.fillRect(u,0,1,1);const i=e.getImageData(0,0,n.width,n.height);r=0;for(let u=0;u<i.data.length;++u)if(u%4!=3&&r++!==i.data[u])return!0;return!1}};function Zs(n,e,r){r[n]&&r[n].indexOf(e)!==-1||(r[n]=r[n]||[],r[n].push(e))}function $r(n,e,r){if(r&&r[n]){const i=r[n].indexOf(e);i!==-1&&r[n].splice(i,1)}}class rs{constructor(e,r={}){Fn(this,r),this.type=e}}class bs extends rs{constructor(e,r={}){super("error",Fn({error:e},r))}}class qr{on(e,r){return this._listeners=this._listeners||{},Zs(e,r,this._listeners),this}off(e,r){return $r(e,r,this._listeners),$r(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Zs(e,r,this._oneTimeListeners),this):new Promise(i=>this.once(e,i))}fire(e,r){typeof e=="string"&&(e=new rs(e,r||{}));const i=e.type;if(this.listens(i)){e.target=this;const u=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const b of u)b.call(this,e);const p=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const b of p)$r(i,b,this._oneTimeListeners),b.call(this,e);const h=this._eventedParent;h&&(Fn(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),h.fire(e))}else e instanceof bs&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var Ve=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","default":[0,1],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"expression":{},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');class Xt{constructor(e,r,i,u){this.message=(e?`${e}: `:"")+i,u&&(this.identifier=u),r!=null&&r.__line__&&(this.line=r.__line__)}}class mi extends Xt{}function Ys(n,...e){for(const r of e)for(const i in r)n[i]=r[i];return n}function ar(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Xs(n){if(Array.isArray(n))return n.map(Xs);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const r in n)e[r]=Xs(n[r]);return e}return ar(n)}class Ep extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var Cs=Ep;class td{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[i,u]of r)this.bindings[i]=u}concat(e){return new td(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var uh=td;const Uo={kind:"null"},ot={kind:"number"},C={kind:"string"},G={kind:"boolean"},ue={kind:"color"},Pe={kind:"object"},Ae={kind:"value"},Be={kind:"collator"},qe={kind:"formatted"},Rt={kind:"resolvedImage"};function kt(n,e){return{kind:"array",itemType:n,N:e}}function zt(n){if(n.kind==="array"){const e=zt(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}return n.kind}const cn=[Uo,ot,C,G,ue,qe,Pe,kt(Ae),Rt];function Gt(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Gt(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const r of cn)if(!Gt(r,e))return null}}return`Expected ${zt(n)} but found ${zt(e)} instead.`}function Vn(n,e){return e.some(r=>r.kind===n.kind)}function Ca(n,e){return e.some(r=>r==="null"?n===null:r==="array"?Array.isArray(n):r==="object"?n&&!Array.isArray(n)&&typeof n=="object":r===typeof n)}var qn,Ja={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function xt(n){return(n=Math.round(n))<0?0:n>255?255:n}function yn(n){return xt(n[n.length-1]==="%"?parseFloat(n)/100*255:parseInt(n))}function ya(n){return(e=n[n.length-1]==="%"?parseFloat(n)/100:parseFloat(n))<0?0:e>1?1:e;var e}function wr(n,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?n+(e-n)*r*6:2*r<1?e:3*r<2?n+(e-n)*(2/3-r)*6:n}try{qn={}.parseCSSColor=function(n){var e,r=n.replace(/ /g,"").toLowerCase();if(r in Ja)return Ja[r].slice();if(r[0]==="#")return r.length===4?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:r.length===7&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var i=r.indexOf("("),u=r.indexOf(")");if(i!==-1&&u+1===r.length){var p=r.substr(0,i),h=r.substr(i+1,u-(i+1)).split(","),b=1;switch(p){case"rgba":if(h.length!==4)return null;b=ya(h.pop());case"rgb":return h.length!==3?null:[yn(h[0]),yn(h[1]),yn(h[2]),b];case"hsla":if(h.length!==4)return null;b=ya(h.pop());case"hsl":if(h.length!==3)return null;var y=(parseFloat(h[0])%360+360)%360/360,x=ya(h[1]),T=ya(h[2]),P=T<=.5?T*(x+1):T+x-T*x,A=2*T-P;return[xt(255*wr(A,P,y+1/3)),xt(255*wr(A,P,y)),xt(255*wr(A,P,y-1/3)),b];default:return null}}return null}}catch{}class ha{constructor(e,r,i,u=1){this.r=e,this.g=r,this.b=i,this.a=u}static parse(e){if(!e)return;if(e instanceof ha)return e;if(typeof e!="string")return;const r=qn(e);return r?new ha(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toString(){const[e,r,i,u]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(i)},${u})`}toArray(){const{r:e,g:r,b:i,a:u}=this;return u===0?[0,0,0,0]:[255*e/u,255*r/u,255*i/u,u]}toArray01(){const{r:e,g:r,b:i,a:u}=this;return u===0?[0,0,0,0]:[e/u,r/u,i/u,u]}toArray01Scaled(e){const{r,g:i,b:u,a:p}=this;return p===0?[0,0,0]:[r/p*e,i/p*e,u/p*e]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:i,a:u}=this;return[e,r,i,u]}toArray01Linear(){const{r:e,g:r,b:i,a:u}=this;return u===0?[0,0,0,0]:[Math.pow(e/u,2.2),Math.pow(r/u,2.2),Math.pow(i/u,2.2),u]}}ha.black=new ha(0,0,0,1),ha.white=new ha(1,1,1,1),ha.transparent=new ha(0,0,0,0),ha.red=new ha(1,0,0,1),ha.blue=new ha(0,0,1,1);var wa=ha;class nd{constructor(e,r,i){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Sa{constructor(e,r,i,u,p){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=i,this.fontStack=u,this.textColor=p}}class Wr{constructor(e){this.sections=e}static fromString(e){return new Wr([new Sa(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.namePrimary.length!==0)}static factory(e){return e instanceof Wr?e:Wr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.namePrimary]);continue}e.push(r.text);const i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(i)}return e}}class Ms{constructor(e){this.namePrimary=e.namePrimary,e.nameSecondary&&(this.nameSecondary=e.nameSecondary),this.available=e.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(e,r){return e?new Ms({namePrimary:e,nameSecondary:r,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function gi(n,e,r,i){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?i===void 0||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[n,e,r,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[n,e,r,i]:[n,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Vo(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof wa||n instanceof nd||n instanceof Wr||n instanceof Ms)return!0;if(Array.isArray(n)){for(const e of n)if(!Vo(e))return!1;return!0}if(typeof n=="object"){for(const e in n)if(!Vo(n[e]))return!1;return!0}return!1}function dr(n){if(n===null)return Uo;if(typeof n=="string")return C;if(typeof n=="boolean")return G;if(typeof n=="number")return ot;if(n instanceof wa)return ue;if(n instanceof nd)return Be;if(n instanceof Wr)return qe;if(n instanceof Ms)return Rt;if(Array.isArray(n)){const e=n.length;let r;for(const i of n){const u=dr(i);if(r){if(r===u)continue;r=Ae;break}r=u}return kt(r||Ae,e)}return Pe}function vc(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof wa||n instanceof Wr||n instanceof Ms?n.toString():JSON.stringify(n)}class Kc{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Vo(e[1]))return r.error("invalid value");const i=e[1];let u=dr(i);const p=r.expectedType;return u.kind!=="array"||u.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(u=p),new Kc(u,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof wa?["rgba"].concat(this.value.toArray()):this.value instanceof Wr?this.value.serialize():this.value}}var Go=Kc,rr=class{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}};const ad={string:C,number:ot,boolean:G,object:Pe};class rd{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let i,u=1;const p=e[0];if(p==="array"){let b,y;if(e.length>2){const x=e[1];if(typeof x!="string"||!(x in ad)||x==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);b=ad[x],u++}else b=Ae;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);y=e[2],u++}i=kt(b,y)}else i=ad[p];const h=[];for(;u<e.length;u++){const b=r.parse(e[u],u,Ae);if(!b)return null;h.push(b)}return new rd(i,h)}evaluate(e){for(let r=0;r<this.args.length;r++){const i=this.args[r].evaluate(e);if(!Gt(this.type,dr(i)))return i;if(r===this.args.length-1)throw new rr(`Expected value to be of type ${zt(this.type)}, but found ${zt(dr(i))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const i=e.itemType;if(i.kind==="string"||i.kind==="number"||i.kind==="boolean"){r.push(i.kind);const u=e.N;(typeof u=="number"||this.args.length>1)&&r.push(u)}}return r.concat(this.args.map(i=>i.serialize()))}}var Js=rd;class xc{constructor(e){this.type=qe,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&typeof i=="object")return r.error("First argument must be an image or text section.");const u=[];let p=!1;for(let h=1;h<=e.length-1;++h){const b=e[h];if(p&&typeof b=="object"&&!Array.isArray(b)){p=!1;let y=null;if(b["font-scale"]&&(y=r.parse(b["font-scale"],1,ot),!y))return null;let x=null;if(b["text-font"]&&(x=r.parse(b["text-font"],1,kt(C)),!x))return null;let T=null;if(b["text-color"]&&(T=r.parse(b["text-color"],1,ue),!T))return null;const P=u[u.length-1];P.scale=y,P.font=x,P.textColor=T}else{const y=r.parse(e[h],1,Ae);if(!y)return null;const x=y.type.kind;if(x!=="string"&&x!=="value"&&x!=="null"&&x!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,u.push({content:y,scale:null,font:null,textColor:null})}}return new xc(u)}evaluate(e){return new Wr(this.sections.map(r=>{const i=r.content.evaluate(e);return dr(i)===Rt?new Sa("",i,null,null,null):new Sa(vc(i),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),e.push(i)}return e}}class wc{constructor(e,r){this.type=Rt,this.inputPrimary=e,this.inputSecondary=r}static parse(e,r){if(e.length<2)return r.error("Expected two or more arguments.");const i=r.parse(e[1],1,C);if(!i)return r.error("No image name provided.");if(e.length===2)return new wc(i);const u=r.parse(e[2],1,C);return u?new wc(i,u):r.error("Secondary image variant is not a string.")}evaluate(e){const r=Ms.fromString(this.inputPrimary.evaluate(e),this.inputSecondary?this.inputSecondary.evaluate(e):void 0);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(r.namePrimary)>-1,r.nameSecondary&&r.available&&e.availableImages&&(r.available=e.availableImages.indexOf(r.nameSecondary)>-1)),r}eachChild(e){e(this.inputPrimary),this.inputSecondary&&e(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function ta(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}const dh={"to-boolean":G,"to-color":ue,"to-number":ot,"to-string":C};class Zl{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const i=e[0],u=[];let p=Uo;if(i==="to-array"){if(!Array.isArray(e[1]))return null;const h=e[1].length;if(r.expectedType){if(r.expectedType.kind!=="array")return r.error(`Expected ${r.expectedType.kind} but found array.`);p=kt(r.expectedType.itemType,h)}else{if(!(h>0&&Vo(e[1][0])))return null;p=kt(dr(e[1][0]),h)}for(let b=0;b<h;b++){const y=e[1][b];let x;if(ta(y)==="array")x=r.parse(y,void 0,p.itemType);else{const T=ta(y);if(T!==p.itemType.kind)return r.error(`Expected ${p.itemType.kind} but found ${T}.`);x=r.registry.literal.parse(["literal",y===void 0?null:y],r)}if(!x)return null;u.push(x)}}else{if((i==="to-boolean"||i==="to-string")&&e.length!==2)return r.error("Expected one argument.");p=dh[i];for(let h=1;h<e.length;h++){const b=r.parse(e[h],h,Ae);if(!b)return null;u.push(b)}}return new Zl(p,u)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let r,i;for(const u of this.args){if(r=u.evaluate(e),i=null,r instanceof wa)return r;if(typeof r=="string"){const p=e.parseColor(r);if(p)return p}else if(Array.isArray(r)&&(i=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:gi(r[0],r[1],r[2],r[3]),!i))return new wa(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new rr(i||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}if(this.type.kind==="number"){let r=null;for(const i of this.args){if(r=i.evaluate(e),r===null)return 0;const u=Number(r);if(!isNaN(u))return u}throw new rr(`Could not convert ${JSON.stringify(r)} to number.`)}return this.type.kind==="formatted"?Wr.fromString(vc(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ms.fromString(vc(this.args[0].evaluate(e))):this.type.kind==="array"?this.args.map(r=>r.evaluate(e)):vc(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new xc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new wc(this.args[0]).serialize();const e=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Ks=Zl;const Yl=["Unknown","Point","LineString","Polygon"];var Xl=class{constructor(n,e){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=n,this.options=e}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Yl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(n){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const n=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:i}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-n[0])+this.featureDistanceData.bearing[1]*(i*e-n[1])}return 0}parseColor(n){let e=this._parseColorCache[n];return e||(e=this._parseColorCache[n]=wa.parse(n)),e}getConfig(n){return this.options?this.options.get(n):null}};class Or{constructor(e,r,i,u,p){this.name=e,this.type=r,this._evaluate=i,this.args=u,this._overloadIndex=p}evaluate(e){if(!this._evaluate){const r=Or.definitions[this.name];this._evaluate=Array.isArray(r)?r[2]:r.overloads[this._overloadIndex][1]}return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const i=e[0],u=Or.definitions[i];if(!u)return r.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const p=Array.isArray(u)?u[0]:u.type,h=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,b=[];let y=null,x=-1;for(const[T,P]of h){if(Array.isArray(T)&&T.length!==e.length-1)continue;b.push(T),x++,y=new ks(r.registry,r.path,null,r.scope,void 0,r._scope,r.options);const A=[];let R=!1;for(let D=1;D<e.length;D++){const F=e[D],V=Array.isArray(T)?T[D-1]:T.type,Y=y.parse(F,1+A.length,V);if(!Y){R=!0;break}A.push(Y)}if(!R)if(Array.isArray(T)&&T.length!==A.length)y.error(`Expected ${T.length} arguments, but found ${A.length} instead.`);else{for(let D=0;D<A.length;D++){const F=Array.isArray(T)?T[D]:T.type,V=A[D];y.concat(D+1).checkSubtype(F,V.type)}if(y.errors.length===0)return new Or(i,p,P,A,x)}}if(b.length===1)r.errors.push(...y.errors);else{const T=(b.length?b:h.map(([A])=>A)).map(sd).join(" | "),P=[];for(let A=1;A<e.length;A++){const R=r.parse(e[A],1+P.length);if(!R)return null;P.push(zt(R.type))}r.error(`Expected arguments of type ${T}, but found (${P.join(", ")}) instead.`)}return null}static register(e,r){Or.definitions=r;for(const i in r)e[i]=Or}}function sd(n){return Array.isArray(n)?`(${n.map(zt).join(", ")})`:`(${zt(n.type)}...)`}var Rs=Or;class Qc{constructor(e,r,i){this.type=Be,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const i=e[1];if(typeof i!="object"||Array.isArray(i))return r.error("Collator options argument must be an object.");const u=r.parse(i["case-sensitive"]!==void 0&&i["case-sensitive"],1,G);if(!u)return null;const p=r.parse(i["diacritic-sensitive"]!==void 0&&i["diacritic-sensitive"],1,G);if(!p)return null;let h=null;return i.locale&&(h=r.parse(i.locale,1,C),!h)?null:new Qc(u,p,h)}evaluate(e){return new nd(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}var Jl={exports:{}};Jl.exports=function(){function n(i,u,p,h,b){for(;h>p;){if(h-p>600){var y=h-p+1,x=u-p+1,T=Math.log(y),P=.5*Math.exp(2*T/3),A=.5*Math.sqrt(T*P*(y-P)/y)*(x-y/2<0?-1:1);n(i,u,Math.max(p,Math.floor(u-x*P/y+A)),Math.min(h,Math.floor(u+(y-x)*P/y+A)),b)}var R=i[u],D=p,F=h;for(e(i,p,u),b(i[h],R)>0&&e(i,p,h);D<F;){for(e(i,D,F),D++,F--;b(i[D],R)<0;)D++;for(;b(i[F],R)>0;)F--}b(i[p],R)===0?e(i,p,F):e(i,++F,h),F<=u&&(p=F+1),u<=F&&(h=F-1)}}function e(i,u,p){var h=i[u];i[u]=i[p],i[p]=h}function r(i,u){return i<u?-1:i>u?1:0}return function(i,u,p,h,b){n(i,u,p||0,h||i.length-1,b||r)}}();var el=ee(Jl.exports);function tl(n){let e=0;for(let r,i,u=0,p=n.length,h=p-1;u<p;h=u++)r=n[u],i=n[h],e+=(i.x-r.x)*(r.y+i.y);return e}function Ni(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function mo(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function go(n,e,r){const i=n[0]-e[0],u=n[1]-e[1],p=n[0]-r[0],h=n[1]-r[1];return i*h-p*u==0&&i*p<=0&&u*h<=0}function bo(n,e,r=!1){let i=!1;for(let b=0,y=e.length;b<y;b++){const x=e[b];for(let T=0,P=x.length,A=P-1;T<P;A=T++){const R=x[A],D=x[T];if(go(n,R,D))return r;(p=R)[1]>(u=n)[1]!=(h=D)[1]>u[1]&&u[0]<(h[0]-p[0])*(u[1]-p[1])/(h[1]-p[1])+p[0]&&(i=!i)}}var u,p,h;return i}function id(n,e,r,i){const u=i[0]-r[0],p=i[1]-r[1],h=(n[0]-r[0])*p-u*(n[1]-r[1]),b=(e[0]-r[0])*p-u*(e[1]-r[1]);return h>0&&b<0||h<0&&b>0}function Fi(n,e,r,i){return(u=[i[0]-r[0],i[1]-r[1]])[0]*(p=[e[0]-n[0],e[1]-n[1]])[1]-u[1]*p[0]!=0&&!(!id(n,e,r,i)||!id(r,i,n,e));var u,p}const Gn=8192;function nl(n,e){const r=(180+n[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(r*u*Gn),Math.round(i*u*Gn)]}function od(n,e){for(let r=0;r<e.length;r++)if(bo(n,e[r]))return!0;return!1}function cd(n,e,r){for(const i of r)for(let u=0,p=i.length,h=p-1;u<p;h=u++)if(Fi(n,e,i[h],i[u]))return!0;return!1}function al(n,e){for(let r=0;r<n.length;++r)if(!bo(n[r],e))return!1;for(let r=0;r<n.length-1;++r)if(cd(n[r],n[r+1],e))return!1;return!0}function rl(n,e){for(let r=0;r<e.length;r++)if(al(n,e[r]))return!0;return!1}function Kl(n,e,r){const i=[];for(let u=0;u<n.length;u++){const p=[];for(let h=0;h<n[u].length;h++){const b=nl(n[u][h],r);Ni(e,b),p.push(b)}i.push(p)}return i}function ld(n,e,r){const i=[];for(let u=0;u<n.length;u++){const p=Kl(n[u],e,r);i.push(p)}return i}function ud(n,e,r,i){if(n[0]<r[0]||n[0]>r[2]){const u=.5*i;let p=n[0]-r[0]>u?-i:r[0]-n[0]>u?i:0;p===0&&(p=n[0]-r[2]>u?-i:r[2]-n[0]>u?i:0),n[0]+=p}Ni(e,n)}function $o(n,e,r,i){const u=Math.pow(2,i.z)*Gn,p=[i.x*Gn,i.y*Gn],h=[];if(!n)return h;for(const b of n)for(const y of b){const x=[y.x+p[0],y.y+p[1]];ud(x,e,r,u),h.push(x)}return h}function dd(n,e,r,i){const u=Math.pow(2,i.z)*Gn,p=[i.x*Gn,i.y*Gn],h=[];if(!n)return h;for(const y of n){const x=[];for(const T of y){const P=[T.x+p[0],T.y+p[1]];Ni(e,P),x.push(P)}h.push(x)}if(e[2]-e[0]<=u/2){(b=e)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const y of h)for(const x of y)ud(x,e,r,u)}var b;return h}class Qs{constructor(e,r){this.type=G,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Vo(e[1])){const i=e[1];if(i.type==="FeatureCollection")for(let u=0;u<i.features.length;++u){const p=i.features[u].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Qs(i,i.features[u].geometry)}else if(i.type==="Feature"){const u=i.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Qs(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Qs(i,i)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,i){const u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],h=r.canonicalID();if(!h)return!1;if(i.type==="Polygon"){const b=Kl(i.coordinates,p,h),y=$o(r.geometry(),u,p,h);if(!mo(u,p))return!1;for(const x of y)if(!bo(x,b))return!1}if(i.type==="MultiPolygon"){const b=ld(i.coordinates,p,h),y=$o(r.geometry(),u,p,h);if(!mo(u,p))return!1;for(const x of y)if(!od(x,b))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,i){const u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],h=r.canonicalID();if(!h)return!1;if(i.type==="Polygon"){const b=Kl(i.coordinates,p,h),y=dd(r.geometry(),u,p,h);if(!mo(u,p))return!1;for(const x of y)if(!al(x,b))return!1}if(i.type==="MultiPolygon"){const b=ld(i.coordinates,p,h),y=dd(r.geometry(),u,p,h);if(!mo(u,p))return!1;for(const x of y)if(!rl(x,b))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Sc=Qs,ji={exports:{}};ji.exports=function(){var n={kilometers:1,miles:.621371192237334,nauticalmiles:.5399568034557235,meters:1e3,metres:1e3,yards:1093.6132983377079,feet:3280.839895013123,inches:39370.078740157485},e=1/298.257223563,r=e*(2-e),i=Math.PI/180,u=function(x,T){if(x===void 0)throw new Error("No latitude given.");if(T&&!n[T])throw new Error("Unknown unit "+T+". Use one of: "+Object.keys(n).join(", "));var P=6378.137*i*(T?n[T]:1),A=Math.cos(x*i),R=1/(1-r*(1-A*A)),D=Math.sqrt(R);this.kx=P*D*A,this.ky=P*D*R*(1-r)},p={units:{configurable:!0}};function h(x,T){return x[0]===T[0]&&x[1]===T[1]}function b(x,T,P){var A=y(T[0]-x[0]);return[x[0]+A*P,x[1]+(T[1]-x[1])*P]}function y(x){for(;x<-180;)x+=360;for(;x>180;)x-=360;return x}return u.fromTile=function(x,T,P){var A=Math.PI*(1-2*(x+.5)/Math.pow(2,T)),R=Math.atan(.5*(Math.exp(A)-Math.exp(-A)))/i;return new u(R,P)},p.units.get=function(){return n},u.prototype.distance=function(x,T){var P=y(x[0]-T[0])*this.kx,A=(x[1]-T[1])*this.ky;return Math.sqrt(P*P+A*A)},u.prototype.bearing=function(x,T){var P=y(T[0]-x[0])*this.kx;return Math.atan2(P,(T[1]-x[1])*this.ky)/i},u.prototype.destination=function(x,T,P){var A=P*i;return this.offset(x,Math.sin(A)*T,Math.cos(A)*T)},u.prototype.offset=function(x,T,P){return[x[0]+T/this.kx,x[1]+P/this.ky]},u.prototype.lineDistance=function(x){for(var T=0,P=0;P<x.length-1;P++)T+=this.distance(x[P],x[P+1]);return T},u.prototype.area=function(x){for(var T=0,P=0;P<x.length;P++)for(var A=x[P],R=0,D=A.length,F=D-1;R<D;F=R++)T+=y(A[R][0]-A[F][0])*(A[R][1]+A[F][1])*(P?-1:1);return Math.abs(T)/2*this.kx*this.ky},u.prototype.along=function(x,T){var P=0;if(T<=0)return x[0];for(var A=0;A<x.length-1;A++){var R=x[A],D=x[A+1],F=this.distance(R,D);if((P+=F)>T)return b(R,D,(T-(P-F))/F)}return x[x.length-1]},u.prototype.pointToSegmentDistance=function(x,T,P){var A=T[0],R=T[1],D=y(P[0]-A)*this.kx,F=(P[1]-R)*this.ky,V=0;return D===0&&F===0||((V=(y(x[0]-A)*this.kx*D+(x[1]-R)*this.ky*F)/(D*D+F*F))>1?(A=P[0],R=P[1]):V>0&&(A+=D/this.kx*V,R+=F/this.ky*V)),D=y(x[0]-A)*this.kx,F=(x[1]-R)*this.ky,Math.sqrt(D*D+F*F)},u.prototype.pointOnLine=function(x,T){for(var P,A,R,D,F=1/0,V=0;V<x.length-1;V++){var Y=x[V][0],ie=x[V][1],oe=y(x[V+1][0]-Y)*this.kx,le=(x[V+1][1]-ie)*this.ky,he=0;oe===0&&le===0||((he=(y(T[0]-Y)*this.kx*oe+(T[1]-ie)*this.ky*le)/(oe*oe+le*le))>1?(Y=x[V+1][0],ie=x[V+1][1]):he>0&&(Y+=oe/this.kx*he,ie+=le/this.ky*he));var _e=(oe=y(T[0]-Y)*this.kx)*oe+(le=(T[1]-ie)*this.ky)*le;_e<F&&(F=_e,P=Y,A=ie,R=V,D=he)}return{point:[P,A],index:R,t:Math.max(0,Math.min(1,D))}},u.prototype.lineSlice=function(x,T,P){var A=this.pointOnLine(P,x),R=this.pointOnLine(P,T);if(A.index>R.index||A.index===R.index&&A.t>R.t){var D=A;A=R,R=D}var F=[A.point],V=A.index+1,Y=R.index;!h(P[V],F[0])&&V<=Y&&F.push(P[V]);for(var ie=V+1;ie<=Y;ie++)F.push(P[ie]);return h(P[Y],R.point)||F.push(R.point),F},u.prototype.lineSliceAlong=function(x,T,P){for(var A=0,R=[],D=0;D<P.length-1;D++){var F=P[D],V=P[D+1],Y=this.distance(F,V);if((A+=Y)>x&&R.length===0&&R.push(b(F,V,(x-(A-Y))/Y)),A>=T)return R.push(b(F,V,(T-(A-Y))/Y)),R;A>x&&R.push(V)}return R},u.prototype.bufferPoint=function(x,T){var P=T/this.ky,A=T/this.kx;return[x[0]-A,x[1]-P,x[0]+A,x[1]+P]},u.prototype.bufferBBox=function(x,T){var P=T/this.ky,A=T/this.kx;return[x[0]-A,x[1]-P,x[2]+A,x[3]+P]},u.prototype.insideBBox=function(x,T){return y(x[0]-T[0])>=0&&y(x[0]-T[2])<=0&&x[1]>=T[1]&&x[1]<=T[3]},Object.defineProperties(u,p),u}();var ei=ee(ji.exports),bi={exports:{}};bi.exports=function(){var n=function(r,i){if(r===void 0&&(r=[]),i===void 0&&(i=e),this.data=r,this.length=this.data.length,this.compare=i,this.length>0)for(var u=(this.length>>1)-1;u>=0;u--)this._down(u)};function e(r,i){return r<i?-1:r>i?1:0}return n.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},n.prototype.pop=function(){if(this.length!==0){var r=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),r}},n.prototype.peek=function(){return this.data[0]},n.prototype._up=function(r){for(var i=this.data,u=this.compare,p=i[r];r>0;){var h=r-1>>1,b=i[h];if(u(p,b)>=0)break;i[r]=b,r=h}i[r]=p},n.prototype._down=function(r){for(var i=this.data,u=this.compare,p=this.length>>1,h=i[r];r<p;){var b=1+(r<<1),y=i[b],x=b+1;if(x<this.length&&u(i[x],y)<0&&(b=x,y=i[x]),u(y,h)>=0)break;i[r]=y,r=b}i[r]=h},n}();var qo=ee(bi.exports),vt=8192;function Ip(n,e){return e.dist-n.dist}const Wo=100,Ho=50;function pd(n){const e=[1/0,1/0,-1/0,-1/0];if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function sl(n){return n[1]-n[0]+1}function Ui(n,e){const r=n[1]>=n[0]&&n[1]<e;return r||console.warn("Distance Expression: Index is out of range"),r}function Ql(n,e){if(n[0]>n[1])return[null,null];const r=sl(n);if(e){if(r===2)return[n,null];const i=Math.floor(r/2);return[[n[0],n[0]+i],[n[0]+i,n[1]]]}{if(r===1)return[n,null];const i=Math.floor(r/2)-1;return[[n[0],n[0]+i],[n[0]+i+1,n[1]]]}}function Vi(n,e){const r=[1/0,1/0,-1/0,-1/0];if(!Ui(e,n.length))return r;for(let i=e[0];i<=e[1];++i)Ni(r,n[i]);return r}function il(n){const e=[1/0,1/0,-1/0,-1/0];for(let r=0;r<n.length;++r)for(let i=0;i<n[r].length;++i)Ni(e,n[r][i]);return e}function _i(n,e,r){if(pd(n)||pd(e))return NaN;let i=0,u=0;return n[2]<e[0]&&(i=e[0]-n[2]),n[0]>e[2]&&(i=n[0]-e[2]),n[1]>e[3]&&(u=n[1]-e[3]),n[3]<e[1]&&(u=e[1]-n[3]),r.distance([0,0],[i,u])}function _o(n,e){const r=Math.pow(2,e.z);return[(u=(n.x/vt+e.x)/r,360*u-180),(i=(n.y/vt+e.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90)];var i,u}function ph(n,e){const r=[];for(let i=0;i<n.length;++i)r.push(_o(n[i],e));return r}function yi(n,e,r){const i=r.pointOnLine(e,n).point;return r.distance(n,i)}function fd(n,e,r,i,u){const p=r.slice(i[0],i[1]+1);let h=1/0;for(let b=e[0];b<=e[1];++b)if((h=Math.min(h,yi(n[b],p,u)))===0)return 0;return h}function Gi(n,e,r,i,u){const p=Math.min(u.pointToSegmentDistance(n,r,i),u.pointToSegmentDistance(e,r,i)),h=Math.min(u.pointToSegmentDistance(r,n,e),u.pointToSegmentDistance(i,n,e));return Math.min(p,h)}function Pp(n,e,r,i,u){if(!Ui(e,n.length)||!Ui(i,r.length))return NaN;let p=1/0;for(let h=e[0];h<e[1];++h)for(let b=i[0];b<i[1];++b){if(Fi(n[h],n[h+1],r[b],r[b+1]))return 0;p=Math.min(p,Gi(n[h],n[h+1],r[b],r[b+1],u))}return p}function fh(n,e,r,i,u){if(!Ui(e,n.length)||!Ui(i,r.length))return NaN;let p=1/0;for(let h=e[0];h<=e[1];++h)for(let b=i[0];b<=i[1];++b)if((p=Math.min(p,u.distance(n[h],r[b])))===0)return p;return p}function ol(n,e,r){if(bo(n,e,!0))return 0;let i=1/0;for(const u of e){const p=u.length;if(p<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(u[0]!==u[p-1]&&(i=Math.min(i,r.pointToSegmentDistance(n,u[p-1],u[0])))===0||(i=Math.min(i,yi(n,u,r)))===0)return i}return i}function hd(n,e,r,i){if(!Ui(e,n.length))return NaN;for(let p=e[0];p<=e[1];++p)if(bo(n[p],r,!0))return 0;let u=1/0;for(let p=e[0];p<e[1];++p)for(const h of r)for(let b=0,y=h.length,x=y-1;b<y;x=b++){if(Fi(n[p],n[p+1],h[x],h[b]))return 0;u=Math.min(u,Gi(n[p],n[p+1],h[x],h[b],i))}return u}function md(n,e){for(const r of n)for(let i=0;i<=r.length-1;++i)if(bo(r[i],e,!0))return!0;return!1}function gd(n,e,r,i=1/0){const u=il(n),p=il(e);if(i!==1/0&&_i(u,p,r)>=i)return i;if(mo(u,p)){if(md(n,e))return 0}else if(md(e,n))return 0;let h=i;for(const b of n)for(let y=0,x=b.length,T=x-1;y<x;T=y++)for(const P of e)for(let A=0,R=P.length,D=R-1;A<R;D=A++){if(Fi(b[T],b[y],P[D],P[A]))return 0;h=Math.min(h,Gi(b[T],b[y],P[D],P[A],r))}return h}function cl(n,e,r,i,u,p,h){if(p===null||h===null)return;const b=_i(Vi(i,p),Vi(u,h),r);b<e&&n.push({dist:b,range1:p,range2:h})}function ll(n,e,r,i,u=1/0){let p=Math.min(i.distance(n[0],r[0][0]),u);if(p===0)return p;const h=new qo([{dist:0,range1:[0,n.length-1],range2:[0,0]}],Ip),b=e?Ho:Wo,y=il(r);for(;h.length;){const x=h.pop();if(x.dist>=p)continue;const T=x.range1;if(sl(T)<=b){if(!Ui(T,n.length))return NaN;if(e){const P=hd(n,T,r,i);if((p=Math.min(p,P))===0)return p}else for(let P=T[0];P<=T[1];++P){const A=ol(n[P],r,i);if((p=Math.min(p,A))===0)return p}}else{const P=Ql(T,e);if(P[0]!==null){const A=_i(Vi(n,P[0]),y,i);A<p&&h.push({dist:A,range1:P[0],range2:[0,0]})}if(P[1]!==null){const A=_i(Vi(n,P[1]),y,i);A<p&&h.push({dist:A,range1:P[1],range2:[0,0]})}}}return p}function bd(n,e,r,i,u,p=1/0){let h=Math.min(p,u.distance(n[0],r[0]));if(h===0)return h;const b=new qo([{dist:0,range1:[0,n.length-1],range2:[0,r.length-1]}],Ip),y=e?Ho:Wo,x=i?Ho:Wo;for(;b.length;){const T=b.pop();if(T.dist>=h)continue;const P=T.range1,A=T.range2;if(sl(P)<=y&&sl(A)<=x){if(!Ui(P,n.length)||!Ui(A,r.length))return NaN;if(e&&i?h=Math.min(h,Pp(n,P,r,A,u)):e||i?e&&!i?h=Math.min(h,fd(r,A,n,P,u)):!e&&i&&(h=Math.min(h,fd(n,P,r,A,u))):h=Math.min(h,fh(n,P,r,A,u)),h===0)return h}else{const R=Ql(P,e),D=Ql(A,i);cl(b,h,u,n,r,R[0],D[0]),cl(b,h,u,n,r,R[0],D[1]),cl(b,h,u,n,r,R[1],D[0]),cl(b,h,u,n,r,R[1],D[1])}}return h}function eu(n,e,r,i,u=1/0){let p=u;const h=Vi(n,[0,n.length-1]);for(const b of r)if(!(p!==1/0&&_i(h,Vi(b,[0,b.length-1]),i)>=p)&&(p=Math.min(p,bd(n,e,b,!0,i,p)),p===0))return p;return p}function We(n,e,r,i,u=1/0){let p=u;const h=Vi(n,[0,n.length-1]);for(const b of r){if(p!==1/0&&_i(h,il(b),i)>=p)continue;const y=ll(n,e,b,i,p);if(isNaN(y))return y;if((p=Math.min(p,y))===0)return p}return p}function lt(n){return n==="Point"||n==="MultiPoint"||n==="LineString"||n==="MultiLineString"||n==="Polygon"||n==="MultiPolygon"}class Qt{constructor(e,r){this.type=ot,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'distance' expression requires either one argument, but found ' ${e.length-1} instead.`);if(Vo(e[1])){const i=e[1];if(i.type==="FeatureCollection"){for(let u=0;u<i.features.length;++u)if(lt(i.features[u].geometry.type))return new Qt(i,i.features[u].geometry)}else if(i.type==="Feature"){if(lt(i.geometry.type))return new Qt(i,i.geometry)}else if(lt(i.type))return new Qt(i,i)}return r.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(e){const r=e.geometry(),i=e.canonicalID();if(r!=null&&i!=null){if(e.geometryType()==="Point")return function(u,p,h){const b=[];for(const x of u)for(const T of x)b.push(_o(T,p));const y=new ei(b[0][1],"meters");return h.type==="Point"||h.type==="MultiPoint"||h.type==="LineString"?bd(b,!1,h.type==="Point"?[h.coordinates]:h.coordinates,h.type==="LineString",y):h.type==="MultiLineString"?eu(b,!1,h.coordinates,y):h.type==="Polygon"||h.type==="MultiPolygon"?We(b,!1,h.type==="Polygon"?[h.coordinates]:h.coordinates,y):null}(r,i,this.geometries);if(e.geometryType()==="LineString")return function(u,p,h){const b=[];for(const x of u){const T=[];for(const P of x)T.push(_o(P,p));b.push(T)}const y=new ei(b[0][0][1],"meters");if(h.type==="Point"||h.type==="MultiPoint"||h.type==="LineString")return eu(h.type==="Point"?[h.coordinates]:h.coordinates,h.type==="LineString",b,y);if(h.type==="MultiLineString"){let x=1/0;for(let T=0;T<h.coordinates.length;T++){const P=eu(h.coordinates[T],!0,b,y,x);if(isNaN(P))return P;if((x=Math.min(x,P))===0)return x}return x}if(h.type==="Polygon"||h.type==="MultiPolygon"){let x=1/0;for(let T=0;T<b.length;T++){const P=We(b[T],!0,h.type==="Polygon"?[h.coordinates]:h.coordinates,y,x);if(isNaN(P))return P;if((x=Math.min(x,P))===0)return x}return x}return null}(r,i,this.geometries);if(e.geometryType()==="Polygon")return function(u,p,h){const b=[];for(const x of function(T,P){const A=T.length;if(A<=1)return[T];const R=[];let D,F;for(let V=0;V<A;V++){const Y=tl(T[V]);Y!==0&&(T[V].area=Math.abs(Y),F===void 0&&(F=Y<0),F===Y<0?(D&&R.push(D),D=[T[V]]):D.push(T[V]))}return D&&R.push(D),R}(u)){const T=[];for(let P=0;P<x.length;++P)T.push(ph(x[P],p));b.push(T)}const y=new ei(b[0][0][0][1],"meters");if(h.type==="Point"||h.type==="MultiPoint"||h.type==="LineString")return We(h.type==="Point"?[h.coordinates]:h.coordinates,h.type==="LineString",b,y);if(h.type==="MultiLineString"){let x=1/0;for(let T=0;T<h.coordinates.length;T++){const P=We(h.coordinates[T],!0,b,y,x);if(isNaN(P))return P;if((x=Math.min(x,P))===0)return x}return x}return h.type==="Polygon"||h.type==="MultiPolygon"?function(x,T,P){let A=1/0;for(const R of x)for(const D of T){const F=gd(R,D,P,A);if(isNaN(F))return F;if((A=Math.min(A,F))===0)return A}return A}(h.type==="Polygon"?[h.coordinates]:h.coordinates,b,y):null}(r,i,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}var En=Qt;function Ea(n){if(n instanceof Rs&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof Sc||n instanceof En)return!1;let e=!0;return n.eachChild(r=>{e&&!Ea(r)&&(e=!1)}),e}function Dn(n){if(n instanceof Rs&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(r=>{e&&!Dn(r)&&(e=!1)}),e}function $a(n){if(n instanceof Rs&&n.name==="config")return!1;let e=!0;return n.eachChild(r=>{e&&!$a(r)&&(e=!1)}),e}function qa(n,e){if(n instanceof Rs&&e.indexOf(n.name)>=0)return!1;let r=!0;return n.eachChild(i=>{r&&!qa(i,e)&&(r=!1)}),r}class ss{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const i=e[1];return r.scope.has(i)?new ss(i,r.scope.get(i)):r.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Sr=ss;class sr{constructor(e,r=[],i,u=new uh,p=[],h,b){this.registry=e,this.path=r,this.key=r.map(y=>`[${y}]`).join(""),this.scope=u,this.errors=p,this.expectedType=i,this._scope=h,this.options=b}parse(e,r,i,u,p={}){return r||i?this.concat(r,i,u)._parse(e,p):this._parse(e,p)}_parse(e,r){function i(u,p,h){return h==="assert"?new Js(p,[u]):h==="coerce"?new Ks(p,[u]):u}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=typeof e[0]=="string"?this.registry[e[0]]:void 0;if(u){let p=u.parse(e,this);if(!p)return null;if(this.expectedType){const h=this.expectedType,b=p.type;if(h.kind!=="string"&&h.kind!=="number"&&h.kind!=="boolean"&&h.kind!=="object"&&h.kind!=="array"||b.kind!=="value")if(h.kind!=="color"&&h.kind!=="formatted"&&h.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(h,b))return null}else p=i(p,h,r.typeAnnotation||"coerce");else p=i(p,h,r.typeAnnotation||"assert")}if(!(p instanceof Go)&&p.type.kind!=="resolvedImage"&&Ls(p)){const h=new Xl(this._scope,this.options);try{p=new Go(p.type,p.evaluate(h))}catch(b){return this.error(b.message),null}}return p}return Ks.parse(["to-array",e],this)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,i){const u=typeof e=="number"?this.path.concat(e):this.path,p=i?this.scope.concat(i):this.scope;return new sr(this.registry,u,r||null,p,this.errors,this._scope,this.options)}error(e,...r){const i=`${this.key}${r.map(u=>`[${u}]`).join("")}`;this.errors.push(new Cs(i,e))}checkSubtype(e,r){const i=Gt(e,r);return i&&this.error(i),i}}var ks=sr;function Ls(n){if(n instanceof Sr)return Ls(n.boundExpression);if(n instanceof Rs&&n.name==="error"||n instanceof Rs&&n.name==="config"||n instanceof Qc||n instanceof Sc||n instanceof En)return!1;const e=n instanceof Ks||n instanceof Js;let r=!0;return n.eachChild(i=>{r=e?r&&Ls(i):r&&i instanceof Go}),!!r&&Ea(n)&&qa(n,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light"])}function Mr(n,e){const r=n.length-1;let i,u,p=0,h=r,b=0;for(;p<=h;)if(b=Math.floor((p+h)/2),i=n[b],u=n[b+1],i<=e){if(b===r||e<u)return b;p=b+1}else{if(!(i>e))throw new rr("Input is not a number.");h=b-1}return 0}class ti{constructor(e,r,i){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[u,p]of i)this.labels.push(u),this.outputs.push(p)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const i=r.parse(e[1],1,ot);if(!i)return null;const u=[];let p=null;r.expectedType&&r.expectedType.kind!=="value"&&(p=r.expectedType);for(let h=1;h<e.length;h+=2){const b=h===1?-1/0:e[h],y=e[h+1],x=h,T=h+1;if(typeof b!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(u.length&&u[u.length-1][0]>=b)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',x);const P=r.parse(y,T,p);if(!P)return null;p=p||P.type,u.push([b,P])}return new ti(p,i,u)}evaluate(e){const r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);const u=this.input.evaluate(e);if(u<=r[0])return i[0].evaluate(e);const p=r.length;return u>=r[p-1]?i[p-1].evaluate(e):i[Mr(r,u)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var yo=ti;function On(n,e,r){return n*(1-r)+e*r}function $i(n,e,r){return n.map((i,u)=>On(i,e[u],r))}var qi=Object.freeze({__proto__:null,array:$i,color:function(n,e,r){return new wa(On(n.r,e.r,r),On(n.g,e.g,r),On(n.b,e.b,r),On(n.a,e.a,r))},number:On});const Tc=.95047,Zo=1.08883,zp=4/29,va=6/29,Ia=3*va*va,tu=va*va*va,vo=Math.PI/180,_d=180/Math.PI;function is(n){return n>tu?Math.pow(n,1/3):n/Ia+zp}function ni(n){return n>va?n*n*n:Ia*(n-zp)}function vi(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Yo(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function ul(n){const e=Yo(n.r),r=Yo(n.g),i=Yo(n.b),u=is((.4124564*e+.3575761*r+.1804375*i)/Tc),p=is((.2126729*e+.7151522*r+.072175*i)/1);return{l:116*p-16,a:500*(u-p),b:200*(p-is((.0193339*e+.119192*r+.9503041*i)/Zo)),alpha:n.a}}function Ds(n){let e=(n.l+16)/116,r=isNaN(n.a)?e:e+n.a/500,i=isNaN(n.b)?e:e-n.b/200;return e=1*ni(e),r=Tc*ni(r),i=Zo*ni(i),new wa(vi(3.2404542*r-1.5371385*e-.4985314*i),vi(-.969266*r+1.8760108*e+.041556*i),vi(.0556434*r-.2040259*e+1.0572252*i),n.alpha)}function xo(n,e,r){const i=e-n;return n+r*(i>180||i<-180?i-360*Math.round(i/360):i)}const Xo={forward:ul,reverse:Ds,interpolate:function(n,e,r){return{l:On(n.l,e.l,r),a:On(n.a,e.a,r),b:On(n.b,e.b,r),alpha:On(n.alpha,e.alpha,r)}}},ai={forward:function(n){const{l:e,a:r,b:i}=ul(n),u=Math.atan2(i,r)*_d;return{h:u<0?u+360:u,c:Math.sqrt(r*r+i*i),l:e,alpha:n.a}},reverse:function(n){const e=n.h*vo,r=n.c;return Ds({l:n.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:n.alpha})},interpolate:function(n,e,r){return{h:xo(n.h,e.h,r),c:On(n.c,e.c,r),l:On(n.l,e.l,r),alpha:On(n.alpha,e.alpha,r)}}};var nu=Object.freeze({__proto__:null,hcl:ai,lab:Xo});class Jo{constructor(e,r,i,u,p){this.type=e,this.operator=r,this.interpolation=i,this.input=u,this.labels=[],this.outputs=[];for(const[h,b]of p)this.labels.push(h),this.outputs.push(b)}static interpolationFactor(e,r,i,u){let p=0;if(e.name==="exponential")p=_s(r,e.base,i,u);else if(e.name==="linear")p=_s(r,1,i,u);else if(e.name==="cubic-bezier"){const h=e.controlPoints;p=new Me(h[0],h[1],h[2],h[3]).solve(_s(r,1,i,u))}return p}static parse(e,r){let[i,u,p,...h]=e;if(!Array.isArray(u)||u.length===0)return r.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const x=u[1];if(typeof x!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:x}}else{if(u[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const x=u.slice(1);if(x.length!==4||x.some(T=>typeof T!="number"||T<0||T>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:x}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(p=r.parse(p,2,ot),!p)return null;const b=[];let y=null;i==="interpolate-hcl"||i==="interpolate-lab"?y=ue:r.expectedType&&r.expectedType.kind!=="value"&&(y=r.expectedType);for(let x=0;x<h.length;x+=2){const T=h[x],P=h[x+1],A=x+3,R=x+4;if(typeof T!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(b.length&&b[b.length-1][0]>=T)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',A);const D=r.parse(P,R,y);if(!D)return null;y=y||D.type,b.push([T,D])}return y.kind==="number"||y.kind==="color"||y.kind==="array"&&y.itemType.kind==="number"&&typeof y.N=="number"?new Jo(y,i,u,p,b):r.error(`Type ${zt(y)} is not interpolatable.`)}evaluate(e){const r=this.labels,i=this.outputs;if(r.length===1)return i[0].evaluate(e);const u=this.input.evaluate(e);if(u<=r[0])return i[0].evaluate(e);const p=r.length;if(u>=r[p-1])return i[p-1].evaluate(e);const h=Mr(r,u),b=Jo.interpolationFactor(this.interpolation,u,r[h],r[h+1]),y=i[h].evaluate(e),x=i[h+1].evaluate(e);return this.operator==="interpolate"?qi[this.type.kind.toLowerCase()](y,x,b):this.operator==="interpolate-hcl"?ai.reverse(ai.interpolate(ai.forward(y),ai.forward(x),b)):Xo.reverse(Xo.interpolate(Xo.forward(y),Xo.forward(x),b))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let i=0;i<this.labels.length;i++)r.push(this.labels[i],this.outputs[i].serialize());return r}}function _s(n,e,r,i){const u=i-r,p=n-r;return u===0?0:e===1?p/u:(Math.pow(e,p)-1)/(Math.pow(e,u)-1)}var Os=Jo;class ri{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let i=null;const u=r.expectedType;u&&u.kind!=="value"&&(i=u);const p=[];for(const b of e.slice(1)){const y=r.parse(b,1+p.length,i,void 0,{typeAnnotation:"omit"});if(!y)return null;i=i||y.type,p.push(y)}const h=u&&p.some(b=>Gt(u,b.type));return new ri(h?Ae:i,p)}evaluate(e){let r,i=null,u=0;for(const p of this.args){if(u++,i=p.evaluate(e),i&&i instanceof Ms&&!i.available&&(r||(r=i),i=null,u===this.args.length))return r;if(i!==null)break}return i}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var dl=ri;class hh{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let p=1;p<e.length-1;p+=2){const h=e[p];if(typeof h!="string")return r.error(`Expected string, but found ${typeof h} instead.`,p);if(/[^a-zA-Z0-9_]/.test(h))return r.error("Variable names must contain only alphanumeric characters or '_'.",p);const b=r.parse(e[p+1],p+1);if(!b)return null;i.push([h,b])}const u=r.parse(e[e.length-1],e.length-1,r.expectedType,i);return u?new hh(i,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,i]of this.bindings)e.push(r,i.serialize());return e.push(this.result.serialize()),e}}var tg=hh;class mh{constructor(e,r,i){this.type=e,this.index=r,this.input=i}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,ot),u=r.parse(e[2],2,kt(r.expectedType||Ae));return i&&u?new mh(u.type.itemType,i,u):null}evaluate(e){const r=this.index.evaluate(e),i=this.input.evaluate(e);if(r<0)throw new rr(`Array index out of bounds: ${r} < 0.`);if(r>=i.length)throw new rr(`Array index out of bounds: ${r} > ${i.length-1}.`);if(r!==Math.floor(r))throw new rr(`Array index must be an integer, but found ${r} instead.`);return i[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var _y=mh;class Ap{constructor(e,r){this.type=G,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,Ae),u=r.parse(e[2],2,Ae);return i&&u?Vn(i.type,[G,C,ot,Uo,Ae])?new Ap(i,u):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${zt(i.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(i==null)return!1;if(!Ca(r,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${zt(dr(r))} instead.`);if(!Ca(i,["string","array"]))throw new rr(`Expected second argument to be of type array or string, but found ${zt(dr(i))} instead.`);return i.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var gh=Ap;class pl{constructor(e,r,i){this.type=ot,this.needle=e,this.haystack=r,this.fromIndex=i}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,Ae),u=r.parse(e[2],2,Ae);if(!i||!u)return null;if(!Vn(i.type,[G,C,ot,Uo,Ae]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${zt(i.type)} instead`);if(e.length===4){const p=r.parse(e[3],3,ot);return p?new pl(i,u,p):null}return new pl(i,u)}evaluate(e){const r=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Ca(r,["boolean","string","number","null"]))throw new rr(`Expected first argument to be of type boolean, string, number or null, but found ${zt(dr(r))} instead.`);if(!Ca(i,["string","array"]))throw new rr(`Expected second argument to be of type array or string, but found ${zt(dr(i))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return i.indexOf(r,u)}return i.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ng=pl;class yd{constructor(e,r,i,u,p,h){this.inputType=e,this.type=r,this.input=i,this.cases=u,this.outputs=p,this.otherwise=h}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let i,u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);const p={},h=[];for(let x=2;x<e.length-1;x+=2){let T=e[x];const P=e[x+1];Array.isArray(T)||(T=[T]);const A=r.concat(x);if(T.length===0)return A.error("Expected at least one branch label.");for(const D of T){if(typeof D!="number"&&typeof D!="string")return A.error("Branch labels must be numbers or strings.");if(typeof D=="number"&&Math.abs(D)>Number.MAX_SAFE_INTEGER)return A.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof D=="number"&&Math.floor(D)!==D)return A.error("Numeric branch labels must be integer values.");if(i){if(A.checkSubtype(i,dr(D)))return null}else i=dr(D);if(p[String(D)]!==void 0)return A.error("Branch labels must be unique.");p[String(D)]=h.length}const R=r.parse(P,x,u);if(!R)return null;u=u||R.type,h.push(R)}const b=r.parse(e[1],1,Ae);if(!b)return null;const y=r.parse(e[e.length-1],e.length-1,u);return y?b.type.kind!=="value"&&r.concat(1).checkSubtype(i,b.type)?null:new yd(i,u,b,p,h,y):null}evaluate(e){const r=this.input.evaluate(e);return(dr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],u={};for(const h of r){const b=u[this.cases[h]];b===void 0?(u[this.cases[h]]=i.length,i.push([this.cases[h],[h]])):i[b][1].push(h)}const p=h=>this.inputType.kind==="number"?Number(h):h;for(const[h,b]of i)e.push(b.length===1?p(b[0]):b.map(p)),e.push(this.outputs[h].serialize());return e.push(this.otherwise.serialize()),e}}var yy=yd;class xi{constructor(e,r,i){this.type=e,this.branches=r,this.otherwise=i}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let i;r.expectedType&&r.expectedType.kind!=="value"&&(i=r.expectedType);const u=[];for(let h=1;h<e.length-1;h+=2){const b=r.parse(e[h],h,G);if(!b)return null;const y=r.parse(e[h+1],h+1,i);if(!y)return null;u.push([b,y]),i=i||y.type}const p=r.parse(e[e.length-1],e.length-1,i);return p?new xi(i,u,p):null}evaluate(e){for(const[r,i]of this.branches)if(r.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,i]of this.branches)e(r),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var vy=xi;class vd{constructor(e,r,i,u){this.type=e,this.input=r,this.beginIndex=i,this.endIndex=u}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=r.parse(e[1],1,Ae),u=r.parse(e[2],2,ot);if(!i||!u)return null;if(!Vn(i.type,[kt(Ae),C,Ae]))return r.error(`Expected first argument to be of type array or string, but found ${zt(i.type)} instead`);if(e.length===4){const p=r.parse(e[3],3,ot);return p?new vd(i.type,i,u,p):null}return new vd(i.type,i,u)}evaluate(e){const r=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Ca(r,["string","array"]))throw new rr(`Expected first argument to be of type array or string, but found ${zt(dr(r))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return r.slice(i,u)}return r.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var xy=vd;function ag(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function rg(n,e,r,i){return i.compare(e,r)===0}function au(n,e,r){const i=n!=="=="&&n!=="!=";return class Yz{constructor(p,h,b){this.type=G,this.lhs=p,this.rhs=h,this.collator=b,this.hasUntypedArgument=p.type.kind==="value"||h.type.kind==="value"}static parse(p,h){if(p.length!==3&&p.length!==4)return h.error("Expected two or three arguments.");const b=p[0];let y=h.parse(p[1],1,Ae);if(!y)return null;if(!ag(b,y.type))return h.concat(1).error(`"${b}" comparisons are not supported for type '${zt(y.type)}'.`);let x=h.parse(p[2],2,Ae);if(!x)return null;if(!ag(b,x.type))return h.concat(2).error(`"${b}" comparisons are not supported for type '${zt(x.type)}'.`);if(y.type.kind!==x.type.kind&&y.type.kind!=="value"&&x.type.kind!=="value")return h.error(`Cannot compare types '${zt(y.type)}' and '${zt(x.type)}'.`);i&&(y.type.kind==="value"&&x.type.kind!=="value"?y=new Js(x.type,[y]):y.type.kind!=="value"&&x.type.kind==="value"&&(x=new Js(y.type,[x])));let T=null;if(p.length===4){if(y.type.kind!=="string"&&x.type.kind!=="string"&&y.type.kind!=="value"&&x.type.kind!=="value")return h.error("Cannot use collator to compare non-string types.");if(T=h.parse(p[3],3,Be),!T)return null}return new Yz(y,x,T)}evaluate(p){const h=this.lhs.evaluate(p),b=this.rhs.evaluate(p);if(i&&this.hasUntypedArgument){const y=dr(h),x=dr(b);if(y.kind!==x.kind||y.kind!=="string"&&y.kind!=="number")throw new rr(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${y.kind}, ${x.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const y=dr(h),x=dr(b);if(y.kind!=="string"||x.kind!=="string")return e(p,h,b)}return this.collator?r(p,h,b,this.collator.evaluate(p)):e(p,h,b)}eachChild(p){p(this.lhs),p(this.rhs),this.collator&&p(this.collator)}outputDefined(){return!0}serialize(){const p=[n];return this.eachChild(h=>{p.push(h.serialize())}),p}}}const sg=au("==",function(n,e,r){return e===r},rg),bh=au("!=",function(n,e,r){return e!==r},function(n,e,r,i){return!rg(0,e,r,i)}),ig=au("<",function(n,e,r){return e<r},function(n,e,r,i){return i.compare(e,r)<0}),wy=au(">",function(n,e,r){return e>r},function(n,e,r,i){return i.compare(e,r)>0}),Bs=au("<=",function(n,e,r){return e<=r},function(n,e,r,i){return i.compare(e,r)<=0}),Sy=au(">=",function(n,e,r){return e>=r},function(n,e,r,i){return i.compare(e,r)>=0});class _h{constructor(e,r,i,u,p,h){this.type=C,this.number=e,this.locale=r,this.currency=i,this.unit=u,this.minFractionDigits=p,this.maxFractionDigits=h}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const i=r.parse(e[1],1,ot);if(!i)return null;const u=e[2];if(typeof u!="object"||Array.isArray(u))return r.error("NumberFormat options argument must be an object.");let p=null;if(u.locale&&(p=r.parse(u.locale,1,C),!p))return null;let h=null;if(u.currency&&(h=r.parse(u.currency,1,C),!h))return null;let b=null;if(u.unit&&(b=r.parse(u.unit,1,C),!b))return null;let y=null;if(u["min-fraction-digits"]&&(y=r.parse(u["min-fraction-digits"],1,ot),!y))return null;let x=null;return u["max-fraction-digits"]&&(x=r.parse(u["max-fraction-digits"],1,ot),!x)?null:new _h(i,p,h,b,y,x)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class yh{constructor(e){this.type=ot,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=r.parse(e[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${zt(i.type)} instead.`):new yh(i):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new rr(`Expected value to be of type string or array, but found ${zt(dr(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}function xd(n){return function(){n=1831565813+(n|=0)|0;let e=Math.imul(n^n>>>15,1|n);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}const vh={"==":sg,"!=":bh,">":wy,"<":ig,">=":Sy,"<=":Bs,array:Js,at:_y,boolean:Js,case:vy,coalesce:dl,collator:Qc,format:xc,image:wc,in:gh,"index-of":ng,interpolate:Os,"interpolate-hcl":Os,"interpolate-lab":Os,length:yh,let:tg,literal:Go,match:yy,number:Js,"number-format":_h,object:Js,slice:xy,step:yo,string:Js,"to-boolean":Ks,"to-color":Ks,"to-number":Ks,"to-string":Ks,var:Sr,within:Sc,distance:En};function Cp(n,[e,r,i,u]){e=e.evaluate(n),r=r.evaluate(n),i=i.evaluate(n);const p=u?u.evaluate(n):1,h=gi(e,r,i,p);if(h)throw new rr(h);return new wa(e/255*p,r/255*p,i/255*p,p)}function og(n,[e,r,i,u]){e=e.evaluate(n),r=r.evaluate(n),i=i.evaluate(n);const p=u?u.evaluate(n):1,h=function(x,T,P,A){return typeof x=="number"&&x>=0&&x<=360?typeof T=="number"&&T>=0&&T<=100&&typeof P=="number"&&P>=0&&P<=100?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:`Invalid hsla value [${[x,T,P,A].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof A=="number"?[x,T,P,A]:[x,T,P]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof A=="number"?[x,T,P,A]:[x,T,P]).join(", ")}]: 'h' must be between 0 and 360.`}(e,r,i,p);if(h)throw new rr(h);const b=`hsla(${e}, ${r}%, ${i}%, ${p})`,y=wa.parse(b);if(!y)throw new rr(`Failed to parse HSLA color: ${b}`);return y}function cg(n,e){return n in e}function fl(n,e){const r=e[n];return r===void 0?null:r}function lg(n,e){switch(n){case"string":return String(e);case"number":return+e;case"boolean":return!!e;case"color":return wa.parse(e)}return e}function ug(n,e,r,i){return i!==void 0&&(n=i*Math.round(n/i)),e!==void 0&&n<e&&(n=e),r!==void 0&&n>r&&(n=r),n}function xh(n,e,r){e=[e,r,n.scope].filter(Boolean).join("");const i=n.getConfig(e);if(!i)return null;const{type:u,value:p,values:h,minValue:b,maxValue:y,stepValue:x}=i,T=i.default.evaluate(n);let P=T;if(p){const A=n.scope;n.scope=(A||"").split("").slice(1).join(""),P=p.evaluate(n),n.scope=A}return u&&(P=lg(u,P)),p!==void 0&&P!==void 0&&h&&!h.includes(P)&&(P=T,u&&(P=lg(u,P))),P===void 0||b===void 0&&y===void 0&&x===void 0||(typeof P=="number"?P=ug(P,b,y,x):Array.isArray(P)&&(P=P.map(A=>typeof A=="number"?ug(A,b,y,x):A))),P}function Ec(n){return{type:n}}Rs.register(vh,{error:[{kind:"error"},[C],(n,[e])=>{throw new rr(e.evaluate(n))}],typeof:[C,[Ae],(n,[e])=>zt(dr(e.evaluate(n)))],"to-rgba":[kt(ot,4),[ue],(n,[e])=>e.evaluate(n).toArray()],rgb:[ue,[ot,ot,ot],Cp],rgba:[ue,[ot,ot,ot,ot],Cp],hsl:[ue,[ot,ot,ot],og],hsla:[ue,[ot,ot,ot,ot],og],has:{type:G,overloads:[[[C],(n,[e])=>cg(e.evaluate(n),n.properties())],[[C,Pe],(n,[e,r])=>cg(e.evaluate(n),r.evaluate(n))]]},get:{type:Ae,overloads:[[[C],(n,[e])=>fl(e.evaluate(n),n.properties())],[[C,Pe],(n,[e,r])=>fl(e.evaluate(n),r.evaluate(n))]]},config:{type:Ae,overloads:[[[C],(n,[e])=>xh(n,e.evaluate(n))],[[C,C],(n,[e,r])=>xh(n,e.evaluate(n),r.evaluate(n))]]},"feature-state":[Ae,[C],(n,[e])=>fl(e.evaluate(n),n.featureState||{})],properties:[Pe,[],n=>n.properties()],"geometry-type":[C,[],n=>n.geometryType()],id:[Ae,[],n=>n.id()],zoom:[ot,[],n=>n.globals.zoom],pitch:[ot,[],n=>n.globals.pitch||0],"distance-from-center":[ot,[],n=>n.distanceFromCenter()],"measure-light":[ot,[C],(n,[e])=>n.measureLight(e.evaluate(n))],"heatmap-density":[ot,[],n=>n.globals.heatmapDensity||0],"line-progress":[ot,[],n=>n.globals.lineProgress||0],"raster-value":[ot,[],n=>n.globals.rasterValue||0],"sky-radial-progress":[ot,[],n=>n.globals.skyRadialProgress||0],accumulated:[Ae,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[ot,Ec(ot),(n,e)=>{let r=0;for(const i of e)r+=i.evaluate(n);return r}],"*":[ot,Ec(ot),(n,e)=>{let r=1;for(const i of e)r*=i.evaluate(n);return r}],"-":{type:ot,overloads:[[[ot,ot],(n,[e,r])=>e.evaluate(n)-r.evaluate(n)],[[ot],(n,[e])=>-e.evaluate(n)]]},"/":[ot,[ot,ot],(n,[e,r])=>e.evaluate(n)/r.evaluate(n)],"%":[ot,[ot,ot],(n,[e,r])=>e.evaluate(n)%r.evaluate(n)],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(n,[e,r])=>Math.pow(e.evaluate(n),r.evaluate(n))],sqrt:[ot,[ot],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[ot,[ot],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[ot,[ot],(n,[e])=>Math.log(e.evaluate(n))],log2:[ot,[ot],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[ot,[ot],(n,[e])=>Math.sin(e.evaluate(n))],cos:[ot,[ot],(n,[e])=>Math.cos(e.evaluate(n))],tan:[ot,[ot],(n,[e])=>Math.tan(e.evaluate(n))],asin:[ot,[ot],(n,[e])=>Math.asin(e.evaluate(n))],acos:[ot,[ot],(n,[e])=>Math.acos(e.evaluate(n))],atan:[ot,[ot],(n,[e])=>Math.atan(e.evaluate(n))],min:[ot,Ec(ot),(n,e)=>Math.min(...e.map(r=>r.evaluate(n)))],max:[ot,Ec(ot),(n,e)=>Math.max(...e.map(r=>r.evaluate(n)))],abs:[ot,[ot],(n,[e])=>Math.abs(e.evaluate(n))],round:[ot,[ot],(n,[e])=>{const r=e.evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[ot,[ot],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[ot,[ot],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[G,[C,Ae],(n,[e,r])=>n.properties()[e.value]===r.value],"filter-id-==":[G,[Ae],(n,[e])=>n.id()===e.value],"filter-type-==":[G,[C],(n,[e])=>n.geometryType()===e.value],"filter-<":[G,[C,Ae],(n,[e,r])=>{const i=n.properties()[e.value],u=r.value;return typeof i==typeof u&&i<u}],"filter-id-<":[G,[Ae],(n,[e])=>{const r=n.id(),i=e.value;return typeof r==typeof i&&r<i}],"filter->":[G,[C,Ae],(n,[e,r])=>{const i=n.properties()[e.value],u=r.value;return typeof i==typeof u&&i>u}],"filter-id->":[G,[Ae],(n,[e])=>{const r=n.id(),i=e.value;return typeof r==typeof i&&r>i}],"filter-<=":[G,[C,Ae],(n,[e,r])=>{const i=n.properties()[e.value],u=r.value;return typeof i==typeof u&&i<=u}],"filter-id-<=":[G,[Ae],(n,[e])=>{const r=n.id(),i=e.value;return typeof r==typeof i&&r<=i}],"filter->=":[G,[C,Ae],(n,[e,r])=>{const i=n.properties()[e.value],u=r.value;return typeof i==typeof u&&i>=u}],"filter-id->=":[G,[Ae],(n,[e])=>{const r=n.id(),i=e.value;return typeof r==typeof i&&r>=i}],"filter-has":[G,[Ae],(n,[e])=>e.value in n.properties()],"filter-has-id":[G,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[G,[kt(C)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[G,[kt(Ae)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[G,[C,kt(Ae)],(n,[e,r])=>r.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[G,[C,kt(Ae)],(n,[e,r])=>function(i,u,p,h){for(;p<=h;){const b=p+h>>1;if(u[b]===i)return!0;u[b]>i?h=b-1:p=b+1}return!1}(n.properties()[e.value],r.value,0,r.value.length-1)],all:{type:G,overloads:[[[G,G],(n,[e,r])=>e.evaluate(n)&&r.evaluate(n)],[Ec(G),(n,e)=>{for(const r of e)if(!r.evaluate(n))return!1;return!0}]]},any:{type:G,overloads:[[[G,G],(n,[e,r])=>e.evaluate(n)||r.evaluate(n)],[Ec(G),(n,e)=>{for(const r of e)if(r.evaluate(n))return!0;return!1}]]},"!":[G,[G],(n,[e])=>!e.evaluate(n)],"is-supported-script":[G,[C],(n,[e])=>{const r=n.globals&&n.globals.isSupportedScript;return!r||r(e.evaluate(n))}],upcase:[C,[C],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[C,[C],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[C,Ec(Ae),(n,e)=>e.map(r=>vc(r.evaluate(n))).join("")],"resolved-locale":[C,[Be],(n,[e])=>e.evaluate(n).resolvedLocale()],random:[ot,[ot,ot,Ae],(n,e)=>{const[r,i,u]=e.map(h=>h.evaluate(n));if(r>i||r===i)return r;let p;if(typeof u=="string")p=function(h){let b=0;if(h.length===0)return b;for(let y=0;y<h.length;y++)b=(b<<5)-b+h.charCodeAt(y),b&=b;return b}(u);else{if(typeof u!="number")throw new rr(`Invalid seed input: ${u}`);p=u}return r+xd(p)()*(i-r)}]});var wd=vh;function wi(n){return{result:"success",value:n}}function Ic(n){return{result:"error",value:n}}function dg(n,e){return!!n&&!!n.parameters&&n.parameters.indexOf(e)>-1}function Pc(n){return n["property-type"]==="data-driven"}function Sd(n){return dg(n.expression,"measure-light")}function wh(n){return dg(n.expression,"zoom")}function Sh(n){return!!n.expression&&n.expression.interpolated}function Mp(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Ty(n){return n}function pg(n,e){const r=e.type==="color",i=n.stops&&typeof n.stops[0][0]=="object",u=i||!(i||n.property!==void 0),p=n.type||(Sh(e)?"exponential":"interval");if(r&&((n=Ys({},n)).stops&&(n.stops=n.stops.map(x=>[x[0],wa.parse(x[1])])),n.default=wa.parse(n.default?n.default:e.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!nu[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let h,b,y;if(p==="exponential")h=Td;else if(p==="interval")h=si;else if(p==="categorical"){h=Rp,b=Object.create(null);for(const x of n.stops)b[x[0]]=x[1];y=typeof n.stops[0][0]}else{if(p!=="identity")throw new Error(`Unknown function type "${p}"`);h=Ey}if(i){const x={},T=[];for(let R=0;R<n.stops.length;R++){const D=n.stops[R],F=D[0].zoom;x[F]===void 0&&(x[F]={zoom:F,type:n.type,property:n.property,default:n.default,stops:[]},T.push(F)),x[F].stops.push([D[0].value,D[1]])}const P=[];for(const R of T)P.push([x[R].zoom,pg(x[R],e)]);const A={name:"linear"};return{kind:"composite",interpolationType:A,interpolationFactor:Os.interpolationFactor.bind(void 0,A),zoomStops:P.map(R=>R[0]),evaluate:({zoom:R},D)=>Td({stops:P,base:n.base},e,R).evaluate(R,D)}}if(u){const x=p==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:x,interpolationFactor:Os.interpolationFactor.bind(void 0,x),zoomStops:n.stops.map(T=>T[0]),evaluate:({zoom:T})=>h(n,e,T,b,y)}}return{kind:"source",evaluate(x,T){const P=T&&T.properties?T.properties[n.property]:void 0;return P===void 0?zc(n.default,e.default):h(n,e,P,b,y)}}}function zc(n,e,r){return n!==void 0?n:e!==void 0?e:r!==void 0?r:void 0}function Rp(n,e,r,i,u){return zc(typeof r===u?i[r]:void 0,n.default,e.default)}function si(n,e,r){if(ta(r)!=="number")return zc(n.default,e.default);const i=n.stops.length;if(i===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[i-1][0])return n.stops[i-1][1];const u=Mr(n.stops.map(p=>p[0]),r);return n.stops[u][1]}function Td(n,e,r){const i=n.base!==void 0?n.base:1;if(ta(r)!=="number")return zc(n.default,e.default);const u=n.stops.length;if(u===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[u-1][0])return n.stops[u-1][1];const p=Mr(n.stops.map(T=>T[0]),r),h=function(T,P,A,R){const D=R-A,F=T-A;return D===0?0:P===1?F/D:(Math.pow(P,F)-1)/(Math.pow(P,D)-1)}(r,i,n.stops[p][0],n.stops[p+1][0]),b=n.stops[p][1],y=n.stops[p+1][1];let x=qi[e.type]||Ty;if(n.colorSpace&&n.colorSpace!=="rgb"){const T=nu[n.colorSpace];x=(P,A)=>T.reverse(T.interpolate(T.forward(P),T.forward(A),h))}return typeof b.evaluate=="function"?{evaluate(...T){const P=b.evaluate.apply(void 0,T),A=y.evaluate.apply(void 0,T);if(P!==void 0&&A!==void 0)return x(P,A,h)}}:x(b,y,h)}function Ey(n,e,r){return e.type==="color"?r=wa.parse(r):e.type==="formatted"?r=Wr.fromString(r.toString()):e.type==="resolvedImage"?r=Ms.fromString(r.toString()):ta(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0),zc(r,n.default,e.default)}class Th{constructor(e,r,i,u){this.expression=e,this._warningHistory={},this._evaluator=new Xl(i,u),this._defaultValue=r?function(p){return p.type==="color"&&(Mp(p.default)||Array.isArray(p.default))?new wa(0,0,0,0):p.type==="color"?wa.parse(p.default)||null:p.default===void 0?null:p.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,i,u,p,h,b,y){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=i,this._evaluator.canonical=u||null,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=h,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=y||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,i,u,p,h,b,y){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=i||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=h||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=y||null;try{const x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new rr(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function kp(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in wd}function Ed(n,e,r,i){const u=new ks(wd,[],e?function(h){const b={color:ue,string:C,number:ot,enum:C,boolean:G,formatted:qe,resolvedImage:Rt};return h.type==="array"?kt(b[h.value]||Ae,h.length):b[h.type]}(e):void 0,void 0,void 0,r,i),p=u.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?wi(new Th(p,e,r,i)):Ic(u.errors)}class Id{constructor(e,r,i){this.kind=e,this._styleExpression=r,this.isLightConstant=i,this.isStateDependent=e!=="constant"&&!Dn(r.expression),this.isConfigDependent=!$a(r.expression)}evaluateWithoutErrorHandling(e,r,i,u,p,h){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,u,p,h)}evaluate(e,r,i,u,p,h){return this._styleExpression.evaluate(e,r,i,u,p,h)}}class Pd{constructor(e,r,i,u,p){this.kind=e,this.zoomStops=i,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!Dn(r.expression),this.isLightConstant=p,this.isConfigDependent=!$a(r.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,r,i,u,p,h){return this._styleExpression.evaluateWithoutErrorHandling(e,r,i,u,p,h)}evaluate(e,r,i,u,p,h){return this._styleExpression.evaluate(e,r,i,u,p,h)}interpolationFactor(e,r,i){return this.interpolationType?Os.interpolationFactor(this.interpolationType,e,r,i):0}}function zd(n,e,r,i){if((n=Ed(n,e,r,i)).result==="error")return n;const u=n.value.expression,p=Ea(u);if(!p&&!Pc(e))return Ic([new Cs("","data expressions not supported")]);const h=qa(u,["zoom","pitch","distance-from-center"]);if(!h&&!wh(e))return Ic([new Cs("","zoom expressions not supported")]);const b=qa(u,["measure-light"]);if(!b&&!Sd(e))return Ic([new Cs("","measure-light expression not supported")]);const y=e.expression&&e.expression.relaxZoomRestriction,x=Dp(u);return x||h||y?x instanceof Cs?Ic([x]):x instanceof Os&&!Sh(e)?Ic([new Cs("",'"interpolate" expressions cannot be used with this property')]):wi(x?new Pd(p?"camera":"composite",n.value,x.labels,x instanceof Os?x.interpolation:void 0,b):new Id(p?"constant":"source",n.value,b)):Ic([new Cs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Lp{constructor(e,r){this._parameters=e,this._specification=r,Ys(this,pg(this._parameters,this._specification))}static deserialize(e){return new Lp(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Dp(n){let e=null;if(n instanceof tg)e=Dp(n.result);else if(n instanceof dl){for(const r of n.args)if(e=Dp(r),e)break}else(n instanceof yo||n instanceof Os)&&n.input instanceof Rs&&n.input.name==="zoom"&&(e=n);return e instanceof Cs||n.eachChild(r=>{const i=Dp(r);i instanceof Cs?e=i:e&&i&&e!==i&&(e=new Cs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Ns(n){const e=n.key,r=n.value,i=n.valueSpec||{},u=n.objectElementValidators||{},p=n.style,h=n.styleSpec;let b=[];const y=ta(r);if(y!=="object")return[new Xt(e,r,`object expected, ${y} found`)];for(const x in r){const T=x.split(".")[0];let P;u[T]?P=u[T]:i[T]?P=Ir:u["*"]?P=u["*"]:i["*"]&&(P=Ir),P?b=b.concat(P({key:(e&&`${e}.`)+x,value:r[x],valueSpec:i[T]||i["*"],style:p,styleSpec:h,object:r,objectKey:x},r)):b.push(new mi(e,r[x],`unknown property "${x}"`))}for(const x in i)u[x]||i[x].required&&i[x].default===void 0&&r[x]===void 0&&b.push(new Xt(e,r,`missing required property "${x}"`));return b}function fg(n){const e=n.value,r=n.valueSpec,i=n.style,u=n.styleSpec,p=n.key,h=n.arrayElementValidator||Ir;if(ta(e)!=="array")return[new Xt(p,e,`array expected, ${ta(e)} found`)];if(r.length&&e.length!==r.length)return[new Xt(p,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new Xt(p,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let b={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};u.$version<7&&(b.function=r.function),ta(r.value)==="object"&&(b=r.value);let y=[];for(let x=0;x<e.length;x++)y=y.concat(h({array:e,arrayIndex:x,value:e[x],valueSpec:b,style:i,styleSpec:u,key:`${p}[${x}]`},!0));return y}function Eh(n){const e=n.key,r=n.value,i=n.valueSpec;let u=ta(r);if(u==="number"&&r!=r&&(u="NaN"),u!=="number")return[new Xt(e,r,`number expected, ${u} found`)];if("minimum"in i){let p=i.minimum;if(ta(i.minimum)==="array"&&(p=i.minimum[n.arrayIndex]),r<p)return[new Xt(e,r,`${r} is less than the minimum value ${p}`)]}if("maximum"in i){let p=i.maximum;if(ta(i.maximum)==="array"&&(p=i.maximum[n.arrayIndex]),r>p)return[new Xt(e,r,`${r} is greater than the maximum value ${p}`)]}return[]}function Ih(n){const e=n.valueSpec,r=ar(n.value.type);let i,u,p,h={};const b=r!=="categorical"&&n.value.property===void 0,y=!b,x=ta(n.value.stops)==="array"&&ta(n.value.stops[0])==="array"&&ta(n.value.stops[0][0])==="object",T=Ns({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(R){if(r==="identity")return[new Xt(R.key,R.value,'identity function may not have a "stops" property')];let D=[];const F=R.value;return D=D.concat(fg({key:R.key,value:F,valueSpec:R.valueSpec,style:R.style,styleSpec:R.styleSpec,arrayElementValidator:P})),ta(F)==="array"&&F.length===0&&D.push(new Xt(R.key,F,"array must have at least one stop")),D},default:function(R){return Ir({key:R.key,value:R.value,valueSpec:e,style:R.style,styleSpec:R.styleSpec})}}});return r==="identity"&&b&&T.push(new Xt(n.key,n.value,'missing required property "property"')),r==="identity"||n.value.stops||T.push(new Xt(n.key,n.value,'missing required property "stops"')),r==="exponential"&&n.valueSpec.expression&&!Sh(n.valueSpec)&&T.push(new Xt(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(y&&!Pc(n.valueSpec)?T.push(new Xt(n.key,n.value,"property functions not supported")):b&&!wh(n.valueSpec)&&T.push(new Xt(n.key,n.value,"zoom functions not supported"))),r!=="categorical"&&!x||n.value.property!==void 0||T.push(new Xt(n.key,n.value,'"property" property is required')),T;function P(R){let D=[];const F=R.value,V=R.key;if(ta(F)!=="array")return[new Xt(V,F,`array expected, ${ta(F)} found`)];if(F.length!==2)return[new Xt(V,F,`array length 2 expected, length ${F.length} found`)];if(x){if(ta(F[0])!=="object")return[new Xt(V,F,`object expected, ${ta(F[0])} found`)];if(F[0].zoom===void 0)return[new Xt(V,F,"object stop key must have zoom")];if(F[0].value===void 0)return[new Xt(V,F,"object stop key must have value")];const Y=ar(F[0].zoom);if(typeof Y!="number")return[new Xt(V,F[0].zoom,"stop zoom values must be numbers")];if(p&&p>Y)return[new Xt(V,F[0].zoom,"stop zoom values must appear in ascending order")];Y!==p&&(p=Y,u=void 0,h={}),D=D.concat(Ns({key:`${V}[0]`,value:F[0],valueSpec:{zoom:{}},style:R.style,styleSpec:R.styleSpec,objectElementValidators:{zoom:Eh,value:A}}))}else D=D.concat(A({key:`${V}[0]`,value:F[0],valueSpec:{},style:R.style,styleSpec:R.styleSpec},F));return kp(Xs(F[1]))?D.concat([new Xt(`${V}[1]`,F[1],"expressions are not allowed in function stops.")]):D.concat(Ir({key:`${V}[1]`,value:F[1],valueSpec:e,style:R.style,styleSpec:R.styleSpec}))}function A(R,D){const F=ta(R.value),V=ar(R.value),Y=R.value!==null?R.value:D;if(i){if(F!==i)return[new Xt(R.key,Y,`${F} stop domain type must match previous stop domain type ${i}`)]}else i=F;if(F!=="number"&&F!=="string"&&F!=="boolean"&&typeof V!="number"&&typeof V!="string"&&typeof V!="boolean")return[new Xt(R.key,Y,"stop domain value must be a number, string, or boolean")];if(F!=="number"&&r!=="categorical"){let ie=`number expected, ${F} found`;return Pc(e)&&r===void 0&&(ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xt(R.key,Y,ie)]}return r!=="categorical"||F!=="number"||typeof V=="number"&&isFinite(V)&&Math.floor(V)===V?r!=="categorical"&&F==="number"&&typeof V=="number"&&typeof u=="number"&&u!==void 0&&V<u?[new Xt(R.key,Y,"stop domain values must appear in ascending order")]:(u=V,r==="categorical"&&V in h?[new Xt(R.key,Y,"stop domain values must be unique")]:(h[V]=!0,[])):[new Xt(R.key,Y,`integer expected, found ${String(V)}`)]}}function hl(n){const e=(n.expressionContext==="property"?zd:Ed)(Xs(n.value),n.valueSpec);if(e.result==="error")return e.value.map(i=>new Xt(`${n.key}${i.key}`,n.value,i.message));const r=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!r.outputDefined())return[new Xt(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!Dn(r))return[new Xt(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter")return Op(r,n);if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!qa(r,["zoom","feature-state"]))return[new Xt(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Ea(r))return[new Xt(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Op(n,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const u of e.valueSpec.expression.parameters)r.delete(u);if(r.size===0)return[];const i=[];return n instanceof Rs&&r.has(n.name)?[new Xt(e.key,e.value,`["${n.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(n.eachChild(u=>{i.push(...Op(u,e))}),i)}function ml(n){const e=n.key,r=n.value,i=n.valueSpec,u=[];return Array.isArray(i.values)?i.values.indexOf(ar(r))===-1&&u.push(new Xt(e,r,`expected one of [${i.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(i.values).indexOf(ar(r))===-1&&u.push(new Xt(e,r,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(r)} found`)),u}function Bp(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!Bp(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Np(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Bp(n)||(n=Fp(n));const r=n;let i=!0;try{i=function(x){if(!Ac(x))return x;let T=Xs(x);return hg(T),T=Ph(T),T}(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(r,null,2)}
        `)}const u=Ve[`filter_${e}`],p=Ed(i,u);let h=null;if(p.result==="error")throw new Error(p.value.map(x=>`${x.key}: ${x.message}`).join(", "));h=(x,T,P)=>p.value.evaluate(x,T,{},P);let b=null,y=null;if(i!==r){const x=Ed(r,u);if(x.result==="error")throw new Error(x.value.map(T=>`${T.key}: ${T.message}`).join(", "));b=(T,P,A,R,D)=>x.value.evaluate(T,P,{},A,void 0,void 0,R,D),y=!Ea(x.value.expression)}return{filter:h,dynamicFilter:b||void 0,needGeometry:mg(i),needFeature:!!y}}function Ph(n){if(!Array.isArray(n))return n;const e=function(r){if(Iy.has(r[0])){for(let i=1;i<r.length;i++)if(Ac(r[i]))return!0}return r}(n);return e===!0?e:e.map(r=>Ph(r))}function hg(n){let e=!1;const r=[];if(n[0]==="case"){for(let i=1;i<n.length-1;i+=2)e=e||Ac(n[i]),r.push(n[i+1]);r.push(n[n.length-1])}else if(n[0]==="match"){e=e||Ac(n[1]);for(let i=2;i<n.length-1;i+=2)r.push(n[i+1]);r.push(n[n.length-1])}else if(n[0]==="step"){e=e||Ac(n[1]);for(let i=1;i<n.length-1;i+=2)r.push(n[i+1])}e&&(n.length=0,n.push("any",...r));for(let i=1;i<n.length;i++)hg(n[i])}function Ac(n){if(!Array.isArray(n))return!1;if((e=n[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let r=1;r<n.length;r++)if(Ac(n[r]))return!0;return!1}const Iy=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Py(n,e){return n<e?-1:n>e?1:0}function mg(n){if(!Array.isArray(n))return!1;if(n[0]==="within"||n[0]==="distance")return!0;for(let e=1;e<n.length;e++)if(mg(n[e]))return!0;return!1}function Fp(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?jp(n[1],n[2],"=="):e==="!="?Up(jp(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?jp(n[1],n[2],e):e==="any"?(r=n.slice(1),["any"].concat(r.map(Fp))):e==="all"?["all"].concat(n.slice(1).map(Fp)):e==="none"?["all"].concat(n.slice(1).map(Fp).map(Up)):e==="in"?gg(n[1],n.slice(2)):e==="!in"?Up(gg(n[1],n.slice(2))):e==="has"?bg(n[1]):e!=="!has"||Up(bg(n[1]));var r}function jp(n,e,r){switch(n){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,n,e]}}function gg(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",n,["literal",e.sort(Py)]]:["filter-in-small",n,["literal",e]]}}function bg(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Up(n){return["!",n]}function zh(n){return Bp(Xs(n.value))?hl(Ys({},n,{expressionContext:"filter",valueSpec:n.styleSpec[`filter_${n.layerType||"fill"}`]})):_g(n)}function _g(n){const e=n.value,r=n.key;if(ta(e)!=="array")return[new Xt(r,e,`array expected, ${ta(e)} found`)];const i=n.styleSpec;let u,p=[];if(e.length<1)return[new Xt(r,e,"filter array must have at least 1 element")];switch(p=p.concat(ml({key:`${r}[0]`,value:e[0],valueSpec:i.filter_operator,style:n.style,styleSpec:n.styleSpec})),ar(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ar(e[1])==="$type"&&p.push(new Xt(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&p.push(new Xt(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(u=ta(e[1]),u!=="string"&&p.push(new Xt(`${r}[1]`,e[1],`string expected, ${u} found`)));for(let h=2;h<e.length;h++)u=ta(e[h]),ar(e[1])==="$type"?p=p.concat(ml({key:`${r}[${h}]`,value:e[h],valueSpec:i.geometry_type,style:n.style,styleSpec:n.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&p.push(new Xt(`${r}[${h}]`,e[h],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let h=1;h<e.length;h++)p=p.concat(_g({key:`${r}[${h}]`,value:e[h],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":u=ta(e[1]),e.length!==2?p.push(new Xt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="string"&&p.push(new Xt(`${r}[1]`,e[1],`string expected, ${u} found`))}return p}function yg(n,e){const r=n.key,i=n.style,u=n.layer,p=n.styleSpec,h=n.value,b=n.objectKey,y=p[`${e}_${n.layerType}`];if(!y)return[];const x=b.match(/^(.*)-transition$/);if(e==="paint"&&x&&y[x[1]]&&y[x[1]].transition)return Ir({key:r,value:h,valueSpec:p.transition,style:i,styleSpec:p});const T=n.valueSpec||y[b];if(!T)return[new mi(r,h,`unknown property "${b}"`)];let P;if(ta(h)==="string"&&Pc(T)&&!T.tokens&&(P=/^{([^}]+)}$/.exec(h))){const R=`\`{ "type": "identity", "property": ${P?JSON.stringify(P[1]):'"_"'} }\``;return[new Xt(r,h,`"${b}" does not support interpolation syntax
Use an identity property function instead: ${R}.`)]}const A=[];if(n.layerType==="symbol")b!=="text-field"||!i||i.glyphs||i.imports||A.push(new Xt(r,h,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&Mp(Xs(h))&&ar(h.type)==="identity"&&A.push(new Xt(r,h,'"text-font" does not support identity functions'));else if(n.layerType==="model"&&e==="paint"&&u&&u.layout&&u.layout.hasOwnProperty("model-id")&&Pc(T)&&(Sd(T)||wh(T))){const R=zd(Xs(h),T),D=R.value.expression||R.value._styleExpression.expression;D&&!qa(D,["measure-light"])&&(b==="model-emissive-strength"&&Ea(D)&&Dn(D)||A.push(new Xt(r,h,`${b} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return A.concat(Ir({key:n.key,value:h,valueSpec:T,style:i,styleSpec:p,expressionContext:"property",propertyType:e,propertyKey:b}))}function vg(n){return yg(n,"paint")}function Ad(n){return yg(n,"layout")}function xg(n){let e=[];const r=n.value,i=n.key,u=n.style,p=n.styleSpec;r.type||r.ref||e.push(new Xt(i,r,'either "type" or "ref" is required'));let h=ar(r.type);const b=ar(r.ref);if(r.id){const y=ar(r.id);for(let x=0;x<n.arrayIndex;x++){const T=u.layers[x];ar(T.id)===y&&e.push(new Xt(i,r.id,`duplicate layer id "${r.id}", previously used at line ${T.id.__line__}`))}}if("ref"in r){let y;["type","source","source-layer","filter","layout"].forEach(x=>{x in r&&e.push(new Xt(i,r[x],`"${x}" is prohibited for ref layers`))}),u.layers.forEach(x=>{ar(x.id)===b&&(y=x)}),y?y.ref?e.push(new Xt(i,r.ref,"ref cannot reference another ref layer")):h=ar(y.type):typeof b=="string"&&e.push(new Xt(i,r.ref,`ref layer "${b}" not found`))}else if(h!=="background"&&h!=="sky"&&h!=="slot")if(r.source){const y=u.sources&&u.sources[r.source],x=y&&ar(y.type);y?x==="vector"&&h==="raster"?e.push(new Xt(i,r.source,`layer "${r.id}" requires a raster source`)):x==="raster"&&h!=="raster"?e.push(new Xt(i,r.source,`layer "${r.id}" requires a vector source`)):x!=="vector"||r["source-layer"]?x==="raster-dem"&&h!=="hillshade"?e.push(new Xt(i,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):h!=="line"||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||x==="geojson"&&y.lineMetrics||e.push(new Xt(i,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Xt(i,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new Xt(i,r.source,`source "${r.source}" not found`))}else e.push(new Xt(i,r,'missing required property "source"'));return e=e.concat(Ns({key:i,value:r,valueSpec:p.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ir({key:`${i}.type`,value:r.type,valueSpec:p.layer.type,style:n.style,styleSpec:n.styleSpec,object:r,objectKey:"type"}),filter:y=>zh(Ys({layerType:h},y)),layout:y=>Ns({layer:r,key:y.key,value:y.value,valueSpec:{},style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":x=>Ad(Ys({layerType:h},x))}}),paint:y=>Ns({layer:r,key:y.key,value:y.value,valueSpec:{},style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":x=>vg(Ys({layerType:h,layer:r},x))}})}})),e}function ru(n){const e=n.value,r=n.key,i=ta(e);return i!=="string"?[new Xt(r,e,`string expected, ${i} found`)]:[]}const Cd={promoteId:function({key:n,value:e}){if(ta(e)==="string")return ru({key:n,value:e});{const r=[];for(const i in e)r.push(...ru({key:`${n}.${i}`,value:e[i]}));return r}}};function wg(n){const e=n.value,r=n.key,i=n.styleSpec,u=n.style;if(!e.type)return[new Xt(r,e,'"type" is required')];const p=ar(e.type);let h=[];switch(["vector","raster","raster-dem"].includes(p)&&(e.url||e.tiles||h.push(new mi(r,e,'Either "url" or "tiles" is required.'))),p){case"vector":case"raster":case"raster-dem":return h=h.concat(Ns({key:r,value:e,valueSpec:i[`source_${p.replace("-","_")}`],style:n.style,styleSpec:i,objectElementValidators:Cd})),h;case"geojson":if(h=Ns({key:r,value:e,valueSpec:i.source_geojson,style:u,styleSpec:i,objectElementValidators:Cd}),e.cluster)for(const b in e.clusterProperties){const[y,x]=e.clusterProperties[b],T=typeof y=="string"?[y,["accumulated"],["get",b]]:y;h.push(...hl({key:`${r}.${b}.map`,value:x,expressionContext:"cluster-map"})),h.push(...hl({key:`${r}.${b}.reduce`,value:T,expressionContext:"cluster-reduce"}))}return h;case"video":return Ns({key:r,value:e,valueSpec:i.source_video,style:u,styleSpec:i});case"image":return Ns({key:r,value:e,valueSpec:i.source_image,style:u,styleSpec:i});case"canvas":return[new Xt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ml({key:`${r}.type`,value:e.type,valueSpec:{values:Sg(i)},style:u,styleSpec:i})}}function Sg(n){return n.source.reduce((e,r)=>{const i=n[r];return i.type.type==="enum"&&(e=e.concat(Object.keys(i.type.values))),e},[])}function Tg(n){const e=n.value;let r=[];if(!e)return r;const i=ta(e);return i!=="string"?(r=r.concat([new Xt(n.key,e,`string expected, "${i}" found`)]),r):(function(u){const p=u.indexOf("://")===-1;try{return new URL(u,p?"http://example.com":void 0),!0}catch{return!1}}(e)||(r=r.concat([new Xt(n.key,e,`invalid url "${e}"`)])),r)}function Ah(n){const e=n.value,r=n.styleSpec,i=r.light,u=n.style;let p=[];const h=ta(e);if(e===void 0)return p;if(h!=="object")return p=p.concat([new Xt("light",e,`object expected, ${h} found`)]),p;for(const b in e){const y=b.match(/^(.*)-transition$/);p=p.concat(y&&i[y[1]]&&i[y[1]].transition?Ir({key:b,value:e[b],valueSpec:r.transition,style:u,styleSpec:r}):i[b]?Ir({key:b,value:e[b],valueSpec:i[b],style:u,styleSpec:r}):[new Xt(b,e[b],`unknown property "${b}"`)])}return p}function Ch(n){const e=n.value;let r=[];if(!e)return r;const i=ta(e);if(i!=="object")return r=r.concat([new Xt("light-3d",e,`object expected, ${i} found`)]),r;const u=n.styleSpec,p=u["light-3d"],h=n.key,b=n.style,y=n.style.lights;for(const P of["type","id"])if(!(P in e))return r=r.concat([new Xt("light-3d",e,`missing property ${P} on light`)]),r;if(e.type&&y)for(let P=0;P<n.arrayIndex;P++){const A=ar(e.type),R=y[P];ar(R.type)===A&&r.push(new Xt(h,e.id,`duplicate light type "${e.type}", previously defined at line ${R.id.__line__}`))}const x=`properties_light_${e.type}`;if(!(x in u))return r=r.concat([new Xt("light-3d",e,`Invalid light type ${e.type}`)]),r;const T=u[x];for(const P in e)if(P==="properties"){const A=e[P],R=ta(A);if(R!=="object")return r=r.concat([new Xt("properties",A,`object expected, ${R} found`)]),r;for(const D in A)r=r.concat(T[D]?Ir({key:D,value:A[D],valueSpec:T[D],style:b,styleSpec:u}):[new mi(n.key,A[D],`unknown property "${D}"`)])}else{const A=P.match(/^(.*)-transition$/);r=r.concat(A&&p[A[1]]&&p[A[1]].transition?Ir({key:P,value:e[P],valueSpec:u.transition,style:b,styleSpec:u}):p[P]?Ir({key:P,value:e[P],valueSpec:p[P],style:b,styleSpec:u}):[new mi(P,e[P],`unknown property "${P}"`)])}return r}function Mh(n){const e=n.value,r=n.key,i=n.style,u=n.styleSpec,p=u.terrain;let h=[];const b=ta(e);if(e===void 0||b==="null")return h;if(b!=="object")return h=h.concat([new Xt("terrain",e,`object expected, ${b} found`)]),h;for(const y in e){const x=y.match(/^(.*)-transition$/);h=h.concat(x&&p[x[1]]&&p[x[1]].transition?Ir({key:y,value:e[y],valueSpec:u.transition,style:i,styleSpec:u}):p[y]?Ir({key:y,value:e[y],valueSpec:p[y],style:i,styleSpec:u}):[new mi(y,e[y],`unknown property "${y}"`)])}if(e.source){const y=i.sources&&i.sources[e.source],x=y&&ar(y.type);y?x!=="raster-dem"&&h.push(new Xt(r,e.source,`terrain cannot be used with a source of type ${String(x)}, it only be used with a "raster-dem" source type`)):h.push(new Xt(r,e.source,`source "${e.source}" not found`))}else h.push(new Xt(r,e,'terrain is missing required property "source"'));return h}function Rh(n){const e=n.value,r=n.style,i=n.styleSpec,u=i.fog;let p=[];const h=ta(e);if(e===void 0)return p;if(h!=="object")return p=p.concat([new Xt("fog",e,`object expected, ${h} found`)]),p;for(const b in e){const y=b.match(/^(.*)-transition$/);p=p.concat(y&&u[y[1]]&&u[y[1]].transition?Ir({key:b,value:e[b],valueSpec:i.transition,style:r,styleSpec:i}):u[b]?Ir({key:b,value:e[b],valueSpec:u[b],style:r,styleSpec:i}):[new mi(b,e[b],`unknown property "${b}"`)])}return p}const Vp={"*":()=>[],array:fg,boolean:function(n){const e=n.value,r=n.key,i=ta(e);return i!=="boolean"?[new Xt(r,e,`boolean expected, ${i} found`)]:[]},number:Eh,color:function(n){const e=n.key,r=n.value,i=ta(r);return i!=="string"?[new Xt(e,r,`color expected, ${i} found`)]:qn(r)===null?[new Xt(e,r,`color expected, "${r}" found`)]:[]},enum:ml,filter:zh,function:Ih,layer:xg,object:Ns,source:wg,model:Tg,light:Ah,"light-3d":Ch,terrain:Mh,fog:Rh,string:ru,formatted:function(n){return ru(n).length===0?[]:hl(n)},resolvedImage:function(n){return ru(n).length===0?[]:hl(n)},projection:function(n){const e=n.value,r=n.styleSpec,i=r.projection,u=n.style;let p=[];const h=ta(e);if(h==="object")for(const b in e)p=p.concat(Ir({key:b,value:e[b],valueSpec:i[b],style:u,styleSpec:r}));else h!=="string"&&(p=p.concat([new Xt("projection",e,`object or string expected, ${h} found`)]));return p},import:function(n){const{value:e,styleSpec:r}=n,{data:i,...u}=e;Object.defineProperty(u,"__line__",{value:e.__line__,enumerable:!1});let p=Ns(Ys({},n,{value:u,valueSpec:r.import}));return ar(u.id)===""&&p.push(new Xt(`${n.key}.id`,u,"import id can't be an empty string")),i&&(p=p.concat(Eg(i,r,{key:`${n.key}.data`}))),p}};function Ir(n,e=!1){const r=n.value,i=n.valueSpec,u=n.styleSpec;if(i.expression&&Mp(ar(r)))return Ih(n);if(i.expression&&kp(Xs(r)))return hl(n);if(i.type&&Vp[i.type]){const p=Vp[i.type](n);return e===!0&&p.length>0&&ta(n.value)==="array"?hl(n):p}return Ns(Ys({},n,{valueSpec:i.type?u[i.type]:i}))}function zy(n){const e=n.value,r=n.key,i=ru(n);return i.length||(e.indexOf("{fontstack}")===-1&&i.push(new Xt(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&i.push(new Xt(r,e,'"glyphs" url must include a "{range}" token'))),i}function Eg(n,e=Ve,r={}){return Ir({key:r.key||"",value:n,valueSpec:e.$root,styleSpec:e,style:n,objectElementValidators:{glyphs:zy,"*":()=>[]}})}function kh(n,e=Ve){return Wi(Eg(n,e))}const Ay=n=>Wi(vg(n)),Cy=n=>Wi(Ad(n));function Wi(n){return n.slice().sort((e,r)=>e.line&&r.line?e.line-r.line:0)}function Ig(n,e){let r=!1;if(e&&e.length)for(const i of e)i instanceof mi?Yt(i.message):(n.fire(new bs(new Error(i.message))),r=!0);return r}var My=wo,Cc=3;function wo(n,e,r){var i=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var u=new Int32Array(this.arrayBuffer);n=u[0],this.d=(e=u[1])+2*(r=u[2]);for(var p=0;p<this.d*this.d;p++){var h=u[Cc+p],b=u[Cc+p+1];i.push(h===b?null:u.subarray(h,b))}var y=u[Cc+i.length+1];this.keys=u.subarray(u[Cc+i.length],y),this.bboxes=u.subarray(y),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var x=0;x<this.d*this.d;x++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=n,this.padding=r,this.scale=e/n,this.uid=0;var T=r/e*n;this.min=-T,this.max=n+T}wo.prototype.insert=function(n,e,r,i,u){this._forEachCell(e,r,i,u,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(u)},wo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},wo.prototype._insertCell=function(n,e,r,i,u,p){this.cells[u].push(p)},wo.prototype.query=function(n,e,r,i,u){var p=this.min,h=this.max;if(n<=p&&e<=p&&h<=r&&h<=i&&!u)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(n,e,r,i,this._queryCell,b,{},u),b},wo.prototype._queryCell=function(n,e,r,i,u,p,h,b){var y=this.cells[u];if(y!==null)for(var x=this.keys,T=this.bboxes,P=0;P<y.length;P++){var A=y[P];if(h[A]===void 0){var R=4*A;(b?b(T[R+0],T[R+1],T[R+2],T[R+3]):n<=T[R+2]&&e<=T[R+3]&&r>=T[R+0]&&i>=T[R+1])?(h[A]=!0,p.push(x[A])):h[A]=!1}}},wo.prototype._forEachCell=function(n,e,r,i,u,p,h,b){for(var y=this._convertToCellCoord(n),x=this._convertToCellCoord(e),T=this._convertToCellCoord(r),P=this._convertToCellCoord(i),A=y;A<=T;A++)for(var R=x;R<=P;R++){var D=this.d*R+A;if((!b||b(this._convertFromCellCoord(A),this._convertFromCellCoord(R),this._convertFromCellCoord(A+1),this._convertFromCellCoord(R+1)))&&u.call(this,n,e,r,i,D,p,h,b))return}},wo.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},wo.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},wo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,e=Cc+this.cells.length+1+1,r=0,i=0;i<this.cells.length;i++)r+=this.cells[i].length;var u=new Int32Array(e+r+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var p=e,h=0;h<n.length;h++){var b=n[h];u[Cc+h]=p,u.set(b,p),p+=b.length}return u[Cc+n.length]=p,u.set(this.keys,p),u[Cc+n.length+1]=p+=this.keys.length,u.set(this.bboxes,p),p+=this.bboxes.length,u.buffer};var su=ee(My);const Gp={};function qt(n,e,r={}){Object.defineProperty(n,"_classRegistryKey",{value:e,writeable:!1}),Gp[e]={klass:n,omit:r.omit||[]}}qt(Object,"Object"),su.serialize=function(n,e){const r=n.toArrayBuffer();return e&&e.add(r),{buffer:r}},su.deserialize=function(n){return new su(n.buffer)},Object.defineProperty(su,"name",{value:"Grid"}),qt(su,"Grid"),qt(wa,"Color"),qt(Error,"Error"),qt(Wr,"Formatted"),qt(Sa,"FormattedSection"),qt(Xr,"AJAXError"),qt(Ms,"ResolvedImage"),qt(Lp,"StylePropertyFunction"),qt(Th,"StyleExpression",{omit:["_evaluator"]}),qt(Pd,"ZoomDependentExpression"),qt(Id,"ZoomConstantExpression"),qt(Rs,"CompoundExpression",{omit:["_evaluate"]});for(const n in wd)Gp[wd[n]._classRegistryKey]||qt(wd[n],`Expression${n}`);function m(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function c(n){return self.ImageBitmap&&n instanceof ImageBitmap}function d(n,e){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(m(n)||c(n))return e&&e.add(n),n;if(ArrayBuffer.isView(n)){const r=n;return e&&e.add(r.buffer),r}if(n instanceof ImageData)return e&&e.add(n.data.buffer),n;if(Array.isArray(n)){const r=[];for(const i of n)r.push(d(i,e));return r}if(n instanceof Map){const r={$name:"Map"};for(const[i,u]of n.entries())r[i]=d(u);return r}if(typeof n=="object"){const r=n.constructor,i=r._classRegistryKey;if(!i)throw new Error(`can't serialize object of unregistered class ${i}`);const u=r.serialize?r.serialize(n,e):{};if(!r.serialize){for(const p in n)n.hasOwnProperty(p)&&(Gp[i].omit.indexOf(p)>=0||(u[p]=d(n[p],e)));n instanceof Error&&(u.message=n.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return i!=="Object"&&(u.$name=i),u}throw new Error("can't serialize object of type "+typeof n)}function _(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||m(n)||c(n)||ArrayBuffer.isView(n)||n instanceof ImageData)return n;if(Array.isArray(n))return n.map(_);if(typeof n=="object"){const e=n.$name||"Object";if(e==="Map"){const u=new Map;for(const p of Object.keys(n))p!=="$name"&&u.set(p,_(n[p]));return u}const{klass:r}=Gp[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(n);const i=Object.create(r.prototype);for(const u of Object.keys(n))u!=="$name"&&(i[u]=_(n[u]));return i}throw new Error("can't deserialize object of type "+typeof n)}const v={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519,"CJK Unified Ideographs Extension B":n=>n>=131072&&n<=173791};function S(n){for(const e of n)if(k(e.charCodeAt(0)))return!0;return!1}function E(n){for(const e of n)if(!z(e.charCodeAt(0)))return!1;return!0}function z(n){return!(v.Arabic(n)||v["Arabic Supplement"](n)||v["Arabic Extended-A"](n)||v["Arabic Presentation Forms-A"](n)||v["Arabic Presentation Forms-B"](n))}function k(n){return!(n!==746&&n!==747&&(n<4352||!(v["Bopomofo Extended"](n)||v.Bopomofo(n)||v["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||v["CJK Compatibility Ideographs"](n)||v["CJK Compatibility"](n)||v["CJK Radicals Supplement"](n)||v["CJK Strokes"](n)||!(!v["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||v["CJK Unified Ideographs Extension A"](n)||v["CJK Unified Ideographs"](n)||v["Enclosed CJK Letters and Months"](n)||v["Hangul Compatibility Jamo"](n)||v["Hangul Jamo Extended-A"](n)||v["Hangul Jamo Extended-B"](n)||v["Hangul Jamo"](n)||v["Hangul Syllables"](n)||v.Hiragana(n)||v["Ideographic Description Characters"](n)||v.Kanbun(n)||v["Kangxi Radicals"](n)||v["Katakana Phonetic Extensions"](n)||v.Katakana(n)&&n!==12540||!(!v["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!v["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||v["Unified Canadian Aboriginal Syllabics"](n)||v["Unified Canadian Aboriginal Syllabics Extended"](n)||v["Vertical Forms"](n)||v["Yijing Hexagram Symbols"](n)||v["Yi Syllables"](n)||v["Yi Radicals"](n))))}function N(n){return!(k(n)||function(e){return!!(v["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||v["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||v["Letterlike Symbols"](e)||v["Number Forms"](e)||v["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||v["Control Pictures"](e)&&e!==9251||v["Optical Character Recognition"](e)||v["Enclosed Alphanumerics"](e)||v["Geometric Shapes"](e)||v["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||v["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||v["CJK Symbols and Punctuation"](e)||v.Katakana(e)||v["Private Use Area"](e)||v["CJK Compatibility Forms"](e)||v["Small Form Variants"](e)||v["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(n))}function U(n){return n>=1424&&n<=2303||v["Arabic Presentation Forms-A"](n)||v["Arabic Presentation Forms-B"](n)}function $(n,e){return!(!e&&U(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||v.Khmer(n))}function X(n){for(const e of n)if(U(e.charCodeAt(0)))return!0;return!1}const Q="deferred",ae="loading",se="loaded";let re=null,ne="unavailable",de=null;const ye=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(ne="error"),re&&re(n)};function xe(){ce.fire(new rs("pluginStateChange",{pluginStatus:ne,pluginURL:de}))}const ce=new qr,pe=function(){return ne},we=function(){if(ne!==Q||!de)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ne=ae,xe(),de&&It({url:de},n=>{n?ye(n):(ne=se,xe())})},Ce={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ne===se||Ce.applyArabicShaping!=null,isLoading:()=>ne===ae,setState(n){ne=n.pluginStatus,de=n.pluginURL},isParsed:()=>Ce.applyArabicShaping!=null&&Ce.processBidirectionalText!=null&&Ce.processStyledBidirectionalText!=null,getPluginURL:()=>de};class Ee{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.transition=r.transition,this.pitch=r.pitch,this.brightness=r.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(e){return function(r,i){for(const u of r)if(!$(u.charCodeAt(0),i))return!1;return!0}(e,Ce.isLoaded())}}class Le{constructor(e,r,i,u){this.property=e,this.value=r,this.expression=function(p,h,b,y){if(Mp(p))return new Lp(p,h);if(kp(p)||Array.isArray(p)&&p.length>0){const x=zd(p,h,b,y);if(x.result==="error")throw new Error(x.value.map(T=>`${T.key}: ${T.message}`).join(", "));return x.value}{let x=p;return typeof p=="string"&&h.type==="color"&&(x=wa.parse(p)),{kind:"constant",isConfigDependent:!1,evaluate:()=>x}}}(r===void 0?e.specification.default:r,e.specification,i,u)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,r,i){return this.property.possiblyEvaluate(this,e,r,i)}}class nt{constructor(e,r,i){this.property=e,this.value=new Le(e,void 0,r,i)}transitioned(e,r){return new Je(this.property,this.value,r,Fn({},e.transition,this.transition),e.now)}untransitioned(){return new Je(this.property,this.value,null,{},0)}}class $e{constructor(e,r,i){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._scope=r,this._options=i,this.isConfigDependent=!1}getValue(e){return kn(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new nt(this._values[e].property,this._scope,this._options)),this._values[e].value=new Le(this._values[e].property,r===null?void 0:kn(r),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].value.expression.isConfigDependent}setTransitionOrValue(e,r){r&&(this._options=r);const i=this._properties.properties;if(e)for(const u in e){const p=e[u];if(As(u,"-transition")){const h=u.slice(0,-11);i[h]&&this.setTransition(h,p)}else i[u]&&this.setValue(u,p)}}getTransition(e){return kn(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new nt(this._values[e].property)),this._values[e].transition=kn(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const i=this.getValue(r);i!==void 0&&(e[r]=i);const u=this.getTransition(r);u!==void 0&&(e[`${r}-transition`]=u)}return e}transitioned(e,r){const i=new Oe(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].transitioned(e,r._values[u]);return i}untransitioned(){const e=new Oe(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class Je{constructor(e,r,i,u,p){const h=u.delay||0,b=u.duration||0;p=p||0,this.property=e,this.value=r,this.begin=p+h,this.end=this.begin+b,e.specification.transition&&(u.delay||u.duration)&&(this.prior=i)}possiblyEvaluate(e,r,i){const u=e.now||0,p=this.value.possiblyEvaluate(e,r,i),h=this.prior;if(h){if(u>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(u<this.begin)return h.possiblyEvaluate(e,r,i);{const b=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(h.possiblyEvaluate(e,r,i),p,Tn(b))}}return p}}class Oe{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,i){const u=new st(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].possiblyEvaluate(e,r,i);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class tt{constructor(e,r,i){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._scope=r,this._options=i,this.isConfigDependent=!1}getValue(e){return kn(this._values[e].value)}setValue(e,r){this._values[e]=new Le(this._values[e].property,r===null?void 0:kn(r),this._scope,this._options),this.isConfigDependent=this.isConfigDependent||this._values[e].expression.isConfigDependent}serialize(){const e={};for(const r of Object.keys(this._values)){const i=this.getValue(r);i!==void 0&&(e[r]=i)}return e}possiblyEvaluate(e,r,i){const u=new st(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].possiblyEvaluate(e,r,i);return u}}class Ze{constructor(e,r,i){this.property=e,this.value=r,this.parameters=i}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,i,u){return this.property.evaluate(this.value,this.parameters,e,r,i,u)}}class st{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class be{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,i){const u=qi[this.specification.type];return u?u(e,r,i):e}}class Fe{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,i,u){return new Ze(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},i,u)}:e.expression,r)}interpolate(e,r,i){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new Ze(this,{kind:"constant",value:void 0},e.parameters);const u=qi[this.specification.type];return u?new Ze(this,{kind:"constant",value:u(e.value.value,r.value.value,i)},e.parameters):e}evaluate(e,r,i,u,p,h){return e.kind==="constant"?e.value:e.evaluate(r,i,u,p,h)}}class mt{constructor(e){this.specification=e}possiblyEvaluate(e,r,i,u){return!!e.expression.evaluate(r,null,{},i,u)}interpolate(){return!1}}class ct{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const r=new Ee(0,{});for(const i in e){const u=e[i];u.specification.overridable&&this.overridableProperties.push(i);const p=this.defaultPropertyValues[i]=new Le(u,void 0),h=this.defaultTransitionablePropertyValues[i]=new nt(u);this.defaultTransitioningPropertyValues[i]=h.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=p.possiblyEvaluate(r)}}}qt(Fe,"DataDrivenProperty"),qt(be,"DataConstantProperty"),qt(mt,"ColorRampProperty");const Wt="";function jt(n,e){return e?`${n}${Wt}${e}`:n}const rn="-transition";class Vt extends qr{constructor(e,r,i,u){if(super(),this.id=e.id,this.fqid=jt(this.id,i),this.type=e.type,this.scope=i,this.options=u,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.isConfigDependent=!1,e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&e.type!=="slot"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),e.slot&&(this.slot=e.slot),r.layout&&(this._unevaluatedLayout=new tt(r.layout,this.scope,u),this.isConfigDependent=this.isConfigDependent||this._unevaluatedLayout.isConfigDependent),r.paint)){this._transitionablePaint=new $e(r.paint,this.scope,u);for(const p in e.paint)this.setPaintProperty(p,e.paint[p],{validate:!1});for(const p in e.layout)this.setLayoutProperty(p,e.layout[p],{validate:!1});this.isConfigDependent=this.isConfigDependent||this._transitionablePaint.isConfigDependent,this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new st(r.paint)}}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r,i={}){if(r!=null&&this._validate(Cy,`layers.${this.id}.layout.${e}`,e,r,i))return;if(this.type==="custom"&&e==="visibility")return void(this.visibility=r);const u=this._unevaluatedLayout;u._properties.properties[e]&&(u.setValue(e,r),this.isConfigDependent=this.isConfigDependent||u.isConfigDependent,e==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(e){return As(e,rn)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,i={}){if(r!=null&&this._validate(Ay,`layers.${this.id}.paint.${e}`,e,r,i))return!1;const u=this._transitionablePaint,p=u._properties.properties;if(As(e,rn)){const A=e.slice(0,-11);return p[A]&&u.setTransition(A,r||void 0),!1}if(!p[e])return!1;const h=u._values[e],b=h.value.isDataDriven(),y=h.value;u.setValue(e,r),this.isConfigDependent=this.isConfigDependent||u.isConfigDependent,this._handleSpecialPaintPropertyUpdate(e);const x=u._values[e].value,T=x.isDataDriven(),P=As(e,"pattern")||e==="line-dasharray";return T||b||P||this._handleOverridablePaintPropertyUpdate(e,y,x)}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getDefaultProgramParams(e,r){return null}_handleOverridablePaintPropertyUpdate(e,r,i){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){return sn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(e,r)=>!(e===void 0||r==="layout"&&!Object.keys(e).length||r==="paint"&&!Object.keys(e).length))}_validate(e,r,i,u,p={}){return(!p||p.validate!==!1)&&Ig(this,e.call(kh,{key:r,layerType:this.type,objectKey:i,value:u,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof Ze&&Pc(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Np(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(){this._stats&&(this._stats.numRenderedVerticesInShadowPass=0,this._stats.numRenderedVerticesInTransparentPass=0)}}const pn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class fn{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Kt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.add(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function en(n,e=1){let r=0,i=0;return{members:n.map(u=>{const p=pn[u.type].BYTES_PER_ELEMENT,h=r=Jn(r,Math.max(e,p)),b=u.components||1;return i=Math.max(i,p),r+=p*b,{name:u.name,type:u.type,components:b,offset:h}}),size:Jn(r,Math.max(i,e)),alignment:e}}function Jn(n,e){return Math.ceil(n/e)*e}class An extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,r)}emplace(e,r,i){const u=2*e;return this.int16[u+0]=r,this.int16[u+1]=i,e}}An.prototype.bytesPerElement=4,qt(An,"StructArrayLayout2i4");class Pa extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,i)}emplace(e,r,i,u){const p=3*e;return this.int16[p+0]=r,this.int16[p+1]=i,this.int16[p+2]=u,e}}Pa.prototype.bytesPerElement=6,qt(Pa,"StructArrayLayout3i6");class ma extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,u){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,i,u)}emplace(e,r,i,u,p){const h=4*e;return this.int16[h+0]=r,this.int16[h+1]=i,this.int16[h+2]=u,this.int16[h+3]=p,e}}ma.prototype.bytesPerElement=8,qt(ma,"StructArrayLayout4i8");class ys extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,u,p)}emplace(e,r,i,u,p,h){const b=5*e;return this.int16[b+0]=r,this.int16[b+1]=i,this.int16[b+2]=u,this.int16[b+3]=p,this.int16[b+4]=h,e}}ys.prototype.bytesPerElement=10,qt(ys,"StructArrayLayout5i10");class Si extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,i,u,p,h,b)}emplace(e,r,i,u,p,h,b,y){const x=6*e,T=12*e,P=3*e;return this.int16[x+0]=r,this.int16[x+1]=i,this.uint8[T+4]=u,this.uint8[T+5]=p,this.uint8[T+6]=h,this.uint8[T+7]=b,this.float32[P+2]=y,e}}Si.prototype.bytesPerElement=12,qt(Si,"StructArrayLayout2i4ub1f12");class ua extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,i,u)}emplace(e,r,i,u,p){const h=4*e;return this.float32[h+0]=r,this.float32[h+1]=i,this.float32[h+2]=u,this.float32[h+3]=p,e}}ua.prototype.bytesPerElement=16,qt(ua,"StructArrayLayout4f16");class Qn extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,u,p)}emplace(e,r,i,u,p,h){const b=6*e,y=3*e;return this.uint16[b+0]=r,this.uint16[b+1]=i,this.uint16[b+2]=u,this.uint16[b+3]=p,this.float32[y+2]=h,e}}Qn.prototype.bytesPerElement=12,qt(Qn,"StructArrayLayout4ui1f12");class sa extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i,u){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,i,u)}emplace(e,r,i,u,p){const h=4*e;return this.uint16[h+0]=r,this.uint16[h+1]=i,this.uint16[h+2]=u,this.uint16[h+3]=p,e}}sa.prototype.bytesPerElement=8,qt(sa,"StructArrayLayout4ui8");class Oa extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h){const b=this.length;return this.resize(b+1),this.emplace(b,e,r,i,u,p,h)}emplace(e,r,i,u,p,h,b){const y=6*e;return this.int16[y+0]=r,this.int16[y+1]=i,this.int16[y+2]=u,this.int16[y+3]=p,this.int16[y+4]=h,this.int16[y+5]=b,e}}Oa.prototype.bytesPerElement=12,qt(Oa,"StructArrayLayout6i12");class Br extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b,y,x,T,P,A){const R=this.length;return this.resize(R+1),this.emplace(R,e,r,i,u,p,h,b,y,x,T,P,A)}emplace(e,r,i,u,p,h,b,y,x,T,P,A,R){const D=12*e;return this.int16[D+0]=r,this.int16[D+1]=i,this.int16[D+2]=u,this.int16[D+3]=p,this.uint16[D+4]=h,this.uint16[D+5]=b,this.uint16[D+6]=y,this.uint16[D+7]=x,this.int16[D+8]=T,this.int16[D+9]=P,this.int16[D+10]=A,this.int16[D+11]=R,e}}Br.prototype.bytesPerElement=24,qt(Br,"StructArrayLayout4i4ui4i24");class Ma extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h){const b=this.length;return this.resize(b+1),this.emplace(b,e,r,i,u,p,h)}emplace(e,r,i,u,p,h,b){const y=10*e,x=5*e;return this.int16[y+0]=r,this.int16[y+1]=i,this.int16[y+2]=u,this.float32[x+2]=p,this.float32[x+3]=h,this.float32[x+4]=b,e}}Ma.prototype.bytesPerElement=20,qt(Ma,"StructArrayLayout3i3f20");class Jr extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}Jr.prototype.bytesPerElement=4,qt(Jr,"StructArrayLayout1ul4");class vs extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,r)}emplace(e,r,i){const u=2*e;return this.uint16[u+0]=r,this.uint16[u+1]=i,e}}vs.prototype.bytesPerElement=4,qt(vs,"StructArrayLayout2ui4");class Kr extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b,y,x,T,P,A,R){const D=this.length;return this.resize(D+1),this.emplace(D,e,r,i,u,p,h,b,y,x,T,P,A,R)}emplace(e,r,i,u,p,h,b,y,x,T,P,A,R,D){const F=20*e,V=10*e;return this.int16[F+0]=r,this.int16[F+1]=i,this.int16[F+2]=u,this.int16[F+3]=p,this.int16[F+4]=h,this.float32[V+3]=b,this.float32[V+4]=y,this.float32[V+5]=x,this.float32[V+6]=T,this.int16[F+14]=P,this.uint32[V+8]=A,this.uint16[F+18]=R,this.uint16[F+19]=D,e}}Kr.prototype.bytesPerElement=40,qt(Kr,"StructArrayLayout5i4f1i1ul2ui40");class Ti extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,i,u,p,h,b)}emplace(e,r,i,u,p,h,b,y){const x=8*e;return this.int16[x+0]=r,this.int16[x+1]=i,this.int16[x+2]=u,this.int16[x+4]=p,this.int16[x+5]=h,this.int16[x+6]=b,this.int16[x+7]=y,e}}Ti.prototype.bytesPerElement=16,qt(Ti,"StructArrayLayout3i2i2i16");class Ko extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,u,p)}emplace(e,r,i,u,p,h){const b=4*e,y=8*e;return this.float32[b+0]=r,this.float32[b+1]=i,this.float32[b+2]=u,this.int16[y+6]=p,this.int16[y+7]=h,e}}Ko.prototype.bytesPerElement=16,qt(Ko,"StructArrayLayout2f1f2i16");class Hi extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,i,u)}emplace(e,r,i,u,p){const h=12*e,b=3*e;return this.uint8[h+0]=r,this.uint8[h+1]=i,this.float32[b+1]=u,this.float32[b+2]=p,e}}Hi.prototype.bytesPerElement=12,qt(Hi,"StructArrayLayout2ub2f12");class ba extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,i)}emplace(e,r,i,u){const p=3*e;return this.uint16[p+0]=r,this.uint16[p+1]=i,this.uint16[p+2]=u,e}}ba.prototype.bytesPerElement=6,qt(ba,"StructArrayLayout3ui6");class Zi extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V,Y,ie,oe,le,he){const _e=this.length;return this.resize(_e+1),this.emplace(_e,e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V,Y,ie,oe,le,he)}emplace(e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V,Y,ie,oe,le,he,_e){const ze=30*e,De=15*e,Ne=60*e;return this.int16[ze+0]=r,this.int16[ze+1]=i,this.int16[ze+2]=u,this.float32[De+2]=p,this.float32[De+3]=h,this.uint16[ze+8]=b,this.uint16[ze+9]=y,this.uint32[De+5]=x,this.uint32[De+6]=T,this.uint32[De+7]=P,this.uint16[ze+16]=A,this.uint16[ze+17]=R,this.uint16[ze+18]=D,this.float32[De+10]=F,this.float32[De+11]=V,this.uint8[Ne+48]=Y,this.uint8[Ne+49]=ie,this.uint8[Ne+50]=oe,this.uint32[De+13]=le,this.int16[ze+28]=he,this.uint8[Ne+58]=_e,e}}Zi.prototype.bytesPerElement=60,qt(Zi,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class So extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V,Y,ie,oe,le,he,_e,ze,De,Ne,He,je,at,_t,et,ht,Qe){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V,Y,ie,oe,le,he,_e,ze,De,Ne,He,je,at,_t,et,ht,Qe)}emplace(e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V,Y,ie,oe,le,he,_e,ze,De,Ne,He,je,at,_t,et,ht,Qe,Lt){const $t=20*e,bt=40*e,hn=80*e;return this.float32[$t+0]=r,this.float32[$t+1]=i,this.int16[bt+4]=u,this.int16[bt+5]=p,this.int16[bt+6]=h,this.int16[bt+7]=b,this.int16[bt+8]=y,this.int16[bt+9]=x,this.int16[bt+10]=T,this.int16[bt+11]=P,this.int16[bt+12]=A,this.uint16[bt+13]=R,this.uint16[bt+14]=D,this.uint16[bt+15]=F,this.uint16[bt+16]=V,this.uint16[bt+17]=Y,this.uint16[bt+18]=ie,this.uint16[bt+19]=oe,this.uint16[bt+20]=le,this.uint16[bt+21]=he,this.uint16[bt+22]=_e,this.uint16[bt+23]=ze,this.uint16[bt+24]=De,this.uint16[bt+25]=Ne,this.uint16[bt+26]=He,this.uint16[bt+27]=je,this.uint32[$t+14]=at,this.float32[$t+15]=_t,this.float32[$t+16]=et,this.float32[$t+17]=ht,this.float32[$t+18]=Qe,this.uint8[hn+76]=Lt,e}}So.prototype.bytesPerElement=80,qt(So,"StructArrayLayout2f9i15ui1ul4f1ub80");class Qo extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}Qo.prototype.bytesPerElement=4,qt(Qo,"StructArrayLayout1f4");class Md extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p){const h=this.length;return this.resize(h+1),this.emplace(h,e,r,i,u,p)}emplace(e,r,i,u,p,h){const b=5*e;return this.float32[b+0]=r,this.float32[b+1]=i,this.float32[b+2]=u,this.float32[b+3]=p,this.float32[b+4]=h,e}}Md.prototype.bytesPerElement=20,qt(Md,"StructArrayLayout5f20");class Ry extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,i,u,p,h,b)}emplace(e,r,i,u,p,h,b,y){const x=7*e;return this.float32[x+0]=r,this.float32[x+1]=i,this.float32[x+2]=u,this.float32[x+3]=p,this.float32[x+4]=h,this.float32[x+5]=b,this.float32[x+6]=y,e}}Ry.prototype.bytesPerElement=28,qt(Ry,"StructArrayLayout7f28");class ky extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,i,u){const p=this.length;return this.resize(p+1),this.emplace(p,e,r,i,u)}emplace(e,r,i,u,p){const h=6*e;return this.uint32[3*e+0]=r,this.uint16[h+2]=i,this.uint16[h+3]=u,this.uint16[h+4]=p,e}}ky.prototype.bytesPerElement=12,qt(ky,"StructArrayLayout1ul3ui12");class Lh extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}Lh.prototype.bytesPerElement=2,qt(Lh,"StructArrayLayout1ui2");class Rd extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,i)}emplace(e,r,i,u){const p=3*e;return this.float32[p+0]=r,this.float32[p+1]=i,this.float32[p+2]=u,e}}Rd.prototype.bytesPerElement=12,qt(Rd,"StructArrayLayout3f12");class Dh extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,r)}emplace(e,r,i){const u=2*e;return this.float32[u+0]=r,this.float32[u+1]=i,e}}Dh.prototype.bytesPerElement=8,qt(Dh,"StructArrayLayout2f8");class Ly extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V){const Y=this.length;return this.resize(Y+1),this.emplace(Y,e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V)}emplace(e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V,Y){const ie=16*e;return this.float32[ie+0]=r,this.float32[ie+1]=i,this.float32[ie+2]=u,this.float32[ie+3]=p,this.float32[ie+4]=h,this.float32[ie+5]=b,this.float32[ie+6]=y,this.float32[ie+7]=x,this.float32[ie+8]=T,this.float32[ie+9]=P,this.float32[ie+10]=A,this.float32[ie+11]=R,this.float32[ie+12]=D,this.float32[ie+13]=F,this.float32[ie+14]=V,this.float32[ie+15]=Y,e}}Ly.prototype.bytesPerElement=64,qt(Ly,"StructArrayLayout16f64");class Pg extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,i,u,p,h,b){const y=this.length;return this.resize(y+1),this.emplace(y,e,r,i,u,p,h,b)}emplace(e,r,i,u,p,h,b,y){const x=10*e,T=5*e;return this.uint16[x+0]=r,this.uint16[x+1]=i,this.uint16[x+2]=u,this.uint16[x+3]=p,this.float32[T+2]=h,this.float32[T+3]=b,this.float32[T+4]=y,e}}Pg.prototype.bytesPerElement=20,qt(Pg,"StructArrayLayout4ui3f20");class Dy extends Kt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint8[1*e+0]=r,e}}Dy.prototype.bytesPerElement=1,qt(Dy,"StructArrayLayout1ub1");class H6 extends fn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}H6.prototype.size=40;class Oy extends Kr{get(e){return new H6(this,e)}}qt(Oy,"CollisionBoxArray");class Z6 extends fn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Z6.prototype.size=60;class Y6 extends Zi{get(e){return new Z6(this,e)}}qt(Y6,"PlacedSymbolArray");class X6 extends fn{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(e){this._structArray.uint32[this._pos4+14]=e}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(e){this._structArray.float32[this._pos4+18]=e}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}X6.prototype.size=80;class J6 extends So{get(e){return new X6(this,e)}}qt(J6,"SymbolInstanceArray");class K6 extends Qo{getoffsetX(e){return this.float32[1*e+0]}}qt(K6,"GlyphOffsetArray");class Q6 extends An{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}qt(Q6,"SymbolLineVertexArray");class ew extends fn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ew.prototype.size=12;class tw extends ky{get(e){return new ew(this,e)}}qt(tw,"FeatureIndexArray");class nw extends vs{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}qt(nw,"FillExtrusionCentroidArray");const SM=en([{name:"a_pos",components:2,type:"Int16"}],4),TM=en([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Wa{constructor(e=[]){this.segments=e}_prepareSegment(e,r,i,u){let p=this.segments[this.segments.length-1];return e>Wa.MAX_VERTEX_ARRAY_LENGTH&&Yt(`Max vertices per segment is ${Wa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!p||p.vertexLength+e>Wa.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==u)&&(p={vertexOffset:r,primitiveOffset:i,vertexLength:0,primitiveLength:0},u!==void 0&&(p.sortKey=u),this.segments.push(p)),p}prepareSegment(e,r,i,u){return this._prepareSegment(e,r.length,i.length,u)}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,i,u){return new Wa([{vertexOffset:e,primitiveOffset:r,vertexLength:i,primitiveLength:u,vaos:{},sortKey:0}])}}function aw(n,e){return 256*(n=ke(Math.floor(n),0,255))+ke(Math.floor(e),0,255)}Wa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,qt(Wa,"SegmentVector");const EM=en([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),IM=en([{name:"a_dash",components:4,type:"Uint16"}]);var zg={exports:{}},rw={exports:{}};(function(n){n.exports=function(e,r){var i,u,p,h,b,y,x,T;for(u=e.length-(i=3&e.length),p=r,b=3432918353,y=461845907,T=0;T<u;)x=255&e.charCodeAt(T)|(255&e.charCodeAt(++T))<<8|(255&e.charCodeAt(++T))<<16|(255&e.charCodeAt(++T))<<24,++T,p=27492+(65535&(h=5*(65535&(p=(p^=x=(65535&(x=(x=(65535&x)*b+(((x>>>16)*b&65535)<<16)&4294967295)<<15|x>>>17))*y+(((x>>>16)*y&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(h>>>16)&65535)<<16);switch(x=0,i){case 3:x^=(255&e.charCodeAt(T+2))<<16;case 2:x^=(255&e.charCodeAt(T+1))<<8;case 1:p^=x=(65535&(x=(x=(65535&(x^=255&e.charCodeAt(T)))*b+(((x>>>16)*b&65535)<<16)&4294967295)<<15|x>>>17))*y+(((x>>>16)*y&65535)<<16)&4294967295}return p^=e.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0}})(rw);var PM=rw.exports,sw={exports:{}};(function(n){n.exports=function(e,r){for(var i,u=e.length,p=r^u,h=0;u>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(h)|(255&e.charCodeAt(++h))<<8|(255&e.charCodeAt(++h))<<16|(255&e.charCodeAt(++h))<<24))+((1540483477*(i>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),u-=4,++h;switch(u){case 3:p^=(255&e.charCodeAt(h+2))<<16;case 2:p^=(255&e.charCodeAt(h+1))<<8;case 1:p=1540483477*(65535&(p^=255&e.charCodeAt(h)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0}})(sw);var iw=PM,zM=sw.exports;zg.exports=iw,zg.exports.murmur3=iw,zg.exports.murmur2=zM;var By=ee(zg.exports);class Oh{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(e,r,i,u){this.ids.push(ow(e)),this.positions.push(r,i,u)}eachPosition(e,r){const i=ow(e);let u=0,p=this.ids.length-1;for(;u<p;){const h=u+p>>1;this.ids[h]>=i?p=h:u=h+1}for(;this.ids[u]===i;)r(this.positions[3*u],this.positions[3*u+1],this.positions[3*u+2]),u++}static serialize(e,r){const i=new Float64Array(e.ids),u=new Uint32Array(e.positions);return Ny(i,u,0,i.length-1),r&&(r.add(i.buffer),r.add(u.buffer)),{ids:i,positions:u}}static deserialize(e){const r=new Oh;let i;r.ids=e.ids,r.positions=e.positions;for(const u of r.ids)u!==i&&r.uniqueIds.push(u),i=u;return r.indexed=!0,r}}function ow(n){const e=+n;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:By(String(n))}function Ny(n,e,r,i){for(;r<i;){const u=n[r+i>>1];let p=r-1,h=i+1;for(;;){do p++;while(n[p]<u);do h--;while(n[h]>u);if(p>=h)break;Ag(n,p,h),Ag(e,3*p,3*h),Ag(e,3*p+1,3*h+1),Ag(e,3*p+2,3*h+2)}h-r<i-h?(Ny(n,e,r,h),r=h+1):(Ny(n,e,h+1,i),i=h)}}function Ag(n,e,r){const i=n[e];n[e]=n[r],n[r]=i}qt(Oh,"FeaturePositionMap");class gl{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,r){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,r),this.initialized=!0),!!this.location}}class Cg extends gl{constructor(e){super(e),this.current=0}set(e,r,i){this.fetchUniformLocation(e,r)&&this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}}class Fs extends gl{constructor(e){super(e),this.current=0}set(e,r,i){this.fetchUniformLocation(e,r)&&this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class kd extends gl{constructor(e){super(e),this.current=[0,0]}set(e,r,i){this.fetchUniformLocation(e,r)&&(i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1])))}}class Fy extends gl{constructor(e){super(e),this.current=[0,0,0]}set(e,r,i){this.fetchUniformLocation(e,r)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2])))}}class cw extends gl{constructor(e){super(e),this.current=[0,0,0,0]}set(e,r,i){this.fetchUniformLocation(e,r)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3])))}}class lw extends gl{constructor(e){super(e),this.current=wa.transparent}set(e,r,i){this.fetchUniformLocation(e,r)&&(i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a)))}}const AM=new Float32Array(16);class Bh extends gl{constructor(e){super(e),this.current=AM}set(e,r,i){if(this.fetchUniformLocation(e,r)){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let u=1;u<16;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}}}const CM=new Float32Array(9),MM=new Float32Array(4);class jy extends gl{constructor(e){super(e),this.current=MM}set(e,r,i){if(this.fetchUniformLocation(e,r)){for(let u=0;u<4;u++)if(i[u]!==this.current[u]){this.current=i,this.gl.uniformMatrix2fv(this.location,!1,i);break}}}}function Uy(n){return[aw(255*n.r,255*n.g),aw(255*n.b,255*n.a)]}class Nh{constructor(e,r,i){this.value=e,this.uniformNames=r.map(u=>`u_${u}`),this.type=i}setUniform(e,r,i,u,p){r.set(e,p,u.constantOr(this.value))}getBinding(e,r){return this.type==="color"?new lw(e):new Fs(e)}}class $p{constructor(e,r){this.uniformNames=r.map(i=>`u_${i}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,r,i,u,p){const h=p==="u_pattern"||p==="u_dash"?this.pattern:p==="u_pixel_ratio"?this.pixelRatio:null;h&&r.set(e,p,h)}getBinding(e,r){return r==="u_pattern"||r==="u_dash"?new cw(e):new Fs(e)}}class bl{constructor(e,r,i,u){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=r.map(p=>({name:`a_${p}`,type:"Float32",components:i==="color"?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,r,i,u,p,h,b){const y=this.paintVertexArray.length,x=this.expression.evaluate(new Ee(0,{brightness:h}),r,{},p,u,b);this.paintVertexArray.resize(e),this._setPaintValue(y,e,x)}updatePaintArray(e,r,i,u,p,h,b){const y=this.expression.evaluate({zoom:0,brightness:b},i,u,void 0,p);this._setPaintValue(e,r,y)}_setPaintValue(e,r,i){if(this.type==="color"){const u=Uy(i);for(let p=e;p<r;p++)this.paintVertexArray.emplace(p,u[0],u[1])}else{for(let u=e;u<r;u++)this.paintVertexArray.emplace(u,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ec{constructor(e,r,i,u,p,h){this.expression=e,this.uniformNames=r.map(b=>`u_${b}_t`),this.type=i,this.useIntegerZoom=u,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=r.map(b=>({name:`a_${b}`,type:"Float32",components:i==="color"?4:2,offset:0})),this.paintVertexArray=new h}populatePaintArray(e,r,i,u,p,h,b){const y=this.expression.evaluate(new Ee(this.zoom,{brightness:h}),r,{},p,u,b),x=this.expression.evaluate(new Ee(this.zoom+1,{brightness:h}),r,{},p,u,b),T=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(T,e,y,x)}updatePaintArray(e,r,i,u,p,h,b){const y=this.expression.evaluate({zoom:this.zoom,brightness:b},i,u,void 0,p),x=this.expression.evaluate({zoom:this.zoom+1,brightness:b},i,u,void 0,p);this._setPaintValue(e,r,y,x)}_setPaintValue(e,r,i,u){if(this.type==="color"){const p=Uy(i),h=Uy(u);for(let b=e;b<r;b++)this.paintVertexArray.emplace(b,p[0],p[1],h[0],h[1])}else{for(let p=e;p<r;p++)this.paintVertexArray.emplace(p,i,u);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r,i,u,p){const h=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,b=ke(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);r.set(e,p,b)}getBinding(e,r){return new Fs(e)}}class iu{constructor(e,r,i,u,p){this.expression=e,this.layerId=p,this.paintVertexAttributes=(i==="array"?IM:EM).members;for(let h=0;h<r.length;++h);this.paintVertexArray=new u}populatePaintArray(e,r,i){const u=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(u,e,r.patterns&&r.patterns[this.layerId],i)}updatePaintArray(e,r,i,u,p,h,b){this._setPaintValues(e,r,i.patterns&&i.patterns[this.layerId],h)}_setPaintValues(e,r,i,u){if(!u||!i)return;const p=u[i];if(!p)return;const{tl:h,br:b,pixelRatio:y}=p;for(let x=e;x<r;x++)this.paintVertexArray.emplace(x,h[0],h[1],b[0],b[1],y)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ld{constructor(e,r,i=()=>!0){this.binders={},this._buffers=[];const u=[];for(const p in e.paint._values){const h=e.paint.get(p);if(!i(p)||!(h instanceof Ze&&Pc(h.property.specification)))continue;const b=kM(p,e.type),y=h.value,x=h.property.specification.type,T=!!h.property.useIntegerZoom,P=p==="line-dasharray"||p.endsWith("pattern"),A=p==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(y.kind!=="constant"||A)if(y.kind==="source"||A||P){const R=uw(p,x,"source");this.binders[p]=P?new iu(y,b,x,R,e.id):new bl(y,b,x,R),u.push(`/a_${p}`)}else{const R=uw(p,x,"composite");this.binders[p]=new ec(y,b,x,T,r,R),u.push(`/z_${p}`)}else this.binders[p]=P?new $p(y.value,b):new Nh(y.value,b,x),u.push(`/u_${p}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof bl||r instanceof ec?r.maxValue:0}populatePaintArrays(e,r,i,u,p,h,b){for(const y in this.binders){const x=this.binders[y];(x instanceof bl||x instanceof ec||x instanceof iu)&&x.populatePaintArray(e,r,i,u,p,h,b)}}setConstantPatternPositions(e){for(const r in this.binders){const i=this.binders[r];i instanceof $p&&i.setConstantPatternPositions(e)}}updatePaintArrays(e,r,i,u,p,h,b,y){let x=!1;const T=Object.keys(e),P=T.length!==0,A=P?T:r.uniqueIds;for(const R in this.binders){const D=this.binders[R];if((D instanceof bl||D instanceof ec||D instanceof iu)&&(D.expression.isStateDependent===!0||D.expression.isLightConstant===!1)){const F=p.paint.get(R);D.expression=F.value;for(const V of A){const Y=e[V.toString()];r.eachPosition(V,(ie,oe,le)=>{const he=u.feature(ie);D.updatePaintArray(oe,le,he,Y,h,b,y)})}if(!P)for(const V of i.uniqueIds){const Y=e[V.toString()];i.eachPosition(V,(ie,oe,le)=>{const he=u.feature(ie);D.updatePaintArray(oe,le,he,Y,h,b,y)})}x=!0}}return x}defines(){const e=[];for(const r in this.binders){const i=this.binders[r];(i instanceof Nh||i instanceof $p)&&e.push(...i.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof bl||i instanceof ec||i instanceof iu)for(let u=0;u<i.paintVertexAttributes.length;u++)e.push(i.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof Nh||i instanceof $p||i instanceof ec)for(const u of i.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const r=[];for(const i in this.binders){const u=this.binders[i];if(u instanceof Nh||u instanceof $p||u instanceof ec)for(const p of u.uniformNames)r.push({name:p,property:i,binding:u.getBinding(e,p)})}return r}setUniforms(e,r,i,u,p){for(const{name:h,property:b,binding:y}of i)this.binders[b].setUniform(e,y,p,u.get(b),h)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const r=this.binders[e];(r instanceof bl||r instanceof ec||r instanceof iu)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const r in this.binders){const i=this.binders[r];(i instanceof bl||i instanceof ec||i instanceof iu)&&i.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof bl||r instanceof ec||r instanceof iu)&&r.destroy()}}}class ou{constructor(e,r,i=()=>!0){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new Ld(u,r,i);this.needsUpload=!1,this._featureMap=new Oh,this._featureMapWithoutIds=new Oh,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(e,r,i,u,p,h,b,y){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(e,r,u,p,h,b,y);r.id!==void 0?this._featureMap.add(r.id,i,this._bufferOffset,e):(this._featureMapWithoutIds.add(this._idlessCounter,i,this._bufferOffset,e),this._idlessCounter+=1),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,i,u,p,h){for(const b of i)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(e,this._featureMap,this._featureMapWithoutIds,r,b,u,p,h||0)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const RM={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function kM(n,e){return RM[n]||[n.replace(`${e}-`,"").replace(/-/g,"_")]}const LM={"line-pattern":{source:Qn,composite:Qn},"fill-pattern":{source:Qn,composite:Qn},"fill-extrusion-pattern":{source:Qn,composite:Qn},"line-dasharray":{source:sa,composite:sa}},DM={color:{source:Dh,composite:ua},number:{source:Qo,composite:Dh}};function uw(n,e,r){const i=LM[n];return i&&i[r]||DM[e][r]}qt(Nh,"ConstantBinder"),qt($p,"PatternConstantBinder"),qt(bl,"SourceExpressionBinder"),qt(iu,"PatternCompositeBinder"),qt(ec,"CompositeExpressionBinder"),qt(Ld,"ProgramConfiguration",{omit:["_buffers"]}),qt(ou,"ProgramConfigurationSet");class cu{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof da?new da(e.lng,e.lat):da.convert(e),this}setSouthWest(e){return this._sw=e instanceof da?new da(e.lng,e.lat):da.convert(e),this}extend(e){const r=this._sw,i=this._ne;let u,p;if(e instanceof da)u=e,p=e;else{if(!(e instanceof cu))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(cu.convert(e)):this.extend(da.convert(e)):typeof e=="object"&&e!==null&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(da.convert(e)):this;if(u=e._sw,p=e._ne,!u||!p)return this}return r||i?(r.lng=Math.min(u.lng,r.lng),r.lat=Math.min(u.lat,r.lat),i.lng=Math.max(p.lng,i.lng),i.lat=Math.max(p.lat,i.lat)):(this._sw=new da(u.lng,u.lat),this._ne=new da(p.lng,p.lat)),this}getCenter(){return new da((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new da(this.getWest(),this.getNorth())}getSouthEast(){return new da(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:i}=da.convert(e);let u=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&u}static convert(e){return!e||e instanceof cu?e:new cu(e)}}var Nr={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.setMatrixArrayType=function(n){Fr.ARRAY_TYPE=pw=n},Fr.toRadian=function(n){return n*BM},Fr.equals=function(n,e){return Math.abs(n-e)<=dw*Math.max(1,Math.abs(n),Math.abs(e))},Fr.RANDOM=Fr.ARRAY_TYPE=Fr.EPSILON=void 0;var dw=1e-6;Fr.EPSILON=dw;var pw=typeof Float32Array<"u"?Float32Array:Array;Fr.ARRAY_TYPE=pw;var OM=Math.random;Fr.RANDOM=OM;var BM=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var Ha={};function Vy(n){return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(n)}Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.create=function(){var n=new lu.ARRAY_TYPE(4);return lu.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n},Ha.clone=function(n){var e=new lu.ARRAY_TYPE(4);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},Ha.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},Ha.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n},Ha.fromValues=function(n,e,r,i){var u=new lu.ARRAY_TYPE(4);return u[0]=n,u[1]=e,u[2]=r,u[3]=i,u},Ha.set=function(n,e,r,i,u){return n[0]=e,n[1]=r,n[2]=i,n[3]=u,n},Ha.transpose=function(n,e){if(n===e){var r=e[1];n[1]=e[2],n[2]=r}else n[0]=e[0],n[1]=e[2],n[2]=e[1],n[3]=e[3];return n},Ha.invert=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=r*p-u*i;return h?(n[0]=p*(h=1/h),n[1]=-i*h,n[2]=-u*h,n[3]=r*h,n):null},Ha.adjoint=function(n,e){var r=e[0];return n[0]=e[3],n[1]=-e[1],n[2]=-e[2],n[3]=r,n},Ha.determinant=function(n){return n[0]*n[3]-n[2]*n[1]},Ha.multiply=hw,Ha.rotate=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=Math.sin(r),y=Math.cos(r);return n[0]=i*y+p*b,n[1]=u*y+h*b,n[2]=i*-b+p*y,n[3]=u*-b+h*y,n},Ha.scale=function(n,e,r){var i=e[1],u=e[2],p=e[3],h=r[0],b=r[1];return n[0]=e[0]*h,n[1]=i*h,n[2]=u*b,n[3]=p*b,n},Ha.fromRotation=function(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=r,n[2]=-r,n[3]=i,n},Ha.fromScaling=function(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=e[1],n},Ha.str=function(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},Ha.frob=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},Ha.LDU=function(n,e,r,i){return n[2]=i[2]/i[0],r[0]=i[0],r[1]=i[1],r[3]=i[3]-n[2]*r[1],[n,e,r]},Ha.add=function(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n[3]=e[3]+r[3],n},Ha.subtract=mw,Ha.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]},Ha.equals=function(n,e){var r=n[0],i=n[1],u=n[2],p=n[3],h=e[0],b=e[1],y=e[2],x=e[3];return Math.abs(r-h)<=lu.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-b)<=lu.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(u-y)<=lu.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(p-x)<=lu.EPSILON*Math.max(1,Math.abs(p),Math.abs(x))},Ha.multiplyScalar=function(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n},Ha.multiplyScalarAndAdd=function(n,e,r,i){return n[0]=e[0]+r[0]*i,n[1]=e[1]+r[1]*i,n[2]=e[2]+r[2]*i,n[3]=e[3]+r[3]*i,n},Ha.sub=Ha.mul=void 0;var lu=function(n,e){if(n&&n.__esModule)return n;if(n===null||Vy(n)!=="object"&&typeof n!="function")return{default:n};var r=fw(void 0);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}(Fr);function fw(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(fw=function(i){return i?r:e})(n)}function hw(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=r[0],y=r[1],x=r[2],T=r[3];return n[0]=i*b+p*y,n[1]=u*b+h*y,n[2]=i*x+p*T,n[3]=u*x+h*T,n}function mw(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n[3]=e[3]-r[3],n}Ha.mul=hw,Ha.sub=mw;var Ka={};function Gy(n){return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gy(n)}Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.create=function(){var n=new Mc.ARRAY_TYPE(6);return Mc.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0,n[4]=0,n[5]=0),n[0]=1,n[3]=1,n},Ka.clone=function(n){var e=new Mc.ARRAY_TYPE(6);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e},Ka.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n},Ka.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n},Ka.fromValues=function(n,e,r,i,u,p){var h=new Mc.ARRAY_TYPE(6);return h[0]=n,h[1]=e,h[2]=r,h[3]=i,h[4]=u,h[5]=p,h},Ka.set=function(n,e,r,i,u,p,h){return n[0]=e,n[1]=r,n[2]=i,n[3]=u,n[4]=p,n[5]=h,n},Ka.invert=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=e[4],b=e[5],y=r*p-i*u;return y?(n[0]=p*(y=1/y),n[1]=-i*y,n[2]=-u*y,n[3]=r*y,n[4]=(u*b-p*h)*y,n[5]=(i*h-r*b)*y,n):null},Ka.determinant=function(n){return n[0]*n[3]-n[1]*n[2]},Ka.multiply=bw,Ka.rotate=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=e[4],y=e[5],x=Math.sin(r),T=Math.cos(r);return n[0]=i*T+p*x,n[1]=u*T+h*x,n[2]=i*-x+p*T,n[3]=u*-x+h*T,n[4]=b,n[5]=y,n},Ka.scale=function(n,e,r){var i=e[1],u=e[2],p=e[3],h=e[4],b=e[5],y=r[0],x=r[1];return n[0]=e[0]*y,n[1]=i*y,n[2]=u*x,n[3]=p*x,n[4]=h,n[5]=b,n},Ka.translate=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=e[4],y=e[5],x=r[0],T=r[1];return n[0]=i,n[1]=u,n[2]=p,n[3]=h,n[4]=i*x+p*T+b,n[5]=u*x+h*T+y,n},Ka.fromRotation=function(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=r,n[2]=-r,n[3]=i,n[4]=0,n[5]=0,n},Ka.fromScaling=function(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=e[1],n[4]=0,n[5]=0,n},Ka.fromTranslation=function(n,e){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=e[0],n[5]=e[1],n},Ka.str=function(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"},Ka.frob=function(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],1)},Ka.add=function(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n[3]=e[3]+r[3],n[4]=e[4]+r[4],n[5]=e[5]+r[5],n},Ka.subtract=_w,Ka.multiplyScalar=function(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n},Ka.multiplyScalarAndAdd=function(n,e,r,i){return n[0]=e[0]+r[0]*i,n[1]=e[1]+r[1]*i,n[2]=e[2]+r[2]*i,n[3]=e[3]+r[3]*i,n[4]=e[4]+r[4]*i,n[5]=e[5]+r[5]*i,n},Ka.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]},Ka.equals=function(n,e){var r=n[0],i=n[1],u=n[2],p=n[3],h=n[4],b=n[5],y=e[0],x=e[1],T=e[2],P=e[3],A=e[4],R=e[5];return Math.abs(r-y)<=Mc.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-x)<=Mc.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-T)<=Mc.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(p-P)<=Mc.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(h-A)<=Mc.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(b-R)<=Mc.EPSILON*Math.max(1,Math.abs(b),Math.abs(R))},Ka.sub=Ka.mul=void 0;var Mc=function(n,e){if(n&&n.__esModule)return n;if(n===null||Gy(n)!=="object"&&typeof n!="function")return{default:n};var r=gw(void 0);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}(Fr);function gw(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(gw=function(i){return i?r:e})(n)}function bw(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=e[4],y=e[5],x=r[0],T=r[1],P=r[2],A=r[3],R=r[4],D=r[5];return n[0]=i*x+p*T,n[1]=u*x+h*T,n[2]=i*P+p*A,n[3]=u*P+h*A,n[4]=i*R+p*D+b,n[5]=u*R+h*D+y,n}function _w(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n[3]=e[3]-r[3],n[4]=e[4]-r[4],n[5]=e[5]-r[5],n}Ka.mul=bw,Ka.sub=_w;var _a={};function $y(n){return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$y(n)}Object.defineProperty(_a,"__esModule",{value:!0}),_a.create=function(){var n=new Yi.ARRAY_TYPE(9);return Yi.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n},_a.fromMat4=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},_a.clone=function(n){var e=new Yi.ARRAY_TYPE(9);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e},_a.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},_a.fromValues=function(n,e,r,i,u,p,h,b,y){var x=new Yi.ARRAY_TYPE(9);return x[0]=n,x[1]=e,x[2]=r,x[3]=i,x[4]=u,x[5]=p,x[6]=h,x[7]=b,x[8]=y,x},_a.set=function(n,e,r,i,u,p,h,b,y,x){return n[0]=e,n[1]=r,n[2]=i,n[3]=u,n[4]=p,n[5]=h,n[6]=b,n[7]=y,n[8]=x,n},_a.identity=function(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},_a.transpose=function(n,e){if(n===e){var r=e[1],i=e[2],u=e[5];n[1]=e[3],n[2]=e[6],n[3]=r,n[5]=e[7],n[6]=i,n[7]=u}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8];return n},_a.invert=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=e[4],b=e[5],y=e[6],x=e[7],T=e[8],P=T*h-b*x,A=-T*p+b*y,R=x*p-h*y,D=r*P+i*A+u*R;return D?(n[0]=P*(D=1/D),n[1]=(-T*i+u*x)*D,n[2]=(b*i-u*h)*D,n[3]=A*D,n[4]=(T*r-u*y)*D,n[5]=(-b*r+u*p)*D,n[6]=R*D,n[7]=(-x*r+i*y)*D,n[8]=(h*r-i*p)*D,n):null},_a.adjoint=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=e[4],b=e[5],y=e[6],x=e[7],T=e[8];return n[0]=h*T-b*x,n[1]=u*x-i*T,n[2]=i*b-u*h,n[3]=b*y-p*T,n[4]=r*T-u*y,n[5]=u*p-r*b,n[6]=p*x-h*y,n[7]=i*y-r*x,n[8]=r*h-i*p,n},_a.determinant=function(n){var e=n[3],r=n[4],i=n[5],u=n[6],p=n[7],h=n[8];return n[0]*(h*r-i*p)+n[1]*(-h*e+i*u)+n[2]*(p*e-r*u)},_a.multiply=vw,_a.translate=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=e[8],A=r[0],R=r[1];return n[0]=i,n[1]=u,n[2]=p,n[3]=h,n[4]=b,n[5]=y,n[6]=A*i+R*h+x,n[7]=A*u+R*b+T,n[8]=A*p+R*y+P,n},_a.rotate=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=e[8],A=Math.sin(r),R=Math.cos(r);return n[0]=R*i+A*h,n[1]=R*u+A*b,n[2]=R*p+A*y,n[3]=R*h-A*i,n[4]=R*b-A*u,n[5]=R*y-A*p,n[6]=x,n[7]=T,n[8]=P,n},_a.scale=function(n,e,r){var i=r[0],u=r[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=u*e[3],n[4]=u*e[4],n[5]=u*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n},_a.fromTranslation=function(n,e){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=e[0],n[7]=e[1],n[8]=1,n},_a.fromRotation=function(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=r,n[2]=0,n[3]=-r,n[4]=i,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},_a.fromScaling=function(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=e[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},_a.fromMat2d=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=0,n[3]=e[2],n[4]=e[3],n[5]=0,n[6]=e[4],n[7]=e[5],n[8]=1,n},_a.fromQuat=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=r+r,b=i+i,y=u+u,x=r*h,T=i*h,P=i*b,A=u*h,R=u*b,D=u*y,F=p*h,V=p*b,Y=p*y;return n[0]=1-P-D,n[3]=T-Y,n[6]=A+V,n[1]=T+Y,n[4]=1-x-D,n[7]=R-F,n[2]=A-V,n[5]=R+F,n[8]=1-x-P,n},_a.normalFromMat4=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=e[4],b=e[5],y=e[6],x=e[7],T=e[8],P=e[9],A=e[10],R=e[11],D=e[12],F=e[13],V=e[14],Y=e[15],ie=r*b-i*h,oe=r*y-u*h,le=r*x-p*h,he=i*y-u*b,_e=i*x-p*b,ze=u*x-p*y,De=T*F-P*D,Ne=T*V-A*D,He=T*Y-R*D,je=P*V-A*F,at=P*Y-R*F,_t=A*Y-R*V,et=ie*_t-oe*at+le*je+he*He-_e*Ne+ze*De;return et?(n[0]=(b*_t-y*at+x*je)*(et=1/et),n[1]=(y*He-h*_t-x*Ne)*et,n[2]=(h*at-b*He+x*De)*et,n[3]=(u*at-i*_t-p*je)*et,n[4]=(r*_t-u*He+p*Ne)*et,n[5]=(i*He-r*at-p*De)*et,n[6]=(F*ze-V*_e+Y*he)*et,n[7]=(V*le-D*ze-Y*oe)*et,n[8]=(D*_e-F*le+Y*ie)*et,n):null},_a.projection=function(n,e,r){return n[0]=2/e,n[1]=0,n[2]=0,n[3]=0,n[4]=-2/r,n[5]=0,n[6]=-1,n[7]=1,n[8]=1,n},_a.str=function(n){return"mat3("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+")"},_a.frob=function(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},_a.add=function(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n[3]=e[3]+r[3],n[4]=e[4]+r[4],n[5]=e[5]+r[5],n[6]=e[6]+r[6],n[7]=e[7]+r[7],n[8]=e[8]+r[8],n},_a.subtract=xw,_a.multiplyScalar=function(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*r,n},_a.multiplyScalarAndAdd=function(n,e,r,i){return n[0]=e[0]+r[0]*i,n[1]=e[1]+r[1]*i,n[2]=e[2]+r[2]*i,n[3]=e[3]+r[3]*i,n[4]=e[4]+r[4]*i,n[5]=e[5]+r[5]*i,n[6]=e[6]+r[6]*i,n[7]=e[7]+r[7]*i,n[8]=e[8]+r[8]*i,n},_a.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]&&n[8]===e[8]},_a.equals=function(n,e){var r=n[0],i=n[1],u=n[2],p=n[3],h=n[4],b=n[5],y=n[6],x=n[7],T=n[8],P=e[0],A=e[1],R=e[2],D=e[3],F=e[4],V=e[5],Y=e[6],ie=e[7],oe=e[8];return Math.abs(r-P)<=Yi.EPSILON*Math.max(1,Math.abs(r),Math.abs(P))&&Math.abs(i-A)<=Yi.EPSILON*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(u-R)<=Yi.EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(p-D)<=Yi.EPSILON*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(h-F)<=Yi.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(b-V)<=Yi.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(y-Y)<=Yi.EPSILON*Math.max(1,Math.abs(y),Math.abs(Y))&&Math.abs(x-ie)<=Yi.EPSILON*Math.max(1,Math.abs(x),Math.abs(ie))&&Math.abs(T-oe)<=Yi.EPSILON*Math.max(1,Math.abs(T),Math.abs(oe))},_a.sub=_a.mul=void 0;var Yi=function(n,e){if(n&&n.__esModule)return n;if(n===null||$y(n)!=="object"&&typeof n!="function")return{default:n};var r=yw(void 0);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}(Fr);function yw(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(yw=function(i){return i?r:e})(n)}function vw(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=e[8],A=r[0],R=r[1],D=r[2],F=r[3],V=r[4],Y=r[5],ie=r[6],oe=r[7],le=r[8];return n[0]=A*i+R*h+D*x,n[1]=A*u+R*b+D*T,n[2]=A*p+R*y+D*P,n[3]=F*i+V*h+Y*x,n[4]=F*u+V*b+Y*T,n[5]=F*p+V*y+Y*P,n[6]=ie*i+oe*h+le*x,n[7]=ie*u+oe*b+le*T,n[8]=ie*p+oe*y+le*P,n}function xw(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n[3]=e[3]-r[3],n[4]=e[4]-r[4],n[5]=e[5]-r[5],n[6]=e[6]-r[6],n[7]=e[7]-r[7],n[8]=e[8]-r[8],n}_a.mul=vw,_a.sub=xw;var Rn={};function qy(n){return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(n)}Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.create=function(){var n=new lr.ARRAY_TYPE(16);return lr.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},Rn.clone=function(n){var e=new lr.ARRAY_TYPE(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},Rn.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},Rn.fromValues=function(n,e,r,i,u,p,h,b,y,x,T,P,A,R,D,F){var V=new lr.ARRAY_TYPE(16);return V[0]=n,V[1]=e,V[2]=r,V[3]=i,V[4]=u,V[5]=p,V[6]=h,V[7]=b,V[8]=y,V[9]=x,V[10]=T,V[11]=P,V[12]=A,V[13]=R,V[14]=D,V[15]=F,V},Rn.set=function(n,e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V){return n[0]=e,n[1]=r,n[2]=i,n[3]=u,n[4]=p,n[5]=h,n[6]=b,n[7]=y,n[8]=x,n[9]=T,n[10]=P,n[11]=A,n[12]=R,n[13]=D,n[14]=F,n[15]=V,n},Rn.identity=Sw,Rn.transpose=function(n,e){if(n===e){var r=e[1],i=e[2],u=e[3],p=e[6],h=e[7],b=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=r,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=p,n[11]=e[14],n[12]=u,n[13]=h,n[14]=b}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n},Rn.invert=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=e[4],b=e[5],y=e[6],x=e[7],T=e[8],P=e[9],A=e[10],R=e[11],D=e[12],F=e[13],V=e[14],Y=e[15],ie=r*b-i*h,oe=r*y-u*h,le=r*x-p*h,he=i*y-u*b,_e=i*x-p*b,ze=u*x-p*y,De=T*F-P*D,Ne=T*V-A*D,He=T*Y-R*D,je=P*V-A*F,at=P*Y-R*F,_t=A*Y-R*V,et=ie*_t-oe*at+le*je+he*He-_e*Ne+ze*De;return et?(n[0]=(b*_t-y*at+x*je)*(et=1/et),n[1]=(u*at-i*_t-p*je)*et,n[2]=(F*ze-V*_e+Y*he)*et,n[3]=(A*_e-P*ze-R*he)*et,n[4]=(y*He-h*_t-x*Ne)*et,n[5]=(r*_t-u*He+p*Ne)*et,n[6]=(V*le-D*ze-Y*oe)*et,n[7]=(T*ze-A*le+R*oe)*et,n[8]=(h*at-b*He+x*De)*et,n[9]=(i*He-r*at-p*De)*et,n[10]=(D*_e-F*le+Y*ie)*et,n[11]=(P*le-T*_e-R*ie)*et,n[12]=(b*Ne-h*je-y*De)*et,n[13]=(r*je-i*Ne+u*De)*et,n[14]=(F*oe-D*he-V*ie)*et,n[15]=(T*he-P*oe+A*ie)*et,n):null},Rn.adjoint=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=e[4],b=e[5],y=e[6],x=e[7],T=e[8],P=e[9],A=e[10],R=e[11],D=e[12],F=e[13],V=e[14],Y=e[15];return n[0]=b*(A*Y-R*V)-P*(y*Y-x*V)+F*(y*R-x*A),n[1]=-(i*(A*Y-R*V)-P*(u*Y-p*V)+F*(u*R-p*A)),n[2]=i*(y*Y-x*V)-b*(u*Y-p*V)+F*(u*x-p*y),n[3]=-(i*(y*R-x*A)-b*(u*R-p*A)+P*(u*x-p*y)),n[4]=-(h*(A*Y-R*V)-T*(y*Y-x*V)+D*(y*R-x*A)),n[5]=r*(A*Y-R*V)-T*(u*Y-p*V)+D*(u*R-p*A),n[6]=-(r*(y*Y-x*V)-h*(u*Y-p*V)+D*(u*x-p*y)),n[7]=r*(y*R-x*A)-h*(u*R-p*A)+T*(u*x-p*y),n[8]=h*(P*Y-R*F)-T*(b*Y-x*F)+D*(b*R-x*P),n[9]=-(r*(P*Y-R*F)-T*(i*Y-p*F)+D*(i*R-p*P)),n[10]=r*(b*Y-x*F)-h*(i*Y-p*F)+D*(i*x-p*b),n[11]=-(r*(b*R-x*P)-h*(i*R-p*P)+T*(i*x-p*b)),n[12]=-(h*(P*V-A*F)-T*(b*V-y*F)+D*(b*A-y*P)),n[13]=r*(P*V-A*F)-T*(i*V-u*F)+D*(i*A-u*P),n[14]=-(r*(b*V-y*F)-h*(i*V-u*F)+D*(i*y-u*b)),n[15]=r*(b*A-y*P)-h*(i*A-u*P)+T*(i*y-u*b),n},Rn.determinant=function(n){var e=n[0],r=n[1],i=n[2],u=n[3],p=n[4],h=n[5],b=n[6],y=n[7],x=n[8],T=n[9],P=n[10],A=n[11],R=n[12],D=n[13],F=n[14],V=n[15];return(e*h-r*p)*(P*V-A*F)-(e*b-i*p)*(T*V-A*D)+(e*y-u*p)*(T*F-P*D)+(r*b-i*h)*(x*V-A*R)-(r*y-u*h)*(x*F-P*R)+(i*y-u*b)*(x*D-T*R)},Rn.multiply=Tw,Rn.translate=function(n,e,r){var i,u,p,h,b,y,x,T,P,A,R,D,F=r[0],V=r[1],Y=r[2];return e===n?(n[12]=e[0]*F+e[4]*V+e[8]*Y+e[12],n[13]=e[1]*F+e[5]*V+e[9]*Y+e[13],n[14]=e[2]*F+e[6]*V+e[10]*Y+e[14],n[15]=e[3]*F+e[7]*V+e[11]*Y+e[15]):(u=e[1],p=e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=e[8],A=e[9],R=e[10],D=e[11],n[0]=i=e[0],n[1]=u,n[2]=p,n[3]=h,n[4]=b,n[5]=y,n[6]=x,n[7]=T,n[8]=P,n[9]=A,n[10]=R,n[11]=D,n[12]=i*F+b*V+P*Y+e[12],n[13]=u*F+y*V+A*Y+e[13],n[14]=p*F+x*V+R*Y+e[14],n[15]=h*F+T*V+D*Y+e[15]),n},Rn.scale=function(n,e,r){var i=r[0],u=r[1],p=r[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*u,n[5]=e[5]*u,n[6]=e[6]*u,n[7]=e[7]*u,n[8]=e[8]*p,n[9]=e[9]*p,n[10]=e[10]*p,n[11]=e[11]*p,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n},Rn.rotate=function(n,e,r,i){var u,p,h,b,y,x,T,P,A,R,D,F,V,Y,ie,oe,le,he,_e,ze,De,Ne,He,je,at=i[0],_t=i[1],et=i[2],ht=Math.hypot(at,_t,et);return ht<lr.EPSILON?null:(at*=ht=1/ht,_t*=ht,et*=ht,u=Math.sin(r),p=Math.cos(r),y=e[1],x=e[2],T=e[3],A=e[5],R=e[6],D=e[7],V=e[9],Y=e[10],ie=e[11],_e=at*_t*(h=1-p)-et*u,ze=_t*_t*h+p,De=et*_t*h+at*u,Ne=at*et*h+_t*u,He=_t*et*h-at*u,je=et*et*h+p,n[0]=(b=e[0])*(oe=at*at*h+p)+(P=e[4])*(le=_t*at*h+et*u)+(F=e[8])*(he=et*at*h-_t*u),n[1]=y*oe+A*le+V*he,n[2]=x*oe+R*le+Y*he,n[3]=T*oe+D*le+ie*he,n[4]=b*_e+P*ze+F*De,n[5]=y*_e+A*ze+V*De,n[6]=x*_e+R*ze+Y*De,n[7]=T*_e+D*ze+ie*De,n[8]=b*Ne+P*He+F*je,n[9]=y*Ne+A*He+V*je,n[10]=x*Ne+R*He+Y*je,n[11]=T*Ne+D*He+ie*je,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)},Rn.rotateX=function(n,e,r){var i=Math.sin(r),u=Math.cos(r),p=e[4],h=e[5],b=e[6],y=e[7],x=e[8],T=e[9],P=e[10],A=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=p*u+x*i,n[5]=h*u+T*i,n[6]=b*u+P*i,n[7]=y*u+A*i,n[8]=x*u-p*i,n[9]=T*u-h*i,n[10]=P*u-b*i,n[11]=A*u-y*i,n},Rn.rotateY=function(n,e,r){var i=Math.sin(r),u=Math.cos(r),p=e[0],h=e[1],b=e[2],y=e[3],x=e[8],T=e[9],P=e[10],A=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=p*u-x*i,n[1]=h*u-T*i,n[2]=b*u-P*i,n[3]=y*u-A*i,n[8]=p*i+x*u,n[9]=h*i+T*u,n[10]=b*i+P*u,n[11]=y*i+A*u,n},Rn.rotateZ=function(n,e,r){var i=Math.sin(r),u=Math.cos(r),p=e[0],h=e[1],b=e[2],y=e[3],x=e[4],T=e[5],P=e[6],A=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=p*u+x*i,n[1]=h*u+T*i,n[2]=b*u+P*i,n[3]=y*u+A*i,n[4]=x*u-p*i,n[5]=T*u-h*i,n[6]=P*u-b*i,n[7]=A*u-y*i,n},Rn.fromTranslation=function(n,e){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},Rn.fromScaling=function(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},Rn.fromRotation=function(n,e,r){var i,u,p,h=r[0],b=r[1],y=r[2],x=Math.hypot(h,b,y);return x<lr.EPSILON?null:(h*=x=1/x,b*=x,y*=x,i=Math.sin(e),u=Math.cos(e),n[0]=h*h*(p=1-u)+u,n[1]=b*h*p+y*i,n[2]=y*h*p-b*i,n[3]=0,n[4]=h*b*p-y*i,n[5]=b*b*p+u,n[6]=y*b*p+h*i,n[7]=0,n[8]=h*y*p+b*i,n[9]=b*y*p-h*i,n[10]=y*y*p+u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)},Rn.fromXRotation=function(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i,n[6]=r,n[7]=0,n[8]=0,n[9]=-r,n[10]=i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},Rn.fromYRotation=function(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=0,n[2]=-r,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=r,n[9]=0,n[10]=i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},Rn.fromZRotation=function(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=r,n[2]=0,n[3]=0,n[4]=-r,n[5]=i,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},Rn.fromRotationTranslation=Ew,Rn.fromQuat2=function(n,e){var r=new lr.ARRAY_TYPE(3),i=-e[0],u=-e[1],p=-e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=i*i+u*u+p*p+h*h;return P>0?(r[0]=2*(b*h+T*i+y*p-x*u)/P,r[1]=2*(y*h+T*u+x*i-b*p)/P,r[2]=2*(x*h+T*p+b*u-y*i)/P):(r[0]=2*(b*h+T*i+y*p-x*u),r[1]=2*(y*h+T*u+x*i-b*p),r[2]=2*(x*h+T*p+b*u-y*i)),Ew(n,e,r),n},Rn.getTranslation=function(n,e){return n[0]=e[12],n[1]=e[13],n[2]=e[14],n},Rn.getScaling=Iw,Rn.getRotation=function(n,e){var r=new lr.ARRAY_TYPE(3);Iw(r,e);var i=1/r[0],u=1/r[1],p=1/r[2],h=e[0]*i,b=e[1]*u,y=e[2]*p,x=e[4]*i,T=e[5]*u,P=e[6]*p,A=e[8]*i,R=e[9]*u,D=e[10]*p,F=h+T+D,V=0;return F>0?(V=2*Math.sqrt(F+1),n[3]=.25*V,n[0]=(P-R)/V,n[1]=(A-y)/V,n[2]=(b-x)/V):h>T&&h>D?(V=2*Math.sqrt(1+h-T-D),n[3]=(P-R)/V,n[0]=.25*V,n[1]=(b+x)/V,n[2]=(A+y)/V):T>D?(V=2*Math.sqrt(1+T-h-D),n[3]=(A-y)/V,n[0]=(b+x)/V,n[1]=.25*V,n[2]=(P+R)/V):(V=2*Math.sqrt(1+D-h-T),n[3]=(b-x)/V,n[0]=(A+y)/V,n[1]=(P+R)/V,n[2]=.25*V),n},Rn.fromRotationTranslationScale=function(n,e,r,i){var u=e[0],p=e[1],h=e[2],b=e[3],y=u+u,x=p+p,T=h+h,P=u*y,A=u*x,R=u*T,D=p*x,F=p*T,V=h*T,Y=b*y,ie=b*x,oe=b*T,le=i[0],he=i[1],_e=i[2];return n[0]=(1-(D+V))*le,n[1]=(A+oe)*le,n[2]=(R-ie)*le,n[3]=0,n[4]=(A-oe)*he,n[5]=(1-(P+V))*he,n[6]=(F+Y)*he,n[7]=0,n[8]=(R+ie)*_e,n[9]=(F-Y)*_e,n[10]=(1-(P+D))*_e,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n},Rn.fromRotationTranslationScaleOrigin=function(n,e,r,i,u){var p=e[0],h=e[1],b=e[2],y=e[3],x=p+p,T=h+h,P=b+b,A=p*x,R=p*T,D=p*P,F=h*T,V=h*P,Y=b*P,ie=y*x,oe=y*T,le=y*P,he=i[0],_e=i[1],ze=i[2],De=u[0],Ne=u[1],He=u[2],je=(1-(F+Y))*he,at=(R+le)*he,_t=(D-oe)*he,et=(R-le)*_e,ht=(1-(A+Y))*_e,Qe=(V+ie)*_e,Lt=(D+oe)*ze,$t=(V-ie)*ze,bt=(1-(A+F))*ze;return n[0]=je,n[1]=at,n[2]=_t,n[3]=0,n[4]=et,n[5]=ht,n[6]=Qe,n[7]=0,n[8]=Lt,n[9]=$t,n[10]=bt,n[11]=0,n[12]=r[0]+De-(je*De+et*Ne+Lt*He),n[13]=r[1]+Ne-(at*De+ht*Ne+$t*He),n[14]=r[2]+He-(_t*De+Qe*Ne+bt*He),n[15]=1,n},Rn.fromQuat=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=r+r,b=i+i,y=u+u,x=r*h,T=i*h,P=i*b,A=u*h,R=u*b,D=u*y,F=p*h,V=p*b,Y=p*y;return n[0]=1-P-D,n[1]=T+Y,n[2]=A-V,n[3]=0,n[4]=T-Y,n[5]=1-x-D,n[6]=R+F,n[7]=0,n[8]=A+V,n[9]=R-F,n[10]=1-x-P,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},Rn.frustum=function(n,e,r,i,u,p,h){var b=1/(r-e),y=1/(u-i),x=1/(p-h);return n[0]=2*p*b,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*p*y,n[6]=0,n[7]=0,n[8]=(r+e)*b,n[9]=(u+i)*y,n[10]=(h+p)*x,n[11]=-1,n[12]=0,n[13]=0,n[14]=h*p*2*x,n[15]=0,n},Rn.perspectiveNO=Pw,Rn.perspectiveZO=function(n,e,r,i,u){var p,h=1/Math.tan(e/2);return n[0]=h/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,u!=null&&u!==1/0?(n[10]=u*(p=1/(i-u)),n[14]=u*i*p):(n[10]=-1,n[14]=-i),n},Rn.perspectiveFromFieldOfView=function(n,e,r,i){var u=Math.tan(e.upDegrees*Math.PI/180),p=Math.tan(e.downDegrees*Math.PI/180),h=Math.tan(e.leftDegrees*Math.PI/180),b=Math.tan(e.rightDegrees*Math.PI/180),y=2/(h+b),x=2/(u+p);return n[0]=y,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=x,n[6]=0,n[7]=0,n[8]=-(h-b)*y*.5,n[9]=(u-p)*x*.5,n[10]=i/(r-i),n[11]=-1,n[12]=0,n[13]=0,n[14]=i*r/(r-i),n[15]=0,n},Rn.orthoNO=zw,Rn.orthoZO=function(n,e,r,i,u,p,h){var b=1/(e-r),y=1/(i-u),x=1/(p-h);return n[0]=-2*b,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=x,n[11]=0,n[12]=(e+r)*b,n[13]=(u+i)*y,n[14]=p*x,n[15]=1,n},Rn.lookAt=function(n,e,r,i){var u,p,h,b,y,x,T,P,A,R,D=e[0],F=e[1],V=e[2],Y=i[0],ie=i[1],oe=i[2],le=r[0],he=r[1],_e=r[2];return Math.abs(D-le)<lr.EPSILON&&Math.abs(F-he)<lr.EPSILON&&Math.abs(V-_e)<lr.EPSILON?Sw(n):(T=D-le,P=F-he,A=V-_e,u=ie*(A*=R=1/Math.hypot(T,P,A))-oe*(P*=R),p=oe*(T*=R)-Y*A,h=Y*P-ie*T,(R=Math.hypot(u,p,h))?(u*=R=1/R,p*=R,h*=R):(u=0,p=0,h=0),b=P*h-A*p,y=A*u-T*h,x=T*p-P*u,(R=Math.hypot(b,y,x))?(b*=R=1/R,y*=R,x*=R):(b=0,y=0,x=0),n[0]=u,n[1]=b,n[2]=T,n[3]=0,n[4]=p,n[5]=y,n[6]=P,n[7]=0,n[8]=h,n[9]=x,n[10]=A,n[11]=0,n[12]=-(u*D+p*F+h*V),n[13]=-(b*D+y*F+x*V),n[14]=-(T*D+P*F+A*V),n[15]=1,n)},Rn.targetTo=function(n,e,r,i){var u=e[0],p=e[1],h=e[2],b=i[0],y=i[1],x=i[2],T=u-r[0],P=p-r[1],A=h-r[2],R=T*T+P*P+A*A;R>0&&(T*=R=1/Math.sqrt(R),P*=R,A*=R);var D=y*A-x*P,F=x*T-b*A,V=b*P-y*T;return(R=D*D+F*F+V*V)>0&&(D*=R=1/Math.sqrt(R),F*=R,V*=R),n[0]=D,n[1]=F,n[2]=V,n[3]=0,n[4]=P*V-A*F,n[5]=A*D-T*V,n[6]=T*F-P*D,n[7]=0,n[8]=T,n[9]=P,n[10]=A,n[11]=0,n[12]=u,n[13]=p,n[14]=h,n[15]=1,n},Rn.str=function(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"},Rn.frob=function(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])},Rn.add=function(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n[3]=e[3]+r[3],n[4]=e[4]+r[4],n[5]=e[5]+r[5],n[6]=e[6]+r[6],n[7]=e[7]+r[7],n[8]=e[8]+r[8],n[9]=e[9]+r[9],n[10]=e[10]+r[10],n[11]=e[11]+r[11],n[12]=e[12]+r[12],n[13]=e[13]+r[13],n[14]=e[14]+r[14],n[15]=e[15]+r[15],n},Rn.subtract=Aw,Rn.multiplyScalar=function(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*r,n[9]=e[9]*r,n[10]=e[10]*r,n[11]=e[11]*r,n[12]=e[12]*r,n[13]=e[13]*r,n[14]=e[14]*r,n[15]=e[15]*r,n},Rn.multiplyScalarAndAdd=function(n,e,r,i){return n[0]=e[0]+r[0]*i,n[1]=e[1]+r[1]*i,n[2]=e[2]+r[2]*i,n[3]=e[3]+r[3]*i,n[4]=e[4]+r[4]*i,n[5]=e[5]+r[5]*i,n[6]=e[6]+r[6]*i,n[7]=e[7]+r[7]*i,n[8]=e[8]+r[8]*i,n[9]=e[9]+r[9]*i,n[10]=e[10]+r[10]*i,n[11]=e[11]+r[11]*i,n[12]=e[12]+r[12]*i,n[13]=e[13]+r[13]*i,n[14]=e[14]+r[14]*i,n[15]=e[15]+r[15]*i,n},Rn.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]&&n[8]===e[8]&&n[9]===e[9]&&n[10]===e[10]&&n[11]===e[11]&&n[12]===e[12]&&n[13]===e[13]&&n[14]===e[14]&&n[15]===e[15]},Rn.equals=function(n,e){var r=n[0],i=n[1],u=n[2],p=n[3],h=n[4],b=n[5],y=n[6],x=n[7],T=n[8],P=n[9],A=n[10],R=n[11],D=n[12],F=n[13],V=n[14],Y=n[15],ie=e[0],oe=e[1],le=e[2],he=e[3],_e=e[4],ze=e[5],De=e[6],Ne=e[7],He=e[8],je=e[9],at=e[10],_t=e[11],et=e[12],ht=e[13],Qe=e[14],Lt=e[15];return Math.abs(r-ie)<=lr.EPSILON*Math.max(1,Math.abs(r),Math.abs(ie))&&Math.abs(i-oe)<=lr.EPSILON*Math.max(1,Math.abs(i),Math.abs(oe))&&Math.abs(u-le)<=lr.EPSILON*Math.max(1,Math.abs(u),Math.abs(le))&&Math.abs(p-he)<=lr.EPSILON*Math.max(1,Math.abs(p),Math.abs(he))&&Math.abs(h-_e)<=lr.EPSILON*Math.max(1,Math.abs(h),Math.abs(_e))&&Math.abs(b-ze)<=lr.EPSILON*Math.max(1,Math.abs(b),Math.abs(ze))&&Math.abs(y-De)<=lr.EPSILON*Math.max(1,Math.abs(y),Math.abs(De))&&Math.abs(x-Ne)<=lr.EPSILON*Math.max(1,Math.abs(x),Math.abs(Ne))&&Math.abs(T-He)<=lr.EPSILON*Math.max(1,Math.abs(T),Math.abs(He))&&Math.abs(P-je)<=lr.EPSILON*Math.max(1,Math.abs(P),Math.abs(je))&&Math.abs(A-at)<=lr.EPSILON*Math.max(1,Math.abs(A),Math.abs(at))&&Math.abs(R-_t)<=lr.EPSILON*Math.max(1,Math.abs(R),Math.abs(_t))&&Math.abs(D-et)<=lr.EPSILON*Math.max(1,Math.abs(D),Math.abs(et))&&Math.abs(F-ht)<=lr.EPSILON*Math.max(1,Math.abs(F),Math.abs(ht))&&Math.abs(V-Qe)<=lr.EPSILON*Math.max(1,Math.abs(V),Math.abs(Qe))&&Math.abs(Y-Lt)<=lr.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Lt))},Rn.sub=Rn.mul=Rn.ortho=Rn.perspective=void 0;var lr=function(n,e){if(n&&n.__esModule)return n;if(n===null||qy(n)!=="object"&&typeof n!="function")return{default:n};var r=ww(void 0);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}(Fr);function ww(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(ww=function(i){return i?r:e})(n)}function Sw(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Tw(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=e[8],A=e[9],R=e[10],D=e[11],F=e[12],V=e[13],Y=e[14],ie=e[15],oe=r[0],le=r[1],he=r[2],_e=r[3];return n[0]=oe*i+le*b+he*P+_e*F,n[1]=oe*u+le*y+he*A+_e*V,n[2]=oe*p+le*x+he*R+_e*Y,n[3]=oe*h+le*T+he*D+_e*ie,n[4]=(oe=r[4])*i+(le=r[5])*b+(he=r[6])*P+(_e=r[7])*F,n[5]=oe*u+le*y+he*A+_e*V,n[6]=oe*p+le*x+he*R+_e*Y,n[7]=oe*h+le*T+he*D+_e*ie,n[8]=(oe=r[8])*i+(le=r[9])*b+(he=r[10])*P+(_e=r[11])*F,n[9]=oe*u+le*y+he*A+_e*V,n[10]=oe*p+le*x+he*R+_e*Y,n[11]=oe*h+le*T+he*D+_e*ie,n[12]=(oe=r[12])*i+(le=r[13])*b+(he=r[14])*P+(_e=r[15])*F,n[13]=oe*u+le*y+he*A+_e*V,n[14]=oe*p+le*x+he*R+_e*Y,n[15]=oe*h+le*T+he*D+_e*ie,n}function Ew(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=i+i,y=u+u,x=p+p,T=i*b,P=i*y,A=i*x,R=u*y,D=u*x,F=p*x,V=h*b,Y=h*y,ie=h*x;return n[0]=1-(R+F),n[1]=P+ie,n[2]=A-Y,n[3]=0,n[4]=P-ie,n[5]=1-(T+F),n[6]=D+V,n[7]=0,n[8]=A+Y,n[9]=D-V,n[10]=1-(T+R),n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function Iw(n,e){var r=e[4],i=e[5],u=e[6],p=e[8],h=e[9],b=e[10];return n[0]=Math.hypot(e[0],e[1],e[2]),n[1]=Math.hypot(r,i,u),n[2]=Math.hypot(p,h,b),n}function Pw(n,e,r,i,u){var p,h=1/Math.tan(e/2);return n[0]=h/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,u!=null&&u!==1/0?(n[10]=(u+i)*(p=1/(i-u)),n[14]=2*u*i*p):(n[10]=-1,n[14]=-2*i),n}function zw(n,e,r,i,u,p,h){var b=1/(e-r),y=1/(i-u),x=1/(p-h);return n[0]=-2*b,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*y,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*x,n[11]=0,n[12]=(e+r)*b,n[13]=(u+i)*y,n[14]=(h+p)*x,n[15]=1,n}function Aw(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n[3]=e[3]-r[3],n[4]=e[4]-r[4],n[5]=e[5]-r[5],n[6]=e[6]-r[6],n[7]=e[7]-r[7],n[8]=e[8]-r[8],n[9]=e[9]-r[9],n[10]=e[10]-r[10],n[11]=e[11]-r[11],n[12]=e[12]-r[12],n[13]=e[13]-r[13],n[14]=e[14]-r[14],n[15]=e[15]-r[15],n}Rn.perspective=Pw,Rn.ortho=zw,Rn.mul=Tw,Rn.sub=Aw;var zn={},Mn={};function Wy(n){return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(n)}Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.create=Mw,Mn.clone=function(n){var e=new _l.ARRAY_TYPE(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e},Mn.length=Rw,Mn.fromValues=function(n,e,r){var i=new _l.ARRAY_TYPE(3);return i[0]=n,i[1]=e,i[2]=r,i},Mn.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n},Mn.set=function(n,e,r,i){return n[0]=e,n[1]=r,n[2]=i,n},Mn.add=function(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n},Mn.subtract=kw,Mn.multiply=Lw,Mn.divide=Dw,Mn.ceil=function(n,e){return n[0]=Math.ceil(e[0]),n[1]=Math.ceil(e[1]),n[2]=Math.ceil(e[2]),n},Mn.floor=function(n,e){return n[0]=Math.floor(e[0]),n[1]=Math.floor(e[1]),n[2]=Math.floor(e[2]),n},Mn.min=function(n,e,r){return n[0]=Math.min(e[0],r[0]),n[1]=Math.min(e[1],r[1]),n[2]=Math.min(e[2],r[2]),n},Mn.max=function(n,e,r){return n[0]=Math.max(e[0],r[0]),n[1]=Math.max(e[1],r[1]),n[2]=Math.max(e[2],r[2]),n},Mn.round=function(n,e){return n[0]=Math.round(e[0]),n[1]=Math.round(e[1]),n[2]=Math.round(e[2]),n},Mn.scale=function(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n},Mn.scaleAndAdd=function(n,e,r,i){return n[0]=e[0]+r[0]*i,n[1]=e[1]+r[1]*i,n[2]=e[2]+r[2]*i,n},Mn.distance=Ow,Mn.squaredDistance=Bw,Mn.squaredLength=Nw,Mn.negate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n},Mn.inverse=function(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n},Mn.normalize=function(n,e){var r=e[0],i=e[1],u=e[2],p=r*r+i*i+u*u;return p>0&&(p=1/Math.sqrt(p)),n[0]=e[0]*p,n[1]=e[1]*p,n[2]=e[2]*p,n},Mn.dot=Fw,Mn.cross=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=r[0],b=r[1],y=r[2];return n[0]=u*y-p*b,n[1]=p*h-i*y,n[2]=i*b-u*h,n},Mn.lerp=function(n,e,r,i){var u=e[0],p=e[1],h=e[2];return n[0]=u+i*(r[0]-u),n[1]=p+i*(r[1]-p),n[2]=h+i*(r[2]-h),n},Mn.hermite=function(n,e,r,i,u,p){var h=p*p,b=h*(2*p-3)+1,y=h*(p-2)+p,x=h*(p-1),T=h*(3-2*p);return n[0]=e[0]*b+r[0]*y+i[0]*x+u[0]*T,n[1]=e[1]*b+r[1]*y+i[1]*x+u[1]*T,n[2]=e[2]*b+r[2]*y+i[2]*x+u[2]*T,n},Mn.bezier=function(n,e,r,i,u,p){var h=1-p,b=h*h,y=p*p,x=b*h,T=3*p*b,P=3*y*h,A=y*p;return n[0]=e[0]*x+r[0]*T+i[0]*P+u[0]*A,n[1]=e[1]*x+r[1]*T+i[1]*P+u[1]*A,n[2]=e[2]*x+r[2]*T+i[2]*P+u[2]*A,n},Mn.random=function(n,e){e=e||1;var r=2*_l.RANDOM()*Math.PI,i=2*_l.RANDOM()-1,u=Math.sqrt(1-i*i)*e;return n[0]=Math.cos(r)*u,n[1]=Math.sin(r)*u,n[2]=i*e,n},Mn.transformMat4=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=r[3]*i+r[7]*u+r[11]*p+r[15];return n[0]=(r[0]*i+r[4]*u+r[8]*p+r[12])/(h=h||1),n[1]=(r[1]*i+r[5]*u+r[9]*p+r[13])/h,n[2]=(r[2]*i+r[6]*u+r[10]*p+r[14])/h,n},Mn.transformMat3=function(n,e,r){var i=e[0],u=e[1],p=e[2];return n[0]=i*r[0]+u*r[3]+p*r[6],n[1]=i*r[1]+u*r[4]+p*r[7],n[2]=i*r[2]+u*r[5]+p*r[8],n},Mn.transformQuat=function(n,e,r){var i=r[0],u=r[1],p=r[2],h=e[0],b=e[1],y=e[2],x=u*y-p*b,T=p*h-i*y,P=i*b-u*h,A=u*P-p*T,R=p*x-i*P,D=i*T-u*x,F=2*r[3];return T*=F,P*=F,R*=2,D*=2,n[0]=h+(x*=F)+(A*=2),n[1]=b+T+R,n[2]=y+P+D,n},Mn.rotateX=function(n,e,r,i){var u=[],p=[];return u[0]=e[0]-r[0],u[1]=e[1]-r[1],u[2]=e[2]-r[2],p[0]=u[0],p[1]=u[1]*Math.cos(i)-u[2]*Math.sin(i),p[2]=u[1]*Math.sin(i)+u[2]*Math.cos(i),n[0]=p[0]+r[0],n[1]=p[1]+r[1],n[2]=p[2]+r[2],n},Mn.rotateY=function(n,e,r,i){var u=[],p=[];return u[0]=e[0]-r[0],u[1]=e[1]-r[1],u[2]=e[2]-r[2],p[0]=u[2]*Math.sin(i)+u[0]*Math.cos(i),p[1]=u[1],p[2]=u[2]*Math.cos(i)-u[0]*Math.sin(i),n[0]=p[0]+r[0],n[1]=p[1]+r[1],n[2]=p[2]+r[2],n},Mn.rotateZ=function(n,e,r,i){var u=[],p=[];return u[0]=e[0]-r[0],u[1]=e[1]-r[1],u[2]=e[2]-r[2],p[0]=u[0]*Math.cos(i)-u[1]*Math.sin(i),p[1]=u[0]*Math.sin(i)+u[1]*Math.cos(i),p[2]=u[2],n[0]=p[0]+r[0],n[1]=p[1]+r[1],n[2]=p[2]+r[2],n},Mn.angle=function(n,e){var r=n[0],i=n[1],u=n[2],p=e[0],h=e[1],b=e[2],y=Math.sqrt(r*r+i*i+u*u)*Math.sqrt(p*p+h*h+b*b),x=y&&Fw(n,e)/y;return Math.acos(Math.min(Math.max(x,-1),1))},Mn.zero=function(n){return n[0]=0,n[1]=0,n[2]=0,n},Mn.str=function(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"},Mn.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]},Mn.equals=function(n,e){var r=n[0],i=n[1],u=n[2],p=e[0],h=e[1],b=e[2];return Math.abs(r-p)<=_l.EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-h)<=_l.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-b)<=_l.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))},Mn.forEach=Mn.sqrLen=Mn.len=Mn.sqrDist=Mn.dist=Mn.div=Mn.mul=Mn.sub=void 0;var _l=function(n,e){if(n&&n.__esModule)return n;if(n===null||Wy(n)!=="object"&&typeof n!="function")return{default:n};var r=Cw(void 0);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}(Fr);function Cw(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Cw=function(i){return i?r:e})(n)}function Mw(){var n=new _l.ARRAY_TYPE(3);return _l.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Rw(n){return Math.hypot(n[0],n[1],n[2])}function kw(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n}function Lw(n,e,r){return n[0]=e[0]*r[0],n[1]=e[1]*r[1],n[2]=e[2]*r[2],n}function Dw(n,e,r){return n[0]=e[0]/r[0],n[1]=e[1]/r[1],n[2]=e[2]/r[2],n}function Ow(n,e){return Math.hypot(e[0]-n[0],e[1]-n[1],e[2]-n[2])}function Bw(n,e){var r=e[0]-n[0],i=e[1]-n[1],u=e[2]-n[2];return r*r+i*i+u*u}function Nw(n){var e=n[0],r=n[1],i=n[2];return e*e+r*r+i*i}function Fw(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}Mn.sub=kw,Mn.mul=Lw,Mn.div=Dw,Mn.dist=Ow,Mn.sqrDist=Bw,Mn.len=Rw,Mn.sqrLen=Nw;var yl,NM=(yl=Mw(),function(n,e,r,i,u,p){var h,b;for(e||(e=3),r||(r=0),b=i?Math.min(i*e+r,n.length):n.length,h=r;h<b;h+=e)yl[0]=n[h],yl[1]=n[h+1],yl[2]=n[h+2],u(yl,yl,p),n[h]=yl[0],n[h+1]=yl[1],n[h+2]=yl[2];return n});Mn.forEach=NM;var $n={};function Hy(n){return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(n)}Object.defineProperty($n,"__esModule",{value:!0}),$n.create=Uw,$n.clone=function(n){var e=new To.ARRAY_TYPE(4);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e},$n.fromValues=function(n,e,r,i){var u=new To.ARRAY_TYPE(4);return u[0]=n,u[1]=e,u[2]=r,u[3]=i,u},$n.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n},$n.set=function(n,e,r,i,u){return n[0]=e,n[1]=r,n[2]=i,n[3]=u,n},$n.add=function(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n[3]=e[3]+r[3],n},$n.subtract=Vw,$n.multiply=Gw,$n.divide=$w,$n.ceil=function(n,e){return n[0]=Math.ceil(e[0]),n[1]=Math.ceil(e[1]),n[2]=Math.ceil(e[2]),n[3]=Math.ceil(e[3]),n},$n.floor=function(n,e){return n[0]=Math.floor(e[0]),n[1]=Math.floor(e[1]),n[2]=Math.floor(e[2]),n[3]=Math.floor(e[3]),n},$n.min=function(n,e,r){return n[0]=Math.min(e[0],r[0]),n[1]=Math.min(e[1],r[1]),n[2]=Math.min(e[2],r[2]),n[3]=Math.min(e[3],r[3]),n},$n.max=function(n,e,r){return n[0]=Math.max(e[0],r[0]),n[1]=Math.max(e[1],r[1]),n[2]=Math.max(e[2],r[2]),n[3]=Math.max(e[3],r[3]),n},$n.round=function(n,e){return n[0]=Math.round(e[0]),n[1]=Math.round(e[1]),n[2]=Math.round(e[2]),n[3]=Math.round(e[3]),n},$n.scale=function(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n},$n.scaleAndAdd=function(n,e,r,i){return n[0]=e[0]+r[0]*i,n[1]=e[1]+r[1]*i,n[2]=e[2]+r[2]*i,n[3]=e[3]+r[3]*i,n},$n.distance=qw,$n.squaredDistance=Ww,$n.length=Hw,$n.squaredLength=Zw,$n.negate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=-e[3],n},$n.inverse=function(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n[3]=1/e[3],n},$n.normalize=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=r*r+i*i+u*u+p*p;return h>0&&(h=1/Math.sqrt(h)),n[0]=r*h,n[1]=i*h,n[2]=u*h,n[3]=p*h,n},$n.dot=function(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]},$n.cross=function(n,e,r,i){var u=r[0]*i[1]-r[1]*i[0],p=r[0]*i[2]-r[2]*i[0],h=r[0]*i[3]-r[3]*i[0],b=r[1]*i[2]-r[2]*i[1],y=r[1]*i[3]-r[3]*i[1],x=r[2]*i[3]-r[3]*i[2],T=e[0],P=e[1],A=e[2],R=e[3];return n[0]=P*x-A*y+R*b,n[1]=-T*x+A*h-R*p,n[2]=T*y-P*h+R*u,n[3]=-T*b+P*p-A*u,n},$n.lerp=function(n,e,r,i){var u=e[0],p=e[1],h=e[2],b=e[3];return n[0]=u+i*(r[0]-u),n[1]=p+i*(r[1]-p),n[2]=h+i*(r[2]-h),n[3]=b+i*(r[3]-b),n},$n.random=function(n,e){var r,i,u,p,h,b;e=e||1;do h=(r=2*To.RANDOM()-1)*r+(i=2*To.RANDOM()-1)*i;while(h>=1);do b=(u=2*To.RANDOM()-1)*u+(p=2*To.RANDOM()-1)*p;while(b>=1);var y=Math.sqrt((1-h)/b);return n[0]=e*r,n[1]=e*i,n[2]=e*u*y,n[3]=e*p*y,n},$n.transformMat4=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3];return n[0]=r[0]*i+r[4]*u+r[8]*p+r[12]*h,n[1]=r[1]*i+r[5]*u+r[9]*p+r[13]*h,n[2]=r[2]*i+r[6]*u+r[10]*p+r[14]*h,n[3]=r[3]*i+r[7]*u+r[11]*p+r[15]*h,n},$n.transformQuat=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=r[0],b=r[1],y=r[2],x=r[3],T=x*i+b*p-y*u,P=x*u+y*i-h*p,A=x*p+h*u-b*i,R=-h*i-b*u-y*p;return n[0]=T*x+R*-h+P*-y-A*-b,n[1]=P*x+R*-b+A*-h-T*-y,n[2]=A*x+R*-y+T*-b-P*-h,n[3]=e[3],n},$n.zero=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n},$n.str=function(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},$n.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]},$n.equals=function(n,e){var r=n[0],i=n[1],u=n[2],p=n[3],h=e[0],b=e[1],y=e[2],x=e[3];return Math.abs(r-h)<=To.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-b)<=To.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(u-y)<=To.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(p-x)<=To.EPSILON*Math.max(1,Math.abs(p),Math.abs(x))},$n.forEach=$n.sqrLen=$n.len=$n.sqrDist=$n.dist=$n.div=$n.mul=$n.sub=void 0;var To=function(n,e){if(n&&n.__esModule)return n;if(n===null||Hy(n)!=="object"&&typeof n!="function")return{default:n};var r=jw(void 0);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}(Fr);function jw(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(jw=function(i){return i?r:e})(n)}function Uw(){var n=new To.ARRAY_TYPE(4);return To.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function Vw(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n[3]=e[3]-r[3],n}function Gw(n,e,r){return n[0]=e[0]*r[0],n[1]=e[1]*r[1],n[2]=e[2]*r[2],n[3]=e[3]*r[3],n}function $w(n,e,r){return n[0]=e[0]/r[0],n[1]=e[1]/r[1],n[2]=e[2]/r[2],n[3]=e[3]/r[3],n}function qw(n,e){return Math.hypot(e[0]-n[0],e[1]-n[1],e[2]-n[2],e[3]-n[3])}function Ww(n,e){var r=e[0]-n[0],i=e[1]-n[1],u=e[2]-n[2],p=e[3]-n[3];return r*r+i*i+u*u+p*p}function Hw(n){return Math.hypot(n[0],n[1],n[2],n[3])}function Zw(n){var e=n[0],r=n[1],i=n[2],u=n[3];return e*e+r*r+i*i+u*u}$n.sub=Vw,$n.mul=Gw,$n.div=$w,$n.dist=qw,$n.sqrDist=Ww,$n.len=Hw,$n.sqrLen=Zw;var FM=function(){var n=Uw();return function(e,r,i,u,p,h){var b,y;for(r||(r=4),i||(i=0),y=u?Math.min(u*r+i,e.length):e.length,b=i;b<y;b+=r)n[0]=e[b],n[1]=e[b+1],n[2]=e[b+2],n[3]=e[b+3],p(n,n,h),e[b]=n[0],e[b+1]=n[1],e[b+2]=n[2],e[b+3]=n[3];return e}}();function Zy(n){return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(n)}$n.forEach=FM,Object.defineProperty(zn,"__esModule",{value:!0}),zn.create=Yy,zn.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n},zn.setAxisAngle=Xw,zn.getAxisAngle=function(n,e){var r=2*Math.acos(e[3]),i=Math.sin(r/2);return i>Dd.EPSILON?(n[0]=e[0]/i,n[1]=e[1]/i,n[2]=e[2]/i):(n[0]=1,n[1]=0,n[2]=0),r},zn.getAngle=function(n,e){var r=n8(n,e);return Math.acos(2*r*r-1)},zn.multiply=Jw,zn.rotateX=function(n,e,r){r*=.5;var i=e[0],u=e[1],p=e[2],h=e[3],b=Math.sin(r),y=Math.cos(r);return n[0]=i*y+h*b,n[1]=u*y+p*b,n[2]=p*y-u*b,n[3]=h*y-i*b,n},zn.rotateY=function(n,e,r){r*=.5;var i=e[0],u=e[1],p=e[2],h=e[3],b=Math.sin(r),y=Math.cos(r);return n[0]=i*y-p*b,n[1]=u*y+h*b,n[2]=p*y+i*b,n[3]=h*y-u*b,n},zn.rotateZ=function(n,e,r){r*=.5;var i=e[0],u=e[1],p=e[2],h=e[3],b=Math.sin(r),y=Math.cos(r);return n[0]=i*y+u*b,n[1]=u*y-i*b,n[2]=p*y+h*b,n[3]=h*y-p*b,n},zn.calculateW=function(n,e){var r=e[0],i=e[1],u=e[2];return n[0]=r,n[1]=i,n[2]=u,n[3]=Math.sqrt(Math.abs(1-r*r-i*i-u*u)),n},zn.exp=Kw,zn.ln=Qw,zn.pow=function(n,e,r){return Qw(n,e),t8(n,n,r),Kw(n,n),n},zn.slerp=Rg,zn.random=function(n){var e=Dd.RANDOM(),r=Dd.RANDOM(),i=Dd.RANDOM(),u=Math.sqrt(1-e),p=Math.sqrt(e);return n[0]=u*Math.sin(2*Math.PI*r),n[1]=u*Math.cos(2*Math.PI*r),n[2]=p*Math.sin(2*Math.PI*i),n[3]=p*Math.cos(2*Math.PI*i),n},zn.invert=function(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=r*r+i*i+u*u+p*p,b=h?1/h:0;return n[0]=-r*b,n[1]=-i*b,n[2]=-u*b,n[3]=p*b,n},zn.conjugate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n},zn.fromMat3=e8,zn.fromEuler=function(n,e,r,i){var u=.5*Math.PI/180;e*=u,r*=u,i*=u;var p=Math.sin(e),h=Math.cos(e),b=Math.sin(r),y=Math.cos(r),x=Math.sin(i),T=Math.cos(i);return n[0]=p*y*T-h*b*x,n[1]=h*b*T+p*y*x,n[2]=h*y*x-p*b*T,n[3]=h*y*T+p*b*x,n},zn.str=function(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"},zn.setAxes=zn.sqlerp=zn.rotationTo=zn.equals=zn.exactEquals=zn.normalize=zn.sqrLen=zn.squaredLength=zn.len=zn.length=zn.lerp=zn.dot=zn.scale=zn.mul=zn.add=zn.set=zn.copy=zn.fromValues=zn.clone=void 0;var Dd=Mg(Fr),jM=Mg(_a),vl=Mg(Mn),Xi=Mg($n);function Yw(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Yw=function(i){return i?r:e})(n)}function Mg(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||Zy(n)!=="object"&&typeof n!="function")return{default:n};var r=Yw(e);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}function Yy(){var n=new Dd.ARRAY_TYPE(4);return Dd.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function Xw(n,e,r){r*=.5;var i=Math.sin(r);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(r),n}function Jw(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=r[0],y=r[1],x=r[2],T=r[3];return n[0]=i*T+h*b+u*x-p*y,n[1]=u*T+h*y+p*b-i*x,n[2]=p*T+h*x+i*y-u*b,n[3]=h*T-i*b-u*y-p*x,n}function Kw(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=Math.sqrt(r*r+i*i+u*u),b=Math.exp(p),y=h>0?b*Math.sin(h)/h:0;return n[0]=r*y,n[1]=i*y,n[2]=u*y,n[3]=b*Math.cos(h),n}function Qw(n,e){var r=e[0],i=e[1],u=e[2],p=e[3],h=Math.sqrt(r*r+i*i+u*u),b=h>0?Math.atan2(h,p)/h:0;return n[0]=r*b,n[1]=i*b,n[2]=u*b,n[3]=.5*Math.log(r*r+i*i+u*u+p*p),n}function Rg(n,e,r,i){var u,p,h,b,y,x=e[0],T=e[1],P=e[2],A=e[3],R=r[0],D=r[1],F=r[2],V=r[3];return(p=x*R+T*D+P*F+A*V)<0&&(p=-p,R=-R,D=-D,F=-F,V=-V),1-p>Dd.EPSILON?(u=Math.acos(p),h=Math.sin(u),b=Math.sin((1-i)*u)/h,y=Math.sin(i*u)/h):(b=1-i,y=i),n[0]=b*x+y*R,n[1]=b*T+y*D,n[2]=b*P+y*F,n[3]=b*A+y*V,n}function e8(n,e){var r,i=e[0]+e[4]+e[8];if(i>0)r=Math.sqrt(i+1),n[3]=.5*r,n[0]=(e[5]-e[7])*(r=.5/r),n[1]=(e[6]-e[2])*r,n[2]=(e[1]-e[3])*r;else{var u=0;e[4]>e[0]&&(u=1),e[8]>e[3*u+u]&&(u=2);var p=(u+1)%3,h=(u+2)%3;r=Math.sqrt(e[3*u+u]-e[3*p+p]-e[3*h+h]+1),n[u]=.5*r,n[3]=(e[3*p+h]-e[3*h+p])*(r=.5/r),n[p]=(e[3*p+u]+e[3*u+p])*r,n[h]=(e[3*h+u]+e[3*u+h])*r}return n}zn.clone=Xi.clone,zn.fromValues=Xi.fromValues,zn.copy=Xi.copy,zn.set=Xi.set,zn.add=Xi.add,zn.mul=Jw;var t8=Xi.scale;zn.scale=t8;var n8=Xi.dot;zn.dot=n8,zn.lerp=Xi.lerp;var a8=Xi.length;zn.length=a8,zn.len=a8;var r8=Xi.squaredLength;zn.squaredLength=r8,zn.sqrLen=r8;var Xy=Xi.normalize;zn.normalize=Xy,zn.exactEquals=Xi.exactEquals,zn.equals=Xi.equals;var tc,s8,i8,UM=(tc=vl.create(),s8=vl.fromValues(1,0,0),i8=vl.fromValues(0,1,0),function(n,e,r){var i=vl.dot(e,r);return i<-.999999?(vl.cross(tc,s8,e),vl.len(tc)<1e-6&&vl.cross(tc,i8,e),vl.normalize(tc,tc),Xw(n,tc,Math.PI),n):i>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(vl.cross(tc,e,r),n[0]=tc[0],n[1]=tc[1],n[2]=tc[2],n[3]=1+i,Xy(n,n))});zn.rotationTo=UM;var Jy,Ky,VM=(Jy=Yy(),Ky=Yy(),function(n,e,r,i,u,p){return Rg(Jy,e,u,p),Rg(Ky,r,i,p),Rg(n,Jy,Ky,2*p*(1-p)),n});zn.sqlerp=VM;var nc,GM=(nc=jM.create(),function(n,e,r,i){return nc[0]=r[0],nc[3]=r[1],nc[6]=r[2],nc[1]=i[0],nc[4]=i[1],nc[7]=i[2],nc[2]=-e[0],nc[5]=-e[1],nc[8]=-e[2],Xy(n,e8(n,nc))});zn.setAxes=GM;var Yn={};function Qy(n){return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(n)}Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.create=function(){var n=new ii.ARRAY_TYPE(8);return ii.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[4]=0,n[5]=0,n[6]=0,n[7]=0),n[3]=1,n},Yn.clone=function(n){var e=new ii.ARRAY_TYPE(8);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e},Yn.fromValues=function(n,e,r,i,u,p,h,b){var y=new ii.ARRAY_TYPE(8);return y[0]=n,y[1]=e,y[2]=r,y[3]=i,y[4]=u,y[5]=p,y[6]=h,y[7]=b,y},Yn.fromRotationTranslationValues=function(n,e,r,i,u,p,h){var b=new ii.ARRAY_TYPE(8);b[0]=n,b[1]=e,b[2]=r,b[3]=i;var y=.5*u,x=.5*p,T=.5*h;return b[4]=y*i+x*r-T*e,b[5]=x*i+T*n-y*r,b[6]=T*i+y*e-x*n,b[7]=-y*n-x*e-T*r,b},Yn.fromRotationTranslation=l8,Yn.fromTranslation=function(n,e){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=.5*e[0],n[5]=.5*e[1],n[6]=.5*e[2],n[7]=0,n},Yn.fromRotation=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=0,n[5]=0,n[6]=0,n[7]=0,n},Yn.fromMat4=function(n,e){var r=xl.create();o8.getRotation(r,e);var i=new ii.ARRAY_TYPE(3);return o8.getTranslation(i,e),l8(n,r,i),n},Yn.copy=u8,Yn.identity=function(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n[6]=0,n[7]=0,n},Yn.set=function(n,e,r,i,u,p,h,b,y){return n[0]=e,n[1]=r,n[2]=i,n[3]=u,n[4]=p,n[5]=h,n[6]=b,n[7]=y,n},Yn.getDual=function(n,e){return n[0]=e[4],n[1]=e[5],n[2]=e[6],n[3]=e[7],n},Yn.setDual=function(n,e){return n[4]=e[0],n[5]=e[1],n[6]=e[2],n[7]=e[3],n},Yn.getTranslation=function(n,e){var r=e[4],i=e[5],u=e[6],p=e[7],h=-e[0],b=-e[1],y=-e[2],x=e[3];return n[0]=2*(r*x+p*h+i*y-u*b),n[1]=2*(i*x+p*b+u*h-r*y),n[2]=2*(u*x+p*y+r*b-i*h),n},Yn.translate=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=.5*r[0],y=.5*r[1],x=.5*r[2],T=e[4],P=e[5],A=e[6],R=e[7];return n[0]=i,n[1]=u,n[2]=p,n[3]=h,n[4]=h*b+u*x-p*y+T,n[5]=h*y+p*b-i*x+P,n[6]=h*x+i*y-u*b+A,n[7]=-i*b-u*y-p*x+R,n},Yn.rotateX=function(n,e,r){var i=-e[0],u=-e[1],p=-e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=b*h+T*i+y*p-x*u,A=y*h+T*u+x*i-b*p,R=x*h+T*p+b*u-y*i,D=T*h-b*i-y*u-x*p;return xl.rotateX(n,e,r),n[4]=P*(h=n[3])+D*(i=n[0])+A*(p=n[2])-R*(u=n[1]),n[5]=A*h+D*u+R*i-P*p,n[6]=R*h+D*p+P*u-A*i,n[7]=D*h-P*i-A*u-R*p,n},Yn.rotateY=function(n,e,r){var i=-e[0],u=-e[1],p=-e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=b*h+T*i+y*p-x*u,A=y*h+T*u+x*i-b*p,R=x*h+T*p+b*u-y*i,D=T*h-b*i-y*u-x*p;return xl.rotateY(n,e,r),n[4]=P*(h=n[3])+D*(i=n[0])+A*(p=n[2])-R*(u=n[1]),n[5]=A*h+D*u+R*i-P*p,n[6]=R*h+D*p+P*u-A*i,n[7]=D*h-P*i-A*u-R*p,n},Yn.rotateZ=function(n,e,r){var i=-e[0],u=-e[1],p=-e[2],h=e[3],b=e[4],y=e[5],x=e[6],T=e[7],P=b*h+T*i+y*p-x*u,A=y*h+T*u+x*i-b*p,R=x*h+T*p+b*u-y*i,D=T*h-b*i-y*u-x*p;return xl.rotateZ(n,e,r),n[4]=P*(h=n[3])+D*(i=n[0])+A*(p=n[2])-R*(u=n[1]),n[5]=A*h+D*u+R*i-P*p,n[6]=R*h+D*p+P*u-A*i,n[7]=D*h-P*i-A*u-R*p,n},Yn.rotateByQuatAppend=function(n,e,r){var i=r[0],u=r[1],p=r[2],h=r[3],b=e[0],y=e[1],x=e[2],T=e[3];return n[0]=b*h+T*i+y*p-x*u,n[1]=y*h+T*u+x*i-b*p,n[2]=x*h+T*p+b*u-y*i,n[3]=T*h-b*i-y*u-x*p,n[4]=(b=e[4])*h+(T=e[7])*i+(y=e[5])*p-(x=e[6])*u,n[5]=y*h+T*u+x*i-b*p,n[6]=x*h+T*p+b*u-y*i,n[7]=T*h-b*i-y*u-x*p,n},Yn.rotateByQuatPrepend=function(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=r[0],y=r[1],x=r[2],T=r[3];return n[0]=i*T+h*b+u*x-p*y,n[1]=u*T+h*y+p*b-i*x,n[2]=p*T+h*x+i*y-u*b,n[3]=h*T-i*b-u*y-p*x,n[4]=i*(T=r[7])+h*(b=r[4])+u*(x=r[6])-p*(y=r[5]),n[5]=u*T+h*y+p*b-i*x,n[6]=p*T+h*x+i*y-u*b,n[7]=h*T-i*b-u*y-p*x,n},Yn.rotateAroundAxis=function(n,e,r,i){if(Math.abs(i)<ii.EPSILON)return u8(n,e);var u=Math.hypot(r[0],r[1],r[2]);i*=.5;var p=Math.sin(i),h=p*r[0]/u,b=p*r[1]/u,y=p*r[2]/u,x=Math.cos(i),T=e[0],P=e[1],A=e[2],R=e[3];n[0]=T*x+R*h+P*y-A*b,n[1]=P*x+R*b+A*h-T*y,n[2]=A*x+R*y+T*b-P*h,n[3]=R*x-T*h-P*b-A*y;var D=e[4],F=e[5],V=e[6],Y=e[7];return n[4]=D*x+Y*h+F*y-V*b,n[5]=F*x+Y*b+V*h-D*y,n[6]=V*x+Y*y+D*b-F*h,n[7]=Y*x-D*h-F*b-V*y,n},Yn.add=function(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n[3]=e[3]+r[3],n[4]=e[4]+r[4],n[5]=e[5]+r[5],n[6]=e[6]+r[6],n[7]=e[7]+r[7],n},Yn.multiply=d8,Yn.scale=function(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n},Yn.lerp=function(n,e,r,i){var u=1-i;return p8(e,r)<0&&(i=-i),n[0]=e[0]*u+r[0]*i,n[1]=e[1]*u+r[1]*i,n[2]=e[2]*u+r[2]*i,n[3]=e[3]*u+r[3]*i,n[4]=e[4]*u+r[4]*i,n[5]=e[5]*u+r[5]*i,n[6]=e[6]*u+r[6]*i,n[7]=e[7]*u+r[7]*i,n},Yn.invert=function(n,e){var r=kg(e);return n[0]=-e[0]/r,n[1]=-e[1]/r,n[2]=-e[2]/r,n[3]=e[3]/r,n[4]=-e[4]/r,n[5]=-e[5]/r,n[6]=-e[6]/r,n[7]=e[7]/r,n},Yn.conjugate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n[4]=-e[4],n[5]=-e[5],n[6]=-e[6],n[7]=e[7],n},Yn.normalize=function(n,e){var r=kg(e);if(r>0){r=Math.sqrt(r);var i=e[0]/r,u=e[1]/r,p=e[2]/r,h=e[3]/r,b=e[4],y=e[5],x=e[6],T=e[7],P=i*b+u*y+p*x+h*T;n[0]=i,n[1]=u,n[2]=p,n[3]=h,n[4]=(b-i*P)/r,n[5]=(y-u*P)/r,n[6]=(x-p*P)/r,n[7]=(T-h*P)/r}return n},Yn.str=function(n){return"quat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+")"},Yn.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]},Yn.equals=function(n,e){var r=n[0],i=n[1],u=n[2],p=n[3],h=n[4],b=n[5],y=n[6],x=n[7],T=e[0],P=e[1],A=e[2],R=e[3],D=e[4],F=e[5],V=e[6],Y=e[7];return Math.abs(r-T)<=ii.EPSILON*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(i-P)<=ii.EPSILON*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(u-A)<=ii.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(p-R)<=ii.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(h-D)<=ii.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(b-F)<=ii.EPSILON*Math.max(1,Math.abs(b),Math.abs(F))&&Math.abs(y-V)<=ii.EPSILON*Math.max(1,Math.abs(y),Math.abs(V))&&Math.abs(x-Y)<=ii.EPSILON*Math.max(1,Math.abs(x),Math.abs(Y))},Yn.sqrLen=Yn.squaredLength=Yn.len=Yn.length=Yn.dot=Yn.mul=Yn.setReal=Yn.getReal=void 0;var ii=e4(Fr),xl=e4(zn),o8=e4(Rn);function c8(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(c8=function(i){return i?r:e})(n)}function e4(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||Qy(n)!=="object"&&typeof n!="function")return{default:n};var r=c8(e);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}function l8(n,e,r){var i=.5*r[0],u=.5*r[1],p=.5*r[2],h=e[0],b=e[1],y=e[2],x=e[3];return n[0]=h,n[1]=b,n[2]=y,n[3]=x,n[4]=i*x+u*y-p*b,n[5]=u*x+p*h-i*y,n[6]=p*x+i*b-u*h,n[7]=-i*h-u*b-p*y,n}function u8(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n}function d8(n,e,r){var i=e[0],u=e[1],p=e[2],h=e[3],b=r[4],y=r[5],x=r[6],T=r[7],P=e[4],A=e[5],R=e[6],D=e[7],F=r[0],V=r[1],Y=r[2],ie=r[3];return n[0]=i*ie+h*F+u*Y-p*V,n[1]=u*ie+h*V+p*F-i*Y,n[2]=p*ie+h*Y+i*V-u*F,n[3]=h*ie-i*F-u*V-p*Y,n[4]=i*T+h*b+u*x-p*y+P*ie+D*F+A*Y-R*V,n[5]=u*T+h*y+p*b-i*x+A*ie+D*V+R*F-P*Y,n[6]=p*T+h*x+i*y-u*b+R*ie+D*Y+P*V-A*F,n[7]=h*T-i*b-u*y-p*x+D*ie-P*F-A*V-R*Y,n}Yn.getReal=xl.copy,Yn.setReal=xl.copy,Yn.mul=d8;var p8=xl.dot;Yn.dot=p8;var f8=xl.length;Yn.length=f8,Yn.len=f8;var kg=xl.squaredLength;Yn.squaredLength=kg,Yn.sqrLen=kg;var Un={};function t4(n){return t4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t4(n)}Object.defineProperty(Un,"__esModule",{value:!0}),Un.create=m8,Un.clone=function(n){var e=new Od.ARRAY_TYPE(2);return e[0]=n[0],e[1]=n[1],e},Un.fromValues=function(n,e){var r=new Od.ARRAY_TYPE(2);return r[0]=n,r[1]=e,r},Un.copy=function(n,e){return n[0]=e[0],n[1]=e[1],n},Un.set=function(n,e,r){return n[0]=e,n[1]=r,n},Un.add=function(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n},Un.subtract=g8,Un.multiply=b8,Un.divide=_8,Un.ceil=function(n,e){return n[0]=Math.ceil(e[0]),n[1]=Math.ceil(e[1]),n},Un.floor=function(n,e){return n[0]=Math.floor(e[0]),n[1]=Math.floor(e[1]),n},Un.min=function(n,e,r){return n[0]=Math.min(e[0],r[0]),n[1]=Math.min(e[1],r[1]),n},Un.max=function(n,e,r){return n[0]=Math.max(e[0],r[0]),n[1]=Math.max(e[1],r[1]),n},Un.round=function(n,e){return n[0]=Math.round(e[0]),n[1]=Math.round(e[1]),n},Un.scale=function(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n},Un.scaleAndAdd=function(n,e,r,i){return n[0]=e[0]+r[0]*i,n[1]=e[1]+r[1]*i,n},Un.distance=y8,Un.squaredDistance=v8,Un.length=x8,Un.squaredLength=w8,Un.negate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n},Un.inverse=function(n,e){return n[0]=1/e[0],n[1]=1/e[1],n},Un.normalize=function(n,e){var r=e[0],i=e[1],u=r*r+i*i;return u>0&&(u=1/Math.sqrt(u)),n[0]=e[0]*u,n[1]=e[1]*u,n},Un.dot=function(n,e){return n[0]*e[0]+n[1]*e[1]},Un.cross=function(n,e,r){var i=e[0]*r[1]-e[1]*r[0];return n[0]=n[1]=0,n[2]=i,n},Un.lerp=function(n,e,r,i){var u=e[0],p=e[1];return n[0]=u+i*(r[0]-u),n[1]=p+i*(r[1]-p),n},Un.random=function(n,e){e=e||1;var r=2*Od.RANDOM()*Math.PI;return n[0]=Math.cos(r)*e,n[1]=Math.sin(r)*e,n},Un.transformMat2=function(n,e,r){var i=e[0],u=e[1];return n[0]=r[0]*i+r[2]*u,n[1]=r[1]*i+r[3]*u,n},Un.transformMat2d=function(n,e,r){var i=e[0],u=e[1];return n[0]=r[0]*i+r[2]*u+r[4],n[1]=r[1]*i+r[3]*u+r[5],n},Un.transformMat3=function(n,e,r){var i=e[0],u=e[1];return n[0]=r[0]*i+r[3]*u+r[6],n[1]=r[1]*i+r[4]*u+r[7],n},Un.transformMat4=function(n,e,r){var i=e[0],u=e[1];return n[0]=r[0]*i+r[4]*u+r[12],n[1]=r[1]*i+r[5]*u+r[13],n},Un.rotate=function(n,e,r,i){var u=e[0]-r[0],p=e[1]-r[1],h=Math.sin(i),b=Math.cos(i);return n[0]=u*b-p*h+r[0],n[1]=u*h+p*b+r[1],n},Un.angle=function(n,e){var r=n[0],i=n[1],u=e[0],p=e[1],h=Math.sqrt(r*r+i*i)*Math.sqrt(u*u+p*p);return Math.acos(Math.min(Math.max(h&&(r*u+i*p)/h,-1),1))},Un.zero=function(n){return n[0]=0,n[1]=0,n},Un.str=function(n){return"vec2("+n[0]+", "+n[1]+")"},Un.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]},Un.equals=function(n,e){var r=n[0],i=n[1],u=e[0],p=e[1];return Math.abs(r-u)<=Od.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-p)<=Od.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))},Un.forEach=Un.sqrLen=Un.sqrDist=Un.dist=Un.div=Un.mul=Un.sub=Un.len=void 0;var Od=function(n,e){if(n&&n.__esModule)return n;if(n===null||t4(n)!=="object"&&typeof n!="function")return{default:n};var r=h8(void 0);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}(Fr);function h8(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(h8=function(i){return i?r:e})(n)}function m8(){var n=new Od.ARRAY_TYPE(2);return Od.ARRAY_TYPE!=Float32Array&&(n[0]=0,n[1]=0),n}function g8(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n}function b8(n,e,r){return n[0]=e[0]*r[0],n[1]=e[1]*r[1],n}function _8(n,e,r){return n[0]=e[0]/r[0],n[1]=e[1]/r[1],n}function y8(n,e){return Math.hypot(e[0]-n[0],e[1]-n[1])}function v8(n,e){var r=e[0]-n[0],i=e[1]-n[1];return r*r+i*i}function x8(n){return Math.hypot(n[0],n[1])}function w8(n){var e=n[0],r=n[1];return e*e+r*r}Un.len=x8,Un.sub=g8,Un.mul=b8,Un.div=_8,Un.dist=y8,Un.sqrDist=v8,Un.sqrLen=w8;var $M=function(){var n=m8();return function(e,r,i,u,p,h){var b,y;for(r||(r=2),i||(i=0),y=u?Math.min(u*r+i,e.length):e.length,b=i;b<y;b+=r)n[0]=e[b],n[1]=e[b+1],p(n,n,h),e[b]=n[0],e[b+1]=n[1];return e}}();function n4(n){return n4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n4(n)}Un.forEach=$M,Object.defineProperty(Nr,"__esModule",{value:!0}),o.e=Nr.vec4=o.v=Nr.vec3=Nr.vec2=Nr.quat2=o.q=Nr.quat=o.m=Nr.mat4=o.bx=Nr.mat3=Nr.mat2d=o.h=Nr.mat2=Nr.glMatrix=void 0;var qM=Rc(Fr);Nr.glMatrix=qM;var WM=Rc(Ha);o.h=Nr.mat2=WM;var HM=Rc(Ka);Nr.mat2d=HM;var ZM=Rc(_a);o.bx=Nr.mat3=ZM;var YM=Rc(Rn);o.m=Nr.mat4=YM;var XM=Rc(zn);o.q=Nr.quat=XM;var JM=Rc(Yn);Nr.quat2=JM;var KM=Rc(Un);Nr.vec2=KM;var QM=Rc(Mn);o.v=Nr.vec3=QM;var eR=Rc($n);function S8(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(S8=function(i){return i?r:e})(n)}function Rc(n,e){if(!e&&n&&n.__esModule)return n;if(n===null||n4(n)!=="object"&&typeof n!="function")return{default:n};var r=S8(e);if(r&&r.has(n))return r.get(n);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in n)if(p!=="default"&&Object.prototype.hasOwnProperty.call(n,p)){var h=u?Object.getOwnPropertyDescriptor(n,p):null;h&&(h.get||h.set)?Object.defineProperty(i,p,h):i[p]=n[p]}return i.default=n,r&&r.set(n,i),i}o.e=Nr.vec4=eR;const tR=en([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Lg}=tR,T8=en([{name:"a_pos_3",components:3,type:"Int16"}]);var Fh=en([{name:"a_pos",type:"Int16",components:2}]),E8={};(function(n,e){(function(r){function i(p,h,b){var y=u(256*p,256*(h=Math.pow(2,b)-h-1),b),x=u(256*(p+1),256*(h+1),b);return y[0]+","+y[1]+","+x[0]+","+x[1]}function u(p,h,b){var y=2*Math.PI*6378137/256/Math.pow(2,b);return[p*y-2*Math.PI*6378137/2,h*y-2*Math.PI*6378137/2]}r.getURL=function(p,h,b,y,x,T){return T=T||{},p+"?"+["bbox="+i(b,y,x),"format="+(T.format||"image/png"),"service="+(T.service||"WMS"),"version="+(T.version||"1.1.1"),"request="+(T.request||"GetMap"),"srs="+(T.srs||"EPSG:3857"),"width="+(T.width||256),"height="+(T.height||256),"layers="+h].join("&")},r.getTileBBox=i,r.getMercCoords=u,Object.defineProperty(r,"__esModule",{value:!0})})(e)})(0,E8);var nR=E8;class Bd{constructor(e,r,i){this.z=e,this.x=r,this.y=i,this.key=jh(0,e,e,r,i)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const i=nR.getTileBBox(this.x,this.y,this.z),u=function(p,h,b){let y,x="";for(let T=p;T>0;T--)y=1<<T-1,x+=(h&y?1:0)+(b&y?2:0);return x}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",i)}toString(){return`${this.z}/${this.x}/${this.y}`}}class I8{constructor(e,r){this.wrap=e,this.canonical=r,this.key=jh(e,r.z,r.z,r.x,r.y)}}class Hr{constructor(e,r,i,u,p){this.overscaledZ=e,this.wrap=r,this.canonical=new Bd(i,+u,+p),this.key=r===0&&e===i?this.canonical.key:jh(r,e,i,u,p)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new Hr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hr(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return jh(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const i=this.canonical.z-e;return jh(this.wrap*+r,e,e,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.z<this.canonical.z&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new Hr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,i=2*this.canonical.x,u=2*this.canonical.y;return[new Hr(r,this.wrap,r,i,u),new Hr(r,this.wrap,r,i+1,u),new Hr(r,this.wrap,r,i,u+1),new Hr(r,this.wrap,r,i+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Hr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Hr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new I8(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function jh(n,e,r,i,u){const p=1<<Math.min(r,22);let h=p*(u%p)+i%p;return n&&r<22&&(h+=p*p*((n<0?-2*n-1:2*n)%(1<<2*(22-r)))),16*(32*h+r)+(e-r)}const aR=[n=>{let e=n.canonical.x-1,r=n.wrap;return e<0&&(e=(1<<n.canonical.z)-1,r--),new Hr(n.overscaledZ,r,n.canonical.z,e,n.canonical.y)},n=>{let e=n.canonical.x+1,r=n.wrap;return e===1<<n.canonical.z&&(e=0,r++),new Hr(n.overscaledZ,r,n.canonical.z,e,n.canonical.y)},n=>new Hr(n.overscaledZ,n.wrap,n.canonical.z,n.canonical.x,(n.canonical.y===0?1<<n.canonical.z:n.canonical.y)-1),n=>new Hr(n.overscaledZ,n.wrap,n.canonical.z,n.canonical.x,n.canonical.y===(1<<n.canonical.z)-1?0:n.canonical.y+1)];qt(Bd,"CanonicalTileID"),qt(Hr,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});class a4{constructor(e,r){this.pos=e,this.dir=r}intersectsPlane(e,r,i){const u=o.v.dot(r,this.dir);if(Math.abs(u)<1e-6)return!1;const p=((e[0]-this.pos[0])*r[0]+(e[1]-this.pos[1])*r[1]+(e[2]-this.pos[2])*r[2])/u;return i[0]=this.pos[0]+this.dir[0]*p,i[1]=this.pos[1]+this.dir[1]*p,i[2]=this.pos[2]+this.dir[2]*p,!0}closestPointOnSphere(e,r,i){if(o.v.equals(this.pos,e)||r===0)return i[0]=i[1]=i[2]=0,!1;const[u,p,h]=this.dir,b=this.pos[0]-e[0],y=this.pos[1]-e[1],x=this.pos[2]-e[2],T=u*u+p*p+h*h,P=2*(b*u+y*p+x*h),A=P*P-4*T*(b*b+y*y+x*x-r*r);if(A<0){const R=Math.max(-P/2,0),D=b+u*R,F=y+p*R,V=x+h*R,Y=Math.hypot(D,F,V);return i[0]=D*r/Y,i[1]=F*r/Y,i[2]=V*r/Y,!1}{const R=(-P-Math.sqrt(A))/(2*T);if(R<0){const D=Math.hypot(b,y,x);return i[0]=b*r/D,i[1]=y*r/D,i[2]=x*r/D,!1}return i[0]=b+u*R,i[1]=y+p*R,i[2]=x+h*R,!0}}}class r4{constructor(e,r,i,u,p){this.TL=e,this.TR=r,this.BR=i,this.BL=u,this.horizon=p}static fromInvProjectionMatrix(e,r,i){const u=[-1,1,1],p=[1,1,1],h=[1,-1,1],b=[-1,-1,1],y=o.v.transformMat4(u,u,e),x=o.v.transformMat4(p,p,e),T=o.v.transformMat4(h,h,e),P=o.v.transformMat4(b,b,e);return new r4(y,x,T,P,r/i)}}function Uh(n,e,r){let i=1/0,u=-1/0;const p=[];for(const h of n){o.v.sub(p,h,e);const b=o.v.dot(p,r);i=Math.min(i,b),u=Math.max(u,b)}return[i,u]}function P8(n,e){let r=!0;for(let i=0;i<n.planes.length;i++){const u=n.planes[i];let p=0;for(let h=0;h<e.length;h++)p+=o.v.dot(u,e[h])+u[3]>=0;if(p===0)return 0;p!==e.length&&(r=!1)}return r?2:1}function z8(n,e){for(const r of n.projections){const i=Uh(e,n.points[0],r.axis);if(r.projection[1]<i[0]||r.projection[0]>i[1])return 0}return 1}function A8(n,e){let r=0;const i=[0,0,0,0];for(let u=0;u<n.length;u++)i[0]=n[u][0],i[1]=n[u][1],i[2]=n[u][2],i[3]=1,o.e.dot(i,e)>=0&&r++;return r}class s4{constructor(e,r){this.points=e||new Array(8).fill([0,0,0]),this.planes=r||new Array(6).fill([0,0,0,0]),this.bounds=gr.fromPoints(this.points),this.projections=[],this.frustumEdges=[o.v.sub([],this.points[2],this.points[3]),o.v.sub([],this.points[0],this.points[3]),o.v.sub([],this.points[4],this.points[0]),o.v.sub([],this.points[5],this.points[1]),o.v.sub([],this.points[6],this.points[2]),o.v.sub([],this.points[7],this.points[3])];for(const i of this.frustumEdges){const u=[0,-i[2],i[1]],p=[i[2],0,-i[0]];this.projections.push({axis:u,projection:Uh(this.points,this.points[0],u)}),this.projections.push({axis:p,projection:Uh(this.points,this.points[0],p)})}}static fromInvProjectionMatrix(e,r,i,u){const p=Math.pow(2,i),h=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(x=>{const T=o.e.transformMat4([],x,e),P=1/T[3]/r*p;return o.e.mul(T,T,[P,P,u?1/T[3]:P,P])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(x=>{const T=o.v.sub([],h[x[0]],h[x[1]]),P=o.v.sub([],h[x[2]],h[x[1]]),A=o.v.normalize([],o.v.cross([],T,P)),R=-o.v.dot(A,h[x[1]]);return A.concat(R)}),y=[];for(let x=0;x<h.length;x++)y.push([h[x][0],h[x][1],h[x][2]]);return new s4(y,b)}intersectsPrecise(e,r,i){for(let u=0;u<r.length;u++)if(!A8(e,r[u]))return 0;for(let u=0;u<this.planes.length;u++)if(!A8(e,this.planes[u]))return 0;for(const u of i)for(const p of this.frustumEdges){const h=o.v.cross([],u,p),b=o.v.length(h);if(b===0)continue;o.v.scale(h,h,1/b);const y=Uh(this.points,this.points[0],h),x=Uh(e,this.points[0],h);if(y[0]>x[1]||x[0]>y[1])return 0}return 1}}class gr{static fromPoints(e){const r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0];for(const u of e)o.v.min(r,r,u),o.v.max(i,i,u);return new gr(r,i)}static fromTileIdAndHeight(e,r,i){const u=1<<e.canonical.z,p=e.canonical.x,h=e.canonical.y;return new gr([p/u,h/u,r],[(p+1)/u,(h+1)/u,i])}static applyTransform(e,r){const i=e.getCorners();for(let u=0;u<i.length;++u)o.v.transformMat4(i[u],i[u],r);return gr.fromPoints(i)}static projectAabbCorners(e,r){const i=e.getCorners();for(let u=0;u<i.length;++u)o.v.transformMat4(i[u],i[u],r);return i}constructor(e,r){this.min=e,this.max=r,this.center=o.v.scale([],o.v.add([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],i=o.v.clone(this.min),u=o.v.clone(this.max);for(let p=0;p<r.length;p++)i[p]=r[p]?this.min[p]:this.center[p],u[p]=r[p]?this.center[p]:this.max[p];return u[2]=this.max[2],new gr(i,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){return this.intersectsAabb(e.bounds)?P8(e,this.getCorners()):0}intersectsFlat(e){return this.intersectsAabb(e.bounds)?P8(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(e,r){return r||this.intersects(e)?z8(e,this.getCorners()):0}intersectsPreciseFlat(e,r){return r||this.intersectsFlat(e)?z8(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(e){for(let r=0;r<3;++r)if(this.min[r]>e.max[r]||e.min[r]>this.max[r])return!1;return!0}intersectsAabbXY(e){return!(this.min[0]>e.max[0]||e.min[0]>this.max[0]||this.min[1]>e.max[1]||e.min[1]>this.max[1])}encapsulate(e){for(let r=0;r<3;r++)this.min[r]=Math.min(this.min[r],e.min[r]),this.max[r]=Math.max(this.max[r],e.max[r])}encapsulatePoint(e){for(let r=0;r<3;r++)this.min[r]=Math.min(this.min[r],e[r]),this.max[r]=Math.max(this.max[r],e[r])}closestPoint(e){return[Math.max(Math.min(this.max[0],e[0]),this.min[0]),Math.max(Math.min(this.max[1],e[1]),this.min[1]),Math.max(Math.min(this.max[2],e[2]),this.min[2])]}}qt(gr,"Aabb");const i4=5,C8=6,Ji=vt/Math.PI/2,rR=16383,qp=64,o4=[qp,32,16],Eo=-Ji,Io=Ji,sR=[new gr([Eo,Eo,Eo],[Io,Io,Io]),new gr([Eo,Eo,Eo],[0,0,Io]),new gr([0,Eo,Eo],[Io,0,Io]),new gr([Eo,0,Eo],[0,Io,Io]),new gr([0,0,Eo],[Io,Io,Io])];function Dg(n){return n*Ji/$h}function M8(n,e,r,i=!0){const u=o.v.scale([],n._camera.position,n.worldSize),p=[e,r,1,1];o.e.transformMat4(p,p,n.pixelMatrixInverse),o.e.scale(p,p,1/p[3]);const h=o.v.sub([],p,u),b=o.v.normalize([],h),y=n.globeMatrix,x=[y[12],y[13],y[14]],T=o.v.sub([],x,u),P=o.v.length(T),A=o.v.normalize([],T),R=n.worldSize/(2*Math.PI),D=o.v.dot(A,b),F=Math.asin(R/P);if(F<Math.acos(D)){if(!i)return null;const je=[],at=[];o.v.scale(je,b,P/D),o.v.normalize(at,o.v.sub(at,je,T)),o.v.normalize(b,o.v.add(b,T,o.v.scale(b,at,Math.tan(F)*P)))}const V=[];new a4(u,b).closestPointOnSphere(x,R,V);const Y=o.v.normalize([],Ut(y,0)),ie=o.v.normalize([],Ut(y,1)),oe=o.v.normalize([],Ut(y,2)),le=o.v.dot(Y,V),he=o.v.dot(ie,V),_e=o.v.dot(oe,V),ze=Bt(Math.asin(-he/R));let De=Bt(Math.atan2(le,_e));De=n.center.lng+function(je,at){const _t=(at-je+180)%360-180;return _t<-180?_t+360:_t}(n.center.lng,De);const Ne=Lc(De),He=ke(Dc(ze),0,1);return new os(Ne,He)}class iR{constructor(e,r,i){this.a=o.v.sub([],e,i),this.b=o.v.sub([],r,i),this.center=i;const u=o.v.normalize([],this.a),p=o.v.normalize([],this.b);this.angle=Math.acos(o.v.dot(u,p))}}function c4(n,e){if(n.angle===0)return null;let r;return r=n.a[e]===0?1/n.angle*.5*Math.PI:1/n.angle*Math.atan(n.b[e]/n.a[e]/Math.sin(n.angle)-1/Math.tan(n.angle)),r<0||r>1?null:function(i,u,p,h){const b=Math.sin(p);return i*(Math.sin((1-h)*p)/b)+u*(Math.sin(h*p)/b)}(n.a[e],n.b[e],n.angle,ke(r,0,1))+n.center[e]}function kc(n){if(n.z<=1)return sR[n.z+2*n.y+n.x];const e=l4(Og(n));return gr.fromPoints(e)}function wl(n,e,r){return o.v.scale(n,n,1-r),o.v.scaleAndAdd(n,n,e,r)}function R8(n,e){const r=Sl(e.zoom);if(r===0)return kc(n);const i=Og(n),u=l4(i),p=Lc(i.getWest())*e.worldSize,h=Lc(i.getEast())*e.worldSize,b=Dc(i.getNorth())*e.worldSize,y=Dc(i.getSouth())*e.worldSize,x=[p,b,0],T=[h,b,0],P=[p,y,0],A=[h,y,0],R=o.m.invert([],e.globeMatrix);return o.v.transformMat4(x,x,R),o.v.transformMat4(T,T,R),o.v.transformMat4(P,P,R),o.v.transformMat4(A,A,R),u[0]=wl(u[0],P,r),u[1]=wl(u[1],A,r),u[2]=wl(u[2],T,r),u[3]=wl(u[3],x,r),gr.fromPoints(u)}function k8(n,e,r){for(const i of n)o.v.transformMat4(i,i,e),o.v.scale(i,i,r)}function L8(n,e,r,i){const u=e/n.worldSize,p=n.globeMatrix;if(r.z<=1){const Ne=kc(r).getCorners();return k8(Ne,p,u),gr.fromPoints(Ne)}const h=Og(r,i),b=l4(h);k8(b,p,u);const y=Number.MAX_VALUE,x=[-y,-y,-y],T=[y,y,y];if(h.contains(n.center)){for(const je of b)o.v.min(T,T,je),o.v.max(x,x,je);x[2]=0;const Ne=n.point,He=[Ne.x*u,Ne.y*u,0];return o.v.min(T,T,He),o.v.max(x,x,He),new gr(T,x)}const P=[p[12]*u,p[13]*u,p[14]*u],A=h.getCenter(),R=ke(n.center.lat,-pr,pr),D=ke(A.lat,-pr,pr),F=Lc(n.center.lng),V=Dc(R);let Y=F-Lc(A.lng);const ie=V-Dc(D);Y>.5?Y-=1:Y<-.5&&(Y+=1);let oe=0;if(Math.abs(Y)>Math.abs(ie))oe=Y>=0?1:3;else{oe=ie>=0?0:2;const Ne=[p[4]*u,p[5]*u,p[6]*u],He=-Math.sin(Ue(ie>=0?h.getSouth():h.getNorth()))*Ji;o.v.scaleAndAdd(P,P,Ne,He)}const le=b[oe],he=b[(oe+1)%4],_e=new iR(le,he,P),ze=[c4(_e,0)||le[0],c4(_e,1)||le[1],c4(_e,2)||le[2]],De=Sl(n.zoom);if(De>0){const Ne=function({x:je,y:at,z:_t},et,ht,Qe,Lt){const $t=1/(1<<_t);let bt=je*$t,hn=bt+$t,Ht=at*$t,At=Ht+$t,mn=0;const tn=(bt+hn)/2-Qe;return tn>.5?mn=-1:tn<-.5&&(mn=1),bt=((bt+mn)*et-(Qe*=et))*ht+Qe,hn=((hn+mn)*et-Qe)*ht+Qe,Ht=(Ht*et-(Lt*=et))*ht+Lt,At=(At*et-Lt)*ht+Lt,[[bt,At,0],[hn,At,0],[hn,Ht,0],[bt,Ht,0]]}(r,e,n._pixelsPerMercatorPixel,F,V);for(let je=0;je<b.length;je++)wl(b[je],Ne[je],De);const He=o.v.add([],Ne[oe],Ne[(oe+1)%4]);o.v.scale(He,He,.5),wl(ze,He,De)}for(const Ne of b)o.v.min(T,T,Ne),o.v.max(x,x,Ne);return T[2]=Math.min(le[2],he[2]),o.v.min(T,T,ze),o.v.max(x,x,ze),new gr(T,x)}function Og({x:n,y:e,z:r},i=!1){const u=1/(1<<r),p=new da(Ei(n*u),e===(1<<r)-1&&i?-90:Qr((e+1)*u)),h=new da(Ei((n+1)*u),e===0&&i?90:Qr(e*u));return new cu(p,h)}function l4(n){const e=Ue(n.getNorth()),r=Ue(n.getSouth()),i=Math.cos(e),u=Math.cos(r),p=Math.sin(e),h=Math.sin(r),b=n.getWest(),y=n.getEast();return[Wp(u,h,b),Wp(u,h,y),Wp(i,p,y),Wp(i,p,b)]}function Wp(n,e,r,i=Ji){return r=Ue(r),[n*Math.sin(r)*i,-e*i,n*Math.cos(r)*i]}function Nd(n,e,r){return Wp(Math.cos(Ue(n)),Math.sin(Ue(n)),e,r)}function Vh(n,e,r,i){const u=1<<r.z,p=(n/vt+r.x)/u;return Nd(Qr((e/vt+r.y)/u),Ei(p),i)}function Bg({min:n,max:e}){return rR/Math.max(e[0]-n[0],e[1]-n[1],e[2]-n[2])}const D8=new Float64Array(16);function Gh(n){const e=Bg(n),r=o.m.fromScaling(D8,[e,e,e]);return o.m.translate(r,r,o.v.negate([],n.min))}function u4(n){const e=o.m.fromTranslation(D8,n.min),r=1/Bg(n);return o.m.scale(e,e,[r,r,r])}function d4(n){const e=vt/(2*Math.PI);return n/(2*Math.PI)/e}function O8(n,e){return vt/(512*Math.pow(2,n))*Bg(kc(e))}function B8(n,e,r,i,u){const p=d4(r),h=[n,e,-r/(2*Math.PI)],b=o.m.identity(new Float64Array(16));return o.m.translate(b,b,h),o.m.scale(b,b,[p,p,p]),o.m.rotateX(b,b,Ue(-u)),o.m.rotateY(b,b,Ue(-i)),b}function Sl(n){return Ct(i4,C8,n)}function N8(n,e){const r=Nd(e.lat,e.lng),i=function(p){const h=Nd(p._center.lat,p._center.lng),b=o.v.fromValues(0,1,0);let y=o.v.cross([],b,h);const x=o.m.fromRotation([],-p.angle,h);y=o.v.transformMat4(y,y,x),o.m.fromRotation(x,-p._pitch,y);const T=o.v.normalize([],h);return o.v.scale(T,T,Dg(p.cameraToCenterDistance/p.pixelsPerMeter)),o.v.transformMat4(T,T,x),o.v.add([],h,T)}(n),u=o.v.subtract([],i,r);return o.v.angle(u,r)}function p4(n,e){return N8(n,e)>Math.PI/2*1.01}const F8=Ue(85),oR=Math.cos(F8),cR=Math.sin(F8),$h=63710088e-1,f4=2*Math.PI*$h;class uu{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new uu(Et(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,i=this.lat*r,u=e.lat*r,p=Math.sin(i)*Math.sin(u)+Math.cos(i)*Math.cos(u)*Math.cos((e.lng-this.lng)*r);return $h*Math.acos(Math.min(p,1))}toBounds(e=0){const r=360*e/40075017,i=r/Math.cos(Math.PI/180*this.lat);return new cu(new uu(this.lng-i,this.lat-r),new uu(this.lng+i,this.lat+r))}toEcef(e){const r=Dg(e);return Nd(this.lat,this.lng,Ji+r)}static convert(e){if(e instanceof uu)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new uu(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new uu(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var da=uu;const lR=0,uR=25.5;function h4(n){return f4*Math.cos(n*Math.PI/180)}function Lc(n){return(180+n)/360}function Dc(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function js(n,e){return n/h4(e)}function Ei(n){return 360*n-180}function Qr(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}function j8(n,e){return n*h4(Qr(e))}const pr=85.051129;function U8(n){return Math.cos(Ue(ke(n,-pr,pr)))}function Fd(n,e){const r=ke(e,lR,uR),i=Math.pow(2,r);return U8(n)*f4/(512*i)}function V8(n){return 1/Math.cos(n*Math.PI/180)}function Ng(n,e=0){const r=Math.exp(Math.PI*(1-(n.y+e/vt)/(1<<n.z)*2));return 80150034*r/(r*r+1)/vt/(1<<n.z)}class os{constructor(e,r,i=0){this.x=+e,this.y=+r,this.z=+i}static fromLngLat(e,r=0){const i=da.convert(e);return new os(Lc(i.lng),Dc(i.lat),js(r,i.lat))}toLngLat(){return new da(Ei(this.x),Qr(this.y))}toAltitude(){return j8(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/f4*V8(Qr(this.y))}}function m4(n,e,r,i,u,p,h,b,y){const x=(e+i)/2,T=(r+u)/2,P=new ge(x,T);b(P),function(A,R,D,F,V,Y){const ie=D-V,oe=F-Y;return Math.abs((F-R)*ie-(D-A)*oe)/Math.hypot(ie,oe)}(P.x,P.y,p.x,p.y,h.x,h.y)>=y?(m4(n,e,r,x,T,p,P,b,y),m4(n,x,T,i,u,P,h,b,y)):n.push(h)}function G8(n,e,r){let i=n[0],u=i.x,p=i.y;e(i);const h=[i];for(let b=1;b<n.length;b++){const y=n[b],{x,y:T}=y;e(y),m4(h,u,p,x,T,i,y,e,r),u=x,p=T,i=y}return h}function g4(n,e,r,i){if(i(e,r)){const u=e.add(r)._mult(.5);g4(n,e,u,i),g4(n,u,r,i)}else n.push(r)}function dR(n,e){let r=n[0];const i=[r];for(let u=1;u<n.length;u++){const p=n[u];g4(i,r,p,e),r=p}return i}const b4=Math.pow(2,14)-1,$8=-b4-1;function pR(n,e){const r=Math.round(n.x*e),i=Math.round(n.y*e);return n.x=ke(r,$8,b4),n.y=ke(i,$8,b4),(r<n.x||r>n.x+1||i<n.y||i>n.y+1)&&Yt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),n}function Oc(n,e,r){const i=n.loadGeometry(),u=n.extent,p=vt/u;if(e&&r&&r.projection.isReprojectedInTileSpace){const h=1<<e.z,{scale:b,x:y,y:x,projection:T}=r,P=A=>{const R=Ei((e.x+A.x/u)/h),D=Qr((e.y+A.y/u)/h),F=T.project(R,D);A.x=(F.x*b-y)*u,A.y=(F.y*b-x)*u};for(let A=0;A<i.length;A++)if(n.type!==1)i[A]=G8(i[A],P,1);else{const R=[];for(const D of i[A])D.x<0||D.x>=u||D.y<0||D.y>=u||(P(D),R.push(D));i[A]=R}}for(const h of i)for(const b of h)pR(b,p);return i}function du(n,e){return{type:n.type,id:n.id,properties:n.properties,geometry:e?Oc(n):[]}}function Fg(n,e,r,i,u){n.emplaceBack(2*e+(i+1)/2,2*r+(u+1)/2)}function jg(n,e,r){n.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class _4{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new An,this.indexArray=new ba,this.segments=new Wa,this.programConfigurations=new ou(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,i,u){const p=this.layers[0],h=[];let b=null;p.type==="circle"&&(b=p.layout.get("circle-sort-key"));for(const{feature:x,id:T,index:P,sourceLayerIndex:A}of e){const R=this.layers[0]._featureFilter.needGeometry,D=du(x,R);if(!this.layers[0]._featureFilter.filter(new Ee(this.zoom),D,i))continue;const F=b?b.evaluate(D,{},i):void 0,V={id:T,properties:x.properties,type:x.type,sourceLayerIndex:A,index:P,geometry:R?D.geometry:Oc(x,i,u),patterns:{},sortKey:F};h.push(V)}b&&h.sort((x,T)=>x.sortKey-T.sortKey);let y=null;u.projection.name==="globe"&&(this.globeExtVertexArray=new Oa,y=u.projection);for(const x of h){const{geometry:T,index:P,sourceLayerIndex:A}=x,R=e[P].feature;this.addFeature(x,T,P,r.availableImages,i,y,r.brightness),r.featureIndex.insert(R,T,P,A,this.index)}}update(e,r,i,u,p){const h=Object.keys(e).length!==0;h&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,r,h?this.stateDependentLayers:this.layers,i,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,SM.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,TM.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,i,u,p,h,b){for(const y of r)for(const x of y){const T=x.x,P=x.y;if(T<0||T>=vt||P<0||P>=vt)continue;if(h){const D=h.projectTilePoint(T,P,p),F=h.upVector(p,T,P),V=this.globeExtVertexArray;jg(V,D,F),jg(V,D,F),jg(V,D,F),jg(V,D,F)}const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),R=A.vertexLength;Fg(this.layoutVertexArray,T,P,-1,-1),Fg(this.layoutVertexArray,T,P,1,-1),Fg(this.layoutVertexArray,T,P,1,1),Fg(this.layoutVertexArray,T,P,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+2,R+3),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},u,p,b)}}function q8(n,e){for(let r=0;r<n.length;r++)if(jd(e,n[r]))return!0;for(let r=0;r<e.length;r++)if(jd(n,e[r]))return!0;return!!y4(n,e)}function fR(n,e,r){return!!jd(n,e)||!!v4(e,n,r)}function W8(n,e){if(n.length===1)return Z8(e,n[0]);for(let r=0;r<e.length;r++){const i=e[r];for(let u=0;u<i.length;u++)if(jd(n,i[u]))return!0}for(let r=0;r<n.length;r++)if(Z8(e,n[r]))return!0;for(let r=0;r<e.length;r++)if(y4(n,e[r]))return!0;return!1}function hR(n,e,r){if(n.length>1){if(y4(n,e))return!0;for(let i=0;i<e.length;i++)if(v4(e[i],n,r))return!0}for(let i=0;i<n.length;i++)if(v4(n[i],e,r))return!0;return!1}function y4(n,e){if(n.length===0||e.length===0)return!1;for(let r=0;r<n.length-1;r++){const i=n[r],u=n[r+1];for(let p=0;p<e.length-1;p++)if(mR(i,u,e[p],e[p+1]))return!0}return!1}function mR(n,e,r,i){return it(n,r,i)!==it(e,r,i)&&it(n,e,r)!==it(n,e,i)}function v4(n,e,r){const i=r*r;if(e.length===1)return n.distSqr(e[0])<i;for(let u=1;u<e.length;u++)if(H8(n,e[u-1],e[u])<i)return!0;return!1}function H8(n,e,r){const i=e.distSqr(r);if(i===0)return n.distSqr(e);const u=((n.x-e.x)*(r.x-e.x)+(n.y-e.y)*(r.y-e.y))/i;return n.distSqr(u<0?e:u>1?r:r.sub(e)._mult(u)._add(e))}function Z8(n,e){let r,i,u,p=!1;for(let h=0;h<n.length;h++){r=n[h];for(let b=0,y=r.length-1;b<r.length;y=b++)i=r[b],u=r[y],i.y>e.y!=u.y>e.y&&e.x<(u.x-i.x)*(e.y-i.y)/(u.y-i.y)+i.x&&(p=!p)}return p}function jd(n,e){let r=!1;for(let i=0,u=n.length-1;i<n.length;u=i++){const p=n[i],h=n[u];p.y>e.y!=h.y>e.y&&e.x<(h.x-p.x)*(e.y-p.y)/(h.y-p.y)+p.x&&(r=!r)}return r}function Y8(n,e,r,i,u){for(const h of n)if(e<=h.x&&r<=h.y&&i>=h.x&&u>=h.y)return!0;const p=[new ge(e,r),new ge(e,u),new ge(i,u),new ge(i,r)];if(n.length>2){for(const h of p)if(jd(n,h))return!0}for(let h=0;h<n.length-1;h++)if(gR(n[h],n[h+1],p))return!0;return!1}function gR(n,e,r){const i=r[0],u=r[2];if(n.x<i.x&&e.x<i.x||n.x>u.x&&e.x>u.x||n.y<i.y&&e.y<i.y||n.y>u.y&&e.y>u.y)return!1;const p=it(n,e,r[0]);return p!==it(n,e,r[1])||p!==it(n,e,r[2])||p!==it(n,e,r[3])}function Hp(n,e,r,i,u,p){let h=e.y-n.y,b=n.x-e.x;if(p=p||0){const y=h*h+b*b;if(y===0)return!0;const x=Math.sqrt(y);h/=x,b/=x}return!((r.x-n.x)*h+(r.y-n.y)*b-p<0||(i.x-n.x)*h+(i.y-n.y)*b-p<0||(u.x-n.x)*h+(u.y-n.y)*b-p<0)}function x4(n,e,r,i,u,p,h){return!(Hp(n,e,i,u,p,h)||Hp(e,r,i,u,p,h)||Hp(r,n,i,u,p,h)||Hp(i,u,n,e,r,h)||Hp(u,p,n,e,r,h)||Hp(p,i,n,e,r,h))}function Zp(n,e,r){const i=e.paint.get(n).value;return i.kind==="constant"?i.value:r.programConfigurations.get(e.id).getMaxValue(n)}function Ug(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function X8(n,e,r,i,u){if(!e[0]&&!e[1])return n;const p=ge.convert(e)._mult(u);r==="viewport"&&p._rotate(-i);const h=[];for(let b=0;b<n.length;b++)h.push(n[b].sub(p));return h}function J8(n,e,r,i){const u=ge.convert(n)._mult(i);return e==="viewport"&&u._rotate(-r),u}qt(_4,"CircleBucket",{omit:["layers"]});const bR=new ct({"circle-sort-key":new Fe(Ve.layout_circle["circle-sort-key"]),visibility:new be(Ve.layout_circle.visibility)});var _R={paint:new ct({"circle-radius":new Fe(Ve.paint_circle["circle-radius"]),"circle-color":new Fe(Ve.paint_circle["circle-color"]),"circle-blur":new Fe(Ve.paint_circle["circle-blur"]),"circle-opacity":new Fe(Ve.paint_circle["circle-opacity"]),"circle-translate":new be(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new be(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new be(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new be(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Fe(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Fe(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Fe(Ve.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new be(Ve.paint_circle["circle-emissive-strength"])}),layout:bR};const yR=o.m.create(),K8=n=>{const e=[];return n.paint.get("circle-pitch-alignment")==="map"&&e.push("PITCH_WITH_MAP"),n.paint.get("circle-pitch-scale")==="map"&&e.push("SCALE_WITH_MAP"),e};function Q8(n,e,r,i,u,p,h,b,y){if(p&&n.queryGeometry.isAboveHorizon)return!1;p&&(y*=n.pixelToTileUnitsFactor);const x=n.tileID.canonical,T=r.projection.upVectorScale(x,r.center.lat,r.worldSize).metersToTile;for(const P of e)for(const A of P){const R=A.add(b),D=u&&r.elevation?r.elevation.exaggeration()*u.getElevationAt(R.x,R.y,!0):0,F=r.projection.projectTilePoint(R.x,R.y,x);if(D>0){const oe=r.projection.upVector(x,R.x,R.y);F.x+=oe[0]*T*D,F.y+=oe[1]*T*D,F.z+=oe[2]*T*D}const V=p?R:vR(F.x,F.y,F.z,i),Y=p?n.tilespaceRays.map(oe=>wR(oe,D)):n.queryGeometry.screenGeometry,ie=o.e.transformMat4([],[F.x,F.y,F.z,1],i);if(!h&&p?y*=ie[3]/r.cameraToCenterDistance:h&&!p&&(y*=r.cameraToCenterDistance/ie[3]),p){const oe=Qr((A.y/vt+x.y)/(1<<x.z));y/=r.projection.pixelsPerMeter(oe,1)/js(1,oe)}if(fR(Y,V,y))return!0}return!1}function vR(n,e,r,i){const u=o.e.transformMat4([],[n,e,r,1],i);return new ge(u[0]/u[3],u[1]/u[3])}const e9=o.v.fromValues(0,0,0),xR=o.v.fromValues(0,0,1);function wR(n,e){const r=o.v.create();return e9[2]=e,n.intersectsPlane(e9,xR,r),new ge(r[0],r[1])}class t9 extends _4{}function n9(n,{width:e,height:r},i,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*r*i)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*r*i);return n.width=e,n.height=r,n.data=u,n}function a9(n,e,r){const{width:i,height:u}=e;i===n.width&&u===n.height||(w4(n,e,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,i),height:Math.min(n.height,u)},r),n.width=i,n.height=u,n.data=e.data)}function w4(n,e,r,i,u,p,h){if(u.width===0||u.height===0)return e;if(u.width>n.width||u.height>n.height||r.x>n.width-u.width||r.y>n.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||i.x>e.width-u.width||i.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const b=n.data,y=e.data,x=p===4&&h;for(let T=0;T<u.height;T++){const P=((r.y+T)*n.width+r.x)*p,A=((i.y+T)*e.width+i.x)*p;if(x)for(let R=0;R<u.width;R++){const D=P+R*p+3,F=A+R*p;y[F+0]=255,y[F+1]=255,y[F+2]=255,y[F+3]=b[D]}else for(let R=0;R<u.width*p;R++)y[A+R]=b[P+R]}return e}qt(t9,"HeatmapBucket",{omit:["layers"]});class Tl{constructor(e,r){n9(this,e,1,r)}resize(e){a9(this,new Tl(e),1)}clone(){return new Tl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,i,u,p){w4(e,r,i,u,p,1)}}class Ki{constructor(e,r){n9(this,e,4,r)}resize(e){a9(this,new Ki(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ki({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,i,u,p,h){w4(e,r,i,u,p,4,h)}}class r9{constructor(e,r){this.width=e.width,this.height=e.height,this.data=r instanceof Uint8Array?new Float32Array(r.buffer):r}}qt(Tl,"AlphaImage"),qt(Ki,"RGBAImage");const SR=new ct({visibility:new be(Ve.layout_heatmap.visibility)});var TR={paint:new ct({"heatmap-radius":new Fe(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Fe(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new be(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new mt(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new be(Ve.paint_heatmap["heatmap-opacity"])}),layout:SR};function Vg(n){const e={},r=n.resolution||256,i=n.clips?n.clips.length:1,u=n.image||new Ki({width:r,height:i}),p=(h,b,y)=>{e[n.evaluationKey]=y;const x=n.expression.evaluate(e);x&&(u.data[h+b+0]=Math.floor(255*x.r/x.a),u.data[h+b+1]=Math.floor(255*x.g/x.a),u.data[h+b+2]=Math.floor(255*x.b/x.a),u.data[h+b+3]=Math.floor(255*x.a))};if(n.clips)for(let h=0,b=0;h<i;++h,b+=4*r)for(let y=0,x=0;y<r;y++,x+=4){const T=y/(r-1),{start:P,end:A}=n.clips[h];p(b,x,P*(1-T)+A*T)}else for(let h=0,b=0;h<r;h++,b+=4)p(0,b,h/(r-1));return u}const ER=new ct({visibility:new be(Ve.layout_hillshade.visibility)});var IR={paint:new ct({"hillshade-illumination-direction":new be(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new be(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new be(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new be(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new be(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new be(Ve.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new be(Ve.paint_hillshade["hillshade-emissive-strength"])}),layout:ER};const PR=en([{name:"a_pos",components:2,type:"Int16"}],4),{members:zR}=PR;var S4={exports:{}};function Gg(n,e,r){r=r||2;var i,u,p,h,b,y,x,T=e&&e.length,P=T?e[0]*r:n.length,A=s9(n,0,P,r,!0),R=[];if(!A||A.next===A.prev)return R;if(T&&(A=function(F,V,Y,ie){var oe,le,he,_e=[];for(oe=0,le=V.length;oe<le;oe++)(he=s9(F,V[oe]*ie,oe<le-1?V[oe+1]*ie:F.length,ie,!1))===he.next&&(he.steiner=!0),_e.push(OR(he));for(_e.sort(kR),oe=0;oe<_e.length;oe++)Y=LR(_e[oe],Y);return Y}(n,e,A,r)),n.length>80*r){i=p=n[0],u=h=n[1];for(var D=r;D<P;D+=r)(b=n[D])<i&&(i=b),(y=n[D+1])<u&&(u=y),b>p&&(p=b),y>h&&(h=y);x=(x=Math.max(p-i,h-u))!==0?32767/x:0}return qh(A,R,r,i,u,x,0),R}function s9(n,e,r,i,u){var p,h;if(u===I4(n,e,r,i)>0)for(p=e;p<r;p+=i)h=c9(p,n[p],n[p+1],h);else for(p=r-i;p>=e;p-=i)h=c9(p,n[p],n[p+1],h);return h&&$g(h,h.next)&&(Hh(h),h=h.next),h}function Ud(n,e){if(!n)return n;e||(e=n);var r,i=n;do if(r=!1,i.steiner||!$g(i,i.next)&&Pr(i.prev,i,i.next)!==0)i=i.next;else{if(Hh(i),(i=e=i.prev)===i.next)break;r=!0}while(r||i!==e);return e}function qh(n,e,r,i,u,p,h){if(n){!h&&p&&function(T,P,A,R){var D=T;do D.z===0&&(D.z=T4(D.x,D.y,P,A,R)),D.prevZ=D.prev,D.nextZ=D.next,D=D.next;while(D!==T);D.prevZ.nextZ=null,D.prevZ=null,function(F){var V,Y,ie,oe,le,he,_e,ze,De=1;do{for(Y=F,F=null,le=null,he=0;Y;){for(he++,ie=Y,_e=0,V=0;V<De&&(_e++,ie=ie.nextZ);V++);for(ze=De;_e>0||ze>0&&ie;)_e!==0&&(ze===0||!ie||Y.z<=ie.z)?(oe=Y,Y=Y.nextZ,_e--):(oe=ie,ie=ie.nextZ,ze--),le?le.nextZ=oe:F=oe,oe.prevZ=le,le=oe;Y=ie}le.nextZ=null,De*=2}while(he>1)}(D)}(n,i,u,p);for(var b,y,x=n;n.prev!==n.next;)if(b=n.prev,y=n.next,p?CR(n,i,u,p):AR(n))e.push(b.i/r|0),e.push(n.i/r|0),e.push(y.i/r|0),Hh(n),n=y.next,x=y.next;else if((n=y)===x){h?h===1?qh(n=MR(Ud(n),e,r),e,r,i,u,p,2):h===2&&RR(n,e,r,i,u,p):qh(Ud(n),e,r,i,u,p,1);break}}}function AR(n){var e=n.prev,r=n,i=n.next;if(Pr(e,r,i)>=0)return!1;for(var u=e.x,p=r.x,h=i.x,b=e.y,y=r.y,x=i.y,T=u<p?u<h?u:h:p<h?p:h,P=b<y?b<x?b:x:y<x?y:x,A=u>p?u>h?u:h:p>h?p:h,R=b>y?b>x?b:x:y>x?y:x,D=i.next;D!==e;){if(D.x>=T&&D.x<=A&&D.y>=P&&D.y<=R&&Yp(u,b,p,y,h,x,D.x,D.y)&&Pr(D.prev,D,D.next)>=0)return!1;D=D.next}return!0}function CR(n,e,r,i){var u=n.prev,p=n,h=n.next;if(Pr(u,p,h)>=0)return!1;for(var b=u.x,y=p.x,x=h.x,T=u.y,P=p.y,A=h.y,R=b<y?b<x?b:x:y<x?y:x,D=T<P?T<A?T:A:P<A?P:A,F=b>y?b>x?b:x:y>x?y:x,V=T>P?T>A?T:A:P>A?P:A,Y=T4(R,D,e,r,i),ie=T4(F,V,e,r,i),oe=n.prevZ,le=n.nextZ;oe&&oe.z>=Y&&le&&le.z<=ie;){if(oe.x>=R&&oe.x<=F&&oe.y>=D&&oe.y<=V&&oe!==u&&oe!==h&&Yp(b,T,y,P,x,A,oe.x,oe.y)&&Pr(oe.prev,oe,oe.next)>=0||(oe=oe.prevZ,le.x>=R&&le.x<=F&&le.y>=D&&le.y<=V&&le!==u&&le!==h&&Yp(b,T,y,P,x,A,le.x,le.y)&&Pr(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;oe&&oe.z>=Y;){if(oe.x>=R&&oe.x<=F&&oe.y>=D&&oe.y<=V&&oe!==u&&oe!==h&&Yp(b,T,y,P,x,A,oe.x,oe.y)&&Pr(oe.prev,oe,oe.next)>=0)return!1;oe=oe.prevZ}for(;le&&le.z<=ie;){if(le.x>=R&&le.x<=F&&le.y>=D&&le.y<=V&&le!==u&&le!==h&&Yp(b,T,y,P,x,A,le.x,le.y)&&Pr(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function MR(n,e,r){var i=n;do{var u=i.prev,p=i.next.next;!$g(u,p)&&i9(u,i,i.next,p)&&Wh(u,p)&&Wh(p,u)&&(e.push(u.i/r|0),e.push(i.i/r|0),e.push(p.i/r|0),Hh(i),Hh(i.next),i=n=p),i=i.next}while(i!==n);return Ud(i)}function RR(n,e,r,i,u,p){var h=n;do{for(var b=h.next.next;b!==h.prev;){if(h.i!==b.i&&BR(h,b)){var y=o9(h,b);return h=Ud(h,h.next),y=Ud(y,y.next),qh(h,e,r,i,u,p,0),void qh(y,e,r,i,u,p,0)}b=b.next}h=h.next}while(h!==n)}function kR(n,e){return n.x-e.x}function LR(n,e){var r=function(u,p){var h,b=p,y=u.x,x=u.y,T=-1/0;do{if(x<=b.y&&x>=b.next.y&&b.next.y!==b.y){var P=b.x+(x-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(P<=y&&P>T&&(T=P,h=b.x<b.next.x?b:b.next,P===y))return h}b=b.next}while(b!==p);if(!h)return null;var A,R=h,D=h.x,F=h.y,V=1/0;b=h;do y>=b.x&&b.x>=D&&y!==b.x&&Yp(x<F?y:T,x,D,F,x<F?T:y,x,b.x,b.y)&&(A=Math.abs(x-b.y)/(y-b.x),Wh(b,u)&&(A<V||A===V&&(b.x>h.x||b.x===h.x&&DR(h,b)))&&(h=b,V=A)),b=b.next;while(b!==R);return h}(n,e);if(!r)return e;var i=o9(r,n);return Ud(i,i.next),Ud(r,r.next)}function DR(n,e){return Pr(n.prev,n,e.prev)<0&&Pr(e.next,n,n.next)<0}function T4(n,e,r,i,u){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*u|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*u|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function OR(n){var e=n,r=n;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==n);return r}function Yp(n,e,r,i,u,p,h,b){return(u-h)*(e-b)>=(n-h)*(p-b)&&(n-h)*(i-b)>=(r-h)*(e-b)&&(r-h)*(p-b)>=(u-h)*(i-b)}function BR(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(r,i){var u=r;do{if(u.i!==r.i&&u.next.i!==r.i&&u.i!==i.i&&u.next.i!==i.i&&i9(u,u.next,r,i))return!0;u=u.next}while(u!==r);return!1}(n,e)&&(Wh(n,e)&&Wh(e,n)&&function(r,i){var u=r,p=!1,h=(r.x+i.x)/2,b=(r.y+i.y)/2;do u.y>b!=u.next.y>b&&u.next.y!==u.y&&h<(u.next.x-u.x)*(b-u.y)/(u.next.y-u.y)+u.x&&(p=!p),u=u.next;while(u!==r);return p}(n,e)&&(Pr(n.prev,n,e.prev)||Pr(n,e.prev,e))||$g(n,e)&&Pr(n.prev,n,n.next)>0&&Pr(e.prev,e,e.next)>0)}function Pr(n,e,r){return(e.y-n.y)*(r.x-e.x)-(e.x-n.x)*(r.y-e.y)}function $g(n,e){return n.x===e.x&&n.y===e.y}function i9(n,e,r,i){var u=Wg(Pr(n,e,r)),p=Wg(Pr(n,e,i)),h=Wg(Pr(r,i,n)),b=Wg(Pr(r,i,e));return u!==p&&h!==b||!(u!==0||!qg(n,r,e))||!(p!==0||!qg(n,i,e))||!(h!==0||!qg(r,n,i))||!(b!==0||!qg(r,e,i))}function qg(n,e,r){return e.x<=Math.max(n.x,r.x)&&e.x>=Math.min(n.x,r.x)&&e.y<=Math.max(n.y,r.y)&&e.y>=Math.min(n.y,r.y)}function Wg(n){return n>0?1:n<0?-1:0}function Wh(n,e){return Pr(n.prev,n,n.next)<0?Pr(n,e,n.next)>=0&&Pr(n,n.prev,e)>=0:Pr(n,e,n.prev)<0||Pr(n,n.next,e)<0}function o9(n,e){var r=new E4(n.i,n.x,n.y),i=new E4(e.i,e.x,e.y),u=n.next,p=e.prev;return n.next=e,e.prev=n,r.next=u,u.prev=r,i.next=r,r.prev=i,p.next=i,i.prev=p,i}function c9(n,e,r,i){var u=new E4(n,e,r);return i?(u.next=i.next,u.prev=i,i.next.prev=u,i.next=u):(u.prev=u,u.next=u),u}function Hh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function E4(n,e,r){this.i=n,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I4(n,e,r,i){for(var u=0,p=e,h=r-i;p<r;p+=i)u+=(n[h]-n[p])*(n[p+1]+n[h+1]),h=p;return u}S4.exports=Gg,S4.exports.default=Gg,Gg.deviation=function(n,e,r,i){var u=e&&e.length,p=Math.abs(I4(n,0,u?e[0]*r:n.length,r));if(u)for(var h=0,b=e.length;h<b;h++)p-=Math.abs(I4(n,e[h]*r,h<b-1?e[h+1]*r:n.length,r));var y=0;for(h=0;h<i.length;h+=3){var x=i[h]*r,T=i[h+1]*r,P=i[h+2]*r;y+=Math.abs((n[x]-n[P])*(n[T+1]-n[x+1])-(n[x]-n[T])*(n[P+1]-n[x+1]))}return p===0&&y===0?0:Math.abs((y-p)/p)},Gg.flatten=function(n){for(var e=n[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,u=0;u<n.length;u++){for(var p=0;p<n[u].length;p++)for(var h=0;h<e;h++)r.vertices.push(n[u][p][h]);u>0&&r.holes.push(i+=n[u-1].length)}return r};var Hg=ee(S4.exports);function P4(n,e){const r=n.length;if(r<=1)return[n];const i=[];let u,p;for(let h=0;h<r;h++){const b=fe(n[h]);b!==0&&(n[h].area=Math.abs(b),p===void 0&&(p=b<0),p===b<0?(u&&i.push(u),u=[n[h]]):u.push(n[h]))}if(u&&i.push(u),e>1)for(let h=0;h<i.length;h++)i[h].length<=e||(el(i[h],e,1,i[h].length-1,NR),i[h]=i[h].slice(0,e));return i}function NR(n,e){return e.area-n.area}function z4(n,e,r){const i=r.patternDependencies;let u=!1;for(const p of e){const h=p.paint.get(`${n}-pattern`);h.isConstant()||(u=!0);const b=h.constantOr(null);b&&(u=!0,i[b]=!0)}return u}function A4(n,e,r,i,u){const p=u.patternDependencies;for(const h of e){const b=h.paint.get(`${n}-pattern`).value;if(b.kind!=="constant"){let y=b.evaluate({zoom:i},r,{},u.availableImages);y=y&&y.name?y.name:y,p[y]=!0,r.patterns[h.id]=y}}return r}class Zg{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new An,this.indexArray=new ba,this.indexArray2=new vs,this.programConfigurations=new ou(e.layers,e.zoom),this.segments=new Wa,this.segments2=new Wa,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}populate(e,r,i,u){this.hasPattern=z4("fill",this.layers,r);const p=this.layers[0].layout.get("fill-sort-key"),h=[];for(const{feature:b,id:y,index:x,sourceLayerIndex:T}of e){const P=this.layers[0]._featureFilter.needGeometry,A=du(b,P);if(!this.layers[0]._featureFilter.filter(new Ee(this.zoom),A,i))continue;const R=p?p.evaluate(A,{},i,r.availableImages):void 0,D={id:y,properties:b.properties,type:b.type,sourceLayerIndex:T,index:x,geometry:P?A.geometry:Oc(b,i,u),patterns:{},sortKey:R};h.push(D)}p&&h.sort((b,y)=>b.sortKey-y.sortKey);for(const b of h){const{geometry:y,index:x,sourceLayerIndex:T}=b;if(this.hasPattern){const P=A4("fill",this.layers,b,this.zoom,r);this.patternFeatures.push(P)}else this.addFeature(b,y,x,i,{},r.availableImages,r.brightness);r.featureIndex.insert(e[x].feature,y,x,T,this.index)}}update(e,r,i,u,p){const h=Object.keys(e).length!==0;h&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,r,h?this.stateDependentLayers:this.layers,i,u,p)}addFeatures(e,r,i,u,p,h){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,r,i,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zR),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,i,u,p,h=[],b){for(const y of P4(r,500)){let x=0;for(const F of y)x+=F.length;const T=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),P=T.vertexLength,A=[],R=[];for(const F of y){if(F.length===0)continue;F!==y[0]&&R.push(A.length/2);const V=this.segments2.prepareSegment(F.length,this.layoutVertexArray,this.indexArray2),Y=V.vertexLength;this.layoutVertexArray.emplaceBack(F[0].x,F[0].y),this.indexArray2.emplaceBack(Y+F.length-1,Y),A.push(F[0].x),A.push(F[0].y);for(let ie=1;ie<F.length;ie++)this.layoutVertexArray.emplaceBack(F[ie].x,F[ie].y),this.indexArray2.emplaceBack(Y+ie-1,Y+ie),A.push(F[ie].x),A.push(F[ie].y);V.vertexLength+=F.length,V.primitiveLength+=F.length}const D=Hg(A,R);for(let F=0;F<D.length;F+=3)this.indexArray.emplaceBack(P+D[F],P+D[F+1],P+D[F+2]);T.vertexLength+=x,T.primitiveLength+=D.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,h,u,b)}}qt(Zg,"FillBucket",{omit:["layers","patternFeatures"]});const FR=new ct({"fill-sort-key":new Fe(Ve.layout_fill["fill-sort-key"]),visibility:new be(Ve.layout_fill.visibility)});var jR={paint:new ct({"fill-antialias":new be(Ve.paint_fill["fill-antialias"]),"fill-opacity":new Fe(Ve.paint_fill["fill-opacity"]),"fill-color":new Fe(Ve.paint_fill["fill-color"]),"fill-outline-color":new Fe(Ve.paint_fill["fill-outline-color"]),"fill-translate":new be(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new be(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Fe(Ve.paint_fill["fill-pattern"]),"fill-emissive-strength":new be(Ve.paint_fill["fill-emissive-strength"])}),layout:FR};const UR=en([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),VR=en([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),GR=en([{name:"a_centroid_pos",components:2,type:"Uint16"}]),$R=en([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),qR=en([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:WR}=UR;var Yg={},HR=Ie,l9=Xp;function Xp(n,e,r,i,u){this.properties={},this.extent=r,this.type=0,this._pbf=n,this._geometry=-1,this._keys=i,this._values=u,n.readFields(ZR,this,e)}function ZR(n,e,r){n==1?e.id=r.readVarint():n==2?function(i,u){for(var p=i.readVarint()+i.pos;i.pos<p;){var h=u._keys[i.readVarint()],b=u._values[i.readVarint()];u.properties[h]=b}}(r,e):n==3?e.type=r.readVarint():n==4&&(e._geometry=r.pos)}function YR(n){for(var e,r,i=0,u=0,p=n.length,h=p-1;u<p;h=u++)i+=((r=n[h]).x-(e=n[u]).x)*(e.y+r.y);return i}Xp.types=["Unknown","Point","LineString","Polygon"],Xp.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var e,r=n.readVarint()+n.pos,i=1,u=0,p=0,h=0,b=[];n.pos<r;){if(u<=0){var y=n.readVarint();i=7&y,u=y>>3}if(u--,i===1||i===2)p+=n.readSVarint(),h+=n.readSVarint(),i===1&&(e&&b.push(e),e=[]),e.push(new HR(p,h));else{if(i!==7)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&b.push(e),b},Xp.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var e=n.readVarint()+n.pos,r=1,i=0,u=0,p=0,h=1/0,b=-1/0,y=1/0,x=-1/0;n.pos<e;){if(i<=0){var T=n.readVarint();r=7&T,i=T>>3}if(i--,r===1||r===2)(u+=n.readSVarint())<h&&(h=u),u>b&&(b=u),(p+=n.readSVarint())<y&&(y=p),p>x&&(x=p);else if(r!==7)throw new Error("unknown command "+r)}return[h,y,b,x]},Xp.prototype.toGeoJSON=function(n,e,r){var i,u,p=this.extent*Math.pow(2,r),h=this.extent*n,b=this.extent*e,y=this.loadGeometry(),x=Xp.types[this.type];function T(R){for(var D=0;D<R.length;D++){var F=R[D];R[D]=[360*(F.x+h)/p-180,360/Math.PI*Math.atan(Math.exp((180-360*(F.y+b)/p)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(i=0;i<y.length;i++)P[i]=y[i][0];T(y=P);break;case 2:for(i=0;i<y.length;i++)T(y[i]);break;case 3:for(y=function(R){var D=R.length;if(D<=1)return[R];for(var F,V,Y=[],ie=0;ie<D;ie++){var oe=YR(R[ie]);oe!==0&&(V===void 0&&(V=oe<0),V===oe<0?(F&&Y.push(F),F=[R[ie]]):F.push(R[ie]))}return F&&Y.push(F),Y}(y),i=0;i<y.length;i++)for(u=0;u<y[i].length;u++)T(y[i][u])}y.length===1?y=y[0]:x="Multi"+x;var A={type:"Feature",geometry:{type:x,coordinates:y},properties:this.properties};return"id"in this&&(A.id=this.id),A};var XR=l9,u9=d9;function d9(n,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(JR,this,e),this.length=this._features.length}function JR(n,e,r){n===15?e.version=r.readVarint():n===1?e.name=r.readString():n===5?e.extent=r.readVarint():n===2?e._features.push(r.pos):n===3?e._keys.push(r.readString()):n===4&&e._values.push(function(i){for(var u=null,p=i.readVarint()+i.pos;i.pos<p;){var h=i.readVarint()>>3;u=h===1?i.readString():h===2?i.readFloat():h===3?i.readDouble():h===4?i.readVarint64():h===5?i.readVarint():h===6?i.readSVarint():h===7?i.readBoolean():null}return u}(r))}d9.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var e=this._pbf.readVarint()+this._pbf.pos;return new XR(this._pbf,e,this.extent,this._keys,this._values)};var KR=u9;function QR(n,e,r){if(n===3){var i=new KR(r,r.readVarint()+r.pos);i.length&&(e[i.name]=i)}}var C4=Yg.VectorTile=function(n,e){this.layers=n.readFields(QR,{},e)},Xg=Yg.VectorTileFeature=l9;function Jg(n,e,r,i){const u=[],p=i===0?(h,b,y,x,T,P)=>{h.push(new ge(P,y+(P-b)/(x-b)*(T-y)))}:(h,b,y,x,T,P)=>{h.push(new ge(b+(P-y)/(T-y)*(x-b),P))};for(const h of n){const b=[];for(const y of h){if(y.length<=2)continue;const x=[];for(let A=0;A<y.length-1;A++){const R=y[A].x,D=y[A].y,F=y[A+1].x,V=y[A+1].y,Y=i===0?R:D,ie=i===0?F:V;Y<e?ie>e&&p(x,R,D,F,V,e):Y>r?ie<r&&p(x,R,D,F,V,r):x.push(y[A]),ie<e&&Y>=e&&p(x,R,D,F,V,e),ie>r&&Y<=r&&p(x,R,D,F,V,r)}let T=y[y.length-1];const P=i===0?T.x:T.y;P>=e&&P<=r&&x.push(T),x.length&&(T=x[x.length-1],x[0].x===T.x&&x[0].y===T.y||x.push(x[0]),b.push(x))}b.length&&u.push(b)}return u}Yg.VectorTileLayer=u9;class p9{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const i=e[r];this._stringToNumber[i]=r,this._numberToString[r]=i}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}var ek={read:function(n,e,r,i,u){var p,h,b=8*u-i-1,y=(1<<b)-1,x=y>>1,T=-7,P=r?u-1:0,A=r?-1:1,R=n[e+P];for(P+=A,p=R&(1<<-T)-1,R>>=-T,T+=b;T>0;p=256*p+n[e+P],P+=A,T-=8);for(h=p&(1<<-T)-1,p>>=-T,T+=i;T>0;h=256*h+n[e+P],P+=A,T-=8);if(p===0)p=1-x;else{if(p===y)return h?NaN:1/0*(R?-1:1);h+=Math.pow(2,i),p-=x}return(R?-1:1)*h*Math.pow(2,p-i)},write:function(n,e,r,i,u,p){var h,b,y,x=8*p-u-1,T=(1<<x)-1,P=T>>1,A=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=i?0:p-1,D=i?1:-1,F=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(b=isNaN(e)?1:0,h=T):(h=Math.floor(Math.log(e)/Math.LN2),e*(y=Math.pow(2,-h))<1&&(h--,y*=2),(e+=h+P>=1?A/y:A*Math.pow(2,1-P))*y>=2&&(h++,y/=2),h+P>=T?(b=0,h=T):h+P>=1?(b=(e*y-1)*Math.pow(2,u),h+=P):(b=e*Math.pow(2,P-1)*Math.pow(2,u),h=0));u>=8;n[r+R]=255&b,R+=D,b/=256,u-=8);for(h=h<<u|b,x+=u;x>0;n[r+R]=255&h,R+=D,h/=256,x-=8);n[r+R-D]|=128*F}},f9=Ba,Kg=ek;function Ba(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Ba.Varint=0,Ba.Fixed64=1,Ba.Bytes=2,Ba.Fixed32=5;var M4=4294967296,h9=1/M4,m9=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function El(n){return n.type===Ba.Bytes?n.readVarint()+n.pos:n.pos+1}function Jp(n,e,r){return r?4294967296*e+(n>>>0):4294967296*(e>>>0)+(n>>>0)}function g9(n,e,r){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(i);for(var u=r.pos-1;u>=n;u--)r.buf[u+i]=r.buf[u]}function tk(n,e){for(var r=0;r<n.length;r++)e.writeVarint(n[r])}function nk(n,e){for(var r=0;r<n.length;r++)e.writeSVarint(n[r])}function ak(n,e){for(var r=0;r<n.length;r++)e.writeFloat(n[r])}function rk(n,e){for(var r=0;r<n.length;r++)e.writeDouble(n[r])}function sk(n,e){for(var r=0;r<n.length;r++)e.writeBoolean(n[r])}function ik(n,e){for(var r=0;r<n.length;r++)e.writeFixed32(n[r])}function ok(n,e){for(var r=0;r<n.length;r++)e.writeSFixed32(n[r])}function ck(n,e){for(var r=0;r<n.length;r++)e.writeFixed64(n[r])}function lk(n,e){for(var r=0;r<n.length;r++)e.writeSFixed64(n[r])}function Qg(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+16777216*n[e+3]}function Kp(n,e,r){n[r]=e,n[r+1]=e>>>8,n[r+2]=e>>>16,n[r+3]=e>>>24}function b9(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+(n[e+3]<<24)}Ba.prototype={destroy:function(){this.buf=null},readFields:function(n,e,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),u=i>>3,p=this.pos;this.type=7&i,n(u,e,this),this.pos===p&&this.skip(i)}return e},readMessage:function(n,e){return this.readFields(n,e,this.readVarint()+this.pos)},readFixed32:function(){var n=Qg(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=b9(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=Qg(this.buf,this.pos)+Qg(this.buf,this.pos+4)*M4;return this.pos+=8,n},readSFixed64:function(){var n=Qg(this.buf,this.pos)+b9(this.buf,this.pos+4)*M4;return this.pos+=8,n},readFloat:function(){var n=Kg.read(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Kg.read(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var e,r,i=this.buf;return e=127&(r=i[this.pos++]),r<128?e:(e|=(127&(r=i[this.pos++]))<<7,r<128?e:(e|=(127&(r=i[this.pos++]))<<14,r<128?e:(e|=(127&(r=i[this.pos++]))<<21,r<128?e:function(u,p,h){var b,y,x=h.buf;if(b=(112&(y=x[h.pos++]))>>4,y<128||(b|=(127&(y=x[h.pos++]))<<3,y<128)||(b|=(127&(y=x[h.pos++]))<<10,y<128)||(b|=(127&(y=x[h.pos++]))<<17,y<128)||(b|=(127&(y=x[h.pos++]))<<24,y<128)||(b|=(1&(y=x[h.pos++]))<<31,y<128))return Jp(u,b,p);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=i[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,e=this.pos;return this.pos=n,n-e>=12&&m9?function(r,i,u){return m9.decode(r.subarray(i,u))}(this.buf,e,n):function(r,i,u){for(var p="",h=i;h<u;){var b,y,x,T=r[h],P=null,A=T>239?4:T>223?3:T>191?2:1;if(h+A>u)break;A===1?T<128&&(P=T):A===2?(192&(b=r[h+1]))==128&&(P=(31&T)<<6|63&b)<=127&&(P=null):A===3?(y=r[h+2],(192&(b=r[h+1]))==128&&(192&y)==128&&((P=(15&T)<<12|(63&b)<<6|63&y)<=2047||P>=55296&&P<=57343)&&(P=null)):A===4&&(y=r[h+2],x=r[h+3],(192&(b=r[h+1]))==128&&(192&y)==128&&(192&x)==128&&((P=(15&T)<<18|(63&b)<<12|(63&y)<<6|63&x)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,A=1):P>65535&&(P-=65536,p+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),p+=String.fromCharCode(P),h+=A}return p}(this.buf,e,n)},readBytes:function(){var n=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,n);return this.pos=n,e},readPackedVarint:function(n,e){if(this.type!==Ba.Bytes)return n.push(this.readVarint(e));var r=El(this);for(n=n||[];this.pos<r;)n.push(this.readVarint(e));return n},readPackedSVarint:function(n){if(this.type!==Ba.Bytes)return n.push(this.readSVarint());var e=El(this);for(n=n||[];this.pos<e;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Ba.Bytes)return n.push(this.readBoolean());var e=El(this);for(n=n||[];this.pos<e;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Ba.Bytes)return n.push(this.readFloat());var e=El(this);for(n=n||[];this.pos<e;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Ba.Bytes)return n.push(this.readDouble());var e=El(this);for(n=n||[];this.pos<e;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Ba.Bytes)return n.push(this.readFixed32());var e=El(this);for(n=n||[];this.pos<e;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Ba.Bytes)return n.push(this.readSFixed32());var e=El(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Ba.Bytes)return n.push(this.readFixed64());var e=El(this);for(n=n||[];this.pos<e;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Ba.Bytes)return n.push(this.readSFixed64());var e=El(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed64());return n},skip:function(n){var e=7&n;if(e===Ba.Varint)for(;this.buf[this.pos++]>127;);else if(e===Ba.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Ba.Fixed32)this.pos+=4;else{if(e!==Ba.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(n,e){this.writeVarint(n<<3|e)},realloc:function(n){for(var e=this.length||16;e<this.pos+n;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Kp(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Kp(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Kp(this.buf,-1&n,this.pos),Kp(this.buf,Math.floor(n*h9),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Kp(this.buf,-1&n,this.pos),Kp(this.buf,Math.floor(n*h9),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(e,r){var i,u;if(e>=0?(i=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,u=u+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(p,h,b){b.buf[b.pos++]=127&p|128,p>>>=7,b.buf[b.pos++]=127&p|128,p>>>=7,b.buf[b.pos++]=127&p|128,p>>>=7,b.buf[b.pos++]=127&p|128,b.buf[b.pos]=127&(p>>>=7)}(i,0,r),function(p,h){var b=(7&p)<<4;h.buf[h.pos++]|=b|((p>>>=3)?128:0),p&&(h.buf[h.pos++]=127&p|((p>>>=7)?128:0),p&&(h.buf[h.pos++]=127&p|((p>>>=7)?128:0),p&&(h.buf[h.pos++]=127&p|((p>>>=7)?128:0),p&&(h.buf[h.pos++]=127&p|((p>>>=7)?128:0),p&&(h.buf[h.pos++]=127&p)))))}(u,r)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var e=this.pos;this.pos=function(i,u,p){for(var h,b,y=0;y<u.length;y++){if((h=u.charCodeAt(y))>55295&&h<57344){if(!b){h>56319||y+1===u.length?(i[p++]=239,i[p++]=191,i[p++]=189):b=h;continue}if(h<56320){i[p++]=239,i[p++]=191,i[p++]=189,b=h;continue}h=b-55296<<10|h-56320|65536,b=null}else b&&(i[p++]=239,i[p++]=191,i[p++]=189,b=null);h<128?i[p++]=h:(h<2048?i[p++]=h>>6|192:(h<65536?i[p++]=h>>12|224:(i[p++]=h>>18|240,i[p++]=h>>12&63|128),i[p++]=h>>6&63|128),i[p++]=63&h|128)}return p}(this.buf,n,this.pos);var r=this.pos-e;r>=128&&g9(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(n){this.realloc(4),Kg.write(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Kg.write(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var e=n.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=n[r]},writeRawMessage:function(n,e){this.pos++;var r=this.pos;n(e,this);var i=this.pos-r;i>=128&&g9(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(n,e,r){this.writeTag(n,Ba.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(n,e){e.length&&this.writeMessage(n,tk,e)},writePackedSVarint:function(n,e){e.length&&this.writeMessage(n,nk,e)},writePackedBoolean:function(n,e){e.length&&this.writeMessage(n,sk,e)},writePackedFloat:function(n,e){e.length&&this.writeMessage(n,ak,e)},writePackedDouble:function(n,e){e.length&&this.writeMessage(n,rk,e)},writePackedFixed32:function(n,e){e.length&&this.writeMessage(n,ik,e)},writePackedSFixed32:function(n,e){e.length&&this.writeMessage(n,ok,e)},writePackedFixed64:function(n,e){e.length&&this.writeMessage(n,ck,e)},writePackedSFixed64:function(n,e){e.length&&this.writeMessage(n,lk,e)},writeBytesField:function(n,e){this.writeTag(n,Ba.Bytes),this.writeBytes(e)},writeFixed32Field:function(n,e){this.writeTag(n,Ba.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(n,e){this.writeTag(n,Ba.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(n,e){this.writeTag(n,Ba.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(n,e){this.writeTag(n,Ba.Fixed64),this.writeSFixed64(e)},writeVarintField:function(n,e){this.writeTag(n,Ba.Varint),this.writeVarint(e)},writeSVarintField:function(n,e){this.writeTag(n,Ba.Varint),this.writeSVarint(e)},writeStringField:function(n,e){this.writeTag(n,Ba.Bytes),this.writeString(e)},writeFloatField:function(n,e){this.writeTag(n,Ba.Fixed32),this.writeFloat(e)},writeDoubleField:function(n,e){this.writeTag(n,Ba.Fixed64),this.writeDouble(e)},writeBooleanField:function(n,e){this.writeVarintField(n,!!e)}};var e1=ee(f9);const uk=["tile","layer","source","sourceLayer","state"];class _9{constructor(e,r,i,u,p){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=i,this._y=u,this.properties=e.properties,this.id=p}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const r of uk)this[r]!==void 0&&(e[r]=this[r]);return e}}class dk{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,i){const u=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Fn(this.stateChanges[e][u],i),this.deletedStates[e]===null){this.deletedStates[e]={};for(const p in this.state[e])p!==u&&(this.deletedStates[e][p]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][u]===null){this.deletedStates[e][u]={};for(const p in this.state[e][u])i[p]||(this.deletedStates[e][u][p]=null)}else for(const p in i)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][p]===null&&delete this.deletedStates[e][u][p]}removeFeatureState(e,r,i){if(this.deletedStates[e]===null)return;const u=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&r!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][i]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(i in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][i]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,r){const i=String(r),u=Fn({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const p=this.deletedStates[e][r];if(p===null)return{};for(const h in p)delete u[h]}return u}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const i={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const p={};for(const h in this.stateChanges[u])this.state[u][h]||(this.state[u][h]={}),Fn(this.state[u][h],this.stateChanges[u][h]),p[h]=this.state[u][h];i[u]=p}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const p={};if(this.deletedStates[u]===null)for(const h in this.state[u])p[h]={},this.state[u][h]={};else for(const h in this.deletedStates[u]){if(this.deletedStates[u][h]===null)this.state[u][h]={};else if(this.state[u][h])for(const b of Object.keys(this.deletedStates[u][h]))delete this.state[u][h][b];p[h]=this.state[u][h]}i[u]=i[u]||{},Fn(i[u],p)}if(this.stateChanges={},this.deletedStates={},Object.keys(i).length!==0)for(const u in e)e[u].setFeatureState(i,r)}}class y9{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const i=this.toIdx(e,r);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function v9(n,e,r,i){let u=0,p=Number.MAX_VALUE;for(let h=0;h<3;h++)if(Math.abs(i[h])<1e-15){if(r[h]<n[h]||r[h]>e[h])return null}else{const b=1/i[h];let y=(n[h]-r[h])*b,x=(e[h]-r[h])*b;if(y>x){const T=y;y=x,x=T}if(y>u&&(u=y),x<p&&(p=x),u>p)return null}return u}function x9(n,e,r,i,u,p,h,b,y,x,T){const P=i-n,A=u-e,R=p-r,D=h-n,F=b-e,V=y-r,Y=T[1]*V-T[2]*F,ie=T[2]*D-T[0]*V,oe=T[0]*F-T[1]*D,le=P*Y+A*ie+R*oe;if(Math.abs(le)<1e-15)return null;const he=1/le,_e=x[0]-n,ze=x[1]-e,De=x[2]-r,Ne=(_e*Y+ze*ie+De*oe)*he;if(Ne<0||Ne>1)return null;const He=ze*R-De*A,je=De*P-_e*R,at=_e*A-ze*P,_t=(T[0]*He+T[1]*je+T[2]*at)*he;return _t<0||Ne+_t>1?null:(D*He+F*je+V*at)*he}function w9(n,e,r){return(n-e)/(r-e)}function S9(n,e,r,i,u,p,h,b,y){const x=1<<r,T=p-i,P=h-u,A=(n+1)/x*T+i,R=(e+0)/x*P+u,D=(e+1)/x*P+u;b[0]=(n+0)/x*T+i,b[1]=R,y[0]=A,y[1]=D}class T9{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(p){const h=Math.ceil(Math.log2(p.dim/8)),b=[];let y=Math.ceil(Math.pow(2,h));const x=1/y,T=(R,D,F,V,Y)=>{const ie=V?1:0,oe=(R+1)*F-ie,le=D*F,he=(D+1)*F-ie;Y[0]=R*F,Y[1]=le,Y[2]=oe,Y[3]=he};let P=new y9(y);const A=[];for(let R=0;R<y*y;R++){T(R%y,Math.floor(R/y),x,!1,A);const D=pu(A[0],A[1],p),F=pu(A[2],A[1],p),V=pu(A[2],A[3],p),Y=pu(A[0],A[3],p);P.minimums.push(Math.min(D,F,V,Y)),P.maximums.push(Math.max(D,F,V,Y)),P.leaves.push(1)}for(b.push(P),y/=2;y>=1;y/=2){const R=b[b.length-1];P=new y9(y);for(let D=0;D<y*y;D++){T(D%y,Math.floor(D/y),2,!0,A);const F=R.getElevation(A[0],A[1]),V=R.getElevation(A[2],A[1]),Y=R.getElevation(A[2],A[3]),ie=R.getElevation(A[0],A[3]),oe=R.isLeaf(A[0],A[1]),le=R.isLeaf(A[2],A[1]),he=R.isLeaf(A[2],A[3]),_e=R.isLeaf(A[0],A[3]),ze=Math.min(F.min,V.min,Y.min,ie.min),De=Math.max(F.max,V.max,Y.max,ie.max),Ne=oe&&le&&he&&_e;P.maximums.push(De),P.minimums.push(ze),P.leaves.push(De-ze<=5&&Ne?1:0)}b.push(P)}return b}(this.dem),i=r.length-1,u=r[i];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(r,0,0,i,0)}raycastRoot(e,r,i,u,p,h,b=1){return v9([e,r,-100],[i,u,this.maximums[0]*b],p,h)}raycast(e,r,i,u,p,h,b=1){if(!this.nodeCount)return null;const y=this.raycastRoot(e,r,i,u,p,h,b);if(y==null)return null;const x=[],T=[],P=[],A=[],R=[{idx:0,t:y,nodex:0,nodey:0,depth:0}];for(;R.length>0;){const{idx:D,t:F,nodex:V,nodey:Y,depth:ie}=R.pop();if(this.leaves[D]){S9(V,Y,ie,e,r,i,u,P,A);const le=1<<ie,he=(V+0)/le,_e=(V+1)/le,ze=(Y+0)/le,De=(Y+1)/le,Ne=pu(he,ze,this.dem)*b,He=pu(_e,ze,this.dem)*b,je=pu(_e,De,this.dem)*b,at=pu(he,De,this.dem)*b,_t=x9(P[0],P[1],Ne,A[0],P[1],He,A[0],A[1],je,p,h),et=x9(A[0],A[1],je,P[0],A[1],at,P[0],P[1],Ne,p,h),ht=Math.min(_t!==null?_t:Number.MAX_VALUE,et!==null?et:Number.MAX_VALUE);if(ht!==Number.MAX_VALUE)return ht;{const Qe=o.v.scaleAndAdd([],p,h,F);if(E9(Ne,He,at,je,w9(Qe[0],P[0],A[0]),w9(Qe[1],P[1],A[1]))>=Qe[2])return F}continue}let oe=0;for(let le=0;le<this._siblingOffset.length;le++){S9((V<<1)+this._siblingOffset[le][0],(Y<<1)+this._siblingOffset[le][1],ie+1,e,r,i,u,P,A),P[2]=-100,A[2]=this.maximums[this.childOffsets[D]+le]*b;const he=v9(P,A,p,h);if(he!=null){const _e=he;x[le]=_e;let ze=!1;for(let De=0;De<oe&&!ze;De++)_e>=x[T[De]]&&(T.splice(De,0,le),ze=!0);ze||(T[oe]=le),oe++}}for(let le=0;le<oe;le++){const he=T[le];R.push({idx:this.childOffsets[D]+he,t:x[he],nodex:(V<<1)+this._siblingOffset[he][0],nodey:(Y<<1)+this._siblingOffset[he][1],depth:ie+1})}}return null}_addNode(e,r,i){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,i,u,p){if(e[u].isLeaf(r,i)===1)return;this.childOffsets[p]||(this.childOffsets[p]=this.nodeCount);const h=u-1,b=e[h];let y=0,x=0;for(let T=0;T<this._siblingOffset.length;T++){const P=2*r+this._siblingOffset[T][0],A=2*i+this._siblingOffset[T][1],R=b.getElevation(P,A),D=b.isLeaf(P,A),F=this._addNode(R.min,R.max,D);D&&(y|=1<<T),x||(x=F)}for(let T=0;T<this._siblingOffset.length;T++)y&1<<T||this._construct(e,2*r+this._siblingOffset[T][0],2*i+this._siblingOffset[T][1],h,x+T)}}function E9(n,e,r,i,u,p){return On(On(n,r,p),On(e,i,p),u)}function pu(n,e,r){const i=r.dim,u=ke(n*i-.5,0,i-1),p=ke(e*i-.5,0,i-1),h=Math.floor(u),b=Math.floor(p),y=Math.min(h+1,i-1),x=Math.min(b+1,i-1);return E9(r.get(h,b),r.get(y,b),r.get(h,x),r.get(y,x),u-h,p-b)}const pk={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function fk(n,e,r){return(256*n*256+256*e+r)/10-1e4}function hk(n,e,r){return 256*n+e+r/256-32768}class t1{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,i,u=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(i&&i!=="mapbox"&&i!=="terrarium")return Yt(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const p=this.dim=r.height-2,h=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.floatView=new Float32Array(r.data.buffer),this.borderReady=u,this._modifiedForSources={},!u){for(let y=0;y<p;y++)h[this._idx(-1,y)]=h[this._idx(0,y)],h[this._idx(p,y)]=h[this._idx(p-1,y)],h[this._idx(y,-1)]=h[this._idx(y,0)],h[this._idx(y,p)]=h[this._idx(y,p-1)];h[this._idx(-1,-1)]=h[this._idx(0,0)],h[this._idx(p,-1)]=h[this._idx(p-1,0)],h[this._idx(-1,p)]=h[this._idx(0,p-1)],h[this._idx(p,p)]=h[this._idx(p-1,p-1)]}const b=i==="terrarium"?hk:fk;for(let y=0;y<h.length;++y){const x=4*y;this.floatView[y]=b(this.pixels[x],this.pixels[x+1],this.pixels[x+2])}this._timestamp=Gr.now()}_buildQuadTree(){this._tree=new T9(this)}get(e,r,i=!1){i&&(e=ke(e,-1,this.dim),r=ke(r,-1,this.dim));const u=this._idx(e,r);return this.floatView[u]}set(e,r,i){const u=this._idx(e,r),p=this.floatView[u];return this.floatView[u]=i,i-p}static getUnpackVector(e){return pk[e]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}static pack(e,r){const i=[0,0,0,0],u=t1.getUnpackVector(r);let p=Math.floor((e+u[3])/u[2]);return i[2]=p%256,p=Math.floor(p/256),i[1]=p%256,p=Math.floor(p/256),i[0]=p,i}getPixels(){return new r9({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=r*this.dim,p=r*this.dim+this.dim,h=i*this.dim,b=i*this.dim+this.dim;switch(r){case-1:u=p-1;break;case 1:p=u+1}switch(i){case-1:h=b-1;break;case 1:b=h+1}const y=-r*this.dim,x=-i*this.dim;for(let T=h;T<b;T++)for(let P=u;P<p;P++){const A=4*this._idx(P,T),R=4*this._idx(P+y,T+x);this.pixels[A+0]=e.pixels[R+0],this.pixels[A+1]=e.pixels[R+1],this.pixels[A+2]=e.pixels[R+2],this.pixels[A+3]=e.pixels[R+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}qt(t1,"DEMData"),qt(T9,"DemMinMaxQuadTree",{omit:["dem"]});class Qp{constructor(e,r,i){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=i}static create(e,r,i){const u=i||e.findDEMTileFor(r);if(!u||!u.dem)return;const p=u.dem,h=u.tileID,b=1<<r.canonical.z-h.canonical.z;return new Qp(u,p.dim/vt/b,[(r.canonical.x/b-h.canonical.x)*p.dim,(r.canonical.y/b-h.canonical.y)*p.dim])}tileCoordToPixel(e,r){const i=r*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),p=Math.floor(i);return new ge(u,p)}getElevationAt(e,r,i,u){const p=e*this._scale+this._offset[0],h=r*this._scale+this._offset[1],b=Math.floor(p),y=Math.floor(h),x=this._dem;return u=!!u,i?On(On(x.get(b,y,u),x.get(b,y+1,u),h-y),On(x.get(b+1,y,u),x.get(b+1,y+1,u),h-y),p-b):x.get(b,y,u)}getElevationAtPixel(e,r,i){return this._dem.get(e,r,!!i)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*js(1,e)*this._dem.stride}}class R4{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new su(vt,16,0),this.featureIndexArray=new tw,this.promoteId=r}insert(e,r,i,u,p,h=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,u,p,h);const y=this.grid;for(let x=0;x<r.length;x++){const T=r[x],P=[1/0,1/0,-1/0,-1/0];for(let A=0;A<T.length;A++){const R=T[A];P[0]=Math.min(P[0],R.x),P[1]=Math.min(P[1],R.y),P[2]=Math.max(P[2],R.x),P[3]=Math.max(P[3],R.y)}P[0]<vt&&P[1]<vt&&P[2]>=0&&P[3]>=0&&y.insert(b,P[0],P[1],P[2],P[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new C4(new e1(this.rawTileData)).layers,this.sourceLayerCoder=new p9(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r,i,u){this.loadVTLayers();const p=e.params||{},h=Np(p.filter),b=e.tileResult,y=e.transform,x=b.bufferedTilespaceBounds,T=this.grid.query(x.min.x,x.min.y,x.max.x,x.max.y,(D,F,V,Y)=>Y8(b.bufferedTilespaceGeometry,D,F,V,Y));T.sort(mk);let P=null;y.elevation&&T.length>0&&(P=Qp.create(y.elevation,this.tileID));const A={};let R;for(let D=0;D<T.length;D++){const F=T[D];if(F===R)continue;R=F;const V=this.featureIndexArray.get(F);let Y=null;this.loadMatchingFeature(A,V,h,p.layers,p.availableImages,r,i,u,(ie,oe,le,he=0)=>(Y||(Y=Oc(ie,this.tileID.canonical,e.tileTransform)),oe.queryIntersectsFeature(b,ie,le,Y,this.z,e.transform,e.pixelPosMatrix,P,he)))}return A}loadMatchingFeature(e,r,i,u,p,h,b,y,x){const{featureIndex:T,bucketIndex:P,sourceLayerIndex:A,layoutVertexArrayOffset:R}=r,D=this.bucketLayerIDs[P];if(u&&!function(ie,oe){for(let le=0;le<ie.length;le++)if(oe.indexOf(ie[le])>=0)return!0;return!1}(u,D))return;const F=this.sourceLayerCoder.decode(A),V=this.vtLayers[F].feature(T);if(i.needGeometry){const ie=du(V,!0);if(!i.filter(new Ee(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!i.filter(new Ee(this.tileID.overscaledZ),V))return;const Y=this.getId(V,F);for(let ie=0;ie<D.length;ie++){const oe=D[ie];if(u&&u.indexOf(oe)<0)continue;const le=h[oe];if(!le)continue;let he={};Y!==void 0&&y&&(he=y.getState(le.sourceLayer||"_geojsonTileLayer",Y));const _e=Fn({},b[oe]);_e.paint=I9(_e.paint,le.paint,V,he,p),_e.layout=I9(_e.layout,le.layout,V,he,p);const ze=!x||x(V,le,he,R);if(!ze)continue;const De=new _9(V,this.z,this.x,this.y,Y);De.layer=_e;let Ne=e[oe];Ne===void 0&&(Ne=e[oe]=[]),Ne.push({featureIndex:T,feature:De,intersectionZ:ze})}}lookupSymbolFeatures(e,r,i,u,p,h,b,y){const x={};this.loadVTLayers();const T=Np(p);for(const P of e)this.loadMatchingFeature(x,{bucketIndex:i,sourceLayerIndex:u,featureIndex:P,layoutVertexArrayOffset:0},T,h,b,y,r);return x}loadFeature(e){const{featureIndex:r,sourceLayerIndex:i}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(i),p=this.vtFeatures[u];if(p[r])return p[r];const h=this.vtLayers[u].feature(r);return p[r]=h,h}hasLayer(e){for(const r of this.bucketLayerIDs)for(const i of r)if(e===i)return!0;return!1}getId(e,r){let i=e.id;if(this.promoteId){const u=typeof this.promoteId=="string"?this.promoteId:this.promoteId[r];u!=null&&(i=e.properties[u]),typeof i=="boolean"&&(i=Number(i))}return i}}function I9(n,e,r,i,u){return vr(n,(p,h)=>{const b=e instanceof st?e.get(h):null;return b&&b.evaluate?b.evaluate(r,i,u):b})}function mk(n,e){return e-n}qt(R4,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const gk=en([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bk=en([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),_k=en([{name:"a_projected_pos",components:4,type:"Float32"}],4);en([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const yk=en([{name:"a_z_offset",components:1,type:"Float32"}],4),vk=en([{name:"a_texb",components:2,type:"Uint16"}]),xk=en([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),wk=en([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);en([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const P9=en([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Sk=en([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);en([{name:"triangle",components:3,type:"Uint16"}]),en([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),en([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),en([{type:"Float32",name:"offsetX"}]),en([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var es=24;const ac=128;function k4(n,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new Ee(n+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:i,interpolationType:u}=r;let p=0;for(;p<i.length&&i[p]<=n;)p++;p=Math.max(0,p-1);let h=p;for(;h<i.length&&i[h]<n+1;)h++;h=Math.min(i.length-1,h);const b=i[p],y=i[h];return r.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:y,interpolationType:u}:{kind:"camera",minZoom:b,maxZoom:y,minSize:r.evaluate(new Ee(b)),maxSize:r.evaluate(new Ee(y)),interpolationType:u}}}function n1(n,{uSize:e,uSizeT:r},{lowerSize:i,upperSize:u}){return n.kind==="source"?i/ac:n.kind==="composite"?On(i/ac,u/ac,r):e}function ef(n,e){let r=0,i=0;if(n.kind==="constant")i=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:u,minZoom:p,maxZoom:h}=n,b=u?ke(Os.interpolationFactor(u,e,p,h),0,1):0;n.kind==="camera"?i=On(n.minSize,n.maxSize,b):r=b}return{uSizeT:r,uSize:i}}var Tk=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ac,evaluateSizeForFeature:n1,evaluateSizeForZoom:ef,getSizeData:k4});function Ek(n,e,r){return n.sections.forEach(i=>{i.text=function(u,p,h){const b=p.layout.get("text-transform").evaluate(h,{});return b==="uppercase"?u=u.toLocaleUpperCase():b==="lowercase"&&(u=u.toLocaleLowerCase()),Ce.applyArabicShaping&&(u=Ce.applyArabicShaping(u)),u}(i.text,e,r)}),n}const Zh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function Ik(n){return n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""}function Pk(n){return n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""}const L4=3;function zk(n,e,r){e.glyphs=[],n===1&&r.readMessage(Ak,e)}function Ak(n,e,r){if(n===3){const{id:i,bitmap:u,width:p,height:h,left:b,top:y,advance:x}=r.readMessage(Ck,{});e.glyphs.push({id:i,bitmap:new Tl({width:p+2*L4,height:h+2*L4},u),metrics:{width:p,height:h,left:b,top:y,advance:x}})}else n===4?e.ascender=r.readSVarint():n===5&&(e.descender=r.readSVarint())}function Ck(n,e,r){n===1?e.id=r.readVarint():n===2?e.bitmap=r.readBytes():n===3?e.width=r.readVarint():n===4?e.height=r.readVarint():n===5?e.left=r.readSVarint():n===6?e.top=r.readSVarint():n===7&&(e.advance=r.readVarint())}const z9=L4,Qi={horizontal:1,vertical:2,horizontalOnly:3},A9=-17;class Yh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,r){const i=new Yh;return i.scale=e||1,i.fontStack=r,i}static forImage(e){const r=new Yh;return r.imageName=e,r}}class tf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const i=new tf;for(let u=0;u<e.sections.length;u++){const p=e.sections[u];p.image?i.addImageSection(p):i.addTextSection(p,r)}return i}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCodePoint(e){return this.text.codePointAt(e)}verticalizePunctuation(e){this.text=function(r,i){let u="";for(let p=0;p<r.length;p++){const h=r.charCodeAt(p+1)||null,b=r.charCodeAt(p-1)||null;u+=!i&&(h&&N(h)&&!Zh[r[p+1]]||b&&N(b)&&!Zh[r[p-1]])||!Zh[r[p]]?r[p]:Zh[r[p]]}return u}(this.text,e)}trim(){let e=0;for(let i=0;i<this.text.length&&a1[this.text.charCodeAt(i)];i++)e++;let r=this.text.length;for(let i=this.text.length-1;i>=0&&i>=e&&a1[this.text.charCodeAt(i)];i--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const i=new tf;return i.text=this.text.substring(e,r),i.sectionIndex=this.sectionIndex.slice(e,r),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push(Yh.forText(e.scale,e.fontStack||r));const i=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(i)}addImageSection(e){const r=e.image?e.image.namePrimary:"";if(r.length===0)return void Yt("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCodePoint(i),this.sections.push(Yh.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Yt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function D4(n,e,r,i,u,p,h,b,y,x,T,P,A,R,D){const F=tf.fromFeature(n,u);P===Qi.vertical&&F.verticalizePunctuation(A);let V=[];const Y=function(_e,ze,De,Ne,He,je){if(!_e)return[];const at=[],_t=function(Lt,$t,bt,hn,Ht,At){let mn=0;for(let tn=0;tn<Lt.length();tn++){const dn=Lt.getSection(tn);mn+=C9(Lt.getCodePoint(tn),dn,hn,Ht,$t,At)}return mn/Math.max(1,Math.ceil(mn/bt))}(_e,ze,De,Ne,He,je),et=_e.text.indexOf("")>=0;let ht=0;for(let Lt=0;Lt<_e.length();Lt++){const $t=_e.getSection(Lt),bt=_e.getCodePoint(Lt);if(a1[bt]||(ht+=C9(bt,$t,Ne,He,ze,je)),Lt<_e.length()-1){const hn=!((Qe=bt)<11904||!(v["Bopomofo Extended"](Qe)||v.Bopomofo(Qe)||v["CJK Compatibility Forms"](Qe)||v["CJK Compatibility Ideographs"](Qe)||v["CJK Compatibility"](Qe)||v["CJK Radicals Supplement"](Qe)||v["CJK Strokes"](Qe)||v["CJK Symbols and Punctuation"](Qe)||v["CJK Unified Ideographs Extension A"](Qe)||v["CJK Unified Ideographs"](Qe)||v["Enclosed CJK Letters and Months"](Qe)||v["Halfwidth and Fullwidth Forms"](Qe)||v.Hiragana(Qe)||v["Ideographic Description Characters"](Qe)||v["Kangxi Radicals"](Qe)||v["Katakana Phonetic Extensions"](Qe)||v.Katakana(Qe)||v["Vertical Forms"](Qe)||v["Yi Radicals"](Qe)||v["Yi Syllables"](Qe)));(Mk[bt]||hn||$t.imageName)&&at.push(R9(Lt+1,ht,_t,at,Rk(bt,_e.getCodePoint(Lt+1),hn&&et),!1))}}var Qe;return k9(R9(_e.length(),ht,_t,at,0,!0))}(F,x,p,e,i,R),{processBidirectionalText:ie,processStyledBidirectionalText:oe}=Ce;if(ie&&F.sections.length===1){const _e=ie(F.toString(),Y);for(const ze of _e){const De=new tf;De.text=ze,De.sections=F.sections;for(let Ne=0;Ne<ze.length;Ne++)De.sectionIndex.push(0);V.push(De)}}else if(oe){const _e=oe(F.text,F.sectionIndex,Y);for(const ze of _e){const De=new tf;De.text=ze[0],De.sectionIndex=ze[1],De.sections=F.sections,V.push(De)}}else V=function(_e,ze){const De=[],Ne=_e.text;let He=0;for(const je of ze)De.push(_e.substring(He,je)),He=je;return He<Ne.length&&De.push(_e.substring(He,Ne.length)),De}(F,Y);const le=[],he={positionedLines:le,text:F.toString(),top:T[1],bottom:T[1],left:T[0],right:T[0],writingMode:P,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(_e,ze,De,Ne,He,je,at,_t,et,ht,Qe,Lt){let $t=0,bt=0,hn=0;const Ht=_t==="right"?1:_t==="left"?0:.5;let At=!1;for(const Xn of He){const Cn=Xn.getSections();for(const Wn of Cn){if(Wn.imageName)continue;const ia=ze[Wn.fontStack];if(ia&&(At=ia.ascender!==void 0&&ia.descender!==void 0,!At))break}if(!At)break}let mn=0;for(const Xn of He){Xn.trim();const Cn=Xn.getMaxScale(),Wn=(Cn-1)*es,ia={positionedGlyphs:[],lineOffset:0};_e.positionedLines[mn]=ia;const za=ia.positionedGlyphs;let Nn=0;if(!Xn.length()){bt+=je,++mn;continue}let Na=0,Aa=0;for(let ga=0;ga<Xn.length();ga++){const oa=Xn.getSection(ga),ir=Xn.getSectionIndex(ga),Fa=Xn.getCodePoint(ga);let fr=oa.scale,jr=null,Us=null,br=null,ur=es,xs=0;const ws=!(et===Qi.horizontal||!Qe&&!k(Fa)||Qe&&(a1[Fa]||(tn=Fa,v.Arabic(tn)||v["Arabic Supplement"](tn)||v["Arabic Extended-A"](tn)||v["Arabic Presentation Forms-A"](tn)||v["Arabic Presentation Forms-B"](tn))));if(oa.imageName){const Vs=Ne[oa.imageName];if(!Vs)continue;br=oa.imageName,_e.iconsInText=_e.iconsInText||!0,Us=Vs.paddedRect;const ja=Vs.displaySize;fr=fr*es/Lt,jr={width:ja[0],height:ja[1],left:0,top:-z9,advance:ws?ja[1]:ja[0],localGlyph:!1},xs=At?-jr.height*fr:A9+Cn*es-ja[1]*fr,ur=jr.advance;const oc=(ws?ja[0]:ja[1])*fr-es*Cn;oc>0&&oc>Nn&&(Nn=oc)}else{const Vs=De[oa.fontStack];if(!Vs)continue;Vs[Fa]&&(Us=Vs[Fa]);const ja=ze[oa.fontStack];if(!ja)continue;const oc=ja.glyphs[Fa];if(!oc)continue;if(jr=oc.metrics,ur=Fa!==8203?es:0,At){const lf=ja.ascender!==void 0?Math.abs(ja.ascender):0,zl=ja.descender!==void 0?Math.abs(ja.descender):0,Al=(lf+zl)*fr;Na<Al&&(Na=Al,Aa=(lf-zl)/2*fr),xs=-lf*fr}else xs=A9+(Cn-fr)*es}ws?(_e.verticalizable=!0,za.push({glyph:Fa,imageName:br,x:$t,y:bt+xs,vertical:ws,scale:fr,localGlyph:jr.localGlyph,fontStack:oa.fontStack,sectionIndex:ir,metrics:jr,rect:Us}),$t+=ur*fr+ht):(za.push({glyph:Fa,imageName:br,x:$t,y:bt+xs,vertical:ws,scale:fr,localGlyph:jr.localGlyph,fontStack:oa.fontStack,sectionIndex:ir,metrics:jr,rect:Us}),$t+=jr.advance*fr+ht)}za.length!==0&&(hn=Math.max($t-ht,hn),At?L9(za,Ht,Nn,Aa,je*Cn/2):L9(za,Ht,Nn,0,je/2)),$t=0;const pa=je*Cn+Nn;ia.lineOffset=Math.max(Nn,Wn),bt+=pa,++mn}var tn;const dn=bt,{horizontalAlign:wt,verticalAlign:wn}=O4(at);(function(Xn,Cn,Wn,ia,za,Nn){const Na=(Cn-Wn)*za,Aa=-Nn*ia;for(const pa of Xn)for(const ga of pa.positionedGlyphs)ga.x+=Na,ga.y+=Aa})(_e.positionedLines,Ht,wt,wn,hn,dn),_e.top+=-wn*dn,_e.bottom=_e.top+dn,_e.left+=-wt*hn,_e.right=_e.left+hn,_e.hasBaseline=At}(he,e,r,i,V,h,b,y,P,x,A,D),!function(_e){for(const ze of _e)if(ze.positionedGlyphs.length!==0)return!1;return!0}(le)&&he}const a1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Mk={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function C9(n,e,r,i,u,p){if(e.imageName){const h=i[e.imageName];return h?h.displaySize[0]*e.scale*es/p+u:0}{const h=r[e.fontStack],b=h&&h.glyphs[n];return b?b.metrics.advance*e.scale+u:0}}function M9(n,e,r,i){const u=Math.pow(n-e,2);return i?n<e?u/2:2*u:u+Math.abs(r)*r}function Rk(n,e,r){let i=0;return n===10&&(i-=1e4),r&&(i+=150),n!==40&&n!==65288||(i+=50),e!==41&&e!==65289||(i+=50),i}function R9(n,e,r,i,u,p){let h=null,b=M9(e,r,u,p);for(const y of i){const x=M9(e-y.x,r,u,p)+y.badness;x<=b&&(h=y,b=x)}return{index:n,x:e,priorBreak:h,badness:b}}function k9(n){return n?k9(n.priorBreak).concat(n.index):[]}function O4(n){let e=.5,r=.5;switch(n){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function L9(n,e,r,i,u){if(!(e||r||i||u))return;const p=n.length-1,h=n[p],b=(h.x+h.metrics.advance*h.scale)*e;for(let y=0;y<=p;y++)n[y].x-=b,n[y].y+=r+i+u}function kk(n,e,r,i){const{horizontalAlign:u,verticalAlign:p}=O4(i),h=r[0]-n.displaySize[0]*u,b=r[1]-n.displaySize[1]*p;return{imagePrimary:n,imageSecondary:e,top:b,bottom:b+n.displaySize[1],left:h,right:h+n.displaySize[0]}}function D9(n,e,r,i,u,p){const h=n.imagePrimary;let b;if(h.content){const V=h.content,Y=h.pixelRatio||1;b=[V[0]/Y,V[1]/Y,h.displaySize[0]-V[2]/Y,h.displaySize[1]-V[3]/Y]}const y=e.left*p,x=e.right*p;let T,P,A,R;r==="width"||r==="both"?(R=u[0]+y-i[3],P=u[0]+x+i[1]):(R=u[0]+(y+x-h.displaySize[0])/2,P=R+h.displaySize[0]);const D=e.top*p,F=e.bottom*p;return r==="height"||r==="both"?(T=u[1]+D-i[0],A=u[1]+F+i[2]):(T=u[1]+(D+F-h.displaySize[1])/2,A=T+h.displaySize[1]),{imagePrimary:h,imageSecondary:void 0,top:T,right:P,bottom:A,left:R,collisionPadding:b}}class Il extends ge{constructor(e,r,i,u,p){super(e,r),this.angle=u,this.z=i,p!==void 0&&(this.segment=p)}clone(){return new Il(this.x,this.y,this.z,this.angle,this.segment)}}function O9(n,e,r,i,u){if(e.segment===void 0)return!0;let p=e,h=e.segment+1,b=0;for(;b>-r/2;){if(h--,h<0)return!1;b-=n[h].dist(p),p=n[h]}b+=n[h].dist(n[h+1]),h++;const y=[];let x=0;for(;b<r/2;){const T=n[h],P=n[h+1];if(!P)return!1;let A=n[h-1].angleTo(T)-T.angleTo(P);for(A=Math.abs((A+3*Math.PI)%(2*Math.PI)-Math.PI),y.push({distance:b,angleDelta:A}),x+=A;b-y[0].distance>i;)x-=y.shift().angleDelta;if(x>u)return!1;h++,b+=T.dist(P)}return!0}function B9(n){let e=0;for(let r=0;r<n.length-1;r++)e+=n[r].dist(n[r+1]);return e}function N9(n,e,r){return n?.6*e*r:0}function F9(n,e){return Math.max(n?n.right-n.left:0,e?e.right-e.left:0)}function Lk(n,e,r,i,u,p){const h=N9(r,u,p),b=F9(r,i)*p;let y=0;const x=B9(n)/2;for(let T=0;T<n.length-1;T++){const P=n[T],A=n[T+1],R=P.dist(A);if(y+R>x){const D=(x-y)/R,F=On(P.x,A.x,D),V=On(P.y,A.y,D),Y=new Il(F,V,0,A.angleTo(P),T);return!h||O9(n,Y,b,h,e)?Y:void 0}y+=R}}function Dk(n,e,r,i,u,p,h,b,y){const x=N9(i,p,h),T=F9(i,u),P=T*h,A=n[0].x===0||n[0].x===y||n[0].y===0||n[0].y===y;return e-P<e/4&&(e=P+e/4),j9(n,A?e/2*b%e:(T/2+2*p)*h*b%e,e,x,r,P,A,!1,y)}function j9(n,e,r,i,u,p,h,b,y){const x=p/2,T=B9(n);let P=0,A=e-r,R=[];for(let D=0;D<n.length-1;D++){const F=n[D],V=n[D+1],Y=F.dist(V),ie=V.angleTo(F);for(;A+r<P+Y;){A+=r;const oe=(A-P)/Y,le=On(F.x,V.x,oe),he=On(F.y,V.y,oe);if(le>=0&&le<y&&he>=0&&he<y&&A-x>=0&&A+x<=T){const _e=new Il(le,he,0,ie,D);i&&!O9(n,_e,p,i,u)||R.push(_e)}}P+=Y}return b||R.length||h||(R=j9(n,P/2,r,i,u,p,h,!0,y)),R}function U9(n,e,r,i,u){const p=[];for(let h=0;h<n.length;h++){const b=n[h];let y;for(let x=0;x<b.length-1;x++){let T=b[x],P=b[x+1];T.x<e&&P.x<e||(T.x<e?T=new ge(e,T.y+(e-T.x)/(P.x-T.x)*(P.y-T.y))._round():P.x<e&&(P=new ge(e,T.y+(e-T.x)/(P.x-T.x)*(P.y-T.y))._round()),T.y<r&&P.y<r||(T.y<r?T=new ge(T.x+(r-T.y)/(P.y-T.y)*(P.x-T.x),r)._round():P.y<r&&(P=new ge(T.x+(r-T.y)/(P.y-T.y)*(P.x-T.x),r)._round()),T.x>=i&&P.x>=i||(T.x>=i?T=new ge(i,T.y+(i-T.x)/(P.x-T.x)*(P.y-T.y))._round():P.x>=i&&(P=new ge(i,T.y+(i-T.x)/(P.x-T.x)*(P.y-T.y))._round()),T.y>=u&&P.y>=u||(T.y>=u?T=new ge(T.x+(u-T.y)/(P.y-T.y)*(P.x-T.x),u)._round():P.y>=u&&(P=new ge(T.x+(u-T.y)/(P.y-T.y)*(P.x-T.x),u)._round()),y&&T.equals(y[y.length-1])||(y=[T],p.push(y)),y.push(P)))))}}return p}function B4(n){let e=0,r=0;for(const h of n)e+=h.w*h.h,r=Math.max(r,h.w);n.sort((h,b)=>b.h-h.h);const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let u=0,p=0;for(const h of n)for(let b=i.length-1;b>=0;b--){const y=i[b];if(!(h.w>y.w||h.h>y.h)){if(h.x=y.x,h.y=y.y,p=Math.max(p,h.y+h.h),u=Math.max(u,h.x+h.w),h.w===y.w&&h.h===y.h){const x=i.pop();b<i.length&&(i[b]=x)}else h.h===y.h?(y.x+=h.w,y.w-=h.w):h.w===y.w?(y.y+=h.h,y.h-=h.h):(i.push({x:y.x+h.w,y:y.y,w:y.w-h.w,h:h.h}),y.y+=h.h,y.h-=h.h);break}}return{w:u,h:p,fill:e/(u*p)||0}}qt(Il,"Anchor");const Ii=1;class N4{constructor(e,{pixelRatio:r,version:i,stretchX:u,stretchY:p,content:h}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=u,this.stretchY=p,this.content=h,this.version=i}get tl(){return[this.paddedRect.x+Ii,this.paddedRect.y+Ii]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ii,this.paddedRect.y+this.paddedRect.h-Ii]}get displaySize(){return[(this.paddedRect.w-2*Ii)/this.pixelRatio,(this.paddedRect.h-2*Ii)/this.pixelRatio]}}class V9{constructor(e,r){const i={},u={};this.haveRenderCallbacks=[];const p=[];this.addImages(e,i,p),this.addImages(r,u,p);const{w:h,h:b}=B4(p),y=new Ki({width:h||1,height:b||1});for(const x in e){const T=e[x],P=i[x].paddedRect;Ki.copy(T.data,y,{x:0,y:0},{x:P.x+Ii,y:P.y+Ii},T.data,T.sdf)}for(const x in r){const T=r[x],P=u[x].paddedRect,A=P.x+Ii,R=P.y+Ii,D=T.data.width,F=T.data.height;Ki.copy(T.data,y,{x:0,y:0},{x:A,y:R},T.data),Ki.copy(T.data,y,{x:0,y:F-1},{x:A,y:R-1},{width:D,height:1}),Ki.copy(T.data,y,{x:0,y:0},{x:A,y:R+F},{width:D,height:1}),Ki.copy(T.data,y,{x:D-1,y:0},{x:A-1,y:R},{width:1,height:F}),Ki.copy(T.data,y,{x:0,y:0},{x:A+D,y:R},{width:1,height:F})}this.image=y,this.iconPositions=i,this.patternPositions=u}addImages(e,r,i){for(const u in e){const p=e[u],h={x:0,y:0,w:p.data.width+2*Ii,h:p.data.height+2*Ii};i.push(h),r[u]=new N4(h,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,r,i){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>e.hasImage(u,i)),e.dispatchRenderCallbacks(this.haveRenderCallbacks,i);for(const u in e.getUpdatedImages(i))this.patchUpdatedImage(this.iconPositions[u],e.getImage(u,i),r),this.patchUpdatedImage(this.patternPositions[u],e.getImage(u,i),r)}patchUpdatedImage(e,r,i){if(!e||!r||e.version===r.version)return;e.version=r.version;const[u,p]=e.tl,h=!!Object.keys(this.patternPositions).length;i.update(r.data,{useMipmap:h},{x:u,y:p})}}qt(N4,"ImagePosition"),qt(V9,"ImageAtlas");const Xh=1e20;function G9(n,e,r,i,u,p,h,b,y){for(let x=e;x<e+i;x++)$9(n,r*p+x,p,u,h,b,y);for(let x=r;x<r+u;x++)$9(n,x*p+e,1,i,h,b,y)}function $9(n,e,r,i,u,p,h){p[0]=0,h[0]=-Xh,h[1]=Xh,u[0]=n[e];for(let b=1,y=0,x=0;b<i;b++){u[b]=n[e+b*r];const T=b*b;do{const P=p[y];x=(u[b]-u[P]+T-P*P)/(b-P)/2}while(x<=h[y]&&--y>-1);y++,p[y]=b,h[y]=x,h[y+1]=Xh}for(let b=0,y=0;b<i;b++){for(;h[y+1]<b;)y++;const x=p[y],T=b-x;n[e+b*r]=u[x]+T*T}}const rc=2,F4={none:0,ideographs:1,all:2};class nf{constructor(e,r,i){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=i,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e,r){this.urls[r]=e}getGlyphs(e,r,i){const u=[],p=this.urls[r]||L.GLYPHS_URL;for(const h in e)for(const b of e[h])u.push({stack:h,id:b});Nt(u,({stack:h,id:b},y)=>{let x=this.entries[h];x||(x=this.entries[h]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=x.glyphs[b];if(T!==void 0)return void y(null,{stack:h,id:b,glyph:T});if(T=this._tinySDF(x,h,b),T)return x.glyphs[b]=T,void y(null,{stack:h,id:b,glyph:T});const P=Math.floor(b/256);if(256*P>65535)return void y(new Error("glyphs > 65535 not supported"));if(x.ranges[P])return void y(null,{stack:h,id:b,glyph:T});let A=x.requests[P];A||(A=x.requests[P]=[],nf.loadGlyphRange(h,P,p,this.requestManager,(R,D)=>{if(D){x.ascender=D.ascender,x.descender=D.descender;for(const F in D.glyphs)this._doesCharSupportLocalGlyph(+F)||(x.glyphs[+F]=D.glyphs[+F]);x.ranges[P]=!0}for(const F of A)F(R,D);delete x.requests[P]})),A.push((R,D)=>{R?y(R):D&&y(null,{stack:h,id:b,glyph:D.glyphs[b]||null})})},(h,b)=>{if(h)i(h);else if(b){const y={};for(const{stack:x,id:T,glyph:P}of b)y[x]===void 0&&(y[x]={}),y[x].glyphs===void 0&&(y[x].glyphs={}),y[x].glyphs[T]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics},y[x].ascender=this.entries[x].ascender,y[x].descender=this.entries[x].descender;i(null,y)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==F4.none&&(this.localGlyphMode===F4.all?!!this.localFontFamily:!!this.localFontFamily&&(v["CJK Unified Ideographs"](e)||v["Hangul Syllables"](e)||v.Hiragana(e)||v.Katakana(e)||v["CJK Symbols and Punctuation"](e)||v["CJK Unified Ideographs Extension A"](e)||v["CJK Unified Ideographs Extension B"](e)))}_tinySDF(e,r,i){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(i))return;let p=e.tinySDF;if(!p){let F="400";/bold/i.test(r)?F="900":/medium/i.test(r)?F="500":/light/i.test(r)&&(F="200"),p=e.tinySDF=new nf.TinySDF({fontFamily:u,fontWeight:F,fontSize:24*rc,buffer:3*rc,radius:8*rc}),p.fontWeight=F}if(this.localGlyphs[p.fontWeight][i])return this.localGlyphs[p.fontWeight][i];const h=String.fromCodePoint(i),{data:b,width:y,height:x,glyphWidth:T,glyphHeight:P,glyphLeft:A,glyphTop:R,glyphAdvance:D}=p.draw(h);return this.localGlyphs[p.fontWeight][i]={id:i,bitmap:new Tl({width:y,height:x},b),metrics:{width:T/rc,height:P/rc,left:A/rc,top:R/rc-27,advance:D/rc,localGlyph:!0}}}}nf.loadGlyphRange=function(n,e,r,i,u){const p=256*e,h=p+255,b=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",n).replace("{range}",`${p}-${h}`),Ua.Glyphs);It(b,(y,x)=>{if(y)u(y);else if(x){const T={},P=function(A){return new e1(A).readFields(zk,{})}(x);for(const A of P.glyphs)T[A.id]=A;u(null,{glyphs:T,ascender:P.ascender,descender:P.descender})}})},nf.TinySDF=class{constructor({fontSize:n=24,buffer:e=3,radius:r=8,cutoff:i=.25,fontFamily:u="sans-serif",fontWeight:p="normal",fontStyle:h="normal"}={}){this.buffer=e,this.cutoff=i,this.radius=r;const b=this.size=n+4*e,y=this._createCanvas(b),x=this.ctx=y.getContext("2d",{willReadFrequently:!0});x.font=`${h} ${p} ${n}px ${u}`,x.textBaseline="alphabetic",x.textAlign="left",x.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(n){const e=document.createElement("canvas");return e.width=e.height=n,e}draw(n){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:u,actualBoundingBoxRight:p}=this.ctx.measureText(n),h=Math.ceil(r),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(p-u))),y=Math.min(this.size-this.buffer,h+Math.ceil(i)),x=b+2*this.buffer,T=y+2*this.buffer,P=Math.max(x*T,0),A=new Uint8ClampedArray(P),R={data:A,width:x,height:T,glyphWidth:b,glyphHeight:y,glyphTop:h,glyphLeft:0,glyphAdvance:e};if(b===0||y===0)return R;const{ctx:D,buffer:F,gridInner:V,gridOuter:Y}=this;D.clearRect(F,F,b,y),D.fillText(n,F,F+h);const ie=D.getImageData(F,F,b,y);Y.fill(Xh,0,P),V.fill(0,0,P);for(let oe=0;oe<y;oe++)for(let le=0;le<b;le++){const he=ie.data[4*(oe*b+le)+3]/255;if(he===0)continue;const _e=(oe+F)*x+le+F;if(he===1)Y[_e]=0,V[_e]=Xh;else{const ze=.5-he;Y[_e]=ze>0?ze*ze:0,V[_e]=ze<0?ze*ze:0}}G9(Y,0,0,x,T,x,this.f,this.v,this.z),G9(V,F,F,b,y,x,this.f,this.v,this.z);for(let oe=0;oe<P;oe++){const le=Math.sqrt(Y[oe])-Math.sqrt(V[oe]);A[oe]=Math.round(255-255*(le/this.radius+this.cutoff))}return R}};const fu=Ii;function q9(n,e,r,i){const u=[],p=n.imagePrimary,h=p.pixelRatio,b=p.paddedRect.w-2*fu,y=p.paddedRect.h-2*fu,x=n.right-n.left,T=n.bottom-n.top,P=p.stretchX||[[0,b]],A=p.stretchY||[[0,y]],R=(je,at)=>je+at[1]-at[0],D=P.reduce(R,0),F=A.reduce(R,0),V=b-D,Y=y-F;let ie=0,oe=D,le=0,he=F,_e=0,ze=V,De=0,Ne=Y;if(p.content&&i){const je=p.content;ie=r1(P,0,je[0]),le=r1(A,0,je[1]),oe=r1(P,je[0],je[2]),he=r1(A,je[1],je[3]),_e=je[0]-ie,De=je[1]-le,ze=je[2]-je[0]-oe,Ne=je[3]-je[1]-he}const He=(je,at,_t,et)=>{const ht=s1(je.stretch-ie,oe,x,n.left),Qe=i1(je.fixed-_e,ze,je.stretch,D),Lt=s1(at.stretch-le,he,T,n.top),$t=i1(at.fixed-De,Ne,at.stretch,F),bt=s1(_t.stretch-ie,oe,x,n.left),hn=i1(_t.fixed-_e,ze,_t.stretch,D),Ht=s1(et.stretch-le,he,T,n.top),At=i1(et.fixed-De,Ne,et.stretch,F),mn=new ge(ht,Lt),tn=new ge(bt,Lt),dn=new ge(bt,Ht),wt=new ge(ht,Ht),wn=new ge(Qe/h,$t/h),Xn=new ge(hn/h,At/h),Cn=e*Math.PI/180;if(Cn){const Aa=Math.sin(Cn),pa=Math.cos(Cn),ga=[pa,-Aa,Aa,pa];mn._matMult(ga),tn._matMult(ga),wt._matMult(ga),dn._matMult(ga)}const Wn=je.stretch+je.fixed,ia=_t.stretch+_t.fixed,za=at.stretch+at.fixed,Nn=et.stretch+et.fixed,Na=n.imageSecondary;return{tl:mn,tr:tn,bl:wt,br:dn,texPrimary:{x:p.paddedRect.x+fu+Wn,y:p.paddedRect.y+fu+za,w:ia-Wn,h:Nn-za},texSecondary:Na?{x:Na.paddedRect.x+fu+Wn,y:Na.paddedRect.y+fu+za,w:ia-Wn,h:Nn-za}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:wn,pixelOffsetBR:Xn,minFontScaleX:ze/h/x,minFontScaleY:Ne/h/T,isSDF:r}};if(i&&(p.stretchX||p.stretchY)){const je=W9(P,V,D),at=W9(A,Y,F);for(let _t=0;_t<je.length-1;_t++){const et=je[_t],ht=je[_t+1];for(let Qe=0;Qe<at.length-1;Qe++)u.push(He(et,at[Qe],ht,at[Qe+1]))}}else u.push(He({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:y+1}));return u}function r1(n,e,r){let i=0;for(const u of n)i+=Math.max(e,Math.min(r,u[1]))-Math.max(e,Math.min(r,u[0]));return i}function W9(n,e,r){const i=[{fixed:-fu,stretch:0}];for(const[u,p]of n){const h=i[i.length-1];i.push({fixed:u-h.stretch,stretch:h.stretch}),i.push({fixed:u-h.stretch,stretch:h.stretch+(p-u)})}return i.push({fixed:e+fu,stretch:r}),i}function s1(n,e,r,i){return n/e*r+i}function i1(n,e,r,i){return n-e*r/i}function Ok(n,e,r,i){const u=e+n.positionedLines[i].lineOffset;return i===0?r+u/2:r+(u+(e+n.positionedLines[i-1].lineOffset))/2}function Bk(n,e=1,r=!1){let i=1/0,u=1/0,p=-1/0,h=-1/0;const b=n[0];for(let R=0;R<b.length;R++){const D=b[R];(!R||D.x<i)&&(i=D.x),(!R||D.y<u)&&(u=D.y),(!R||D.x>p)&&(p=D.x),(!R||D.y>h)&&(h=D.y)}const y=Math.min(p-i,h-u);let x=y/2;const T=new qo([],Nk);if(y===0)return new ge(i,u);for(let R=i;R<p;R+=y)for(let D=u;D<h;D+=y)T.push(new af(R+x,D+x,x,n));let P=function(R){let D=0,F=0,V=0;const Y=R[0];for(let ie=0,oe=Y.length,le=oe-1;ie<oe;le=ie++){const he=Y[ie],_e=Y[le],ze=he.x*_e.y-_e.x*he.y;F+=(he.x+_e.x)*ze,V+=(he.y+_e.y)*ze,D+=3*ze}return new af(F/D,V/D,0,R)}(n),A=T.length;for(;T.length;){const R=T.pop();(R.d>P.d||!P.d)&&(P=R,r&&console.log("found best %d after %d probes",Math.round(1e4*R.d)/1e4,A)),R.max-P.d<=e||(x=R.h/2,T.push(new af(R.p.x-x,R.p.y-x,x,n)),T.push(new af(R.p.x+x,R.p.y-x,x,n)),T.push(new af(R.p.x-x,R.p.y+x,x,n)),T.push(new af(R.p.x+x,R.p.y+x,x,n)),A+=4)}return r&&(console.log(`num probes: ${A}`),console.log(`best distance: ${P.d}`)),P.p}function Nk(n,e){return e.max-n.max}class af{constructor(e,r,i,u){this.p=new ge(e,r),this.h=i,this.d=function(p,h){let b=!1,y=1/0;for(let x=0;x<h.length;x++){const T=h[x];for(let P=0,A=T.length,R=A-1;P<A;R=P++){const D=T[P],F=T[R];D.y>p.y!=F.y>p.y&&p.x<(F.x-D.x)*(p.y-D.y)/(F.y-D.y)+D.x&&(b=!b),y=Math.min(y,H8(p,D,F))}}return(b?1:-1)*Math.sqrt(y)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}}const rf=7,j4=Number.POSITIVE_INFINITY,Fk=Math.sqrt(2);function H9(n,[e,r]){let i=0,u=0;if(r===j4){e<0&&(e=0);const p=e/Fk;switch(n){case"top-right":case"top-left":u=p-rf;break;case"bottom-right":case"bottom-left":u=-p+rf;break;case"bottom":u=-e+rf;break;case"top":u=e-rf}switch(n){case"top-right":case"bottom-right":i=-p;break;case"top-left":case"bottom-left":i=p;break;case"left":i=e;break;case"right":i=-e}}else{switch(e=Math.abs(e),r=Math.abs(r),n){case"top-right":case"top-left":case"top":u=r-rf;break;case"bottom-right":case"bottom-left":case"bottom":u=-r+rf}switch(n){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}}return[i,u]}function jk(n,e,r,i,u,p,h,b,y,x,T){n.createArrays(),n.tilePixelRatio=vt/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const P=n.layers[0].layout,A=n.layers[0]._unevaluatedLayout._values,R={};if(n.textSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ie}=n.textSizeData;R.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Ee(Y),b),A["text-size"].possiblyEvaluate(new Ee(ie),b)]}if(n.iconSizeData.kind==="composite"){const{minZoom:Y,maxZoom:ie}=n.iconSizeData;R.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Ee(Y),b),A["icon-size"].possiblyEvaluate(new Ee(ie),b)]}R.layoutTextSize=A["text-size"].possiblyEvaluate(new Ee(y+1),b),R.layoutIconSize=A["icon-size"].possiblyEvaluate(new Ee(y+1),b),R.textMaxSize=A["text-size"].possiblyEvaluate(new Ee(18),b);const D=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",F=P.get("text-size");let V=!1;for(const Y of n.features)if(Y.icon&&Y.icon.nameSecondary){V=!0;break}for(const Y of n.features){const ie=P.get("text-font").evaluate(Y,{},b).join(","),oe=F.evaluate(Y,{},b),le=R.layoutTextSize.evaluate(Y,{},b),he=(R.layoutIconSize.evaluate(Y,{},b),{horizontal:{},vertical:void 0}),_e=Y.text;let ze,De=[0,0];if(_e){const je=_e.toString(),at=P.get("text-letter-spacing").evaluate(Y,{},b)*es,_t=P.get("text-line-height").evaluate(Y,{},b)*es,et=E(je)?at:0,ht=P.get("text-anchor").evaluate(Y,{},b),Qe=P.get("text-variable-anchor");if(!Qe){const Ht=P.get("text-radial-offset").evaluate(Y,{},b);De=Ht?H9(ht,[Ht*es,j4]):P.get("text-offset").evaluate(Y,{},b).map(At=>At*es)}let Lt=D?"center":P.get("text-justify").evaluate(Y,{},b);const $t=P.get("symbol-placement")==="point",bt=$t?P.get("text-max-width").evaluate(Y,{},b)*es:1/0,hn=Ht=>{n.allowVerticalPlacement&&S(je)&&(he.vertical=D4(_e,e,r,u,ie,bt,_t,ht,Ht,et,De,Qi.vertical,!0,le,oe))};if(!D&&Qe){const Ht=Lt==="auto"?Qe.map(mn=>U4(mn)):[Lt];let At=!1;for(let mn=0;mn<Ht.length;mn++){const tn=Ht[mn];if(!he.horizontal[tn])if(At)he.horizontal[tn]=he.horizontal[0];else{const dn=D4(_e,e,r,u,ie,bt,_t,"center",tn,et,De,Qi.horizontal,!1,le,oe);dn&&(he.horizontal[tn]=dn,At=dn.positionedLines.length===1)}}hn("left")}else{if(Lt==="auto"&&(Lt=U4(ht)),$t||P.get("text-writing-mode").indexOf("horizontal")>=0||!S(je)){const Ht=D4(_e,e,r,u,ie,bt,_t,ht,Lt,et,De,Qi.horizontal,!1,le,oe);Ht&&(he.horizontal[Lt]=Ht)}hn($t?"left":Lt)}}let Ne=!1;if(Y.icon&&Y.icon.namePrimary){const je=i[Y.icon.namePrimary];je&&(ze=kk(u[Y.icon.namePrimary],Y.icon.nameSecondary?u[Y.icon.nameSecondary]:void 0,P.get("icon-offset").evaluate(Y,{},b),P.get("icon-anchor").evaluate(Y,{},b)),Ne=je.sdf,n.sdfIcons===void 0?n.sdfIcons=je.sdf:n.sdfIcons!==je.sdf&&Yt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(je.pixelRatio!==n.pixelRatio||P.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}const He=Y9(he.horizontal)||he.vertical;n.iconsInText||(n.iconsInText=!!He&&He.iconsInText),(He||ze)&&Uk(n,Y,he,ze,i,R,le,0,De,Ne,h,b,x,T,V)}p&&n.generateCollisionDebugBuffers(y,n.collisionBoxArray)}function U4(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Uk(n,e,r,i,u,p,h,b,y,x,T,P,A,R,D){let F=p.textMaxSize.evaluate(e,{},P);F===void 0&&(F=h);const V=n.layers[0].layout,Y=V.get("icon-offset").evaluate(e,{},P),ie=Y9(r.horizontal)||r.vertical,oe=A.name==="globe",le=es,he=h/le,_e=n.tilePixelRatio*F/le,ze=(ht=n.overscaling,n.zoom>18&&ht>2&&(ht>>=1),Math.max(vt/(512*ht),1)*V.get("symbol-spacing")),De=V.get("text-padding")*n.tilePixelRatio,Ne=V.get("icon-padding")*n.tilePixelRatio,He=Ue(V.get("text-max-angle")),je=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",at=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",_t=V.get("symbol-placement"),et=ze/2;var ht;const Qe=V.get("icon-text-fit").evaluate(e,{},P),Lt=V.get("icon-text-fit-padding").evaluate(e,{},P),$t=Qe!=="none";let bt;n.hasAnyIconTextFit===!1&&$t&&(n.hasAnyIconTextFit=!0),i&&$t&&(n.allowVerticalPlacement&&r.vertical&&(bt=D9(i,r.vertical,Qe,Lt,Y,he)),ie&&(i=D9(i,ie,Qe,Lt,Y,he)));const hn=(Ht,At,mn)=>{if(At.x<0||At.x>=vt||At.y<0||At.y>=vt)return;let tn=null;if(oe){const{x:dn,y:wt,z:wn}=A.projectTilePoint(At.x,At.y,mn);tn={anchor:new Il(dn,wt,wn,0,void 0),up:A.upVector(mn,At.x,At.y)}}(function(dn,wt,wn,Xn,Cn,Wn,ia,za,Nn,Na,Aa,pa,ga,oa,ir,Fa,fr,jr,Us,br,ur,xs,ws,Vs,ja,oc,lf){const zl=dn.addToLineVertexArray(wt,Xn);let Al,mm,gm,C1,m7,g7,b7,_7=0,y7=0,v7=0,x7=0,m3=-1,g3=-1;const Fc={};let w7=By("");const Hd=wn?wn.anchor:wt,b3=Nn.layout.get("icon-text-fit").evaluate(ur,{},ja)!=="none";let _3=0,y3=0;if(Nn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[_3,y3]=Nn.layout.get("text-offset").evaluate(ur,{},ja).map(Pi=>Pi*es):(_3=Nn.layout.get("text-radial-offset").evaluate(ur,{},ja)*es,y3=j4),dn.allowVerticalPlacement&&Cn.vertical){const Pi=Cn.vertical;if(ir)g7=V4(Pi),za&&(b7=V4(za));else{const zi=Nn.layout.get("text-rotate").evaluate(ur,{},ja)+90;gm=o1(Na,Hd,wt,Aa,pa,ga,Pi,oa,zi,Fa),za&&(C1=o1(Na,Hd,wt,Aa,pa,ga,za,jr,zi))}}if(Wn){const Pi=Nn.layout.get("icon-rotate").evaluate(ur,{},ja),zi=q9(Wn,Pi,ws,b3),uf=za?q9(za,Pi,ws,b3):void 0;mm=o1(Na,Hd,wt,Aa,pa,ga,Wn,jr,Pi),_7=4*zi.length;const S7=dn.iconSizeData;let Zd=null;S7.kind==="source"?(Zd=[ac*Nn.layout.get("icon-size").evaluate(ur,{},ja)],Zd[0]>hu&&Yt(`${dn.layerIds[0]}: Value for "icon-size" is >= ${Jh}. Reduce your "icon-size".`)):S7.kind==="composite"&&(Zd=[ac*xs.compositeIconSizes[0].evaluate(ur,{},ja),ac*xs.compositeIconSizes[1].evaluate(ur,{},ja)],(Zd[0]>hu||Zd[1]>hu)&&Yt(`${dn.layerIds[0]}: Value for "icon-size" is >= ${Jh}. Reduce your "icon-size".`)),dn.addSymbols(dn.icon,zi,Zd,br,Us,ur,!1,wn,wt,zl.lineStartIndex,zl.lineLength,-1,Vs,ja,oc,lf),m3=dn.icon.placedSymbolArray.length-1,uf&&(y7=4*uf.length,dn.addSymbols(dn.icon,uf,Zd,br,Us,ur,Qi.vertical,wn,wt,zl.lineStartIndex,zl.lineLength,-1,Vs,ja,oc,lf),g3=dn.icon.placedSymbolArray.length-1)}for(const Pi in Cn.horizontal){const zi=Cn.horizontal[Pi];Al||(w7=By(zi.text),ir?m7=V4(zi):Al=o1(Na,Hd,wt,Aa,pa,ga,zi,oa,Nn.layout.get("text-rotate").evaluate(ur,{},ja),Fa));const uf=zi.positionedLines.length===1;if(v7+=Z9(dn,wn,wt,zi,ia,Nn,ir,ur,Fa,zl,Cn.vertical?Qi.horizontal:Qi.horizontalOnly,uf?Object.keys(Cn.horizontal):[Pi],Fc,m3,xs,Vs,ja,oc),uf)break}Cn.vertical&&(x7+=Z9(dn,wn,wt,Cn.vertical,ia,Nn,ir,ur,Fa,zl,Qi.vertical,["vertical"],Fc,g3,xs,Vs,ja,oc));let wu=-1;const v3=(Pi,zi)=>Pi?Math.max(Pi,zi):zi;wu=v3(m7,wu),wu=v3(g7,wu),wu=v3(b7,wu);const nD=wu>-1?1:0;dn.glyphOffsetArray.length>=nm.MAX_GLYPHS&&Yt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ur.sortKey!==void 0&&dn.addToSortKeyRanges(dn.symbolInstances.length,ur.sortKey),dn.symbolInstances.emplaceBack(wt.x,wt.y,Hd.x,Hd.y,Hd.z,Fc.right>=0?Fc.right:-1,Fc.center>=0?Fc.center:-1,Fc.left>=0?Fc.left:-1,Fc.vertical>=0?Fc.vertical:-1,m3,g3,w7,Al!==void 0?Al:dn.collisionBoxArray.length,Al!==void 0?Al+1:dn.collisionBoxArray.length,gm!==void 0?gm:dn.collisionBoxArray.length,gm!==void 0?gm+1:dn.collisionBoxArray.length,mm!==void 0?mm:dn.collisionBoxArray.length,mm!==void 0?mm+1:dn.collisionBoxArray.length,C1||dn.collisionBoxArray.length,C1?C1+1:dn.collisionBoxArray.length,Aa,v7,x7,_7,y7,nD,0,_3,y3,wu,0,b3?1:0)})(n,At,tn,Ht,r,i,u,bt,n.layers[0],n.collisionBoxArray,e.index,e.sourceLayerIndex,n.index,De,je,y,0,Ne,at,Y,e,p,x,T,P,R,D)};if(_t==="line")for(const Ht of U9(e.geometry,0,0,vt,vt)){const At=Dk(Ht,ze,He,r.vertical||ie,i,le,_e,n.overscaling,vt);for(const mn of At)ie&&Vk(n,ie.text,et,mn)||hn(Ht,mn,P)}else if(_t==="line-center"){for(const Ht of e.geometry)if(Ht.length>1){const At=Lk(Ht,He,r.vertical||ie,i,le,_e);At&&hn(Ht,At,P)}}else if(e.type==="Polygon")for(const Ht of P4(e.geometry,0)){const At=Bk(Ht,16);hn(Ht[0],new Il(At.x,At.y,0,0,void 0),P)}else if(e.type==="LineString")for(const Ht of e.geometry)hn(Ht,new Il(Ht[0].x,Ht[0].y,0,0,void 0),P);else if(e.type==="Point")for(const Ht of e.geometry)for(const At of Ht)hn([At],new Il(At.x,At.y,0,0,void 0),P)}const Jh=255,hu=Jh*ac;function Z9(n,e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V,Y){const ie=function(he,_e,ze,De,Ne,He,je,at){const _t=[];if(_e.positionedLines.length===0)return _t;const et=De.layout.get("text-rotate").evaluate(He,{})*Math.PI/180,ht=function(hn){const Ht=hn[0],At=hn[1],mn=Ht*At;return mn>0?[Ht,-At]:mn<0?[-Ht,At]:Ht===0?[At,Ht]:[At,-Ht]}(ze);let Qe=Math.abs(_e.top-_e.bottom);for(const hn of _e.positionedLines)Qe-=hn.lineOffset;const Lt=_e.positionedLines.length,$t=Qe/Lt;let bt=_e.top-ze[1];for(let hn=0;hn<Lt;++hn){const Ht=_e.positionedLines[hn];bt=Ok(_e,$t,bt,hn);for(const At of Ht.positionedGlyphs){if(!At.rect)continue;const mn=At.rect||{};let tn=z9+1,dn=!0,wt=1,wn=0;if(At.imageName){const br=je[At.imageName];if(!br)continue;if(br.sdf){Yt("SDF images are not supported in formatted text and will be ignored.");continue}dn=!1,wt=br.pixelRatio,tn=Ii/wt}const Xn=(Ne||at)&&At.vertical,Cn=At.metrics.advance*At.scale/2,Wn=At.metrics,ia=At.rect;if(ia===null)continue;at&&_e.verticalizable&&(wn=At.imageName?Cn-At.metrics.width*At.scale/2:0);const za=Ne?[At.x+Cn,At.y]:[0,0];let Nn=[0,0],Na=[0,0],Aa=!1;Ne||(Xn?(Na=[At.x+Cn+ht[0],At.y+ht[1]-wn],Aa=!0):Nn=[At.x+Cn+ze[0],At.y+ze[1]-wn]);const pa=ia.w*At.scale/(wt*(At.localGlyph?rc:1)),ga=ia.h*At.scale/(wt*(At.localGlyph?rc:1));let oa,ir,Fa,fr;if(Xn){const br=At.y-bt,ur=new ge(-Cn,Cn-br),xs=-Math.PI/2,ws=new ge(...Na);oa=new ge(-Cn+Nn[0],Nn[1]),oa._rotateAround(xs,ur)._add(ws),oa.x+=-br+Cn,oa.y-=(Wn.left-tn)*At.scale;const Vs=At.imageName?Wn.advance*At.scale:es*At.scale,ja=String.fromCodePoint(At.glyph);Ik(ja)?oa.x+=(1-tn)*At.scale:Pk(ja)?oa.x+=Vs-Wn.height*At.scale+(-tn-1)*At.scale:oa.x+=At.imageName||Wn.width+2*tn===ia.w&&Wn.height+2*tn===ia.h?(Vs-ga)/2:(Vs-(Wn.height+2*tn)*At.scale)/2,ir=new ge(oa.x,oa.y-pa),Fa=new ge(oa.x+ga,oa.y),fr=new ge(oa.x+ga,oa.y-pa)}else{const br=(Wn.left-tn)*At.scale-Cn+Nn[0],ur=(-Wn.top-tn)*At.scale+Nn[1],xs=br+pa,ws=ur+ga;oa=new ge(br,ur),ir=new ge(xs,ur),Fa=new ge(br,ws),fr=new ge(xs,ws)}if(et){let br;br=Ne?new ge(0,0):Aa?new ge(ht[0],ht[1]):new ge(ze[0],ze[1]),oa._rotateAround(et,br),ir._rotateAround(et,br),Fa._rotateAround(et,br),fr._rotateAround(et,br)}const jr=new ge(0,0),Us=new ge(0,0);_t.push({tl:oa,tr:ir,bl:Fa,br:fr,texPrimary:mn,texSecondary:void 0,writingMode:_e.writingMode,glyphOffset:za,sectionIndex:At.sectionIndex,isSDF:dn,pixelOffsetTL:jr,pixelOffsetBR:Us,minFontScaleX:0,minFontScaleY:0})}}return _t}(0,i,y,p,h,b,u,n.allowVerticalPlacement),oe=n.textSizeData;let le=null;oe.kind==="source"?(le=[ac*p.layout.get("text-size").evaluate(b,{},V)],le[0]>hu&&Yt(`${n.layerIds[0]}: Value for "text-size" is >= ${Jh}. Reduce your "text-size".`)):oe.kind==="composite"&&(le=[ac*D.compositeTextSizes[0].evaluate(b,{},V),ac*D.compositeTextSizes[1].evaluate(b,{},V)],(le[0]>hu||le[1]>hu)&&Yt(`${n.layerIds[0]}: Value for "text-size" is >= ${Jh}. Reduce your "text-size".`)),n.addSymbols(n.text,ie,le,y,h,b,T,e,r,x.lineStartIndex,x.lineLength,R,F,V,Y,!1);for(const he of P)A[he]=n.text.placedSymbolArray.length-1;return 4*ie.length}function Y9(n){for(const e in n)return n[e];return null}function o1(n,e,r,i,u,p,h,b,y,x){let T=h.top,P=h.bottom,A=h.left,R=h.right;const D=h.collisionPadding;if(D&&(A-=D[0],T-=D[1],R+=D[2],P+=D[3]),y){const F=new ge(A,T),V=new ge(R,T),Y=new ge(A,P),ie=new ge(R,P),oe=Ue(y);let le=new ge(0,0);x&&(le=new ge(x[0],x[1])),F._rotateAround(oe,le),V._rotateAround(oe,le),Y._rotateAround(oe,le),ie._rotateAround(oe,le),A=Math.min(F.x,V.x,Y.x,ie.x),R=Math.max(F.x,V.x,Y.x,ie.x),T=Math.min(F.y,V.y,Y.y,ie.y),P=Math.max(F.y,V.y,Y.y,ie.y)}return n.emplaceBack(e.x,e.y,e.z,r.x,r.y,A,T,R,P,b,i,u,p),n.length-1}function V4(n){n.collisionPadding&&(n.top-=n.collisionPadding[1],n.bottom+=n.collisionPadding[3]);const e=n.bottom-n.top;return e>0?Math.max(10,e):null}function Vk(n,e,r,i){const u=n.compareText;if(e in u){const p=u[e];for(let h=p.length-1;h>=0;h--)if(i.dist(p[h])<r)return!0}else u[e]=[];return u[e].push(i),!1}function X9(n,e){const r=n.fovAboveCenter,i=n.elevation?n.elevation.getMinElevationBelowMSL()*e:0,u=(n._camera.position[2]*n.worldSize-i)/Math.cos(n._pitch),p=Math.sin(r)*u/Math.sin(Math.max(Math.PI/2-n._pitch-r,.01)),h=Math.sin(n._pitch)*p+u;return Math.min(1.01*h,u*(1/n._horizonShift))}function mu(n,e){if(!e.isReprojectedInTileSpace)return{scale:1<<n.z,x:n.x,y:n.y,x2:n.x+1,y2:n.y+1,projection:e};const r=Math.pow(2,-n.z),i=n.x*r,u=(n.x+1)*r,p=n.y*r,h=(n.y+1)*r,b=Ei(i),y=Ei(u),x=Qr(p),T=Qr(h),P=e.project(b,x),A=e.project(y,x),R=e.project(y,T),D=e.project(b,T);let F=Math.min(P.x,A.x,R.x,D.x),V=Math.min(P.y,A.y,R.y,D.y),Y=Math.max(P.x,A.x,R.x,D.x),ie=Math.max(P.y,A.y,R.y,D.y);const oe=r/16;function le(_e,ze,De,Ne,He,je){const at=(De+He)/2,_t=(Ne+je)/2,et=e.project(Ei(at),Qr(_t)),ht=Math.max(0,F-et.x,V-et.y,et.x-Y,et.y-ie);F=Math.min(F,et.x),Y=Math.max(Y,et.x),V=Math.min(V,et.y),ie=Math.max(ie,et.y),ht>oe&&(le(_e,et,De,Ne,at,_t),le(et,ze,at,_t,He,je))}le(P,A,i,p,u,p),le(A,R,u,p,u,h),le(R,D,u,h,i,h),le(D,P,i,h,i,p),F-=oe,V-=oe,Y+=oe,ie+=oe;const he=1/Math.max(Y-F,ie-V);return{scale:he,x:F*he,y:V*he,x2:Y*he,y2:ie*he,projection:e}}function J9(n,{x:e,y:r},i=0){return new ge(((e-i)*n.scale-n.x)*vt,(r*n.scale-n.y)*vt)}const Gk=o.m.identity(new Float32Array(16));class gu{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new da(0,0)}projectTilePoint(e,r,i){return{x:e,y:r,z:0}}locationPoint(e,r,i=!0){return e._coordinatePoint(e.locationCoordinate(r),i)}pixelsPerMeter(e,r){return js(1,e)*r}pixelSpaceConversion(e,r,i){return 1}farthestPixelDistance(e){return X9(e,e.pixelsPerMeter)}pointCoordinate(e,r,i,u){const p=e.horizonLineFromTop(!1),h=new ge(r,Math.max(p,i));return e.rayIntersectionCoordinate(e.pointRayIntersection(h,u))}pointCoordinate3D(e,r,i){const u=new ge(r,i);if(e.elevation)return e.elevation.pointCoordinate(u);{const p=this.pointCoordinate(e,u.x,u.y,0);return[p.x,p.y,p.z]}}isPointAboveHorizon(e,r){if(e.elevation)return!this.pointCoordinate3D(e,r.x,r.y);const i=e.horizonLineFromTop();return r.y<i}createInversionMatrix(e,r){return Gk}createTileMatrix(e,r,i){let u,p,h;const b=i.canonical,y=o.m.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const x=mu(b,this);u=1,p=x.x+i.wrap*x.scale,h=x.y,o.m.scale(y,y,[u/x.scale,u/x.scale,e.pixelsPerMeter/r])}else u=r/e.zoomScale(b.z),p=(b.x+Math.pow(2,b.z)*i.wrap)*u,h=b.y*u;return o.m.translate(y,y,[p,h,0]),o.m.scale(y,y,[u/vt,u/vt,1]),y}upVector(e,r,i){return[0,0,1]}upVectorScale(e,r,i){return{metersToTile:1}}}class $k extends gu{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,i]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(Ue(r));this.n=(u+Math.sin(Ue(i)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n:i,c:u,r0:p}=this,h=Ue(e-this.center[0]),b=Ue(r),y=Math.sqrt(u-2*i*Math.sin(b))/i;return{x:y*Math.sin(h*i),y:y*Math.cos(h*i)-p,z:0}}unproject(e,r){const{n:i,c:u,r0:p}=this,h=p+r;let b=Math.atan2(e,Math.abs(h))*Math.sign(h);h*i<0&&(b-=Math.PI*Math.sign(e)*Math.sign(h));const y=Ue(this.center[0])*i;b=Et(b,-Math.PI-y,Math.PI-y);const x=ke(Bt(b/i)+this.center[0],-180,180),T=Math.asin(ke((u-(e*e+h*h)*i*i)/(2*i),-1,1)),P=ke(Bt(T),-pr,pr);return new da(x,P)}}const Kh=1.340264,Qh=-.081106,em=893e-6,tm=.003796,c1=Math.sqrt(3)/2;class qk extends gu{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const i=Math.asin(c1*Math.sin(r)),u=i*i,p=u*u*u;return{x:.5*(e*Math.cos(i)/(c1*(Kh+3*Qh*u+p*(7*em+9*tm*u)))/Math.PI+.5),y:1-.5*(i*(Kh+Qh*u+p*(em+tm*u))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let i=r=(2*(1-r)-1)*Math.PI,u=i*i,p=u*u*u;for(let T,P,A,R=0;R<12&&(P=i*(Kh+Qh*u+p*(em+tm*u))-r,A=Kh+3*Qh*u+p*(7*em+9*tm*u),T=P/A,i=ke(i-T,-Math.PI/3,Math.PI/3),u=i*i,p=u*u*u,!(Math.abs(T)<1e-12));++R);const h=c1*e*(Kh+3*Qh*u+p*(7*em+9*tm*u))/Math.cos(i),b=Math.asin(Math.sin(i)/c1),y=ke(180*h/Math.PI,-180,180),x=ke(180*b/Math.PI,-pr,pr);return new da(y,x)}}class Wk extends gu{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const i=360*(e-.5),u=ke(360*(.5-r),-pr,pr);return new da(i,u)}}const sf=Math.PI/2;function l1(n){return Math.tan((sf+n)/2)}class Hk extends gu{constructor(e){super(e),this.center=e.center||[0,30];const[r,i]=this.parallels=e.parallels||[30,30];let u=Ue(r),p=Ue(i);this.southernCenter=u+p<0,this.southernCenter&&(u=-u,p=-p);const h=Math.cos(u),b=l1(u);this.n=u===p?Math.sin(u):Math.log(h/Math.cos(p))/Math.log(l1(p)/b),this.f=h*Math.pow(l1(u),this.n)/this.n}project(e,r){r=Ue(r),this.southernCenter&&(r=-r),e=Ue(e-this.center[0]);const i=1e-6,{n:u,f:p}=this;p>0?r<-sf+i&&(r=-sf+i):r>sf-i&&(r=sf-i);const h=p/Math.pow(l1(r),u);let b=h*Math.sin(u*e),y=p-h*Math.cos(u*e);return b=.5*(b/Math.PI+.5),y=.5*(y/Math.PI+.5),{x:b,y:this.southernCenter?y:1-y,z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,this.southernCenter&&(r=1-r),r=(2*(1-r)-.5)*Math.PI;const{n:i,f:u}=this,p=u-r,h=Math.sign(p),b=Math.sign(i)*Math.sqrt(e*e+p*p);let y=Math.atan2(e,Math.abs(p))*h;p*i<0&&(y-=Math.PI*Math.sign(e)*h);const x=ke(Bt(y/i)+this.center[0],-180,180),T=ke(Bt(2*Math.atan(Math.pow(u/b,1/i))-sf),-pr,pr);return new da(x,this.southernCenter?-T:T)}}class K9 extends gu{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:Lc(e),y:Dc(r),z:0}}unproject(e,r){const i=Ei(e),u=Qr(r);return new da(i,u)}}const Q9=Ue(pr);class Zk extends gu{project(e,r){const i=(r=Ue(r))*r,u=i*i;return{x:.5*((e=Ue(e))*(.8707-.131979*i+u*(u*(.003971*i-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+i*(.015085+u*(.028874*i-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let i=r=(2*(1-r)-1)*Math.PI,u=25,p=0,h=i*i;do{h=i*i;const x=h*h;p=(i*(1.007226+h*(.015085+x*(.028874*h-.044475-.005916*x)))-r)/(1.007226+h*(.045255+x*(.259866*h-.311325-.005916*11*x))),i=ke(i-p,-Q9,Q9)}while(Math.abs(p)>1e-6&&--u>0);h=i*i;const b=ke(Bt(e/(.8707+h*(h*(h*h*h*(.003971-.001529*h)-.013791)-.131979))),-180,180),y=Bt(i);return new da(b,y)}}const e2=Ue(pr);class Yk extends gu{project(e,r){r=Ue(r),e=Ue(e);const i=Math.cos(r),u=2/Math.PI,p=Math.acos(i*Math.cos(e/2)),h=Math.sin(p)/p,b=.5*(e*u+2*i*Math.sin(e/2)/h)||0,y=.5*(r+Math.sin(r)/h)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(y/Math.PI+1),z:0}}unproject(e,r){let i=e=(2*e-.5)*Math.PI,u=r=(2*(1-r)-1)*Math.PI,p=25;const h=1e-6;let b=0,y=0;do{const x=Math.cos(u),T=Math.sin(u),P=2*T*x,A=T*T,R=x*x,D=Math.cos(i/2),F=Math.sin(i/2),V=2*D*F,Y=F*F,ie=1-R*D*D,oe=ie?1/ie:0,le=ie?Math.acos(x*D)*Math.sqrt(1/ie):0,he=.5*(2*le*x*F+2*i/Math.PI)-e,_e=.5*(le*T+u)-r,ze=.5*oe*(R*Y+le*x*D*A)+1/Math.PI,De=oe*(V*P/4-le*T*F),Ne=.125*oe*(P*F-le*T*R*V),He=.5*oe*(A*D+le*Y*x)+.5,je=De*Ne-He*ze;b=(_e*De-he*He)/je,y=(he*Ne-_e*ze)/je,i=ke(i-b,-Math.PI,Math.PI),u=ke(u-y,-e2,e2)}while((Math.abs(b)>h||Math.abs(y)>h)&&--p>0);return new da(Bt(i),Bt(u))}}class t2 extends gu{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ue(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:i,cosPhi:u}=this;return{x:Ue(e)*u*i+.5,y:-Math.sin(Ue(r))/u*i+.5,z:0}}unproject(e,r){const{scale:i,cosPhi:u}=this,p=-(r-.5)/i,h=ke(Bt((e-.5)/i)/u,-180,180),b=Math.asin(ke(p*u,-1,1)),y=ke(Bt(b),-pr,pr);return new da(h,y)}}class Xk extends K9{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,r,i){const u=Vh(e,r,i),p=Gh(kc(i));return o.v.transformMat4(u,u,p),{x:u[0],y:u[1],z:u[2]}}locationPoint(e,r){const i=Nd(r.lat,r.lng),u=o.v.normalize([],i),p=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(r),e._centerAltitude):e._centerAltitude,h=js(1,0)*vt*p;o.v.scaleAndAdd(i,i,u,h);const b=o.m.identity(new Float64Array(16));return o.m.multiply(b,e.pixelMatrix,e.globeMatrix),o.v.transformMat4(i,i,b),new ge(i[0],i[1])}pixelsPerMeter(e,r){return js(1,0)*r}pixelSpaceConversion(e,r,i){const u=js(1,e)*r,p=On(js(1,45)*r,u,i);return this.pixelsPerMeter(e,r)/p}createTileMatrix(e,r,i){const u=u4(kc(i.canonical));return o.m.multiply(new Float64Array(16),e.globeMatrix,u)}createInversionMatrix(e,r){const{center:i}=e,u=Gh(kc(r));return o.m.rotateY(u,u,Ue(i.lng)),o.m.rotateX(u,u,Ue(i.lat)),o.m.scale(u,u,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(u)}pointCoordinate(e,r,i,u){return M8(e,r,i,!0)||new os(0,0)}pointCoordinate3D(e,r,i){const u=this.pointCoordinate(e,r,i,0);return[u.x,u.y,u.z]}isPointAboveHorizon(e,r){return!M8(e,r.x,r.y,!1)}farthestPixelDistance(e){const r=function(u,p){const h=u.cameraToCenterDistance,b=u._centerAltitude*p,y=u._camera,x=u._camera.forward(),T=o.v.add([],o.v.scale([],x,-h),[0,0,b]),P=u.worldSize/(2*Math.PI),A=[0,0,-P],R=u.width/u.height,D=Math.tan(u.fovAboveCenter),F=o.v.scale([],y.up(),D),V=o.v.scale([],y.right(),D*R),Y=o.v.normalize([],o.v.add([],o.v.add([],x,F),V)),ie=[];let oe;if(new a4(T,Y).closestPointOnSphere(A,P,ie)){const le=o.v.add([],ie,A),he=o.v.sub([],le,T);oe=Math.cos(u.fovAboveCenter)*o.v.length(he)}else{const le=o.v.sub([],T,A),he=o.v.sub([],A,T);o.v.normalize(he,he);const _e=o.v.length(le)-P;oe=Math.sqrt(_e*(_e+2*P));const ze=Math.acos(oe/(P+_e))-Math.acos(o.v.dot(x,he));oe*=Math.cos(ze)}return 1.01*oe}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),i=Sl(e.zoom);if(i>0){const u=X9(e,js(1,e.center.lat)*e.worldSize),p=e.worldSize/(2*Math.PI),h=Math.max(e.width,e.height)/e.worldSize*Math.PI;return On(r,u+p*(1-Math.cos(h)),Math.pow(i,10))}return r}upVector(e,r,i){return Vh(r,i,e,1)}upVectorScale(e){return{metersToTile:Dg(Bg(kc(e)))}}}function n2(n){const e=n.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(n.name){case"mercator":return new K9(n);case"equirectangular":return new Wk(n);case"naturalEarth":return new Zk(n);case"equalEarth":return new qk(n);case"winkelTripel":return new Yk(n);case"albers":return r?new t2(n):new $k(n);case"lambertConformalConic":return r?new t2(n):new Hk(n);case"globe":return new Xk(n)}throw new Error(`Invalid projection name: ${n.name}`)}const Jk=new ct({"symbol-placement":new be(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new be(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new be(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Fe(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new be(Ve.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new be(Ve.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new be(Ve.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new be(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new be(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new be(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Fe(Ve.layout_symbol["icon-size"]),"icon-text-fit":new Fe(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fe(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Fe(Ve.layout_symbol["icon-image"]),"icon-rotate":new Fe(Ve.layout_symbol["icon-rotate"]),"icon-padding":new be(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new be(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Fe(Ve.layout_symbol["icon-offset"]),"icon-anchor":new Fe(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new be(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new be(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new be(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new Fe(Ve.layout_symbol["text-field"]),"text-font":new Fe(Ve.layout_symbol["text-font"]),"text-size":new Fe(Ve.layout_symbol["text-size"]),"text-max-width":new Fe(Ve.layout_symbol["text-max-width"]),"text-line-height":new Fe(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Fe(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new Fe(Ve.layout_symbol["text-justify"]),"text-radial-offset":new Fe(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new be(Ve.layout_symbol["text-variable-anchor"]),"text-anchor":new Fe(Ve.layout_symbol["text-anchor"]),"text-max-angle":new be(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new be(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new Fe(Ve.layout_symbol["text-rotate"]),"text-padding":new be(Ve.layout_symbol["text-padding"]),"text-keep-upright":new be(Ve.layout_symbol["text-keep-upright"]),"text-transform":new Fe(Ve.layout_symbol["text-transform"]),"text-offset":new Fe(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new be(Ve.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new be(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new be(Ve.layout_symbol["text-optional"]),visibility:new be(Ve.layout_symbol.visibility)});var G4={paint:new ct({"icon-opacity":new Fe(Ve.paint_symbol["icon-opacity"]),"icon-emissive-strength":new Fe(Ve.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Fe(Ve.paint_symbol["text-emissive-strength"]),"icon-color":new Fe(Ve.paint_symbol["icon-color"]),"icon-halo-color":new Fe(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Fe(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Fe(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new be(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new be(Ve.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Fe(Ve.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Fe(Ve.paint_symbol["text-opacity"]),"text-color":new Fe(Ve.paint_symbol["text-color"],{runtimeType:ue,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new Fe(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new Fe(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Fe(Ve.paint_symbol["text-halo-blur"]),"text-translate":new be(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new be(Ve.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new be(Ve.paint_symbol["icon-color-saturation"])}),layout:Jk};class a2{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Uo,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}qt(a2,"FormatSectionOverride",{omit:["defaultValue"]});class u1 extends Vt{constructor(e,r,i){super(e,G4,r,i)}recalculate(e,r){super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const i=this.layout.get("text-writing-mode");if(i){const u=[];for(const p of i)u.indexOf(p)<0&&u.push(p);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,r,i,u){const p=this.layout.get(e).evaluate(r,{},i,u),h=this._unevaluatedLayout._values[e];return h.isDataDriven()||kp(h.value)||!p?p:function(b,y){return y.replace(/{([^{}]+)}/g,(x,T)=>T in b?String(b[T]):"")}(r.properties,p)}createBucket(e){return new nm(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of G4.paint.overridableProperties){if(!u1.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),i=new a2(r),u=new Th(i,r.property.specification,this.scope,this.options);let p=null;p=r.value.kind==="constant"||r.value.kind==="source"?new Id("source",u):new Pd("composite",u,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new Ze(r.property,p,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,i){return!(!this.layout||r.isDataDriven()||i.isDataDriven())&&u1.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const i=e.get("text-field"),u=G4.paint.properties[r];let p=!1;const h=b=>{for(const y of b)if(u.overrides&&u.overrides.hasOverride(y))return void(p=!0)};if(i.value.kind==="constant"&&i.value.value instanceof Wr)h(i.value.value.sections);else if(i.value.kind==="source"){const b=x=>{p||(x instanceof Go&&dr(x.value)===qe?h(x.value.sections):x instanceof xc?h(x.sections):x.eachChild(b))},y=i.value;y._styleExpression&&b(y._styleExpression.expression)}return p}getProgramIds(){const e=this.paint.get("icon-opacity").constantOr(1)!==0,r=this.paint.get("text-opacity").constantOr(1)!==0,i=[];return e&&i.push("symbolIcon"),r&&i.push("symbolSDF"),i}getDefaultProgramParams(e,r){return{config:new Ld(this,r),overrideFog:!1}}}const Kk=Xg.types,Qk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function d1(n,e,r,i,u,p,h,b,y,x,T,P,A){const R=b?Math.min(hu,Math.round(b[0])):0,D=b?Math.min(hu,Math.round(b[1])):0;n.emplaceBack(e,r,Math.round(32*i),Math.round(32*u),p,h,(R<<1)+(y?1:0),D,16*x,16*T,256*P,256*A)}function p1(n,e,r){n.emplaceBack(e,r)}function f1(n,e,r,i,u,p,h){n.emplaceBack(e,r,i,u,p,h)}function h1(n,e,r,i,u){n.emplaceBack(e,r,i,u),n.emplaceBack(e,r,i,u),n.emplaceBack(e,r,i,u),n.emplaceBack(e,r,i,u)}function eL(n){for(const e of n.sections)if(X(e.text))return!0;return!1}class $4{constructor(e){this.layoutVertexArray=new Br,this.indexArray=new ba,this.programConfigurations=e,this.segments=new Wa,this.dynamicLayoutVertexArray=new ua,this.opacityVertexArray=new Jr,this.placedSymbolArray=new Y6,this.iconTransitioningVertexArray=new vs,this.globeExtVertexArray=new Ma,this.zOffsetVertexArray=new Qo}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(e,r,i,u,p){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gk.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,_k.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Qk,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=e.createVertexBuffer(this.iconTransitioningVertexArray,vk.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,bk.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||p)&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,yk.members,!0)),this.opacityVertexBuffer.itemSize=1),(i||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}qt($4,"SymbolBuffers");class q4{constructor(e,r,i){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new i,this.segments=new Wa,this.collisionVertexArray=new Hi,this.collisionVertexArrayExt=new ua}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,xk.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,wk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}qt(q4,"CollisionBuffers");class m1{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(h=>h.fqid),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=o.m.identity([]),this.placementViewportMatrix=o.m.identity([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=k4(this.zoom,r["text-size"]),this.iconSizeData=k4(this.zoom,r["icon-size"]);const i=this.layers[0].layout,u=i.get("symbol-sort-key"),p=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=i.get("text-writing-mode").map(h=>Qi[h]),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id),this.sourceID=e.sourceID,this.projection=e.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=i.get("symbol-z-elevate")}createArrays(){this.text=new $4(new ou(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new $4(new ou(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new K6,this.lineVertexArray=new Q6,this.symbolInstances=new J6}calculateGlyphDependencies(e,r,i,u,p){for(let h=0;h<e.length;h++){const b=e.codePointAt(h);if(b===void 0)break;if(r[b]=!0,u&&p&&b<=65535){const y=Zh[e.charAt(h)];y&&(r[y.charCodeAt(0)]=!0)}}}populate(e,r,i,u){const p=this.layers[0],h=p.layout,b=this.projection.name==="globe",y=h.get("text-font"),x=h.get("text-field"),T=h.get("icon-image"),P=(x.value.kind!=="constant"||x.value.value instanceof Wr&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),A=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,R=h.get("symbol-sort-key");if(this.features=[],!P&&!A)return;const D=r.iconDependencies,F=r.glyphDependencies,V=r.availableImages,Y=new Ee(this.zoom);for(const{feature:ie,id:oe,index:le,sourceLayerIndex:he}of e){const _e=p._featureFilter.needGeometry,ze=du(ie,_e);if(!p._featureFilter.filter(Y,ze,i))continue;if(_e||(ze.geometry=Oc(ie,i,u)),b&&ie.type!==1&&i.z<=5){const je=ze.geometry,at=.98078528056,_t=(et,ht)=>{const Qe=Vh(et.x,et.y,i,1),Lt=Vh(ht.x,ht.y,i,1);return o.v.dot(Qe,Lt)<at};for(let et=0;et<je.length;et++)je[et]=dR(je[et],_t)}let De,Ne;if(P){const je=p.getValueAndResolveTokens("text-field",ze,i,V),at=Wr.factory(je);eL(at)&&(this.hasRTLText=!0),(!this.hasRTLText||pe()==="unavailable"||this.hasRTLText&&Ce.isParsed())&&(De=Ek(at,p,ze))}if(A){const je=p.getValueAndResolveTokens("icon-image",ze,i,V);Ne=je instanceof Ms?je:Ms.fromString(je)}if(!De&&!Ne)continue;const He=this.sortFeaturesByKey?R.evaluate(ze,{},i):void 0;if(this.features.push({id:oe,text:De,icon:Ne,index:le,sourceLayerIndex:he,geometry:ze.geometry,properties:ie.properties,type:Kk[ie.type],sortKey:He}),Ne&&(D[Ne.namePrimary]=!0,Ne.nameSecondary&&(D[Ne.nameSecondary]=!0)),De){const je=y.evaluate(ze,{},i).join(","),at=h.get("text-rotation-alignment")==="map"&&h.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Qi.vertical)>=0;for(const _t of De.sections)if(_t.image)D[_t.image.namePrimary]=!0;else{const et=S(De.toString()),ht=_t.fontStack||je,Qe=F[ht]=F[ht]||{};this.calculateGlyphDependencies(_t.text,Qe,at,this.allowVerticalPlacement,et)}}}h.get("symbol-placement")==="line"&&(this.features=function(ie){const oe={},le={},he=[];let _e=0;function ze(je){he.push(ie[je]),_e++}function De(je,at,_t){const et=le[je];return delete le[je],le[at]=et,he[et].geometry[0].pop(),he[et].geometry[0]=he[et].geometry[0].concat(_t[0]),et}function Ne(je,at,_t){const et=oe[at];return delete oe[at],oe[je]=et,he[et].geometry[0].shift(),he[et].geometry[0]=_t[0].concat(he[et].geometry[0]),et}function He(je,at,_t){const et=_t?at[0][at[0].length-1]:at[0][0];return`${je}:${et.x}:${et.y}`}for(let je=0;je<ie.length;je++){const at=ie[je],_t=at.geometry,et=at.text?at.text.toString():null;if(!et){ze(je);continue}const ht=He(et,_t),Qe=He(et,_t,!0);if(ht in le&&Qe in oe&&le[ht]!==oe[Qe]){const Lt=Ne(ht,Qe,_t),$t=De(ht,Qe,he[Lt].geometry);delete oe[ht],delete le[Qe],le[He(et,he[$t].geometry,!0)]=$t,he[Lt].geometry=null}else ht in le?De(ht,Qe,_t):Qe in oe?Ne(ht,Qe,_t):(ze(je),oe[ht]=_e-1,le[Qe]=_e-1)}return he.filter(je=>je.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ie,oe)=>ie.sortKey-oe.sortKey)}update(e,r,i,u,p){const h=Object.keys(e).length!==0;if(h&&!this.stateDependentLayers.length)return;const b=h?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(e,r,b,i,u,p),this.icon.programConfigurations.updatePaintArrays(e,r,b,i,u,p)}updateZOffset(){const e=(p,h,b)=>{i+=h,i>p.length&&p.resize(i);for(let y=-h;y<0;y++)p.emplace(y+i,b)},r=(p,h,b)=>{u+=h,u>p.length&&p.resize(u);for(let y=-h;y<0;y++)p.emplace(y+u,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let i=0,u=0;for(let p=0;p<this.symbolInstances.length;p++){const h=this.symbolInstances.get(p),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:y,numIconVertices:x}=h,T=h.zOffset,P=x>0;if((b>0||y>0)&&(e(this.text.zOffsetVertexArray,b,T),e(this.text.zOffsetVertexArray,y,T)),P){const{placedIconSymbolIndex:A,verticalPlacedIconSymbolIndex:R}=h;A>=0&&r(this.icon.zOffsetVertexArray,x,T),R>=0&&r(this.icon.zOffsetVertexArray,h.numVerticalIconVertices,T)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=n2(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const i=this.lineVertexArray.length;if(e.segment!==void 0)for(const{x:u,y:p}of r)this.lineVertexArray.emplaceBack(u,p);return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,r,i,u,p,h,b,y,x,T,P,A,R,D,F,V){const Y=e.indexArray,ie=e.layoutVertexArray,oe=e.globeExtVertexArray,le=e.segments.prepareSegment(4*r.length,ie,Y,this.canOverlap?h.sortKey:void 0),he=this.glyphOffsetArray.length,_e=le.vertexLength,ze=this.allowVerticalPlacement&&b===Qi.vertical?Math.PI/2:0,De=h.text&&h.text.sections;for(let He=0;He<r.length;He++){const{tl:je,tr:at,bl:_t,br:et,texPrimary:ht,texSecondary:Qe,pixelOffsetTL:Lt,pixelOffsetBR:$t,minFontScaleX:bt,minFontScaleY:hn,glyphOffset:Ht,isSDF:At,sectionIndex:mn}=r[He],tn=le.vertexLength,dn=Ht[1];if(d1(ie,x.x,x.y,je.x,dn+je.y,ht.x,ht.y,i,At,Lt.x,Lt.y,bt,hn),d1(ie,x.x,x.y,at.x,dn+at.y,ht.x+ht.w,ht.y,i,At,$t.x,Lt.y,bt,hn),d1(ie,x.x,x.y,_t.x,dn+_t.y,ht.x,ht.y+ht.h,i,At,Lt.x,$t.y,bt,hn),d1(ie,x.x,x.y,et.x,dn+et.y,ht.x+ht.w,ht.y+ht.h,i,At,$t.x,$t.y,bt,hn),y){const{x:wt,y:wn,z:Xn}=y.anchor,[Cn,Wn,ia]=y.up;f1(oe,wt,wn,Xn,Cn,Wn,ia),f1(oe,wt,wn,Xn,Cn,Wn,ia),f1(oe,wt,wn,Xn,Cn,Wn,ia),f1(oe,wt,wn,Xn,Cn,Wn,ia),h1(e.dynamicLayoutVertexArray,wt,wn,Xn,ze)}else h1(e.dynamicLayoutVertexArray,x.x,x.y,x.z,ze);if(V){const wt=Qe||ht;p1(e.iconTransitioningVertexArray,wt.x,wt.y),p1(e.iconTransitioningVertexArray,wt.x+wt.w,wt.y),p1(e.iconTransitioningVertexArray,wt.x,wt.y+wt.h),p1(e.iconTransitioningVertexArray,wt.x+wt.w,wt.y+wt.h)}Y.emplaceBack(tn,tn+1,tn+2),Y.emplaceBack(tn+1,tn+2,tn+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ht[0]),He!==r.length-1&&mn===r[He+1].sectionIndex||e.programConfigurations.populatePaintArrays(ie.length,h,h.index,{},R,D,F,De&&De[mn])}const Ne=y?y.anchor:x;e.placedSymbolArray.emplaceBack(Ne.x,Ne.y,Ne.z,x.x,x.y,he,this.glyphOffsetArray.length-he,_e,T,P,x.segment,i?i[0]:0,i?i[1]:0,u[0],u[1],b,0,!1,0,A,0)}_commitLayoutVertex(e,r,i,u,p,h,b){e.emplaceBack(r,i,u,p,h,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(e,r,i,u,p,h,b){const y=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),x=y.vertexLength,T=b.tileAnchorX,P=b.tileAnchorY;for(let R=0;R<4;R++)i.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(i.collisionVertexArrayExt,r,e.padding,b.zOffset),this._commitLayoutVertex(i.layoutVertexArray,u,p,h,T,P,new ge(e.x1,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,u,p,h,T,P,new ge(e.x2,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,u,p,h,T,P,new ge(e.x2,e.y2)),this._commitLayoutVertex(i.layoutVertexArray,u,p,h,T,P,new ge(e.x1,e.y2)),y.vertexLength+=4;const A=i.indexArray;A.emplaceBack(x,x+1),A.emplaceBack(x+1,x+2),A.emplaceBack(x+2,x+3),A.emplaceBack(x+3,x),y.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,i,u,p,h){for(let b=u;b<p;b++){const y=i.get(b),x=this.getSymbolInstanceTextSize(e,h,r,b);this._addCollisionDebugVertices(y,x,this.textCollisionBox,y.projectedAnchorX,y.projectedAnchorY,y.projectedAnchorZ,h)}}_addIconDebugCollisionBoxes(e,r,i,u,p,h){for(let b=u;b<p;b++){const y=i.get(b),x=this.getSymbolInstanceIconSize(e,r,h.placedIconSymbolIndex);this._addCollisionDebugVertices(y,x,this.iconCollisionBox,y.projectedAnchorX,y.projectedAnchorY,y.projectedAnchorZ,h)}}generateCollisionDebugBuffers(e,r){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new q4(Ti,P9.members,vs),this.iconCollisionBox=new q4(Ti,P9.members,vs);const i=ef(this.iconSizeData,e),u=ef(this.textSizeData,e);for(let p=0;p<this.symbolInstances.length;p++){const h=this.symbolInstances.get(p);this._addTextDebugCollisionBoxes(u,e,r,h.textBoxStartIndex,h.textBoxEndIndex,h),this._addTextDebugCollisionBoxes(u,e,r,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h),this._addIconDebugCollisionBoxes(i,e,r,h.iconBoxStartIndex,h.iconBoxEndIndex,h),this._addIconDebugCollisionBoxes(i,e,r,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h)}}getSymbolInstanceTextSize(e,r,i,u){const p=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:u),h=n1(this.textSizeData,e,p)/es;return this.tilePixelRatio*h}getSymbolInstanceIconSize(e,r,i){const u=this.icon.placedSymbolArray.get(i),p=n1(this.iconSizeData,e,u);return this.tilePixelRatio*p}_commitDebugCollisionVertexUpdate(e,r,i,u){e.emplaceBack(r,-i,-i,u),e.emplaceBack(r,i,-i,u),e.emplaceBack(r,i,i,u),e.emplaceBack(r,-i,i,u)}_updateTextDebugCollisionBoxes(e,r,i,u,p,h){for(let b=u;b<p;b++){const y=i.get(b),x=this.getSymbolInstanceTextSize(e,h,r,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,x,y.padding,h.zOffset)}}_updateIconDebugCollisionBoxes(e,r,i,u,p,h){for(let b=u;b<p;b++){const y=i.get(b),x=this.getSymbolInstanceIconSize(e,r,h.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,x,y.padding,h.zOffset)}}updateCollisionDebugBuffers(e,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const i=ef(this.iconSizeData,e),u=ef(this.textSizeData,e);for(let p=0;p<this.symbolInstances.length;p++){const h=this.symbolInstances.get(p);this._updateTextDebugCollisionBoxes(u,e,r,h.textBoxStartIndex,h.textBoxEndIndex,h),this._updateTextDebugCollisionBoxes(u,e,r,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h),this._updateIconDebugCollisionBoxes(i,e,r,h.iconBoxStartIndex,h.iconBoxEndIndex,h),this._updateIconDebugCollisionBoxes(i,e,r,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,i,u,p,h,b,y,x){const T={};if(r<i){const{x1:P,y1:A,x2:R,y2:D,padding:F,projectedAnchorX:V,projectedAnchorY:Y,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:le,featureIndex:he}=e.get(r);T.textBox={x1:P,y1:A,x2:R,y2:D,padding:F,projectedAnchorX:V,projectedAnchorY:Y,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:le},T.textFeatureIndex=he}if(u<p){const{x1:P,y1:A,x2:R,y2:D,padding:F,projectedAnchorX:V,projectedAnchorY:Y,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:le,featureIndex:he}=e.get(u);T.verticalTextBox={x1:P,y1:A,x2:R,y2:D,padding:F,projectedAnchorX:V,projectedAnchorY:Y,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:le},T.verticalTextFeatureIndex=he}if(h<b){const{x1:P,y1:A,x2:R,y2:D,padding:F,projectedAnchorX:V,projectedAnchorY:Y,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:le,featureIndex:he}=e.get(h);T.iconBox={x1:P,y1:A,x2:R,y2:D,padding:F,projectedAnchorX:V,projectedAnchorY:Y,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:le},T.iconFeatureIndex=he}if(y<x){const{x1:P,y1:A,x2:R,y2:D,padding:F,projectedAnchorX:V,projectedAnchorY:Y,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:le,featureIndex:he}=e.get(y);T.verticalIconBox={x1:P,y1:A,x2:R,y2:D,padding:F,projectedAnchorX:V,projectedAnchorY:Y,projectedAnchorZ:ie,tileAnchorX:oe,tileAnchorY:le},T.verticalIconFeatureIndex=he}return T}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const i=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(e,r){const i=e.placedSymbolArray.get(r),u=i.vertexStartIndex+4*i.numGlyphs;for(let p=i.vertexStartIndex;p<u;p+=4)e.indexArray.emplaceBack(p,p+1,p+2),e.indexArray.emplaceBack(p+1,p+2,p+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),i=Math.cos(e),u=[],p=[],h=[];for(let b=0;b<this.symbolInstances.length;++b){h.push(b);const y=this.symbolInstances.get(b);u.push(0|Math.round(r*y.tileAnchorX+i*y.tileAnchorY)),p.push(y.featureIndex)}return h.sort((b,y)=>u[b]-u[y]||p[y]-p[b]),h}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let e=0;e<this.symbolInstances.length;++e)this.symbolInstanceIndexesSortedZOffset.push(e)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((e,r)=>this.symbolInstances.get(r).zOffset-this.symbolInstances.get(e).zOffset)}addToSortKeyRanges(e,r){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===r?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const i=this.symbolInstances.get(r);this.featureSortOrder.push(i.featureIndex);const{rightJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:p,leftJustifiedTextSymbolIndex:h,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:y,verticalPlacedIconSymbolIndex:x}=i;u>=0&&this.addIndicesForPlacedSymbol(this.text,u),p>=0&&p!==u&&this.addIndicesForPlacedSymbol(this.text,p),h>=0&&h!==p&&h!==u&&this.addIndicesForPlacedSymbol(this.text,h),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),y>=0&&this.addIndicesForPlacedSymbol(this.icon,y),x>=0&&this.addIndicesForPlacedSymbol(this.icon,x)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}qt(m1,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),m1.MAX_GLYPHS=65535,m1.addDynamicAttributes=h1;var nm=m1;const tL=en([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:nL}=tL,aL=en([{name:"a_packed",components:4,type:"Float32"}]),{members:rL}=aL,sL=Xg.types,iL=Math.cos(Math.PI/180*37.5);class g1{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new Si,this.layoutVertexArray2=new ua,this.indexArray=new ba,this.programConfigurations=new ou(e.layers,e.zoom),this.segments=new Wa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,i,u){this.hasPattern=z4("line",this.layers,r);const p=this.layers[0].layout.get("line-sort-key"),h=[];for(const{feature:T,id:P,index:A,sourceLayerIndex:R}of e){const D=this.layers[0]._featureFilter.needGeometry,F=du(T,D);if(!this.layers[0]._featureFilter.filter(new Ee(this.zoom),F,i))continue;const V=p?p.evaluate(F,{},i):void 0,Y={id:P,properties:T.properties,type:T.type,sourceLayerIndex:R,index:A,geometry:D?F.geometry:Oc(T,i,u),patterns:{},sortKey:V};h.push(Y)}p&&h.sort((T,P)=>T.sortKey-P.sortKey);const{lineAtlas:b,featureIndex:y}=r,x=this.addConstantDashes(b);for(const T of h){const{geometry:P,index:A,sourceLayerIndex:R}=T;if(x&&this.addFeatureDashes(T,b),this.hasPattern){const D=A4("line",this.layers,T,this.zoom,r);this.patternFeatures.push(D)}else this.addFeature(T,P,A,i,b.positions,r.availableImages,r.brightness);y.insert(e[A].feature,P,A,R,this.index)}}addConstantDashes(e){let r=!1;for(const i of this.layers){const u=i.paint.get("line-dasharray").value,p=i.layout.get("line-cap").value;if(u.kind!=="constant"||p.kind!=="constant")r=!0;else{const h=p.value,b=u.value;if(!b)continue;e.addDash(b,h)}}return r}addFeatureDashes(e,r){const i=this.zoom;for(const u of this.layers){const p=u.paint.get("line-dasharray").value,h=u.layout.get("line-cap").value;if(p.kind==="constant"&&h.kind==="constant")continue;let b,y;if(p.kind==="constant"){if(b=p.value,!b)continue}else b=p.evaluate({zoom:i},e);y=h.kind==="constant"?h.value:h.evaluate({zoom:i},e),r.addDash(b,y),e.patterns[u.id]=r.getKey(b,y)}}update(e,r,i,u,p){const h=Object.keys(e).length!==0;h&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(e,r,h?this.stateDependentLayers:this.layers,i,u,p)}addFeatures(e,r,i,u,p,h){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,r,i,u,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,rL)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nL),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,i,u,p,h,b){const y=this.layers[0].layout,x=y.get("line-join").evaluate(e,{}),T=y.get("line-cap").evaluate(e,{}),P=y.get("line-miter-limit"),A=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const R of r)this.addLine(R,e,x,T,P,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,h,u,b)}addLine(e,r,i,u,p,h){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Y=0;Y<e.length-1;Y++)this.totalDistance+=e[Y].dist(e[Y+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=sL[r.type]==="Polygon";let y=e.length;for(;y>=2&&e[y-1].equals(e[y-2]);)y--;let x=0;for(;x<y-1&&e[x].equals(e[x+1]);)x++;if(y<(b?3:2))return;i==="bevel"&&(p=1.05);const T=this.overscaling<=16?15*vt/(512*this.overscaling):0,P=this.segments.prepareSegment(10*y,this.layoutVertexArray,this.indexArray);let A,R,D,F,V;this.e1=this.e2=-1,b&&(A=e[y-2],V=e[x].sub(A)._unit()._perp());for(let Y=x;Y<y;Y++){if(D=Y===y-1?b?e[x+1]:void 0:e[Y+1],D&&e[Y].equals(D))continue;V&&(F=V),A&&(R=A),A=e[Y],V=D?D.sub(A)._unit()._perp():F,F=F||V;let ie=F.add(V);ie.x===0&&ie.y===0||ie._unit();const oe=F.x*V.x+F.y*V.y,le=ie.x*V.x+ie.y*V.y,he=le!==0?1/le:1/0,_e=2*Math.sqrt(2-2*le),ze=le<iL&&R&&D,De=F.x*V.y-F.y*V.x>0;if(ze&&Y>x){const je=A.dist(R);if(je>2*T){const at=A.sub(A.sub(R)._mult(T/je)._round());this.updateDistance(R,at),this.addCurrentVertex(at,F,0,0,P),R=at}}const Ne=R&&D;let He=Ne?i:b?"butt":u;if(Ne&&He==="round"&&(he<h?He="miter":he<=2&&(He="fakeround")),He==="miter"&&he>p&&(He="bevel"),He==="bevel"&&(he>2&&(He="flipbevel"),he<p&&(He="miter")),R&&this.updateDistance(R,A),He==="miter")ie._mult(he),this.addCurrentVertex(A,ie,0,0,P);else if(He==="flipbevel"){if(he>100)ie=V.mult(-1);else{const je=he*F.add(V).mag()/F.sub(V).mag();ie._perp()._mult(je*(De?-1:1))}this.addCurrentVertex(A,ie,0,0,P),this.addCurrentVertex(A,ie.mult(-1),0,0,P)}else if(He==="bevel"||He==="fakeround"){const je=-Math.sqrt(he*he-1),at=De?je:0,_t=De?0:je;if(R&&this.addCurrentVertex(A,F,at,_t,P),He==="fakeround"){const et=Math.round(180*_e/Math.PI/20);for(let ht=1;ht<et;ht++){let Qe=ht/et;if(Qe!==.5){const $t=Qe-.5;Qe+=Qe*$t*(Qe-1)*((1.0904+oe*(oe*(3.55645-1.43519*oe)-3.2452))*$t*$t+(.848013+oe*(.215638*oe-1.06021)))}const Lt=V.sub(F)._mult(Qe)._add(F)._unit()._mult(De?-1:1);this.addHalfVertex(A,Lt.x,Lt.y,!1,De,0,P)}}D&&this.addCurrentVertex(A,V,-at,-_t,P)}else if(He==="butt")this.addCurrentVertex(A,ie,0,0,P);else if(He==="square"){const je=R?1:-1;R||this.addCurrentVertex(A,ie,je,je,P),this.addCurrentVertex(A,ie,0,0,P),R&&this.addCurrentVertex(A,ie,je,je,P)}else He==="round"&&(R&&(this.addCurrentVertex(A,F,0,0,P),this.addCurrentVertex(A,F,1,1,P,!0)),D&&(this.addCurrentVertex(A,V,-1,-1,P,!0),this.addCurrentVertex(A,V,0,0,P)));if(ze&&Y<y-1){const je=A.dist(D);if(je>2*T){const at=A.add(D.sub(A)._mult(T/je)._round());this.updateDistance(A,at),this.addCurrentVertex(at,V,0,0,P),A=at}}}}addCurrentVertex(e,r,i,u,p,h=!1){const b=r.y*u-r.x,y=-r.y-r.x*u;this.addHalfVertex(e,r.x+r.y*i,r.y-r.x*i,h,!1,i,p),this.addHalfVertex(e,b,y,h,!0,-u,p)}addHalfVertex({x:e,y:r},i,u,p,h,b,y){this.layoutVertexArray.emplaceBack((e<<1)+(p?1:0),(r<<1)+(h?1:0),Math.round(63*i)+128,Math.round(63*u)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const x=y.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,x),y.primitiveLength++),h?this.e2=x:this.e1=x}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}}qt(g1,"LineBucket",{omit:["layers","patternFeatures"]});class Pl{constructor(e,r,i,u){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(r,u)}update(e,r,i){const{width:u,height:p}=e,{context:h}=this,{gl:b}=h;if(b.bindTexture(b.TEXTURE_2D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!r||r.premultiply!==!1)),i||this.size&&this.size[0]===u&&this.size[1]===p){const{x:y,y:x}=i||{x:0,y:0};if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap)b.texSubImage2D(b.TEXTURE_2D,0,y,x,b.RGBA,b.UNSIGNED_BYTE,e);else{let T=this.format,P=b.UNSIGNED_BYTE;this.format===b.R32F&&(T=b.RED,P=b.FLOAT),b.texSubImage2D(b.TEXTURE_2D,0,y,x,u,p,T,P,e.data)}}else if(this.size=[u,p],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap){let y=this.format;this.format===b.R8&&(y=b.RED),b.texImage2D(b.TEXTURE_2D,0,this.format,y,b.UNSIGNED_BYTE,e)}else{let y=this.format,x=this.format,T=b.UNSIGNED_BYTE;this.format===b.DEPTH_COMPONENT&&(y=b.DEPTH_COMPONENT16,T=b.UNSIGNED_SHORT),this.format===b.R8&&(x=b.RED),this.format===b.R32F&&(T=b.FLOAT,x=b.RED),b.texImage2D(b.TEXTURE_2D,0,y,u,p,0,x,T,e.data)}this.useMipmap=!!(r&&r.useMipmap),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(e,r,i=!1){const{context:u}=this,{gl:p}=u;p.bindTexture(p.TEXTURE_2D,this.texture),e!==this.minFilter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,e),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap&&!i?e===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),r!==this.wrapS&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,r),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,r),this.wrapS=r)}bindExtraParam(e,r,i,u){const{context:p}=this,{gl:h}=p;h.bindTexture(h.TEXTURE_2D,this.texture),r!==this.magFilter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,r),this.magFilter=r),e!==this.minFilter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,this.useMipmap?e===h.NEAREST?h.NEAREST_MIPMAP_NEAREST:h.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),i!==this.wrapS&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,i),this.wrapS=i),u!==this.wrapT&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,u),this.wrapT=u)}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class b1{constructor(e,r){this.context=e,this.texture=r}bind(e,r){const{context:i}=this,{gl:u}=i;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.minFilter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,e),this.minFilter=e),r!==this.wrapS&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,r),this.wrapS=r)}}const Po=32,Bc=33,bu=new Uint16Array(8184);for(let n=0;n<2046;n++){let e=n+2,r=0,i=0,u=0,p=0,h=0,b=0;for(1&e?u=p=h=Po:r=i=b=Po;(e>>=1)>1;){const x=r+u>>1,T=i+p>>1;1&e?(u=r,p=i,r=h,i=b):(r=u,i=p,u=h,p=b),h=x,b=T}const y=4*n;bu[y+0]=r,bu[y+1]=i,bu[y+2]=u,bu[y+3]=p}const Nc=new Uint16Array(2178),_u=new Uint8Array(1089),_1=new Uint16Array(1089);function r2(n){return n===0?-.03125:n===32?.03125:0}var y1=en([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const s2={type:2,extent:vt,loadGeometry:()=>[[new ge(0,0),new ge(vt+1,0),new ge(vt+1,vt+1),new ge(0,vt+1),new ge(0,0)]]};class W4{constructor(e,r,i,u,p){this.tileID=e,this.uid=Zn(),this.uses=0,this.tileSize=r,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=p,u&&u.style&&(this._lastUpdatedBrightness=u.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const r=e+this.timeAdded;r<Gr.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=mu(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,r,i){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,p){const h={};if(!p)return h;for(const b of u){const y=b.layerIds.map(x=>p.getLayer(x)).filter(Boolean);if(y.length!==0){b.layers=y,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(x=>y.filter(T=>T.id===x)[0]));for(const x of y)h[x.fqid]=b}}return h}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const p=this.buckets[u];if(p instanceof nm){if(this.hasSymbolBuckets=!0,!i)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const p=this.buckets[u];if(p instanceof nm&&p.hasRTLText){this.hasRTLText=!0,Ce.isLoading()||Ce.isLoaded()||pe()!=="deferred"||we();break}}this.queryPadding=0;for(const u in this.buckets){const p=this.buckets[u],h=r.style.getOwnLayer(u);if(!h)continue;const b=h.queryRadius(p);this.queryPadding=Math.max(this.queryPadding,b)}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas),this._lastUpdatedBrightness=e.brightness}else this.collisionBoxArray=new Oy}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.fqid]}upload(e){for(const u in this.buckets){const p=this.buckets[u];p.uploadPending()&&p.upload(e)}const r=e.gl,i=this.imageAtlas;if(i&&!i.uploaded){const u=!!Object.keys(i.patternPositions).length;this.imageAtlasTexture=new Pl(e,i.image,r.RGBA,{useMipmap:u}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pl(e,this.glyphAtlasImage,r.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Pl(e,this.lineAtlas.image,r.R8),this.lineAtlas.uploaded=!0)}prepare(e,r,i){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture,i),!r||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const u=r.style.getBrightness();(this._lastUpdatedBrightness||u)&&(this._lastUpdatedBrightness&&u&&Math.abs(this._lastUpdatedBrightness-u)<.001||(this._lastUpdatedBrightness=u,this.updateBuckets(void 0,r)))}queryRenderedFeatures(e,r,i,u,p,h,b,y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:b,transform:h,params:p,tileTransform:this.tileTransform},e,r,i):{}}querySourceFeatures(e,r){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const u=i.loadVTLayers(),p=r?r.sourceLayer:"",h=u._geojsonTileLayer||u[p];if(!h)return;const b=Np(r&&r.filter),{z:y,x,y:T}=this.tileID.canonical,P={z:y,x,y:T};for(let A=0;A<h.length;A++){const R=h.feature(A);if(b.needGeometry){const V=du(R,!0);if(!b.filter(new Ee(this.tileID.overscaledZ),V,this.tileID.canonical))continue}else if(!b.filter(new Ee(this.tileID.overscaledZ),R))continue;const D=i.getId(R,p),F=new _9(R,y,x,T,D);F.tile=P,e.push(F)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}bucketsLoaded(){for(const e in this.buckets)if(this.buckets[e].uploadPending())return!1;return!0}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const i=dt(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const i=Date.now();let u=!1;if(this.expirationTime>i)u=!1;else if(r)if(this.expirationTime<r)u=!0;else{const p=this.expirationTime-r;p?this.expirationTime=i+Math.max(p,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0&&r&&this.updateBuckets(e,r)}updateBuckets(e,r){if(!this.latestFeatureIndex)return;const i=this.latestFeatureIndex.loadVTLayers(),u=r.style.listImages(),p=r.style.getBrightness();for(const h in this.buckets){if(!r.style.hasLayer(h))continue;const b=this.buckets[h],y=b.layers[0].sourceLayer||"_geojsonTileLayer",x=i[y];let T={};if(e&&(T=e[y],!x||!T||Object.keys(T).length===0))continue;if(b.update(T,x,u,this.imageAtlas&&this.imageAtlas.patternPositions||{},p),b instanceof g1||b instanceof Zg){const A=r.style.getOwnSourceCache(b.layers[0].source);r._terrain&&r._terrain.enabled&&A&&b.programConfigurations.needsUpload&&r._terrain._clearRenderCacheForTile(A.id,this.tileID)}const P=r&&r.style&&r.style.getOwnLayer(h);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Gr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Gr.now()+e}setTexture(e,r){const i=r.context,u=i.gl;this.texture=this.texture||r.getTileTexture(e.width),this.texture&&this.texture instanceof Pl?this.texture.update(e,{useMipmap:!0}):(this.texture=new Pl(i,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE))}setDependencies(e,r){const i={};for(const u of r)i[u]=!0;this.dependencies[e]=i}hasDependency(e,r){for(const i of e){const u=this.dependencies[i];if(u){for(const p of r)if(u[p])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,r){if(!r||r.name==="mercator"||this._tileDebugBuffer)return;const i=Oc(s2,this.tileID.canonical,this.tileTransform)[0],u=new An,p=new Lh;for(let h=0;h<i.length;h++){const{x:b,y}=i[h];u.emplaceBack(b,y),p.emplaceBack(h)}p.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(p),this._tileDebugBuffer=e.createVertexBuffer(u,Fh.members),this._tileDebugSegments=Wa.simpleSegment(0,0,u.length,p.length)}_makeTileBoundsBuffers(e,r){if(this._tileBoundsBuffer||!r||r.name==="mercator")return;const i=Oc(s2,this.tileID.canonical,this.tileTransform)[0];let u,p;if(this.isRaster){const h=function(b,y){const x=mu(b,y),T=Math.pow(2,b.z);for(let V=0;V<Bc;V++)for(let Y=0;Y<Bc;Y++){const ie=Ei((b.x+(Y+r2(Y))/Po)/T),oe=Qr((b.y+(V+r2(V))/Po)/T),le=y.project(ie,oe),he=V*Bc+Y;Nc[2*he+0]=Math.round((le.x*x.scale-x.x)*vt),Nc[2*he+1]=Math.round((le.y*x.scale-x.y)*vt)}_u.fill(0),_1.fill(0);for(let V=2045;V>=0;V--){const Y=4*V,ie=bu[Y+0],oe=bu[Y+1],le=bu[Y+2],he=bu[Y+3],_e=ie+le>>1,ze=oe+he>>1,De=_e+ze-oe,Ne=ze+ie-_e,He=oe*Bc+ie,je=he*Bc+le,at=ze*Bc+_e,_t=Math.hypot((Nc[2*He+0]+Nc[2*je+0])/2-Nc[2*at+0],(Nc[2*He+1]+Nc[2*je+1])/2-Nc[2*at+1])>=16;_u[at]=_u[at]||(_t?1:0),V<1022&&(_u[at]=_u[at]||_u[(oe+Ne>>1)*Bc+(ie+De>>1)]||_u[(he+Ne>>1)*Bc+(le+De>>1)])}const P=new ma,A=new ba;let R=0;function D(V,Y){const ie=Y*Bc+V;return _1[ie]===0&&(P.emplaceBack(Nc[2*ie+0],Nc[2*ie+1],V*vt/Po,Y*vt/Po),_1[ie]=++R),_1[ie]-1}function F(V,Y,ie,oe,le,he){const _e=V+ie>>1,ze=Y+oe>>1;if(Math.abs(V-le)+Math.abs(Y-he)>1&&_u[ze*Bc+_e])F(le,he,V,Y,_e,ze),F(ie,oe,le,he,_e,ze);else{const De=D(V,Y),Ne=D(ie,oe),He=D(le,he);A.emplaceBack(De,Ne,He)}}return F(0,0,Po,Po,Po,0),F(Po,Po,0,0,0,Po),{vertices:P,indices:A}}(this.tileID.canonical,r);u=h.vertices,p=h.indices}else{u=new ma,p=new ba;for(const{x:b,y}of i)u.emplaceBack(b,y,0,0);const h=Hg(u.int16,void 0,4);for(let b=0;b<h.length;b+=3)p.emplaceBack(h[b],h[b+1],h[b+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,y1.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(p),this._tileBoundsSegments=Wa.simpleSegment(0,0,u.length,p.length)}_makeGlobeTileDebugBuffers(e,r){const i=r.projection;if(!i||i.name!=="globe"||r.freezeTileCoverage)return;const u=this.tileID.canonical,p=Gh(R8(u,r)),h=Sl(r.zoom);let b;h>0&&(b=o.m.invert(new Float64Array(16),r.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,u,r,p,b,h),this._makeGlobeTileDebugTextBuffer(e,u,r,p,b,h)}_globePoint(e,r,i,u,p,h,b){let y=Vh(e,r,i);if(h){const x=1<<i.z,T=Lc(u.center.lng),P=Dc(u.center.lat),A=(i.x+.5)/x-T;let R=0;A>.5?R=-1:A<-.5&&(R=1);let D=(e/vt+i.x)/x+R,F=(r/vt+i.y)/x;D=(D-T)*u._pixelsPerMercatorPixel+T,F=(F-P)*u._pixelsPerMercatorPixel+P;const V=[D*u.worldSize,F*u.worldSize,0];o.v.transformMat4(V,V,h),y=wl(y,V,b)}return o.v.transformMat4(y,y,p)}_makeGlobeTileDebugBorderBuffer(e,r,i,u,p,h){const b=new An,y=new Lh,x=new Pa,T=(A,R,D,F,V)=>{const Y=(D-A)/(V-1),ie=(F-R)/(V-1),oe=b.length;for(let le=0;le<V;le++){const he=A+le*Y,_e=R+le*ie;b.emplaceBack(he,_e);const ze=this._globePoint(he,_e,r,i,u,p,h);x.emplaceBack(ze[0],ze[1],ze[2]),y.emplaceBack(oe+le)}},P=vt;T(0,0,P,0,16),T(P,0,P,P,16),T(P,P,0,P,16),T(0,P,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(y),this._tileDebugBuffer=e.createVertexBuffer(b,Fh.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(x,T8.members),this._tileDebugSegments=Wa.simpleSegment(0,0,b.length,y.length)}_makeGlobeTileDebugTextBuffer(e,r,i,u,p,h){const b=vt/4,y=new An,x=new ba,T=new Pa,P=25;x.reserve(32),y.reserve(P),T.reserve(P);const A=(R,D)=>P*R+D;for(let R=0;R<P;R++){const D=R*b;for(let F=0;F<P;F++){const V=F*b;y.emplaceBack(V,D);const Y=this._globePoint(V,D,r,i,u,p,h);T.emplaceBack(Y[0],Y[1],Y[2])}}for(let R=0;R<4;R++)for(let D=0;D<4;D++){const F=A(R,D),V=A(R,D+1),Y=A(R+1,D),ie=A(R+1,D+1);x.emplaceBack(F,V,Y),x.emplaceBack(Y,V,ie)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(x),this._tileDebugTextBuffer=e.createVertexBuffer(y,Fh.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(T,T8.members),this._tileDebugTextSegments=Wa.simpleSegment(0,0,P,32)}destroy(e=!1){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!e&&this.texture&&this.texture instanceof Pl&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.latestFeatureIndex=null,this.state="unloaded"}}class oL{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,i){const u=e.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const p={value:r,timeout:void 0};if(i!==void 0&&(p.timeout=setTimeout(()=>{this.remove(e,p)},i)),this.data[u].push(p),this.order.push(u),this.order.length>this.max){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const i=e.wrapped().key,u=r===void 0?0:this.data[i].indexOf(r),p=this.data[i][u];return this.data[i].splice(u,1),p.timeout&&clearTimeout(p.timeout),this.data[i].length===0&&delete this.data[i],this.onRemove(p.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const i in this.data)for(const u of this.data[i])e(u.value)||r.push(u);for(const i of r)this.remove(i.value.tileID,i)}}class Vd{constructor(e,r,i,u){this.id=Vd.uniqueIdxCounter,Vd.uniqueIdxCounter++,this.context=e;const p=e.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!i,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||u||r.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){this.id=Vd.uniqueIdxCounter,Vd.uniqueIdxCounter++;const r=this.context.gl;this.context.unbindVAO(),this.bind(),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Vd.uniqueIdxCounter=0;class of{constructor(e,r,i){this.func=e,this.mask=r,this.range=i}}of.ReadOnly=!1,of.ReadWrite=!0,of.disabled=new of(519,of.ReadOnly,[0,1]);const H4=7680;class Z4{constructor(e,r,i,u,p,h){this.test=e,this.ref=r,this.mask=i,this.fail=u,this.depthFail=p,this.pass=h}}Z4.disabled=new Z4({func:519,mask:0},0,0,H4,H4,H4);class zo{constructor(e,r,i,u){this.blendFunction=e,this.blendColor=r,this.mask=i,this.blendEquation=u}}zo.Replace=[1,0,1,0],zo.disabled=new zo(zo.Replace,wa.transparent,[!1,!1,!1,!1]),zo.unblended=new zo(zo.Replace,wa.transparent,[!0,!0,!0,!0]),zo.alphaBlended=new zo([1,771,1,771],wa.transparent,[!0,!0,!0,!0]),zo.multiply=new zo([774,0,774,0],wa.transparent,[!0,!0,!0,!0]);const Y4=1029,X4=2305;class sc{constructor(e,r,i){this.enable=e,this.mode=r,this.frontFace=i}}sc.disabled=new sc(!1,Y4,X4),sc.backCCW=new sc(!0,Y4,X4),sc.backCW=new sc(!0,Y4,2304),sc.frontCW=new sc(!0,1028,2304),sc.frontCCW=new sc(!0,1028,X4);class Gd extends qr{constructor(e,r,i){super(),this.id=e,this._onlySymbols=i,r.on("data",u=>{u.dataType==="source"&&u.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&u.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),r.on("error",()=>{this._sourceErrored=!0}),this._source=r,this._tiles={},this._cache=new oL(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this._coveredTiles={},this._shadowCasterTiles={},this._state=new dk,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const r=this._tiles[e];if(r.state!=="errored"&&(r.state!=="loaded"||!r.bucketsLoaded()))return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,r){return e.isSymbolTile=this._onlySymbols,e.isExtraShadowCaster=this._shadowCasterTiles[e.tileID.key],this._source.loadTile(e,r)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const i=this._tiles[r];i.upload(e),i.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Sn(this._tiles).map(e=>e.tileID).sort(i2).map(e=>e.key)}getRenderableIds(e,r){const i=[];for(const u in this._tiles)this._isIdRenderable(+u,e,r)&&i.push(this._tiles[u]);return e?i.sort((u,p)=>{const h=u.tileID,b=p.tileID,y=new ge(h.canonical.x,h.canonical.y)._rotate(this.transform.angle),x=new ge(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return h.overscaledZ-b.overscaledZ||x.y-y.y||x.x-y.x}).map(u=>u.tileID.key):i.map(u=>u.tileID).sort(i2).map(u=>u.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r,i){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())&&(i||!this._shadowCasterTiles[e])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,r){const i=this._tiles[e];i&&(i.state!=="loading"&&(i.state=r),this._loadTile(i,this._tileLoaded.bind(this,i,e,r)))}_tileLoaded(e,r,i,u){if(u)if(e.state="errored",u.status!==404)this._source.fire(new bs(u,{tile:e}));else{if(!(e.tileID.key in this._loadedParentTiles))return void this._source.fire(new rs("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id}));if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const p=this.map.painter.terrain;this.update(this.transform,p.getScaledDemTileSize(),!0),p.resetTileLookupCache(this.id)}else this.update(this.transform)}else e.timeAdded=Gr.now(),i==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new rs("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const r=this.getRenderableIds();for(let u=0;u<r.length;u++){const p=r[u];if(e.neighboringTiles&&e.neighboringTiles[p]){const h=this.getTileByID(p);i(e,h),i(h,e)}}function i(u,p){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let h=p.tileID.canonical.x-u.tileID.canonical.x;const b=p.tileID.canonical.y-u.tileID.canonical.y,y=Math.pow(2,u.tileID.canonical.z),x=p.tileID.key;h===0&&b===0||Math.abs(b)>1||(Math.abs(h)>1&&(Math.abs(h+y)===1?h+=y:Math.abs(h-y)===1&&(h-=y)),p.dem&&u.dem&&(u.dem.backfillBorder(p.dem,h,b),u.neighboringTiles&&u.neighboringTiles[x]&&(u.neighboringTiles[x].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,i,u){for(const p in this._tiles){let h=this._tiles[p];if(u[p]||!h.hasData()||h.tileID.overscaledZ<=r||h.tileID.overscaledZ>i)continue;let b=h.tileID;for(;h&&h.tileID.overscaledZ>r+1;){const x=h.tileID.scaledTo(h.tileID.overscaledZ-1);h=this._tiles[x.key],h&&h.hasData()&&(b=x)}let y=b;for(;y.overscaledZ>r;)if(y=y.scaledTo(y.overscaledZ-1),e[y.key]){u[b.key]=b;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=r?i:null}for(let i=e.overscaledZ-1;i>=r;i--){const u=e.scaledTo(i),p=this._getLoadedTile(u);if(p)return p}}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,r){r=r||this._source.tileSize;const i=Math.ceil(e.width/r)+1,u=Math.ceil(e.height/r)+1,p=Math.floor(i*u*5),h=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,p):p,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,h):h;this._cache.setMaxSize(b)}handleWrapJump(e){const r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){const i={};for(const u in this._tiles){const p=this._tiles[u];p.tileID=p.tileID.unwrapTo(p.tileID.wrap+r),i[p.tileID.key]=p}this._tiles=i;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,r,i,u){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!i)return;let p;if(this.updateCacheSize(e,r),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(y=>new Hr(y.canonical.z,y.wrap,y.canonical.z,y.canonical.x,y.canonical.y)):(p=e.coveringTiles({tileSize:r||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(y=>this._source.hasTile(y)))):p=[],p.length>0&&this.castsShadows&&u&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!J4(this._source.type)){const y=e.coveringZoomLevel({tileSize:r||this._source.tileSize,roundZoom:this._source.roundZoom&&!i}),x=Math.min(y,this._source.maxzoom),T=e.extendTileCoverForShadows(p,u,x);for(const P of T)this._shadowCasterTiles[P.key]=!0,p.push(P)}const h=this._updateRetainedTiles(p);if(J4(this._source.type)&&p.length!==0){const y={},x={},T=Object.keys(h);for(const A of T){const R=h[A],D=this._tiles[A];if(!D||D.fadeEndTime&&D.fadeEndTime<=Gr.now())continue;const F=this.findLoadedParent(R,Math.max(R.overscaledZ-Gd.maxOverzooming,this._source.minzoom));F&&(this._addTile(F.tileID),y[F.tileID.key]=F.tileID),x[A]=R}const P=p[p.length-1].overscaledZ;for(const A in this._tiles){const R=this._tiles[A];if(h[A]||!R.hasData())continue;let D=R.tileID;for(;D.overscaledZ>P;){D=D.scaledTo(D.overscaledZ-1);const F=this._tiles[D.key];if(F&&F.hasData()&&x[D.key]){h[A]=R.tileID;break}}}for(const A in y)h[A]||(this._coveredTiles[A]=!0,h[A]=y[A])}for(const y in h)this._tiles[y].clearFadeHold();const b=function(y,x){const T=[];for(const P in y)P in x||T.push(P);return T}(this._tiles,h);for(const y of b){const x=this._tiles[y];x.hasSymbolBuckets&&!x.holdingForFade()?x.setHoldDuration(this.map._fadeDuration):x.hasSymbolBuckets&&!x.symbolFadeFinished()||this._removeTile(+y)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const r={};if(e.length===0)return r;const i={},u=e.reduce((x,T)=>Math.min(x,T.overscaledZ),1/0),p=e[0].overscaledZ,h=Math.max(p-Gd.maxOverzooming,this._source.minzoom),b=Math.max(p+Gd.maxUnderzooming,this._source.minzoom),y={};for(const x of e){const T=this._addTile(x);r[x.key]=x,T.hasData()||u<this._source.maxzoom&&(y[x.key]=x)}this._retainLoadedChildren(y,u,b,r);for(const x of e){let T=this._tiles[x.key];if(T.hasData())continue;if(x.canonical.z>=this._source.maxzoom){const A=x.children(this._source.maxzoom)[0],R=this.getTile(A);if(R&&R.hasData()){r[A.key]=A;continue}}else{const A=x.children(this._source.maxzoom);if(r[A[0].key]&&r[A[1].key]&&r[A[2].key]&&r[A[3].key])continue}let P=T.wasRequested();for(let A=x.overscaledZ-1;A>=h;--A){const R=x.scaledTo(A);if(i[R.key]||(i[R.key]=!0,T=this.getTile(R),!T&&P&&(T=this._addTile(R)),T&&(r[R.key]=R,P=T.wasRequested(),T.hasData())))break}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let i,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){i=this._loadedParentTiles[u.key];break}r.push(u.key);const p=u.scaledTo(u.overscaledZ-1);if(i=this._getLoadedTile(p),i)break;u=p}for(const p of r)this._loadedParentTiles[p]=i}}_addTile(e){let r=this._tiles[e.key];if(r)return r.isExtraShadowCaster!==!0||this._shadowCasterTiles[e.key]||this._reloadTile(e.key,"reloading"),r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const i=!!r;if(!i){const u=this.map?this.map.painter:null;r=new W4(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))}return r?(r.uses++,this._tiles[e.key]=r,i||this._source.fire(new rs("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const i=r.getExpiryTimeout();i&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},i))}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,r,i){const u=[],p=this.transform;if(!p)return u;const h=p.projection.name==="globe",b=Lc(p.center.lng);for(const y in this._tiles){const x=this._tiles[y];if(i&&x.clearQueryDebugViz(),x.holdingForFade())continue;let T;if(h){const P=x.tileID.canonical;if(P.z===0){const A=[Math.abs(ke(b,...am(P,-1))-b),Math.abs(ke(b,...am(P,1))-b)];T=[0,2*A.indexOf(Math.min(...A))-1]}else{const A=[Math.abs(ke(b,...am(P,-1))-b),Math.abs(ke(b,...am(P,0))-b),Math.abs(ke(b,...am(P,1))-b)];T=[A.indexOf(Math.min(...A))-1]}}else T=[0];for(const P of T){const A=e.containsTile(x,p,r,P);A&&u.push(A)}}return u}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(e){return this._getRenderableCoordinates(e)}_getRenderableCoordinates(e,r){const i=this.getRenderableIds(e,r).map(p=>this._tiles[p].tileID),u=this.transform.projection.name==="globe";for(const p of i)p.projMatrix=this.transform.calculateProjMatrix(p.toUnwrapped()),p.expandedProjMatrix=u?this.transform.calculateProjMatrix(p.toUnwrapped(),!1,!0):p.projMatrix;return i}sortCoordinatesByDistance(e){const r=e.slice(),i=this.transform._camera.position,u=this.transform._camera.forward(),p={};for(const h of r){const b=1/(1<<h.canonical.z);p[h.key]=((h.canonical.x+.5)*b+h.wrap-i[0])*u[0]+((h.canonical.y+.5)*b-i[1])*u[1]-i[2]*u[2]}return r.sort((h,b)=>p[h.key]-p[b.key]),r}hasTransition(){if(this._source.hasTransition())return!0;if(J4(this._source.type))for(const e in this._tiles){const r=this._tiles[e];if(r.fadeEndTime!==void 0&&r.fadeEndTime>=Gr.now())return!0}return!1}setFeatureState(e,r,i){this._state.updateState(e=e||"_geojsonTileLayer",r,i)}removeFeatureState(e,r,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,i)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,i){const u=this._tiles[e];u&&u.setDependencies(r,i)}reloadTilesForDependencies(e,r){for(const i in this._tiles)this._tiles[i].hasDependency(e,r)&&this._reloadTile(+i,"reloading");this._cache.filter(i=>!i.hasDependency(e,r))}_preloadTiles(e,r){if(!this._sourceLoaded){const b=()=>{this._sourceLoaded&&(this._source.off("data",b),this._preloadTiles(e,r))};return void this._source.on("data",b)}const i=new Map,u=Array.isArray(e)?e:[e],p=this.map.painter.terrain,h=this.usedForTerrain&&p?p.getScaledDemTileSize():this._source.tileSize;for(const b of u){const y=b.coveringTiles({tileSize:h,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const x of y)i.set(x.key,x);this.usedForTerrain&&b.updateElevation(!1)}Nt(Array.from(i.values()),(b,y)=>{const x=new W4(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(x,T=>{this._source.type==="raster-dem"&&x.dem&&this._backfillDEM(x),y(T,x)})},r)}}function i2(n,e){const r=Math.abs(2*n.wrap)-+(n.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return n.overscaledZ-e.overscaledZ||i-r||e.canonical.y-n.canonical.y||e.canonical.x-n.canonical.x}function J4(n){return n==="raster"||n==="image"||n==="video"||n==="custom"}function am(n,e){const r=1<<n.z;return[n.x/r+e,(n.x+1)/r+e]}Gd.maxOverzooming=10,Gd.maxUnderzooming=3;const cL=en([{name:"a_pos_3f",components:3,type:"Float32"}]),lL=en([{name:"a_color_3f",components:3,type:"Float32"}]),uL=en([{name:"a_color_4f",components:4,type:"Float32"}]),dL=en([{name:"a_uv_2f",components:2,type:"Float32"}]),pL=en([{name:"a_normal_3f",components:3,type:"Float32"}]),fL=en([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),hL=en([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);function o2(n,e){const r=v1(n.projection,n.zoom,n.width,n.height),i=function(p,h,b,y,x){const T=new da(b.lng-180*yu,b.lat),P=new da(b.lng+180*yu,b.lat),A=p.project(T.lng,T.lat),R=p.project(P.lng,P.lat),D=-Math.atan2(R.y-A.y,R.x-A.x),F=os.fromLngLat(b);F.y=ke(F.y,-1+yu,1-yu);const V=F.toLngLat(),Y=p.project(V.lng,V.lat),ie=os.fromLngLat(V);ie.x+=yu;const oe=ie.toLngLat(),le=p.project(oe.lng,oe.lat),he=u2(le.x-Y.x,le.y-Y.y,D),_e=os.fromLngLat(V);_e.y+=yu;const ze=_e.toLngLat(),De=p.project(ze.lng,ze.lat),Ne=u2(De.x-Y.x,De.y-Y.y,D),He=Math.abs(he.x)/Math.abs(Ne.y),je=o.m.identity([]);o.m.rotateZ(je,je,-D*(1-(x?0:y)));const at=o.m.identity([]);return o.m.scale(at,at,[1,1-(1-He)*y,1]),at[4]=-Ne.x/Ne.y*y,o.m.rotateZ(at,at,D),o.m.multiply(at,je,at),at}(n.projection,0,n.center,r,e),u=c2(n);return o.m.scale(i,i,[u,u,1]),i}function c2(n){const e=n.projection,r=v1(n.projection,n.zoom,n.width,n.height),i=l2(e,n.center),u=l2(e,da.convert(e.center));return Math.pow(2,i*r+(1-r)*u)}function v1(n,e,r,i,u=1/0){const p=n.range;if(!p)return 0;const h=Math.min(u,Math.max(r,i)),b=Math.log(h/1024)/Math.LN2;return Ct(p[0]+b,p[1]+b,e)}const yu=1/4e4;function l2(n,e){const r=ke(e.lat,-pr,pr),i=new da(e.lng-180*yu,r),u=new da(e.lng+180*yu,r),p=n.project(i.lng,r),h=n.project(u.lng,r),b=os.fromLngLat(i),y=os.fromLngLat(u),x=h.x-p.x,T=h.y-p.y,P=y.x-b.x,A=y.y-b.y,R=Math.sqrt((P*P+A*A)/(x*x+T*T));return Math.log(R)/Math.LN2}function u2(n,e,r){const i=Math.cos(r),u=Math.sin(r);return{x:n*i-e*u,y:n*u+e*i}}function d2(n,e,r){return e*(vt/(n.tileSize*Math.pow(2,r-n.tileID.overscaledZ)))}function p2(n,e,r){o.m.identity(n),o.m.rotateZ(n,n,Ue(e[2])),o.m.rotateX(n,n,Ue(e[0])),o.m.rotateY(n,n,Ue(e[1])),o.m.scale(n,n,r),o.m.multiply(n,n,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function x1(n,e,r,i,u,p,h,b){const y=[r[0]-e[0],r[1]-e[1],0],x=[i[0]-e[0],i[1]-e[1],0];if(o.v.length(y)<1e-12||o.v.length(x)<1e-12)return o.q.identity(n);const T=o.v.cross([],y,x);o.v.normalize(T,T),o.v.subtract(x,i,e),y[2]=(p-u)*b,x[2]=(h-u)*b;const P=y;return o.v.cross(P,y,x),o.v.normalize(P,P),o.q.rotationTo(n,T,P)}function f2(n,e,r=!1){const i=Sl(e.zoom),u=function(p,h,b){const y=h.worldSize,x=[p[12],p[13],p[14]],T=Qr(x[1]/y),P=Ei(x[0]/y),A=o.m.identity([]),R=js(1,T)*y,D=js(1,0)*y*Fd(T,h.zoom),F=1/d4(y);let V=D*F;if(b){const le=v1(h.projection,h.zoom,h.width,h.height,1024);V=F*h.projection.pixelSpaceConversion(h.center.lat,y,le)}const Y=Nd(T,P);o.v.add(Y,Y,o.v.scale([],o.v.normalize([],Y),R*V*x[2]));const ie=function(le){const he=[le[0],le[1],le[2]];let _e=[0,1,0];const ze=o.v.cross([],_e,he);return o.v.cross(_e,he,ze),o.v.squaredLength(_e)===0&&(_e=[0,1,0],o.v.cross(ze,he,_e)),o.v.normalize(ze,ze),o.v.normalize(_e,_e),o.v.normalize(he,he),[ze[0],ze[1],ze[2],0,_e[0],_e[1],_e[2],0,he[0],he[1],he[2],0,le[0],le[1],le[2],1]}(Y);o.m.scale(A,A,[V,V,V*R]),o.m.translate(A,A,[-x[0],-x[1],-x[2]]);const oe=o.m.multiply([],h.globeMatrix,ie);return o.m.multiply(oe,oe,A),o.m.multiply(oe,oe,p),oe}(n,e,r);if(i>0){const p=function(h,b){const y=b.worldSize,x=js(1,0)*y*Fd(b.center.lat,b.zoom)/d4(y),T=js(1,b.center.lat)*y,P=o.m.identity([]);return o.m.rotateY(P,P,Ue(b.center.lng)),o.m.rotateX(P,P,Ue(b.center.lat)),o.m.translate(P,P,[0,0,Ji]),o.m.scale(P,P,[x,x,x*T]),o.m.translate(P,P,[b.point.x-.5*y,b.point.y-.5*y,0]),o.m.multiply(P,P,h),o.m.multiply(P,b.globeMatrix,P)}(n,e);return function(h,b,y){const x=(D,F,V)=>{const Y=o.v.length(D),ie=o.v.length(F),oe=wl(D,F,V);return o.v.scale(oe,oe,1/o.v.length(oe)*On(Y,ie,V))},T=x([h[0],h[1],h[2]],[b[0],b[1],b[2]],y),P=x([h[4],h[5],h[6]],[b[4],b[5],b[6]],y),A=x([h[8],h[9],h[10]],[b[8],b[9],b[10]],y),R=wl([h[12],h[13],h[14]],[b[12],b[13],b[14]],y);return[T[0],T[1],T[2],0,P[0],P[1],P[2],0,A[0],A[1],A[2],0,R[0],R[1],R[2],1]}(u,p,i)}return u}const $d=64,w1={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4};function rm(n,e,r=!1){n.uploaded||(n.gfxTexture=new Pl(e,n.image,r?e.gl.R8:e.gl.RGBA,{useMipmap:n.sampler.minFilter>=e.gl.NEAREST_MIPMAP_NEAREST}),n.uploaded=!0,n.image=null)}function mL(n,e,r){n.indexBuffer=e.createIndexBuffer(n.indexArray,!1,!0),n.vertexBuffer=e.createVertexBuffer(n.vertexArray,cL.members,!1,!0),n.normalArray&&(n.normalBuffer=e.createVertexBuffer(n.normalArray,pL.members,!1,!0)),n.texcoordArray&&(n.texcoordBuffer=e.createVertexBuffer(n.texcoordArray,dL.members,!1,!0)),n.colorArray&&(n.colorBuffer=e.createVertexBuffer(n.colorArray,(n.colorArray.bytesPerElement===12?lL:uL).members,!1,!0)),n.featureArray&&(n.pbrBuffer=e.createVertexBuffer(n.featureArray,hL.members,!0)),n.segments=Wa.simpleSegment(0,0,n.vertexArray.length,n.indexArray.length);const i=n.material;i.pbrMetallicRoughness.baseColorTexture&&rm(i.pbrMetallicRoughness.baseColorTexture,e),i.pbrMetallicRoughness.metallicRoughnessTexture&&rm(i.pbrMetallicRoughness.metallicRoughnessTexture,e),i.normalTexture&&rm(i.normalTexture,e),i.occlusionTexture&&rm(i.occlusionTexture,e,r),i.emissionTexture&&rm(i.emissionTexture,e)}function K4(n,e,r){if(n.meshes)for(const i of n.meshes)mL(i,e,r);if(n.children)for(const i of n.children)K4(i,e,r)}function S1(n){if(n.meshes)for(const e of n.meshes)e.indexArray.destroy(),e.vertexArray.destroy(),e.colorArray&&e.colorArray.destroy(),e.normalArray&&e.normalArray.destroy(),e.texcoordArray&&e.texcoordArray.destroy(),e.featureArray&&e.featureArray.destroy();if(n.children)for(const e of n.children)S1(e)}function T1(n){if(n.meshes)for(const r of n.meshes)r.vertexBuffer&&(r.vertexBuffer.destroy(),r.indexBuffer.destroy(),r.normalBuffer&&r.normalBuffer.destroy(),r.texcoordBuffer&&r.texcoordBuffer.destroy(),r.colorBuffer&&r.colorBuffer.destroy(),r.pbrBuffer&&r.pbrBuffer.destroy(),r.segments.destroy(),r.material&&((e=r.material).pbrMetallicRoughness.baseColorTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture&&e.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),e.pbrMetallicRoughness.metallicRoughnessTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&e.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),e.normalTexture&&e.normalTexture.gfxTexture&&e.normalTexture.gfxTexture.destroy(),e.emissionTexture&&e.emissionTexture.gfxTexture&&e.emissionTexture.gfxTexture.destroy(),e.occlusionTexture&&e.occlusionTexture.gfxTexture&&e.occlusionTexture.gfxTexture.destroy()));var e;if(n.children)for(const r of n.children)T1(r)}class h2{constructor(e,r){this.feature=e,this.instancedDataOffset=r,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class m2{constructor(){this.instancedDataArray=new Ly,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class g2{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.projection=e.projection,this.index=e.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0}}populate(e,r,i,u){this.tileToMeter=Ng(i);const p=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:h,id:b,index:y,sourceLayerIndex:x}of e){const T=du(h,p);if(!this.layers[0]._featureFilter.filter(new Ee(this.zoom),T,i))continue;const P={id:b,sourceLayerIndex:x,index:y,geometry:p?T.geometry:Oc(h,i,u),properties:h.properties,type:h.type,patterns:{}},A=this.addFeature(P,P.geometry,T);A&&r.featureIndex.insert(h,P.geometry,y,x,this.index,this.instancesPerModel[A].instancedDataArray.length)}this.lookup=null}update(e,r,i,u){for(const p in this.instancesPerModel){const h=this.instancesPerModel[p];for(const b in e)h.idToFeaturesIndex.hasOwnProperty(b)&&this.evaluate(h.features[h.idToFeaturesIndex[b]],e[b],h,!0)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let e=!1;for(const r in this.instancesPerModel){const i=this.instancesPerModel[r];for(const u of i.features){const p=this.layers[0],h=u.feature,b=this.canonical,y=p.paint.get("model-rotation").evaluate(h,{},b),x=p.paint.get("model-scale").evaluate(h,{},b),T=p.paint.get("model-translation").evaluate(h,{},b);o.v.exactEquals(u.rotation,y)&&o.v.exactEquals(u.scale,x)&&o.v.exactEquals(u.translation,T)||(this.evaluate(u,u.featureStates,i,!0),e=!0)}}return e}isEmpty(){for(const e in this.instancesPerModel)if(this.instancesPerModel[e].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(e){if(!this.uploaded)for(const r in this.instancesPerModel){const i=this.instancesPerModel[r];i.instancedDataArray.length<0||i.instancedDataArray.length===0||(i.instancedDataBuffer?i.instancedDataBuffer.updateData(i.instancedDataArray):i.instancedDataBuffer=e.createVertexBuffer(i.instancedDataArray,fL.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const e in this.instancesPerModel){const r=this.instancesPerModel[e];r.instancedDataArray.length!==0&&r.instancedDataBuffer&&r.instancedDataBuffer.destroy()}}addFeature(e,r,i){const u=this.layers[0],p=u.layout.get("model-id").evaluate(i,{},this.canonical);if(!p)return Yt(`modelId is not evaluated for layer ${u.id} and it is not going to get rendered.`),p;this.instancesPerModel[p]||(this.instancesPerModel[p]=new m2);const h=this.instancesPerModel[p],b=h.instancedDataArray,y=new h2(i,b.length);for(const x of r)for(const T of x){if(T.x<0||T.x>=vt||T.y<0||T.y>=vt)continue;const P=(this.lookupDim-1)/vt,A=this.lookupDim*(T.y*P|0)+T.x*P|0;if(this.lookup){if(this.lookup[A]!==0)continue;this.lookup[A]=1}this.instanceCount++;const R=b.length;b.resize(R+1),h.instancesEvaluatedElevation.push(0),b.float32[16*R]=T.x,b.float32[16*R+1]=T.y}return y.instancedDataCount=h.instancedDataArray.length-y.instancedDataOffset,y.instancedDataCount>0&&(e.id&&(h.idToFeaturesIndex[e.id]=h.features.length),h.features.push(y),this.evaluate(y,{},h,!1)),p}evaluate(e,r,i,u){const p=this.layers[0],h=e.feature,b=this.canonical,y=e.rotation=p.paint.get("model-rotation").evaluate(h,r,b),x=e.scale=p.paint.get("model-scale").evaluate(h,r,b),T=e.translation=p.paint.get("model-translation").evaluate(h,r,b),P=p.paint.get("model-color").evaluate(h,r,b);P.a=p.paint.get("model-color-mix-intensity").evaluate(h,r,b);const A=[];this.maxVerticalOffset<T[2]&&(this.maxVerticalOffset=T[2]),this.maxScale=Math.max(Math.max(this.maxScale,x[0]),Math.max(x[1],x[2])),p2(A,y,x);const R=Math.round(100*P.a)+P.b/1.05;for(let D=0;D<e.instancedDataCount;++D){const F=e.instancedDataOffset+D,V=16*F,Y=i.instancedDataArray.float32;let ie=0;u&&(ie=Y[V+6]-i.instancesEvaluatedElevation[F]);const oe=0|Y[V+1];Y[V]=(0|Y[V])+P.r/1.05,Y[V+1]=oe+P.g/1.05,Y[V+2]=R,Y[V+3]=1/(b.z>10?this.tileToMeter:Ng(b,oe)),Y[V+4]=T[0],Y[V+5]=T[1],Y[V+6]=T[2]+ie,Y[V+7]=A[0],Y[V+8]=A[1],Y[V+9]=A[2],Y[V+10]=A[4],Y[V+11]=A[5],Y[V+12]=A[6],Y[V+13]=A[8],Y[V+14]=A[9],Y[V+15]=A[10],i.instancesEvaluatedElevation[F]=T[2]}}}qt(g2,"ModelBucket",{omit:["layers"]}),qt(m2,"PerModelAttributes"),qt(h2,"ModelFeature");const gL=new ct({visibility:new be(Ve.layout_model.visibility),"model-id":new Fe(Ve.layout_model["model-id"])});var bL={paint:new ct({"model-opacity":new be(Ve.paint_model["model-opacity"]),"model-rotation":new Fe(Ve.paint_model["model-rotation"]),"model-scale":new Fe(Ve.paint_model["model-scale"]),"model-translation":new Fe(Ve.paint_model["model-translation"]),"model-color":new Fe(Ve.paint_model["model-color"]),"model-color-mix-intensity":new Fe(Ve.paint_model["model-color-mix-intensity"]),"model-type":new be(Ve.paint_model["model-type"]),"model-cast-shadows":new be(Ve.paint_model["model-cast-shadows"]),"model-receive-shadows":new be(Ve.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new be(Ve.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Fe(Ve.paint_model["model-emissive-strength"]),"model-roughness":new Fe(Ve.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Fe(Ve.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new be(Ve.paint_model["model-cutoff-fade-range"])}),layout:gL};const Q4=new Float32Array(262144),qd=new Uint8Array(262144);function b2(n){let e=0;if(n.meshes)for(const r of n.meshes)e=Math.max(e,r.aabb.max[2]);if(n.children)for(const r of n.children)e=Math.max(e,b2(r));return e}const _2=["","wall","door","roof","window","lamp","logo"];class y2{constructor(e){this.node=e,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:e.id,geometry:[],properties:{height:b2(e)}}}}class v2{constructor(e,r,i,u){this.nodes=e,this.id=r,this.modelTraits|=w1.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,i&&(this.modelTraits|=w1.HasMapboxMeshFeatures),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=u,this.dirty=!0,this.needsUpload=!1}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(e){if(!this.needsUpload)return;const r=this.getNodesInfo();for(const i of r){const u=i.node;this.uploaded?this.updatePbrBuffer(u):K4(u,e,!0)}for(const i of r)S1(i.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(e){let r=!1;if(!e.meshes)return r;for(const i of e.meshes)i.pbrBuffer&&(i.pbrBuffer.updateData(i.featureArray),r=!0);return r}needsReEvaluation(e,r,i){const u=e.transform.projectionOptions,p=e.style.getBrightness(),h=this.brightness!==p;return!!(!this.uploaded||this.dirty||u.name!==this.projection.name||sm(i.paint.get("model-color").value,h)||sm(i.paint.get("model-color-mix-intensity").value,h)||sm(i.paint.get("model-roughness").value,h)||sm(i.paint.get("model-emissive-strength").value,h)||sm(i.paint.get("model-height-based-emissive-strength-multiplier").value,h))&&(this.projection=u,this.brightness=p,!0)}evaluateScale(e,r){if(e.transform.zoom===this.zoom)return;this.zoom=e.transform.zoom;const i=this.getNodesInfo(),u=this.id.canonical;for(const p of i){const h=p.feature;p.evaluatedScale=r.paint.get("model-scale").evaluate(h,{},u)}}evaluate(e){const r=this.getNodesInfo();for(const i of r){if(!i.node.meshes)continue;const u=i.feature,p=i.node.meshes&&i.node.meshes[0].featureData,h=i.evaluatedColor[2],b=i.evaluatedRMEA[2],y=this.id.canonical;if(i.hasTranslucentParts=!1,p){for(let x=0;x<_2.length;x++){const T=_2[x];T.length&&(u.properties.part=T);const P=e.paint.get("model-color").evaluate(u,{},y),A=e.paint.get("model-color-mix-intensity").evaluate(u,{},y);i.evaluatedColor[x]=[P.r,P.g,P.b,A],i.evaluatedRMEA[x][0]=e.paint.get("model-roughness").evaluate(u,{},y),i.evaluatedRMEA[x][2]=e.paint.get("model-emissive-strength").evaluate(u,{},y),i.evaluatedRMEA[x][3]=P.a,i.emissionHeightBasedParams[x]=e.paint.get("model-height-based-emissive-strength-multiplier").evaluate(u,{},y),!i.hasTranslucentParts&&P.a<1&&(i.hasTranslucentParts=!0)}delete u.properties.part,yL(i,h!==i.evaluatedColor[2]||b!==i.evaluatedRMEA[2])}else i.evaluatedRMEA[0][2]=e.paint.get("model-emissive-strength").evaluate(u,{},y);i.evaluatedScale=e.paint.get("model-scale").evaluate(u,{},y),this.updatePbrBuffer(i.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(e,r,i,u){const p=e.findDEMTileFor(i);if(p&&(p.tileID.canonical!==this.terrainTile||r!==this.terrainExaggeration)){if(p.dem&&p.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=p.tileID.overscaledZ;const h=Qp.create(e,i,p);if(!h)return;this.modelTraits&w1.HasMapboxMeshFeatures&&this.updateDEM(e,h,i,u);for(const b of this.getNodesInfo()){const y=b.node;if(!y.footprint||!y.footprint.vertices||!y.footprint.vertices.length)continue;const x=y.footprint.vertices;let T=h.getElevationAt(x[0].x,x[0].y,!0,!0);for(let P=1;P<x.length;P++)T=Math.min(T,h.getElevationAt(x[P].x,x[P].y,!0,!0));y.elevation=T}}this.terrainTile=p.tileID.canonical,this.terrainExaggeration=r}}updateDEM(e,r,i,u){let p=r._dem._modifiedForSources[u];if(p===void 0&&(r._dem._modifiedForSources[u]=[],p=r._dem._modifiedForSources[u]),p.includes(i.canonical))return;const h=r._dem.dim;p.push(i.canonical);let b=!1;for(const y of this.getNodesInfo()){const x=y.node;if(!x.footprint||!x.footprint.grid)continue;const T=x.footprint.grid,P=r.tileCoordToPixel(T.min.x,T.min.y),A=r.tileCoordToPixel(T.max.x,T.max.y),R=Math.min(Math.min(h-A.y,P.x),Math.min(P.y,h-A.x));if(R<0)continue;const D=ke(R,2,5);let F=Math.max(0,P.x-D),V=Math.max(0,P.y-D),Y=Math.min(A.x+D,h-1),ie=Math.min(A.y+D,h-1);for(let _e=V;_e<=ie;++_e)for(let ze=F;ze<=Y;++ze)qd[_e*h+ze]=255;let oe=0,le=0;for(let _e=0;_e<T.cellsY;++_e)for(let ze=0;ze<T.cellsX;++ze){if(!T.cells[_e*T.cellsX+ze])continue;const De=r.tileCoordToPixel(T.min.x+ze/T.xScale,T.min.y+_e/T.yScale),Ne=r.tileCoordToPixel(T.min.x+(ze+1)/T.xScale,T.min.y+(_e+1)/T.yScale);for(let He=De.y;He<=Math.min(Ne.y+1,h-1);++He)for(let je=De.x;je<=Math.min(Ne.x+1,h-1);++je)qd[He*h+je]===255&&(qd[He*h+je]=0,oe+=r.getElevationAtPixel(je,He),le++)}const he=oe/le;F=Math.max(1,P.x-D),V=Math.max(1,P.y-D),Y=Math.min(A.x+D,h-2),ie=Math.min(A.y+D,h-2),b=!0;for(let _e=V;_e<=ie;++_e)for(let ze=F;ze<=Y;++ze)qd[_e*h+ze]===0&&(Q4[_e*h+ze]=r._dem.set(ze,_e,he));for(let _e=1;_e<D;++_e){F=Math.max(1,P.x-_e),V=Math.max(1,P.y-_e),Y=Math.min(A.x+_e,h-2),ie=Math.min(A.y+_e,h-2);for(let ze=V;ze<=ie;++ze)for(let De=F;De<=Y;++De){const Ne=ze*h+De;if(qd[Ne]===255){let He=0,je=0,at=-1,_t=-1;for(let et=-1;et<=1;++et)for(let ht=-1;ht<=1;++ht){const Qe=(ze+et)*h+De+ht;if(qd[Qe]>=_e)continue;const Lt=Q4[Qe],$t=Math.abs(Lt);$t>je&&(He=Lt,je=$t,at=ht,_t=et)}if(je>.1){const et=1-(_e+.5*Math.abs(at*_t))/D;let ht=r._dem.get(De,ze)+He*et;const Qe=r._dem.get(De+at,ze+_t),Lt=r._dem.get(De-at,ze-_t,!0);(ht-Qe)*(ht-Lt)>0&&(ht=(Qe+Lt)/2),Q4[Ne]=r._dem.set(De,ze,ht),qd[Ne]=_e}}}}}b&&(r._demTile.needsDEMTextureUpload=!0,r._dem._timestamp=Gr.now())}getNodesInfo(){if(!this.nodesInfo){this.nodesInfo=[];for(const e of this.nodes)this.nodesInfo.push(new y2(e));this.freeNodes()}return this.nodesInfo}freeNodes(){if(this.nodes){for(const e of this.nodes)T1(e);this.nodes.splice(0,this.nodes.length)}}destroy(){this.freeNodes();const e=this.getNodesInfo();for(const r of e)S1(r.node),T1(r.node)}isEmpty(){return!this.nodes.length}updateReplacement(e,r){if(r.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=r.updateTime;const i=r.getReplacementRegionsForTile(e.toUnwrapped()),u=this.getNodesInfo();for(let p=0;p<this.nodesInfo.length;p++){const h=u[p].node;u[p].hiddenByReplacement=!!h.footprint&&!i.find(b=>b.footprint===h.footprint)}}getHeightAtTileCoord(e,r){const i=this.getNodesInfo(),u=[];for(let p=0;p<this.nodesInfo.length;p++){const h=i[p],b=h.node.meshes[0];if(e<b.aabb.min[0]||r<b.aabb.min[1]||e>b.aabb.max[0]||r>b.aabb.max[1])continue;const y=(e-b.aabb.min[0])/(b.aabb.max[0]-b.aabb.min[0])*$d|0,x=Math.min(63,(r-b.aabb.min[1])/(b.aabb.max[1]-b.aabb.min[1])*$d|0)*$d+Math.min(63,y);if(!(b.heightmap[x]<0&&h.node.footprint))return h.hiddenByReplacement?void 0:{height:b.heightmap[x],maxHeight:h.feature.properties.height,hidden:!1,verticalScale:h.evaluatedScale[2]};if(h.node.footprint.grid.query(new ge(e,r),new ge(e,r),u),u.length>0)return{height:void 0,maxHeight:h.feature.properties.height,hidden:h.hiddenByReplacement,verticalScale:h.evaluatedScale[2]}}}}function sm(n,e){return!n.isLightConstant&&e}function _L(n,e,r,i,u,p,h,b){let y=(61440&e|(61440&e)>>4)>>8,x=(3840&e|(3840&e)>>4)>>4,T=240&e|(240&e)>>4;r[3]>0&&(y=On(y,255*r[0],r[3]),x=On(x,255*r[1],r[3]),T=On(T,255*r[2],r[3]));const P=y<<8|x,A=T<<8|Math.floor(255*i[3]),R=function(_e){const ze=ke(_e,0,2);return Math.min(Math.round(.5*ze*255),255)}(i[2])<<8|15*i[0]<<4|15*i[1],D=ke(u[0],0,1),F=ke(u[1],0,1),V=ke(u[2],0,1),Y=ke(u[3],0,1);let ie,oe,le,he;if(D!==F&&h!==p&&F!==D){const _e=h-p;oe=1/(_e*(F-D)),le=-(p+_e*D)/(_e*(F-D));const ze=ke(u[4],-1,1);he=Math.pow(10,ze),ie=255*V<<8|255*Y}else ie=65535,oe=0,le=1,he=1;if(n.emplaceBack(P,A,R,ie,oe,le,he),b){const _e=b.length;b.clear();for(let ze=0;ze<_e;ze++)b.emplaceBack(P,A,R,ie,oe,le,he)}}function yL(n,e){const r=n.node;let i=0;for(const u of r.meshes){if(r.lights&&r.lightMeshIndex===i||!u.featureData)continue;u.featureArray=new Pg,u.featureArray.reserve(u.featureData.length);let p=e;for(const h of u.featureData){let b;const y=65535&h,x=(15&y)<8?15&y:0,T=h>>16&65535,P=n.evaluatedRMEA[x],A=n.evaluatedColor[x],R=n.emissionHeightBasedParams[x];if(p&&x===2&&r.lights&&(b=new Pg,b.resize(10*r.lights.length)),_L(u.featureArray,T,A,P,R,u.aabb.min[2],u.aabb.max[2],b),b&&p){p=!1;const D=r.meshes[r.lightMeshIndex];D.featureArray=b,D.featureArray._trim()}}u.featureArray._trim(),i++}}function E1(n,e){return n.x-e.x||n.y-e.y}function x2(n,e){return E1(n.min,e.min)===0&&E1(n.max,e.max)===0}function w2(n,e){return!(n.min.x>e.max.x||n.max.x<e.min.x||n.min.y>e.max.y||n.max.y<e.min.y)}function S2(n,e,r){const i=1/vt,u=1/(1<<r.canonical.z),p=(e.x*i+r.canonical.x)*u+r.wrap,h=(e.y*i+r.canonical.y)*u;return{min:new ge((n.x*i+r.canonical.x)*u+r.wrap,(n.y*i+r.canonical.y)*u),max:new ge(p,h)}}function vL(n,e,r){const i=1<<r.canonical.z,u=((e.x-r.wrap)*i-r.canonical.x)*vt,p=(e.y*i-r.canonical.y)*vt;return{min:new ge(((n.x-r.wrap)*i-r.canonical.x)*vt,(n.y*i-r.canonical.y)*vt),max:new ge(u,p)}}function T2(n,e,r,i,u,p,h){const b=n.indices,y=n.vertices,x=[];for(let T=i;T<i+u;T+=3){const P=e[r[T+0]+p],A=e[r[T+1]+p],R=e[r[T+2]+p],D=Math.min(P.x,A.x,R.x),F=Math.max(P.x,A.x,R.x),V=Math.min(P.y,A.y,R.y),Y=Math.max(P.y,A.y,R.y);x.length=0,n.grid.query(new ge(D,V),new ge(F,Y),x);for(let ie=0;ie<x.length;ie++){const oe=x[ie];if(x4(y[b[3*oe+0]],y[b[3*oe+1]],y[b[3*oe+2]],P,A,R,h))return!0}}return!1}function E2(n,e,r,i){if(!n||!r)return!1;let u=n.vertices;if(!e.canonical.equals(i.canonical)||e.wrap!==i.wrap){if(r.vertices.length<n.vertices.length)return E2(r,i,n,e);const p=e.canonical,h=i.canonical,b=Math.pow(2,h.z-p.z);u=n.vertices.map(y=>new ge(y.x*p.x*vt*b-h.x*vt,y.y*p.y*vt*b-h.y*vt))}return T2(r,u,n.indices,0,n.indices.length,0,0)}qt(v2,"Tiled3dModelBucket",{omit:["layers"]}),qt(y2,"Tiled3dModelFeature");const xL=Xg.types,wL=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius"],SL=["fill-extrusion-flood-light-ground-radius"],TL=Math.pow(2,13),EL=Math.pow(2,15)-1,I2=new ge(0,1),vu=2147483648;function im(n,e,r,i,u,p,h,b){n.emplaceBack((e<<1)+h,(r<<1)+p,(Math.floor(i*TL)<<1)+u,Math.round(b))}function I1(n,e,r,i,u,p){n.emplaceBack(e.x,e.y,(r.x<<1)+i,(r.y<<1)+u,p)}function om(n,e,r){n.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class P2{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class z2{constructor(){this.centroidXY=new ge(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new ge(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new ge(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new ge(this.max.x-this.min.x,this.max.y-this.min.y)}}class A2{constructor(){this.acc=new ge(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(e,r){e.min.x===Number.MAX_VALUE&&(e.min.x=e.max.x=r.x,e.min.y=e.max.y=r.y)}appendEdge(e,r,i){this.accCount++,this.acc._add(r);let u=!!this.borders;r.x<e.min.x?(e.min.x=r.x,u=!0):r.x>e.max.x&&(e.max.x=r.x,u=!0),r.y<e.min.y?(e.min.y=r.y,u=!0):r.y>e.max.y&&(e.max.y=r.y,u=!0),((r.x===0||r.x===vt)&&r.x===i.x)!=((r.y===0||r.y===vt)&&r.y===i.y)&&this.processBorderOverlap(r,i),u&&this.checkBorderIntersection(r,i)}checkBorderIntersection(e,r){r.x<0!=e.x<0&&this.addBorderIntersection(0,On(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>vt!=e.x>vt&&this.addBorderIntersection(1,On(r.y,e.y,(vt-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,On(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>vt!=e.y>vt&&this.addBorderIntersection(3,On(r.x,e.x,(vt-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const i=this.borders[e];r<i[0]&&(i[0]=r),r>i[1]&&(i[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const i=e.x===0?0:1;this.addBorderIntersection(i,r.y),this.addBorderIntersection(i,e.y)}else{const i=e.y===0?2:3;this.addBorderIntersection(i,r.x),this.addBorderIntersection(i,e.x)}}centroid(){return this.accCount===0?new ge(0,0):new ge(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0):0}}function C2(n,e){const r=n.add(e)._unit(),i=ke(n.x*r.x+n.y*r.y,-1,1);var u,p,h;return u=Math.acos(i),Math.min(4,Math.max(-4,Math.tan(u)))/4*EL*((p=n).x*(h=e).y-p.y*h.x<0?-1:1)}const IL=[n=>n.x<0,n=>n.x>vt,n=>n.y<0,n=>n.y>vt];function PL(n,e,r,i){const u=[4];if(i===0)return u;r._mult(i);const p=n.sub(r),h=e.sub(r),b=[n,e,p,h];for(let y=0;y<4;y++)for(const x of b)if(IL[y](x)){u.push(y);break}return u}class M2{constructor(e){this.vertexArray=new ys,this.indexArray=new ba,this.programConfigurations=new ou(e.layers,e.zoom,r=>SL.includes(r)),this._segments=new Wa,this.hiddenByLandmarkVertexArray=new Dy,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Wa}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(e,r,i,u=!1){const p=e.length;if(p>2){let h=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*p,this.vertexArray.length,2*this._segmentToGroundQuads[h].length);let y;h!==this._segments.get().length-1&&(h++,this._segmentToGroundQuads[h]=[],this._segmentToRegionTriCounts[h]=[0,0,0,0,0]);{const x=e[0],T=e[1];y=C2(x.sub(e[p-1])._perp()._unit(),T.sub(x)._perp()._unit())}for(let x=0;x<p;x++){const T=x===p-1?0:x+1,P=e[x],A=e[T],R=e[T===p-1?0:T+1],D=A.sub(P)._perp()._unit(),F=C2(D,R.sub(A)._perp()._unit()),V=y,Y=F;if(e3(P,A,r)||u&&L2(P,r)&&L2(A,r)){y=F;continue}const ie=b.vertexLength;I1(this.vertexArray,P,A,1,1,V),I1(this.vertexArray,P,A,1,0,V),I1(this.vertexArray,P,A,0,1,Y),I1(this.vertexArray,P,A,0,0,Y),b.vertexLength+=4;const oe=PL(P,A,D,i);for(const le of oe)this._segmentToGroundQuads[h].push({id:ie,region:le}),this._segmentToRegionTriCounts[h][le]+=2,b.primitiveLength+=2;y=F}}}prepareBorderSegments(){if(!this.hasData())return;const e=this._segments.get(),r=e.length;for(let i=0;i<r;i++)this._segmentToGroundQuads[i].sort((u,p)=>u.region-p.region);for(let i=0;i<r;i++){const u=this._segmentToGroundQuads[i],p=e[i],h=this._segmentToRegionTriCounts[i];h.reduce((y,x)=>y+x,0);let b=0;for(let y=0;y<=4;y++){const x=h[y];if(x!==0){let T=this.regionSegments[y];T||(T=this.regionSegments[y]=new Wa);const P={vertexOffset:p.vertexOffset,primitiveOffset:p.primitiveOffset+b,vertexLength:p.vertexLength,primitiveLength:x};T.get().push(P)}b+=x}for(let y=0;y<u.length;y++){const x=u[y].id;this.indexArray.emplaceBack(x,x+1,x+3),this.indexArray.emplaceBack(x,x+3,x+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(e,r,i,u,p,h){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,e,r,i,u,p,h)}upload(e){this.hasData()&&(this.vertexBuffer=e.createVertexBuffer(this.vertexArray,VR.members),this.indexBuffer=e.createIndexBuffer(this.indexArray))}uploadPaintProperties(e){this.hasData()&&this.programConfigurations.upload(e)}update(e,r,i,u,p,h){this.hasData()&&this.programConfigurations.updatePaintArrays(e,r,i,u,p,h)}updateHiddenByLandmark(e){if(!this.hasData())return;const r=e.groundVertexCount+e.groundVertexArrayOffset;if(e.groundVertexCount===0)return;const i=e.flags&vu?1:0;for(let u=e.groundVertexArrayOffset;u<r;++u)this.hiddenByLandmarkVertexArray.emplace(u,i);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(e){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=e.createVertexBuffer(this.hiddenByLandmarkVertexArray,$R.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let e=0;e<=4;e++){const r=this.regionSegments[e];r&&r.destroy()}}}}class cm{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.fqid),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new ba,this.footprintVertices=new An,this.footprintSegments=[],this.layoutVertexArray=new ma,this.centroidVertexArray=new nw,this.indexArray=new ba,this.programConfigurations=new ou(e.layers,e.zoom,r=>wL.includes(r)),this.segments=new Wa,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.groundEffect=new M2(e),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}populate(e,r,i,u){this.features=[],this.hasPattern=z4("fill-extrusion",this.layers,r),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=Ng(i),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:p,id:h,index:b,sourceLayerIndex:y}of e){const x=this.layers[0]._featureFilter.needGeometry,T=du(p,x);if(!this.layers[0]._featureFilter.filter(new Ee(this.zoom),T,i))continue;const P={id:h,sourceLayerIndex:y,index:b,geometry:x?T.geometry:Oc(p,i,u),properties:p.properties,type:p.type,patterns:{}},A=this.layoutVertexArray.length;this.hasPattern?this.features.push(A4("fill-extrusion",this.layers,P,this.zoom,r)):this.addFeature(P,P.geometry,b,i,{},r.availableImages,u,r.brightness),r.featureIndex.insert(p,P.geometry,b,y,this.index,A)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(e,r,i,u,p,h){for(const b of this.features){const{geometry:y}=b;this.addFeature(b,y,b.index,r,i,u,p,h)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(e,r,i,u,p){const h=Object.keys(e).length!==0;if(h&&!this.stateDependentLayers.length)return;const b=h?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(e,r,b,i,u,p),this.groundEffect.update(e,r,b,i,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,WR),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,qR.members,!0)),this.groundEffect.upload(e)),this.groundEffect.uploadPaintProperties(e),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.groundEffect.uploadHiddenByLandmark(e),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,GR.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,i,u,p,h,b,y){const x=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(e,{})/this.tileToMeter,T=[new ge(0,0),new ge(vt,vt)],P=b.projection,A=P.name==="globe",R=xL[e.type]==="Polygon",D=new A2;D.centroidDataIndex=this.centroidData.length;const F=new z2,V=this.layers[0].paint.get("fill-extrusion-base").evaluate(e,{},u)<=0,Y=this.layers[0].paint.get("fill-extrusion-height").evaluate(e,{},u);F.height=Y,F.vertexArrayOffset=this.layoutVertexArray.length,F.groundVertexArrayOffset=this.groundEffect.vertexArray.length,A&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Oa);const ie=P4(r,500);for(let De=ie.length-1;De>=0;De--){const Ne=ie[De];(Ne.length===0||(oe=Ne[0]).every(He=>He.x<=0)||oe.every(He=>He.x>=vt)||oe.every(He=>He.y<=0)||oe.every(He=>He.y>=vt))&&ie.splice(De,1)}var oe;let le;if(A)le=N2(ie,T,u);else{le=[];for(const De of ie)le.push({polygon:De,bounds:T})}const he=R?this.edgeRadius:0,_e=he>0&&this.zoom<17,ze=(De,Ne)=>{if(De.length===0)return!1;const He=De[De.length-1];return Ne.x===He.x&&Ne.y===He.y};for(const{polygon:De,bounds:Ne}of le){let He=0,je=0;for(const ht of De)R&&!ht[0].equals(ht[ht.length-1])&&ht.push(ht[0]),je+=R?ht.length-1:ht.length;const at=this.segments.prepareSegment((R?5:4)*je,this.layoutVertexArray,this.indexArray);F.footprintSegIdx<0&&(F.footprintSegIdx=this.footprintSegments.length),F.polygonSegIdx<0&&(F.polygonSegIdx=this.polygonSegments.length);const _t={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},et=new P2;if(et.vertexOffset=this.footprintVertices.length,et.indexOffset=3*this.footprintIndices.length,et.ringIndices=[],R){const ht=[],Qe=[];He=at.vertexLength;for(let $t=0;$t<De.length;$t++){const bt=De[$t];bt.length&&$t!==0&&Qe.push(ht.length/2);const hn=[];let Ht,At;Ht=bt[1].sub(bt[0])._perp()._unit(),et.ringIndices.push(bt.length-1);for(let mn=1;mn<bt.length;mn++){const tn=bt[mn],dn=bt[mn===bt.length-1?1:mn+1],wt=tn.clone();if(he){At=dn.sub(tn)._perp()._unit();const wn=Ht.add(At)._unit(),Xn=he*Math.min(4,1/(Ht.x*wn.x+Ht.y*wn.y));wt.x+=Xn*wn.x,wt.y+=Xn*wn.y,wt.x=Math.round(wt.x),wt.y=Math.round(wt.y),Ht=At}!V||he!==0&&!_e||ze(hn,wt)||hn.push(wt),im(this.layoutVertexArray,wt.x,wt.y,0,0,1,1,0),at.vertexLength++,this.footprintVertices.emplaceBack(tn.x,tn.y),ht.push(tn.x,tn.y),A&&om(this.layoutVertexExtArray,P.projectTilePoint(wt.x,wt.y,u),P.upVector(u,wt.x,wt.y))}V&&(he===0||_e)&&(hn.length!==0&&ze(hn,hn[0])&&hn.pop(),this.groundEffect.addData(hn,Ne,x))}const Lt=Hg(ht,Qe);for(let $t=0;$t<Lt.length;$t+=3)this.footprintIndices.emplaceBack(et.vertexOffset+Lt[$t+0],et.vertexOffset+Lt[$t+1],et.vertexOffset+Lt[$t+2]),this.indexArray.emplaceBack(He+Lt[$t],He+Lt[$t+2],He+Lt[$t+1]),at.primitiveLength++;et.indexCount+=Lt.length,et.vertexCount+=this.footprintVertices.length-et.vertexOffset}for(let ht=0;ht<De.length;ht++){const Qe=De[ht];D.startRing(F,Qe[0]);let Lt=Qe.length>4&&D2(Qe[Qe.length-2],Qe[0],Qe[1]),$t=he?zL(Qe[Qe.length-2],Qe[0],Qe[1],he):0;const bt=[];let hn,Ht,At;Ht=Qe[1].sub(Qe[0])._perp()._unit();let mn=!0;for(let tn=1,dn=0;tn<Qe.length;tn++){let wt=Qe[tn-1],wn=Qe[tn];const Xn=Qe[tn===Qe.length-1?1:tn+1];if(D.appendEdge(F,wn,wt),e3(wn,wt,Ne)){he&&(Ht=Xn.sub(wn)._perp()._unit(),mn=!mn);continue}const Cn=wn.sub(wt)._perp(),Wn=Cn.x/(Math.abs(Cn.x)+Math.abs(Cn.y)),ia=Cn.y>0?1:0,za=wt.dist(wn);if(dn+za>32768&&(dn=0),he){At=Xn.sub(wn)._perp()._unit();let pa=k2(wt,wn,Xn,R2(Ht,At),he);isNaN(pa)&&(pa=0);const ga=wn.sub(wt)._unit();wt=wt.add(ga.mult($t))._round(),wn=wn.add(ga.mult(-pa))._round(),$t=pa,Ht=At,V&&this.zoom>=17&&(ze(bt,wt)||bt.push(wt),ze(bt,wn)||bt.push(wn))}const Nn=at.vertexLength,Na=Qe.length>4&&D2(wt,wn,Xn);let Aa=O2(dn,Lt,mn);if(im(this.layoutVertexArray,wt.x,wt.y,Wn,ia,0,0,Aa),im(this.layoutVertexArray,wt.x,wt.y,Wn,ia,0,1,Aa),dn+=za,Aa=O2(dn,Na,!mn),Lt=Na,im(this.layoutVertexArray,wn.x,wn.y,Wn,ia,0,0,Aa),im(this.layoutVertexArray,wn.x,wn.y,Wn,ia,0,1,Aa),at.vertexLength+=4,this.indexArray.emplaceBack(Nn+0,Nn+1,Nn+2),this.indexArray.emplaceBack(Nn+1,Nn+3,Nn+2),at.primitiveLength+=2,he){const pa=He+(tn===1?Qe.length-2:tn-2),ga=tn===1?He:pa+1;if(this.indexArray.emplaceBack(Nn+1,pa,Nn+3),this.indexArray.emplaceBack(pa,ga,Nn+3),at.primitiveLength+=2,hn===void 0&&(hn=Nn),!e3(Xn,Qe[tn],Ne)){const oa=tn===Qe.length-1?hn:at.vertexLength;this.indexArray.emplaceBack(Nn+2,Nn+3,oa),this.indexArray.emplaceBack(Nn+3,oa+1,oa),this.indexArray.emplaceBack(Nn+3,ga,oa+1),at.primitiveLength+=3}mn=!mn}if(A){const pa=this.layoutVertexExtArray,ga=P.projectTilePoint(wt.x,wt.y,u),oa=P.projectTilePoint(wn.x,wn.y,u),ir=P.upVector(u,wt.x,wt.y),Fa=P.upVector(u,wn.x,wn.y);om(pa,ga,ir),om(pa,ga,ir),om(pa,oa,Fa),om(pa,oa,Fa)}}R&&(He+=Qe.length-1),V&&he&&this.zoom>=17&&(bt.length!==0&&ze(bt,bt[0])&&bt.pop(),this.groundEffect.addData(bt,Ne,x,he>0))}this.footprintSegments.push(et),_t.triangleCount=this.indexArray.length-_t.triangleArrayOffset,this.polygonSegments.push(_t),++F.footprintSegLen,++F.polygonSegLen}if(F.vertexCount=this.layoutVertexArray.length-F.vertexArrayOffset,F.groundVertexCount=this.groundEffect.vertexArray.length-F.groundVertexArrayOffset,F.vertexCount!==0){if(F.centroidXY=D.borders?I2:this.encodeCentroid(D,F),this.centroidData.push(F),D.borders){this.featuresOnBorder.push(D);const De=this.featuresOnBorder.length-1;for(let Ne=0;Ne<D.borders.length;Ne++)D.borders[Ne][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Ne].push(De)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,p,h,u,y),this.groundEffect.addPaintPropertiesData(e,i,p,h,u,y),this.maxHeight=Math.max(this.maxHeight,Y)}}sortBorders(){for(let e=0;e<this.borderFeatureIndices.length;e++)this.borderFeatureIndices[e].sort((r,i)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[i].borders[e][0])}splitToSubtiles(){const e=[];for(let b=0;b<this.centroidData.length;b++){const y=this.centroidData[b],x=+(y.min.y+y.max.y>vt),T=2*x+(+(y.min.x+y.max.x>vt)^x);for(let P=0;P<y.polygonSegLen;P++){const A=y.polygonSegIdx+P;e.push({centroidIdx:b,subtile:T,polygonSegmentIdx:A,triangleSegmentIdx:this.polygonSegments[A].triangleSegIdx})}}const r=new ba;e.sort((b,y)=>b.triangleSegmentIdx===y.triangleSegmentIdx?b.subtile-y.subtile:b.triangleSegmentIdx-y.triangleSegmentIdx);let i=0,u=0,p=0;for(const b of e){if(b.triangleSegmentIdx!==i)break;p++}const h=e.length;for(;u!==e.length;){i=e[u].triangleSegmentIdx;let b=0,y=u,x=u;for(let T=y;T<p&&e[T].subtile===b;T++)x++;for(;y!==p;){const T=e[y];b=T.subtile;const P=this.centroidData[T.centroidIdx].min.clone(),A=this.centroidData[T.centroidIdx].max.clone(),R={vertexOffset:this.segments.segments[i].vertexOffset,primitiveOffset:r.length,vertexLength:this.segments.segments[i].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let D=y;D<x;D++){const F=e[D],V=this.polygonSegments[F.polygonSegmentIdx],Y=this.centroidData[F.centroidIdx].min,ie=this.centroidData[F.centroidIdx].max,oe=this.indexArray.uint16;for(let le=V.triangleArrayOffset;le<V.triangleArrayOffset+V.triangleCount;le++)r.emplaceBack(oe[3*le],oe[3*le+1],oe[3*le+2]);R.primitiveLength+=V.triangleCount,P.x=Math.min(P.x,Y.x),P.y=Math.min(P.y,Y.y),A.x=Math.max(A.x,ie.x),A.y=Math.max(A.y,ie.y)}R.primitiveLength>0&&this.triangleSubSegments.push({segment:R,min:P,max:A}),y=x;for(let D=y;D<p&&e[D].subtile===e[y].subtile;D++)x++}u=p;for(let T=u;T<h&&e[T].triangleSegmentIdx===e[u].triangleSegmentIdx;T++)p++}r._trim(),this.indexArray=r}getVisibleSegments(e,r,i){let u=0,p=0;const h=1<<e.canonical.z;if(r){const F=r.getMinMaxForTile(e);F&&(u=F.min,p=F.max)}p+=this.maxHeight;const b=e.toUnwrapped();let y;const x=[b.canonical.x/h+b.wrap,b.canonical.y/h],T=[(b.canonical.x+1)/h+b.wrap,(b.canonical.y+1)/h],P=new Wa,A=(F,V,Y)=>[F[0]*(1-Y[0])+V[0]*Y[0],F[1]*(1-Y[1])+V[1]*Y[1]],R=[],D=[];for(const F of this.triangleSubSegments){R[0]=F.min.x/vt,R[1]=F.min.y/vt,D[0]=F.max.x/vt,D[1]=F.max.y/vt;const V=A(x,T,R),Y=A(x,T,D);if(new gr([V[0],V[1],u],[Y[0],Y[1],p]).intersectsPrecise(i)===0){y&&(P.segments.push(y),y=void 0);continue}const ie=F.segment;y&&y.vertexOffset!==ie.vertexOffset&&(P.segments.push(y),y=void 0),y?(y.vertexLength+=ie.vertexLength,y.primitiveLength+=ie.primitiveLength):y={vertexOffset:ie.vertexOffset,primitiveLength:ie.primitiveLength,vertexLength:ie.vertexLength,primitiveOffset:ie.primitiveOffset,sortKey:void 0,vaos:{}}}return y&&P.segments.push(y),P}encodeCentroid(e,r){const i=e.centroid(),u=r.span(),p=Math.min(7,Math.round(u.x*this.tileToMeter/10)),h=Math.min(7,Math.round(u.y*this.tileToMeter/10));return new ge(ke(i.x,1,vt-1)<<3|p,ke(i.y,1,vt-1)<<3|h)}encodeBorderCentroid(e){if(!e.borders)return new ge(0,0);const r=e.borders,i=Number.MAX_VALUE;if(r[0][0]!==i||r[1][0]!==i){const u=r[0][0]!==i?0:1;return new ge(6|(r[0][0]!==i?0:65528),((r[u][0]+r[u][1])/2|0)<<3|6)}{const u=r[2][0]!==i?2:3;return new ge(((r[u][0]+r[u][1])/2|0)<<3|6,6|(r[2][0]!==i?0:65528))}}showCentroid(e){const r=this.centroidData[e.centroidDataIndex];r.flags&=vu,r.centroidXY.x=0,r.centroidXY.y=0,this.writeCentroidToBuffer(r)}writeCentroidToBuffer(e){this.groundEffect.updateHiddenByLandmark(e);const r=e.vertexArrayOffset,i=e.vertexCount+e.vertexArrayOffset,u=e.flags&vu?I2:e.centroidXY,p=this.centroidVertexArray.geta_centroid_pos0(r);if(this.centroidVertexArray.geta_centroid_pos1(r)!==u.y||p!==u.x){for(let h=r;h<i;++h)this.centroidVertexArray.emplace(h,u.x,u.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const e of this.centroidData)this.writeCentroidToBuffer(e)}updateReplacement(e,r){if(r.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=r.updateTime;const i=r.getReplacementRegionsForTile(e.toUnwrapped());if(function(p,h){if(p.length!==h.length)return!1;for(let b=0;b<p.length;b++)if(p[b].sourceId!==h[b].sourceId||!x2(p[b],h[b]))return!1;return!0}(this.activeReplacements,i))return;if(this.activeReplacements=i,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const p of this.centroidData)p.flags&=2147483647;const u=[];for(const p of this.activeReplacements){const h=Math.pow(2,p.footprintTileId.canonical.z-e.canonical.z);for(const b of this.centroidData)if(!(b.flags&vu||p.min.x>b.max.x||b.min.x>p.max.x||p.min.y>b.max.y||b.min.y>p.max.y))for(let y=0;y<b.footprintSegLen;y++){const x=this.footprintSegments[b.footprintSegIdx+y];if(u.length=0,AL(this.footprintVertices,x.vertexOffset,x.vertexCount,p.footprintTileId.canonical,e.canonical,u),T2(p.footprint,u,this.footprintIndices.uint16,x.indexOffset,x.indexCount,-x.vertexOffset,-h)){b.flags|=vu;break}}}for(const p of this.centroidData)this.writeCentroidToBuffer(p);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(e,r,i){let u=!1;for(let p=0;p<i.footprintSegLen;p++){const h=this.footprintSegments[i.footprintSegIdx+p];let b=0;for(const y of h.ringIndices){for(let x=b,T=y+b-1;x<y+b;T=x++){const P=this.footprintVertices.int16[2*(x+h.vertexOffset)+0],A=this.footprintVertices.int16[2*(x+h.vertexOffset)+1],R=this.footprintVertices.int16[2*(T+h.vertexOffset)+1];A>r!=R>r&&e<(this.footprintVertices.int16[2*(T+h.vertexOffset)+0]-P)*(r-A)/(R-A)+P&&(u=!u)}b=y}}return u}getHeightAtTileCoord(e,r){let i=Number.NEGATIVE_INFINITY,u=!0;const p=4*(e+vt)*vt+(r+vt);if(this.partLookup.hasOwnProperty(p)){const h=this.partLookup[p];return h?{height:h.height,hidden:!!(h.flags&vu)}:void 0}for(const h of this.centroidData)e>h.max.x||h.min.x>e||r>h.max.y||h.min.y>r||this.footprintContainsPoint(e,r,h)&&h&&h.height>i&&(i=h.height,this.partLookup[p]=h,u=!!(h.flags&vu));if(i!==Number.NEGATIVE_INFINITY)return{height:i,hidden:u};this.partLookup[p]=void 0}}function R2(n,e){const r=n.add(e)._unit();return n.x*r.x+n.y*r.y}function zL(n,e,r,i){const u=e.sub(n)._perp()._unit(),p=r.sub(e)._perp()._unit();return k2(n,e,r,R2(u,p),i)}function k2(n,e,r,i,u){const p=Math.sqrt(1-i*i);return Math.min(n.dist(e)/3,e.dist(r)/3,u*p/i)}function e3(n,e,r){return n.x<r[0].x&&e.x<r[0].x||n.x>r[1].x&&e.x>r[1].x||n.y<r[0].y&&e.y<r[0].y||n.y>r[1].y&&e.y>r[1].y}function L2(n,e){return n.x<e[0].x||n.x>e[1].x||n.y<e[0].y||n.y>e[1].y}function D2(n,e,r){if(n.x<0||n.x>=vt||e.x<0||e.x>=vt||r.x<0||r.x>=vt)return!1;const i=r.sub(e),u=i.perp(),p=n.sub(e);return(i.x*p.x+i.y*p.y)/Math.sqrt((i.x*i.x+i.y*i.y)*(p.x*p.x+p.y*p.y))>-.866&&u.x*p.x+u.y*p.y<0}function O2(n,e,r){const i=e?2|n:-3&n;return r?1|i:-2&i}function B2(){const n=Math.PI/32,e=Math.tan(n),r=$h;return r*Math.sqrt(1+2*e*e)-r}function N2(n,e,r){const i=1<<r.z,u=Ei(r.x/i),p=Ei((r.x+1)/i),h=Qr(r.y/i),b=Qr((r.y+1)/i);return function(y,x,T,P,A=0,R){const D=[];if(!y.length||!T||!P)return D;const F=(_e,ze)=>{for(const De of _e)D.push({polygon:De,bounds:ze})},V=Math.ceil(Math.log2(T)),Y=Math.ceil(Math.log2(P)),ie=V-Y,oe=[];for(let _e=0;_e<Math.abs(ie);_e++)oe.push(ie>0?0:1);for(let _e=0;_e<Math.min(V,Y);_e++)oe.push(0),oe.push(1);let le=y;if(le=Jg(le,x[0].y-A,x[1].y+A,1),le=Jg(le,x[0].x-A,x[1].x+A,0),!le.length)return D;const he=[];for(oe.length?he.push({polygons:le,bounds:x,depth:0}):F(le,x);he.length;){const _e=he.pop(),ze=_e.depth,De=oe[ze],Ne=_e.bounds[0],He=_e.bounds[1],je=De===0?Ne.x:Ne.y,at=De===0?He.x:He.y,_t=R?R(De,je,at):.5*(je+at),et=Jg(_e.polygons,je-A,_t+A,De),ht=Jg(_e.polygons,_t-A,at+A,De);if(et.length){const Qe=[Ne,new ge(De===0?_t:He.x,De===1?_t:He.y)];oe.length>ze+1?he.push({polygons:et,bounds:Qe,depth:ze+1}):F(et,Qe)}if(ht.length){const Qe=[new ge(De===0?_t:Ne.x,De===1?_t:Ne.y),He];oe.length>ze+1?he.push({polygons:ht,bounds:Qe,depth:ze+1}):F(ht,Qe)}}return D}(n,e,Math.ceil((p-u)/11.25),Math.ceil((h-b)/11.25),1,(y,x,T)=>{if(y===0)return .5*(x+T);{const P=Qr((r.y+x/vt)/i);return(Dc(.5*(Qr((r.y+T/vt)/i)+P))*i-r.y)*vt}})}function AL(n,e,r,i,u,p){const h=Math.pow(2,i.z-u.z);for(let b=0;b<r;b++){let y=n.int16[2*(b+e)+0],x=n.int16[2*(b+e)+1];y=(y+u.x*vt)*h-i.x*vt,x=(x+u.y*vt)*h-i.y*vt,p.push(new ge(y,x))}}qt(cm,"FillExtrusionBucket",{omit:["layers","features"]}),qt(z2,"PartData"),qt(P2,"FootprintSegment"),qt(A2,"BorderCentroidData"),qt(M2,"GroundEffect");const CL=new ct({visibility:new be(Ve["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new be(Ve["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var ML={paint:new ct({"fill-extrusion-opacity":new be(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Fe(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new be(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new be(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Fe(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Fe(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Fe(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new be(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new be(Ve["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new be(Ve["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new be(Ve["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new be(Ve["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new be(Ve["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new be(Ve["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new be(Ve["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Fe(Ve["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Fe(Ve["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new be(Ve["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new be(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new be(Ve["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new be(Ve["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new be(Ve["paint_fill-extrusion"]["fill-extrusion-emissive-strength"])}),layout:CL};class cf extends ge{constructor(e,r,i){super(e,r),this.z=i}}function lm(n,e){return n.x*e.x+n.y*e.y}function F2(n,e){if(n.length===1){let r=0;const i=e[r++];let u;for(;!u||i.equals(u);)if(u=e[r++],!u)return 1/0;for(;r<e.length;r++){const p=e[r],h=n[0],b=u.sub(i),y=p.sub(i),x=h.sub(i),T=lm(b,b),P=lm(b,y),A=lm(y,y),R=lm(x,b),D=lm(x,y),F=T*A-P*P,V=(A*R-P*D)/F,Y=(T*D-P*R)/F,ie=i.z*(1-V-Y)+u.z*V+p.z*Y;if(isFinite(ie))return ie}return 1/0}{let r=1/0;for(const i of e)r=Math.min(r,i.z);return r}}function j2(n,e,r,i,u,p,h,b){const y=h*u.getElevationAt(n,e,!0,!0),x=p[0]!==0,T=x?p[1]===0?h*(p[0]/7-450):h*function(P,A,R){const D=Math.floor(A[0]/8),F=Math.floor(A[1]/8),V=10*(A[0]-8*D),Y=10*(A[1]-8*F),ie=P.getElevationAt(D,F,!0,!0),oe=P.getMeterToDEM(R),le=Math.floor(.5*(V*oe-1)),he=Math.floor(.5*(Y*oe-1)),_e=P.tileCoordToPixel(D,F),ze=2*le+1,De=2*he+1,Ne=function(ht,Qe,Lt,$t,bt){return[ht.getElevationAtPixel(Qe,Lt,!0),ht.getElevationAtPixel(Qe+bt,Lt,!0),ht.getElevationAtPixel(Qe,Lt+bt,!0),ht.getElevationAtPixel(Qe+$t,Lt+bt,!0)]}(P,_e.x-le,_e.y-he,ze,De),He=Math.abs(Ne[0]-Ne[1]),je=Math.abs(Ne[2]-Ne[3]),at=Math.abs(Ne[0]-Ne[2])+Math.abs(Ne[1]-Ne[3]),_t=Math.min(.25,.5*oe*(He+je)/ze),et=Math.min(.25,.5*oe*at/De);return ie+Math.max(_t*V,et*Y)}(u,p,b):y;return{base:y+(r===0)?-1:r,top:x?Math.max(T+i,y+r+2):y+i}}const RL=new ct({"line-cap":new Fe(Ve.layout_line["line-cap"]),"line-join":new Fe(Ve.layout_line["line-join"]),"line-miter-limit":new be(Ve.layout_line["line-miter-limit"]),"line-round-limit":new be(Ve.layout_line["line-round-limit"]),"line-sort-key":new Fe(Ve.layout_line["line-sort-key"]),visibility:new be(Ve.layout_line.visibility)});var U2={paint:new ct({"line-opacity":new Fe(Ve.paint_line["line-opacity"]),"line-color":new Fe(Ve.paint_line["line-color"]),"line-translate":new be(Ve.paint_line["line-translate"]),"line-translate-anchor":new be(Ve.paint_line["line-translate-anchor"]),"line-width":new Fe(Ve.paint_line["line-width"]),"line-gap-width":new Fe(Ve.paint_line["line-gap-width"]),"line-offset":new Fe(Ve.paint_line["line-offset"]),"line-blur":new Fe(Ve.paint_line["line-blur"]),"line-dasharray":new Fe(Ve.paint_line["line-dasharray"]),"line-pattern":new Fe(Ve.paint_line["line-pattern"]),"line-gradient":new mt(Ve.paint_line["line-gradient"]),"line-trim-offset":new be(Ve.paint_line["line-trim-offset"]),"line-emissive-strength":new be(Ve.paint_line["line-emissive-strength"]),"line-border-width":new Fe(Ve.paint_line["line-border-width"]),"line-border-color":new Fe(Ve.paint_line["line-border-color"])}),layout:RL};function V2(n,e){return 1/d2(n,1,e.tileZoom)}function G2(n,e,r,i){return n.translatePosMatrix(i||e.tileID.projMatrix,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const $2=n=>{const e=[];q2(n)&&e.push("RENDER_LINE_DASH"),n.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT");const r=n.paint.get("line-trim-offset");return r[0]===0&&r[1]===0||e.push("RENDER_LINE_TRIM_OFFSET"),n.paint.get("line-border-width").constantOr(1)!==0&&e.push("RENDER_LINE_BORDER"),e};function q2(n){const e=n.paint.get("line-dasharray").value;return e.value||e.kind!=="constant"}const W2=new class extends Fe{possiblyEvaluate(n,e){return e=new Ee(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(n,e)}evaluate(n,e,r,i){return e=Fn({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(n,e,r,i)}}(U2.paint.properties["line-width"].specification);function H2(n,e){return e>0?e+2*n:n}W2.useIntegerZoom=!0;const kL=new ct({visibility:new be(Ve.layout_background.visibility)});var LL={paint:new ct({"background-color":new be(Ve.paint_background["background-color"]),"background-pattern":new be(Ve.paint_background["background-pattern"]),"background-opacity":new be(Ve.paint_background["background-opacity"]),"background-emissive-strength":new be(Ve.paint_background["background-emissive-strength"])}),layout:kL};const DL=new ct({visibility:new be(Ve.layout_raster.visibility)});var OL={paint:new ct({"raster-opacity":new be(Ve.paint_raster["raster-opacity"]),"raster-color":new mt(Ve.paint_raster["raster-color"]),"raster-color-mix":new be(Ve.paint_raster["raster-color-mix"]),"raster-color-range":new be(Ve.paint_raster["raster-color-range"]),"raster-hue-rotate":new be(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new be(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new be(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new be(Ve.paint_raster["raster-saturation"]),"raster-contrast":new be(Ve.paint_raster["raster-contrast"]),"raster-resampling":new be(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new be(Ve.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new be(Ve.paint_raster["raster-emissive-strength"]),"raster-array-band":new be(Ve.paint_raster["raster-array-band"]),"raster-elevation":new be(Ve.paint_raster["raster-elevation"])}),layout:DL};function P1(n,e,r,i,u,p,h,b){const y=[n,e,1,r,i,1,u,p,1],x=[h,b,1],T=o.bx.adjoint([],y),[P,A,R]=o.v.transformMat3(x,x,T);return o.bx.multiply(y,y,[P,0,0,0,A,0,0,0,R])}function Z2(n,e,r,i,u,p,h,b){const y=function(x,T,P,A,R,D,F,V){const Y=P1(0,0,1,0,1,1,0,1),ie=P1(x,T,P,A,R,D,F,V),oe=o.bx.adjoint([],Y);return o.bx.multiply(ie,ie,oe)}(n,e,r,i,u,p,h,b);return[y[2]/y[8]/vt,y[5]/y[8]/vt]}function z1(n){return[n[0],Math.min(Math.max(n[1],-pr),pr)]}class Y2 extends qr{constructor(e,r,i,u){super(),this.id=e,this.dispatcher=i,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(u),this.options=r,this._dirty=!1}load(e,r){if(this._loaded=r||!1,this.fire(new rs("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return e&&(this.coordinates=e),this._loaded=!0,void this._finishLoading();this._imageRequest=Ke(this.map._requestManager.transformRequest(this.url,Ua.Image),(i,u)=>{this._imageRequest=null,this._loaded=!0,i?this.fire(new bs(i)):u&&(this.image=u instanceof HTMLImageElement?Gr.getImageData(u):u,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}setTexture(e){if(!(e.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new b1(this.map.painter.context,e.handle),this.width=e.dimensions[0],this.height=e.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new rs("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof b1||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(e){if(this.coordinates=e,this._boundsArray=void 0,this._unsupportedCoords=!1,!e.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let r=e[0][1],i=e[0][1];for(const p of e)p[1]>i&&(i=p[1]),p[1]<r&&(r=p[1]);const u=(i+r)/2;if(u>pr?this.onNorthPole=!0:u<-pr&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const p=e.map(os.fromLngLat);this.tileID=function(h){let b=1/0,y=1/0,x=-1/0,T=-1/0;for(const F of h)b=Math.min(b,F.x),y=Math.min(y,F.y),x=Math.max(x,F.x),T=Math.max(T,F.y);const P=Math.max(x-b,T-y),A=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),R=Math.pow(2,A);let D=Math.floor((b+x)/2*R);return D>1&&(D-=1),new Bd(A,D,Math.floor((y+T)/2*R))}(p),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new rs("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(e){for(const V in this.tiles){const Y=this.tiles[V];Y.state!=="loaded"&&(Y.state="loaded",Y.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const r=mu(new Bd(0,0,0),this.map.transform.projection),i=[r.projection.project(this.coordinates[0][0],this.coordinates[0][1]),r.projection.project(this.coordinates[1][0],this.coordinates[1][1]),r.projection.project(this.coordinates[2][0],this.coordinates[2][1]),r.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(V){const Y=V[1].x-V[0].x,ie=V[1].y-V[0].y,oe=V[2].x-V[1].x,le=V[2].y-V[1].y,he=V[3].x-V[2].x,_e=V[3].y-V[2].y,ze=V[0].x-V[3].x,De=V[0].y-V[3].y,Ne=Y*le-oe*ie,He=oe*_e-he*le,je=he*De-ze*_e,at=ze*ie-Y*De;return Ne>0&&He>0&&je>0&&at>0||Ne<0&&He<0&&je<0&&at<0}(i))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const u=mu(this.tileID,this.map.transform.projection),[p,h,b,y]=this.coordinates.map(V=>{const Y=u.projection.project(V[0],V[1]);return J9(u,Y)._round()});this.perspectiveTransform=Z2(p.x,p.y,h.x,h.y,b.x,b.y,y.x,y.y);const x=this._boundsArray=new ma;x.emplaceBack(p.x,p.y,0,0),x.emplaceBack(h.x,h.y,vt,0),x.emplaceBack(y.x,y.y,0,vt),x.emplaceBack(b.x,b.y,vt,vt),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=e.createVertexBuffer(x,y1.members),this.boundsSegments=Wa.simpleSegment(0,0,4,2);const T=[],P=function(V){return[z1(V[0]),z1(V[1]),z1(V[2]),z1(V[3])]}(this.coordinates),[A,R,D,F]=function(V){let Y=V[0][0],ie=Y,oe=V[0][1],le=oe;for(let he=1;he<V.length;he++)V[he][0]<Y?Y=V[he][0]:V[he][0]>ie&&(ie=V[he][0]),V[he][1]<oe?oe=V[he][1]:V[he][1]>le&&(le=V[he][1]);return[Y,oe,ie-Y,le-oe]}(P);{const V=new ma,[Y,ie,oe,le]=function(Qe){let Lt=Qe[0].x,$t=Lt,bt=Qe[0].y,hn=bt;for(let Ht=1;Ht<Qe.length;Ht++)Qe[Ht].x<Lt?Lt=Qe[Ht].x:Qe[Ht].x>$t&&($t=Qe[Ht].x),Qe[Ht].y<bt?bt=Qe[Ht].y:Qe[Ht].y>hn&&(hn=Qe[Ht].y);return[Lt,bt,$t-Lt,hn-bt]}(i),he=Qe=>[(Qe.x-Y)/oe,(Qe.y-ie)/le],[_e,ze,De,Ne]=i.map(he),He=function(Qe,Lt,$t,bt,hn,Ht,At,mn){const tn=P1(0,0,1,0,1,1,0,1),dn=P1(Qe,Lt,$t,bt,hn,Ht,At,mn),wt=o.bx.adjoint([],dn);return o.bx.multiply(tn,tn,wt)}(_e[0],_e[1],ze[0],ze[1],De[0],De[1],Ne[0],Ne[1]);this.elevatedGlobePerspectiveTransform=Z2(_e[0],_e[1],ze[0],ze[1],De[0],De[1],Ne[0],Ne[1]);const je=(Qe,Lt)=>{T.push(Qe.lng);const $t=Math.round((Qe.lng-A)/D*vt),bt=Math.round((Qe.lat-R)/F*vt),hn=he(Lt),Ht=o.v.transformMat3([],[hn[0],hn[1],1],He),At=Math.round(Ht[0]/Ht[2]*vt),mn=Math.round(Ht[1]/Ht[2]*vt);V.emplaceBack($t,bt,At,mn)},at=i[3].x-i[0].x,_t=i[3].y-i[0].y,et=i[2].x-i[1].x,ht=i[2].y-i[1].y;for(let Qe=0;Qe<65;Qe++){const Lt=Qe/64,$t=[i[0].x+Lt*at,i[0].y+Lt*_t],bt=[i[1].x+Lt*et,i[1].y+Lt*ht],hn=bt[0]-$t[0],Ht=bt[1]-$t[1];for(let At=0;At<65;At++){const mn=At/64,tn={x:$t[0]+hn*mn,y:$t[1]+Ht*mn,z:0};je(r.projection.unproject(tn.x,tn.y),tn)}}this.elevatedGlobeVertexBuffer=e.createVertexBuffer(V,y1.members)}{this.maxLongitudeTriangleSize=0;let V=[],Y=new ba;const ie=(oe,le,he)=>{Y.emplaceBack(oe,le,he);const _e=T[oe],ze=T[le],De=T[he],Ne=Math.min(Math.min(_e,ze),De),He=Math.max(Math.max(_e,ze),De)-Ne;He>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=He),V.push(Ne+He/2)};for(let oe=0;oe<64;oe++)for(let le=0;le<64;le++){const he=65*oe+le,_e=he+1,ze=he+65,De=ze+1;ie(he,ze,_e),ie(_e,ze,De)}[V,Y]=function(oe,le){const he=Array.from({length:oe.length},(De,Ne)=>Ne);he.sort((De,Ne)=>oe[De]-oe[Ne]);const _e=[],ze=new ba;for(let De=0;De<he.length;De++){const Ne=he[De];_e.push(oe[Ne]);const He=3*Ne,je=He+1;ze.emplaceBack(le.uint16[He],le.uint16[je],le.uint16[je+1])}return[_e,ze]}(V,Y),this.elevatedGlobeTrianglesCenterLongitudes=V,this.elevatedGlobeIndexBuffer=e.createIndexBuffer(Y)}this.elevatedGlobeSegments=Wa.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,D/vt,0,F/vt,0,0,R,A,0])}prepare(){const e=Object.keys(this.tiles).length!==0;if(this.tileID&&!e)return;const r=this.map.painter.context,i=r.gl;!this._dirty||this.texture instanceof b1||(this.texture?this.texture.update(this.image):(this.texture=new Pl(r,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this._dirty=!1),e&&this._prepareData(r)}loadTile(e,r){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},r(null)):(e.state="errored",r(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(e){const r=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!r)return null;const i=this.elevatedGlobeTrianglesCenterLongitudes;let u=((T,P)=>T+360*Math.round((P-T)/360))(e+180,i[0]);const p=new Wa,h=(T,P)=>{p.segments.push({vertexOffset:0,primitiveOffset:T,vertexLength:r.segments[0].vertexLength,primitiveLength:P,sortKey:void 0,vaos:{}})},b=.51*this.maxLongitudeTriangleSize;if(Math.abs(i[0]-u)<=b){const T=nn(i,0,i.length,u+b);return T===i.length||h(T,pt(i,T+1,i.length,u+360-b)-T),p}u<i[0]&&(u+=360);const y=pt(i,0,i.length,u-b);if(y===i.length)return h(0,i.length),p;h(0,y-0);const x=nn(i,y+1,i.length,u+b);return x!==i.length&&h(x,i.length-x),p}}class BL extends Vt{constructor(e,r){super(e,{},r),this.implementation=e,e.slot&&(this.slot=e.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(e){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}const NL=new ct({visibility:new be(Ve.layout_sky.visibility)});var FL={paint:new ct({"sky-type":new be(Ve.paint_sky["sky-type"]),"sky-atmosphere-sun":new be(Ve.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new be(Ve.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new be(Ve.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new be(Ve.paint_sky["sky-gradient-radius"]),"sky-gradient":new mt(Ve.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new be(Ve.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new be(Ve.paint_sky["sky-atmosphere-color"]),"sky-opacity":new be(Ve.paint_sky["sky-opacity"])}),layout:NL};function t3(n,e,r){const i=[0,0,1],u=o.q.identity([]);return o.q.rotateY(u,u,r?-Ue(n)+Math.PI:Ue(n)),o.q.rotateX(u,u,-Ue(e)),o.v.transformQuat(i,i,u),o.v.normalize(i,i)}var jL={paint:new ct({})};const UL={circle:class extends Vt{constructor(n,e,r){super(n,_R,e,r)}createBucket(n){return new _4(n)}queryRadius(n){const e=n;return Zp("circle-radius",this,e)+Zp("circle-stroke-width",this,e)+Ug(this.paint.get("circle-translate"))}queryIntersectsFeature(n,e,r,i,u,p,h,b){const y=J8(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),p.angle,n.pixelToTileUnitsFactor),x=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return Q8(n,i,p,h,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",y,x)}getProgramIds(){return["circle"]}getDefaultProgramParams(n,e){const r=K8(this);return{config:new Ld(this,e),defines:r,overrideFog:!1}}},heatmap:class extends Vt{createBucket(n){return new t9(n)}constructor(n,e,r){super(n,TR,e,r),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(n){return Zp("heatmap-radius",this,n)}queryIntersectsFeature(n,e,r,i,u,p,h,b){const y=this.paint.get("heatmap-radius").evaluate(e,r);return Q8(n,i,p,h,b,!0,!0,new ge(0,0),y)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(n,e){return n==="heatmap"?{config:new Ld(this,e),overrideFog:!1}:{}}},hillshade:class extends Vt{constructor(n,e,r){super(n,IR,e,r)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(n,e){return{overrideFog:!1}}},fill:class extends Vt{constructor(n,e,r){super(n,jR,e,r)}getProgramIds(){const n=this.paint.get("fill-pattern"),e=n&&n.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getDefaultProgramParams(n,e){return{config:new Ld(this,e),overrideFog:!1}}recalculate(n,e){super.recalculate(n,e);const r=this.paint._values["fill-outline-color"];r.value.kind==="constant"&&r.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Zg(n)}queryRadius(){return Ug(this.paint.get("fill-translate"))}queryIntersectsFeature(n,e,r,i,u,p){return!n.queryGeometry.isAboveHorizon&&W8(X8(n.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),p.angle,n.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends Vt{constructor(n,e,r){super(n,ML,e,r),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(n){return new cm(n)}queryRadius(){return Ug(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(n,e,r,i,u,p,h,b,y){const x=J8(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),p.angle,n.pixelToTileUnitsFactor),T=this.paint.get("fill-extrusion-height").evaluate(e,r),P=this.paint.get("fill-extrusion-base").evaluate(e,r),A=[0,0],R=b&&p.elevation,D=p.elevation?p.elevation.exaggeration():1,F=n.tile.getBucket(this);if(R&&F instanceof cm){const le=F.centroidVertexArray,he=y+1;he<le.length&&(A[0]=le.geta_centroid_pos0(he),A[1]=le.geta_centroid_pos1(he))}if(A[0]===0&&A[1]===1)return!1;p.projection.name==="globe"&&(i=N2([i],[new ge(0,0),new ge(vt,vt)],n.tileID.canonical).map(le=>le.polygon).flat());const V=R?b:null,[Y,ie]=function(le,he,_e,ze,De,Ne,He,je,at,_t,et){return le.projection.name==="globe"?function(ht,Qe,Lt,$t,bt,hn,Ht,At,mn,tn,dn){const wt=[],wn=[],Xn=ht.projection.upVectorScale(dn,ht.center.lat,ht.worldSize).metersToTile,Cn=[0,0,0,1],Wn=[0,0,0,1],ia=(Nn,Na,Aa,pa)=>{Nn[0]=Na,Nn[1]=Aa,Nn[2]=pa,Nn[3]=1},za=B2();Lt>0&&(Lt+=za),$t+=za;for(const Nn of Qe){const Na=[],Aa=[];for(const pa of Nn){const ga=pa.x+bt.x,oa=pa.y+bt.y,ir=ht.projection.projectTilePoint(ga,oa,dn),Fa=ht.projection.upVector(dn,pa.x,pa.y);let fr=Lt,jr=$t;if(Ht){const Us=j2(ga,oa,Lt,$t,Ht,At,mn,tn);fr+=Us.base,jr+=Us.top}Lt!==0?ia(Cn,ir.x+Fa[0]*Xn*fr,ir.y+Fa[1]*Xn*fr,ir.z+Fa[2]*Xn*fr):ia(Cn,ir.x,ir.y,ir.z),ia(Wn,ir.x+Fa[0]*Xn*jr,ir.y+Fa[1]*Xn*jr,ir.z+Fa[2]*Xn*jr),o.v.transformMat4(Cn,Cn,hn),o.v.transformMat4(Wn,Wn,hn),Na.push(new cf(Cn[0],Cn[1],Cn[2])),Aa.push(new cf(Wn[0],Wn[1],Wn[2]))}wt.push(Na),wn.push(Aa)}return[wt,wn]}(le,he,_e,ze,De,Ne,He,je,at,_t,et):He?function(ht,Qe,Lt,$t,bt,hn,Ht,At,mn){const tn=[],dn=[],wt=[0,0,0,1];for(const wn of ht){const Xn=[],Cn=[];for(const Wn of wn){const ia=Wn.x+$t.x,za=Wn.y+$t.y,Nn=j2(ia,za,Qe,Lt,hn,Ht,At,mn);wt[0]=ia,wt[1]=za,wt[2]=Nn.base,wt[3]=1,o.e.transformMat4(wt,wt,bt),wt[3]=Math.max(wt[3],1e-5);const Na=new cf(wt[0]/wt[3],wt[1]/wt[3],wt[2]/wt[3]);wt[0]=ia,wt[1]=za,wt[2]=Nn.top,wt[3]=1,o.e.transformMat4(wt,wt,bt),wt[3]=Math.max(wt[3],1e-5);const Aa=new cf(wt[0]/wt[3],wt[1]/wt[3],wt[2]/wt[3]);Xn.push(Na),Cn.push(Aa)}tn.push(Xn),dn.push(Cn)}return[tn,dn]}(he,_e,ze,De,Ne,He,je,at,_t):function(ht,Qe,Lt,$t,bt){const hn=[],Ht=[],At=bt[8]*Qe,mn=bt[9]*Qe,tn=bt[10]*Qe,dn=bt[11]*Qe,wt=bt[8]*Lt,wn=bt[9]*Lt,Xn=bt[10]*Lt,Cn=bt[11]*Lt;for(const Wn of ht){const ia=[],za=[];for(const Nn of Wn){const Na=Nn.x+$t.x,Aa=Nn.y+$t.y,pa=bt[0]*Na+bt[4]*Aa+bt[12],ga=bt[1]*Na+bt[5]*Aa+bt[13],oa=bt[2]*Na+bt[6]*Aa+bt[14],ir=bt[3]*Na+bt[7]*Aa+bt[15],Fa=pa+At,fr=ga+mn,jr=oa+tn,Us=Math.max(ir+dn,1e-5),br=pa+wt,ur=ga+wn,xs=oa+Xn,ws=Math.max(ir+Cn,1e-5);ia.push(new cf(Fa/Us,fr/Us,jr/Us)),za.push(new cf(br/ws,ur/ws,xs/ws))}hn.push(ia),Ht.push(za)}return[hn,Ht]}(he,_e,ze,De,Ne)}(p,i,P,T,x,h,V,A,D,p.center.lat,n.tileID.canonical),oe=n.queryGeometry;return function(le,he,_e){let ze=1/0;W8(_e,he)&&(ze=F2(_e,he[0]));for(let De=0;De<he.length;De++){const Ne=he[De],He=le[De];for(let je=0;je<Ne.length-1;je++){const at=Ne[je],_t=[at,Ne[je+1],He[je+1],He[je],at];q8(_e,_t)&&(ze=Math.min(ze,F2(_e,_t)))}}return ze!==1/0&&ze}(Y,ie,oe.isPointQuery()?oe.screenBounds:oe.screenGeometry)}},line:class extends Vt{constructor(n,e,r){super(n,U2,e,r),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof yo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(n,e){super.recalculate(n,e),this.paint._values["line-floorwidth"]=W2.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new g1(n)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(n,e){const r=$2(this);return{config:new Ld(this,e),defines:r,overrideFog:!1}}queryRadius(n){const e=n,r=H2(Zp("line-width",this,e),Zp("line-gap-width",this,e)),i=Zp("line-offset",this,e);return r/2+Math.abs(i)+Ug(this.paint.get("line-translate"))}queryIntersectsFeature(n,e,r,i,u,p){if(n.queryGeometry.isAboveHorizon)return!1;const h=X8(n.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),p.angle,n.pixelToTileUnitsFactor),b=n.pixelToTileUnitsFactor/2*H2(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),y=this.paint.get("line-offset").evaluate(e,r);return y&&(i=function(x,T){const P=[],A=new ge(0,0);for(let R=0;R<x.length;R++){const D=x[R],F=[];for(let V=0;V<D.length;V++){const Y=D[V],ie=D[V+1],oe=V===0?A:Y.sub(D[V-1])._unit()._perp(),le=V===D.length-1?A:ie.sub(Y)._unit()._perp(),he=oe._add(le)._unit();he._mult(1/(he.x*le.x+he.y*le.y)),F.push(he._mult(T)._add(Y))}P.push(F)}return P}(i,y*n.pixelToTileUnitsFactor)),function(x,T,P){for(let A=0;A<T.length;A++){const R=T[A];if(x.length>=3){for(let D=0;D<R.length;D++)if(jd(x,R[D]))return!0}if(hR(x,R,P))return!0}return!1}(h,i,b)}isTileClipped(){return!0}},symbol:u1,background:class extends Vt{constructor(n,e,r){super(n,LL,e,r)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(n,e){return{overrideFog:!1}}},raster:class extends Vt{constructor(n,e,r){super(n,OL,e,r),this._updateColorRamp()}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}isLayerDraped(n){return!(n&&n._source instanceof Y2)||!n._source.onNorthPole&&!n._source.onSouthPole&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(n){n!=="raster-color"&&n!=="raster-color-range"||this._updateColorRamp()}_updateColorRamp(){if(!this.hasColorMap())return;const n=this._transitionablePaint._values["raster-color"].value.expression,[e,r]=this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0});this.colorRamp=Vg({expression:n,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:e,end:r}],resolution:256}),this.colorRampTexture=null}},sky:class extends Vt{constructor(n,e,r){super(n,FL,e,r),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="sky-gradient"?this._updateColorRamp():n!=="sky-atmosphere-sun"&&n!=="sky-atmosphere-halo-color"&&n!=="sky-atmosphere-color"&&n!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Vg({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(n){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=n.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(n,e){if(this.paint.get("sky-type")==="atmosphere"){const i=this.paint.get("sky-atmosphere-sun"),u=!i,p=n.style.light,h=p.properties.get("position");return u&&p.properties.get("anchor")==="viewport"&&Yt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?t3(h.azimuthal,90-h.polar,e):t3(i[0],90-i[1],e)}const r=this.paint.get("sky-gradient-center");return t3(r[0],90-r[1],e)}isSky(){return!0}markSkyboxValid(n){this._skyboxInvalidated=!1,this._lightPosition=n.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const n=this.paint.get("sky-type");return n==="atmosphere"?["skyboxCapture","skybox"]:n==="gradient"?["skyboxGradient"]:null}},slot:class extends Vt{constructor(n,e,r){super(n,jL,e)}},model:class extends Vt{constructor(n,e,r){super(n,bL,e,r)}createBucket(n){return new g2(n)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(){return 0}queryIntersectsFeature(){return!1}_handleOverridablePaintPropertyUpdate(n,e,r){return!(!this.layout||e.isDataDriven()||r.isDataDriven()||n!=="model-color"&&n!=="model-color-mix-intensity"&&n!=="model-rotation"&&n!=="model-scale"&&n!=="model-translation"&&n!=="model-emissive-strength")}_isPropertyZoomDependent(n){const e=this._transitionablePaint._values[n];return e!=null&&e.value!=null&&e.value.expression!=null&&e.value.expression instanceof Pd}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}}};class VL{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class GL{constructor(){this.tasks={},this.taskQueue=[],jn(["process"],this),this.invoker=new VL(this.process),this.nextId=0}add(e,r){const i=this.nextId++,u=function({type:p,isSymbolTile:h,zoom:b}){return b=b||0,p==="message"?0:p!=="maybePrepare"||h?p!=="parseTile"||h?p==="parseTile"&&h?300-b:p==="maybePrepare"&&h?400-b:500:200-b:100-b}(r);if(u===0){Re();try{e()}finally{}return null}return this.tasks[i]={fn:e,metadata:r,priority:u,id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}}}process(){Re();try{if(this.taskQueue=this.taskQueue.filter(i=>!!this.tasks[i]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let u=0;u<this.taskQueue.length;u++){const p=this.tasks[this.taskQueue[u]];p.priority<r&&(r=p.priority,e=u)}if(e===null)return null;const i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}remove(){this.invoker.remove()}}class X2{constructor(e,r,i){this.target=e,this.parent=r,this.mapId=i,this.callbacks={},this.cancelCallbacks={},jn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new GL}send(e,r,i,u,p=!1,h){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=h,this.callbacks[b]=i);const y=new Set;return this.target.postMessage({id:b,type:e,hasCallback:!!i,targetMapId:u,mustQueue:p,sourceMapId:this.mapId,data:d(r,y)},y),{cancel:()=>{i&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(e){const r=e.data,i=r.id;if(i&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){const u=this.cancelCallbacks[i];delete this.cancelCallbacks[i],u&&u.cancel()}else if(r.mustQueue||Re()){const u=this.callbacks[i],p=this.scheduler.add(()=>this.processTask(i,r),u&&u.metadata||{type:"message"});p&&(this.cancelCallbacks[i]=p)}else this.processTask(i,r)}processTask(e,r){if(delete this.cancelCallbacks[e],r.type==="<response>"){const i=this.callbacks[e];delete this.callbacks[e],i&&(r.error?i(_(r.error)):i(null,_(r.data)))}else{const i=new Set,u=r.hasCallback?(h,b)=>{this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:h?d(h):null,data:d(b,i)},i)}:h=>{},p=_(r.data);if(this.parent[r.type])this.parent[r.type](r.sourceMapId,p,u);else if(this.parent.getWorkerSource){const h=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,h[0],p.source,p.scope)[h[1]](p,u)}else u(new Error(`Could not find function ${r.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class um{constructor(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=Zn();const i=this.workerPool.acquire(this.id);for(let u=0;u<i.length;u++){const p=new um.Actor(i[u],r,this.id);p.name=`Worker ${u}`,this.actors.push(p)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(e,r,i){Nt(this.actors,(u,p)=>{u.send(e,r,p)},i=i||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}um.Actor=X2;class J2{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new Tl({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const i=this.getKey(e,r);return this.positions[i]}trim(){const e=this.width,r=this.height=Vr(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,i){const u=[];let p=e.length%2==1?-e[e.length-1]*i:0,h=e[0]*i,b=!0;u.push({left:p,right:h,isDash:b,zeroLength:e[0]===0});let y=e[0];for(let x=1;x<e.length;x++){b=!b;const T=e[x];p=y*i,y+=T,h=y*i,u.push({left:p,right:h,isDash:b,zeroLength:T===0})}return u}addRoundDash(e,r,i){const u=r/2;for(let p=-i;p<=i;p++){const h=this.width*(this.nextRow+i+p);let b=0,y=e[b];for(let x=0;x<this.width;x++){x/y.right>1&&(y=e[++b]);const T=Math.abs(x-y.left),P=Math.abs(x-y.right),A=Math.min(T,P);let R;const D=p/i*(u+1);if(y.isDash){const F=u-Math.abs(D);R=Math.sqrt(A*A+F*F)}else R=u-Math.sqrt(A*A+D*D);this.image.data[h+x]=Math.max(0,Math.min(255,R+128))}}}addRegularDash(e,r){for(let y=e.length-1;y>=0;--y){const x=e[y],T=e[y+1];x.zeroLength?e.splice(y,1):T&&T.isDash===x.isDash&&(T.left=x.left,e.splice(y,1))}const i=e[0],u=e[e.length-1];i.isDash===u.isDash&&(i.left=u.left-this.width,u.right=i.right+this.width);const p=this.width*this.nextRow;let h=0,b=e[h];for(let y=0;y<this.width;y++){y/b.right>1&&(b=e[++h]);const x=Math.abs(y-b.left),T=Math.abs(y-b.right),P=Math.min(x,T);this.image.data[p+y]=Math.max(0,Math.min(255,(b.isDash?P:-P)+r+128))}}addDash(e,r){const i=this.getKey(e,r);if(this.positions[i])return this.positions[i];const u=r==="round",p=u?7:0,h=2*p+1;if(this.nextRow+h>this.height)return Yt("LineAtlas out of space"),null;e.length===0&&e.push(1);let b=0;for(let T=0;T<e.length;T++)e[T]<0&&(Yt("Negative value is found in line dasharray, replacing values with 0"),e[T]=0),b+=e[T];if(b!==0){const T=this.width/b,P=this.getDashRanges(e,this.width,T);u?this.addRoundDash(P,T,p):this.addRegularDash(P,r==="square"?.5*T:0)}const y=this.nextRow+p;this.nextRow+=h;const x={tl:[y,p],br:[b,0]};return this.positions[i]=x,x}}qt(J2,"LineAtlas");const K2=1*rc;class Q2{constructor(e){const r={},i=[];for(const b in e){const y=e[b],x=r[b]={};for(const T in y.glyphs){const P=y.glyphs[+T];if(!P||P.bitmap.width===0||P.bitmap.height===0)continue;const A=P.metrics.localGlyph?K2:1,R={x:0,y:0,w:P.bitmap.width+2*A,h:P.bitmap.height+2*A};i.push(R),x[T]=R}}const{w:u,h:p}=B4(i),h=new Tl({width:u||1,height:p||1});for(const b in e){const y=e[b];for(const x in y.glyphs){const T=y.glyphs[+x];if(!T||T.bitmap.width===0||T.bitmap.height===0)continue;const P=r[b][x],A=T.metrics.localGlyph?K2:1;Tl.copy(T.bitmap,h,{x:0,y:0},{x:P.x+A,y:P.y+A},T.bitmap)}}this.image=h,this.positions=r}}qt(Q2,"GlyphAtlas");class $L{constructor(e){this.tileID=new Hr(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.scope=e.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.promoteId=e.promoteId,this.isSymbolTile=e.isSymbolTile,this.tileTransform=mu(e.tileID.canonical,e.projection),this.projection=e.projection,this.brightness=e.brightness,this.extraShadowCaster=!!e.extraShadowCaster}parse(e,r,i,u,p){this.status="parsing",this.data=e,this.collisionBoxArray=new Oy;const h=new p9(Object.keys(e.layers).sort()),b=new R4(this.tileID,this.promoteId);b.bucketLayerIDs=[];const y={},x=new J2(256,256),T={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:x,availableImages:i,brightness:this.brightness},P=r.familiesBySource[this.source];for(const ie in P){const oe=e.layers[ie];if(!oe)continue;let le=!1,he=!1,_e=!1;for(const Ne of P[ie])Ne[0].type==="symbol"?le=!0:he=!0,Ne[0].is3D()&&Ne[0].type!=="model"&&(_e=!0);if(this.extraShadowCaster&&!_e||this.isSymbolTile===!0&&!le||this.isSymbolTile===!1&&!he)continue;oe.version===1&&Yt(`Vector tile source "${this.source}" layer "${ie}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ze=h.encode(ie),De=[];for(let Ne=0;Ne<oe.length;Ne++){const He=oe.feature(Ne),je=b.getId(He,ie);De.push({feature:He,id:je,index:Ne,sourceLayerIndex:ze})}for(const Ne of P[ie]){const He=Ne[0];(!this.extraShadowCaster||He.is3D()&&He.type!=="model")&&(this.isSymbolTile!==void 0&&He.type==="symbol"!==this.isSymbolTile||He.minzoom&&this.zoom<Math.floor(He.minzoom)||He.maxzoom&&this.zoom>=He.maxzoom||He.visibility!=="none"&&(n3(Ne,this.zoom,T.brightness,i),(y[He.id]=He.createBucket({index:b.bucketLayerIDs.length,layers:Ne,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ze,sourceID:this.source,projection:this.projection.spec})).populate(De,T,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(Ne.map(je=>je.id))))}}let A,R,D,F;x.trim();const V={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Y=()=>{if(A)return this.status="done",p(A);if(this.extraShadowCaster)this.status="done",p(null,{buckets:Sn(y).filter(ie=>!ie.isEmpty()),featureIndex:b,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:T.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(R&&D&&F){const ie=new Q2(R),oe=new V9(D,F);for(const le in y){const he=y[le];he instanceof nm?(n3(he.layers,this.zoom,T.brightness,i),jk(he,R,ie.positions,D,oe.iconPositions,this.showCollisionBoxes,i,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):he.hasPattern&&(he instanceof g1||he instanceof Zg||he instanceof cm)&&(n3(he.layers,this.zoom,T.brightness,i),he.addFeatures(T,this.tileID.canonical,oe.patternPositions,i,this.tileTransform,this.brightness))}this.status="done",p(null,{buckets:Sn(y).filter(le=>!le.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ie.image,lineAtlas:x,imageAtlas:oe,brightness:T.brightness})}};if(!this.extraShadowCaster){const ie=vr(T.glyphDependencies,he=>Object.keys(he).map(Number));Object.keys(ie).length?u.send("getGlyphs",{uid:this.uid,stacks:ie,scope:this.scope},(he,_e)=>{A||(A=he,R=_e,Y())},void 0,!1,V):R={};const oe=Object.keys(T.iconDependencies);oe.length?u.send("getImages",{icons:oe,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(he,_e)=>{A||(A=he,D=_e,Y())},void 0,!1,V):D={};const le=Object.keys(T.patternDependencies);le.length?u.send("getImages",{icons:le,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(he,_e)=>{A||(A=he,F=_e,Y())},void 0,!1,V):F={}}Y()}}function n3(n,e,r,i){const u=new Ee(e,{brightness:r});for(const p of n)p.recalculate(u,i)}class e7{constructor(e){this.entries={},this.scheduler=e}request(e,r,i,u){const p=this.entries[e]=this.entries[e]||{callbacks:[]};if(p.result){const[h,b]=p.result;return this.scheduler?this.scheduler.add(()=>{u(h,b)},r):u(h,b),()=>{}}return p.callbacks.push(u),p.cancel||(p.cancel=i((h,b)=>{p.result=[h,b];for(const y of p.callbacks)this.scheduler?this.scheduler.add(()=>{y(h,b)},r):y(h,b);setTimeout(()=>delete this.entries[e],3e3)})),()=>{p.result||(p.callbacks=p.callbacks.filter(h=>h!==u),p.callbacks.length||(p.cancel(),delete this.entries[e]))}}}function t7(n,e,r){const i=JSON.stringify(n.request);return n.data&&(this.deduped.entries[i]={result:[null,n.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom},u=>{const p=It(n.request,(h,b,y,x)=>{h?u(h):b&&u(null,{vectorTile:r?void 0:new C4(new e1(b)),rawData:b,cacheControl:y,expires:x})});return()=>{p.cancel(),u()}},e)}var dm={workerUrl:"",workerClass:null,workerParams:void 0};function qL(){return dm.workerClass!=null?new dm.workerClass:new self.Worker(dm.workerUrl,dm.workerParams)}const a3="mapboxgl_preloaded_worker_pool";class pm{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<pm.workerCount;)this.workers.push(new qL);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.workers&&this.numActive()===0&&(this.workers.forEach(r=>{r.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[a3]}numActive(){return Object.keys(this.active).length}}let fm;function r3(){return fm||(fm=new pm),fm}pm.workerCount=2;let A1,s3,ic,i3=null;function n7(){return Re()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:s3||L.DRACO_URL}const o3=5123,c3=5126,l3={5120:Int8Array,5121:Uint8Array,5122:Int16Array,[o3]:Uint16Array,5125:Uint32Array,[c3]:Float32Array},WL={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",[o3]:"DT_UINT16",5125:"DT_UINT32",[c3]:"DT_FLOAT32"},u3={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function a7(n,e,r){const i=r.json.bufferViews.length,u=r.buffers.length;e.bufferView=i,r.json.bufferViews[i]={buffer:u,byteLength:n.byteLength},r.buffers[u]=n}const d3="KHR_draco_mesh_compression";function HL(n,e){const r=n.extensions&&n.extensions[d3];if(!r)return;const i=new ic.Decoder,u=o7(e,r.bufferView),p=new ic.Mesh;if(!i.DecodeArrayToMesh(u,u.byteLength,p))throw new Error("Failed to decode Draco mesh");const h=e.json.accessors[n.indices],b=l3[h.componentType],y=h.count*b.BYTES_PER_ELEMENT,x=ic._malloc(y);b===Uint16Array?i.GetTrianglesUInt16Array(p,y,x):i.GetTrianglesUInt32Array(p,y,x),a7(ic.memory.buffer.slice(x,x+y),h,e),ic._free(x);for(const T of Object.keys(r.attributes)){const P=i.GetAttributeByUniqueId(p,r.attributes[T]),A=e.json.accessors[n.attributes[T]],R=WL[A.componentType],D=A.count*u3[A.type]*l3[A.componentType].BYTES_PER_ELEMENT,F=ic._malloc(D);i.GetAttributeDataArrayForAllPoints(p,P,ic[R],D,F),a7(ic.memory.buffer.slice(F,F+D),A,e),ic._free(F)}i.destroy(),p.destroy(),delete n.extensions[d3]}const r7=1179937895,s7=new TextDecoder("utf8");function i7(n,e){return new URL(n,e).href}function ZL(n,e,r,i){return fetch(i7(n.uri,i)).then(u=>u.arrayBuffer()).then(u=>{e.buffers[r]=u})}function o7(n,e){const r=n.json.bufferViews[e];return new Uint8Array(n.buffers[r.buffer],r.byteOffset||0,r.byteLength)}function YL(n,e,r,i){if(n.uri){const u=i7(n.uri,i);return fetch(u).then(p=>p.blob()).then(p=>createImageBitmap(p)).then(p=>{e.images[r]=p})}if(n.bufferView!==void 0){const u=o7(e,n.bufferView),p=new Blob([u],{type:n.mimeType});return createImageBitmap(p).then(h=>{e.images[r]=h})}}function c7(n,e=0,r){const i={json:null,images:[],buffers:[]};if(new Uint32Array(n,e,1)[0]===r7){const x=new Uint32Array(n,e);let T=2;const P=(x[T++]>>2)-3,A=x[T++]>>2;if(T++,i.json=JSON.parse(s7.decode(x.subarray(T,T+A))),T+=A,T<P){const R=x[T++];T++;const D=e+(T<<2);i.buffers[0]=n.slice(D,D+R)}}else i.json=JSON.parse(s7.decode(new Uint8Array(n,e)));const{buffers:u,images:p,meshes:h,extensionsUsed:b}=i.json;let y=Promise.resolve();if(u){const x=[];for(let T=0;T<u.length;T++){const P=u[T];P.uri?x.push(ZL(P,i,T,r)):i.buffers[T]||(i.buffers[T]=null)}y=Promise.all(x)}return y.then(()=>{const x=[],T=b&&b.includes(d3);if(T&&x.push(function(){if(!ic)return A1||(A1=function(P){let A,R=null;function D(){A=new Uint8Array(R.buffer)}function F(){throw new Error("Unexpected Draco error.")}const V={a:{a:F,d:function(Y,ie,oe){return A.copyWithin(Y,ie,ie+oe)},c:function(Y){const ie=A.length,oe=Math.max(Y>>>0,Math.ceil(1.2*ie)),le=Math.ceil((oe-ie)/65536);try{return R.grow(le),D(),!0}catch{return!1}},b:F}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(P,V):P.then(Y=>Y.arrayBuffer()).then(Y=>WebAssembly.instantiate(Y,V))).then(Y=>{const{Rb:ie,Qb:oe,P:le,T:he,X:_e,Ja:ze,La:De,Qa:Ne,Va:He,Wa:je,eb:at,jb:_t,f:et,e:ht,yb:Qe,zb:Lt,Ab:$t,Bb:bt,Db:hn,Gb:Ht}=Y.instance.exports;R=ht;const At=(()=>{let mn=0,tn=0,dn=0,wt=0;return wn=>{dn&&(ie(wt),ie(mn),tn+=dn,dn=mn=0),mn||(tn+=128,mn=oe(tn));const Xn=wn.length+7&-8;let Cn=mn;Xn>=tn&&(dn=Xn,Cn=wt=oe(Xn));for(let Wn=0;Wn<wn.length;Wn++)A[Cn+Wn]=wn[Wn];return Cn}})();return D(),et(),{memory:ht,_free:ie,_malloc:oe,Mesh:class{constructor(){this.ptr=le()}destroy(){he(this.ptr)}},Decoder:class{constructor(){this.ptr=ze()}destroy(){_t(this.ptr)}DecodeArrayToMesh(mn,tn,dn){const wt=At(mn),wn=De(this.ptr,wt,tn,dn.ptr);return!!_e(wn)}GetAttributeByUniqueId(mn,tn){return{ptr:Ne(this.ptr,mn.ptr,tn)}}GetTrianglesUInt16Array(mn,tn,dn){He(this.ptr,mn.ptr,tn,dn)}GetTrianglesUInt32Array(mn,tn,dn){je(this.ptr,mn.ptr,tn,dn)}GetAttributeDataArrayForAllPoints(mn,tn,dn,wt,wn){at(this.ptr,mn.ptr,tn.ptr,dn,wt,wn)}},DT_INT8:Qe(),DT_UINT8:Lt(),DT_INT16:$t(),DT_UINT16:bt(),DT_UINT32:hn(),DT_FLOAT32:Ht()}})}(fetch(n7())),A1.then(P=>{ic=P,A1=void 0}))}()),p)for(let P=0;P<p.length;P++)x.push(YL(p[P],i,P,r));return(x.length?Promise.all(x):Promise.resolve()).then(()=>{if(T&&h)for(const{primitives:P}of h)for(const A of P)HL(A,i);return i})})}class l7{constructor(e,r,i){if(this.triangleCount=r.length/3,this.min=new ge(0,0),this.max=new ge(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||e.length===0||i===0)return;const u=e.map(T=>T.x),p=e.map(T=>T.y);this.min=new ge(Math.min(...u),Math.min(...p)),this.max=new ge(Math.max(...u),Math.max(...p));const h=this.max.sub(this.min);h.x=Math.max(h.x,1),h.y=Math.max(h.y,1);const b=Math.max(h.x,h.y)/i;this.cellsX=Math.max(1,Math.ceil(h.x/b)),this.cellsY=Math.max(1,Math.ceil(h.y/b)),this.xScale=1/b,this.yScale=1/b;const y=[];for(let T=0;T<this.triangleCount;T++){const P=e[r[3*T+0]].sub(this.min),A=e[r[3*T+1]].sub(this.min),R=e[r[3*T+2]].sub(this.min),D=xu(Math.floor(Math.min(P.x,A.x,R.x)),this.xScale,this.cellsX),F=xu(Math.floor(Math.max(P.x,A.x,R.x)),this.xScale,this.cellsX),V=xu(Math.floor(Math.min(P.y,A.y,R.y)),this.yScale,this.cellsY),Y=xu(Math.floor(Math.max(P.y,A.y,R.y)),this.yScale,this.cellsY),ie=new ge(0,0),oe=new ge(0,0),le=new ge(0,0),he=new ge(0,0);for(let _e=V;_e<=Y;++_e){ie.y=oe.y=_e*b,le.y=he.y=(_e+1)*b;for(let ze=D;ze<=F;++ze)ie.x=le.x=ze*b,oe.x=he.x=(ze+1)*b,(x4(P,A,R,ie,oe,he)||x4(P,A,R,ie,he,le))&&y.push({cellIdx:_e*this.cellsX+ze,triIdx:T})}}if(y.length===0)return;y.sort((T,P)=>T.cellIdx-P.cellIdx||T.triIdx-P.triIdx);let x=0;for(;x<y.length;){const T=y[x].cellIdx,P={start:this.payload.length,len:0};for(;x<y.length&&y[x].cellIdx===T;)++P.len,this.payload.push(y[x++].triIdx);this.cells[T]=P}}query(e,r,i){if(this.triangleCount===0||this.cells.length===0||e.x>this.max.x||this.min.x>r.x||e.y>this.max.y||this.min.y>r.y)return;this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8)));for(let y=0;y<this.lookup.length;y++)this.lookup[y]=0;const u=xu(e.x-this.min.x,this.xScale,this.cellsX),p=xu(r.x-this.min.x,this.xScale,this.cellsX),h=xu(e.y-this.min.y,this.yScale,this.cellsY),b=xu(r.y-this.min.y,this.yScale,this.cellsY);for(let y=h;y<=b;y++)for(let x=u;x<=p;x++){const T=this.cells[y*this.cellsX+x];if(T)for(let P=0;P<T.len;P++){const A=this.payload[T.start+P],R=Math.floor(A/8),D=1<<A%8;if(!(this.lookup[R]&D)&&(this.lookup[R]|=D,i.push(A),i.length===this.triangleCount))return}}}}function xu(n,e,r){return Math.max(0,Math.min(r-1,Math.floor(n*e)))}function Wd(n,e){const r=n.json.bufferViews[e.bufferView];return new l3[e.componentType](n.buffers[r.buffer],(e.byteOffset||0)+(r.byteOffset||0),e.count*u3[e.type])}function XL(n,e,r){const i=n.indices,u=n.attributes,p={};p.indexArray=new ba;const h=e.json.accessors[i],b=h.count/3;p.indexArray.reserve(b);const y=Wd(e,h);for(let A=0;A<b;A++)p.indexArray.emplaceBack(y[3*A],y[3*A+1],y[3*A+2]);p.indexArray._trim(),p.vertexArray=new Rd;const x=e.json.accessors[u.POSITION];p.vertexArray.reserve(x.count);const T=Wd(e,x);for(let A=0;A<x.count;A++)p.vertexArray.emplaceBack(T[3*A],T[3*A+1],T[3*A+2]);if(p.vertexArray._trim(),p.aabb=new gr(x.min,x.max),p.centroid=function(A,R){const D=[0,0,0],F=A.length;if(F>0){for(let V=0;V<F;V++){const Y=3*A[V];D[0]+=R[Y],D[1]+=R[Y+1],D[2]+=R[Y+2]}D[0]/=F,D[1]/=F,D[2]/=F}return D}(y,T),u.COLOR_0!==void 0){const A=e.json.accessors[u.COLOR_0],R=u3[A.type];if(A.componentType===c3){p.colorArray=R===3?new Rd:new ua,p.colorArray.reserve(A.count);const D=Wd(e,A);if(R===3)for(let F=0;F<A.count;F++)p.colorArray.emplaceBack(D[3*F],D[3*F+1],D[3*F+2]);else for(let F=0;F<A.count;F++)p.colorArray.emplaceBack(D[4*F],D[4*F+1],D[4*F+2],D[4*F+3]);p.colorArray._trim()}else if(A.componentType===o3&&R===4){p.colorArray=new ua,p.colorArray.resize(A.count);const D=Wd(e,A),F=1/65535,V=p.colorArray.float32;for(let Y=0;Y<4*D.length;++Y)V[Y]=D[Y]*F}else Yt(`glTF color buffer parsing for accessor ${JSON.stringify(A)} is not supported`)}if(u.NORMAL!==void 0){p.normalArray=new Rd;const A=e.json.accessors[u.NORMAL];p.normalArray.reserve(A.count);const R=Wd(e,A);for(let D=0;D<A.count;D++)p.normalArray.emplaceBack(R[3*D],R[3*D+1],R[3*D+2]);p.normalArray._trim()}if(u.TEXCOORD_0!==void 0&&r.length>0){p.texcoordArray=new Dh;const A=e.json.accessors[u.TEXCOORD_0];p.texcoordArray.reserve(A.count);const R=Wd(e,A);for(let D=0;D<A.count;D++)p.texcoordArray.emplaceBack(R[2*D],R[2*D+1]);p.texcoordArray._trim()}const P=n.material;return p.material=function(A,R){const{emissiveFactor:D=[0,0,0],alphaMode:F="OPAQUE",alphaCutoff:V=.5,normalTexture:Y,occlusionTexture:ie,emissiveTexture:oe,doubleSided:le}=A,{baseColorFactor:he=[1,1,1,1],metallicFactor:_e=1,roughnessFactor:ze=1,baseColorTexture:De,metallicRoughnessTexture:Ne}=A.pbrMetallicRoughness||{};return{pbrMetallicRoughness:{baseColorFactor:new wa(...he),metallicFactor:_e,roughnessFactor:ze,baseColorTexture:De?R[De.index]:void 0,metallicRoughnessTexture:Ne?R[Ne.index]:void 0},doubleSided:le,emissiveFactor:D,alphaMode:F,alphaCutoff:V,normalTexture:Y?R[Y.index]:void 0,occlusionTexture:ie?R[ie.index]:void 0,emissionTexture:oe?R[oe.index]:void 0,defined:A.defined===void 0}}(P!==void 0?e.json.materials[P]:{defined:!1},r),u._FEATURE_RGBA4444!==void 0&&(p.featureData=new Uint32Array(Wd(e,e.json.accessors[u._FEATURE_RGBA4444]).buffer)),p}function u7(n,e,r){const{matrix:i,rotation:u,translation:p,scale:h,mesh:b,extras:y,children:x}=n,T={};if(T.matrix=i||o.m.fromRotationTranslationScale([],u||[0,0,0,1],p||[0,0,0],h||[1,1,1]),b!==void 0){T.meshes=r[b];const P=T.anchor=[0,0];for(const A of T.meshes){const{min:R,max:D}=A.aabb;P[0]+=R[0]+D[0],P[1]+=R[1]+D[1]}P[0]=Math.floor(P[0]/T.meshes.length/2),P[1]=Math.floor(P[1]/T.meshes.length/2)}if(y&&(y.id&&(T.id=y.id),y.lights&&(T.lights=function(P){if(!P.length)return[];const A=function(Y){const ie=atob(Y),oe=new Uint8Array(ie.length);for(let le=0;le<ie.length;le++)oe[le]=ie.codePointAt(le);return oe}(P),R=[],D=A.length/24,F=new Uint16Array(A.buffer),V=new Float32Array(A.buffer);for(let Y=0;Y<D;Y++){const ie=F[2*Y*6]/30,oe=F[2*Y*6+1]/30,le=F[2*Y*6+10]/100,he=V[6*Y+1],_e=V[6*Y+2],ze=V[6*Y+3],De=V[6*Y+4],Ne=ze-he,He=De-_e,je=Math.hypot(Ne,He);R.push({pos:[he+.5*Ne,_e+.5*He,oe],normal:[He/je,-Ne/je,0],width:je,height:ie,depth:le,points:[he,_e,ze,De]})}return R}(y.lights))),x){const P=[];for(const A of x)P.push(u7(e.json.nodes[A],e,r));T.children=P}return T}function JL(n){if(n.vertices.length===0||n.indices.length===0)return null;const[e,r]=[n.vertices[0].clone(),n.vertices[0].clone()];for(let h=1;h<n.vertices.length;++h){const b=n.vertices[h];e.x=Math.min(e.x,b.x),e.y=Math.min(e.y,b.y),r.x=Math.max(r.x,b.x),r.y=Math.max(r.y,b.y)}const i=Math.ceil(Math.max(r.x-e.x,r.y-e.y)/256),u=Math.max(8,i),p=new l7(n.vertices,n.indices,u);return{vertices:n.vertices,indices:n.indices,grid:p,min:e,max:r}}function KL(n){if(!n.extras||!n.extras.ground)return null;const e=n.extras.ground;if(!e||!Array.isArray(e)||e.length===0)return null;const r=e[0];if(!r||!Array.isArray(r)||r.length===0)return null;const i=[];for(const h of r){if(!Array.isArray(h)||h.length!==2)continue;const b=h[0],y=h[1];typeof b=="number"&&typeof y=="number"&&i.push(new ge(b,y))}if(i.length<3)return null;i.length>1&&i[i.length-1].equals(i[0])&&i.pop();let u=0;for(let h=0;h<i.length;h++){const b=i[h],y=i[(h+1)%i.length],x=i[(h+2)%i.length];u+=(b.x-y.x)*(x.y-y.y)-(x.x-y.x)*(b.y-y.y)}u>0&&i.reverse();const p=Hg(i.flatMap(h=>[h.x,h.y]),[]);return p.length===0?null:{vertices:i,indices:p}}function QL(n){const e=[],r=[];let i=0;for(const u of n){i=e.length;const p=u.vertexArray.float32,h=u.indexArray.uint16;for(let b=0;b<u.vertexArray.length;b++)e.push(new ge(p[3*b+0],p[3*b+1]));for(let b=0;b<3*u.indexArray.length;b++)r.push(h[b]+i)}if(r.length%3!=0)return null;for(let u=0;u<r.length;u+=3){const p=e[r[u+0]],h=e[r[u+1]],b=e[r[u+2]];(p.x-h.x)*(b.y-h.y)-(b.x-h.x)*(p.y-h.y)>0&&([r[u+1],r[u+2]]=[r[u+2],r[u+1]])}return{vertices:e,indices:r}}function d7(n){const e=function(y,x){const T=[],P=WebGL2RenderingContext;if(y.json.textures)for(const A of y.json.textures){const R={magFilter:P.LINEAR,minFilter:P.NEAREST,wrapS:P.REPEAT,wrapT:P.REPEAT};A.sampler!==void 0&&Object.assign(R,y.json.samplers[A.sampler]),T.push({image:x[A.source],sampler:R,uploaded:!1})}return T}(n,n.images),r=function(y,x){const T=[];for(const P of y.json.meshes){const A=[];for(const R of P.primitives)A.push(XL(R,y,x));T.push(A)}return T}(n,e),{scenes:i,scene:u,nodes:p}=n.json,h=i?i[u||0].nodes:p,b=[];for(const y of h)b.push(u7(p[y],n,r));return function(y,x,T){const P={},A=new Set;for(let R=0;R<y.length;R++){const D=T[x[R]];if(!D.extras)continue;const F=D.extras["mapbox:footprint:version"],V=D.extras["mapbox:footprint:id"];(F||V)&&A.add(R),F==="1.0.0"&&V&&(P[V]=R)}for(let R=0;R<y.length;R++){if(A.has(R))continue;const D=y[R],F=T[x[R]];if(!F.extras)continue;let V=null;D.id in P&&(V=QL(y[P[D.id]].meshes)),V||(V=KL(F)),V&&(D.footprint=JL(V))}if(A.size>0){const R=Array.from(A.values()).sort((D,F)=>D-F);for(let D=R.length-1;D>=0;D--)y.splice(R[D],1)}}(b,h,n.json.nodes),b}function eD(n){n.heightmap=new Float32Array(4096),n.heightmap.fill(-1);const e=n.vertexArray.float32,r=n.aabb.min[0]-1,i=n.aabb.min[1]-1,u=$d/(n.aabb.max[0]-r+2),p=$d/(n.aabb.max[1]-i+2);for(let h=0;h<e.length;h+=3){const b=e[h+2],y=(e[h+0]-r)*u|0,x=(e[h+1]-i)*p|0;b>n.heightmap[x*$d+y]&&(n.heightmap[x*$d+y]=b)}}function tD(n,e){const r={};r.indexArray=new ba,r.indexArray.reserve(4*n.length),r.vertexArray=new Rd,r.vertexArray.reserve(10*n.length),r.colorArray=new ua,r.vertexArray.reserve(10*n.length);let i=0;for(const h of n){const b=Math.min(10,Math.max(4,1.3*h.height))*e,y=[-h.normal[1],h.normal[0],0],x=Math.min(.29,.1*h.width/h.depth),T=h.width-2*h.depth*e*(x+.01),P=o.v.scaleAndAdd([],h.pos,y,T/2),A=o.v.scaleAndAdd([],h.pos,y,-T/2),R=[P[0],P[1],P[2]+h.height],D=[A[0],A[1],A[2]+h.height],F=o.v.scaleAndAdd([],h.normal,y,x);o.v.scale(F,F,b);const V=o.v.scaleAndAdd([],h.normal,y,-x);o.v.scale(V,V,b),o.v.add(F,P,F),o.v.add(V,A,V),P[2]+=.1,A[2]+=.1,r.vertexArray.emplaceBack(F[0],F[1],F[2]),r.vertexArray.emplaceBack(V[0],V[1],V[2]),r.vertexArray.emplaceBack(P[0],P[1],P[2]),r.vertexArray.emplaceBack(A[0],A[1],A[2]),r.vertexArray.emplaceBack(R[0],R[1],R[2]),r.vertexArray.emplaceBack(D[0],D[1],D[2]),r.vertexArray.emplaceBack(P[0],P[1],P[2]),r.vertexArray.emplaceBack(A[0],A[1],A[2]),r.vertexArray.emplaceBack(F[0],F[1],F[2]),r.vertexArray.emplaceBack(V[0],V[1],V[2]);const Y=T/b/2;r.colorArray.emplaceBack(-Y-x,-1,Y,.8),r.colorArray.emplaceBack(Y+x,-1,Y,.8),r.colorArray.emplaceBack(-Y,0,Y,1.3),r.colorArray.emplaceBack(Y,0,Y,1.3),r.colorArray.emplaceBack(Y+x,-.8,Y,.7),r.colorArray.emplaceBack(Y+x,-.8,Y,.7),r.colorArray.emplaceBack(0,0,Y,1.3),r.colorArray.emplaceBack(0,0,Y,1.3),r.colorArray.emplaceBack(Y+x,-1.2,Y,.8),r.colorArray.emplaceBack(Y+x,-1.2,Y,.8),r.indexArray.emplaceBack(6+i,4+i,8+i),r.indexArray.emplaceBack(7+i,9+i,5+i),r.indexArray.emplaceBack(0+i,1+i,2+i),r.indexArray.emplaceBack(1+i,3+i,2+i),i+=10}const u={defined:!0,emissiveFactor:[0,0,0]},p={};return p.baseColorFactor=wa.white,u.pbrMetallicRoughness=p,r.material=u,r.aabb=new gr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),r}qt(l7,"TriangleGridIndex");const p7=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class p3{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,i]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const u=i>>4;if(u!==1)throw new Error(`Got v${u} data when expected v1.`);const p=p7[15&i];if(!p)throw new Error("Unrecognized array type.");const[h]=new Uint16Array(e,2,1),[b]=new Uint32Array(e,4,1);return new p3(b,h,p,e)}constructor(e,r=64,i=Float64Array,u){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const p=p7.indexOf(this.ArrayType),h=2*e*this.ArrayType.BYTES_PER_ELEMENT,b=e*this.IndexArrayType.BYTES_PER_ELEMENT,y=(8-b%8)%8;if(p<0)throw new Error(`Unexpected typed array class: ${i}.`);u&&u instanceof ArrayBuffer?(this.data=u,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+b+y,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+h+b+y),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+b+y,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+p]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=r,i}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return f3(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,i,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:h,nodeSize:b}=this,y=[0,p.length-1,0],x=[];for(;y.length;){const T=y.pop()||0,P=y.pop()||0,A=y.pop()||0;if(P-A<=b){for(let V=A;V<=P;V++){const Y=h[2*V],ie=h[2*V+1];Y>=e&&Y<=i&&ie>=r&&ie<=u&&x.push(p[V])}continue}const R=A+P>>1,D=h[2*R],F=h[2*R+1];D>=e&&D<=i&&F>=r&&F<=u&&x.push(p[R]),(T===0?e<=D:r<=F)&&(y.push(A),y.push(R-1),y.push(1-T)),(T===0?i>=D:u>=F)&&(y.push(R+1),y.push(P),y.push(1-T))}return x}within(e,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:p,nodeSize:h}=this,b=[0,u.length-1,0],y=[],x=i*i;for(;b.length;){const T=b.pop()||0,P=b.pop()||0,A=b.pop()||0;if(P-A<=h){for(let V=A;V<=P;V++)h7(p[2*V],p[2*V+1],e,r)<=x&&y.push(u[V]);continue}const R=A+P>>1,D=p[2*R],F=p[2*R+1];h7(D,F,e,r)<=x&&y.push(u[R]),(T===0?e-i<=D:r-i<=F)&&(b.push(A),b.push(R-1),b.push(1-T)),(T===0?e+i>=D:r+i>=F)&&(b.push(R+1),b.push(P),b.push(1-T))}return y}}function f3(n,e,r,i,u,p){if(u-i<=r)return;const h=i+u>>1;f7(n,e,h,i,u,p),f3(n,e,r,i,h-1,1-p),f3(n,e,r,h+1,u,1-p)}function f7(n,e,r,i,u,p){for(;u>i;){if(u-i>600){const x=u-i+1,T=r-i+1,P=Math.log(x),A=.5*Math.exp(2*P/3),R=.5*Math.sqrt(P*A*(x-A)/x)*(T-x/2<0?-1:1);f7(n,e,r,Math.max(i,Math.floor(r-T*A/x+R)),Math.min(u,Math.floor(r+(x-T)*A/x+R)),p)}const h=e[2*r+p];let b=i,y=u;for(hm(n,e,i,r),e[2*u+p]>h&&hm(n,e,i,u);b<y;){for(hm(n,e,b,y),b++,y--;e[2*b+p]<h;)b++;for(;e[2*y+p]>h;)y--}e[2*i+p]===h?hm(n,e,i,y):(y++,hm(n,e,y,u)),y<=r&&(i=y+1),r<=y&&(u=y-1)}}function hm(n,e,r,i){h3(n,r,i),h3(e,2*r,2*i),h3(e,2*r+1,2*i+1)}function h3(n,e,r){const i=n[e];n[e]=n[r],n[r]=i}function h7(n,e,r,i){const u=n-r,p=e-i;return u*u+p*p}o.$=45,o.A=pr,o.B=function(n){const e=o.m.identity(new Float64Array(16));o.m.multiply(e,n.pixelMatrix,n.globeMatrix);const r=[0,Eo,0],i=[0,Io,0];return o.v.transformMat4(r,r,e),o.v.transformMat4(i,i,e),[r[0]>0&&r[0]<=n.width&&r[1]>0&&r[1]<=n.height&&!p4(n,new da(n.center.lat,90)),i[0]>0&&i[0]<=n.width&&i[1]>0&&i[1]<=n.height&&!p4(n,new da(n.center.lat,-90))]},o.C=wa,o.D=cu,o.E=Lc,o.F=s4,o.G=C8,o.H=Dc,o.I=Vd,o.J=vt,o.K=function(n,e){const{scale:r}=n.tileTransform,i=r*vt/(n.tileSize*Math.pow(2,e.zoom-n.tileID.overscaledZ+n.tileID.canonical.z));return o.h.scale(new Float32Array(4),e.inverseAdjustmentMatrix,[i,i])},o.L=da,o.M=os,o.N=v1,o.O=Hr,o.P=ge,o.Q=o2,o.R=a4,o.S=function(n){const e=o2(n,!0);return o.h.invert([],[e[0],e[1],e[4],e[5]])},o.T=r4,o.U=I8,o.V=function(n){const{x:e,y:r}=n.point,{lng:i,lat:u}=n._center;return B8(e,r,n.worldSize,i,u)},o.W=Qi,o.X=Yt,o.Y=Bt,o.Z=i4,o._=function(n){const e=Math.round((n+45+360)%360/90)%4;return un[e]},o.a=zo,o.a$=Cg,o.a0=h4,o.a1=function(n,e){return kr(Fn(n,{type:"json"}),e)},o.a2=Ua,o.a3=Ke,o.a4=Gr,o.a5=Ki,o.a6=qr,o.a7=bs,o.a8=rs,o.a9=Pl,o.aA=jd,o.aB=G8,o.aC=Ji,o.aD=e7,o.aE=jt,o.aF=t7,o.aG=function(n){mr++,mr>aa&&(n.getActor().send("enforceCacheSizeLimit",bn),mr=0)},o.aH=ka,o.aI=ed,o.aJ=function(n){return n<=1?1:Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},o.aK=Y2,o.aL=function(n,e){const r=document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let i=0;i<n.length;i++){const u=document.createElement("source");_n(n[i])||(r.crossOrigin="Anonymous"),u.src=n[i],r.appendChild(u)}return{cancel:()=>{}}},o.aM=Xt,o.aN=b1,o.aO=function(n){return fetch(n).then(e=>e.arrayBuffer()).then(e=>c7(e,0,n))},o.aP=d7,o.aQ=class{constructor(n,e,r,i){this.id=n,this.position=e!=null?new da(e[0],e[1]):new da(0,0),this.orientation=r??[0,0,0],this.nodes=i,this.uploaded=!1,this.aabb=new gr([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(n,e){if(o.m.multiply(n.matrix,e,n.matrix),n.meshes)for(const r of n.meshes){const i=gr.applyTransform(r.aabb,n.matrix);this.aabb.encapsulate(i)}if(n.children)for(const r of n.children)this._applyTransformations(r,n.matrix)}computeBoundsAndApplyParent(){const n=o.m.identity([]);for(const e of this.nodes)this._applyTransformations(e,n)}_positionModelOnTerrain(n,e){const r=n.elevation;if(!r)return 0;const i=gr.projectAabbCorners(this.aabb,this.matrix),u=js(1,this.position.lat)*n.worldSize,p=function(V,Y){const ie=[0,0,1],oe=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const le of oe){const he=V[le.corners[0]],_e=V[le.corners[1]],ze=V[le.corners[2]],De=[_e[0]-he[0],_e[1]-he[1],Y*(_e[2]-he[2])],Ne=o.v.cross(De,De,[ze[0]-he[0],ze[1]-he[1],Y*(ze[2]-he[2])]);o.v.normalize(Ne,Ne),le.dotProductWithUp=o.v.dot(Ne,ie)}return oe.sort((le,he)=>le.dotProductWithUp-he.dotProductWithUp),oe[0].corners}(i,u),h=i[p[0]],b=i[p[1]],y=i[p[2]],x=i[p[3]],T=r.getAtPointOrZero(new os(h[0]/n.worldSize,h[1]/n.worldSize),0),P=r.getAtPointOrZero(new os(b[0]/n.worldSize,b[1]/n.worldSize),0),A=r.getAtPointOrZero(new os(y[0]/n.worldSize,y[1]/n.worldSize),0),R=r.getAtPointOrZero(new os(x[0]/n.worldSize,x[1]/n.worldSize),0),D=(T+R)/2,F=(P+A)/2;return D>F?P<A?x1(e,b,x,h,P,R,T,u):x1(e,y,h,x,A,T,R,u):T<R?x1(e,h,b,y,T,P,A,u):x1(e,x,y,b,R,A,P,u),Math.max(D,F)}computeModelMatrix(n,e,r,i,u,p,h=!1){const b=n.transform,y=b.zoom,x=b.project(this.position),T=Fd(this.position.lat,y),P=1/T;o.m.identity(this.matrix),o.m.translate(this.matrix,this.matrix,[x.x+i[0]*P,x.y+i[1]*P,i[2]]);let A=1,R=1;const D=b.worldSize;if(h){if(b.projection.name==="mercator"){let ie=0;b.elevation&&(ie=b.elevation.getAtPointOrZero(new os(x.x/D,x.y/D),0));const oe=o.e.transformMat4([],[x.x,x.y,ie,1],b.projMatrix)[3]/b.cameraToCenterDistance;A=oe,R=oe*Fd(b.center.lat,y)}else if(b.projection.name==="globe"){const ie=f2(this.matrix,b),oe=o.m.multiply([],b.projMatrix,ie),le=[0,0,0,1];o.e.transformMat4(le,le,oe);const he=le[3]/b.cameraToCenterDistance,_e=Sl(y),ze=b.projection.pixelsPerMeter(this.position.lat,D)*Fd(this.position.lat,y),De=b.projection.pixelsPerMeter(b.center.lat,D)*Fd(b.center.lat,y);A=he/On(ze,U8(b.center.lat),_e),R=he*T/ze,A*=De,R*=De}}else A=P;o.m.scale(this.matrix,this.matrix,[A,A,R]);const F=[...this.matrix],V=this.orientation,Y=[];if(p2(Y,[V[0]+e[0],V[1]+e[1],V[2]+e[2]],r),o.m.multiply(this.matrix,F,Y),u&&b.elevation){let ie=0;const oe=[];if(p&&b.elevation){ie=this._positionModelOnTerrain(b,oe);const le=o.m.fromQuat([],oe),he=o.m.multiply([],le,Y);o.m.multiply(this.matrix,F,he)}else ie=b.elevation.getAtPointOrZero(new os(x.x/D,x.y/D),0);ie!==0&&(this.matrix[14]+=ie)}}upload(n){if(!this.uploaded){for(const e of this.nodes)K4(e,n);for(const e of this.nodes)S1(e);this.uploaded=!0}}destroy(){for(const n of this.nodes)T1(n)}},o.aR=jn,o.aS=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.aT=U9,o.aU=q8,o.aV=es,o.aW=H9,o.aX=U4,o.aY=O4,o.aZ=p3,o.a_=Bh,o.aa=B4,o.ab=N4,o.ac=ct,o.ad=be,o.ae=Ve,o.af=class{constructor(n){this.specification=n}possiblyEvaluate(n,e){return ve(n.expression.evaluate(e))}interpolate(n,e,r){return{x:On(n.x,e.x,r),y:On(n.y,e.y,r),z:On(n.z,e.z,r),azimuthal:On(n.azimuthal,e.azimuthal,r),polar:On(n.polar,e.polar,r)}}},o.ag=$e,o.ah=n=>Wi(Ah(n)),o.ai=Ig,o.aj=kh,o.ak=Fn,o.al=Ee,o.am=Pd,o.an=Ct,o.ao=Sl,o.ap=n=>Wi(Rh(n)),o.aq=$i,o.ar=st,o.as=class{constructor(n){this.specification=n}possiblyEvaluate(n,e){return function([r,i]){const u=ve([1,r,i]);return{x:u.x,y:u.y,z:u.z}}(n.expression.evaluate(e))}interpolate(n,e,r){return{x:On(n.x,e.x,r),y:On(n.y,e.y,r),z:On(n.z,e.z,r)}}},o.at=function(n,e,r=0,i=!0){const u=new ge(r,r),p=n.sub(u),h=e.add(u),b=[p,new ge(h.x,p.y),h,new ge(p.x,h.y)];return i&&b.push(p.clone()),b},o.au=function(n,e){const r=[];for(let i=0;i<n.length;i++){const u=Et(i-1,-1,n.length-1),p=Et(i+1,-1,n.length-1),h=n[i],b=n[p],y=n[u].sub(h).unit(),x=b.sub(h).unit(),T=x.angleWithSep(y.x,y.y),P=y.add(x).unit().mult(-1*e/Math.sin(T/2));r.push(h.add(P))}return r},o.av=J9,o.aw=Y8,o.ax=function(n,e,r=0){return o.v.fromValues(((e.x-r)*n.scale-n.x)*vt,(e.y*n.scale-n.y)*vt,j8(e.z,e.y))},o.ay=d2,o.az=function(n){let e=1/0,r=1/0,i=-1/0,u=-1/0;for(const p of n)e=Math.min(e,p.x),r=Math.min(r,p.y),i=Math.max(i,p.x),u=Math.max(u,p.y);return{min:new ge(e,r),max:new ge(i,u)}},o.b=js,o.b$=0,o.b0=kd,o.b1=lw,o.b2=Fs,o.b3=function(n,e,r){const i=Math.sqrt(n*n+e*e+r*r),u=i>0?Math.acos(r/i)*rt:0;let p=n!==0||e!==0?Math.atan2(-e,-n)*rt+90:0;return p<0&&(p+=360),[i,p,u]},o.b4=of,o.b5=sc,o.b6=Z4,o.b7=Fy,o.b8=class extends gl{constructor(n){super(n),this.current=CM}set(n,e,r){if(this.fetchUniformLocation(n,e)){for(let i=0;i<9;i++)if(r[i]!==this.current[i]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}}},o.b9=cw,o.bA=function(n,e){const r=[0,0,0],i=Gh(kc(e.canonical));return o.v.transformMat4(r,r,i),o.v.transformMat4(r,r,n),r},o.bB=n=>({u_camera_to_center_distance:new Fs(n),u_extrude_scale:new jy(n),u_device_pixel_ratio:new Fs(n),u_matrix:new Bh(n),u_inv_rot_matrix:new Bh(n),u_merc_center:new kd(n),u_tile_id:new Fy(n),u_zoom_transition:new Fs(n),u_up_dir:new Fy(n),u_emissive_strength:new Fs(n)}),o.bC=n=>({u_matrix:new Bh(n),u_pixels_to_tile_units:new jy(n),u_device_pixel_ratio:new Fs(n),u_units_to_pixels:new kd(n),u_dash_image:new Cg(n),u_gradient_image:new Cg(n),u_image_height:new Fs(n),u_texsize:new kd(n),u_tile_units_to_pixels:new Fs(n),u_alpha_discard_threshold:new Fs(n),u_trim_offset:new kd(n),u_emissive_strength:new Fs(n)}),o.bD=n=>({u_matrix:new Bh(n),u_texsize:new kd(n),u_pixels_to_tile_units:new jy(n),u_device_pixel_ratio:new Fs(n),u_image:new Cg(n),u_units_to_pixels:new kd(n),u_tile_units_to_pixels:new Fs(n),u_alpha_discard_threshold:new Fs(n)}),o.bE=Ko,o.bF=Sk,o.bG=Tk,o.bH=K8,o.bI=(n,e,r,i,u,p)=>{const h=n.transform,b=h.projection.name==="globe";let y;if(p.paint.get("circle-pitch-alignment")==="map")if(b){const T=O8(h.zoom,e.canonical)*h._pixelsPerMercatorPixel;y=Float32Array.from([T,0,0,T])}else y=h.calculatePixelsToTileUnitsMatrix(r);else y=new Float32Array([h.pixelsToGLUnits[0],0,0,h.pixelsToGLUnits[1]]);const x={u_camera_to_center_distance:n.transform.getCameraToCenterDistance(h.projection),u_matrix:n.translatePosMatrix(e.projMatrix,r,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Gr.devicePixelRatio,u_extrude_scale:y,u_inv_rot_matrix:yR,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:p.paint.get("circle-emissive-strength")};if(b){x.u_inv_rot_matrix=i,x.u_merc_center=u,x.u_tile_id=[e.canonical.x,e.canonical.y,1<<e.canonical.z],x.u_zoom_transition=Sl(h.zoom);const T=u[0]*vt,P=u[1]*vt;x.u_up_dir=h.projection.upVector(new Bd(0,0,0),T,P)}return x},o.bJ=$2,o.bK=(n,e,r,i,u)=>{const p=n.transform;return{u_matrix:G2(n,e,r,i),u_texsize:e.imageAtlasTexture?e.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:p.calculatePixelsToTileUnitsMatrix(e),u_device_pixel_ratio:u,u_image:0,u_tile_units_to_pixels:V2(e,p),u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}},o.bL=(n,e,r,i,u,p,h)=>{const b=n.transform,y=b.calculatePixelsToTileUnitsMatrix(e);return{u_matrix:G2(n,e,r,i),u_pixels_to_tile_units:y,u_device_pixel_ratio:p,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:u,u_texsize:q2(r)&&e.lineAtlasTexture?e.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:V2(e,n.transform),u_alpha_discard_threshold:0,u_trim_offset:h,u_emissive_strength:r.paint.get("line-emissive-strength")}},o.bM=Vr,o.bN=Vg,o.bO=B2,o.bP=aR,o.bQ=cm,o.bR=vu,o.bS=450,o.bT=7,o.bU=R8,o.bV=u4,o.bW=en,o.bX=Rd,o.bY=Md,o.bZ=1,o.b_=771,o.ba=Tn,o.bb=function(n,e,r){const i=Sl(r.zoom),u=n.style.map._antialias,p=e.options.extStandardDerivativesForceOff||n.terrain&&n.terrain.exaggeration()>0;return i===0&&!u&&!p},o.bc=function(n){const e=n.pixelsPerMeter,r=e/js(1,n.center.lat),i=o.m.identity(new Float64Array(16));return o.m.translate(i,i,[n.point.x,n.point.y,0]),o.m.scale(i,i,[r,r,e]),Float32Array.from(i)},o.bd=Ys,o.be=Og,o.bf=function(n){const e=pr-5;n=ke(n,-e,e)/e*90;const r=Math.pow(Math.abs(Math.sin(Ue(n))),3);return Math.round(r*(o4.length-1))},o.bg=function(n,e,r,i){const u=e.getNorth(),p=e.getSouth(),h=e.getWest(),b=e.getEast(),y=1<<n.z,x=b-h,T=u-p,P=x/qp,A=-T/o4[r],R=[0,P,0,A,0,0,u,h,0];if(n.z>0){const D=180/i;o.bx.multiply(R,R,[D/x+1,0,0,0,D/T+1,0,-.5*D/P,.5*D/A,1])}return R[2]=y,R[5]=n.x,R[8]=n.y,R},o.bh=Gh,o.bi=kc,o.bj=function(n,e,r){const i=o.m.identity(new Float64Array(16)),u=(e/(1<<n)-.5)*Math.PI*2;return o.m.rotateY(i,r.globeMatrix,u),Float32Array.from(i)},o.bk=class{isDataAvailableAtPoint(n){const e=this._source();if(this.isUsingMockSource()||!e||n.y<0||n.y>1)return!1;const r=e.getSource().maxzoom,i=1<<r,u=Math.floor(n.x),p=Math.floor((n.x-u)*i),h=Math.floor(n.y*i),b=this.findDEMTileFor(new Hr(r,u,r,p,h));return!(!b||!b.dem)}getAtPointOrZero(n,e=0){return this.getAtPoint(n,e)||0}getAtPoint(n,e,r=!0){if(this.isUsingMockSource())return null;e==null&&(e=null);const i=this._source();if(!i||n.y<0||n.y>1)return e;const u=i.getSource().maxzoom,p=1<<u,h=Math.floor(n.x),b=n.x-h,y=new Hr(u,h,u,Math.floor(b*p),Math.floor(n.y*p)),x=this.findDEMTileFor(y);if(!x||!x.dem)return e;const T=x.dem,P=1<<x.tileID.canonical.z,A=(b*P-x.tileID.canonical.x)*T.dim,R=(n.y*P-x.tileID.canonical.y)*T.dim,D=Math.floor(A),F=Math.floor(R);return(r?this.exaggeration():1)*On(On(T.get(D,F),T.get(D,F+1),R-F),On(T.get(D+1,F),T.get(D+1,F+1),R-F),A-D)}getAtTileOffset(n,e,r){const i=1<<n.canonical.z;return this.getAtPointOrZero(new os(n.wrap+(n.canonical.x+e/vt)/i,(n.canonical.y+r/vt)/i))}getAtTileOffsetFunc(n,e,r,i){return u=>{const p=this.getAtTileOffset(n,u.x,u.y),h=i.upVector(n.canonical,u.x,u.y),b=i.upVectorScale(n.canonical,e,r).metersToTile;return o.v.scale(h,h,p*b),h}}getForTilePoints(n,e,r,i){if(this.isUsingMockSource())return!1;const u=Qp.create(this,n,i);return!!u&&(e.forEach(p=>{p[2]=this.exaggeration()*u.getElevationAt(p[0],p[1],r)}),!0)}getMinMaxForTile(n){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(n);if(!e||!e.dem)return null;const r=e.dem.tree,i=e.tileID,u=1<<n.canonical.z-i.canonical.z;let p=n.canonical.x/u-i.canonical.x,h=n.canonical.y/u-i.canonical.y,b=0;for(let y=0;y<n.canonical.z-i.canonical.z&&!r.leaves[b];y++){p*=2,h*=2;const x=2*Math.floor(h)+Math.floor(p);b=r.childOffsets[b]+x,p%=1,h%=1}return{min:this.exaggeration()*r.minimums[b],max:this.exaggeration()*r.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(n,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(n){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(n){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const n=this.visibleDemTiles;if(n.length===0)return null;let e=!1,r=Number.MAX_VALUE,i=Number.MIN_VALUE;for(const u of n){const p=this.getMinMaxForTile(u.tileID);p&&(r=Math.min(r,p.min),i=Math.max(i,p.max),e=!0)}return e?{min:r,max:i}:null}},o.bl=Fh,o.bm=Wa,o.bn=Dg,o.bo=An,o.bp=ba,o.bq=Gd,o.br=um,o.bs=r3,o.bt=W4,o.bu=r9,o.bv=function(n,e){return[Math.pow(n[0],2.2)*e,Math.pow(n[1],2.2)*e,Math.pow(n[2],2.2)*e]},o.bw=function(n){return[Math.pow(n[0],1/2.2),Math.pow(n[1],1/2.2),Math.pow(n[2],1/2.2)]},o.by=O8,o.bz=256,o.c=ke,o.c$=M,o.c0=Ry,o.c1=function(n,e,r,i,u){return ke((n-e)/(r-e)*(u-i)+i,i,u)},o.c2=xd,o.c3=gr,o.c4=Fd,o.c5=f2,o.c6=[1,1,1],o.c7=Qp,o.c8=w1,o.c9=vs,o.cA=sn,o.cB=n=>Wi(Mh(n)),o.cC=ce,o.cD=kr,o.cE=ea,o.cF=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},o.cG=St,o.cH=V8,o.cI=Nd,o.cJ=function([n,e,r]){const i=Math.hypot(n,e,r),u=Math.atan2(n,r),p=.5*Math.PI-Math.acos(-e/i);return new da(Bt(u),Bt(p))},o.cK=Ei,o.cL=$h,o.cM=L,o.cN=p4,o.cO=N8,o.cP=function(n){const e=[0,0,0],r=o.m.identity(new Float64Array(16));return o.m.multiply(r,n.pixelMatrix,n.globeMatrix),o.v.transformMat4(e,e,r),new ge(e[0],e[1])},o.cQ=function(n){const e=n.navigator?n.navigator.userAgent:null;return!!function(r){if(ut==null){const i=r.navigator?r.navigator.userAgent:null;ut=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return ut}(n)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.cR=Zn,o.cS=class{constructor(n,e,r){this._transformRequestFn=n,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const n=function(){let e="";for(let r=0;r<10;r++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",W,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,e){return this._transformRequestFn&&this._transformRequestFn(n,e)||{url:n}}normalizeStyleURL(n,e){if(!yt(n))return n;const r=gt(n);return r.params.push(`sdk=js-${M}`),r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(n,e){if(!yt(n))return n;const r=gt(n);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeModelURL(n,e){if(!yt(n))return n;const r=gt(n);return r.path=`/models/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(n,e,r,i){if(!yt(n))return n;const u=gt(n);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),r&&u.params.push(`language=${r}`),i&&u.params.push(`worldview=${i}`),this._makeAPIURL(u,this._customAccessToken||e)}normalizeSpriteURL(n,e,r,i){const u=gt(n);return yt(n)?(u.path=`/styles/v1${u.path}/sprite${e}${r}`,this._makeAPIURL(u,this._customAccessToken||i)):(u.path+=`${e}${r}`,In(u))}normalizeTileURL(n,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!yt(n))return n;const i=gt(n);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&i.authority!=="raster"&&r===512?"@2x":""}${O.supported?".webp":"$1"}`),i.authority==="raster"?i.path=`/${L.RASTER_URL_PREFIX}${i.path}`:(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path=`/${L.TILE_URL_VERSION}${i.path}`);const u=this._customAccessToken||function(p){for(const h of p){const b=h.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(i.params)||L.ACCESS_TOKEN;return L.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&i.params.push(`sku=${this._skuToken}`),this._makeAPIURL(i,u)}canonicalizeTileURL(n,e){const r=gt(n);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return n;let i="mapbox://";r.path.match(/^\/raster\/v1\//)?i+=`raster/${r.path.replace(`/${L.RASTER_URL_PREFIX}/`,"")}`:i+=`tiles/${r.path.replace(`/${L.TILE_URL_VERSION}/`,"")}`;let u=r.params;return e&&(u=u.filter(p=>!p.match(/^access_token=/))),u.length&&(i+=`?${u.join("&")}`),i}canonicalizeTileset(n,e){const r=!!e&&yt(e),i=[];for(const u of n.tiles||[])Tt(u)?i.push(this.canonicalizeTileURL(u,r)):i.push(u);return i}_makeAPIURL(n,e){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",i=gt(L.API_URL);if(n.protocol=i.protocol,n.authority=i.authority,n.protocol==="http"){const u=n.params.indexOf("secure");u>=0&&n.params.splice(u,1)}if(i.path!=="/"&&(n.path=`${i.path}${n.path}`),!L.REQUIRE_ACCESS_TOKEN)return In(n);if(e=e||L.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return n.params=n.params.filter(u=>u.indexOf("access_token")===-1),n.params.push(`access_token=${e||""}`),In(n)}},o.cT=function(n,e){e?as.add(n):as.delete(n)},o.cU=O,o.cV=Ga,o.cW=Dr,o.cX=ft,o.cY=Lr,o.cZ=function(n){as.delete(n)},o.c_=Nt,o.ca=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[]}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(n){const e=S2(new ge(0,0),new ge(vt,vt),n),r=[];for(const i of this._activeRegions){if(i.hiddenByOverlap||!w2(e,i))continue;const u=vL(i.min,i.max,n);r.push({min:u.min,max:u.max,sourceId:this._sourceIds[i.priority],footprint:i.footprint,footprintTileId:i.tileId})}return r}setSources(n){this._setSources(n.map(e=>({getSourceId:()=>e.cache.id,getFootprints:()=>{const r=[];for(const i of e.cache.getVisibleCoordinates()){const u=e.cache.getTile(i).buckets[e.layer];if(u)for(const p of u.getNodesInfo()){const h=p.node;h.footprint&&r.push({footprint:h.footprint,id:i.toUnwrapped()})}}return r}})))}_addSource(n){const e=n.getFootprints();if(e.length!==0){for(const r of e){if(!r.footprint)continue;const i=S2(r.footprint.min,r.footprint.max,r.id);this._activeRegions.push({min:i.min,max:i.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:r.id,footprint:r.footprint})}this._sourceIds.push(n.getSourceId())}}_computeReplacement(){this._activeRegions.sort((e,r)=>e.priority-r.priority||E1(e.min,r.min)||E1(e.max,r.max));let n=this._activeRegions.length!==this._prevRegions.length;if(!n){let e=0,r=0;for(;!n&&e!==this._activeRegions.length;){const i=this._activeRegions[e],u=this._prevRegions[r];n=i.priority!==u.priority||!x2(i,u),++e,++r}}if(n){++this._updateTime;const e=r=>{const i=this._activeRegions;if(r>=i.length)return r;const u=i[r].priority;for(;r<i.length&&i[r].priority===u;)++r;return r};if(this._sourceIds.length>1){let r=0,i=e(r);for(;r!==i;){let u=r;const p=r;for(;u!==i;){const h=this._activeRegions[u];h.hiddenByOverlap=!1;for(let b=0;b<p;b++){const y=this._activeRegions[b];if(!y.hiddenByOverlap&&w2(h,y)&&(h.hiddenByOverlap=E2(h.footprint,h.tileId,y.footprint,y.tileId),h.hiddenByOverlap))break}++u}r=i,i=e(r)}}}}_setSources(n){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let e=n.length-1;e>=0;e--)this._addSource(n[e]);this._computeReplacement()}},o.cb=ma,o.cc=y1,o.cd=Lh,o.ce=class{constructor(n){this._createGrid(n),this._createPoles(n)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const n of this._poleSegments)n.destroy();for(const n of this._gridSegments)n.withSkirts.destroy(),n.withoutSkirts.destroy()}_fillGridMeshWithLods(n,e){const r=new An,i=new ba,u=[],p=n+1+2,h=e[0]+1,b=e[0]+1+(1+e.length),y=(x,T,P)=>{let A=x===p-1?x-2:x===0?x:x-1;return A+=P?24575:0,[A,T]};for(let x=0;x<p;++x)r.emplaceBack(...y(x,0,!0));for(let x=0;x<h;++x)for(let T=0;T<p;++T)r.emplaceBack(...y(T,x,(T===0||T===p-1)&&!0));for(let x=0;x<e.length;++x){const T=e[x];for(let P=0;P<p;++P)r.emplaceBack(...y(P,T,!0))}for(let x=0;x<e.length;++x){const T=i.length,P=e[x]+1+2,A=new ba;for(let F=0;F<P-1;F++){const V=F===P-2,Y=V?p*(b-e.length+x-F):p;for(let ie=0;ie<p-1;ie++){const oe=F*p+ie;F===0||V||ie===0||ie===p-2?(A.emplaceBack(oe+1,oe,oe+Y),A.emplaceBack(oe+Y,oe+Y+1,oe+1)):(i.emplaceBack(oe+1,oe,oe+Y),i.emplaceBack(oe+Y,oe+Y+1,oe+1))}}const R=Wa.simpleSegment(0,T,r.length,i.length-T);for(let F=0;F<A.uint16.length;F+=3)i.emplaceBack(A.uint16[F],A.uint16[F+1],A.uint16[F+2]);const D=Wa.simpleSegment(0,T,r.length,i.length-T);u.push({withoutSkirts:R,withSkirts:D})}return{vertices:r,indices:i,segments:u}}_createGrid(n){const e=this._fillGridMeshWithLods(qp,o4);this._gridSegments=e.segments,this._gridBuffer=n.createVertexBuffer(e.vertices,Fh.members),this._gridIndexBuffer=n.createIndexBuffer(e.indices,!0)}_createPoles(n){const e=new ba;for(let h=0;h<=qp;h++)e.emplaceBack(0,h+1,h+2);this._poleIndexBuffer=n.createIndexBuffer(e,!0);const r=new Md,i=new Md,u=new Md,p=new Md;this._poleSegments=[];for(let h=0,b=0;h<i4;h++){const y=360/(1<<h);r.emplaceBack(0,-Ji,0,.5,0),i.emplaceBack(0,-Ji,0,.5,1),u.emplaceBack(0,-Ji,0,.5,.5),p.emplaceBack(0,-Ji,0,.5,.5);for(let x=0;x<=qp;x++){let T=x/qp,P=0;const A=On(0,y,T),[R,D,F]=Wp(oR,cR,A,Ji);r.emplaceBack(R,D,F,T,P),i.emplaceBack(R,D,F,T,1-P);const V=Ue(A);T=.5+.5*Math.sin(V),P=.5+.5*Math.cos(V),u.emplaceBack(R,D,F,T,P),p.emplaceBack(R,D,F,T,1-P)}this._poleSegments.push(Wa.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=n.createVertexBuffer(r,Lg,!1),this._poleSouthVertexBuffer=n.createVertexBuffer(i,Lg,!1),this._texturedPoleNorthVertexBuffer=n.createVertexBuffer(u,Lg,!1),this._texturedPoleSouthVertexBuffer=n.createVertexBuffer(p,Lg,!1)}getGridBuffers(n,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[n].withSkirts:this._gridSegments[n].withoutSkirts]}getPoleBuffers(n,e){return[e?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,e?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[n]]}},o.cf=function(n){return as.has(n)},o.cg=Ng,o.ch=ve,o.ci=function(n){return n({pluginStatus:ne,pluginURL:de}),ce.on("pluginStateChange",n),n},o.cj=nf,o.ck=F4,o.cl=xr,o.cm=ye,o.cn=yt,o.co=kn,o.cp=function(n,e,r){return n.type==="custom"?new BL(n,e):new UL[n.type](n,e,r)},o.cq=function(n){const e=n.indexOf(Wt);return e>=0?n.slice(0,e):n},o.cr=n=>Wi(Tg(n)),o.cs=n=>Wi(wg(n)),o.ct=n=>Wi(Ch(n)),o.cu=function(n){return n.indexOf(Wt)>=0},o.cv=function(n){const e=n.indexOf(Wt);return e>=0?n.slice(e+1):""},o.cw=Ed,o.cx=function(n){const e=[],r=n.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),n.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},o.cy=n=>Wi(xg(n)),o.cz=n=>Wi(zh(n)),o.d=Ue,o.d0=function(n,e){bn=n,aa=e},o.d1=function(n,e,r=!1){if(ne===Q||ne===ae||ne===se)throw new Error("setRTLTextPlugin cannot be called multiple times.");de=Gr.resolveURL(n),ne=Q,re=e,xe(),r||we()},o.d2=pe,o.d3=function(){r3().acquire(a3)},o.d4=function(){const n=fm;n&&(n.isPreloaded()&&n.numActive()===1?(n.release(a3),fm=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.d5=pm,o.d6=function(n){const e=ra();if(!e)return;const r=e.delete(gn);n&&r.catch(n).then(()=>n())},o.d7=dm,o.d8=n7,o.d9=function(n){s3=Gr.resolveURL(n),i3||(i3=new um(r3(),new qr)),i3.broadcast("setDracoUrl",s3)},o.da=Sn,o.db=t1,o.dc=ee,o.dd=Xg,o.de=Yg,o.df=Ie,o.dg=f9,o.dh=class extends qr{constructor(n,e,r,i,u,p){super(),this.actor=n,this.layerIndex=e,this.availableImages=r,this.loadVectorData=u||t7,this.loading={},this.loaded={},this.deduped=new e7(n.scheduler),this.isSpriteLoaded=i,this.scheduler=n.scheduler,this.brightness=p}loadTile(n,e){const r=n.uid,i=n&&n.request,u=i&&i.collectResourceTiming,p=this.loading[r]=new $L(n);p.abort=this.loadVectorData(n,(h,b)=>{const y=!this.loading[r];if(delete this.loading[r],y||h||!b)return p.status="done",y||(this.loaded[r]=p),e(h);const x=b.rawData,T={};b.expires&&(T.expires=b.expires),b.cacheControl&&(T.cacheControl=b.cacheControl),p.vectorTile=b.vectorTile||new C4(new e1(x));const P=()=>{p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,(A,R)=>{if(A||!R)return e(A);const D={};if(u){const F=Xc(i);F.length>0&&(D.resourceTiming=JSON.parse(JSON.stringify(F)))}e(null,Fn({rawTileData:x.slice(0)},R,T,D))})};this.isSpriteLoaded?P():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(P,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom}):P()}),this.loaded=this.loaded||{},this.loaded[r]=p})}reloadTile(n,e){const r=this.loaded,i=n.uid,u=this;if(r&&r[i]){const p=r[i];p.showCollisionBoxes=n.showCollisionBoxes,p.projection=n.projection,p.brightness=n.brightness,p.tileTransform=mu(n.tileID.canonical,n.projection),p.extraShadowCaster=n.extraShadowCaster;const h=(b,y)=>{const x=p.reloadCallback;x&&(delete p.reloadCallback,p.parse(p.vectorTile,u.layerIndex,this.availableImages,u.actor,x)),e(b,y)};p.status==="parsing"?p.reloadCallback=h:p.status==="done"&&(p.vectorTile?p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,h):h())}else e(null,void 0)}abortTile(n,e){const r=n.uid,i=this.loading[r];i&&(i.abort&&i.abort(),delete this.loading[r]),e()}removeTile(n,e){const r=this.loaded,i=n.uid;r&&r[i]&&delete r[i],e()}},o.di=Xc,o.dj=It,o.dk=R4,o.dl=function(n){let e=0;if(new Uint32Array(n,0,1)[0]!==r7){const r=new Uint32Array(n,0,7),[,,i,u,p,h]=r;e=r.byteLength+u+p+h+p,(i!==n.byteLength||e>=n.byteLength)&&Yt("Invalid b3dm header information.")}return c7(n,e)},o.dm=function(n,e){const r=d7(n);for(const i of r){for(const u of i.meshes)eD(u);i.lights&&(i.lightMeshIndex=i.meshes.length,i.meshes.push(tD(i.lights,e)))}return r},o.dn=v2,o.dp=X2,o.dq=Ce,o.dr=function(n){fa(),la&&la.then(e=>{e.keys().then(r=>{for(let i=0;i<r.length-n;i++)e.delete(r[i])})})},o.f=function(n,e){const{x:r,y:i}=n.point,u=B8(r,i,n.worldSize/n._pixelsPerMercatorPixel,0,0);return o.m.multiply(u,u,u4(kc(e)))},o.g=Ut,o.i=ef,o.j=n1,o.k=h1,o.l=Qr,o.n=On,o.o=n2,o.p=function(n,e){const r={};for(let i=0;i<e.length;i++){const u=e[i];u in n&&(r[u]=n[u])}return r},o.r=c2,o.s=function(n,e,r){n[4*e+0]=r[0],n[4*e+1]=r[1],n[4*e+2]=r[2],n[4*e+3]=r[3]},o.t=Bd,o.u=function(n,e,r,i,u){const p=5*e+2;n.float32[p+0]=r,n.float32[p+1]=i,n.float32[p+2]=u},o.w=Et,o.x=L8,o.y=function(n,e,r,i,u,p,h,b,y){if(y.name==="globe")return L8(n,e,new Bd(r,i,u),!1);const x=mu({z:r,x:i,y:u},y);return new gr([(p+x.x/x.scale)*e,e*(x.y/x.scale),h],[(p+x.x2/x.scale)*e,e*(x.y2/x.scale),b])},o.z=function(n,e,r){let i=0;for(let u=0;u<2;++u){const p=r?r[u]:0;n[u]>p&&(i+=(n[u]-p)*(n[u]-p)),e[u]<p&&(i+=(p-e[u])*(p-e[u]))}return i}}),w(["./shared"],function(o){function M(it){if(typeof it=="number"||typeof it=="boolean"||typeof it=="string"||it==null)return JSON.stringify(it);if(Array.isArray(it)){let ve="[";for(const Re of it)ve+=`${M(Re)},`;return`${ve}]`}let fe="{";for(const ve of Object.keys(it).sort())fe+=`${ve}:${M(it[ve])},`;return`${fe}}`}function B(it){let fe="";for(const ve of o.aS)fe+=`/${M(it[ve])}`;return fe}class L{constructor(fe){this.keyCache={},this._layers={},this._layerConfigs={},fe&&this.replace(fe)}replace(fe,ve){this._layerConfigs={},this._layers={},this.update(fe,[],ve)}update(fe,ve,Re){this._options=Re;for(const ut of fe)this._layerConfigs[ut.id]=ut,(this._layers[ut.id]=o.cp(ut,this.scope,this._options)).compileFilter(),this.keyCache[ut.id]&&delete this.keyCache[ut.id];for(const ut of ve)delete this.keyCache[ut],delete this._layerConfigs[ut],delete this._layers[ut];this.familiesBySource={};const dt=function(ut,Ft){const Ut={};for(let nn=0;nn<ut.length;nn++){const gn=Ft&&Ft[ut[nn].id]||B(ut[nn]);Ft&&(Ft[ut[nn].id]=gn);let bn=Ut[gn];bn||(bn=Ut[gn]=[]),bn.push(ut[nn])}const pt=[];for(const nn in Ut)pt.push(Ut[nn]);return pt}(o.da(this._layerConfigs),this.keyCache);for(const ut of dt){const Ft=ut.map(aa=>this._layers[aa.id]),Ut=Ft[0];if(Ut.visibility==="none")continue;const pt=Ut.source||"";let nn=this.familiesBySource[pt];nn||(nn=this.familiesBySource[pt]={});const gn=Ut.sourceLayer||"_geojsonTileLayer";let bn=nn[gn];bn||(bn=nn[gn]=[]),bn.push(Ft)}}}class O{loadTile(fe,ve){const{uid:Re,encoding:dt,rawImageData:ut,padding:Ft}=fe,Ut=ImageBitmap&&ut instanceof ImageBitmap?this.getImageData(ut,Ft):ut;ve(null,new o.db(Re,Ut,dt,Ft<1))}getImageData(fe,ve){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(fe.width,fe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=fe.width,this.offscreenCanvas.height=fe.height,this.offscreenCanvasContext.drawImage(fe,0,0,fe.width,fe.height);const Re=this.offscreenCanvasContext.getImageData(-ve,-ve,fe.width+2*ve,fe.height+2*ve);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Re}}function j(it,fe){if(it.length!==0){Z(it[0],fe);for(var ve=1;ve<it.length;ve++)Z(it[ve],!fe)}}function Z(it,fe){for(var ve=0,Re=0,dt=0,ut=it.length,Ft=ut-1;dt<ut;Ft=dt++){var Ut=(it[dt][0]-it[Ft][0])*(it[Ft][1]+it[dt][1]),pt=ve+Ut;Re+=Math.abs(ve)>=Math.abs(Ut)?ve-pt+Ut:Ut-pt+ve,ve=pt}ve+Re>=0!=!!fe&&it.reverse()}var H=o.dc(function it(fe,ve){var Re,dt=fe&&fe.type;if(dt==="FeatureCollection")for(Re=0;Re<fe.features.length;Re++)it(fe.features[Re],ve);else if(dt==="GeometryCollection")for(Re=0;Re<fe.geometries.length;Re++)it(fe.geometries[Re],ve);else if(dt==="Feature")it(fe.geometry,ve);else if(dt==="Polygon")j(fe.coordinates,ve);else if(dt==="MultiPolygon")for(Re=0;Re<fe.coordinates.length;Re++)j(fe.coordinates[Re],ve);return fe});const te=o.dd.prototype.toGeoJSON;var J={exports:{}},K=o.df,W=o.de.VectorTileFeature,ee=me;function me(it,fe){this.options=fe||{},this.features=it,this.length=it.length}function Se(it,fe){this.id=typeof it.id=="number"?it.id:void 0,this.type=it.type,this.rawGeometry=it.type===1?[it.geometry]:it.geometry,this.properties=it.tags,this.extent=fe||4096}me.prototype.feature=function(it){return new Se(this.features[it],this.options.extent)},Se.prototype.loadGeometry=function(){var it=this.rawGeometry;this.geometry=[];for(var fe=0;fe<it.length;fe++){for(var ve=it[fe],Re=[],dt=0;dt<ve.length;dt++)Re.push(new K(ve[dt][0],ve[dt][1]));this.geometry.push(Re)}return this.geometry},Se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var it=this.geometry,fe=1/0,ve=-1/0,Re=1/0,dt=-1/0,ut=0;ut<it.length;ut++)for(var Ft=it[ut],Ut=0;Ut<Ft.length;Ut++){var pt=Ft[Ut];fe=Math.min(fe,pt.x),ve=Math.max(ve,pt.x),Re=Math.min(Re,pt.y),dt=Math.max(dt,pt.y)}return[fe,Re,ve,dt]},Se.prototype.toGeoJSON=W.prototype.toGeoJSON;var Me=o.dg,Ie=ee;function Ge(it){var fe=new Me;return function(ve,Re){for(var dt in ve.layers)Re.writeMessage(3,ge,ve.layers[dt])}(it,fe),fe.finish()}function ge(it,fe){var ve;fe.writeVarintField(15,it.version||1),fe.writeStringField(1,it.name||""),fe.writeVarintField(5,it.extent||4096);var Re={keys:[],values:[],keycache:{},valuecache:{}};for(ve=0;ve<it.length;ve++)Re.feature=it.feature(ve),fe.writeMessage(2,Xe,Re);var dt=Re.keys;for(ve=0;ve<dt.length;ve++)fe.writeStringField(3,dt[ve]);var ut=Re.values;for(ve=0;ve<ut.length;ve++)fe.writeMessage(4,Tn,ut[ve])}function Xe(it,fe){var ve=it.feature;ve.id!==void 0&&fe.writeVarintField(1,ve.id),fe.writeMessage(2,rt,it),fe.writeVarintField(3,ve.type),fe.writeMessage(4,un,ve)}function rt(it,fe){var ve=it.feature,Re=it.keys,dt=it.values,ut=it.keycache,Ft=it.valuecache;for(var Ut in ve.properties){var pt=ve.properties[Ut],nn=ut[Ut];if(pt!==null){nn===void 0&&(Re.push(Ut),ut[Ut]=nn=Re.length-1),fe.writeVarint(nn);var gn=typeof pt;gn!=="string"&&gn!=="boolean"&&gn!=="number"&&(pt=JSON.stringify(pt));var bn=gn+":"+pt,aa=Ft[bn];aa===void 0&&(dt.push(pt),Ft[bn]=aa=dt.length-1),fe.writeVarint(aa)}}}function Ue(it,fe){return(fe<<3)+(7&it)}function Bt(it){return it<<1^it>>31}function un(it,fe){for(var ve=it.loadGeometry(),Re=it.type,dt=0,ut=0,Ft=ve.length,Ut=0;Ut<Ft;Ut++){var pt=ve[Ut],nn=1;Re===1&&(nn=pt.length),fe.writeVarint(Ue(1,nn));for(var gn=Re===3?pt.length-1:pt.length,bn=0;bn<gn;bn++){bn===1&&Re!==1&&fe.writeVarint(Ue(2,gn-1));var aa=pt[bn].x-dt,la=pt[bn].y-ut;fe.writeVarint(Bt(aa)),fe.writeVarint(Bt(la)),dt+=aa,ut+=la}Re===3&&fe.writeVarint(Ue(7,1))}}function Tn(it,fe){var ve=typeof it;ve==="string"?fe.writeStringField(1,it):ve==="boolean"?fe.writeBooleanField(7,it):ve==="number"&&(it%1!=0?fe.writeDoubleField(3,it):it<0?fe.writeSVarintField(6,it):fe.writeVarintField(5,it))}J.exports=Ge,J.exports.fromVectorTileJs=Ge,J.exports.fromGeojsonVt=function(it,fe){fe=fe||{};var ve={};for(var Re in it)ve[Re]=new Ie(it[Re].features,fe),ve[Re].name=Re,ve[Re].version=fe.version,ve[Re].extent=fe.extent;return Ge({layers:ve})},J.exports.GeoJSONWrapper=Ie;var ea=o.dc(J.exports);const St={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:it=>it},ke=Math.fround||(Ct=new Float32Array(1),it=>(Ct[0]=+it,Ct[0]));var Ct;const Et=3,Nt=5,Sn=6;class Fn{constructor(fe){this.options=Object.assign(Object.create(St),fe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(fe){const{log:ve,minZoom:Re,maxZoom:dt}=this.options;ve&&console.time("total time");const ut=`prepare ${fe.length} points`;ve&&console.time(ut),this.points=fe;const Ft=[];for(let pt=0;pt<fe.length;pt++){const nn=fe[pt];if(!nn.geometry)continue;const[gn,bn]=nn.geometry.coordinates,aa=ke(cr(gn)),la=ke(Vr(bn));Ft.push(aa,la,1/0,pt,-1,1),this.options.reduce&&Ft.push(0)}let Ut=this.trees[dt+1]=this._createTree(Ft);ve&&console.timeEnd(ut);for(let pt=dt;pt>=Re;pt--){const nn=+Date.now();Ut=this.trees[pt]=this._createTree(this._cluster(Ut,pt)),ve&&console.log("z%d: %d clusters in %dms",pt,Ut.numItems,+Date.now()-nn)}return ve&&console.timeEnd("total time"),this}getClusters(fe,ve){let Re=((fe[0]+180)%360+360)%360-180;const dt=Math.max(-90,Math.min(90,fe[1]));let ut=fe[2]===180?180:((fe[2]+180)%360+360)%360-180;const Ft=Math.max(-90,Math.min(90,fe[3]));if(fe[2]-fe[0]>=360)Re=-180,ut=180;else if(Re>ut){const bn=this.getClusters([Re,dt,180,Ft],ve),aa=this.getClusters([-180,dt,ut,Ft],ve);return bn.concat(aa)}const Ut=this.trees[this._limitZoom(ve)],pt=Ut.range(cr(Re),Vr(Ft),cr(ut),Vr(dt)),nn=Ut.data,gn=[];for(const bn of pt){const aa=this.stride*bn;gn.push(nn[aa+Nt]>1?nr(nn,aa,this.clusterProps):this.points[nn[aa+Et]])}return gn}getChildren(fe){const ve=this._getOriginId(fe),Re=this._getOriginZoom(fe),dt="No cluster with the specified id.",ut=this.trees[Re];if(!ut)throw new Error(dt);const Ft=ut.data;if(ve*this.stride>=Ft.length)throw new Error(dt);const Ut=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),pt=ut.within(Ft[ve*this.stride],Ft[ve*this.stride+1],Ut),nn=[];for(const gn of pt){const bn=gn*this.stride;Ft[bn+4]===fe&&nn.push(Ft[bn+Nt]>1?nr(Ft,bn,this.clusterProps):this.points[Ft[bn+Et]])}if(nn.length===0)throw new Error(dt);return nn}getLeaves(fe,ve,Re){const dt=[];return this._appendLeaves(dt,fe,ve=ve||10,Re=Re||0,0),dt}getTile(fe,ve,Re){const dt=this.trees[this._limitZoom(fe)],ut=Math.pow(2,fe),{extent:Ft,radius:Ut}=this.options,pt=Ut/Ft,nn=(Re-pt)/ut,gn=(Re+1+pt)/ut,bn={features:[]};return this._addTileFeatures(dt.range((ve-pt)/ut,nn,(ve+1+pt)/ut,gn),dt.data,ve,Re,ut,bn),ve===0&&this._addTileFeatures(dt.range(1-pt/ut,nn,1,gn),dt.data,ut,Re,ut,bn),ve===ut-1&&this._addTileFeatures(dt.range(0,nn,pt/ut,gn),dt.data,-1,Re,ut,bn),bn.features.length?bn:null}getClusterExpansionZoom(fe){let ve=this._getOriginZoom(fe)-1;for(;ve<=this.options.maxZoom;){const Re=this.getChildren(fe);if(ve++,Re.length!==1)break;fe=Re[0].properties.cluster_id}return ve}_appendLeaves(fe,ve,Re,dt,ut){const Ft=this.getChildren(ve);for(const Ut of Ft){const pt=Ut.properties;if(pt&&pt.cluster?ut+pt.point_count<=dt?ut+=pt.point_count:ut=this._appendLeaves(fe,pt.cluster_id,Re,dt,ut):ut<dt?ut++:fe.push(Ut),fe.length===Re)break}return ut}_createTree(fe){const ve=new o.aZ(fe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Re=0;Re<fe.length;Re+=this.stride)ve.add(fe[Re],fe[Re+1]);return ve.finish(),ve.data=fe,ve}_addTileFeatures(fe,ve,Re,dt,ut,Ft){for(const Ut of fe){const pt=Ut*this.stride,nn=ve[pt+Nt]>1;let gn,bn,aa;if(nn)gn=Zn(ve,pt,this.clusterProps),bn=ve[pt],aa=ve[pt+1];else{const ra=this.points[ve[pt+Et]];gn=ra.properties;const[fa,ca]=ra.geometry.coordinates;bn=cr(fa),aa=Vr(ca)}const la={type:1,geometry:[[Math.round(this.options.extent*(bn*ut-Re)),Math.round(this.options.extent*(aa*ut-dt))]],tags:gn};let La;La=nn||this.options.generateId?ve[pt+Et]:this.points[ve[pt+Et]].id,La!==void 0&&(la.id=La),Ft.features.push(la)}}_limitZoom(fe){return Math.max(this.options.minZoom,Math.min(Math.floor(+fe),this.options.maxZoom+1))}_cluster(fe,ve){const{radius:Re,extent:dt,reduce:ut,minPoints:Ft}=this.options,Ut=Re/(dt*Math.pow(2,ve)),pt=fe.data,nn=[],gn=this.stride;for(let bn=0;bn<pt.length;bn+=gn){if(pt[bn+2]<=ve)continue;pt[bn+2]=ve;const aa=pt[bn],la=pt[bn+1],La=fe.within(pt[bn],pt[bn+1],Ut),ra=pt[bn+Nt];let fa=ra;for(const ca of La){const mr=ca*gn;pt[mr+2]>ve&&(fa+=pt[mr+Nt])}if(fa>ra&&fa>=Ft){let ca,mr=aa*ra,Ua=la*ra,Xr=-1;const xr=((bn/gn|0)<<5)+(ve+1)+this.points.length;for(const kr of La){const It=kr*gn;if(pt[It+2]<=ve)continue;pt[It+2]=ve;const _n=pt[It+Nt];mr+=pt[It]*_n,Ua+=pt[It+1]*_n,pt[It+4]=xr,ut&&(ca||(ca=this._map(pt,bn,!0),Xr=this.clusterProps.length,this.clusterProps.push(ca)),ut(ca,this._map(pt,It)))}pt[bn+4]=xr,nn.push(mr/fa,Ua/fa,1/0,xr,-1,fa),ut&&nn.push(Xr)}else{for(let ca=0;ca<gn;ca++)nn.push(pt[bn+ca]);if(fa>1)for(const ca of La){const mr=ca*gn;if(!(pt[mr+2]<=ve)){pt[mr+2]=ve;for(let Ua=0;Ua<gn;Ua++)nn.push(pt[mr+Ua])}}}}return nn}_getOriginId(fe){return fe-this.points.length>>5}_getOriginZoom(fe){return(fe-this.points.length)%32}_map(fe,ve,Re){if(fe[ve+Nt]>1){const Ft=this.clusterProps[fe[ve+Sn]];return Re?Object.assign({},Ft):Ft}const dt=this.points[fe[ve+Et]].properties,ut=this.options.map(dt);return Re&&ut===dt?Object.assign({},ut):ut}}function nr(it,fe,ve){return{type:"Feature",id:it[fe+Et],properties:Zn(it,fe,ve),geometry:{type:"Point",coordinates:[(Re=it[fe],360*(Re-.5)),Ya(it[fe+1])]}};var Re}function Zn(it,fe,ve){const Re=it[fe+Nt],dt=Re>=1e4?`${Math.round(Re/1e3)}k`:Re>=1e3?Math.round(Re/100)/10+"k":Re,ut=it[fe+Sn],Ft=ut===-1?{}:Object.assign({},ve[ut]);return Object.assign(Ft,{cluster:!0,cluster_id:it[fe+Et],point_count:Re,point_count_abbreviated:dt})}function cr(it){return it/360+.5}function Vr(it){const fe=Math.sin(it*Math.PI/180),ve=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return ve<0?0:ve>1?1:ve}function Ya(it){const fe=(180-360*it)*Math.PI/180;return 360*Math.atan(Math.exp(fe))/Math.PI-90}var jn={exports:{}};jn.exports=function(){function it(Ye,Ke,ft,yt){for(var Tt,Mt=yt,Ot=ft-Ke>>1,Pt=ft-Ke,Zt=Ye[Ke],gt=Ye[Ke+1],In=Ye[ft],na=Ye[ft+1],on=Ke+3;on<ft;on+=3){var Kn=fe(Ye[on],Ye[on+1],Zt,gt,In,na);if(Kn>Mt)Tt=on,Mt=Kn;else if(Kn===Mt){var Da=Math.abs(on-Ot);Da<Pt&&(Tt=on,Pt=Da)}}Mt>yt&&(Tt-Ke>3&&it(Ye,Ke,Tt,yt),Ye[Tt+2]=Mt,ft-Tt>3&&it(Ye,Tt,ft,yt))}function fe(Ye,Ke,ft,yt,Tt,Mt){var Ot=Tt-ft,Pt=Mt-yt;if(Ot!==0||Pt!==0){var Zt=((Ye-ft)*Ot+(Ke-yt)*Pt)/(Ot*Ot+Pt*Pt);Zt>1?(ft=Tt,yt=Mt):Zt>0&&(ft+=Ot*Zt,yt+=Pt*Zt)}return(Ot=Ye-ft)*Ot+(Pt=Ke-yt)*Pt}function ve(Ye,Ke,ft,yt){var Tt={id:Ye===void 0?null:Ye,type:Ke,geometry:ft,tags:yt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Mt){var Ot=Mt.geometry,Pt=Mt.type;if(Pt==="Point"||Pt==="MultiPoint"||Pt==="LineString")Re(Mt,Ot);else if(Pt==="Polygon"||Pt==="MultiLineString")for(var Zt=0;Zt<Ot.length;Zt++)Re(Mt,Ot[Zt]);else if(Pt==="MultiPolygon")for(Zt=0;Zt<Ot.length;Zt++)for(var gt=0;gt<Ot[Zt].length;gt++)Re(Mt,Ot[Zt][gt])}(Tt),Tt}function Re(Ye,Ke){for(var ft=0;ft<Ke.length;ft+=3)Ye.minX=Math.min(Ye.minX,Ke[ft]),Ye.minY=Math.min(Ye.minY,Ke[ft+1]),Ye.maxX=Math.max(Ye.maxX,Ke[ft]),Ye.maxY=Math.max(Ye.maxY,Ke[ft+1])}function dt(Ye,Ke,ft,yt){if(Ke.geometry){var Tt=Ke.geometry.coordinates,Mt=Ke.geometry.type,Ot=Math.pow(ft.tolerance/((1<<ft.maxZoom)*ft.extent),2),Pt=[],Zt=Ke.id;if(ft.promoteId?Zt=Ke.properties[ft.promoteId]:ft.generateId&&(Zt=yt||0),Mt==="Point")ut(Tt,Pt);else if(Mt==="MultiPoint")for(var gt=0;gt<Tt.length;gt++)ut(Tt[gt],Pt);else if(Mt==="LineString")Ft(Tt,Pt,Ot,!1);else if(Mt==="MultiLineString"){if(ft.lineMetrics){for(gt=0;gt<Tt.length;gt++)Ft(Tt[gt],Pt=[],Ot,!1),Ye.push(ve(Zt,"LineString",Pt,Ke.properties));return}Ut(Tt,Pt,Ot,!1)}else if(Mt==="Polygon")Ut(Tt,Pt,Ot,!0);else{if(Mt!=="MultiPolygon"){if(Mt==="GeometryCollection"){for(gt=0;gt<Ke.geometry.geometries.length;gt++)dt(Ye,{id:Zt,geometry:Ke.geometry.geometries[gt],properties:Ke.properties},ft,yt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(gt=0;gt<Tt.length;gt++){var In=[];Ut(Tt[gt],In,Ot,!0),Pt.push(In)}}Ye.push(ve(Zt,Mt,Pt,Ke.properties))}}function ut(Ye,Ke){Ke.push(pt(Ye[0])),Ke.push(nn(Ye[1])),Ke.push(0)}function Ft(Ye,Ke,ft,yt){for(var Tt,Mt,Ot=0,Pt=0;Pt<Ye.length;Pt++){var Zt=pt(Ye[Pt][0]),gt=nn(Ye[Pt][1]);Ke.push(Zt),Ke.push(gt),Ke.push(0),Pt>0&&(Ot+=yt?(Tt*gt-Zt*Mt)/2:Math.sqrt(Math.pow(Zt-Tt,2)+Math.pow(gt-Mt,2))),Tt=Zt,Mt=gt}var In=Ke.length-3;Ke[2]=1,it(Ke,0,In,ft),Ke[In+2]=1,Ke.size=Math.abs(Ot),Ke.start=0,Ke.end=Ke.size}function Ut(Ye,Ke,ft,yt){for(var Tt=0;Tt<Ye.length;Tt++){var Mt=[];Ft(Ye[Tt],Mt,ft,yt),Ke.push(Mt)}}function pt(Ye){return Ye/360+.5}function nn(Ye){var Ke=Math.sin(Ye*Math.PI/180),ft=.5-.25*Math.log((1+Ke)/(1-Ke))/Math.PI;return ft<0?0:ft>1?1:ft}function gn(Ye,Ke,ft,yt,Tt,Mt,Ot,Pt){if(yt/=Ke,Mt>=(ft/=Ke)&&Ot<yt)return Ye;if(Ot<ft||Mt>=yt)return null;for(var Zt=[],gt=0;gt<Ye.length;gt++){var In=Ye[gt],na=In.geometry,on=In.type,Kn=Tt===0?In.minX:In.minY,Da=Tt===0?In.maxX:In.maxY;if(Kn>=ft&&Da<yt)Zt.push(In);else if(!(Da<ft||Kn>=yt)){var ka=[];if(on==="Point"||on==="MultiPoint")bn(na,ka,ft,yt,Tt);else if(on==="LineString")aa(na,ka,ft,yt,Tt,!1,Pt.lineMetrics);else if(on==="MultiLineString")La(na,ka,ft,yt,Tt,!1);else if(on==="Polygon")La(na,ka,ft,yt,Tt,!0);else if(on==="MultiPolygon")for(var Va=0;Va<na.length;Va++){var Lr=[];La(na[Va],Lr,ft,yt,Tt,!0),Lr.length&&ka.push(Lr)}if(ka.length){if(Pt.lineMetrics&&on==="LineString"){for(Va=0;Va<ka.length;Va++)Zt.push(ve(In.id,on,ka[Va],In.tags));continue}on!=="LineString"&&on!=="MultiLineString"||(ka.length===1?(on="LineString",ka=ka[0]):on="MultiLineString"),on!=="Point"&&on!=="MultiPoint"||(on=ka.length===3?"Point":"MultiPoint"),Zt.push(ve(In.id,on,ka,In.tags))}}}return Zt.length?Zt:null}function bn(Ye,Ke,ft,yt,Tt){for(var Mt=0;Mt<Ye.length;Mt+=3){var Ot=Ye[Mt+Tt];Ot>=ft&&Ot<=yt&&(Ke.push(Ye[Mt]),Ke.push(Ye[Mt+1]),Ke.push(Ye[Mt+2]))}}function aa(Ye,Ke,ft,yt,Tt,Mt,Ot){for(var Pt,Zt,gt=la(Ye),In=Tt===0?fa:ca,na=Ye.start,on=0;on<Ye.length-3;on+=3){var Kn=Ye[on],Da=Ye[on+1],ka=Ye[on+2],Va=Ye[on+3],Lr=Ye[on+4],ms=Tt===0?Kn:Da,Ga=Tt===0?Va:Lr,gs=!1;Ot&&(Pt=Math.sqrt(Math.pow(Kn-Va,2)+Math.pow(Da-Lr,2))),ms<ft?Ga>ft&&(Zt=In(gt,Kn,Da,Va,Lr,ft),Ot&&(gt.start=na+Pt*Zt)):ms>yt?Ga<yt&&(Zt=In(gt,Kn,Da,Va,Lr,yt),Ot&&(gt.start=na+Pt*Zt)):ra(gt,Kn,Da,ka),Ga<ft&&ms>=ft&&(Zt=In(gt,Kn,Da,Va,Lr,ft),gs=!0),Ga>yt&&ms<=yt&&(Zt=In(gt,Kn,Da,Va,Lr,yt),gs=!0),!Mt&&gs&&(Ot&&(gt.end=na+Pt*Zt),Ke.push(gt),gt=la(Ye)),Ot&&(na+=Pt)}var Dr=Ye.length-3;Kn=Ye[Dr],Da=Ye[Dr+1],ka=Ye[Dr+2],(ms=Tt===0?Kn:Da)>=ft&&ms<=yt&&ra(gt,Kn,Da,ka),Dr=gt.length-3,Mt&&Dr>=3&&(gt[Dr]!==gt[0]||gt[Dr+1]!==gt[1])&&ra(gt,gt[0],gt[1],gt[2]),gt.length&&Ke.push(gt)}function la(Ye){var Ke=[];return Ke.size=Ye.size,Ke.start=Ye.start,Ke.end=Ye.end,Ke}function La(Ye,Ke,ft,yt,Tt,Mt){for(var Ot=0;Ot<Ye.length;Ot++)aa(Ye[Ot],Ke,ft,yt,Tt,Mt,!1)}function ra(Ye,Ke,ft,yt){Ye.push(Ke),Ye.push(ft),Ye.push(yt)}function fa(Ye,Ke,ft,yt,Tt,Mt){var Ot=(Mt-Ke)/(yt-Ke);return Ye.push(Mt),Ye.push(ft+(Tt-ft)*Ot),Ye.push(1),Ot}function ca(Ye,Ke,ft,yt,Tt,Mt){var Ot=(Mt-ft)/(Tt-ft);return Ye.push(Ke+(yt-Ke)*Ot),Ye.push(Mt),Ye.push(1),Ot}function mr(Ye,Ke){for(var ft=[],yt=0;yt<Ye.length;yt++){var Tt,Mt=Ye[yt],Ot=Mt.type;if(Ot==="Point"||Ot==="MultiPoint"||Ot==="LineString")Tt=Ua(Mt.geometry,Ke);else if(Ot==="MultiLineString"||Ot==="Polygon"){Tt=[];for(var Pt=0;Pt<Mt.geometry.length;Pt++)Tt.push(Ua(Mt.geometry[Pt],Ke))}else if(Ot==="MultiPolygon")for(Tt=[],Pt=0;Pt<Mt.geometry.length;Pt++){for(var Zt=[],gt=0;gt<Mt.geometry[Pt].length;gt++)Zt.push(Ua(Mt.geometry[Pt][gt],Ke));Tt.push(Zt)}ft.push(ve(Mt.id,Ot,Tt,Mt.tags))}return ft}function Ua(Ye,Ke){var ft=[];ft.size=Ye.size,Ye.start!==void 0&&(ft.start=Ye.start,ft.end=Ye.end);for(var yt=0;yt<Ye.length;yt+=3)ft.push(Ye[yt]+Ke,Ye[yt+1],Ye[yt+2]);return ft}function Xr(Ye,Ke){if(Ye.transformed)return Ye;var ft,yt,Tt,Mt=1<<Ye.z,Ot=Ye.x,Pt=Ye.y;for(ft=0;ft<Ye.features.length;ft++){var Zt=Ye.features[ft],gt=Zt.geometry,In=Zt.type;if(Zt.geometry=[],In===1)for(yt=0;yt<gt.length;yt+=2)Zt.geometry.push(xr(gt[yt],gt[yt+1],Ke,Mt,Ot,Pt));else for(yt=0;yt<gt.length;yt++){var na=[];for(Tt=0;Tt<gt[yt].length;Tt+=2)na.push(xr(gt[yt][Tt],gt[yt][Tt+1],Ke,Mt,Ot,Pt));Zt.geometry.push(na)}}return Ye.transformed=!0,Ye}function xr(Ye,Ke,ft,yt,Tt,Mt){return[Math.round(ft*(Ye*yt-Tt)),Math.round(ft*(Ke*yt-Mt))]}function kr(Ye,Ke,ft,yt,Tt){for(var Mt=Ke===Tt.maxZoom?0:Tt.tolerance/((1<<Ke)*Tt.extent),Ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ft,y:yt,z:Ke,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Pt=0;Pt<Ye.length;Pt++){Ot.numFeatures++,It(Ot,Ye[Pt],Mt,Tt);var Zt=Ye[Pt].minX,gt=Ye[Pt].minY,In=Ye[Pt].maxX,na=Ye[Pt].maxY;Zt<Ot.minX&&(Ot.minX=Zt),gt<Ot.minY&&(Ot.minY=gt),In>Ot.maxX&&(Ot.maxX=In),na>Ot.maxY&&(Ot.maxY=na)}return Ot}function It(Ye,Ke,ft,yt){var Tt=Ke.geometry,Mt=Ke.type,Ot=[];if(Mt==="Point"||Mt==="MultiPoint")for(var Pt=0;Pt<Tt.length;Pt+=3)Ot.push(Tt[Pt]),Ot.push(Tt[Pt+1]),Ye.numPoints++,Ye.numSimplified++;else if(Mt==="LineString")_n(Ot,Tt,Ye,ft,!1,!1);else if(Mt==="MultiLineString"||Mt==="Polygon")for(Pt=0;Pt<Tt.length;Pt++)_n(Ot,Tt[Pt],Ye,ft,Mt==="Polygon",Pt===0);else if(Mt==="MultiPolygon")for(var Zt=0;Zt<Tt.length;Zt++){var gt=Tt[Zt];for(Pt=0;Pt<gt.length;Pt++)_n(Ot,gt[Pt],Ye,ft,!0,Pt===0)}if(Ot.length){var In=Ke.tags||null;if(Mt==="LineString"&&yt.lineMetrics){for(var na in In={},Ke.tags)In[na]=Ke.tags[na];In.mapbox_clip_start=Tt.start/Tt.size,In.mapbox_clip_end=Tt.end/Tt.size}var on={geometry:Ot,type:Mt==="Polygon"||Mt==="MultiPolygon"?3:Mt==="LineString"||Mt==="MultiLineString"?2:1,tags:In};Ke.id!==null&&(on.id=Ke.id),Ye.features.push(on)}}function _n(Ye,Ke,ft,yt,Tt,Mt){var Ot=yt*yt;if(yt>0&&Ke.size<(Tt?Ot:yt))ft.numPoints+=Ke.length/3;else{for(var Pt=[],Zt=0;Zt<Ke.length;Zt+=3)(yt===0||Ke[Zt+2]>Ot)&&(ft.numSimplified++,Pt.push(Ke[Zt]),Pt.push(Ke[Zt+1])),ft.numPoints++;Tt&&function(gt,In){for(var na=0,on=0,Kn=gt.length,Da=Kn-2;on<Kn;Da=on,on+=2)na+=(gt[on]-gt[Da])*(gt[on+1]+gt[Da+1]);if(na>0===In)for(on=0,Kn=gt.length;on<Kn/2;on+=2){var ka=gt[on],Va=gt[on+1];gt[on]=gt[Kn-2-on],gt[on+1]=gt[Kn-1-on],gt[Kn-2-on]=ka,gt[Kn-1-on]=Va}}(Pt,Mt),Ye.push(Pt)}}function Ln(Ye,Ke){var ft=(Ke=this.options=function(Tt,Mt){for(var Ot in Mt)Tt[Ot]=Mt[Ot];return Tt}(Object.create(this.options),Ke)).debug;if(ft&&console.time("preprocess data"),Ke.maxZoom<0||Ke.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ke.promoteId&&Ke.generateId)throw new Error("promoteId and generateId cannot be used together.");var yt=function(Tt,Mt){var Ot=[];if(Tt.type==="FeatureCollection")for(var Pt=0;Pt<Tt.features.length;Pt++)dt(Ot,Tt.features[Pt],Mt,Pt);else dt(Ot,Tt.type==="Feature"?Tt:{geometry:Tt},Mt);return Ot}(Ye,Ke);this.tiles={},this.tileCoords=[],ft&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ke.indexMaxZoom,Ke.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(yt=function(Tt,Mt){var Ot=Mt.buffer/Mt.extent,Pt=Tt,Zt=gn(Tt,1,-1-Ot,Ot,0,-1,2,Mt),gt=gn(Tt,1,1-Ot,2+Ot,0,-1,2,Mt);return(Zt||gt)&&(Pt=gn(Tt,1,-Ot,1+Ot,0,-1,2,Mt)||[],Zt&&(Pt=mr(Zt,1).concat(Pt)),gt&&(Pt=Pt.concat(mr(gt,-1)))),Pt}(yt,Ke)).length&&this.splitTile(yt,0,0,0),ft&&(yt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Pn(Ye,Ke,ft){return 32*((1<<Ye)*ft+Ke)+Ye}return Ln.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ln.prototype.splitTile=function(Ye,Ke,ft,yt,Tt,Mt,Ot){for(var Pt=[Ye,Ke,ft,yt],Zt=this.options,gt=Zt.debug;Pt.length;){yt=Pt.pop(),ft=Pt.pop(),Ke=Pt.pop(),Ye=Pt.pop();var In=1<<Ke,na=Pn(Ke,ft,yt),on=this.tiles[na];if(!on&&(gt>1&&console.time("creation"),on=this.tiles[na]=kr(Ye,Ke,ft,yt,Zt),this.tileCoords.push({z:Ke,x:ft,y:yt}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ke,ft,yt,on.numFeatures,on.numPoints,on.numSimplified),console.timeEnd("creation"));var Kn="z"+Ke;this.stats[Kn]=(this.stats[Kn]||0)+1,this.total++}if(on.source=Ye,Tt){if(Ke===Zt.maxZoom||Ke===Tt)continue;var Da=1<<Tt-Ke;if(ft!==Math.floor(Mt/Da)||yt!==Math.floor(Ot/Da))continue}else if(Ke===Zt.indexMaxZoom||on.numPoints<=Zt.indexMaxPoints)continue;if(on.source=null,Ye.length!==0){gt>1&&console.time("clipping");var ka,Va,Lr,ms,Ga,gs,Dr=.5*Zt.buffer/Zt.extent,as=.5-Dr,hi=.5+Dr,yc=1+Dr;ka=Va=Lr=ms=null,Ga=gn(Ye,In,ft-Dr,ft+hi,0,on.minX,on.maxX,Zt),gs=gn(Ye,In,ft+as,ft+yc,0,on.minX,on.maxX,Zt),Ye=null,Ga&&(ka=gn(Ga,In,yt-Dr,yt+hi,1,on.minY,on.maxY,Zt),Va=gn(Ga,In,yt+as,yt+yc,1,on.minY,on.maxY,Zt),Ga=null),gs&&(Lr=gn(gs,In,yt-Dr,yt+hi,1,on.minY,on.maxY,Zt),ms=gn(gs,In,yt+as,yt+yc,1,on.minY,on.maxY,Zt),gs=null),gt>1&&console.timeEnd("clipping"),Pt.push(ka||[],Ke+1,2*ft,2*yt),Pt.push(Va||[],Ke+1,2*ft,2*yt+1),Pt.push(Lr||[],Ke+1,2*ft+1,2*yt),Pt.push(ms||[],Ke+1,2*ft+1,2*yt+1)}}},Ln.prototype.getTile=function(Ye,Ke,ft){var yt=this.options,Tt=yt.extent,Mt=yt.debug;if(Ye<0||Ye>24)return null;var Ot=1<<Ye,Pt=Pn(Ye,Ke=(Ke%Ot+Ot)%Ot,ft);if(this.tiles[Pt])return Xr(this.tiles[Pt],Tt);Mt>1&&console.log("drilling down to z%d-%d-%d",Ye,Ke,ft);for(var Zt,gt=Ye,In=Ke,na=ft;!Zt&&gt>0;)gt--,In=Math.floor(In/2),na=Math.floor(na/2),Zt=this.tiles[Pn(gt,In,na)];return Zt&&Zt.source?(Mt>1&&console.log("found parent tile z%d-%d-%d",gt,In,na),Mt>1&&console.time("drilling down"),this.splitTile(Zt.source,gt,In,na,Ye,Ke,ft),Mt>1&&console.timeEnd("drilling down"),this.tiles[Pt]?Xr(this.tiles[Pt],Tt):null):null},function(Ye,Ke){return new Ln(Ye,Ke)}}();var As=o.dc(jn.exports);function vr(it,fe){const ve=it.tileID.canonical;if(!this._geoJSONIndex)return fe(null,null);const Re=this._geoJSONIndex.getTile(ve.z,ve.x,ve.y);if(!Re)return fe(null,null);const dt=new class{constructor(Ft){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.J,this.length=Ft.length,this._features=Ft}feature(Ft){return new class{constructor(Ut){this._feature=Ut,this.extent=o.J,this.type=Ut.type,this.properties=Ut.tags,"id"in Ut&&!isNaN(Ut.id)&&(this.id=parseInt(Ut.id,10))}loadGeometry(){if(this._feature.type===1){const Ut=[];for(const pt of this._feature.geometry)Ut.push([new o.P(pt[0],pt[1])]);return Ut}{const Ut=[];for(const pt of this._feature.geometry){const nn=[];for(const gn of pt)nn.push(new o.P(gn[0],gn[1]));Ut.push(nn)}return Ut}}toGeoJSON(Ut,pt,nn){return te.call(this,Ut,pt,nn)}}(this._features[Ft])}}(Re.features);let ut=ea(dt);ut.byteOffset===0&&ut.byteLength===ut.buffer.byteLength||(ut=new Uint8Array(ut)),fe(null,{vectorTile:dt,rawData:ut.buffer})}class sn extends o.dh{constructor(fe,ve,Re,dt,ut,Ft){super(fe,ve,Re,dt,vr,Ft),ut&&(this.loadGeoJSON=ut)}loadData(fe,ve){const Re=fe&&fe.request,dt=Re&&Re.collectResourceTiming;this.loadGeoJSON(fe,(ut,Ft)=>{if(ut||!Ft)return ve(ut);if(typeof Ft!="object")return ve(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));{H(Ft,!0);try{if(fe.filter){const pt=o.cw(fe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pt.result==="error")throw new Error(pt.value.map(gn=>`${gn.key}: ${gn.message}`).join(", "));Ft={type:"FeatureCollection",features:Ft.features.filter(gn=>pt.value.evaluate({zoom:0},gn))}}this._geoJSONIndex=fe.cluster?new Fn(function({superclusterOptions:pt,clusterProperties:nn}){if(!nn||!pt)return pt;const gn={},bn={},aa={accumulated:null,zoom:0},la={properties:null},La=Object.keys(nn);for(const ra of La){const[fa,ca]=nn[ra],mr=o.cw(ca),Ua=o.cw(typeof fa=="string"?[fa,["accumulated"],["get",ra]]:fa);gn[ra]=mr.value,bn[ra]=Ua.value}return pt.map=ra=>{la.properties=ra;const fa={};for(const ca of La)fa[ca]=gn[ca].evaluate(aa,la);return fa},pt.reduce=(ra,fa)=>{la.properties=fa;for(const ca of La)aa.accumulated=ra[ca],ra[ca]=bn[ca].evaluate(aa,la)},pt}(fe)).load(Ft.features):As(Ft,fe.geojsonVtOptions)}catch(pt){return ve(pt)}this.loaded={};const Ut={};if(dt){const pt=o.di(Re);pt&&(Ut.resourceTiming={},Ut.resourceTiming[fe.source]=JSON.parse(JSON.stringify(pt)))}ve(null,Ut)}})}reloadTile(fe,ve){const Re=this.loaded;return Re&&Re[fe.uid]?super.reloadTile(fe,ve):this.loadTile(fe,ve)}loadGeoJSON(fe,ve){if(fe.request)o.a1(fe.request,ve);else{if(typeof fe.data!="string")return ve(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));try{return ve(null,JSON.parse(fe.data))}catch{return ve(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(fe,ve){try{ve(null,this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId))}catch(Re){ve(Re)}}getClusterChildren(fe,ve){try{ve(null,this._geoJSONIndex.getChildren(fe.clusterId))}catch(Re){ve(Re)}}getClusterLeaves(fe,ve){try{ve(null,this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset))}catch(Re){ve(Re)}}}class kn{constructor(fe,ve){this.tileID=new o.O(fe.tileID.overscaledZ,fe.tileID.wrap,fe.tileID.canonical.z,fe.tileID.canonical.x,fe.tileID.canonical.y),this.tileZoom=fe.tileZoom,this.uid=fe.uid,this.zoom=fe.zoom,this.canonical=fe.tileID.canonical,this.pixelRatio=fe.pixelRatio,this.tileSize=fe.tileSize,this.source=fe.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=fe.projection,this.brightness=ve}parse(fe,ve,Re,dt){this.status="parsing";const ut=new o.O(Re.tileID.overscaledZ,Re.tileID.wrap,Re.tileID.canonical.z,Re.tileID.canonical.x,Re.tileID.canonical.y),Ft={},Ut=ve.familiesBySource[Re.source],pt=new o.dk(ut,Re.promoteId);return pt.bucketLayerIDs=[],o.dl(fe).then(nn=>{if(!nn)return dt(new Error("Could not parse tile"));const gn=o.dm(nn,1/o.cg(Re.tileID.canonical)),bn=nn.json.extensionsUsed&&nn.json.extensionsUsed.includes("MAPBOX_mesh_features"),aa=new o.al(this.zoom,{brightness:this.brightness});for(const la in Ut)for(const La of Ut[la]){const ra=La[0],fa=nn.json.extensionsUsed;ra.recalculate(aa,[]);const ca=new o.dn(gn,ut,fa&&fa.includes("MAPBOX_mesh_features"),this.brightness);bn||(ca.needsUpload=!0),Ft[ra.fqid]=ca,ca.evaluate(ra)}this.status="done",dt(null,{buckets:Ft,featureIndex:pt})}).catch(nn=>dt(new Error(nn.message)))}}class an{constructor(fe,ve,Re,dt,ut,Ft){this.actor=fe,this.layerIndex=ve,this.brightness=Ft,this.loading={},this.loaded={}}loadTile(fe,ve){const Re=fe.uid,dt=this.loading[Re]=new kn(fe,this.brightness);o.dj(fe.request,(ut,Ft)=>{const Ut=!this.loading[Re];return delete this.loading[Re],Ut||ut?(dt.status="done",Ut||(this.loaded[Re]=dt),ve(ut)):Ft&&Ft.byteLength!==0?void dt.parse(Ft,this.layerIndex,fe,(pt,nn)=>{dt.status="done",this.loaded=this.loaded||{},this.loaded[Re]=dt,pt||!nn?ve(pt):ve(null,nn)}):(dt.status="done",this.loaded[Re]=dt,ve())})}reloadTile(fe,ve){const Re=this.loaded,dt=fe.uid;if(Re&&Re[dt]){const ut=Re[dt];ut.projection=fe.projection,ut.brightness=fe.brightness;const Ft=(Ut,pt)=>{ut.reloadCallback&&(delete ut.reloadCallback,this.loadTile(fe,ve)),ve(Ut,pt)};ut.status==="parsing"?ut.reloadCallback=Ft:ut.status==="done"&&this.loadTile(fe,ve)}}abortTile(fe,ve){const Re=fe.uid;this.loading[Re]&&delete this.loading[Re],ve()}removeTile(fe,ve){const Re=this.loaded,dt=fe.uid;Re&&Re[dt]&&delete Re[dt],ve()}}class Yt{constructor(fe){this.self=fe,this.actor=new o.dp(fe,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.o({name:"mercator"}),this.workerSourceTypes={vector:o.dh,geojson:sn,"batched-model":an},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ve,Re)=>{if(this.workerSourceTypes[ve])throw new Error(`Worker source with name "${ve}" already registered.`);this.workerSourceTypes[ve]=Re},this.self.registerRTLTextPlugin=ve=>{if(o.dq.isParsed())throw new Error("RTL text plugin already registered.");o.dq.applyArabicShaping=ve.applyArabicShaping,o.dq.processBidirectionalText=ve.processBidirectionalText,o.dq.processStyledBidirectionalText=ve.processStyledBidirectionalText}}clearCaches(fe,ve,Re){delete this.layerIndexes[fe],delete this.availableImages[fe],delete this.workerSources[fe],delete this.demWorkerSources[fe],Re()}checkIfReady(fe,ve,Re){Re()}setReferrer(fe,ve){this.referrer=ve}spriteLoaded(fe,{scope:ve,isLoaded:Re}){if(this.isSpriteLoaded[fe]||(this.isSpriteLoaded[fe]={}),this.isSpriteLoaded[fe][ve]=Re,this.workerSources[fe]&&this.workerSources[fe][ve])for(const dt in this.workerSources[fe][ve]){const ut=this.workerSources[fe][ve][dt];for(const Ft in ut)ut[Ft]instanceof o.dh&&(ut[Ft].isSpriteLoaded=Re,ut[Ft].fire(new o.a8("isSpriteLoaded")))}}setImages(fe,{scope:ve,images:Re},dt){if(this.availableImages[fe]||(this.availableImages[fe]={}),this.availableImages[fe][ve]=Re,this.workerSources[fe]&&this.workerSources[fe][ve]){for(const ut in this.workerSources[fe][ve]){const Ft=this.workerSources[fe][ve][ut];for(const Ut in Ft)Ft[Ut].availableImages=Re}dt()}else dt()}setProjection(fe,ve){this.projections[fe]=o.o(ve)}setBrightness(fe,ve,Re){this.brightness=ve,Re()}setLayers(fe,ve,Re){this.getLayerIndex(fe,ve.scope).replace(ve.layers,ve.options),Re()}updateLayers(fe,ve,Re){this.getLayerIndex(fe,ve.scope).update(ve.layers,ve.removedIds,ve.options),Re()}loadTile(fe,ve,Re){ve.projection=this.projections[fe]||this.defaultProjection,this.getWorkerSource(fe,ve.type,ve.source,ve.scope).loadTile(ve,Re)}loadDEMTile(fe,ve,Re){this.getDEMWorkerSource(fe,ve.source,ve.scope).loadTile(ve,Re)}reloadTile(fe,ve,Re){ve.projection=this.projections[fe]||this.defaultProjection,this.getWorkerSource(fe,ve.type,ve.source,ve.scope).reloadTile(ve,Re)}abortTile(fe,ve,Re){this.getWorkerSource(fe,ve.type,ve.source,ve.scope).abortTile(ve,Re)}removeTile(fe,ve,Re){this.getWorkerSource(fe,ve.type,ve.source,ve.scope).removeTile(ve,Re)}removeSource(fe,ve,Re){if(!(this.workerSources[fe]&&this.workerSources[fe][ve.scope]&&this.workerSources[fe][ve.scope][ve.type]&&this.workerSources[fe][ve.scope][ve.type][ve.source]))return;const dt=this.workerSources[fe][ve.scope][ve.type][ve.source];delete this.workerSources[fe][ve.scope][ve.type][ve.source],dt.removeSource!==void 0?dt.removeSource(ve,Re):Re()}loadWorkerSource(fe,ve,Re){try{this.self.importScripts(ve.url),Re()}catch(dt){Re(dt.toString())}}syncRTLPluginState(fe,ve,Re){try{o.dq.setState(ve);const dt=o.dq.getPluginURL();if(o.dq.isLoaded()&&!o.dq.isParsed()&&dt!=null){this.self.importScripts(dt);const ut=o.dq.isParsed();Re(ut?void 0:new Error(`RTL Text Plugin failed to import scripts from ${dt}`),ut)}}catch(dt){Re(dt.toString())}}setDracoUrl(fe,ve){this.dracoUrl=ve}getAvailableImages(fe,ve){this.availableImages[fe]||(this.availableImages[fe]={});let Re=this.availableImages[fe][ve];return Re||(Re=[]),Re}getLayerIndex(fe,ve){this.layerIndexes[fe]||(this.layerIndexes[fe]={});let Re=this.layerIndexes[fe][ve];return Re||(Re=this.layerIndexes[fe][ve]=new L,Re.scope=ve),Re}getWorkerSource(fe,ve,Re,dt){if(this.workerSources[fe]||(this.workerSources[fe]={}),this.workerSources[fe][dt]||(this.workerSources[fe][dt]={}),this.workerSources[fe][dt][ve]||(this.workerSources[fe][dt][ve]={}),this.isSpriteLoaded[fe]||(this.isSpriteLoaded[fe]={}),!this.workerSources[fe][dt][ve][Re]){const ut={send:(Ft,Ut,pt,nn,gn,bn)=>{this.actor.send(Ft,Ut,pt,fe,gn,bn)},scheduler:this.actor.scheduler};this.workerSources[fe][dt][ve][Re]=new this.workerSourceTypes[ve](ut,this.getLayerIndex(fe,dt),this.getAvailableImages(fe,dt),this.isSpriteLoaded[fe][dt],void 0,this.brightness)}return this.workerSources[fe][dt][ve][Re]}getDEMWorkerSource(fe,ve,Re){return this.demWorkerSources[fe]||(this.demWorkerSources[fe]={}),this.demWorkerSources[fe][Re]||(this.demWorkerSources[fe][Re]={}),this.demWorkerSources[fe][Re][ve]||(this.demWorkerSources[fe][Re][ve]=new O),this.demWorkerSources[fe][Re][ve]}enforceCacheSizeLimit(fe,ve){o.dr(ve)}getWorkerPerformanceMetrics(fe,ve,Re){Re(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Yt(self)),Yt}),w(["./shared"],function(o){function M(m,c){if(Array.isArray(m)){if(!Array.isArray(c)||m.length!==c.length)return!1;for(let d=0;d<m.length;d++)if(!M(m[d],c[d]))return!1;return!0}if(typeof m=="object"&&m!==null&&c!==null){if(typeof c!="object"||Object.keys(m).length!==Object.keys(c).length)return!1;for(const d in m)if(!M(m[d],c[d]))return!1;return!0}return m===c}var B=L;function L(m){return!function(c){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,v,S=new Blob([""],{type:"text/javascript"}),E=URL.createObjectURL(S);try{v=new Worker(E),_=!0}catch{_=!1}return v&&v.terminate(),URL.revokeObjectURL(E),_}()?function(){var _=document.createElement("canvas");_.width=_.height=1;var v=_.getContext("2d");if(!v)return!1;var S=v.getImageData(0,0,1,1);return S&&S.width===_.width}()?(O[d=c&&c.failIfMajorPerformanceCaveat]===void 0&&(O[d]=function(_){var v,S=function(E){var z=document.createElement("canvas"),k=Object.create(L.webGLContextAttributes);return k.failIfMajorPerformanceCaveat=E,z.getContext("webgl2",k)}(_);if(!S)return!1;try{v=S.createShader(S.VERTEX_SHADER)}catch{return!1}return!(!v||S.isContextLost())&&(S.shaderSource(v,"void main() {}"),S.compileShader(v),S.getShaderParameter(v,S.COMPILE_STATUS)===!0)}(d)),O[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var d}(m)}var O={};function j(m,c,d){const _=document.createElement(m);return c!=null&&(_.className=c),d&&d.appendChild(_),_}function Z(m,c,d){const _=document.createElementNS("http://www.w3.org/2000/svg",m);for(const v of Object.keys(c))_.setAttributeNS(null,v,String(c[v]));return d&&d.appendChild(_),_}L.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const H=typeof document<"u"?document.documentElement&&document.documentElement.style:null,te=H&&H.userSelect!==void 0?"userSelect":"WebkitUserSelect";let J;function K(){H&&te&&(J=H[te],H[te]="none")}function W(){H&&te&&(H[te]=J)}function ee(m){m.preventDefault(),m.stopPropagation(),window.removeEventListener("click",ee,!0)}function me(){window.addEventListener("click",ee,!0),window.setTimeout(()=>{window.removeEventListener("click",ee,!0)},0)}function Se(m,c){const d=m.getBoundingClientRect();return Ge(m,d,c)}function Me(m,c){const d=m.getBoundingClientRect(),_=[];for(let v=0;v<c.length;v++)_.push(Ge(m,d,c[v]));return _}function Ie(m){return window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function Ge(m,c,d){const _=m.offsetWidth===c.width?1:m.offsetWidth/c.width;return new o.P((d.clientX-c.left)*_,(d.clientY-c.top)*_)}class ge{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(c,d){this._updatedSourceCaches[c]=d,this.setDirty()}discardSourceCacheUpdate(c){delete this._updatedSourceCaches[c]}updateLayer(c){const d=c.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(c.id),this.setDirty()}removeLayer(c){const d=c.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][c.id]=c,this._updatedLayers[d].delete(c.id),this._updatedPaintProps.delete(c.fqid),this.setDirty()}getRemovedLayer(c){return this._removedLayers[c.scope]?this._removedLayers[c.scope][c.id]:null}discardLayerRemoval(c){this._removedLayers[c.scope]&&delete this._removedLayers[c.scope][c.id]}getLayerUpdatesByScope(){const c={};for(const d in this._updatedLayers)c[d]=c[d]||{},c[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)c[d]=c[d]||{},c[d].removedIds=Object.keys(this._removedLayers[d]);return c}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(c){this._updatedPaintProps.add(c.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(c){this._updatedImages.add(c),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}const Xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rt{constructor(c,d,_,v,S,E){this.length=d.length,this.attributes=_,this.itemSize=d.bytesPerElement,this.dynamicDraw=v,this.instanceCount=E,this.context=c;const z=c.gl;this.buffer=z.createBuffer(),c.bindVertexBuffer.set(this.buffer),z.bufferData(z.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||S||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,d){for(let _=0;_<this.attributes.length;_++){const v=d.attributes[this.attributes[_].name];v!==void 0&&c.enableVertexAttribArray(v)}}setVertexAttribPointers(c,d,_){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],E=d.attributes[S.name];E!==void 0&&c.vertexAttribPointer(E,S.components,c[Xe[S.type]],!1,this.itemSize,S.offset+this.itemSize*(_||0))}}setVertexAttribDivisor(c,d,_){for(let v=0;v<this.attributes.length;v++){const S=d.attributes[this.attributes[v].name];S!==void 0&&this.instanceCount&&this.instanceCount>0&&c.vertexAttribDivisor(S,_)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ue{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Bt extends Ue{getDefault(){return o.C.transparent}set(c){const d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class un extends Ue{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Tn extends Ue{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class ea extends Ue{getDefault(){return[!0,!0,!0,!0]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class St extends Ue{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class ke extends Ue{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Ct extends Ue{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const d=this.current;(c.func!==d.func||c.ref!==d.ref||c.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class Et extends Ue{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Nt extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;c?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=c,this.dirty=!1}}class Sn extends Ue{getDefault(){return[0,1]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class Fn extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;c?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=c,this.dirty=!1}}class nr extends Ue{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class Zn extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;c?d.enable(d.BLEND):d.disable(d.BLEND),this.current=c,this.dirty=!1}}class cr extends Ue{getDefault(){const c=this.gl;return[c.ONE,c.ZERO,c.ONE,c.ZERO]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Vr extends Ue{getDefault(){return o.C.transparent}set(c){const d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Ya extends Ue{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(c,c),this.current=c,this.dirty=!1)}}class jn extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;c?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=c,this.dirty=!1}}class As extends Ue{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class vr extends Ue{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}let sn=class extends Ue{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class kn extends Ue{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class an extends Ue{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Yt extends Ue{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class it extends Ue{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class fe extends Ue{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class ve extends Ue{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Re extends Ue{getDefault(){return null}set(c){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class dt extends Ue{getDefault(){return null}set(c){this.gl&&(c!==this.current||this.dirty)&&(this.gl.bindVertexArray(c),this.current=c,this.dirty=!1)}}class ut extends Ue{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Ft extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Ut extends Ue{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class pt extends Ue{constructor(c,d){super(c),this.context=c,this.parent=d}getDefault(){return null}}class nn extends pt{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class gn extends pt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class bn extends pt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class aa extends gn{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class la{constructor(c,d,_,v,S){this.context=c,this.width=d,this.height=_;const E=this.framebuffer=c.gl.createFramebuffer();v&&(this.colorAttachment=new nn(c,E)),S&&(this.depthAttachmentType=S,this.depthAttachment=S==="renderbuffer"?new gn(c,E):new bn(c,E))}destroy(){const c=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&c.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&c.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&c.deleteTexture(d)}c.deleteFramebuffer(this.framebuffer)}}class La{constructor(c,d){this.gl=c,this.clearColor=new Bt(this),this.clearDepth=new un(this),this.clearStencil=new Tn(this),this.colorMask=new ea(this),this.depthMask=new St(this),this.stencilMask=new ke(this),this.stencilFunc=new Ct(this),this.stencilOp=new Et(this),this.stencilTest=new Nt(this),this.depthRange=new Sn(this),this.depthTest=new Fn(this),this.depthFunc=new nr(this),this.blend=new Zn(this),this.blendFunc=new cr(this),this.blendColor=new Vr(this),this.blendEquation=new Ya(this),this.cullFace=new jn(this),this.cullFaceSide=new As(this),this.frontFace=new vr(this),this.program=new sn(this),this.activeTexture=new kn(this),this.viewport=new an(this),this.bindFramebuffer=new Yt(this),this.bindRenderbuffer=new it(this),this.bindTexture=new fe(this),this.bindVertexBuffer=new ve(this),this.bindElementBuffer=new Re(this),this.bindVertexArrayOES=new dt(this),this.pixelStoreUnpack=new ut(this),this.pixelStoreUnpackPremultiplyAlpha=new Ft(this),this.pixelStoreUnpackFlipY=new Ut(this),this.options=d?{...d}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=c.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,d,_){return new o.I(this,c,d,_)}createVertexBuffer(c,d,_,v,S){return new rt(this,c,d,_,v,S)}createRenderbuffer(c,d,_){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,c,d,_),this.bindRenderbuffer.set(null),S}createFramebuffer(c,d,_,v){return new la(this,c,d,_,v)}clear({color:c,depth:d,stencil:_,colorMask:v}){const S=this.gl;let E=0;c&&(E|=S.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set(v||[!0,!0,!0,!0])),d!==void 0&&(E|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),_!==void 0&&(E|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),S.clear(E)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){M(c.blendFunction,o.a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor),c.blendEquation?this.blendEquation.set(c.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(c.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}class ra{constructor(c=0,d=0,_=0,v=0){if(isNaN(c)||c<0||isNaN(d)||d<0||isNaN(_)||_<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=d,this.left=_,this.right=v}interpolate(c,d,_){return d.top!=null&&c.top!=null&&(this.top=o.n(c.top,d.top,_)),d.bottom!=null&&c.bottom!=null&&(this.bottom=o.n(c.bottom,d.bottom,_)),d.left!=null&&c.left!=null&&(this.left=o.n(c.left,d.left,_)),d.right!=null&&c.right!=null&&(this.right=o.n(c.right,d.right,_)),this}getCenter(c,d){const _=o.c((this.left+c-this.right)/2,0,c),v=o.c((this.top+d-this.bottom)/2,0,d);return new o.P(_,v)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new ra(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function fa(m,c){const d=o.g(m,3);o.m.fromQuat(m,c),o.s(m,3,d)}function ca(m,c){const d=o.q.identity([]);return o.q.rotateZ(d,d,-c),o.q.rotateX(d,d,-m),d}function mr(m,c){const d=[m[0],m[1],0],_=[c[0],c[1],0];if(o.v.length(d)>=1e-15){const E=o.v.normalize([],d);o.v.scale(_,E,o.v.dot(_,E)),c[0]=_[0],c[1]=_[1]}const v=o.v.cross([],c,m);if(o.v.len(v)<1e-15)return null;const S=Math.atan2(-v[1],v[0]);return ca(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),S)}class Ua{constructor(c,d){this.position=c,this.orientation=d}get position(){return this._position}set position(c){if(c){const d=c instanceof o.M?c:new o.M(c[0],c[1],c[2]);this._renderWorldCopies&&(d.x=o.w(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(c,d){if(this.orientation=null,!this.position)return;const _=this.position,v=this._elevation?this._elevation.getAtPointOrZero(o.M.fromLngLat(c)):0,S=o.M.fromLngLat(c,v),E=[S.x-_.x,S.y-_.y,S.z-_.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=mr(E,d)}setPitchBearing(c,d){this.orientation=ca(o.d(c),o.d(-d))}}class Xr{constructor(c,d){this._transform=o.m.identity([]),this.orientation=d,this.position=c}get mercatorPosition(){const c=this.position;return new o.M(c[0],c[1],c[2])}get position(){const c=o.g(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var d;c&&o.s(this._transform,3,[(d=c)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||o.q.identity([]),c&&fa(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,d){this._orientation=ca(c,d),fa(this._transform,this._orientation)}forward(){const c=o.g(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=o.g(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=o.g(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,d){const _=new Float64Array(16);return o.m.invert(_,this.getWorldToCamera(c,d)),_}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(c,d,_){const v=this.position;o.v.scale(v,v,-c);const S=new Float64Array(16);return o.m.fromScaling(S,[_,_,_]),o.m.translate(S,S,v),S[10]*=d,S}getWorldToCamera(c,d){const _=new Float64Array(16),v=new Float64Array(4),S=this.position;return o.q.conjugate(v,this._orientation),o.v.scale(S,S,-c),o.m.fromQuat(_,v),o.m.translate(_,_,S),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=d,_[9]*=d,_[10]*=d,_[11]*=d,_}getCameraToClipPerspective(c,d,_,v){const S=new Float64Array(16);return o.m.perspective(S,c,d,_,v),S}getCameraToClipOrthographic(c,d,_,v,S,E){const z=new Float64Array(16);return o.m.ortho(z,c,d,_,v,S,E),z}getDistanceToElevation(c,d=!1){const _=c===0?0:o.b(c,d?o.l(this.position[1]):this.position[1]),v=this.forward();return(_-this.position[2])/v[2]}clone(){return new Xr([...this.position],[...this.orientation])}}const xr={unknown:0,flipRequired:1,flipNotRequired:2},kr=Math.tan(85*Math.PI/180);function It(m,c,d,_,v,S,E){const z=o.m.create();if(d)if(S.name==="globe"){const k=o.f(v,c);o.m.multiply(z,z,k)}else{const k=o.h.invert([],E);z[0]=k[0],z[1]=k[1],z[4]=k[2],z[5]=k[3],_||o.m.rotateZ(z,z,v.angle)}else o.m.multiply(z,v.labelPlaneMatrix,m);return z}function _n(m,c,d,_,v,S,E){const z=It(m,c,d,_,v,S,E);return S.name==="globe"&&d||(z[2]=z[6]=z[10]=z[14]=0),z}function Ln(m,c,d,_,v,S,E){if(d){if(S.name==="globe"){const z=It(m,c,d,_,v,S,E);return o.m.invert(z,z),o.m.multiply(z,m,z),z}{const z=o.m.clone(m),k=o.m.identity([]);return k[0]=E[0],k[1]=E[1],k[4]=E[2],k[5]=E[3],o.m.multiply(z,z,k),_||o.m.rotateZ(z,z,-v.angle),z}}return v.glCoordMatrix}function Pn(m,c,d,_){const v=[m,c,d,1];d?o.e.transformMat4(v,v,_):In(v,v,_);const S=v[3];return v[0]/=S,v[1]/=S,v[2]/=S,v}function Ye(m,c){return Math.min(.5+m/c*.5,1.5)}function Ke(m,c){const d=m[0]/m[3],_=m[1]/m[3];return d>=-c[0]&&d<=c[0]&&_>=-c[1]&&_<=c[1]}function ft(m,c,d,_,v,S,E,z,k,N){const U=d.transform,$=_?m.textSizeData:m.iconSizeData,X=o.i($,d.transform.zoom),Q=U.projection.name==="globe",ae=[256/d.width*2+1,256/d.height*2+1],se=_?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;se.clear();let re=null;Q&&(re=_?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const ne=m.lineVertexArray,de=_?m.text.placedSymbolArray:m.icon.placedSymbolArray,ye=d.transform.width/d.transform.height;let xe,ce=!1;for(let pe=0;pe<de.length;pe++){const we=de.get(pe),{numGlyphs:Ce,writingMode:Ee}=we;if(Ee!==o.W.vertical||ce||xe===o.W.horizontal||(ce=!0),xe=Ee,(we.hidden||Ee===o.W.vertical)&&!ce){gt(Ce,se);continue}ce=!1;const Le=new o.P(we.tileAnchorX,we.tileAnchorY);let{x:nt,y:$e,z:Je}=U.projection.projectTilePoint(Le.x,Le.y,N.canonical);if(k){const[jt,rn,Vt]=k(Le);nt+=jt,$e+=rn,Je+=Vt}const Oe=[nt,$e,Je,1];if(o.e.transformMat4(Oe,Oe,c),!Ke(Oe,ae)){gt(Ce,se);continue}const tt=Oe[3],Ze=Ye(d.transform.getCameraToCenterDistance(U.projection),tt),st=o.j($,X,we),be=E?st/Ze:st*Ze,Fe=Pn(nt,$e,Je,v);if(Fe[3]<=0){gt(Ce,se);continue}let mt={};const ct=E?null:k,Wt=Mt(we,be,!1,z,c,v,S,m.glyphOffsetArray,ne,se,re,Fe,Le,mt,ye,ct,U.projection,N,E);ce=Wt.useVertical,ct&&Wt.needsFlipping&&(mt={}),(Wt.notEnoughRoom||ce||Wt.needsFlipping&&Mt(we,be,!0,z,c,v,S,m.glyphOffsetArray,ne,se,re,Fe,Le,mt,ye,ct,U.projection,N,E).notEnoughRoom)&&gt(Ce,se)}_?(m.text.dynamicLayoutVertexBuffer.updateData(se),re&&m.text.globeExtVertexBuffer&&m.text.globeExtVertexBuffer.updateData(re)):(m.icon.dynamicLayoutVertexBuffer.updateData(se),re&&m.icon.globeExtVertexBuffer&&m.icon.globeExtVertexBuffer.updateData(re))}function yt(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se){const{lineStartIndex:re,glyphStartIndex:ne,segment:de}=z,ye=ne+z.numGlyphs,xe=re+z.lineLength,ce=c.getoffsetX(ne),pe=c.getoffsetX(ye-1),we=Zt(m*ce,d,_,v,S,E,de,re,xe,k,N,U,$,X,!0,Q,ae,se);if(!we)return null;const Ce=Zt(m*pe,d,_,v,S,E,de,re,xe,k,N,U,$,X,!0,Q,ae,se);return Ce?{first:we,last:Ce}:null}function Tt(m,c,d,_){return m===o.W.horizontal&&Math.abs(_)>Math.abs(d)?{useVertical:!0}:m===o.W.vertical?_>0?{needsFlipping:!0}:null:c!==xr.unknown&&function(v,S){return v===0||Math.abs(S/v)>kr}(d,_)?c===xr.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function Mt(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se,re,ne,de){const ye=c/24,xe=m.lineOffsetX*ye,ce=m.lineOffsetY*ye,{lineStartIndex:pe,glyphStartIndex:we,numGlyphs:Ce,segment:Ee,writingMode:Le,flipState:nt}=m,$e=pe+m.lineLength,Je=Oe=>{if(U){const[be,Fe,mt]=Oe.up,ct=N.length;o.u(U,ct+0,be,Fe,mt),o.u(U,ct+1,be,Fe,mt),o.u(U,ct+2,be,Fe,mt),o.u(U,ct+3,be,Fe,mt)}const[tt,Ze,st]=Oe.point;o.k(N,tt,Ze,st,Oe.angle)};if(Ce>1){const Oe=yt(ye,z,xe,ce,d,$,X,m,k,S,Q,se,!1,re,ne,de);if(!Oe)return{notEnoughRoom:!0};if(_&&!d){let[tt,Ze,st]=Oe.first.point,[be,Fe,mt]=Oe.last.point;[tt,Ze]=Pn(tt,Ze,st,E),[be,Fe]=Pn(be,Fe,mt,E);const ct=Tt(Le,nt,(be-tt)*ae,Fe-Ze);if(m.flipState=ct&&ct.needsFlipping?xr.flipRequired:xr.flipNotRequired,ct)return ct}Je(Oe.first);for(let tt=we+1;tt<we+Ce-1;tt++){const Ze=Zt(ye*z.getoffsetX(tt),xe,ce,d,$,X,Ee,pe,$e,k,S,Q,se,!1,!1,re,ne,de);if(!Ze)return N.length-=4*(tt-we),{notEnoughRoom:!0};Je(Ze)}Je(Oe.last)}else{if(_&&!d){const tt=Pn(X.x,X.y,0,v),Ze=pe+Ee+1,st=new o.P(k.getx(Ze),k.gety(Ze)),be=Pn(st.x,st.y,0,v),Fe=be[3]>0?be:Pt(X,st,tt,1,v,void 0,re,ne.canonical),mt=Tt(Le,nt,(Fe[0]-tt[0])*ae,Fe[1]-tt[1]);if(m.flipState=mt&&mt.needsFlipping?xr.flipRequired:xr.flipNotRequired,mt)return mt}const Oe=Zt(ye*z.getoffsetX(we),xe,ce,d,$,X,Ee,pe,$e,k,S,Q,se,!1,!1,re,ne,de);if(!Oe)return{notEnoughRoom:!0};Je(Oe)}return{}}function Ot(m,c,d,_,v){const{x:S,y:E,z}=_.projectTilePoint(m.x,m.y,c);if(!v)return Pn(S,E,z,d);const[k,N,U]=v(m);return Pn(S+k,E+N,z+U,d)}function Pt(m,c,d,_,v,S,E,z){const k=Ot(m.sub(c)._unit()._add(m),z,v,E,S);return o.v.sub(k,d,k),o.v.normalize(k,k),o.v.scaleAndAdd(k,d,k,_)}function Zt(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se,re,ne){const de=_?m-c:m+c;let ye=de>0?1:-1,xe=0;_&&(ye*=-1,xe=Math.PI),ye<0&&(xe+=Math.PI);let ce=z+E+(ye>0?0:1)|0,pe=v,we=v,Ce=0,Ee=0;const Le=Math.abs(de),nt=[],$e=[];let Je=S,Oe=Je;const tt=()=>Pt(Oe,Je,we,Le-Ce+1,U,X,se,re.canonical);for(;Ce+Ee<=Le;){if(ce+=ye,ce<z||ce>=k)return null;if(we=pe,Oe=Je,nt.push(we),Q&&$e.push(Oe),Je=new o.P(N.getx(ce),N.gety(ce)),pe=$[ce],!pe){const rn=Ot(Je,re.canonical,U,se,X);pe=rn[3]>0?$[ce]=rn:tt()}Ce+=Ee,Ee=o.v.distance(we,pe)}ae&&X&&($[ce]&&(pe=tt(),Ee=o.v.distance(we,pe)),$[ce]=pe);const Ze=(Le-Ce)/Ee,st=Je.sub(Oe)._mult(Ze)._add(Oe),be=o.v.sub([],pe,we),Fe=o.v.scaleAndAdd([],we,be,Ze);let mt=[0,0,1],ct=be[0],Wt=be[1];if(ne&&(mt=se.upVector(re.canonical,st.x,st.y),mt[0]!==0||mt[1]!==0||mt[2]!==1)){const rn=[mt[2],0,-mt[0]],Vt=o.v.cross([],mt,rn);o.v.normalize(rn,rn),o.v.normalize(Vt,Vt),ct=o.v.dot(be,rn),Wt=o.v.dot(be,Vt)}if(d){const rn=o.v.cross([],mt,be);o.v.normalize(rn,rn),o.v.scaleAndAdd(Fe,Fe,rn,d*ye)}const jt=xe+Math.atan2(Wt,ct);return nt.push(Fe),Q&&$e.push(st),{point:Fe,angle:jt,path:nt,tilePath:$e,up:mt}}function gt(m,c){const d=c.length,_=d+4*m;c.resize(_),c.float32.fill(-1/0,4*d,4*_)}function In(m,c,d){const _=c[0],v=c[1];return m[0]=d[0]*_+d[4]*v+d[12],m[1]=d[1]*_+d[5]*v+d[13],m[3]=d[3]*_+d[7]*v+d[15],m}const na=(m,c,d)=>(1-d)*m+d*c,on=m=>m*m*m*m*m;class Kn{constructor(c,d,_,v,S,E,z){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=c||0,this._maxZoom=d||22,this._minPitch=_??0,this._maxPitch=v??60,this.setProjection(E),this.setMaxBounds(z),this.width=0,this.height=0,this._center=new o.L(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ra,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Xr,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const c=new Kn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(c,d=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(c||_)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return o.p(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=o.o(this.projectionOptions);const _=!M(d,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setOrthographicProjectionAtLowPitch(c){return this._orthographicProjectionAtLowPitch!==c&&(this._orthographicProjectionAtLowPitch=c,this._calcMatrices(),!0)}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.o({name:"mercator"});const d=c!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.b(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return o.w(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const d=-c*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=o.h.create(),o.h.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const d=o.c(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=o.d(c),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const d=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){const c=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&c===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||c===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const _=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&_.exaggeration()&&this._centerAltitudeValidForExaggeration!==_.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*_.exaggeration(),this._centerAltitudeValidForExaggeration=_.exaggeration()):(this._centerAltitude=c||0,this._centerAltitudeValidForExaggeration=_.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let v=0,S=0;for(let E=0;E<d.length;E++){const z=new o.P(d[E][0]*this.width,_+d[E][1]*(this.height-_)),k=c.pointCoordinate(z);if(!k)continue;const N=1/Math.hypot(k[0]-this._camera.position[0],k[1]-this._camera.position[1]);v+=k[3]*N,S+=N}return S===0?NaN:v/S}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*d,v=this._mercatorZfromZoom(c),S=this._mercatorZfromZoom(this._maxZoom),E=Math.max(v-_,S);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let _;_=c.z<this._camera.position[2]?[d.x,d.y,d.z]:[c.x,c.y,c.z];const v=o.v.length(o.v.sub([],this._camera.position,_));return o.c(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let d=!1;if(c.orientation&&!o.q.exactEquals(c.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(c.orientation)),c.position){const _=[c.position.x,c.position.y,c.position.z];o.v.exactEquals(_,this._camera.position)||(this._setCameraPosition(_),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,d=new Ua;return d.position=new o.M(c[0],c[1],c[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(c){if(!o.q.length(c))return!1;o.q.normalize(c,c);const d=o.v.transformQuat([],[0,0,-1],c),_=o.v.transformQuat([],[0,-1,0],c);if(_[2]<0)return!1;const v=mr(d,_);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(c){const d=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;c[2]=o.c(c[2],v/_,v/d),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,d,_){this._unmodified=!1,this._edgeInsets.interpolate(c,d,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const d=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(c){const d=[new o.U(0,c)];if(this.renderWorldCopies){const _=this.pointCoordinate(new o.P(0,0)),v=this.pointCoordinate(new o.P(this.width,0)),S=this.pointCoordinate(new o.P(this.width,this.height)),E=this.pointCoordinate(new o.P(0,this.height)),z=Math.floor(Math.min(_.x,v.x,S.x,E.x)),k=Math.floor(Math.max(_.x,v.x,S.x,E.x)),N=1;for(let U=z-N;U<=k+N;U++)U!==0&&d.push(new o.U(U,c))}return d}isLODDisabled(c){return(!c||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCoverForShadows(c,d,_){let v=[];if(d[0]===0&&d[1]===0)return v;for(const E of c){const z=E.canonical,k=E.overscaledZ,N=E.wrap,U=1<<z.z,$=z.x+1<U,X=z.x>0,Q=z.y+1<U,ae=z.y>0,se=E.wrap-(X?0:1),re=E.wrap+($?0:1),ne=X?z.x-1:U-1,de=$?z.x+1:0;d[0]<0?(v.push(new o.O(k,re,z.z,de,z.y)),d[1]<0&&Q&&(v.push(new o.O(k,N,z.z,z.x,z.y+1)),v.push(new o.O(k,re,z.z,de,z.y+1))),d[1]>0&&ae&&(v.push(new o.O(k,N,z.z,z.x,z.y-1)),v.push(new o.O(k,re,z.z,de,z.y-1)))):d[0]>0?(v.push(new o.O(k,se,z.z,ne,z.y)),d[1]<0&&Q&&(v.push(new o.O(k,N,z.z,z.x,z.y+1)),v.push(new o.O(k,se,z.z,ne,z.y+1))),d[1]>0&&ae&&(v.push(new o.O(k,N,z.z,z.x,z.y-1)),v.push(new o.O(k,se,z.z,ne,z.y-1)))):d[1]<0&&Q?v.push(new o.O(k,N,z.z,z.x,z.y+1)):ae&&v.push(new o.O(k,N,z.z,z.x,z.y-1))}if(v.length>1){v.sort((k,N)=>k.overscaledZ-N.overscaledZ||k.wrap-N.wrap||k.canonical.z-N.canonical.z||k.canonical.x-N.canonical.x||k.canonical.y-N.canonical.y);let E=0,z=0;for(;z<v.length;)v[z].equals(v[E])?++z:v[++E]=v[z++];v.length=E+1}const S=[];for(const E of v)v.some(z=>E.isChildOf(z))||S.push(E);return v=S.filter(E=>!c.some(z=>!!(E.overscaledZ<_&&z.isChildOf(E))||E.equals(z)||E.isChildOf(z))),v}coveringTiles(c){let d=this.coveringZoomLevel(c);const _=d,v=this.elevation&&this.elevation.exaggeration(),S=v&&!c.isTerrainDEM,E=this.projection.name==="mercator";if(c.minzoom!==void 0&&d<c.minzoom)return[];c.maxzoom!==void 0&&d>c.maxzoom&&(d=c.maxzoom);const z=this.locationCoordinate(this.center),k=this.center.lat,N=1<<d,U=[N*z.x,N*z.y,0],$=this.projection.name==="globe",X=!$,Q=o.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,X),ae=$?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),se=N*o.b(1,this.center.lat),re=this._camera.position[2]/o.b(1,this.center.lat),ne=[N*ae.x,N*ae.y,re*(X?1:se)],de=$||v,ye=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),xe=this.isLODDisabled(!0)?d:0;let ce;if(this._elevation&&c.isTerrainDEM)ce=1e4*this._elevation.exaggeration();else if(this._elevation){const be=this._elevation.getMinMaxForVisibleTiles();ce=be?be.max:this._centerAltitude}else ce=this._centerAltitude;const pe=c.isTerrainDEM?-ce:this._elevation?this._elevation.getMinElevationBelowMSL():0,we=this.projection.isReprojectedInTileSpace?o.r(this):1,Ce=be=>{const mt=new o.M(be.x+25e-6,be.y,be.z),ct=new o.M(be.x,be.y+25e-6,be.z),Wt=be.toLngLat(),jt=mt.toLngLat(),rn=ct.toLngLat(),Vt=this.locationCoordinate(Wt),pn=this.locationCoordinate(jt),fn=this.locationCoordinate(rn),Kt=Math.hypot(pn.x-Vt.x,pn.y-Vt.y),en=Math.hypot(fn.x-Vt.x,fn.y-Vt.y);return Math.sqrt(Kt*en)*we/25e-6},Ee=be=>{const Fe=ce,mt=pe;return{aabb:o.y(this,N,0,0,0,be,mt,Fe,this.projection),zoom:0,x:0,y:0,minZ:mt,maxZ:Fe,wrap:be,fullyVisible:!1}},Le=[];let nt=[];const $e=d,Je=c.reparseOverscaled?_:d,Oe=be=>be*be,tt=Oe((re-this._centerAltitude)*se),Ze=be=>{if(!this._elevation||!be.tileID||!E)return;const Fe=this._elevation.getMinMaxForTile(be.tileID),mt=be.aabb;Fe?(mt.min[2]=Fe.min,mt.max[2]=Fe.max,mt.center[2]=(mt.min[2]+mt.max[2])/2):(be.shouldSplit=st(be),be.shouldSplit||(mt.min[2]=mt.max[2]=mt.center[2]=this._centerAltitude))},st=be=>{if(be.zoom<xe)return!0;if(be.zoom===$e)return!1;if(be.shouldSplit!=null)return be.shouldSplit;const Fe=be.aabb.distanceX(ne),mt=be.aabb.distanceY(ne);let ct=tt,Wt=1;if($){ct=Oe(be.aabb.distanceZ(ne));const Vt=Math.pow(2,be.zoom),pn=o.l((be.y+1)/Vt),fn=o.l(be.y/Vt),Kt=Math.min(Math.max(k,pn),fn),en=o.a0(Kt)/o.a0(k);if(Wt=Kt===k?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,en/this._mercatorScaleRatio),this.zoom<=o.Z&&be.zoom===$e-1&&en>=.9)return!0}else if(S&&(ct=Oe(be.aabb.distanceZ(ne)*se)),this.projection.isReprojectedInTileSpace&&_<=5){const Vt=Math.pow(2,be.zoom),pn=Ce(new o.M((be.x+.5)/Vt,(be.y+.5)/Vt));Wt=pn>.85?1:pn}const jt=Fe*Fe+mt*mt+ct,rn=Oe((1<<$e-be.zoom)*ye*Wt*((Vt,pn)=>{if(pn*Oe(.707)<Vt)return 1;const fn=Math.sqrt(pn/Vt);return fn/(1.4144271570014144+(Math.pow(1.1,fn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ct,tt),jt));return jt<rn};if(this.renderWorldCopies)for(let be=1;be<=3;be++)Le.push(Ee(-be)),Le.push(Ee(be));for(Le.push(Ee(0));Le.length>0;){const be=Le.pop(),Fe=be.x,mt=be.y;let ct=be.fullyVisible;const Wt=()=>this.projection.name==="globe"&&(be.y===0||be.y===(1<<be.zoom)-1);if(!ct){let jt=de?be.aabb.intersects(Q):be.aabb.intersectsFlat(Q);if(jt===0&&Wt()){const rn=new o.t(be.zoom,Fe,mt);jt=o.x(this,N,rn,!0).intersects(Q)}if(jt===0)continue;ct=jt===2}if(be.zoom!==$e&&st(be))for(let jt=0;jt<4;jt++){const rn=(Fe<<1)+jt%2,Vt=(mt<<1)+(jt>>1),pn={aabb:E?be.aabb.quadrant(jt):o.y(this,N,be.zoom+1,rn,Vt,be.wrap,be.minZ,be.maxZ,this.projection),zoom:be.zoom+1,x:rn,y:Vt,wrap:be.wrap,fullyVisible:ct,tileID:void 0,shouldSplit:void 0,minZ:be.minZ,maxZ:be.maxZ};S&&!$&&(pn.tileID=new o.O(be.zoom+1===$e?Je:be.zoom+1,be.wrap,be.zoom+1,rn,Vt),Ze(pn)),Le.push(pn)}else{const jt=be.zoom===$e?Je:be.zoom;if(c.minzoom&&c.minzoom>jt)continue;if(!ct){let fn=de?be.aabb.intersectsPrecise(Q):be.aabb.intersectsPreciseFlat(Q);if(fn===0&&Wt()){const Kt=new o.t(be.zoom,Fe,mt);fn=o.x(this,N,Kt,!0).intersectsPrecise(Q)}if(fn===0)continue}const rn=U[0]-(.5+Fe+(be.wrap<<be.zoom))*(1<<d-be.zoom),Vt=U[1]-.5-mt,pn=be.tileID?be.tileID:new o.O(jt,be.wrap,be.zoom,Fe,mt);nt.push({tileID:pn,distanceSq:rn*rn+Vt*Vt})}}if(this.fogCullDistSq){const be=this.fogCullDistSq,Fe=this.horizonLineFromTop();nt=nt.filter(mt=>{const ct=[0,0,0,1],Wt=[o.J,o.J,0,1],jt=this.calculateFogTileMatrix(mt.tileID.toUnwrapped());o.e.transformMat4(ct,ct,jt),o.e.transformMat4(Wt,Wt,jt);const rn=o.e.min([],ct,Wt),Vt=o.e.max([],ct,Wt),pn=o.z(rn,Vt);if(pn===0)return!0;let fn=!1;const Kt=this._elevation;if(Kt&&pn>be&&Fe!==0){const en=this.calculateProjMatrix(mt.tileID.toUnwrapped());let Jn;c.isTerrainDEM||(Jn=Kt.getMinMaxForTile(mt.tileID)),Jn||(Jn={min:pe,max:ce});const An=o._(this.rotation),Pa=[An[0]*o.J,An[1]*o.J,Jn.max];o.v.transformMat4(Pa,Pa,en),fn=(1-Pa[1])*this.height*.5<Fe}return pn<be||fn})}return nt.sort((be,Fe)=>be.distanceSq-Fe.distanceSq).map(be=>be.tileID)}resize(c,d){this.width=c,this.height=d,this.pixelsToGLUnits=[2/c,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const d=o.c(c.lat,-o.A,o.A),_=this.projection.project(c.lng,d);return new o.P(_.x*this.worldSize,_.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.b(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,d){let _,v;const S=this.centerPoint;if(this.projection.name==="globe"){const z=this.worldSize;_=(d.x-S.x)/z,v=(d.y-S.y)/z}else{const z=this.pointCoordinate(d),k=this.pointCoordinate(S);_=z.x-k.x,v=z.y-k.y}const E=this.locationCoordinate(c);this.setLocation(new o.M(E.x-_,E.y-v))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,d){const _=d?o.b(d,c.lat):void 0,v=this.projection.project(c.lng,c.lat);return new o.M(v.x,v.y,_)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,d){const _=d??this._centerAltitude,v=[c.x,c.y,0,1],S=[c.x,c.y,1,1];o.e.transformMat4(v,v,this.pixelMatrixInverse),o.e.transformMat4(S,S,this.pixelMatrixInverse);const E=S[3];o.e.scale(v,v,1/v[3]),o.e.scale(S,S,1/E);const z=v[2],k=S[2];return{p0:v,p1:S,t:z===k?0:(_-z)/(k-z)}}screenPointToMercatorRay(c){const d=[c.x,c.y,0,1],_=[c.x,c.y,1,1];return o.e.transformMat4(d,d,this.pixelMatrixInverse),o.e.transformMat4(_,_,this.pixelMatrixInverse),o.e.scale(d,d,1/d[3]),o.e.scale(_,_,1/_[3]),d[2]=o.b(d[2],this._center.lat)*this.worldSize,_[2]=o.b(_[2],this._center.lat)*this.worldSize,o.e.scale(d,d,1/this.worldSize),o.e.scale(_,_,1/this.worldSize),new o.R([d[0],d[1],d[2]],o.v.normalize([],o.v.sub([],_,d)))}rayIntersectionCoordinate(c){const{p0:d,p1:_,t:v}=c,S=o.b(d[2],this._center.lat),E=o.b(_[2],this._center.lat);return new o.M(o.n(d[0],_[0],v)/this.worldSize,o.n(d[1],_[1],v)/this.worldSize,o.n(S,E,v))}pointCoordinate(c,d=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,d)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let d=this.projection.pointCoordinate3D(this,c.x,c.y);if(d)return new o.M(d[0],d[1],d[2]);let _=0,v=this.horizonLineFromTop();if(c.y>v)return this.pointCoordinate(c);const S=.02*v,E=c.clone();for(let z=0;z<10&&v-_>S;z++){E.y=o.n(_,v,.66);const k=this.projection.pointCoordinate3D(this,E.x,E.y);k?(v=E.y,d=k):_=E.y}return d?new o.M(d[0],d[1],d[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}isPointOnSurface(c){if(c.y<0||c.y>this.height||c.x<0||c.x>this.width)return!1;if(this.elevation||this.zoom>=o.G)return!this.isPointAboveHorizon(c);const d=this.pointCoordinate(c);return d.y>=0&&d.y<=1}_coordinatePoint(c,d){const _=d&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,v=[c.x*this.worldSize,c.y*this.worldSize,_+c.toAltitude(),1];return o.e.transformMat4(v,v,this.pixelMatrix),v[3]>0?new o.P(v[0]/v[3],v[1]/v[3]):new o.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:d}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,S=this.pointLocation3D(new o.P(d,c)),E=this.pointLocation3D(new o.P(v,c)),z=this.pointLocation3D(new o.P(v,_)),k=this.pointLocation3D(new o.P(d,_));let N=Math.min(S.lng,E.lng,z.lng,k.lng),U=Math.max(S.lng,E.lng,z.lng,k.lng),$=Math.min(S.lat,E.lat,z.lat,k.lat),X=Math.max(S.lat,E.lat,z.lat,k.lat);const Q=Math.pow(2,-this.zoom)/16*270,ae=this.projection.name==="globe"?1:4,se=(re,ne,de,ye,xe)=>{const ce=(re+de)/2,pe=(ne+ye)/2,we=new o.P(ce,pe),{lng:Ce,lat:Ee}=this.pointLocation3D(we),Le=Math.max(0,N-Ce,$-Ee,Ce-U,Ee-X);N=Math.min(N,Ce),U=Math.max(U,Ce),$=Math.min($,Ee),X=Math.max(X,Ee),(xe<ae||Le>Q)&&(se(re,ne,ce,pe,xe+1),se(ce,pe,de,ye,xe+1))};if(se(d,c,v,c,1),se(v,c,v,_,1),se(v,_,d,_,1),se(d,_,d,c,1),this.projection.name==="globe"){const[re,ne]=o.B(this);re?(X=90,U=180,N=-180):ne&&($=-90,U=180,N=-180)}return new o.D(new o.L(N,$),new o.L(U,X))}_getBoundsRectangular(c,d){const{top:_,left:v}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,z=new o.P(v,_),k=new o.P(E,_),N=new o.P(E,S),U=new o.P(v,S);let $=this.pointCoordinate(z,c),X=this.pointCoordinate(k,c);const Q=this.pointCoordinate(N,d),ae=this.pointCoordinate(U,d),se=(re,ne)=>(ne.y-re.y)/(ne.x-re.x);return $.y>1&&X.y>=0?$=new o.M((1-ae.y)/se(ae,$)+ae.x,1):$.y<0&&X.y<=1&&($=new o.M(-ae.y/se(ae,$)+ae.x,0)),X.y>1&&$.y>=0?X=new o.M((1-Q.y)/se(Q,X)+Q.x,1):X.y<0&&$.y<=1&&(X=new o.M(-Q.y/se(Q,X)+Q.x,0)),new o.D().extend(this.coordinateLocation($)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(Q))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=c.visibleDemTiles.reduce((_,v)=>{if(v.dem){const S=v.dem.tree;_.min=Math.min(_.min,S.minimums[0]),_.max=Math.max(_.max,S.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*c.exaggeration(),d.max*c.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,_=this.height/2-d*(1-this._horizonShift);return c?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-o.A,this.maxLat=o.A,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.E(this.minLng)*this.tileSize,this.worldMaxX=o.E(this.maxLng)*this.tileSize,this.worldMinY=o.H(this.maxLat)*this.tileSize,this.worldMaxY=o.H(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,d){return this.projection.createTileMatrix(this,d,c)}calculateDistanceTileData(c){const d=c.key,_=this._distanceTileDataCache;if(_[d])return _[d];const v=c.canonical,S=1/this.height,E=this.cameraWorldSize,z=E/this.zoomScale(v.z),k=(v.x+Math.pow(2,v.z)*c.wrap)*z,N=v.y*z,U=this.point;U.x*=E/this.worldSize,U.y*=E/this.worldSize;const $=this.angle,X=Math.sin(-$),Q=-Math.cos(-$);return _[d]={bearing:[X,Q],center:[(U.x-k)*S,(U.y-N)*S],scale:z/o.J*S},_[d]}calculateFogTileMatrix(c){const d=c.key,_=this._fogTileMatrixCache;if(_[d])return _[d];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return o.m.multiply(v,this.worldToFogMatrix,v),_[d]=new Float32Array(v),_[d]}calculateProjMatrix(c,d=!1,_=!1){const v=c.key;let S;if(S=_?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,S[v])return S[v];const E=this.calculatePosMatrix(c,this.worldSize);let z;return z=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:_?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,o.m.multiply(E,z,E),S[v]=new Float32Array(E),S[v]}calculatePixelsToTileUnitsMatrix(c){const d=c.tileID.key,_=this._pixelsToTileUnitsCache;if(_[d])return _[d];const v=o.K(c,this);return _[d]=v,_[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const c=1/this.worldSize,d=o.m.fromScaling([],[c,c,c]);return o.m.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const d=o.b(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(d),v=this._camera.forward(),S=o.b(1,this._center.lat);_[2]/=S,v[2]/=S,o.v.normalize(v,v);const E=c.raycast(_,v,c.exaggeration());if(E){const z=o.v.scaleAndAdd([],_,v,E),k=new o.M(z[0],z[1],o.b(z[2],o.l(z[1]))),N=(k.z+o.v.length([k.x-_[0],k.y-_[1],k.z-_[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(N),this._centerAltitude=k.toAltitude(),this._center=this.coordinateLocation(k),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const d=this._elevation,_=o.b(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(_),S=d.getAtPointOrZero(new o.M(...v)),E=this.pixelsPerMeter/this.worldSize*S,z=this._minimumHeightOverTerrain(),k=v[2]-E;if(k<=z)if(k<0||c){const N=this.locationCoordinate(this._center,this._centerAltitude),U=[v[0],v[1],N.z-v[2]],$=o.v.length(U);U[2]-=(z-k)/this._pixelsPerMercatorPixel;const X=o.v.length(U);if(X===0)return;o.v.scale(U,U,$/X*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],N.z*this._pixelsPerMercatorPixel-U[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const X=this.center;return X.lat=o.c(X.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(X.lng=o.c(X.lng,this.minLng,this.maxLng)),this.center=X,void(this._constraining=!1)}const d=this._unmodified,{x:_,y:v}=this.point;let S=0,E=_,z=v;const k=this.width/2,N=this.height/2,U=this.worldMinY*this.scale,$=this.worldMaxY*this.scale;if(v-N<U&&(z=U+N),v+N>$&&(z=$-N),$-U<this.height&&(S=Math.max(S,this.height/($-U)),z=($+U)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const X=this.worldMinX*this.scale,Q=this.worldMaxX*this.scale,ae=this.worldSize/2-(X+Q)/2;E=(_+ae+this.worldSize)%this.worldSize-ae,E-k<X&&(E=X+k),E+k>Q&&(E=Q-k),Q-X<this.width&&(S=Math.max(S,this.width/(Q-X)),E=(Q+X)/2)}E===_&&z===v||(this.center=this.unproject(new o.P(E,z))),S&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,d=this.projection.name==="globe",_=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.b(1,this.center.lat)/o.b(1,o.$));const v=o.N(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,v),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const S=this.projection.zAxisUnit==="meters"?_:1,E=this._camera.getWorldToCamera(this.worldSize,S);let z;const k=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(k[8]=2*-c.x/this.width,k[9]=2*c.y/this.height,this.isOrthographic){let Ee=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Le=Ee*this.aspect,nt=-Le,$e=-Ee;Le-=c.x,nt-=c.x,Ee+=c.y,$e+=c.y,z=this._camera.getCameraToClipOrthographic(nt,Le,$e,Ee,this._nearZ,this._farZ),((Je,Oe,tt,Ze)=>{for(let st=0;st<16;st++)Je[st]=na(Oe[st],tt[st],Ze)})(z,z,k,on(this.pitch>=15?1:this.pitch/15))}else z=k;const N=o.m.mul([],k,E);let U=o.m.mul([],z,E);if(this.projection.isReprojectedInTileSpace){const Ee=this.locationCoordinate(this.center),Le=o.m.identity([]);o.m.translate(Le,Le,[Ee.x*this.worldSize,Ee.y*this.worldSize,0]),o.m.multiply(Le,Le,o.Q(this)),o.m.translate(Le,Le,[-Ee.x*this.worldSize,-Ee.y*this.worldSize,0]),o.m.multiply(U,U,Le),o.m.multiply(N,N,Le),this.inverseAdjustmentMatrix=o.S(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=o.m.scale([],U,[this.worldSize,this.worldSize,this.worldSize/S,1]),this.projMatrix=U,this.invProjMatrix=o.m.invert(new Float64Array(16),this.projMatrix),d){const Ee=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Ee[8]=2*-c.x/this.width,Ee[9]=2*c.y/this.height,this.expandedFarZProjMatrix=o.m.mul([],Ee,E)}else this.expandedFarZProjMatrix=this.projMatrix;const $=o.m.invert([],z);this.frustumCorners=o.T.fromInvProjectionMatrix($,this.horizonLineFromTop(),this.height),this.cameraFrustum=o.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const X=new Float32Array(16);o.m.identity(X),o.m.scale(X,X,[1,-1,1]),o.m.rotateX(X,X,this._pitch),o.m.rotateZ(X,X,this.angle);const Q=o.m.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=o.m.clone(Q);const ae=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Q[8]=2*-c.x/this.width,Q[9]=2*(c.y+ae)/this.height,this.skyboxMatrix=o.m.multiply(X,Q,X);const se=this.point,re=se.x,ne=se.y,de=this.width%2/2,ye=this.height%2/2,xe=Math.cos(this.angle),ce=Math.sin(this.angle),pe=re-Math.round(re)+xe*de+ce*ye,we=ne-Math.round(ne)+xe*ye+ce*de,Ce=new Float64Array(U);if(o.m.translate(Ce,Ce,[pe>.5?pe-1:pe,we>.5?we-1:we,0]),this.alignedProjMatrix=Ce,U=o.m.create(),o.m.scale(U,U,[this.width/2,-this.height/2,1]),o.m.translate(U,U,[1,-1,0]),this.labelPlaneMatrix=U,U=o.m.create(),o.m.scale(U,U,[1,-1,1]),o.m.translate(U,U,[-1,-1,0]),o.m.scale(U,U,[2/this.width,2/this.height,1]),this.glCoordMatrix=U,this.pixelMatrix=o.m.multiply(new Float64Array(16),this.labelPlaneMatrix,N),this._calcFogMatrices(),this._distanceTileDataCache={},U=o.m.invert(new Float64Array(16),this.pixelMatrix),!U)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=U,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.V(this);const Ee=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.v.transformMat4(Ee,Ee,E),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=U;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,_=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,S=[c,c,d];o.v.scale(S,S,v),o.v.scale(_,_,-1),o.v.multiply(_,_,S);const E=o.m.create();o.m.translate(E,E,_),o.m.scale(E,E,S),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,d,v)}_computeCameraPosition(c){const d=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),v=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-c/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-_[0]*S,v.y/this.worldSize-_[1]*S,c/this.worldSize*this._centerAltitude-_[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],v=c[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(S=Math.min((d-_)/v,1)),this._camera.position=o.v.scaleAndAdd([],this._camera.position,c,S),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,d=this._camera.forward(),{pitch:_,bearing:v}=this._camera.getPitchBearing(),S=o.b(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.d(this._maxPitch)),z=Math.max((c[2]-S)/Math.cos(_),E),k=this._zoomFromMercatorZ(z);o.v.scaleAndAdd(c,c,d,z),this._pitch=o.c(_,o.d(this.minPitch),o.d(this.maxPitch)),this.angle=o.w(v,-Math.PI,Math.PI),this._setZoom(o.c(k,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.M(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}zoomFromMercatorZAdjusted(c){let d=0,_=o.G,v=0,S=1/0;for(;_-d>1e-6&&_>d;){const E=d+.5*(_-d),z=this.tileSize*Math.pow(2,E),k=this.getCameraToCenterDistance(this.projection,E,z),N=this.scaleZoom(k/(c*this.tileSize)),U=Math.abs(E-N);U<S&&(S=U,v=E),E<N?d=E:_=E}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.X("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,d){const _=Math.min(c.x,d.x),v=Math.max(c.x,d.x),S=Math.min(c.y,d.y),E=Math.max(c.y,d.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const z=[new o.P(_,S),new o.P(v,E),new o.P(_,E),new o.P(v,S)],k=this.renderWorldCopies?-3:0,N=this.renderWorldCopies?4:1;for(const U of z){const $=this.pointRayIntersection(U);if($.t<0)return!0;const X=this.rayIntersectionCoordinate($);if(X.x<k||X.y<0||X.x>N||X.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.Y(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.P(0,0),new o.P(this.width,this.height))}zoomDeltaToMovement(c,d){const _=o.v.length(o.v.sub([],this._camera.position,c)),v=this._zoomFromMercatorZ(_)+d;return _-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const c=function([d,_,v],S){const E=[d,_,v,1];o.e.transformMat4(E,E,S);const z=E[3]=Math.max(E[3],1e-6);return E[0]/=z,E[1]/=z,E[2]/=z,E}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.P(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,c))}}getCameraToCenterDistance(c,d=this.zoom,_=this.worldSize){const v=o.N(c,d,this.width,this.height,1024),S=c.pixelSpaceConversion(this.center.lat,_,v);let E=.5/Math.tan(.5*this._fov)*this.height*S;return this.isOrthographic&&(E=na(1,E,on(this.pitch>=15?1:this.pitch/15))),E}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.m.multiply(c,c,this.globeMatrix),c}getFrustum(c){return o.F.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,this.projection.zAxisUnit==="meters")}}function Da(m){const{userImage:c}=m;return!!(c&&c.render&&c.render())&&(m.data.replace(new Uint8Array(c.data.buffer)),!0)}class ka extends o.a6{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(c){this.images[c]={},this.loaded[c]=!1,this.updatedImages[c]={},this.patterns[c]={},this.callbackDispatchedThisFrame[c]={},this.atlasImage[c]=new o.a5({width:1,height:1})}isLoaded(){for(const c in this.loaded)if(!this.loaded[c])return!1;return!0}setLoaded(c,d){if(this.loaded[d]!==c&&(this.loaded[d]=c,c)){for(const{ids:_,callback:v}of this.requestors)this._notify(_,d,v);this.requestors=[]}}hasImage(c,d){return!!this.getImage(c,d)}getImage(c,d){return this.images[d][c]}addImage(c,d,_){this._validate(c,_)&&(this.images[d][c]=_)}_validate(c,d){let _=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new o.a7(new Error(`Image "${c}" has invalid "stretchX" value`))),_=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new o.a7(new Error(`Image "${c}" has invalid "stretchY" value`))),_=!1),this._validateContent(d.content,d)||(this.fire(new o.a7(new Error(`Image "${c}" has invalid "content" value`))),_=!1),_}_validateStretch(c,d){if(!c)return!0;let _=0;for(const v of c){if(v[0]<_||v[1]<v[0]||d<v[1])return!1;_=v[1]}return!0}_validateContent(c,d){return!(c&&(c.length!==4||c[0]<0||d.data.width<c[0]||c[1]<0||d.data.height<c[1]||c[2]<0||d.data.width<c[2]||c[3]<0||d.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,d,_){_.version=this.images[d][c].version+1,this.images[d][c]=_,this.updatedImages[d][c]=!0}removeImage(c,d){const _=this.images[d][c];delete this.images[d][c],delete this.patterns[d][c],_.userImage&&_.userImage.onRemove&&_.userImage.onRemove()}listImages(c){return Object.keys(this.images[c])}getImages(c,d,_){let v=!0;const S=!!this.loaded[d];if(!S)for(const E of c)this.images[d][E]||(v=!1);S||v?this._notify(c,d,_):this.requestors.push({ids:c,scope:d,callback:_})}getUpdatedImages(c){return this.updatedImages[c]}_notify(c,d,_){const v={};for(const S of c){this.images[d][S]||this.fire(new o.a8("styleimagemissing",{id:S}));const E=this.images[d][S];E?v[S]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:o.X(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}_(null,v)}getPixelSize(c){const{width:d,height:_}=this.atlasImage[c];return{width:d,height:_}}getPattern(c,d){const _=this.patterns[d][c],v=this.getImage(c,d);if(!v)return null;if(_&&_.position.version===v.version)return _.position;if(_)_.position.version=v.version;else{const S={w:v.data.width+2,h:v.data.height+2,x:0,y:0},E=new o.ab(S,v);this.patterns[d][c]={bin:S,position:E}}return this._updatePatternAtlas(d),this.patterns[d][c].position}bind(c,d){const _=c.gl;let v=this.atlasTexture[d];v?this.dirty&&(v.update(this.atlasImage[d]),this.dirty=!1):(v=new o.a9(c,this.atlasImage[d],_.RGBA),this.atlasTexture[d]=v),v.bind(_.LINEAR,_.CLAMP_TO_EDGE)}_updatePatternAtlas(c){const d=[];for(const E in this.patterns[c])d.push(this.patterns[c][E].bin);const{w:_,h:v}=o.aa(d),S=this.atlasImage[c];S.resize({width:_||1,height:v||1});for(const E in this.patterns[c]){const{bin:z}=this.patterns[c][E],k=z.x+1,N=z.y+1,U=this.images[c][E].data,$=U.width,X=U.height;o.a5.copy(U,S,{x:0,y:0},{x:k,y:N},{width:$,height:X}),o.a5.copy(U,S,{x:0,y:X-1},{x:k,y:N-1},{width:$,height:1}),o.a5.copy(U,S,{x:0,y:0},{x:k,y:N+X},{width:$,height:1}),o.a5.copy(U,S,{x:$-1,y:0},{x:k-1,y:N},{width:1,height:X}),o.a5.copy(U,S,{x:0,y:0},{x:k+$,y:N},{width:1,height:X})}this.dirty=!0}beginFrame(){for(const c in this.images)this.callbackDispatchedThisFrame[c]={}}dispatchRenderCallbacks(c,d){for(const _ of c){if(this.callbackDispatchedThisFrame[d][_])continue;this.callbackDispatchedThisFrame[d][_]=!0;const v=this.images[d][_];Da(v)&&this.updateImage(_,d,v)}}}const Va=new o.ac({anchor:new o.ad(o.ae.light.anchor),position:new o.af(o.ae.light.position),color:new o.ad(o.ae.light.color),intensity:new o.ad(o.ae.light.intensity)});class Lr extends o.a6{constructor(c,d="flat"){super(),this._transitionable=new o.ag(Va),this.setLight(c,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,d,_={}){this._validate(o.ah,c,_)||(this._transitionable.setTransitionOrValue(c),this.id=d)}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,d,_){return(!_||_.validate!==!1)&&o.ai(this,c.call(o.aj,o.ak({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.ae})))}}const ms=new o.ac({source:new o.ad(o.ae.terrain.source),exaggeration:new o.ad(o.ae.terrain.exaggeration)});let Ga=class extends o.a6{constructor(m,c,d,_){super(),this.scope=d,this._transitionable=new o.ag(ms,d,_),this._transitionable.setTransitionOrValue(m,_),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=c}get(){return this._transitionable.serialize()}set(m,c){this._transitionable.setTransitionOrValue(m,c)}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}getExaggeration(m){return this._transitioning.possiblyEvaluate(new o.al(m)).get("exaggeration")}isZoomDependent(){const m=this._transitionable._values.exaggeration;return m!=null&&m.value!=null&&m.value.expression!=null&&m.value.expression instanceof o.am}};const gs=45,Dr=65,as=.05;function hi(m,c,d,_){const v=o.an(gs,Dr,d),[S,E]=yc(m,_);let z=1-Math.min(1,Math.exp((c-S)/(E-S)*-6));return z*=z*z,z=Math.min(1,1.00747*z),z*v*m.alpha}function yc(m,c){const d=.5/Math.tan(.5*c);return[m.range[0]+d,m.range[1]+d]}function Xc(m,c,d,_,v){const S=o.v.transformMat4([],[c,d,_],v.mercatorFogMatrix);return hi(m,o.v.length(S),v.pitch,v._fov)}function Hl(m,c,d,_,v,S,E){const z=[[d,_,0],[v,_,0],[v,S,0],[d,S,0]];let k=Number.MAX_VALUE,N=-Number.MAX_VALUE;for(const U of z){const $=o.v.transformMat4([],U,c),X=o.v.length($);k=Math.min(k,X),N=Math.max(N,X)}return[hi(m,k,E.pitch,E._fov),hi(m,N,E.pitch,E._fov)]}const Fo=new o.ac({range:new o.ad(o.ae.fog.range),color:new o.ad(o.ae.fog.color),"high-color":new o.ad(o.ae.fog["high-color"]),"space-color":new o.ad(o.ae.fog["space-color"]),"horizon-blend":new o.ad(o.ae.fog["horizon-blend"]),"star-intensity":new o.ad(o.ae.fog["star-intensity"]),"vertical-range":new o.ad(o.ae.fog["vertical-range"])});class Jc extends o.a6{constructor(c,d){super(),this._transitionable=new o.ag(Fo),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=d}get state(){const c=this._transform,d=c.projection.name==="globe",_=o.ao(c.zoom),v=this.properties.get("range"),S=[.5,3];return{range:d?[o.n(S[0],v[0],_),o.n(S[1],v[1],_)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,d={}){if(this._validate(o.ap,c,d))return;const _=o.ak({},c);for(const v of Object.keys(o.ae.fog))_[v]===void 0&&(_[v]=o.ae.fog[v].default);this._transitionable.setTransitionOrValue(_)}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.an(gs,Dr,c))*d.a}getOpacityAtLatLng(c,d){return this._transform.projection.supportsFog?function(_,v,S){const E=o.M.fromLngLat(v),z=S.elevation?S.elevation.getAtPointOrZero(E):0;return Xc(_,E.x,E.y,z,S)}(this.state,c,d):0}getOpacityForTile(c){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(c.toUnwrapped());return Hl(this.state,d,0,0,o.J,o.J,this._transform)}getOpacityForBounds(c,d,_,v,S){return this._transform.projection.supportsFog?Hl(this.state,c,d,_,v,S,this._transform):[1,1]}getFovAdjustedRange(c){return this._transform.projection.supportsFog?yc(this.state,c):[0,1]}isVisibleOnFrustum(c){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const _ of d){const v=c.points[_];let S;if(v[2]>=0)S=v;else{const E=c.points[_-4];S=o.aq(E,v,E[2]/(E[2]-v[2]))}if(Xc(this.state,S[0],S[1],0,this._transform)>=as)return!0}return!1}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,d,_){return(!_||_.validate!==!1)&&o.ai(this,c.call(o.aj,o.ak({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.ae})))}}class jo extends o.a6{constructor(c,d,_,v){super(),this.scope=_,this._options=c,this.properties=new o.ar(d),this._transitionable=new o.ag(d,_,new Map(v)),this._transitionable.setTransitionOrValue(c.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(c){this._transitionable.setTransitionOrValue(this._options.properties,new Map(c))}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(c,d){this._options=c,this._transitionable.setTransitionOrValue(c.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}const Xa=new o.ac({color:new o.ad(o.ae.properties_light_ambient.color),intensity:new o.ad(o.ae.properties_light_ambient.intensity)}),ed=new o.ac({direction:new o.as(o.ae.properties_light_directional.direction),color:new o.ad(o.ae.properties_light_directional.color),intensity:new o.ad(o.ae.properties_light_directional.intensity),"cast-shadows":new o.ad(o.ae.properties_light_directional["cast-shadows"]),"shadow-intensity":new o.ad(o.ae.properties_light_directional["shadow-intensity"])});class Gr{constructor(c,d,_,v){this.screenBounds=c,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(c,d){let _,v;if(c instanceof o.P||typeof c[0]=="number"){const S=o.P.convert(c);_=[S],v=d.isPointAboveHorizon(S)}else{const S=o.P.convert(c[0]),E=o.P.convert(c[1]);_=[S,E],v=o.at(S,E).every(z=>d.isPointAboveHorizon(z))}return new Gr(_,d.getCameraPoint(),v,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return o.at(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const d=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.P(1,1)):this.screenBounds[1],v=o.at(d,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<_.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?v[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(v[3]=this.cameraPoint)),o.au(v,c)}bufferedCameraGeometryGlobe(c){const d=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.P(1,1)):this.screenBounds[1],v=o.at(d,_,c),S=this.cameraPoint.clone();switch(3*((S.y>d.y)+(S.y>_.y))+((S.x>d.x)+(S.x>_.x))){case 0:v[0]=S,v[4]=S.clone();break;case 1:v.splice(1,0,S);break;case 2:v[1]=S;break;case 3:v.splice(4,0,S);break;case 5:v.splice(2,0,S);break;case 6:v[3]=S;break;case 7:v.splice(3,0,S);break;case 8:v[2]=S}return v}containsTile(c,d,_,v=0){const S=c.queryPadding/d._pixelsPerMercatorPixel+1,E=_?this._bufferedCameraMercator(S,d):this._bufferedScreenMercator(S,d);let z=c.tileID.wrap+(E.unwrapped?v:0);const k=E.polygon.map(re=>o.av(c.tileTransform,re,z));if(!o.aw(k,0,0,o.J,o.J))return;z=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const N=this.screenGeometryMercator.polygon.map(re=>o.ax(c.tileTransform,re,z)),U=N.map(re=>new o.P(re[0],re[1])),$=d.getFreeCameraOptions().position||new o.M(0,0,0),X=o.ax(c.tileTransform,$,z),Q=N.map(re=>{const ne=o.v.sub(re,re,X);return o.v.normalize(ne,ne),new o.R(X,ne)}),ae=o.ay(c,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:U,tilespaceRays:Q,bufferedTilespaceGeometry:k,bufferedTilespaceBounds:(se=o.az(k),se.min.x=o.c(se.min.x,0,o.J),se.min.y=o.c(se.min.y,0,o.J),se.max.x=o.c(se.max.x,0,o.J),se.max.y=o.c(se.max.y,0,o.J),se),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:ae};var se}_bufferedScreenMercator(c,d){const _=rs(c);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let v;return v=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),d):{polygon:this.bufferedScreenGeometry(c).map(S=>d.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[_]=v,v}}_bufferedCameraMercator(c,d){const _=rs(c);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let v;return v=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),d):{polygon:this.bufferedCameraGeometry(c).map(S=>d.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[_]=v,v}}_projectAndResample(c,d){const _=function(S,E){const z=o.m.multiply([],E.pixelMatrix,E.globeMatrix),k=[0,-o.aC,0,1],N=[0,o.aC,0,1],U=[0,0,0,1];o.e.transformMat4(k,k,z),o.e.transformMat4(N,N,z),o.e.transformMat4(U,U,z);const $=new o.P(k[0]/k[3],k[1]/k[3]),X=new o.P(N[0]/N[3],N[1]/N[3]),Q=o.aA(S,$)&&k[3]<U[3],ae=o.aA(S,X)&&N[3]<U[3];if(!Q&&!ae)return null;const se=function(we,Ce,Ee){for(let Le=1;Le<we.length;Le++){const nt=$r(Ce.pointCoordinate3D(we[Le-1]).x),$e=$r(Ce.pointCoordinate3D(we[Le]).x);if(Ee<0){if(nt<$e)return{idx:Le,t:-nt/($e-1-nt)}}else if($e<nt)return{idx:Le,t:(1-nt)/($e+1-nt)}}return null}(S,E,Q?-1:1);if(!se)return null;const{idx:re,t:ne}=se;let de=re>1?Zs(S.slice(0,re),E):[],ye=re<S.length?Zs(S.slice(re),E):[];de=de.map(we=>new o.P($r(we.x),we.y)),ye=ye.map(we=>new o.P($r(we.x),we.y));const xe=[...de];xe.length===0&&xe.push(ye[ye.length-1]);const ce=o.n(xe[xe.length-1].y,(ye.length===0?de[0]:ye[0]).y,ne);let pe;return pe=Q?[new o.P(0,ce),new o.P(0,0),new o.P(1,0),new o.P(1,ce)]:[new o.P(1,ce),new o.P(1,1),new o.P(0,1),new o.P(0,ce)],xe.push(...pe),ye.length===0?xe.push(de[0]):xe.push(...ye),{polygon:xe.map(we=>new o.M(we.x,we.y)),unwrapped:!1}}(c,d);if(_)return _;const v=function(S,E){let z=!1,k=-1/0,N=0;for(let $=0;$<S.length-1;$++)S[$].x>k&&(k=S[$].x,N=$);for(let $=0;$<S.length-1;$++){const X=(N+$)%(S.length-1),Q=S[X],ae=S[X+1];Math.abs(Q.x-ae.x)>.5&&(Q.x<ae.x?(Q.x+=1,X===0&&(S[S.length-1].x+=1)):(ae.x+=1,X+1===S.length-1&&(S[0].x+=1)),z=!0)}const U=o.E(E.center.lng);return z&&U<Math.abs(U-1)&&S.forEach($=>{$.x-=1}),{polygon:S,unwrapped:z}}(Zs(c,d).map(S=>new o.P($r(S.x),S.y)),d);return{polygon:v.polygon.map(S=>new o.M(S.x,S.y)),unwrapped:v.unwrapped}}}function Zs(m,c){return o.aB(m,d=>{const _=c.pointCoordinate3D(d);d.x=_.x,d.y=_.y},1/256)}function $r(m){return m<0?1+m%1:m%1}function rs(m){return 100*m|0}function bs(m,c,d,_,v){const S=function(E,z){if(E)return v(E);if(z){m.url&&z.tiles&&m.tiles&&delete m.tiles;const k=o.p(o.ak(z,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);z.vector_layers&&(k.vectorLayers=z.vector_layers,k.vectorLayerIds=k.vectorLayers.map(N=>N.id)),k.tiles=c.canonicalizeTileset(k,m.url),v(null,k)}};return m.url?o.a1(c.transformRequest(c.normalizeSourceURL(m.url,null,d,_),o.a2.Source),S):o.a4.frame(()=>S(null,m))}class qr{constructor(c,d,_){this.bounds=o.D.convert(this.validateBounds(c)),this.minzoom=d||0,this.maxzoom=_||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const d=Math.pow(2,c.z),_=Math.floor(o.E(this.bounds.getWest())*d),v=Math.floor(o.H(this.bounds.getNorth())*d),S=Math.ceil(o.E(this.bounds.getEast())*d),E=Math.ceil(o.H(this.bounds.getSouth())*d);return c.x>=_&&c.x<S&&c.y>=v&&c.y<E}}class Ve extends o.a6{constructor(c,d,_,v){if(super(),this.id=c,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.ak(this,o.p(d,["url","scheme","tileSize","promoteId"])),this._options=o.ak({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new o.aD}load(c){this._loaded=!1,this.fire(new o.a8("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=bs(this._options,this.map._requestManager,d,_,(v,S)=>{this._tileJSONRequest=null,this._loaded=!0,v?(d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new o.a7(v))):S&&(o.ak(this,S),S.bounds&&(this.tileBounds=new qr(S.bounds,this.minzoom,this.maxzoom)),o.aH(S.tiles,this.map._requestManager._customAccessToken),this.fire(new o.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.a8("data",{dataType:"source",sourceDataType:"content"}))),c&&c(v)})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest();const c=o.aE(this.id,this.scope);this.load(()=>this.map.style.clearSource(c))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.ak({},this._options)}loadTile(c,d){const _=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(_,o.a2.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:o.a4.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:c.isExtraShadowCaster};if(v.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired")c.state==="loading"?c.reloadCallback=d:c.request=c.actor.send("reloadTile",v,S.bind(this));else if(c.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",v,S.bind(this),void 0,!0);else{const E=o.aF.call({deduped:this._deduped},v,(z,k)=>{z||!k?S.call(this,z):(v.data={cacheControl:k.cacheControl,expires:k.expires,rawData:k.rawData.slice(0)},c.actor&&c.actor.send("loadTile",v,S.bind(this),void 0,!0))},!0);c.request={cancel:E}}function S(E,z){return delete c.request,c.aborted?d(null):E&&E.status!==404?d(E):(z&&z.resourceTiming&&(c.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&c.setExpiryData(z),c.loadVectorData(z,this.map.painter),o.aG(this.dispatcher),d(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(c){c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id,scope:this.scope}),c.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Xt extends o.a6{constructor(c,d,_,v){super(),this.id=c,this.dispatcher=_,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.ak({type:"raster"},d),o.ak(this,o.p(d,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new o.a8("dataloading",{dataType:"source"})),this._tileJSONRequest=bs(this._options,this.map._requestManager,null,null,(d,_)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new o.a7(d)):_&&(o.ak(this,_),_.bounds&&(this.tileBounds=new qr(_.bounds,this.minzoom,this.maxzoom)),o.aH(_.tiles),this.fire(new o.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.a8("data",{dataType:"source",sourceDataType:"content"}))),c&&c(d)})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest();const c=o.aE(this.id,this.scope);this.load(()=>this.map.style.clearSource(c))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.ak({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,d){const _=o.a4.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);c.request=o.a3(this.map._requestManager.transformRequest(v,o.a2.Tile),(S,E,z,k)=>(delete c.request,c.aborted?(c.state="unloaded",d(null)):S?(c.state="errored",d(S)):E?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:z,expires:k}),c.setTexture(E,this.map.painter),c.state="loaded",o.aG(this.dispatcher),void d(null)):d(null)))}abortTile(c,d){c.request&&(c.request.cancel(),delete c.request),d()}unloadTile(c,d){c.texture&&c.texture instanceof o.a9?(c.destroy(!0),c.texture&&c.texture instanceof o.a9&&this.map.painter.saveTileTexture(c.texture)):c.destroy(),d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}const mi={vector:Ve,raster:Xt,"raster-dem":class extends Xt{constructor(m,c,d,_){super(m,c,d,_),this.type="raster-dem",this.maxzoom=22,this._options=o.ak({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(m,c){const d=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(v,S){v&&(m.state="errored",c(v)),S&&(m.dem=S,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",c(null))}m.request=o.a3(this.map._requestManager.transformRequest(d,o.a2.Tile),(function(v,S,E,z){if(delete m.request,m.aborted)m.state="unloaded",c(null);else if(v)m.state="errored",c(v);else if(S){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:E,expires:z});const k=ImageBitmap&&S instanceof ImageBitmap&&o.aI(),N=1-(S.width-o.aJ(S.width))/2;N<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const U=k?S:o.a4.getImageData(S,N),$={uid:m.uid,coord:m.tileID,source:this.id,scope:this.scope,rawImageData:U,encoding:this.encoding,padding:N};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",$,_.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(m){const c=m.canonical,d=Math.pow(2,c.z),_=(c.x-1+d)%d,v=c.x===0?m.wrap-1:m.wrap,S=(c.x+1+d)%d,E=c.x+1===d?m.wrap+1:m.wrap,z={};return z[new o.O(m.overscaledZ,v,c.z,_,c.y).key]={backfilled:!1},z[new o.O(m.overscaledZ,E,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(z[new o.O(m.overscaledZ,v,c.z,_,c.y-1).key]={backfilled:!1},z[new o.O(m.overscaledZ,m.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},z[new o.O(m.overscaledZ,E,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<d&&(z[new o.O(m.overscaledZ,v,c.z,_,c.y+1).key]={backfilled:!1},z[new o.O(m.overscaledZ,m.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},z[new o.O(m.overscaledZ,E,c.z,S,c.y+1).key]={backfilled:!1}),z}},geojson:class extends o.a6{constructor(m,c,d,_){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(_),this._data=c.data,this._options=o.ak({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const v=o.J/this.tileSize;this.workerOptions=o.ak({source:this.id,scope:this.scope,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*v,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*v,extent:o.J,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.J,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*v,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id,scope:this.scope},c),this}getClusterChildren(m,c){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id,scope:this.scope},c),this}getClusterLeaves(m,c,d,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:m,limit:c,offset:d},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.a8("dataloading",{dataType:"source"})),this._loaded=!1;const m=o.ak({},this.workerOptions);m.scope=this.scope;const c=this._data;typeof c=="string"?(m.request=this.map._requestManager.transformRequest(o.a4.resolveURL(c),o.a2.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(d,_)=>{if(this._loaded=!0,this._pendingLoad=null,d)this.fire(new o.a7(d));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(v.resourceTiming=_.resourceTiming[this.id]),this.fire(new o.a8("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,c){const d=m.actor?"reloadTile":"loadTile";m.actor=this.actor;const _={type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,scope:this.scope,pixelRatio:o.a4.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0};m.request=this.actor.send(d,_,(v,S)=>(delete m.request,m.destroy(),m.aborted?c(null):v?c(v):(m.loadVectorData(S,this.map.painter,d==="reloadTile"),c(null))),void 0,d==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id,scope:this.scope}),m.destroy()}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.ak({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends o.aK{constructor(m,c,d,_){super(m,c,d,_),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const c of m.urls)this.urls.push(this.map._requestManager.transformRequest(c,o.a2.Source).url);o.aL(this.urls,(c,d)=>{this._loaded=!0,c?this.fire(new o.a7(c)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const c=this.video.seekable;m<c.start(0)||m>c.end(0)?this.fire(new o.a7(new o.aM(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,c=m.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.a9(m,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:o.aK,model:class extends o.a6{constructor(m,c,d,_){super(),this.id=m,this.type="model",this.models=[],this._loaded=!1,this._options=c}load(){const m=[];for(const c in this._options.models){const d=this._options.models[c],_=o.aO(this.map._requestManager.transformRequest(d.uri,o.a2.Model).url).then(v=>{if(!v)return;const S=o.aP(v),E=new o.aQ(c,d.position,d.orientation,S);E.computeBoundsAndApplyParent(),this.models.push(E)}).catch(v=>{this.fire(new o.a7(new Error(`Could not load model ${c} from ${d.uri}: ${v.message}`)))});m.push(_)}return Promise.allSettled(m).then(()=>{this._loaded=!0,this.fire(new o.a8("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(c=>{this.fire(new o.a7(new Error(`Could not load models: ${c.message}`)))})}onAdd(m){this.map=m,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(m,c){}serialize(){return{type:"model"}}},"batched-model":class extends o.a6{constructor(m,c,d,_){super(),this.type="batched-model",this.id=m,this.tileSize=512,this._options=c,this.tiles=this._options.tiles,this.maxzoom=c.maxzoom||19,this.minzoom=c.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(_)}onAdd(m){this.map=m,this.load()}load(m){this._loaded=!1,this.fire(new o.a8("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map._worldview;this._tileJSONRequest=bs(this._options,this.map._requestManager,c,d,(_,v)=>{this._tileJSONRequest=null,this._loaded=!0,_?(c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new o.a7(_))):v&&(o.ak(this,v),v.bounds&&(this.tileBounds=new qr(v.bounds,this.minzoom,this.maxzoom)),o.aH(v.tiles,this.map._requestManager._customAccessToken),this.fire(new o.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.a8("data",{dataType:"source",sourceDataType:"content"}))),m&&m(_)})}hasTransition(){return!1}hasTile(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)}loaded(){return this._loaded}loadTile(m,c){const d=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(d,o.a2.Tile),data:void 0,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:m.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(m.actor&&m.state!=="expired")if(m.state==="loading")m.reloadCallback=c;else{if(m.buckets){const S=Object.values(m.buckets);for(const E of S)E.dirty=!0;return void(m.state="loaded")}m.request=m.actor.send("reloadTile",_,v.bind(this))}else m.actor=this.dispatcher.getActor(),m.request=m.actor.send("loadTile",_,v.bind(this),void 0,!0);function v(S,E){return m.aborted?c(null):S&&S.status!==404?c(S):(E&&(E.resourceTiming&&(m.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&m.setExpiryData(E),m.buckets={...m.buckets,...E.buckets}),m.state="loaded",void c(null))}}serialize(){return o.ak({},this._options)}},canvas:class extends o.aK{constructor(m,c,d,_){super(m,c,d,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(S=>typeof S!="number"))||this.fire(new o.a7(new o.aM(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.a7(new o.aM(`sources.${m}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.a7(new o.aM(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.a7(new o.aM(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.a7(new o.aM(`sources.${m}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.a7(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?!m&&!this._playing||this.texture instanceof o.aN||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.a9(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends o.a6{constructor(m,c,d,_){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=c,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.a7(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.a7(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new qr(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),o.ak(this,o.p(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.p(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.a8("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.a8("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new o.a8("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:c,y:d,z:_}=m.canonical;return this._implementation.hasTile({x:c,y:d,z:_})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,c){const{x:d,y:_,z:v}=m.tileID.canonical,S=new AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:d,y:_,z:v},{signal:S.signal})).then((function(E){return delete m.request,m.aborted?(m.state="unloaded",c(null)):E===void 0?(m.state="errored",c(null)):E===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",c(null)):function(z){return z instanceof ImageData||z instanceof HTMLCanvasElement||z instanceof ImageBitmap||z instanceof HTMLImageElement}(E)?(this.loadTileData(m,E),m.state="loaded",void c(null)):(m.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(E=>{E.code!==20&&(m.state="errored",c(E))}),m.request.cancel=()=>S.abort()}loadTileData(m,c){m.setTexture(c,this._map.painter)}unloadTile(m,c){if(m.texture&&m.texture instanceof o.a9?(m.destroy(!0),m.texture&&m.texture instanceof o.a9&&this._map.painter.saveTileTexture(m.texture)):m.destroy(),this._implementation.unloadTile){const{x:d,y:_,z:v}=m.tileID.canonical;this._implementation.unloadTile({x:d,y:_,z:v})}c()}abortTile(m,c){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){const m=o.aE(this.id,this.scope);this._map.style.clearSource(m)}_update(){this.fire(new o.a8("data",{dataType:"source",sourceDataType:"content"}))}}},Ys=function(m,c,d,_){const v=new mi[c.type](m,c,d,_);if(v.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${v.id}`);return o.aR(["load","abort","unload","serialize","prepare"],v),v};function ar(m,c){const d=o.m.identity([]);return o.m.scale(d,d,[.5*m.width,.5*-m.height,1]),o.m.translate(d,d,[1,-1,0]),o.m.multiply(d,d,m.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(d)}function Xs(m,c,d,_,v,S,E,z=!1){const k=m.tilesIn(_,E,z);k.sort(Cs);const N=[];for(const $ of k)N.push({wrappedTileID:$.tile.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(c,d,m._state,$,v,S,ar(m.transform,$.tile.tileID),z)});const U=function($){const X={},Q={};for(const ae of $){const se=ae.queryResults,re=ae.wrappedTileID,ne=Q[re]=Q[re]||{};for(const de in se){const ye=se[de],xe=ne[de]=ne[de]||{},ce=X[de]=X[de]||[];for(const pe of ye)xe[pe.featureIndex]||(xe[pe.featureIndex]=!0,ce.push(pe))}}return X}(N);for(const $ in U)U[$].forEach(X=>{const Q=X.feature,ae=Q.layer;ae&&ae.type!=="background"&&ae.type!=="sky"&&ae.type!=="slot"&&(Q.source=ae.source,ae["source-layer"]&&(Q.sourceLayer=ae["source-layer"]),Q.state=Q.id!==void 0?m.getFeatureState(ae["source-layer"],Q.id):{})});return U}function Ep(m,c){const d=m.getRenderableIds().map(S=>m.getTileByID(S)),_=[],v={};for(let S=0;S<d.length;S++){const E=d[S],z=E.tileID.canonical.key;v[z]||(v[z]=!0,E.querySourceFeatures(_,c))}return _}function Cs(m,c){const d=m.tileID,_=c.tileID;return d.overscaledZ-_.overscaledZ||d.canonical.y-_.canonical.y||d.wrap-_.wrap||d.canonical.x-_.canonical.x}class td{constructor(c){this.style=c}processLayersChanged(){this.layers=[];for(const c in this.style._mergedLayers){const d=this.style._mergedLayers[c];if(d.type==="fill-extrusion")this.layers.push(d);else if(d.type==="model"){const _=this.style.getLayerSource(d);_&&_.type==="batched-model"&&this.layers.push(d)}}}updateZOffset(c,d){this.currentBuildingBuckets=[];for(let v=0;v<this.layers.length;++v){const S=this.layers[v],E=this.style.getLayerSourceCache(S);let z=1;S.type==="fill-extrusion"&&(z=S.paint.get("fill-extrusion-opacity")>0?S.paint.get("fill-extrusion-vertical-scale"):0);let k=E?E.getTile(d):null;if(!k&&E&&d.canonical.z>E.getSource().minzoom){let N=d.scaledTo(Math.min(E.getSource().maxzoom,d.overscaledZ-1));for(;N.overscaledZ>=E.getSource().minzoom&&(k=E.getTile(N),!k&&N.overscaledZ!==0);)N=N.scaledTo(N.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:k?k.getBucket(S):null,tileID:k?k.tileID:d,verticalScale:z})}c.hasAnyZOffset=!1;let _=!1;for(let v=0;v<c.symbolInstances.length;v++){const S=c.symbolInstances.get(v),E=S.zOffset,z=this._getHeightAtTileOffset(d,S.tileAnchorX,S.tileAnchorY);S.zOffset=z!==-1?z:E,_||E===S.zOffset||(_=!0),c.hasAnyZOffset||S.zOffset===0||(c.hasAnyZOffset=!0)}_&&(c.zOffsetBuffersNeedUpload=!0,c.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(c,d,_,v){let S=d,E=_;if(c.canonical.z!==v.canonical.z){const z=v.canonical,k=1/(1<<c.canonical.z-z.z);S=(d+c.canonical.x*o.J)*k-z.x*o.J|0,E=(_+c.canonical.y*o.J)*k-z.y*o.J|0}return{tileX:S,tileY:E}}_getHeightAtTileOffset(c,d,_){let v,S;for(let E=0;E<this.layers.length;++E){if(this.layers[E].type!=="fill-extrusion")continue;const{bucket:z,tileID:k,verticalScale:N}=this.currentBuildingBuckets[E];if(!z)continue;const{tileX:U,tileY:$}=this._mapCoordToOverlappingTile(c,d,_,k),X=z.getHeightAtTileCoord(U,$);X&&X.height!==void 0&&(X.hidden?v=X.height:S=Math.max(X.height*N,S||0))}if(S!==void 0)return S;for(let E=0;E<this.layers.length;++E){if(this.layers[E].type!=="model")continue;const{bucket:z,tileID:k}=this.currentBuildingBuckets[E];if(!z)continue;const{tileX:N,tileY:U}=this._mapCoordToOverlappingTile(c,d,_,k),$=z.getHeightAtTileCoord(N,U);if($&&!$.hidden)return $.height===void 0&&v!==void 0?Math.min($.maxHeight,v)*$.verticalScale:($.height||0)*$.verticalScale}return-1}}function uh(m,c){const d={};for(const _ in m)_!=="ref"&&(d[_]=m[_]);return o.aS.forEach(_=>{_ in c&&(d[_]=c[_])}),d}function Uo(m){m=m.slice();const c=Object.create(null);for(let d=0;d<m.length;d++)c[m[d].id]=m[d];for(let d=0;d<m.length;d++)"ref"in m[d]&&(m[d]=uh(m[d],c[m[d].ref]));return m}const ot={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",setImportUrl:"setImportUrl",setImportData:"setImportData",setImportConfig:"setImportConfig"};function C(m,c,d){d.push({command:ot.addSource,args:[m,c[m]]})}function G(m,c,d){c.push({command:ot.removeSource,args:[m]}),d[m]=!0}function ue(m,c,d,_){G(m,d,_),C(m,c,d)}function Pe(m,c,d){let _;for(_ in m[d])if(m[d].hasOwnProperty(_)&&_!=="data"&&!M(m[d][_],c[d][_]))return!1;for(_ in c[d])if(c[d].hasOwnProperty(_)&&_!=="data"&&!M(m[d][_],c[d][_]))return!1;return!0}function Ae(m,c,d,_,v,S){let E;for(E in c=c||{},m=m||{})m.hasOwnProperty(E)&&(M(m[E],c[E])||d.push({command:S,args:[_,E,c[E],v]}));for(E in c)c.hasOwnProperty(E)&&!m.hasOwnProperty(E)&&(M(m[E],c[E])||d.push({command:S,args:[_,E,c[E],v]}))}function Be(m){return m.id}function qe(m,c){return m[c.id]=c,m}class Rt{constructor(c,d){this.reset(c,d)}reset(c,d){this.points=c||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.c(c,0,1);let d=1,_=this._distances[d];const v=c*this.paddedLength+this.padding;for(;_<v&&d<this._distances.length;)_=this._distances[++d];const S=d-1,E=this._distances[S],z=_-E,k=z>0?(v-E)/z:0;return this.points[S].mult(1-k).add(this.points[d].mult(k))}}class kt{constructor(c,d,_){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(c/_),this.yCellCount=Math.ceil(d/_);for(let E=0;E<this.xCellCount*this.yCellCount;E++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=d,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,d,_,v,S){this._forEachCell(d,_,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(c,d,_,v){this._forEachCell(d-v,_-v,d+v,_+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(d),this.circles.push(_),this.circles.push(v)}_insertBoxCell(c,d,_,v,S,E){this.boxCells[S].push(E)}_insertCircleCell(c,d,_,v,S,E){this.circleCells[S].push(E)}_query(c,d,_,v,S,E){if(_<0||c>this.width||v<0||d>this.height)return!S&&[];const z=[];if(c<=0&&d<=0&&this.width<=_&&this.height<=v){if(S)return!0;for(let k=0;k<this.boxKeys.length;k++)z.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const N=this.circles[3*k],U=this.circles[3*k+1],$=this.circles[3*k+2];z.push({key:this.circleKeys[k],x1:N-$,y1:U-$,x2:N+$,y2:U+$})}return E?z.filter(E):z}return this._forEachCell(c,d,_,v,this._queryCell,z,{hitTest:S,seenUids:{box:{},circle:{}}},E),S?z.length>0:z}_queryCircle(c,d,_,v,S){const E=c-_,z=c+_,k=d-_,N=d+_;if(z<0||E>this.width||N<0||k>this.height)return!v&&[];const U=[];return this._forEachCell(E,k,z,N,this._queryCellCircle,U,{hitTest:v,circle:{x:c,y:d,radius:_},seenUids:{box:{},circle:{}}},S),v?U.length>0:U}query(c,d,_,v,S){return this._query(c,d,_,v,!1,S)}hitTest(c,d,_,v,S){return this._query(c,d,_,v,!0,S)}hitTestCircle(c,d,_,v){return this._queryCircle(c,d,_,!0,v)}_queryCell(c,d,_,v,S,E,z,k){const N=z.seenUids,U=this.boxCells[S];if(U!==null){const X=this.bboxes;for(const Q of U)if(!N.box[Q]){N.box[Q]=!0;const ae=4*Q;if(c<=X[ae+2]&&d<=X[ae+3]&&_>=X[ae+0]&&v>=X[ae+1]&&(!k||k(this.boxKeys[Q]))){if(z.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[Q],x1:X[ae],y1:X[ae+1],x2:X[ae+2],y2:X[ae+3]})}}}const $=this.circleCells[S];if($!==null){const X=this.circles;for(const Q of $)if(!N.circle[Q]){N.circle[Q]=!0;const ae=3*Q;if(this._circleAndRectCollide(X[ae],X[ae+1],X[ae+2],c,d,_,v)&&(!k||k(this.circleKeys[Q]))){if(z.hitTest)return E.push(!0),!0;{const se=X[ae],re=X[ae+1],ne=X[ae+2];E.push({key:this.circleKeys[Q],x1:se-ne,y1:re-ne,x2:se+ne,y2:re+ne})}}}}}_queryCellCircle(c,d,_,v,S,E,z,k){const N=z.circle,U=z.seenUids,$=this.boxCells[S];if($!==null){const Q=this.bboxes;for(const ae of $)if(!U.box[ae]){U.box[ae]=!0;const se=4*ae;if(this._circleAndRectCollide(N.x,N.y,N.radius,Q[se+0],Q[se+1],Q[se+2],Q[se+3])&&(!k||k(this.boxKeys[ae])))return E.push(!0),!0}}const X=this.circleCells[S];if(X!==null){const Q=this.circles;for(const ae of X)if(!U.circle[ae]){U.circle[ae]=!0;const se=3*ae;if(this._circlesCollide(Q[se],Q[se+1],Q[se+2],N.x,N.y,N.radius)&&(!k||k(this.circleKeys[ae])))return E.push(!0),!0}}}_forEachCell(c,d,_,v,S,E,z,k){const N=this._convertToXCellCoord(c),U=this._convertToYCellCoord(d),$=this._convertToXCellCoord(_),X=this._convertToYCellCoord(v);for(let Q=N;Q<=$;Q++)for(let ae=U;ae<=X;ae++)if(S.call(this,c,d,_,v,this.xCellCount*ae+Q,E,z,k))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,d,_,v,S,E){const z=v-c,k=S-d,N=_+E;return N*N>z*z+k*k}_circleAndRectCollide(c,d,_,v,S,E,z){const k=(E-v)/2,N=Math.abs(c-(v+k));if(N>k+_)return!1;const U=(z-S)/2,$=Math.abs(d-(S+U));if($>U+_)return!1;if(N<=k||$<=U)return!0;const X=N-k,Q=$-U;return X*X+Q*Q<=_*_}}const zt=100;class cn{constructor(c,d,_=new kt(c.width+200,c.height+200,25),v=new kt(c.width+200,c.height+200,25)){this.transform=c,this.grid=_,this.ignoredGrid=v,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+zt,this.screenBottomBoundary=c.height+zt,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=d}placeCollisionBox(c,d,_,v,S,E,z,k){let N=_.projectedAnchorX,U=_.projectedAnchorY,$=_.projectedAnchorZ;const X=_.elevation,Q=_.tileID,ae=c.getProjection();if(X&&Q){const[pe,we,Ce]=ae.upVector(Q.canonical,_.tileAnchorX,_.tileAnchorY),Ee=ae.upVectorScale(Q.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;N+=pe*X*Ee,U+=we*X*Ee,$+=Ce*X*Ee}const se=this.projectAndGetPerspectiveRatio(z,N,U,$,_.tileID,ae.name==="globe"||!!X||this.transform.pitch>0,ae),re=E*se.perspectiveRatio,ne=(_.x1*d+v.x-_.padding)*re+se.point.x,de=(_.y1*d+v.y-_.padding)*re+se.point.y,ye=(_.x2*d+v.x+_.padding)*re+se.point.x,xe=(_.y2*d+v.y+_.padding)*re+se.point.y,ce=se.perspectiveRatio<=.55||se.occluded;return!this.isInsideGrid(ne,de,ye,xe)||!S&&this.grid.hitTest(ne,de,ye,xe,k)||ce?{box:[],offscreen:!1,occluded:se.occluded}:{box:[ne,de,ye,xe],offscreen:this.isOffscreen(ne,de,ye,xe),occluded:!1}}placeCollisionCircles(c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se){const re=[],ne=this.transform.elevation,de=c.getProjection(),ye=ne?ne.getAtTileOffsetFunc(se,this.transform.center.lat,this.transform.worldSize,de):null,xe=new o.P(_.tileAnchorX,_.tileAnchorY);let{x:ce,y:pe,z:we}=de.projectTilePoint(xe.x,xe.y,se.canonical);if(ye){const[st,be,Fe]=ye(xe);ce+=st,pe+=be,we+=Fe}const Ce=de.name==="globe",Ee=this.projectAndGetPerspectiveRatio(z,ce,pe,we,se,Ce||!!ne||this.transform.pitch>0,de),{perspectiveRatio:Le}=Ee,nt=($?E/Le:E*Le)/o.aV,$e=Pn(ce,pe,we,k),Je=Ee.signedDistanceFromCamera>0?yt(nt,S,_.lineOffsetX*nt,_.lineOffsetY*nt,!1,$e,xe,_,v,k,{},ne&&!$?ye:null,$&&!!ne,de,se,$):null;let Oe=!1,tt=!1,Ze=!0;if(Je&&!Ee.occluded){const st=.5*Q*Le+ae,be=new o.P(-100,-100),Fe=new o.P(this.screenRightBoundary,this.screenBottomBoundary),mt=new Rt,{first:ct,last:Wt}=Je,jt=ct.path.length;let rn=[];for(let fn=jt-1;fn>=1;fn--)rn.push(ct.path[fn]);for(let fn=1;fn<Wt.path.length;fn++)rn.push(Wt.path[fn]);const Vt=2.5*st;N&&(rn=rn.map(([fn,Kt,en],Jn)=>(ye&&!Ce&&(en=ye(Jn<jt-1?ct.tilePath[jt-1-Jn]:Wt.tilePath[Jn-jt+2])[2]),Pn(fn,Kt,en,N))),rn.some(fn=>fn[3]<=0)&&(rn=[]));let pn=[];if(rn.length>0){let fn=1/0,Kt=-1/0,en=1/0,Jn=-1/0;for(const An of rn)fn=Math.min(fn,An[0]),en=Math.min(en,An[1]),Kt=Math.max(Kt,An[0]),Jn=Math.max(Jn,An[1]);Kt>=be.x&&fn<=Fe.x&&Jn>=be.y&&en<=Fe.y&&(pn=[rn.map(An=>new o.P(An[0],An[1]))],(fn<be.x||Kt>Fe.x||en<be.y||Jn>Fe.y)&&(pn=o.aT(pn,be.x,be.y,Fe.x,Fe.y)))}for(const fn of pn){mt.reset(fn,.25*st);let Kt=0;Kt=mt.length<=.5*st?1:Math.ceil(mt.paddedLength/Vt)+1;for(let en=0;en<Kt;en++){const Jn=en/Math.max(Kt-1,1),An=mt.lerp(Jn),Pa=An.x+zt,ma=An.y+zt;re.push(Pa,ma,st,0);const ys=Pa-st,Si=ma-st,ua=Pa+st,Qn=ma+st;if(Ze=Ze&&this.isOffscreen(ys,Si,ua,Qn),tt=tt||this.isInsideGrid(ys,Si,ua,Qn),!d&&this.grid.hitTestCircle(Pa,ma,st,X)&&(Oe=!0,!U))return{circles:[],offscreen:!1,collisionDetected:Oe,occluded:!1}}}}return{circles:!U&&Oe||!tt?[]:re,offscreen:Ze,collisionDetected:Oe,occluded:Ee.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let _=1/0,v=1/0,S=-1/0,E=-1/0;for(const U of c){const $=new o.P(U.x+zt,U.y+zt);_=Math.min(_,$.x),v=Math.min(v,$.y),S=Math.max(S,$.x),E=Math.max(E,$.y),d.push($)}const z=this.grid.query(_,v,S,E).concat(this.ignoredGrid.query(_,v,S,E)),k={},N={};for(const U of z){const $=U.key;if(k[$.bucketInstanceId]===void 0&&(k[$.bucketInstanceId]={}),k[$.bucketInstanceId][$.featureIndex])continue;const X=[new o.P(U.x1,U.y1),new o.P(U.x2,U.y1),new o.P(U.x2,U.y2),new o.P(U.x1,U.y2)];o.aU(d,X)&&(k[$.bucketInstanceId][$.featureIndex]=!0,N[$.bucketInstanceId]===void 0&&(N[$.bucketInstanceId]=[]),N[$.bucketInstanceId].push($.featureIndex))}return N}insertCollisionBox(c,d,_,v,S){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:v,collisionGroupID:S},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,d,_,v,S){const E=d?this.ignoredGrid:this.grid,z={bucketInstanceId:_,featureIndex:v,collisionGroupID:S};for(let k=0;k<c.length;k+=4)E.insertCircle(z,c[k],c[k+1],c[k+2])}projectAndGetPerspectiveRatio(c,d,_,v,S,E,z){const k=[d,_,v,1];let N=!1;v||this.transform.pitch>0?(o.e.transformMat4(k,k,c),this.fogState&&S&&z.name!=="globe"&&(N=function(X,Q,ae,se,re,ne){const de=ne.calculateFogTileMatrix(re),ye=[Q,ae,se];return o.v.transformMat4(ye,ye,de),hi(X,o.v.length(ye),ne.pitch,ne._fov)}(this.fogState,d,_,v,S.toUnwrapped(),this.transform)>.9)):In(k,k,c);const U=k[3];return{point:new o.P((k[0]/U+1)/2*this.transform.width+zt,(-k[1]/U+1)/2*this.transform.height+zt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(z)/U*.5,1.5),signedDistanceFromCamera:U,occluded:E&&k[2]>U||N}}isOffscreen(c,d,_,v){return _<zt||c>=this.screenRightBoundary||v<zt||d>this.screenBottomBoundary}isInsideGrid(c,d,_,v){return _>=0&&c<this.gridRightBoundary&&v>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const c=o.m.identity([]);return o.m.translate(c,c,[-100,-100,0]),c}}function Gt(m,c,d){const _=c.createTileMatrix(m,m.worldSize,d.toUnwrapped());return o.m.multiply(new Float32Array(16),m.projMatrix,_)}function Vn(m,c,d){if(c.projection.name===d.projection.name)return m.projMatrix;const _=d.clone();return _.setProjection(c.projection),Gt(_,c.getProjection(),m)}function Ca(m,c,d){return c.name===d.projection.name?m.projMatrix:Gt(d,c,m)}class qn{constructor(c,d,_,v){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?d:-d))):v&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Ja{constructor(c,d,_,v,S,E=!1){this.text=new qn(c?c.text:null,d,_,S),this.icon=new qn(c?c.icon:null,d,v,S),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class xt{constructor(c,d,_,v=!1){this.text=c,this.icon=d,this.skipFade=_,this.clipped=v}}class yn{constructor(){this.invProjMatrix=o.m.create(),this.viewportMatrix=o.m.create(),this.circles=[]}}class ya{constructor(c,d,_,v,S){this.bucketInstanceId=c,this.featureIndex=d,this.sourceLayerIndex=_,this.bucketIndex=v,this.tileID=S}}class wr{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const d=++this.maxGroupID;this.collisionGroups[c]={ID:d,predicate:_=>_.collisionGroupID===d}}return this.collisionGroups[c]}}function ha(m,c,d,_,v){const{horizontalAlign:S,verticalAlign:E}=o.aY(m),z=-(S-.5)*c,k=-(E-.5)*d,N=o.aW(m,_);return new o.P(z+N[0]*v,k+N[1]*v)}function wa(m,c,d,_,v){const S=new o.P(m,c);return d&&S._rotate(_?v:-v),S}class nd{constructor(c,d,_,v,S,E){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new cn(this.transform,S),this.buildingIndex=E,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new wr(_),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,d,_,v){const S=_.getBucket(d),E=_.latestFeatureIndex;if(!S||!E||d.fqid!==S.layerIds[0])return;const z=S.layers[0].layout,k=_.collisionBoxArray,N=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),U=_.tileSize/o.J,$=_.tileID.toUnwrapped();this.transform.setProjection(S.projection);const X=(Q=_.tileID,ae=S.getProjection(),se=this.transform,ae.name===this.projection?se.calculateProjMatrix(Q.toUnwrapped()):Gt(se,ae,Q));var Q,ae,se;const re=z.get("text-pitch-alignment")==="map",ne=z.get("text-rotation-alignment")==="map";d.compileFilter();const de=d.dynamicFilter(),ye=d.dynamicFilterNeedsFeature(),xe=this.transform.calculatePixelsToTileUnitsMatrix(_),ce=_n(X,_.tileID.canonical,re,ne,this.transform,S.getProjection(),xe);let pe=null;if(re){const Ee=Ln(X,_.tileID.canonical,re,ne,this.transform,S.getProjection(),xe);pe=o.m.multiply([],this.transform.labelPlaneMatrix,Ee)}let we=null;de&&_.latestFeatureIndex&&(we={unwrappedTileID:$,dynamicFilter:de,dynamicFilterNeedsFeature:ye,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[S.bucketInstanceId]=new ya(S.bucketInstanceId,E,S.sourceLayerIndex,S.index,_.tileID);const Ce={bucket:S,layout:z,posMatrix:X,textLabelPlaneMatrix:ce,labelToScreenMatrix:pe,clippingData:we,scale:N,textPixelRatio:U,holdingForFade:_.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:o.i(S.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.i(S.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(const Ee of S.sortKeyRanges){const{sortKey:Le,symbolInstanceStart:nt,symbolInstanceEnd:$e}=Ee;c.push({sortKey:Le,symbolInstanceStart:nt,symbolInstanceEnd:$e,parameters:Ce})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:Ce})}attemptAnchorPlacement(c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se,re,ne,de){const{textOffset0:ye,textOffset1:xe,crossTileID:ce}=X,pe=[ye,xe],we=ha(c,_,v,pe,S),Ce=this.collisionIndex.placeCollisionBox(ae,S,d,wa(we.x,we.y,E,z,this.transform.angle),$,k,N,U.predicate);if(re){const Ee=ae.getSymbolInstanceIconSize(de,this.transform.zoom,X.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ae,Ee,re,wa(we.x,we.y,E,z,this.transform.angle),$,k,N,U.predicate).box.length===0)return}if(Ce.box.length>0){let Ee;return this.prevPlacement&&this.prevPlacement.variableOffsets[ce]&&this.prevPlacement.placements[ce]&&this.prevPlacement.placements[ce].text&&(Ee=this.prevPlacement.variableOffsets[ce].anchor),this.variableOffsets[ce]={textOffset:pe,width:_,height:v,anchor:c,textScale:S,prevAnchor:Ee},this.markUsedJustification(ae,c,X,se),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,se,X),this.placedOrientations[ce]=se),{shift:we,placedGlyphBoxes:Ce}}}placeLayerBucketPart(c,d,_,v){const{bucket:S,layout:E,posMatrix:z,textLabelPlaneMatrix:k,labelToScreenMatrix:N,clippingData:U,textPixelRatio:$,holdingForFade:X,collisionBoxArray:Q,partiallyEvaluatedTextSize:ae,partiallyEvaluatedIconSize:se,collisionGroup:re}=c.parameters,ne=E.get("text-optional"),de=E.get("icon-optional"),ye=E.get("text-allow-overlap"),xe=E.get("icon-allow-overlap"),ce=E.get("text-rotation-alignment")==="map",pe=E.get("text-pitch-alignment")==="map",we=E.get("symbol-z-order")==="viewport-y",Ce=E.get("symbol-z-elevate");this.transform.setProjection(S.projection);let Ee=ye&&(xe||!S.hasIconData()||de),Le=xe&&(ye||!S.hasTextData()||ne);!S.collisionArrays&&Q&&S.deserializeCollisionBoxes(Q),_&&v&&S.updateCollisionDebugBuffers(this.transform.zoom,Q);const nt=($e,Je,Oe)=>{const{crossTileID:tt,numVerticalGlyphVertices:Ze}=$e;if(U){const ua={zoom:this.transform.zoom,pitch:this.transform.pitch};let Qn=null;if(U.dynamicFilterNeedsFeature){const sa=this.retainedQueryData[S.bucketInstanceId];Qn=U.featureIndex.loadFeature({featureIndex:$e.featureIndex,bucketIndex:sa.bucketIndex,sourceLayerIndex:sa.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,U.dynamicFilter)(ua,Qn,this.retainedQueryData[S.bucketInstanceId].tileID.canonical,new o.P($e.tileAnchorX,$e.tileAnchorY),this.transform.calculateDistanceTileData(U.unwrappedTileID)))return this.placements[tt]=new xt(!1,!1,!1,!0),void d.add(tt)}if(d.has(tt))return;if(X)return void(this.placements[tt]=new xt(!1,!1,!1));let st=!1,be=!1,Fe=!0,mt=!1,ct=!1,Wt=null,jt={box:null,offscreen:null,occluded:null},rn={box:null,offscreen:null,occluded:null},Vt=null,pn=null,fn=null,Kt=0,en=0,Jn=0;Oe.textFeatureIndex?Kt=Oe.textFeatureIndex:$e.useRuntimeCollisionCircles&&(Kt=$e.featureIndex),Oe.verticalTextFeatureIndex&&(en=Oe.verticalTextFeatureIndex);const An=ua=>{ua.tileID=this.retainedQueryData[S.bucketInstanceId].tileID;const Qn=this.transform.elevation;ua.elevation=$e.zOffset+(Qn?Qn.getAtTileOffset(ua.tileID,ua.tileAnchorX,ua.tileAnchorY):0)},Pa=Oe.textBox;if(Pa){An(Pa);const ua=sa=>{let Oa=o.W.horizontal;if(S.allowVerticalPlacement&&!sa&&this.prevPlacement){const Br=this.prevPlacement.placedOrientations[tt];Br&&(this.placedOrientations[tt]=Br,Oa=Br,this.markUsedOrientation(S,Oa,$e))}return Oa},Qn=(sa,Oa)=>{if(S.allowVerticalPlacement&&Ze>0&&Oe.verticalTextBox){for(const Br of S.writingModes)if(Br===o.W.vertical?(jt=Oa(),rn=jt):jt=sa(),jt&&jt.box&&jt.box.length)break}else jt=sa()};if(E.get("text-variable-anchor")){let sa=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[tt]){const Ma=this.prevPlacement.variableOffsets[tt];sa.indexOf(Ma.anchor)>0&&(sa=sa.filter(Jr=>Jr!==Ma.anchor),sa.unshift(Ma.anchor))}const Oa=(Ma,Jr,vs)=>{const Kr=S.getSymbolInstanceTextSize(ae,$e,this.transform.zoom,Je),Ti=(Ma.x2-Ma.x1)*Kr+2*Ma.padding,Ko=(Ma.y2-Ma.y1)*Kr+2*Ma.padding,Hi=$e.hasIconTextFit&&!xe?Jr:null;Hi&&An(Hi);let ba={box:[],offscreen:!1,occluded:!1};const Zi=ye?2*sa.length:sa.length;for(let So=0;So<Zi;++So){const Qo=this.attemptAnchorPlacement(sa[So%sa.length],Ma,Ti,Ko,Kr,ce,pe,$,z,re,So>=sa.length,$e,Je,S,vs,Hi,ae,se);if(Qo&&(ba=Qo.placedGlyphBoxes,ba&&ba.box&&ba.box.length)){st=!0,Wt=Qo.shift;break}}return ba};Qn(()=>Oa(Pa,Oe.iconBox,o.W.horizontal),()=>{const Ma=Oe.verticalTextBox;return Ma&&An(Ma),S.allowVerticalPlacement&&!(jt&&jt.box&&jt.box.length)&&Ze>0&&Ma?Oa(Ma,Oe.verticalIconBox,o.W.vertical):{box:null,offscreen:null,occluded:null}}),jt&&(st=jt.box,Fe=jt.offscreen,mt=jt.occluded);const Br=ua(!(!jt||!jt.box));if(!st&&this.prevPlacement){const Ma=this.prevPlacement.variableOffsets[tt];Ma&&(this.variableOffsets[tt]=Ma,this.markUsedJustification(S,Ma.anchor,$e,Br))}}else{const sa=(Oa,Br)=>{const Ma=S.getSymbolInstanceTextSize(ae,$e,this.transform.zoom,Je),Jr=this.collisionIndex.placeCollisionBox(S,Ma,Oa,new o.P(0,0),ye,$,z,re.predicate);return Jr&&Jr.box&&Jr.box.length&&(this.markUsedOrientation(S,Br,$e),this.placedOrientations[tt]=Br),Jr};Qn(()=>sa(Pa,o.W.horizontal),()=>{const Oa=Oe.verticalTextBox;return S.allowVerticalPlacement&&Ze>0&&Oa?(An(Oa),sa(Oa,o.W.vertical)):{box:null,offscreen:null,occluded:null}}),ua(!!(jt&&jt.box&&jt.box.length))}}if(Vt=jt,st=Vt&&Vt.box&&Vt.box.length>0,Fe=Vt&&Vt.offscreen,mt=Vt&&Vt.occluded,$e.useRuntimeCollisionCircles){const ua=S.text.placedSymbolArray.get($e.centerJustifiedTextSymbolIndex>=0?$e.centerJustifiedTextSymbolIndex:$e.verticalPlacedTextSymbolIndex),Qn=o.j(S.textSizeData,ae,ua),sa=E.get("text-padding");pn=this.collisionIndex.placeCollisionCircles(S,ye,ua,S.lineVertexArray,S.glyphOffsetArray,Qn,z,k,N,_,pe,re.predicate,$e.collisionCircleDiameter*Qn/o.aV,sa,this.retainedQueryData[S.bucketInstanceId].tileID),st=ye||pn.circles.length>0&&!pn.collisionDetected,Fe=Fe&&pn.offscreen,mt=pn.occluded}if(Oe.iconFeatureIndex&&(Jn=Oe.iconFeatureIndex),Oe.iconBox){const ua=Qn=>{An(Qn);const sa=$e.hasIconTextFit&&Wt?wa(Wt.x,Wt.y,ce,pe,this.transform.angle):new o.P(0,0),Oa=S.getSymbolInstanceIconSize(se,this.transform.zoom,$e.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(S,Oa,Qn,sa,xe,$,z,re.predicate)};rn&&rn.box&&rn.box.length&&Oe.verticalIconBox?(fn=ua(Oe.verticalIconBox),be=fn.box.length>0):(fn=ua(Oe.iconBox),be=fn.box.length>0),Fe=Fe&&fn.offscreen,ct=fn.occluded}const ma=ne||$e.numHorizontalGlyphVertices===0&&Ze===0,ys=de||$e.numIconVertices===0;if(ma||ys?ys?ma||(be=be&&st):st=be&&st:be=st=be&&st,st&&Vt&&Vt.box&&this.collisionIndex.insertCollisionBox(Vt.box,E.get("text-ignore-placement"),S.bucketInstanceId,rn&&rn.box&&en?en:Kt,re.ID),be&&fn&&this.collisionIndex.insertCollisionBox(fn.box,E.get("icon-ignore-placement"),S.bucketInstanceId,Jn,re.ID),pn&&(st&&this.collisionIndex.insertCollisionCircles(pn.circles,E.get("text-ignore-placement"),S.bucketInstanceId,Kt,re.ID),_)){const ua=S.bucketInstanceId;let Qn=this.collisionCircleArrays[ua];Qn===void 0&&(Qn=this.collisionCircleArrays[ua]=new yn);for(let sa=0;sa<pn.circles.length;sa+=4)Qn.circles.push(pn.circles[sa+0]),Qn.circles.push(pn.circles[sa+1]),Qn.circles.push(pn.circles[sa+2]),Qn.circles.push(pn.collisionDetected?1:0)}const Si=S.projection.name!=="globe";Ee=Ee&&(Si||!mt),Le=Le&&(Si||!ct),this.placements[tt]=new xt(st||Ee,be||Le,Fe||S.justReloaded),d.add(tt)};if(Ce&&this.buildingIndex&&(this.buildingIndex.updateZOffset(S,this.retainedQueryData[S.bucketInstanceId].tileID),S.updateZOffset()),we){const $e=S.getSortedSymbolIndexes(this.transform.angle);for(let Je=$e.length-1;Je>=0;--Je){const Oe=$e[Je];nt(S.symbolInstances.get(Oe),Oe,S.collisionArrays[Oe])}S.hasAnyZOffset&&o.X(`${S.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(S.hasAnyZOffset){const $e=S.getSortedIndexesByZOffset();for(let Je=0;Je<$e.length;++Je){const Oe=$e[Je];nt(S.symbolInstances.get(Oe),Oe,S.collisionArrays[Oe])}}else for(let $e=c.symbolInstanceStart;$e<c.symbolInstanceEnd;$e++)nt(S.symbolInstances.get($e),$e,S.collisionArrays[$e]);if(_&&S.bucketInstanceId in this.collisionCircleArrays){const $e=this.collisionCircleArrays[S.bucketInstanceId];o.m.invert($e.invProjMatrix,z),$e.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(c,d,_,v){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:E,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:k,crossTileID:N}=_,U=o.aX(d),$=v===o.W.vertical?k:U==="left"?S:U==="center"?E:U==="right"?z:-1;S>=0&&(c.text.placedSymbolArray.get(S).crossTileID=$>=0&&S!==$?0:N),E>=0&&(c.text.placedSymbolArray.get(E).crossTileID=$>=0&&E!==$?0:N),z>=0&&(c.text.placedSymbolArray.get(z).crossTileID=$>=0&&z!==$?0:N),k>=0&&(c.text.placedSymbolArray.get(k).crossTileID=$>=0&&k!==$?0:N)}markUsedOrientation(c,d,_){const v=d===o.W.horizontal||d===o.W.horizontalOnly?d:0,S=d===o.W.vertical?d:0,{leftJustifiedTextSymbolIndex:E,centerJustifiedTextSymbolIndex:z,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:N}=_,U=c.text.placedSymbolArray;E>=0&&(U.get(E).placedOrientation=v),z>=0&&(U.get(z).placedOrientation=v),k>=0&&(U.get(k).placedOrientation=v),N>=0&&(U.get(N).placedOrientation=S)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let _=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const v=d?d.symbolFadeChange(c):1,S=d?d.opacities:{},E=d?d.variableOffsets:{},z=d?d.placedOrientations:{};for(const k in this.placements){const N=this.placements[k],U=S[k];U?(this.opacities[k]=new Ja(U,v,N.text,N.icon,null,N.clipped),_=_||N.text!==U.text.placed||N.icon!==U.icon.placed):(this.opacities[k]=new Ja(null,v,N.text,N.icon,N.skipFade,N.clipped),_=_||N.text||N.icon)}for(const k in S){const N=S[k];if(!this.opacities[k]){const U=new Ja(N,v,!1,!1);U.isHidden()||(this.opacities[k]=U,_=_||N.text.placed||N.icon.placed)}}for(const k in E)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=E[k]);for(const k in z)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=z[k]);_?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:c)}updateLayerOpacities(c,d){const _=new Set;for(const v of d){const S=v.getBucket(c);S&&v.latestFeatureIndex&&c.fqid===S.layerIds[0]&&(this.updateBucketOpacities(S,_,v.collisionBoxArray),S.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(S,v.tileID),S.updateZOffset()))}}updateBucketOpacities(c,d,_){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const v=c.layers[0].layout,S=!!c.layers[0].dynamicFilter(),E=new Ja(null,0,!1,!1,!0),z=v.get("text-allow-overlap"),k=v.get("icon-allow-overlap"),N=v.get("text-variable-anchor"),U=v.get("text-rotation-alignment")==="map",$=v.get("text-pitch-alignment")==="map",X=new Ja(null,0,z&&(k||!c.hasIconData()||v.get("icon-optional")),k&&(z||!c.hasTextData()||v.get("text-optional")),!0);!c.collisionArrays&&_&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(_);const Q=(se,re,ne)=>{for(let de=0;de<re/4;de++)se.opacityVertexArray.emplaceBack(ne)};let ae=0;for(let se=0;se<c.symbolInstances.length;se++){const re=c.symbolInstances.get(se),{numHorizontalGlyphVertices:ne,numVerticalGlyphVertices:de,crossTileID:ye,numIconVertices:xe}=re,ce=d.has(ye);let pe=this.opacities[ye];ce?pe=E:pe||(pe=X,this.opacities[ye]=pe),d.add(ye);const we=ne>0||de>0,Ce=xe>0,Ee=this.placedOrientations[ye],Le=Ee===o.W.vertical,nt=Ee===o.W.horizontal||Ee===o.W.horizontalOnly;if(!we&&!Ce||pe.isHidden()||ae++,we){const $e=Go(pe.text);Q(c.text,ne,Le?rr:$e),Q(c.text,de,nt?rr:$e);const Je=pe.text.isHidden(),{leftJustifiedTextSymbolIndex:Oe,centerJustifiedTextSymbolIndex:tt,rightJustifiedTextSymbolIndex:Ze,verticalPlacedTextSymbolIndex:st}=re,be=c.text.placedSymbolArray,Fe=Je||Le?1:0;Oe>=0&&(be.get(Oe).hidden=Fe),tt>=0&&(be.get(tt).hidden=Fe),Ze>=0&&(be.get(Ze).hidden=Fe),st>=0&&(be.get(st).hidden=Je||nt?1:0);const mt=this.variableOffsets[ye];mt&&this.markUsedJustification(c,mt.anchor,re,Ee);const ct=this.placedOrientations[ye];ct&&(this.markUsedJustification(c,"left",re,ct),this.markUsedOrientation(c,ct,re))}if(Ce){const $e=Go(pe.icon),{placedIconSymbolIndex:Je,verticalPlacedIconSymbolIndex:Oe}=re,tt=c.icon.placedSymbolArray,Ze=pe.icon.isHidden()?1:0;Je>=0&&(Q(c.icon,xe,Le?rr:$e),tt.get(Je).hidden=Ze),Oe>=0&&(Q(c.icon,re.numVerticalIconVertices,nt?rr:$e),tt.get(Oe).hidden=Ze)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const $e=c.collisionArrays[se];if($e){let Je=new o.P(0,0),Oe=!0;if($e.textBox||$e.verticalTextBox){if(N){const Ze=this.variableOffsets[ye];Ze?(Je=ha(Ze.anchor,Ze.width,Ze.height,Ze.textOffset,Ze.textScale),U&&Je._rotate($?this.transform.angle:-this.transform.angle)):Oe=!1}S&&(Oe=!pe.clipped),$e.textBox&&Sa(c.textCollisionBox.collisionVertexArray,pe.text.placed,!Oe||Le,Je.x,Je.y),$e.verticalTextBox&&Sa(c.textCollisionBox.collisionVertexArray,pe.text.placed,!Oe||nt,Je.x,Je.y)}const tt=Oe&&!!(!nt&&$e.verticalIconBox);$e.iconBox&&Sa(c.iconCollisionBox.collisionVertexArray,pe.icon.placed,tt,re.hasIconTextFit?Je.x:0,re.hasIconTextFit?Je.y:0),$e.verticalIconBox&&Sa(c.iconCollisionBox.collisionVertexArray,pe.icon.placed,!tt,re.hasIconTextFit?Je.x:0,re.hasIconTextFit?Je.y:0)}}}if(c.fullyClipped=ae===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=se.invProjMatrix,c.placementViewportMatrix=se.viewportMatrix,c.collisionCircleArray=se.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,d){const _=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*_>c}setStale(){this.stale=!0}}function Sa(m,c,d,_,v){m.emplaceBack(c?1:0,d?1:0,_||0,v||0),m.emplaceBack(c?1:0,d?1:0,_||0,v||0),m.emplaceBack(c?1:0,d?1:0,_||0,v||0),m.emplaceBack(c?1:0,d?1:0,_||0,v||0)}const Wr=Math.pow(2,25),Ms=Math.pow(2,24),gi=Math.pow(2,17),Vo=Math.pow(2,16),dr=Math.pow(2,9),vc=Math.pow(2,8),Kc=Math.pow(2,1);function Go(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const c=m.placed?1:0,d=Math.floor(127*m.opacity);return d*Wr+c*Ms+d*gi+c*Vo+d*dr+c*vc+d*Kc+c}const rr=0;class ad{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(c,d,_,v,S){const E=this._bucketParts;for(;this._currentTileIndex<c.length;)if(d.getBucketParts(E,v,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((z,k)=>z.sortKey-k.sortKey));this._currentPartIndex<E.length;){const z=E[this._currentPartIndex];if(d.placeLayerBucketPart(z,this._seenCrossTileIDs,_,z.symbolInstanceStart===0),this._currentPartIndex++,S())return!0}return!1}}class rd{constructor(c,d,_,v,S,E,z,k,N){this.placement=new nd(c,S,E,z,k,N),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(c,d,_,v){const S=o.a4.now(),E=()=>{const z=o.a4.now()-S;return!this._forceFullPlacement&&z>2};for(;this._currentPlacementIndex>=0;){const z=d[c[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=k)&&(!z.maxzoom||z.maxzoom>k)){const N=z,U=N.layout.get("symbol-z-elevate"),$=this._inProgressLayer=this._inProgressLayer||new ad(N),X=o.aE(z.source,z.scope);if($.continuePlacement(U?v[X]:_[X],this.placement,this._showCollisionBoxes,z,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Js=512/o.J/2;class xc{constructor(c,d,_){this.tileID=c,this.bucketInstanceId=_,this.index=new o.aZ(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=c.canonical.x*o.J,S=c.canonical.y*o.J;for(let E=0;E<d.length;E++){const{key:z,crossTileID:k,tileAnchorX:N,tileAnchorY:U}=d.get(E),$=Math.floor((v+N)*Js),X=Math.floor((S+U)*Js);this.index.add($,X),this.keys.push(z),this.crossTileIDs.push(k)}this.index.finish()}findMatches(c,d,_){const v=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),S=Js/Math.pow(2,d.canonical.z-this.tileID.canonical.z),E=d.canonical.x*o.J,z=d.canonical.y*o.J;for(let k=0;k<c.length;k++){const N=c.get(k);if(N.crossTileID)continue;const{key:U,tileAnchorX:$,tileAnchorY:X}=N,Q=Math.floor((E+$)*S),ae=Math.floor((z+X)*S),se=this.index.range(Q-v,ae-v,Q+v,ae+v);for(const re of se){const ne=this.crossTileIDs[re];if(this.keys[re]===U&&!_.has(ne)){_.add(ne),N.crossTileID=ne;break}}}}}class wc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ta{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const d=Math.round((c-this.lng)/360);if(d!==0)for(const _ in this.indexes){const v=this.indexes[_],S={};for(const E in v){const z=v[E];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+d),S[z.tileID.key]=z}this.indexes[_]=S}this.lng=c}addBucket(c,d,_){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let S=0;S<d.symbolInstances.length;S++)d.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]=new Set);const v=this.usedCrossTileIDs[c.overscaledZ];for(const S in this.indexes){const E=this.indexes[S];if(Number(S)>c.overscaledZ)for(const z in E){const k=E[z];k.tileID.isChildOf(c)&&k.findMatches(d.symbolInstances,c,v)}else{const z=E[c.scaledTo(Number(S)).key];z&&z.findMatches(d.symbolInstances,c,v)}}for(let S=0;S<d.symbolInstances.length;S++){const E=d.symbolInstances.get(S);E.crossTileID||(E.crossTileID=_.generate(),v.add(E.crossTileID))}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new xc(c,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(c,d){for(const _ of d.crossTileIDs)this.usedCrossTileIDs[c].delete(_)}removeStaleBuckets(c){let d=!1;for(const _ in this.indexes){const v=this.indexes[_];for(const S in v)c[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,v[S]),delete v[S],d=!0)}return d}}class dh{constructor(){this.layerIndexes={},this.crossTileIDs=new wc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,d,_,v){let S=this.layerIndexes[c.fqid];S===void 0&&(S=this.layerIndexes[c.fqid]=new ta);let E=!1;const z={};v.name!=="globe"&&S.handleWrapJump(_);for(const k of d){const N=k.getBucket(c);N&&c.fqid===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(k.tileID,N,this.crossTileIDs)&&(E=!0),z[N.bucketInstanceId]=!0)}return S.removeStaleBuckets(z)&&(E=!0),E}pruneUnusedLayers(c){const d={};c.forEach(_=>{d[_]=!0});for(const _ in this.layerIndexes)d[_]||delete this.layerIndexes[_]}}var Zl=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Ks=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}`,Yl=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Xl="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Or=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture(u_depth,uv-df.xz)),unpack_depth(texture(u_depth,uv+df.xz)),unpack_depth(texture(u_depth,uv-df.zy)),unpack_depth(texture(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,sd=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Rs=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Qc=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);vec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return (texCoord.xxyy+vec2(1.5,0.5).xyxy)/texResolution.xxyy;}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;vec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texture(u_image0,c.yz),texture(u_image0,c.xz),texture(u_image0,c.yw),texture(u_image0,c.xw)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;vec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texture(u_image1,c.yz),texture(u_image1,c.xz),texture(u_image1,c.yw),texture(u_image1,c.xw)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texture(u_image0,texCoord);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texture(u_image1,texCoord);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,Jl=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,el=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const tl=[];Fi(Zl,tl),Fi(Yl,tl),Fi(Ks,tl);const Ni={"_prelude_fog.vertex.glsl":sd,"_prelude_terrain.vertex.glsl":Or,"_prelude_shadow.vertex.glsl":Jl,"_prelude_fog.fragment.glsl":Rs,"_prelude_shadow.fragment.glsl":el,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Qc},mo={};Gn("",Or),Gn(Rs,sd),Gn(el,Jl),Gn(Qc,"");const go=Gn(Ks,Yl),bo=Zl;var id={background:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Gn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Gn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Gn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Gn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Gn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Gn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
uniform float u_emissive_strength;in float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,v_depth);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=max(0.01,cutoff_opacity(u_cutoff_params,ground.z));if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff < 0.01 && centroid_pos.x !=0.0));gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Gn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Gn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,v_depth));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);v_depth=gl_Position.w;
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Gn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;HANDLE_WIREFRAME_DEBUG;
#endif
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Gn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {    
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trimmed,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float pattern_x=v_linesofar/pattern_size.x*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),symbolIcon:Gn(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
in float v_fade_opacity;in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
uniform mediump float u_icon_saturation;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b)*alpha;
#else
out_color=texture(u_texture,v_tex_a)*alpha;
#endif
#ifdef SATURATION
vec3 luma=vec3(dot(out_color.rgb,vec3(0.2126,0.7152,0.0722)));out_color.rgb=mix(luma,out_color.rgb,u_icon_saturation);
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;}`),symbolSDF:Gn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:Gn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,v_depth,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Gn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Gn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Xl),skyboxGradient:Gn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Xl),skyboxCapture:Gn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Gn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Gn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;highp float depth=unpack_depth(texture(u_depthTexture,coord));return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
return vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);color=mix(color,v_color_mix.rgb,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=u_matrix*pos;pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 shadow_pos=local_pos;
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normalize(normal_3f));shadow_pos+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1);v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Gn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=u_matrix*pos;
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Gn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`)};function Fi(m,c){const d=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of d)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=_.split(" ");for(const S of v)c.includes(S)||c.push(S)}}function Gn(m,c){const d=/#include\s+"([^"]+)"/g,_=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let v=c.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);v&&(v=v.map(N=>{const U=N.split(" ");return U[U.length-1]}),v=[...new Set(v)]);const S={},E=[],z=[];if(m=m.replace(d,(N,U)=>(z.push(U),"")),(c=c.replace(d,(N,U)=>(E.push(U),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let k=[...tl];Fi(m,k),Fi(c,k);for(const N of[...E,...z])Ni[N]||console.error(`Undefined include: ${N}`),mo[N]||(mo[N]=[],Fi(Ni[N],mo[N])),k=[...k,...mo[N]];return{fragmentSource:m=m.replace(_,(N,U,$,X,Q)=>(S[Q]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
in ${$} ${X} ${Q};
#else
uniform ${$} ${X} u_${Q};
#endif
`:U==="initialize"?`
#ifdef HAS_UNIFORM_u_${Q}
    ${$} ${X} ${Q} = u_${Q};
#endif
`:U==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Q}
    in ${$} ${X} ${Q};
#endif
`:U==="initialize-attribute"?"":void 0)),vertexSource:c=c.replace(_,(N,U,$,X,Q)=>{const ae=X==="float"?"vec2":X,se=Q.match(/color/)?"color":ae;return U==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${Q}
in ${$} ${X} a_${Q};
#endif
`:S[Q]?U==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
uniform lowp float u_${Q}_t;
in ${$} ${ae} a_${Q};
out ${$} ${X} ${Q};
#else
uniform ${$} ${X} u_${Q};
#endif
`:U==="initialize"?se==="vec4"?`
#ifndef HAS_UNIFORM_u_${Q}
    ${Q} = a_${Q};
#else
    ${$} ${X} ${Q} = u_${Q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Q}
    ${Q} = unpack_mix_${se}(a_${Q}, u_${Q}_t);
#else
    ${$} ${X} ${Q} = u_${Q};
#endif
`:U==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Q}
    in ${$} ${X} a_${Q};
    out ${$} ${X} ${Q};
#endif
`:U==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Q}
    ${Q} = a_${Q};
#endif
`:void 0:U==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
uniform lowp float u_${Q}_t;
in ${$} ${ae} a_${Q};
#else
uniform ${$} ${X} u_${Q};
#endif
`:U==="define-instanced"?se==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${Q}0;
in vec4 a_${Q}1;
in vec4 a_${Q}2;
in vec4 a_${Q}3;
#else
uniform ${$} ${X} u_${Q};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${$} ${ae} a_${Q};
#else
uniform ${$} ${X} u_${Q};
#endif
`:U==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${Q}
    ${$} ${X} ${Q} = a_${Q};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${Q}
    ${$} ${X} ${Q} = a_${Q};
#else
    ${$} ${X} ${Q} = u_${Q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Q}
    ${$} ${X} ${Q} = unpack_mix_${se}(a_${Q}, u_${Q}_t);
#else
    ${$} ${X} ${Q} = u_${Q};
#endif
`}),staticAttributes:v,usedDefines:k,vertexIncludes:E,fragmentIncludes:z}}class nl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,d,_,v,S,E,z,k){this.context=c;let N=this.boundPaintVertexBuffers.length!==v.length;for(let $=0;!N&&$<v.length;$++)this.boundPaintVertexBuffers[$]!==v[$]&&(N=!0);let U=this.boundDynamicVertexBuffers.length!==z.length;for(let $=0;!U&&$<z.length;$++)this.boundDynamicVertexBuffers[$]!==z[$]&&(U=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==_||N||U||this.boundIndexBuffer!==S||this.boundVertexOffset!==E)this.freshBind(d,_,v,S,E,z,k);else{c.bindVertexArrayOES.set(this.vao);for(const $ of z)$&&($.bind(),k&&$.instanceCount&&$.setVertexAttribDivisor(c.gl,d,k));S&&S.dynamicDraw&&S.bind()}}freshBind(c,d,_,v,S,E,z){const k=c.numAttributes,N=this.context,U=N.gl;this.vao&&this.destroy(),this.vao=N.gl.createVertexArray(),N.bindVertexArrayOES.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=E,d.enableAttributes(U,c),d.bind(),d.setVertexAttribPointers(U,c,S);for(const $ of _)$.enableAttributes(U,c),$.bind(),$.setVertexAttribPointers(U,c,S);for(const $ of E)$&&($.enableAttributes(U,c),$.bind(),$.setVertexAttribPointers(U,c,S),z&&$.instanceCount&&$.setVertexAttribDivisor(U,c,z));v&&v.bind(),N.currentNumAttributes=k}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function od(m,c){const d=Math.pow(2,c.canonical.z),_=c.canonical.y;return[new o.M(0,_/d).toLngLat().lat,new o.M(0,(_+1)/d).toLngLat().lat]}function cd(m,c,d,_,v,S,E){const z=m.context,k=z.gl,N=d.hillshadeFBO;if(!N)return;m.prepareDrawTile();const U=m.isTileAffectedByFog(c),$=m.getOrCreateProgram("hillshade",{overrideFog:U});z.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,N.colorAttachment.get());const X=((re,ne,de,ye)=>{const xe=de.paint.get("hillshade-shadow-color"),ce=de.paint.get("hillshade-highlight-color"),pe=de.paint.get("hillshade-accent-color"),we=de.paint.get("hillshade-emissive-strength");let Ce=o.d(de.paint.get("hillshade-illumination-direction"));if(de.paint.get("hillshade-illumination-anchor")==="viewport")Ce-=re.transform.angle;else if(re.style&&re.style.enable3dLights()&&re.style.directionalLight){const Le=re.style.directionalLight.properties.get("direction"),nt=o.b3(Le.x,Le.y,Le.z);Ce=o.d(nt[1])}const Ee=!re.options.moving;return{u_matrix:ye||re.transform.calculateProjMatrix(ne.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:od(0,ne.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Ce],u_shadow:xe,u_highlight:ce,u_emissive_strength:we,u_accent:pe}})(m,d,_,m.terrain?c.projMatrix:null);m.uploadCommonUniforms(z,$,c.toUnwrapped());const{tileBoundsBuffer:Q,tileBoundsIndexBuffer:ae,tileBoundsSegments:se}=m.getTileBoundsBuffers(d);$.draw(m,k.TRIANGLES,v,S,E,o.b5.disabled,X,_.id,Q,ae,se)}function al(m,c,d){if(!c.needsDEMTextureUpload)return;const _=m.context,v=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||m.getTileTexture(d.stride);const S=d.getPixels();c.demTexture?c.demTexture.update(S,{premultiply:!1}):c.demTexture=new o.a9(_,S,v.R32F,{premultiply:!1}),c.needsDEMTextureUpload=!1}function rl(m,c,d){const _=m.context,v=_.gl;if(!c.dem)return;const S=c.dem;if(_.activeTexture.set(v.TEXTURE1),al(m,c,S),!c.demTexture)return;c.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE);const E=S.dim;_.activeTexture.set(v.TEXTURE0);let z=c.hillshadeFBO;if(!z){const X=new o.a9(_,{width:E,height:E,data:null},v.RGBA);X.bind(v.LINEAR,v.CLAMP_TO_EDGE),z=c.hillshadeFBO=_.createFramebuffer(E,E,!0,"renderbuffer"),z.colorAttachment.set(X.texture)}_.bindFramebuffer.set(z.framebuffer),_.viewport.set([0,0,E,E]);const{tileBoundsBuffer:k,tileBoundsIndexBuffer:N,tileBoundsSegments:U}=m.getMercatorTileBoundsBuffers(),$=[];m.linearFloatFilteringSupported()&&$.push("TERRAIN_DEM_FLOAT_FORMAT"),m.getOrCreateProgram("hillshadePrepare",{defines:$}).draw(m,v.TRIANGLES,o.b4.disabled,o.b6.disabled,o.a.unblended,o.b5.disabled,((X,Q)=>{const ae=Q.stride,se=o.m.create();return o.m.ortho(se,0,o.J,-o.J,0,0,1),o.m.translate(se,se,[0,-o.J,0]),{u_matrix:se,u_image:1,u_dimension:[ae,ae],u_zoom:X.overscaledZ}})(c.tileID,S),d.id,k,N,U),c.needsHillshadePrepare=!1}const Kl=m=>({u_matrix:new o.a_(m),u_image0:new o.a$(m),u_skirt_height:new o.b2(m),u_ground_shadow_factor:new o.b7(m)}),ld=(m,c,d)=>({u_matrix:m,u_image0:0,u_skirt_height:c,u_ground_shadow_factor:d}),ud=(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:d,u_zoom_transition:v,u_merc_center:S,u_image0:0,u_frustum_tl:E,u_frustum_tr:z,u_frustum_br:k,u_frustum_bl:N,u_globe_pos:U,u_globe_radius:$,u_viewport:X,u_grid_matrix:ae?Float32Array.from(ae):new Float32Array(9),u_skirt_height:Q}),$o=(m,c)=>{if(c>0&&m.terrain&&o.X("Cutoff is currently disabled on terrain"),c<=0||m.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=m.transform,_=Math.max(Math.abs(d._zoom-(m.minCutoffZoom-1)),1),v=d.isLODDisabled(!1)?o.an(60,45,d.pitch):o.an(30,15,d.pitch),S=d._farZ-d._nearZ,E=c*d.height,z=((1-(k=v))*d.cameraToCenterDistance+k*(d._farZ+E))*_;var k;return{shouldRenderCutoff:v<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(z-d._nearZ)/S,(z-E-d._nearZ)/S]}}};function dd(m,c){return m!=null&&c!=null&&!(!m.hasData()||!c.hasData())&&m.demTexture!=null&&c.demTexture!=null&&m.tileID.key!==c.tileID.key}const Qs=new class{constructor(){this.operations={}}newMorphing(m,c,d,_,v){if(m in this.operations){const S=this.operations[m];S.to.tileID.key!==d.tileID.key&&(S.queued=d)}else this.operations[m]={startTime:_,phase:0,duration:v,from:c,to:d,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const c=this.operations[m];return{from:c.from,to:c.to,phase:c.phase}}update(m){for(const c in this.operations){const d=this.operations[c];for(d.phase=(m-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,m)){delete this.operations[c];break}}}_nextOp(m,c){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=c,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},Sc={0:null,1:"TERRAIN_VERTEX_MORPHING"};function ji(m,c,d){if(c===0)return 0;const _=c<1&&d===514?.25/c:1;return 6*Math.pow(1.5,22-m)*Math.max(c,1)*_}function ei(m,c){const d=1<<m.z;return!c&&(m.x===0||m.x===d-1)||m.y===0||m.y===d-1}const bi=m=>({u_matrix:m});function qo(m,c,d,_,v){if(v>0){const S=o.a4.now(),E=(S-m.timeAdded)/v,z=c?(S-c.timeAdded)/v:-1,k=d.getSource(),N=_.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),U=!c||Math.abs(c.tileID.overscaledZ-N)>Math.abs(m.tileID.overscaledZ-N),$=U&&m.refreshedUponExpiration?1:o.c(U?E:1-z,0,1);return m.refreshedUponExpiration&&E>=1&&(m.refreshedUponExpiration=!1),c?{opacity:1,mix:1-$}:{opacity:$,mix:0}}return{opacity:1,mix:0}}class vt extends o.bq{constructor(c){const d={type:"raster-dem",maxzoom:c.transform.maxZoom},_=new o.br(o.bs(),null),v=Ys("mock-dem",d,_,c.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,d){c.state="loaded",d(null)}}class Ip extends o.bq{constructor(c){const d=Ys("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new o.br(o.bs(),null),c.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,d,_){if(c.freezeTileCoverage)return;this.transform=c;const v=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,E)=>{if(S[E.key]="",!this._tiles[E.key]){const z=new o.bt(E,this._source.tileSize*E.overscaleFactor(),c.tileZoom);z.state="loaded",this._tiles[E.key]=z}return S},{});for(const S in this._tiles)S in v||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(c){const d=this.proxyCachedFBO[c];if(d!==void 0){const _=Object.values(d);this.renderCachePool.push(..._),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Wo extends o.O{constructor(c,d,_){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=d,this.projMatrix=_}}class Ho extends o.bk{constructor(c,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},c.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),c.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),c.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,v,S]=function(k){const N=new o.bo,U=new o.bp,$=131;N.reserve(17161),U.reserve(33800);const X=o.J/128,Q=o.J+X/2,ae=Q+X;for(let re=-X;re<ae;re+=X)for(let ne=-X;ne<ae;ne+=X){const de=ne<0||ne>Q||re<0||re>Q?24575:0,ye=o.c(Math.round(ne),0,o.J),xe=o.c(Math.round(re),0,o.J);N.emplaceBack(ye+de,xe)}const se=(re,ne)=>{const de=ne*$+re;U.emplaceBack(de+1,de,de+$),U.emplaceBack(de+$,de+$+1,de+1)};for(let re=1;re<129;re++)for(let ne=1;ne<129;ne++)se(ne,re);return[0,129].forEach(re=>{for(let ne=0;ne<130;ne++)se(ne,re),se(re,ne)}),[N,U,32768]}(),E=c.context;this.gridBuffer=E.createVertexBuffer(_,o.bl.members),this.gridIndexBuffer=E.createIndexBuffer(v),this.gridSegments=o.bm.simpleSegment(0,0,_.length,v.length),this.gridNoSkirtSegments=o.bm.simpleSegment(0,0,_.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ip(d.map),this.orthoMatrix=o.m.create(),o.m.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.J,0,o.J,0,1);const z=E.gl;this._overlapStencilMode=new o.b6({func:z.GEQUAL,mask:255},0,255,z.KEEP,z.KEEP,z.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new vt(d.map),this._pendingGroundEffectLayers=[]}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),this._style=c,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(c,d,_){if(c&&c.terrain){this._style!==c&&(this.style=c,this._evaluationZoom=void 0);const v=c.terrain.properties,S=c.terrain.drapeRenderMode===0,E=c.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=o.a4.now();const z=c.terrain&&c.terrain.scope,k=v.get("source"),N=S?this._mockSourceCache:c.getSourceCache(k,z);if(!N)return void o.X(`Couldn't find terrain source "${k}".`);if(this.sourceCache=N,this._exaggeration=E?this.calculateExaggeration(d):v.get("exaggeration"),!d.projection.requiresDraping&&E&&this._exaggeration===0)return void this._disable();this.enabled=!0;const U=()=>{this.sourceCache.used&&o.X(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const $=this.getScaledDemTileSize();this.sourceCache.update(d,$,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,U(),this._initializing=!0),U(),d.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(c){const d=this._previousCameraAltitude,_=c.getFreeCameraOptions().position.z/c.pixelsPerMeter*c.worldSize;this._previousCameraAltitude=_;const v=d!=null?_-d:Number.MAX_VALUE;if(Math.abs(v)<2)return this._exaggeration;const S=c.zoom,E=this._style.terrain;if(!this._previousUpdateTimestamp)return E.getExaggeration(S);let z=S-this._previousZoom;const k=this._previousUpdateTimestamp;let N=S;this._evaluationZoom!=null&&(N=this._evaluationZoom,Math.abs(S-N)>.5&&(z=.5*(S-N+z)),z*v<0&&(N+=z)),this._evaluationZoom=N;const U=E.getExaggeration(N),$=U===E.getExaggeration(Math.max(0,N-.1));if($&&Math.abs(U-this._exaggeration)<.01)return U;let X=Math.min(.1,.00375*(this._updateTimestamp-k));return($||U<.1||Math.abs(z)<1e-4)&&(X=Math.min(.2,4*X)),o.n(this._exaggeration,U,X)}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._mergedSourceCaches)this._style._mergedSourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(o.M.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=d.getIds().map(k=>{const N=d.getTileByID(k).tileID;return N.projMatrix=_.calculateProjMatrix(N.toUnwrapped()),N});(function(k,N){const U=N.transform.pointCoordinate(N.transform.getCameraPoint()),$=new o.P(U.x,U.y);k.sort((X,Q)=>{if(Q.overscaledZ-X.overscaledZ)return Q.overscaledZ-X.overscaledZ;const ae=new o.P(X.canonical.x+(1<<X.canonical.z)*X.wrap,X.canonical.y),se=new o.P(Q.canonical.x+(1<<Q.canonical.z)*Q.wrap,Q.canonical.y),re=$.mult(1<<X.canonical.z);return re.x-=.5,re.y-=.5,re.distSqr(ae)-re.distSqr(se)})})(v,this.painter);const S=this.proxyToSource||{};this.proxyToSource={},v.forEach(k=>{this.proxyToSource[k.key]={}}),this.terrainTileForTile={};const E=this._style._mergedSourceCaches;for(const k in E){const N=E[k];if(!N.used||(N!==this.sourceCache&&this.resetTileLookupCache(N.id),this._setupProxiedCoordsForOrtho(N,c[k],S),N.usedForTerrain))continue;const U=c[k];N.getSource().reparseOverscaled&&this._assignTerrainTiles(U)}this.proxiedCoords[d.id]=v.map(k=>new Wo(k,k.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1;const z={};this._visibleDemTiles=[];for(const k of this.proxyCoords){const N=this.terrainTileForTile[k.key];if(!N)continue;const U=N.tileID.key;U in z||(this._visibleDemTiles.push(N),z[U]=U)}}_assignTerrainTiles(c){this._initializing||c.forEach(d=>{if(this.terrainTileForTile[d.key])return;const _=this._findTileCoveringTileID(d,this.sourceCache);_&&(this.terrainTileForTile[d.key]=_)})}_prepareDEMTextures(){const c=this.painter.context,d=c.gl;for(const _ in this.terrainTileForTile){const v=this.terrainTileForTile[_],S=v.dem;!S||v.demTexture&&!v.needsDEMTextureUpload||(c.activeTexture.set(d.TEXTURE1),al(this.painter,v,S))}}_prepareDemTileUniforms(c,d,_,v){if(!d||d.demTexture==null)return!1;const S=c.tileID.canonical,E=Math.pow(2,d.tileID.canonical.z-S.z),z=v||"";return _[`u_dem_tl${z}`]=[S.x*E%1,S.y*E%1],_[`u_dem_scale${z}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,d=c.gl;if(!this._emptyDepthBufferTexture){const _=new o.a5({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.a9(c,_,d.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const d=this._visibleDemTiles.reduce((_,v)=>{if(!v.dem)return _;const S=v.dem.tree.minimums[0];return S>0&&c++,_+S},0);return c?d/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,d=c.gl;c.activeTexture.set(d.TEXTURE2);const _=this._getLoadedAreaMinimum(),[v,S]=(()=>{const z=new o.bu({width:1,height:1},new Float32Array([_]));return[d.R32F,z]})();this._emptyDEMTextureDirty=!1;let E=this._emptyDEMTexture;return E?E.update(S,{premultiply:!1}):E=this._emptyDEMTexture=new o.a9(c,S,v,{premultiply:!1}),E}setupElevationDraw(c,d,_){const v=this.painter.context,S=v.gl,E={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0};E.u_exaggeration=this.exaggeration();let z=null,k=null,N=1;if(_&&_.morphing&&this._useVertexMorphing){const X=_.morphing.srcDemTile,Q=_.morphing.dstDemTile;N=_.morphing.phase,X&&Q&&(this._prepareDemTileUniforms(c,X,E,"_prev")&&(k=X),this._prepareDemTileUniforms(c,Q,E)&&(z=Q))}const U=X=>X&&X.demTexture&&this.painter.linearFloatFilteringSupported()?S.LINEAR:S.NEAREST,$=X=>{E.u_dem_size=X.size[0]===1?1:X.size[0]-2};if(k&&z)v.activeTexture.set(S.TEXTURE2),z.demTexture.bind(U(z),S.CLAMP_TO_EDGE),v.activeTexture.set(S.TEXTURE4),k.demTexture.bind(U(k),S.CLAMP_TO_EDGE),z.demTexture&&$(z.demTexture),E.u_dem_lerp=N;else{z=this.terrainTileForTile[c.tileID.key],v.activeTexture.set(S.TEXTURE2);const X=this._prepareDemTileUniforms(c,z,E)?z.demTexture:this.emptyDEMTexture;X.bind(U(z),S.CLAMP_TO_EDGE),$(X)}if(v.activeTexture.set(S.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),this._depthFBO&&(E.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),E.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&z){const X=(1<<z.tileID.canonical.z)*o.b(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=X}if(_&&_.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),d.setTerrainUniformValues(v,E),this.painter.transform.projection.name==="globe"){const X=this.globeUniformValues(this.painter.transform,c.tileID.canonical,_&&_.useDenormalizedUpVectorScale);d.setGlobeUniformValues(v,X)}}globeUniformValues(c,d,_){const v=c.projection;return{u_tile_tl_up:v.upVector(d,0,0),u_tile_tr_up:v.upVector(d,o.J,0),u_tile_br_up:v.upVector(d,o.J,o.J),u_tile_bl_up:v.upVector(d,0,o.J),u_tile_up_scale:_?o.bn(1):v.upVectorScale(d,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const d=this.painter,_=this.painter.context;c.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,S,E,z,k){if(v.transform.projection.name==="globe")(function(N,U,$,X,Q){const ae=N.context,se=ae.gl;let re,ne;const de=N.transform,ye=o.bb(N,ae,de),xe=(Je,Oe)=>{if(ne===Oe)return;const tt=[Sc[Oe],"PROJECTION_GLOBE_VIEW"];ye&&tt.push("CUSTOM_ANTIALIASING");const Ze=N.isTileAffectedByFog(Je);re=N.getOrCreateProgram("globeRaster",{defines:tt,overrideFog:Ze}),ne=Oe},ce=N.colorModeForRenderPass(),pe=new o.b4(se.LEQUAL,o.b4.ReadWrite,N.depthRangeFor3D);Qs.update(Q);const we=o.bc(de),Ce=[o.E(de.center.lng),o.H(de.center.lat)],Ee=N.globeSharedBuffers,Le=[de.width*o.a4.devicePixelRatio,de.height*o.a4.devicePixelRatio],nt=Float32Array.from(de.globeMatrix),$e={useDenormalizedUpVectorScale:!0};{const Je=N.transform,Oe=ji(Je.zoom,U.exaggeration(),U.sourceCache._source.tileSize);ne=-1;const tt=se.TRIANGLES;for(const Ze of X){const st=$.getTile(Ze),be=o.b6.disabled,Fe=U.prevTerrainTileForTile[Ze.key],mt=U.terrainTileForTile[Ze.key];dd(Fe,mt)&&Qs.newMorphing(Ze.key,Fe,mt,Q,250),ae.activeTexture.set(se.TEXTURE0),st.texture&&st.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);const ct=Qs.getMorphValuesForProxy(Ze.key),Wt=ct?1:0;ct&&o.bd($e,{morphing:{srcDemTile:ct.from,dstDemTile:ct.to,phase:o.ba(ct.phase)}});const jt=o.be(Ze.canonical),rn=o.bf(jt.getCenter().lat),Vt=o.bg(Ze.canonical,jt,rn,Je.worldSize/Je._pixelsPerMercatorPixel),pn=o.bh(o.bi(Ze.canonical)),fn=ud(Je.expandedFarZProjMatrix,nt,we,pn,o.ao(Je.zoom),Ce,Je.frustumCorners.TL,Je.frustumCorners.TR,Je.frustumCorners.BR,Je.frustumCorners.BL,Je.globeCenterInViewSpace,Je.globeRadius,Le,Oe,Vt);if(xe(Ze,Wt),re&&(U.setupElevationDraw(st,re,$e),N.uploadCommonUniforms(ae,re,Ze.toUnwrapped()),Ee)){const[Kt,en,Jn]=Ee.getGridBuffers(rn,Oe!==0);re.draw(N,tt,pe,be,ce,o.b5.backCCW,fn,"globe_raster",Kt,en,Jn)}}}if(Ee&&(N.renderDefaultNorthPole||N.renderDefaultSouthPole)){const Je=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ye&&Je.push("CUSTOM_ANTIALIASING"),re=N.getOrCreateProgram("globeRaster",{defines:Je});for(const Oe of X){const{x:tt,y:Ze,z:st}=Oe.canonical,be=Ze===0,Fe=Ze===(1<<st)-1,[mt,ct,Wt,jt]=Ee.getPoleBuffers(st,!1);if(jt&&(be||Fe)){const rn=$.getTile(Oe);ae.activeTexture.set(se.TEXTURE0),rn.texture&&rn.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);let Vt=o.bj(st,tt,de);const pn=o.bh(o.bi(Oe.canonical)),fn=(Kt,en)=>Kt.draw(N,se.TRIANGLES,pe,o.b6.disabled,ce,o.b5.disabled,ud(de.expandedFarZProjMatrix,Vt,Vt,pn,0,Ce,de.frustumCorners.TL,de.frustumCorners.TR,de.frustumCorners.BR,de.frustumCorners.BL,de.globeCenterInViewSpace,de.globeRadius,Le,0),"globe_pole_raster",en,Wt,jt);U.setupElevationDraw(rn,re,$e),N.uploadCommonUniforms(ae,re,Oe.toUnwrapped()),be&&N.renderDefaultNorthPole&&fn(re,mt),Fe&&N.renderDefaultSouthPole&&(Vt=o.m.scale(o.m.create(),Vt,[1,-1,1]),fn(re,ct))}}}})(v,S,E,z,k);else{const N=v.context,U=N.gl;let $,X;const Q=v.shadowRenderer,ae=$o(v,v.longestCutoffRange),se=ce=>{if(X===ce)return;const pe=[];pe.push(Sc[ce]),ae.shouldRenderCutoff&&pe.push("RENDER_CUTOFF"),$=v.getOrCreateProgram("terrainRaster",{defines:pe}),X=ce},re=v.colorModeForRenderPass(),ne=new o.b4(U.LEQUAL,o.b4.ReadWrite,v.depthRangeFor3D);Qs.update(k);const de=v.transform,ye=ji(de.zoom,S.exaggeration(),S.sourceCache._source.tileSize);let xe=[0,0,0];if(Q){const ce=v.style.directionalLight,pe=v.style.ambientLight;ce&&pe&&(xe=Cp(ce,pe))}{X=-1;const ce=U.TRIANGLES,[pe,we]=[S.gridIndexBuffer,S.gridSegments];for(const Ce of z){const Ee=E.getTile(Ce),Le=o.b6.disabled,nt=S.prevTerrainTileForTile[Ce.key],$e=S.terrainTileForTile[Ce.key];dd(nt,$e)&&Qs.newMorphing(Ce.key,nt,$e,k,250),N.activeTexture.set(U.TEXTURE0),Ee.texture&&Ee.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE);const Je=Qs.getMorphValuesForProxy(Ce.key),Oe=Je?1:0;let tt;Je&&(tt={morphing:{srcDemTile:Je.from,dstDemTile:Je.to,phase:o.ba(Je.phase)}});const Ze=ld(Ce.projMatrix,ei(Ce.canonical,de.renderWorldCopies)?ye/10:ye,xe);if(se(Oe),!$)continue;S.setupElevationDraw(Ee,$,tt);const st=Ce.toUnwrapped();Q&&Q.setupShadows(st,$),v.uploadCommonUniforms(N,$,st,null,ae),$.draw(v,ce,ne,Le,re,o.b5.backCCW,Ze,"terrain_raster",S.gridBuffer,pe,we)}}}}(d,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const d=this.painter,_=this.painter.context,v=this.proxySourceCache,S=this.proxiedCoords[v.id],E=this._drapedRenderBatches.shift(),z=d.style.order,k=[];let N=0;for(const U of S){const $=v.getTileByID(U.proxyTileKey),X=v.proxyCachedFBO[U.key]?v.proxyCachedFBO[U.key][c]:void 0,Q=X!==void 0?v.renderCache[X]:this.pool[N++],ae=X!==void 0;if($.texture=Q.tex,ae&&!Q.dirty){k.push($.tileID);continue}let se;_.bindFramebuffer.set(Q.fb.framebuffer),this.renderedToTile=!1,Q.dirty&&(_.clear({color:o.C.transparent,stencil:0}),Q.dirty=!1);for(let re=E.start;re<=E.end;++re){const ne=d.style._mergedLayers[z[re]];if(ne.isHidden(d.transform.zoom))continue;const de=d.style.getLayerSourceCache(ne),ye=de?this.proxyToSource[U.key][de.id]:[U];if(!ye)continue;const xe=ye;_.viewport.set([0,0,Q.fb.width,Q.fb.height]),se!==(de?de.id:null)&&(this._setupStencil(Q,ye,ne,de),se=de?de.id:null),d.renderLayer(d,de,ne,xe)}if(this._drapedRenderBatches.length===0)for(const re of this._pendingGroundEffectLayers){const ne=d.style._mergedLayers[z[re]];if(ne.isHidden(d.transform.zoom))continue;const de=d.style.getLayerSourceCache(ne),ye=de?this.proxyToSource[U.key][de.id]:[U];if(!ye)continue;const xe=ye;_.viewport.set([0,0,Q.fb.width,Q.fb.height]),se!==(de?de.id:null)&&(this._setupStencil(Q,ye,ne,de),se=de?de.id:null),d.renderLayer(d,de,ne,xe)}this.renderedToTile?(Q.dirty=!0,k.push($.tileID)):ae||--N,N===5&&(N=0,this.renderToBackBuffer(k))}return this.renderToBackBuffer(k),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,d.width,d.height]),E.end+1}postRender(){}isLayerOrderingCorrect(c){const d=c.order.length;let _=-1,v=d;for(let S=0;S<d;++S)this._style.isLayerDraped(c._mergedLayers[c.order[S]])?_=Math.max(_,S):v=Math.min(v,S);return v>_}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{c=Math.min(c,d.dem.tree.minimums[0])}),c===0?c:(c-30)*this._exaggeration}raycast(c,d,_){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const E=S.tileID,z=1<<E.overscaledZ,{x:k,y:N}=E.canonical,U=k/z,$=(k+1)/z,X=N/z,Q=(N+1)/z;return{minx:U,miny:X,maxx:$,maxy:Q,t:S.dem.tree.raycastRoot(U,X,$,Q,c,d,_),tile:S}});v.sort((S,E)=>(S.t!==null?S.t:Number.MAX_VALUE)-(E.t!==null?E.t:Number.MAX_VALUE));for(const S of v){if(S.t==null)return null;const E=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,c,d,_);if(E!=null)return E}return null}_createFBO(){const c=this.painter.context,d=c.gl,_=this.drapeBufferSize;c.activeTexture.set(d.TEXTURE0);const v=new o.a9(c,{width:_[0],height:_[1],data:null},d.RGBA);v.bind(d.LINEAR,d.CLAMP_TO_EDGE);const S=c.createFramebuffer(_[0],_[1],!0,null);return S.colorAttachment.set(v.texture),S.depthAttachment=new aa(c,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:S,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const c in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const d=this._style._mergedLayers[c],_=d.isHidden(this.painter.transform.zoom);return d.type==="custom"?!_&&d.shouldRedrape():!_&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let c=!1;for(const _ of this._style.getSources())if(_ instanceof Ve){c=!0;break}if(!c)return;const d={};for(let _=0;_<this._style.order.length;++_){const v=this._style._mergedLayers[this._style.order[_]],S=this._style.getLayerSourceCache(v);if(S&&!d[S.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof o.am){d[S.id]=!0;for(const E of this.proxyCoords){const z=this.proxyToSource[E.key][S.id];if(z)for(const k of z)this._clearRenderCacheForTile(S.id,k)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const _ in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[_]._source instanceof Xt){c=!0;break}if(!c)return;const d={};for(let _=0;_<this._style.order.length;++_){const v=this._style._mergedLayers[this._style.order[_]],S=this._style.getLayerSourceCache(v);if(!S||d[S.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const E=v.paint.get("raster-fade-duration");for(const z of this.proxyCoords){const k=this.proxyToSource[z.key][S.id];if(k)for(const N of k){const U=qo(S.getTile(N),S.findLoadedParent(N,0),S,this.painter.transform,E);(U.opacity!==1||U.mix!==0)&&this._clearRenderCacheForTile(S.id,N)}}}}_setupDrapedRenderBatches(){const c=this._style.order,d=c.length;if(d===0)return;const _=[];this._pendingGroundEffectLayers=[];let v,S=0,E=this._style._mergedLayers[c[S]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++S<d;)E=this._style._mergedLayers[c[S]];for(;S<d;++S){const z=this._style._mergedLayers[c[S]];z.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(z)?v===void 0&&(v=S):(z.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(S),v!==void 0&&(_.push({start:v,end:S-1}),v=void 0)))}if(v!==void 0&&_.push({start:v,end:S-1}),_.length!==0){const z=_[_.length-1];this._pendingGroundEffectLayers.every(k=>k>z.end)||o.X("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=_}_setupRenderCache(c){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const E=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let z=0;z<E.length;++z){const k=Object.values(E[z]);d.renderCachePool.push(...k)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,v=this._tilesDirty;for(let E=_.length-1;E>=0;E--){const z=_[E];if(d.getTileByID(z.key),d.proxyCachedFBO[z.key]!==void 0){const k=c[z.key],N=this.proxyToSource[z.key];let U=0;for(const $ in N){const X=N[$],Q=k[$];if(!Q||Q.length!==X.length||X.some((ae,se)=>ae!==Q[se]||v[$]&&v[$].hasOwnProperty(ae.key))){U=-1;break}++U}for(const $ in d.proxyCachedFBO[z.key])d.renderCache[d.proxyCachedFBO[z.key][$]].dirty=U<0||U!==Object.values(k).length}}const S=[...this._drapedRenderBatches];S.sort((E,z)=>z.end-z.start-(E.end-E.start));for(const E of S)for(const z of _){if(d.proxyCachedFBO[z.key])continue;let k=d.renderCachePool.pop();k===void 0&&d.renderCache.length<50&&(k=d.renderCache.length,d.renderCache.push(this._createFBO())),k!==void 0&&(d.proxyCachedFBO[z.key]={},d.proxyCachedFBO[z.key][E.start]=k,d.renderCache[k].dirty=!0)}this._tilesDirty={}}_setupStencil(c,d,_,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,E=S.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let z;if(_.isTileClipped())z=d.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);z=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+z>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=z,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):o.b6.disabled}_renderTileClippingMasks(c,d){const _=this.painter,v=this.painter.context,S=v.gl;_._tileClippingMaskIDs={},v.setColorMode(o.a.disabled),v.setDepthMode(o.b4.disabled);const E=_.getOrCreateProgram("clippingMask");for(const z of c){const k=_._tileClippingMaskIDs[z.key]=--d;E.draw(_,S.TRIANGLES,o.b4.disabled,new o.b6({func:S.ALWAYS,mask:0},k,255,S.KEEP,S.KEEP,S.REPLACE),o.a.disabled,o.b5.disabled,bi(z.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(c){const d=this.painter.transform;if(c.x<0||c.x>d.width||c.y<0||c.y>d.height)return null;const _=[c.x,c.y,1,1];o.e.transformMat4(_,_,d.pixelMatrixInverse),o.e.scale(_,_,1/_[3]),_[0]/=d.worldSize,_[1]/=d.worldSize;const v=d._camera.position,S=o.b(1,d.center.lat),E=[v[0],v[1],v[2]/S,0],z=o.v.subtract([],_.slice(0,3),E);o.v.normalize(z,z);const k=this.raycast(E,z,this._exaggeration);return k!==null&&k?(o.v.scaleAndAdd(E,E,z,k),E[3]=E[2],E[2]*=S,E):null}drawDepth(){const c=this.painter,d=c.context,_=this.proxySourceCache,v=Math.ceil(c.width),S=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===S||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const E=d.gl,z=d.createFramebuffer(v,S,!0,"renderbuffer");d.activeTexture.set(E.TEXTURE0);const k=new o.a9(d,{width:v,height:S,data:null},E.RGBA);k.bind(E.NEAREST,E.CLAMP_TO_EDGE),z.colorAttachment.set(k.texture);const N=d.createRenderbuffer(d.gl.DEPTH_COMPONENT16,v,S);z.depthAttachment.set(N),this._depthFBO=z,this._depthTexture=k}d.bindFramebuffer.set(this._depthFBO.framebuffer),d.viewport.set([0,0,v,S]),function(E,z,k,N){if(E.transform.projection.name==="globe")return;const U=E.context,$=U.gl;U.clear({depth:1});const X=E.getOrCreateProgram("terrainDepth"),Q=new o.b4($.LESS,o.b4.ReadWrite,E.depthRangeFor3D);for(const ae of N){const se=k.getTile(ae),re=ld(ae.projMatrix,0,[0,0,0]);z.setupElevationDraw(se,X),X.draw(E,$.TRIANGLES,Q,o.b6.disabled,o.a.unblended,o.b5.backCCW,re,"terrain_depth",z.gridBuffer,z.gridIndexBuffer,z.gridNoSkirtSegments)}}(c,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,d,_){if(c.getSource()instanceof o.aK)return this._setupProxiedCoordsForImageSource(c,d,_);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const v=this.proxiedCoords[c.id]=[],S=this.proxyCoords;for(let k=0;k<S.length;k++){const N=S[k],U=this._findTileCoveringTileID(N,c);if(U){const $=this._createProxiedId(N,U,_[N.key]&&_[N.key][c.id]);v.push($),this.proxyToSource[N.key][c.id]=[$]}}let E=!1;const z=new Set;for(let k=0;k<d.length;k++){const N=c.getTile(d[k]);if(!N||!N.hasData())continue;const U=this._findTileCoveringTileID(N.tileID,this.proxySourceCache);if(U&&U.tileID.canonical.z!==N.tileID.canonical.z){const $=this.proxyToSource[U.tileID.key][c.id],X=this._createProxiedId(U.tileID,N,_[U.tileID.key]&&_[U.tileID.key][c.id]);$?$.splice($.length-1,0,X):this.proxyToSource[U.tileID.key][c.id]=[X];const Q=this.proxyToSource[U.tileID.key][c.id];z.has(Q)||z.add(Q),v.push(X),E=!0}}if(this._sourceTilesOverlap[c.id]=E,E&&this._debugParams.sortTilesHiZFirst)for(const k of z)k.sort((N,U)=>U.overscaledZ-N.overscaledZ)}_setupProxiedCoordsForImageSource(c,d,_){if(!c.getSource().loaded())return;const v=this.proxiedCoords[c.id]=[],S=this.proxyCoords,E=c.getSource(),z=E.tileID;if(!z)return;const k=new o.P(z.x,z.y)._div(1<<z.z),N=E.coordinates.map(o.M.fromLngLat).reduce(($,X)=>($.min.x=Math.min($.min.x,X.x-k.x),$.min.y=Math.min($.min.y,X.y-k.y),$.max.x=Math.max($.max.x,X.x-k.x),$.max.y=Math.max($.max.y,X.y-k.y),$),{min:new o.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),U=($,X)=>{const Q=$.wrap+$.canonical.x/(1<<$.canonical.z),ae=$.canonical.y/(1<<$.canonical.z),se=o.J/(1<<$.canonical.z),re=X.wrap+X.canonical.x/(1<<X.canonical.z),ne=X.canonical.y/(1<<X.canonical.z);return Q+se<re+N.min.x||Q>re+N.max.x||ae+se<ne+N.min.y||ae>ne+N.max.y};for(let $=0;$<S.length;$++){const X=S[$];for(let Q=0;Q<d.length;Q++){const ae=c.getTile(d[Q]);if(!ae||!ae.hasData()||U(X,ae.tileID))continue;const se=this._createProxiedId(X,ae,_[X.key]&&_[X.key][c.id]),re=this.proxyToSource[X.key][c.id];re?re.push(se):this.proxyToSource[X.key][c.id]=[se],v.push(se)}}}_createProxiedId(c,d,_){let v=this.orthoMatrix;if(_){const S=_.find(E=>E.key===d.tileID.key);if(S)return S}if(d.tileID.key!==c.key){const S=c.canonical.z-d.tileID.canonical.z;let E,z,k;v=o.m.create();const N=d.tileID.wrap-c.wrap<<c.overscaledZ;S>0?(E=o.J>>S,z=E*((d.tileID.canonical.x<<S)-c.canonical.x+N),k=E*((d.tileID.canonical.y<<S)-c.canonical.y)):(E=o.J<<-S,z=o.J*(d.tileID.canonical.x-(c.canonical.x+N<<-S)),k=o.J*(d.tileID.canonical.y-(c.canonical.y<<-S))),o.m.ortho(v,0,E,0,E,0,1),o.m.translate(v,v,[z,k,0])}return new Wo(d.tileID,c.key,v)}_findTileCoveringTileID(c,d){let _=d.getTile(c);if(_&&_.hasData())return _;const v=this._findCoveringTileCache[d.id],S=v[c.key];if(_=S?d.getTileByID(S):null,_&&_.hasData()||S===null)return _;let E=_?_.tileID:c,z=E.overscaledZ;const k=d.getSource().minzoom,N=[];if(!S){const $=d.getSource().maxzoom;if(c.canonical.z>=$){const X=c.canonical.z-$;d.getSource().reparseOverscaled?(z=Math.max(c.canonical.z+2,d.transform.tileZoom),E=new o.O(z,c.wrap,$,c.canonical.x>>X,c.canonical.y>>X)):X!==0&&(z=$,E=new o.O(z,c.wrap,$,c.canonical.x>>X,c.canonical.y>>X))}E.key!==c.key&&(N.push(E.key),_=d.getTile(E))}const U=$=>{N.forEach(X=>{v[X]=$}),N.length=0};for(z-=1;z>=k&&(!_||!_.hasData());z--){_&&U(_.tileID.key);const $=E.calculateScaledKey(z);if(_=d.getTileByID($),_&&_.hasData())break;const X=v[$];if(X===null)break;X===void 0?N.push($):_=d.getTileByID(X)}return U(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,d){let _=this._tilesDirty[c];_||(_=this._tilesDirty[c]={}),_[d.key]=!0}}function pd(m,c,d){const _=function(z,k,N){const U=o.v.dot(k,z),$=o.v.dot(N,[.2126,.7152,.0722]),X=(ae,se,re)=>(1-re)*ae+re*se,Q=X(1-.3*Math.min($,1),1,Math.min(U+1,1));return X(.92,1,Math.asin(o.c(k[2],-1,1))/Math.PI+.5)*Q}(m,[0,0,1],c),v=[0,0,0];o.v.scale(v,d.slice(0,3),_);const S=[0,0,0];o.v.scale(S,c.slice(0,3),m[2]);const E=[0,0,0];return o.v.add(E,v,S),o.bw(E)}const sl=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Ui=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class Ql{static cacheKey(c,d,_,v){let S=`${d}${v?v.cacheKey:""}`;for(const E of _)c.usedDefines.includes(E)&&(S+=`/${E}`);return S}constructor(c,d,_,v,S,E){const z=c.gl;this.program=z.createProgram(),this.configuration=v,this.name=d,this.fixedDefines=[...E];const k=v?v.getBinderAttributes():[],N=(_.staticAttributes||[]).concat(k);let U=v?v.defines():[];U=U.concat(E.map(re=>`#define ${re}`));const $=`#version 300 es
`;let X=$+U.concat("precision mediump float;",bo,go.fragmentSource).join(`
`);for(const re of _.fragmentIncludes)X+=`
${Ni[re]}`;X+=`
${_.fragmentSource}`;let Q=$+U.concat("precision highp float;",bo,go.vertexSource).join(`
`);for(const re of _.vertexIncludes)Q+=`
${Ni[re]}`;Q+=`
${_.vertexSource}`;const ae=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(ae,X),z.compileShader(ae),z.attachShader(this.program,ae);const se=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())this.failedToCreate=!0;else{z.shaderSource(se,Q),z.compileShader(se),z.attachShader(this.program,se),this.attributes={},this.numAttributes=N.length;for(let re=0;re<this.numAttributes;re++)if(N[re]){const ne=N[re].startsWith("a_")?N[re]:`a_${N[re]}`;z.bindAttribLocation(this.program,re,ne),this.attributes[ne]=re}z.linkProgram(this.program),z.deleteShader(se),z.deleteShader(ae),this.fixedUniforms=S(c),this.binderUniforms=v?v.getUniforms(c):[],E.includes("TERRAIN")&&(this.terrainUniforms=(re=>({u_dem:new o.a$(re),u_dem_prev:new o.a$(re),u_dem_tl:new o.b0(re),u_dem_scale:new o.b2(re),u_dem_tl_prev:new o.b0(re),u_dem_scale_prev:new o.b2(re),u_dem_size:new o.b2(re),u_dem_lerp:new o.b2(re),u_exaggeration:new o.b2(re),u_depth:new o.a$(re),u_depth_size_inv:new o.b0(re),u_meter_to_dem:new o.b2(re),u_label_plane_matrix_inv:new o.a_(re)}))(c)),E.includes("GLOBE")&&(this.globeUniforms=(re=>({u_tile_tl_up:new o.b7(re),u_tile_tr_up:new o.b7(re),u_tile_br_up:new o.b7(re),u_tile_bl_up:new o.b7(re),u_tile_up_scale:new o.b2(re)}))(c)),E.includes("FOG")&&(this.fogUniforms=(re=>({u_fog_matrix:new o.a_(re),u_fog_range:new o.b0(re),u_fog_color:new o.b9(re),u_fog_horizon_blend:new o.b2(re),u_fog_vertical_limit:new o.b0(re),u_fog_temporal_offset:new o.b2(re),u_frustum_tl:new o.b7(re),u_frustum_tr:new o.b7(re),u_frustum_br:new o.b7(re),u_frustum_bl:new o.b7(re),u_globe_pos:new o.b7(re),u_globe_radius:new o.b2(re),u_globe_transition:new o.b2(re),u_is_globe:new o.a$(re),u_viewport:new o.b0(re)}))(c)),E.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(re=>({u_cutoff_params:new o.b9(re)}))(c)),E.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(re=>({u_lighting_ambient_color:new o.b7(re),u_lighting_directional_dir:new o.b7(re),u_lighting_directional_color:new o.b7(re),u_ground_radiance:new o.b7(re)}))(c)),E.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(re=>({u_light_matrix_0:new o.a_(re),u_light_matrix_1:new o.a_(re),u_fade_range:new o.b0(re),u_shadow_normal_offset:new o.b7(re),u_shadow_intensity:new o.b2(re),u_shadow_texel_size:new o.b2(re),u_shadow_map_resolution:new o.b2(re),u_shadow_direction:new o.b7(re),u_shadow_bias:new o.b7(re),u_shadowmap_0:new o.a$(re),u_shadowmap_1:new o.a$(re)}))(c))}}setTerrainUniformValues(c,d){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const v in d)_[v]&&_[v].set(this.program,v,d[v])}}setGlobeUniformValues(c,d){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const v in d)_[v]&&_[v].set(this.program,v,d[v])}}setFogUniformValues(c,d){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const v in d)_[v].set(this.program,v,d[v])}}setCutoffUniformValues(c,d){if(!this.cutoffUniforms)return;const _=this.cutoffUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const v in d)_[v].set(this.program,v,d[v])}}setLightsUniformValues(c,d){if(!this.lightsUniforms)return;const _=this.lightsUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const v in d)_[v].set(this.program,v,d[v])}}setShadowUniformValues(c,d){if(this.failedToCreate||!this.shadowUniforms)return;const _=this.shadowUniforms;c.program.set(this.program);for(const v in d)_[v].set(this.program,v,d[v])}_drawDebugWireframe(c,d,_,v,S,E,z,k,N,U){const $=c.options.wireframe;if($.terrain===!1&&$.layers2D===!1&&$.layers3D===!1)return;const X=c.context;if(!(!(!$.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!$.layers2D||c._terrain&&c._terrain.renderingToTexture||!sl.includes(this.name))||!(!$.layers3D||!Ui.includes(this.name))))return;const Q=X.gl,ae=c.wireframeDebugCache.getLinesFromTrianglesBuffer(c.frameCounter,S,X);if(!ae)return;const se=[...this.fixedDefines];se.push("DEBUG_WIREFRAME");const re=c.getOrCreateProgram(this.name,{config:this.configuration,defines:se});X.program.set(re.program);const ne=(xe,ce,pe)=>{if(ce[xe]&&pe[xe])for(const we in ce[xe])pe[xe][we]&&pe[xe][we].set(pe.program,we,ce[xe][we].current)};N&&N.setUniforms(re.program,X,re.binderUniforms,z,{zoom:k}),ne("fixedUniforms",this,re),ne("terrainUniforms",this,re),ne("globeUniforms",this,re),ne("fogUniforms",this,re),ne("lightsUniforms",this,re),ne("shadowUniforms",this,re),ae.bind(),X.setColorMode(new o.a([Q.ONE,Q.ONE_MINUS_SRC_ALPHA,Q.ZERO,Q.ONE],o.C.transparent,[!0,!0,!0,!1])),X.setDepthMode(new o.b4(d.func===Q.LESS?Q.LEQUAL:d.func,o.b4.ReadOnly,d.range)),X.setStencilMode(o.b6.disabled);const de=3*E.primitiveLength*2,ye=3*E.primitiveOffset*2*2;U&&U>1?Q.drawElementsInstanced(Q.LINES,de,Q.UNSIGNED_SHORT,ye,U):Q.drawElements(Q.LINES,de,Q.UNSIGNED_SHORT,ye),S.bind(),X.program.set(this.program),X.setDepthMode(d),X.setStencilMode(_),X.setColorMode(v)}draw(c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se,re){const ne=c.context,de=ne.gl;if(this.failedToCreate)return;ne.program.set(this.program),ne.setDepthMode(_),ne.setStencilMode(v),ne.setColorMode(S),ne.setCullFace(E);for(const ce of Object.keys(this.fixedUniforms))this.fixedUniforms[ce].set(this.program,ce,z[ce]);ae&&ae.setUniforms(this.program,ne,this.binderUniforms,X,{zoom:Q});const ye={[de.LINES]:2,[de.TRIANGLES]:3,[de.LINE_STRIP]:1}[d],xe=re&&re>0?1:void 0;for(const ce of $.get()){const pe=ce.vaos||(ce.vaos={});(pe[k]||(pe[k]=new nl)).bind(ne,this,N,ae?ae.getPaintVertexBuffers():[],U,ce.vertexOffset,se||[],xe),re&&re>1?de.drawElementsInstanced(d,ce.primitiveLength*ye,de.UNSIGNED_SHORT,ce.primitiveOffset*ye*2,re):de.drawElements(d,ce.primitiveLength*ye,de.UNSIGNED_SHORT,ce.primitiveOffset*ye*2),d===de.TRIANGLES&&this._drawDebugWireframe(c,_,v,S,U,ce,X,Q,ae,re)}}}function Vi(m,c){const d=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,m.transform.tileZoom)/d,v=_*(c.tileID.canonical.x+c.tileID.wrap*d),S=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture?c.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/o.ay(c,1,m.transform.tileZoom),u_pixel_coord_upper:[v>>16,S>>16],u_pixel_coord_lower:[65535&v,65535&S]}}const il=o.m.create(),_i=(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se)=>{const re=c.style.light,ne=re.properties.get("position"),de=[ne.x,ne.y,ne.z],ye=o.bx.create();re.properties.get("anchor")==="viewport"&&(o.bx.fromRotation(ye,-c.transform.angle),o.v.transformMat3(de,de,ye));const xe=re.properties.get("color"),ce=c.transform,pe={u_matrix:m,u_lightpos:de,u_lightintensity:re.properties.get("intensity"),u_lightcolor:[xe.r,xe.g,xe.b],u_vertical_gradient:+d,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:il,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:S,u_flood_light_color:$,u_vertical_scale:X,u_flood_light_intensity:Q,u_ground_shadow_factor:ae,u_emissive_strength:se};return ce.projection.name==="globe"&&(pe.u_tile_id=[E.canonical.x,E.canonical.y,1<<E.canonical.z],pe.u_zoom_transition=k,pe.u_inv_rot_matrix=U,pe.u_merc_center=N,pe.u_up_dir=ce.projection.upVector(new o.t(0,0,0),N[0]*o.J,N[1]*o.J),pe.u_height_lift=z),pe},_o=(m,c,d)=>({u_matrix:m,u_edge_radius:c,u_vertical_scale:d}),ph=(m,c,d,_,v,S,E,z,k,N,U,$,X,Q)=>{const ae=_i(m,c,d,_,v,S,E,k,N,U,$,X,Q,1,[0,0,0],0),se={u_height_factor:-Math.pow(2,E.overscaledZ)/z.tileSize/8};return o.ak(ae,Vi(c,z),se)},yi=(m,c)=>({u_matrix:m,u_emissive_strength:c}),fd=(m,c,d,_)=>o.ak(yi(m,c),Vi(d,_)),Gi=(m,c,d)=>({u_matrix:m,u_world:d,u_emissive_strength:c}),Pp=(m,c,d,_,v)=>o.ak(fd(m,c,d,_),{u_world:v}),fh=(m,c,d,_)=>{const v=o.J/d.tileSize;return{u_matrix:m,u_camera_to_center_distance:c.getCameraToCenterDistance(_),u_extrude_scale:[c.pixelsToGLUnits[0]/v,c.pixelsToGLUnits[1]/v]}},ol=(m,c,d=1)=>({u_matrix:m,u_color:c,u_overlay:0,u_overlay_scale:d}),hd=o.m.create(),md=(m,c,d,_,v,S,E)=>{const z=m.transform,k=z.projection.name==="globe",N=k?o.by(z.zoom,c.canonical)*z._pixelsPerMercatorPixel:o.ay(d,1,S),U={u_matrix:c.projMatrix,u_extrude_scale:N,u_intensity:E,u_inv_rot_matrix:hd,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(k){U.u_inv_rot_matrix=_,U.u_merc_center=v,U.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],U.u_zoom_transition=o.ao(z.zoom);const $=v[0]*o.J,X=v[1]*o.J;U.u_up_dir=z.projection.upVector(new o.t(0,0,0),$,X)}return U},gd=(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se,re,ne,de,ye,xe)=>{return{u_matrix:m,u_normalize_matrix:c,u_globe_matrix:d,u_merc_matrix:_,u_grid_matrix:v,u_tl_parent:S,u_scale_parent:N,u_fade_t:U.mix,u_opacity:U.opacity*$.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:$.paint.get("raster-brightness-min"),u_brightness_high:$.paint.get("raster-brightness-max"),u_saturation_factor:(pe=$.paint.get("raster-saturation"),pe>0?1-1/(1.001-pe):-pe),u_contrast_factor:(ce=$.paint.get("raster-contrast"),ce>0?1/(1-ce):1+ce),u_spin_weights:cl($.paint.get("raster-hue-rotate")),u_perspective_transform:X,u_raster_elevation:Q,u_zoom_transition:E,u_merc_center:z,u_cutoff_params:k,u_colorization_mix:ll(se,ne),u_colorization_offset:bd(re,ne),u_color_ramp:ae,u_texture_offset:[ye/(de+2*ye),de/(de+2*ye)],u_texture_res:[de+2*ye,de+2*ye],u_emissive_strength:xe};var ce,pe};function cl(m){m*=Math.PI/180;const c=Math.sin(m),d=Math.cos(m);return[(2*d+1)/3,(-Math.sqrt(3)*c-d+1)/3,(Math.sqrt(3)*c-d+1)/3]}function ll([m,c,d,_],[v,S]){if(v===S)return[0,0,0,0];const E=(o.bz+3)/(o.bz+1)/(S-v);return[m*E,c*E,d*E,_*E]}function bd(m,[c,d]){return c===d?0:((m-c)/(d-c)*(o.bz+3)-1)/(o.bz+1)}const eu=o.m.create(),We=(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se,re,ne)=>{const de=v.transform,ye={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:de.getCameraToCenterDistance(se),u_rotate_symbol:+d,u_aspect_ratio:de.width/de.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:E,u_coord_matrix:z,u_is_text:+k,u_pitch_with_map:+_,u_texsize:N,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:eu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:eu,u_up_vector:[0,-1,0],u_icon_transition:ne||0,u_icon_saturation:re};return se.name==="globe"&&(ye.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],ye.u_zoom_transition=$,ye.u_inv_rot_matrix=Q,ye.u_merc_center=X,ye.u_camera_forward=de._camera.forward(),ye.u_ecef_origin=o.bA(de.globeMatrix,U.toUnwrapped()),ye.u_tile_matrix=Float32Array.from(de.globeMatrix),ye.u_up_vector=ae),ye},lt=(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se,re)=>o.ak(We(m,c,d,_,v,S,E,z,k,N,$,X,Q,ae,se,re,1),{u_gamma_scale:_?v.transform.getCameraToCenterDistance(re)*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:o.a4.devicePixelRatio,u_is_halo:+U,undefined:void 0}),Qt=(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se)=>o.ak(lt(m,c,d,_,v,S,E,z,!0,k,!0,U,$,X,Q,ae,se),{u_texsize_icon:N,u_texture_icon:1}),En=(m,c,d,_)=>({u_matrix:m,u_emissive_strength:c,u_opacity:d,u_color:_}),Ea=(m,c,d,_,v,S,E)=>o.ak(function(z,k,N,U){const $=N.imageManager.getPattern(z.toString(),k),{width:X,height:Q}=N.imageManager.getPixelSize(k),ae=Math.pow(2,U.tileID.overscaledZ),se=U.tileSize*Math.pow(2,N.transform.tileZoom)/ae,re=se*(U.tileID.canonical.x+U.tileID.wrap*ae),ne=se*U.tileID.canonical.y;return{u_image:0,u_pattern_tl:$.tl,u_pattern_br:$.br,u_texsize:[X,Q],u_pattern_size:$.displaySize,u_tile_units_to_pixels:1/o.ay(U,1,N.transform.tileZoom),u_pixel_coord_upper:[re>>16,ne>>16],u_pixel_coord_lower:[65535&re,65535&ne]}}(v,S,_,E),{u_matrix:m,u_emissive_strength:c,u_opacity:d}),Dn={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,ShadowMap0:10},$a=(m,c,d,_,v,S,E,z,k,N,U,$,X=[0,0,0])=>{const Q=_.style.light,ae=Q.properties.get("position"),se=[-ae.x,-ae.y,ae.z],re=o.bx.create();Q.properties.get("anchor")==="viewport"&&(o.bx.fromRotation(re,-_.transform.angle),o.v.transformMat3(se,se,re));const ne=N.alphaMode==="MASK",de=Q.properties.get("color"),ye=$.paint.get("model-ambient-occlusion-intensity"),xe=$.paint.get("model-color").constantOr(o.C.white),ce=$.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:m,u_lighting_matrix:c,u_normal_matrix:d,u_lightpos:se,u_lightintensity:Q.properties.get("intensity"),u_lightcolor:[de.r,de.g,de.b],u_camera_pos:X,u_opacity:v,u_baseTextureIsAlpha:0,u_alphaMask:+ne,u_alphaCutoff:N.alphaCutoff,u_baseColorFactor:[S.r,S.g,S.b,S.a],u_emissiveFactor:[E[0],E[1],E[2],1],u_metallicFactor:z,u_roughnessFactor:k,u_baseColorTexture:Dn.BaseColor,u_metallicRoughnessTexture:Dn.MetallicRoughness,u_normalTexture:Dn.Normal,u_occlusionTexture:Dn.Occlusion,u_emissionTexture:Dn.Emission,u_color_mix:[xe.r,xe.g,xe.b,ce],u_aoIntensity:ye,u_emissive_strength:U}},qa=new Float32Array(16),ss=(m,c=qa,d=qa)=>({u_matrix:m,u_instance:c,u_node_matrix:d}),Sr={fillExtrusion:m=>({u_matrix:new o.a_(m),u_lightpos:new o.b7(m),u_lightintensity:new o.b2(m),u_lightcolor:new o.b7(m),u_vertical_gradient:new o.b2(m),u_opacity:new o.b2(m),u_edge_radius:new o.b2(m),u_ao:new o.b0(m),u_tile_id:new o.b7(m),u_zoom_transition:new o.b2(m),u_inv_rot_matrix:new o.a_(m),u_merc_center:new o.b0(m),u_up_dir:new o.b7(m),u_height_lift:new o.b2(m),u_flood_light_color:new o.b7(m),u_vertical_scale:new o.b2(m),u_flood_light_intensity:new o.b2(m),u_ground_shadow_factor:new o.b7(m),u_emissive_strength:new o.b2(m)}),fillExtrusionDepth:m=>({u_matrix:new o.a_(m),u_edge_radius:new o.b2(m),u_vertical_scale:new o.b2(m)}),fillExtrusionPattern:m=>({u_matrix:new o.a_(m),u_lightpos:new o.b7(m),u_lightintensity:new o.b2(m),u_lightcolor:new o.b7(m),u_vertical_gradient:new o.b2(m),u_height_factor:new o.b2(m),u_edge_radius:new o.b2(m),u_ao:new o.b0(m),u_tile_id:new o.b7(m),u_zoom_transition:new o.b2(m),u_inv_rot_matrix:new o.a_(m),u_merc_center:new o.b0(m),u_up_dir:new o.b7(m),u_height_lift:new o.b2(m),u_image:new o.a$(m),u_texsize:new o.b0(m),u_pixel_coord_upper:new o.b0(m),u_pixel_coord_lower:new o.b0(m),u_tile_units_to_pixels:new o.b2(m),u_opacity:new o.b2(m)}),fillExtrusionGroundEffect:m=>({u_matrix:new o.a_(m),u_opacity:new o.b2(m),u_ao_pass:new o.b2(m),u_meter_to_tile:new o.b2(m),u_ao:new o.b0(m),u_flood_light_intensity:new o.b2(m),u_flood_light_color:new o.b7(m),u_attenuation:new o.b2(m),u_edge_radius:new o.b2(m),u_fb:new o.a$(m),u_fb_size:new o.b2(m)}),fill:m=>({u_matrix:new o.a_(m),u_emissive_strength:new o.b2(m)}),fillPattern:m=>({u_matrix:new o.a_(m),u_emissive_strength:new o.b2(m),u_image:new o.a$(m),u_texsize:new o.b0(m),u_pixel_coord_upper:new o.b0(m),u_pixel_coord_lower:new o.b0(m),u_tile_units_to_pixels:new o.b2(m)}),fillOutline:m=>({u_matrix:new o.a_(m),u_emissive_strength:new o.b2(m),u_world:new o.b0(m)}),fillOutlinePattern:m=>({u_matrix:new o.a_(m),u_emissive_strength:new o.b2(m),u_world:new o.b0(m),u_image:new o.a$(m),u_texsize:new o.b0(m),u_pixel_coord_upper:new o.b0(m),u_pixel_coord_lower:new o.b0(m),u_tile_units_to_pixels:new o.b2(m)}),circle:o.bB,collisionBox:m=>({u_matrix:new o.a_(m),u_camera_to_center_distance:new o.b2(m),u_extrude_scale:new o.b0(m)}),collisionCircle:m=>({u_matrix:new o.a_(m),u_inv_matrix:new o.a_(m),u_camera_to_center_distance:new o.b2(m),u_viewport_size:new o.b0(m)}),debug:m=>({u_color:new o.b1(m),u_matrix:new o.a_(m),u_overlay:new o.a$(m),u_overlay_scale:new o.b2(m)}),clippingMask:m=>({u_matrix:new o.a_(m)}),heatmap:m=>({u_extrude_scale:new o.b2(m),u_intensity:new o.b2(m),u_matrix:new o.a_(m),u_inv_rot_matrix:new o.a_(m),u_merc_center:new o.b0(m),u_tile_id:new o.b7(m),u_zoom_transition:new o.b2(m),u_up_dir:new o.b7(m)}),heatmapTexture:m=>({u_image:new o.a$(m),u_color_ramp:new o.a$(m),u_opacity:new o.b2(m)}),hillshade:m=>({u_matrix:new o.a_(m),u_image:new o.a$(m),u_latrange:new o.b0(m),u_light:new o.b0(m),u_shadow:new o.b1(m),u_highlight:new o.b1(m),u_emissive_strength:new o.b2(m),u_accent:new o.b1(m)}),hillshadePrepare:m=>({u_matrix:new o.a_(m),u_image:new o.a$(m),u_dimension:new o.b0(m),u_zoom:new o.b2(m)}),line:o.bC,linePattern:o.bD,raster:m=>({u_matrix:new o.a_(m),u_normalize_matrix:new o.a_(m),u_globe_matrix:new o.a_(m),u_merc_matrix:new o.a_(m),u_grid_matrix:new o.b8(m),u_tl_parent:new o.b0(m),u_scale_parent:new o.b2(m),u_fade_t:new o.b2(m),u_opacity:new o.b2(m),u_image0:new o.a$(m),u_image1:new o.a$(m),u_brightness_low:new o.b2(m),u_brightness_high:new o.b2(m),u_saturation_factor:new o.b2(m),u_contrast_factor:new o.b2(m),u_spin_weights:new o.b7(m),u_perspective_transform:new o.b0(m),u_raster_elevation:new o.b2(m),u_zoom_transition:new o.b2(m),u_merc_center:new o.b0(m),u_cutoff_params:new o.b9(m),u_colorization_mix:new o.b9(m),u_colorization_offset:new o.b2(m),u_color_ramp:new o.a$(m),u_texture_offset:new o.b0(m),u_texture_res:new o.b0(m),u_emissive_strength:new o.b2(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new o.a$(m),u_is_size_feature_constant:new o.a$(m),u_size_t:new o.b2(m),u_size:new o.b2(m),u_camera_to_center_distance:new o.b2(m),u_rotate_symbol:new o.a$(m),u_aspect_ratio:new o.b2(m),u_fade_change:new o.b2(m),u_matrix:new o.a_(m),u_label_plane_matrix:new o.a_(m),u_coord_matrix:new o.a_(m),u_is_text:new o.a$(m),u_pitch_with_map:new o.a$(m),u_texsize:new o.b0(m),u_tile_id:new o.b7(m),u_zoom_transition:new o.b2(m),u_inv_rot_matrix:new o.a_(m),u_merc_center:new o.b0(m),u_camera_forward:new o.b7(m),u_tile_matrix:new o.a_(m),u_up_vector:new o.b7(m),u_ecef_origin:new o.b7(m),u_texture:new o.a$(m),u_icon_transition:new o.b2(m),u_icon_saturation:new o.b2(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new o.a$(m),u_is_size_feature_constant:new o.a$(m),u_size_t:new o.b2(m),u_size:new o.b2(m),u_camera_to_center_distance:new o.b2(m),u_rotate_symbol:new o.a$(m),u_aspect_ratio:new o.b2(m),u_fade_change:new o.b2(m),u_matrix:new o.a_(m),u_label_plane_matrix:new o.a_(m),u_coord_matrix:new o.a_(m),u_is_text:new o.a$(m),u_pitch_with_map:new o.a$(m),u_texsize:new o.b0(m),u_texture:new o.a$(m),u_gamma_scale:new o.b2(m),u_device_pixel_ratio:new o.b2(m),u_tile_id:new o.b7(m),u_zoom_transition:new o.b2(m),u_inv_rot_matrix:new o.a_(m),u_merc_center:new o.b0(m),u_camera_forward:new o.b7(m),u_tile_matrix:new o.a_(m),u_up_vector:new o.b7(m),u_ecef_origin:new o.b7(m),u_is_halo:new o.a$(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new o.a$(m),u_is_size_feature_constant:new o.a$(m),u_size_t:new o.b2(m),u_size:new o.b2(m),u_camera_to_center_distance:new o.b2(m),u_rotate_symbol:new o.a$(m),u_aspect_ratio:new o.b2(m),u_fade_change:new o.b2(m),u_matrix:new o.a_(m),u_label_plane_matrix:new o.a_(m),u_coord_matrix:new o.a_(m),u_is_text:new o.a$(m),u_pitch_with_map:new o.a$(m),u_texsize:new o.b0(m),u_texsize_icon:new o.b0(m),u_texture:new o.a$(m),u_texture_icon:new o.a$(m),u_gamma_scale:new o.b2(m),u_device_pixel_ratio:new o.b2(m),u_is_halo:new o.a$(m)}),background:m=>({u_matrix:new o.a_(m),u_emissive_strength:new o.b2(m),u_opacity:new o.b2(m),u_color:new o.b1(m)}),backgroundPattern:m=>({u_matrix:new o.a_(m),u_emissive_strength:new o.b2(m),u_opacity:new o.b2(m),u_image:new o.a$(m),u_pattern_tl:new o.b0(m),u_pattern_br:new o.b0(m),u_texsize:new o.b0(m),u_pattern_size:new o.b0(m),u_pixel_coord_upper:new o.b0(m),u_pixel_coord_lower:new o.b0(m),u_tile_units_to_pixels:new o.b2(m)}),terrainRaster:Kl,terrainDepth:Kl,skybox:m=>({u_matrix:new o.a_(m),u_sun_direction:new o.b7(m),u_cubemap:new o.a$(m),u_opacity:new o.b2(m),u_temporal_offset:new o.b2(m)}),skyboxGradient:m=>({u_matrix:new o.a_(m),u_color_ramp:new o.a$(m),u_center_direction:new o.b7(m),u_radius:new o.b2(m),u_opacity:new o.b2(m),u_temporal_offset:new o.b2(m)}),skyboxCapture:m=>({u_matrix_3f:new o.b8(m),u_sun_direction:new o.b7(m),u_sun_intensity:new o.b2(m),u_color_tint_r:new o.b9(m),u_color_tint_m:new o.b9(m),u_luminance:new o.b2(m)}),globeRaster:m=>({u_proj_matrix:new o.a_(m),u_globe_matrix:new o.a_(m),u_normalize_matrix:new o.a_(m),u_merc_matrix:new o.a_(m),u_zoom_transition:new o.b2(m),u_merc_center:new o.b0(m),u_image0:new o.a$(m),u_grid_matrix:new o.b8(m),u_skirt_height:new o.b2(m),u_frustum_tl:new o.b7(m),u_frustum_tr:new o.b7(m),u_frustum_br:new o.b7(m),u_frustum_bl:new o.b7(m),u_globe_pos:new o.b7(m),u_globe_radius:new o.b2(m),u_viewport:new o.b0(m)}),globeAtmosphere:m=>({u_frustum_tl:new o.b7(m),u_frustum_tr:new o.b7(m),u_frustum_br:new o.b7(m),u_frustum_bl:new o.b7(m),u_horizon:new o.b2(m),u_transition:new o.b2(m),u_fadeout_range:new o.b2(m),u_color:new o.b9(m),u_high_color:new o.b9(m),u_space_color:new o.b9(m),u_temporal_offset:new o.b2(m),u_horizon_angle:new o.b2(m)}),model:m=>({u_matrix:new o.a_(m),u_lighting_matrix:new o.a_(m),u_normal_matrix:new o.a_(m),u_lightpos:new o.b7(m),u_lightintensity:new o.b2(m),u_lightcolor:new o.b7(m),u_camera_pos:new o.b7(m),u_opacity:new o.b2(m),u_baseColorFactor:new o.b9(m),u_emissiveFactor:new o.b9(m),u_metallicFactor:new o.b2(m),u_roughnessFactor:new o.b2(m),u_baseTextureIsAlpha:new o.a$(m),u_alphaMask:new o.a$(m),u_alphaCutoff:new o.b2(m),u_baseColorTexture:new o.a$(m),u_metallicRoughnessTexture:new o.a$(m),u_normalTexture:new o.a$(m),u_occlusionTexture:new o.a$(m),u_emissionTexture:new o.a$(m),u_color_mix:new o.b9(m),u_aoIntensity:new o.b2(m),u_emissive_strength:new o.b2(m)}),modelDepth:m=>({u_matrix:new o.a_(m),u_instance:new o.a_(m),u_node_matrix:new o.a_(m)}),groundShadow:m=>({u_matrix:new o.a_(m),u_ground_shadow_factor:new o.b7(m)}),stars:m=>({u_matrix:new o.a_(m),u_up:new o.b7(m),u_right:new o.b7(m),u_intensity_multiplier:new o.b2(m)})};let sr;function ks(m,c,d,_,v,S,E){const z=m.context,k=z.gl,N=m.transform,U=m.getOrCreateProgram("collisionBox"),$=[];let X=0,Q=0;for(let xe=0;xe<_.length;xe++){const ce=_[xe],pe=c.getTile(ce),we=pe.getBucket(d);if(!we)continue;const Ce=Vn(ce,we,N);let Ee=Ce;v[0]===0&&v[1]===0||(Ee=m.translatePosMatrix(Ce,pe,v,S));const Le=E?we.textCollisionBox:we.iconCollisionBox,nt=we.collisionCircleArray;if(nt.length>0){const $e=o.m.create(),Je=Ee;o.m.mul($e,we.placementInvProjMatrix,N.glCoordMatrix),o.m.mul($e,$e,we.placementViewportMatrix),$.push({circleArray:nt,circleOffset:Q,transform:Je,invTransform:$e,projection:we.getProjection()}),X+=nt.length/4,Q=X}Le&&(m.terrain&&m.terrain.setupElevationDraw(pe,U),U.draw(m,k.LINES,o.b4.disabled,o.b6.disabled,m.colorModeForRenderPass(),o.b5.disabled,fh(Ee,N,pe,we.getProjection()),d.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,null,N.zoom,null,[Le.collisionVertexBuffer,Le.collisionVertexBufferExt]))}if(!E||!$.length)return;const ae=m.getOrCreateProgram("collisionCircle"),se=new o.bE;se.resize(4*X),se._trim();let re=0;for(const xe of $)for(let ce=0;ce<xe.circleArray.length/4;ce++){const pe=4*ce,we=xe.circleArray[pe+0],Ce=xe.circleArray[pe+1],Ee=xe.circleArray[pe+2],Le=xe.circleArray[pe+3];se.emplace(re++,we,Ce,Ee,Le,0),se.emplace(re++,we,Ce,Ee,Le,1),se.emplace(re++,we,Ce,Ee,Le,2),se.emplace(re++,we,Ce,Ee,Le,3)}(!sr||sr.length<2*X)&&(sr=function(xe){const ce=2*xe,pe=new o.bp;pe.resize(ce),pe._trim();for(let we=0;we<ce;we++){const Ce=6*we;pe.uint16[Ce+0]=4*we+0,pe.uint16[Ce+1]=4*we+1,pe.uint16[Ce+2]=4*we+2,pe.uint16[Ce+3]=4*we+2,pe.uint16[Ce+4]=4*we+3,pe.uint16[Ce+5]=4*we+0}return pe}(X));const ne=z.createIndexBuffer(sr,!0),de=z.createVertexBuffer(se,o.bF.members,!0);for(const xe of $){const ce={u_matrix:xe.transform,u_inv_matrix:xe.invTransform,u_camera_to_center_distance:(ye=N).getCameraToCenterDistance(xe.projection),u_viewport_size:[ye.width,ye.height]};ae.draw(m,k.TRIANGLES,o.b4.disabled,o.b6.disabled,m.colorModeForRenderPass(),o.b5.disabled,ce,d.id,de,ne,o.bm.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,N.zoom)}var ye;de.destroy(),ne.destroy()}const Ls=o.m.create();function Mr({width:m,height:c,anchor:d,textOffset:_,textScale:v},S){const{horizontalAlign:E,verticalAlign:z}=o.aY(d),k=-(E-.5)*m,N=-(z-.5)*c,U=o.aW(d,_);return new o.P((k/v+U[0])*S,(N/v+U[1])*S)}function ti(m,c,d,_,v,S,E,z,k,N,U){const $=m.text.placedSymbolArray,X=m.text.dynamicLayoutVertexArray,Q=m.icon.dynamicLayoutVertexArray,ae={},se=m.getProjection(),re=Ca(z,se,S),ne=S.elevation,de=se.upVectorScale(z.canonical,S.center.lat,S.worldSize).metersToTile;X.clear();for(let ye=0;ye<$.length;ye++){const xe=$.get(ye),{tileAnchorX:ce,tileAnchorY:pe,numGlyphs:we}=xe,Ce=xe.hidden||!xe.crossTileID||m.allowVerticalPlacement&&!xe.placedOrientation?null:_[xe.crossTileID];if(Ce){let Ee=0,Le=0,nt=0;if(ne){const mt=ne?ne.getAtTileOffset(z,ce,pe):0,[ct,Wt,jt]=se.upVector(z.canonical,ce,pe);Ee=mt*ct*de,Le=mt*Wt*de,nt=mt*jt*de}let[$e,Je,Oe,tt]=Pn(xe.projectedAnchorX+Ee,xe.projectedAnchorY+Le,xe.projectedAnchorZ+nt,d?re:E);const Ze=Ye(S.getCameraToCenterDistance(se),tt);let st=v.evaluateSizeForFeature(m.textSizeData,N,xe)*Ze/o.aV;d&&(st*=m.tilePixelRatio/k);const be=Mr(Ce,st);d?({x:$e,y:Je,z:Oe}=se.projectTilePoint(ce+be.x,pe+be.y,z.canonical),[$e,Je,Oe]=Pn($e+Ee,Je+Le,Oe+nt,E)):(c&&be._rotate(-S.angle),$e+=be.x,Je+=be.y,Oe=0);const Fe=m.allowVerticalPlacement&&xe.placedOrientation===o.W.vertical?Math.PI/2:0;for(let mt=0;mt<we;mt++)o.k(X,$e,Je,Oe,Fe);U&&xe.associatedIconIndex>=0&&(ae[xe.associatedIconIndex]={x:$e,y:Je,z:Oe,angle:Fe})}else gt(we,X)}if(U){Q.clear();const ye=m.icon.placedSymbolArray;for(let xe=0;xe<ye.length;xe++){const ce=ye.get(xe),{numGlyphs:pe}=ce,we=ae[xe];if(ce.hidden||!we)gt(pe,Q);else{const{x:Ce,y:Ee,z:Le,angle:nt}=we;for(let $e=0;$e<pe;$e++)o.k(Q,Ce,Ee,Le,nt)}}m.icon.dynamicLayoutVertexBuffer.updateData(Q)}m.text.dynamicLayoutVertexBuffer.updateData(X)}function yo(m,c,d){return d.iconsInText&&c?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function On(m,c,d,_,v,S,E,z,k,N,U,$,X){const Q=m.context,ae=Q.gl,se=m.transform,re=z==="map",ne=k==="map",de=re&&d.layout.get("symbol-placement")!=="point",ye=re&&!ne&&!de,xe=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ce=!1;const pe=m.depthModeForSublayer(0,o.b4.ReadOnly),we=[o.E(se.center.lng),o.H(se.center.lat)],Ce=d.layout.get("text-variable-anchor"),Ee=se.projection.name==="globe",Le=[],nt=[0,-1,0];let $e=nt;!Ee&&!se.mercatorFromTransition||re||($e=function(Je){const Oe=Je._camera.getWorldToCamera(Je.worldSize,1),tt=o.m.multiply([],Oe,Je.globeMatrix);o.m.invert(tt,tt);const Ze=[0,0,0],st=[0,1,0,0];return o.e.transformMat4(st,st,tt),Ze[0]=st[0],Ze[1]=st[1],Ze[2]=st[2],o.v.normalize(Ze,Ze),Ze}(se));for(const Je of _){const Oe=c.getTile(Je),tt=Oe.getBucket(d);if(!tt||tt.projection.name==="mercator"&&Ee)continue;const Ze=v?tt.text:tt.icon;if(!Ze||tt.fullyClipped||!Ze.segments.get().length)continue;const st=Ze.programConfigurations.get(d.id),be=v||tt.sdfIcons,Fe=v?tt.textSizeData:tt.iconSizeData,mt=ne||se.pitch!==0,ct=o.i(Fe,se.zoom);let Wt,jt,rn,Vt,pn=[0,0],fn=null;if(v)jt=Oe.glyphAtlasTexture?Oe.glyphAtlasTexture:null,rn=ae.LINEAR,Wt=Oe.glyphAtlasTexture?Oe.glyphAtlasTexture.size:[0,0],tt.iconsInText&&(pn=Oe.imageAtlasTexture?Oe.imageAtlasTexture.size:[0,0],fn=Oe.imageAtlasTexture?Oe.imageAtlasTexture:null,Vt=mt||m.options.rotating||m.options.zooming||Fe.kind==="composite"||Fe.kind==="camera"?ae.LINEAR:ae.NEAREST);else{const ba=d.layout.get("icon-size").constantOr(0)!==1||tt.iconsNeedLinear;jt=Oe.imageAtlasTexture?Oe.imageAtlasTexture:null,rn=be||m.options.rotating||m.options.zooming||ba||mt?ae.LINEAR:ae.NEAREST,Wt=Oe.imageAtlasTexture?Oe.imageAtlasTexture.size:[0,0]}const Kt=tt.projection.name==="globe",en=Kt?$e:nt,Jn=Kt?o.ao(se.zoom):0,An=Ca(Je,tt.getProjection(),se),Pa=se.calculatePixelsToTileUnitsMatrix(Oe),ma=It(An,Oe.tileID.canonical,ne,re,se,tt.getProjection(),Pa),ys=m.terrain&&ne&&de?o.m.invert(o.m.create(),ma):Ls,Si=Ln(An,Oe.tileID.canonical,ne,re,se,tt.getProjection(),Pa),ua=Ce&&tt.hasTextData(),Qn=tt.hasIconTextFit()&&ua&&tt.hasIconData();if(de){const ba=se.elevation,Zi=ba?ba.getAtTileOffsetFunc(Je,se.center.lat,se.worldSize,tt.getProjection()):null,So=_n(An,Oe.tileID.canonical,ne,re,se,tt.getProjection(),Pa);ft(tt,An,m,v,So,Si,ne,N,Zi,Je)}const sa=de||v&&Ce||Qn,Oa=m.translatePosMatrix(An,Oe,S,E),Br=sa?Ls:ma,Ma=m.translatePosMatrix(Si,Oe,S,E,!0),Jr=tt.getProjection().createInversionMatrix(se,Je.canonical),vs=d.paint.get("icon-image-cross-fade").constantOr(0),Kr=[];m.terrainRenderModeElevated()&&ne&&Kr.push("PITCH_WITH_MAP_TERRAIN"),Kt&&(Kr.push("PROJECTION_GLOBE_VIEW"),sa&&Kr.push("PROJECTED_POS_ON_VIEWPORT")),vs>0&&Kr.push("ICON_TRANSITION"),Ze.zOffsetVertexBuffer&&Kr.push("Z_OFFSET");const Ti=be&&d.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ko;be?Ko=tt.iconsInText?Qt(Fe.kind,ct,ye,ne,m,Oa,Br,Ma,Wt,pn,Je,Jn,we,Jr,en,tt.getProjection()):lt(Fe.kind,ct,ye,ne,m,Oa,Br,Ma,v,Wt,!0,Je,Jn,we,Jr,en,tt.getProjection()):(U<1&&Kr.push("SATURATION"),Ko=We(Fe.kind,ct,ye,ne,m,Oa,Br,Ma,v,Wt,Je,Jn,we,Jr,en,tt.getProjection(),U,vs));const Hi={program:m.getOrCreateProgram(yo(be,v,tt),{config:st,defines:Kr}),buffers:Ze,uniformValues:Ko,atlasTexture:jt,atlasTextureIcon:fn,atlasInterpolation:rn,atlasInterpolationIcon:Vt,isSDF:be,hasHalo:Ti,tile:Oe,labelPlaneMatrixInv:ys};if(xe&&tt.canOverlap){ce=!0;const ba=Ze.segments.get();for(const Zi of ba)Le.push({segments:new o.bm([Zi]),sortKey:Zi.sortKey,state:Hi})}else Le.push({segments:Ze.segments,sortKey:0,state:Hi})}ce&&Le.sort((Je,Oe)=>Je.sortKey-Oe.sortKey);for(const Je of Le){const Oe=Je.state;if(m.terrain&&m.terrain.setupElevationDraw(Oe.tile,Oe.program,{useDepthForOcclusion:se.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Oe.labelPlaneMatrixInv}),Q.activeTexture.set(ae.TEXTURE0),Oe.atlasTexture&&Oe.atlasTexture.bind(Oe.atlasInterpolation,ae.CLAMP_TO_EDGE,!0),Oe.atlasTextureIcon&&(Q.activeTexture.set(ae.TEXTURE1),Oe.atlasTextureIcon&&Oe.atlasTextureIcon.bind(Oe.atlasInterpolationIcon,ae.CLAMP_TO_EDGE,!0)),m.uploadCommonLightUniforms(m.context,Oe.program),Oe.hasHalo){const tt=Oe.uniformValues;tt.u_is_halo=1,$i(Oe.buffers,Je.segments,d,m,Oe.program,pe,$,X,tt,2),tt.u_is_halo=0}else{if(Oe.isSDF){const tt=Oe.uniformValues;Oe.hasHalo&&(tt.u_is_halo=1,$i(Oe.buffers,Je.segments,d,m,Oe.program,pe,$,X,tt,1)),tt.u_is_halo=0}$i(Oe.buffers,Je.segments,d,m,Oe.program,pe,$,X,Oe.uniformValues,1)}}}function $i(m,c,d,_,v,S,E,z,k,N){const U=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.iconTransitioningVertexBuffer,m.globeExtVertexBuffer,m.zOffsetVertexBuffer];v.draw(_,_.context.gl.TRIANGLES,S,E,z,o.b5.disabled,k,d.id,m.layoutVertexBuffer,m.indexBuffer,c,d.paint,_.transform.zoom,m.programConfigurations.get(d.id),U,N)}function qi(m,c,d,_,v,S,E){const z=m.context.gl,k=d.paint.get("fill-pattern"),N=k&&k.constantOr(1);let U,$,X,Q,ae;E?($=N&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=z.LINES):($=N?"fillPattern":"fill",U=z.TRIANGLES);for(const se of _){const re=c.getTile(se);if(N&&!re.patternsLoaded())continue;const ne=re.getBucket(d);if(!ne)continue;m.prepareDrawTile();const de=ne.programConfigurations.get(d.id),ye=m.isTileAffectedByFog(se),xe=m.getOrCreateProgram($,{config:de,overrideFog:ye});N&&(m.context.activeTexture.set(z.TEXTURE0),re.imageAtlasTexture&&re.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),de.updatePaintBuffers());const ce=k.constantOr(null);if(ce&&re.imageAtlas){const Ce=re.imageAtlas.patternPositions[ce.toString()];Ce&&de.setConstantPatternPositions(Ce)}const pe=m.translatePosMatrix(se.projMatrix,re,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor")),we=d.paint.get("fill-emissive-strength");if(E){Q=ne.indexBuffer2,ae=ne.segments2;const Ce=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[z.drawingBufferWidth,z.drawingBufferHeight];X=$==="fillOutlinePattern"&&N?Pp(pe,we,m,re,Ce):Gi(pe,we,Ce)}else Q=ne.indexBuffer,ae=ne.segments,X=N?fd(pe,we,m,re):yi(pe,we);m.uploadCommonUniforms(m.context,xe,se.toUnwrapped()),xe.draw(m,U,v,m.stencilModeForClipping(se),S,o.b5.disabled,X,d.id,ne.layoutVertexBuffer,Q,ae,d.paint,m.transform.zoom,de,void 0)}}function Tc(m,c,d,_,v,S,E,z){d.resetLayerRenderingStats();const k=m.context,N=k.gl,U=m.transform,$=d.paint.get("fill-extrusion-pattern"),X=$.constantOr(1),Q=d.paint.get("fill-extrusion-opacity"),ae=m.style.enable3dLights(),se=d.paint.get(ae&&!X?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),re=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),se],ne=d.layout.get("fill-extrusion-edge-radius"),de=ne>0&&!d.paint.get("fill-extrusion-rounded-roof"),ye=de?0:ne,xe=U.projection.name==="globe"?o.bO():0,ce=U.projection.name==="globe",pe=ce?o.ao(U.zoom):0,we=[o.E(U.center.lng),o.H(U.center.lat)],Ce=d.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),Ee=d.paint.get("fill-extrusion-flood-light-intensity"),Le=d.paint.get("fill-extrusion-vertical-scale"),nt=$o(m,d.paint.get("fill-extrusion-cutoff-fade-range")),$e=d.paint.get("fill-extrusion-emissive-strength"),Je=[];let Oe;ce&&Je.push("PROJECTION_GLOBE_VIEW"),re[0]>0&&Je.push("FAUX_AO"),de&&Je.push("ZERO_ROOF_RADIUS"),z&&Je.push("HAS_CENTROID"),Ee>0&&Je.push("FLOOD_LIGHT"),nt.shouldRenderCutoff&&Je.push("RENDER_CUTOFF");const tt=m.renderPass==="shadow",Ze=m.shadowRenderer,st=tt&&!!Ze;m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!0);let be=[0,0,0];if(Ze){const ct=m.style.directionalLight,Wt=m.style.ambientLight;ct&&Wt&&(be=Cp(ct,Wt)),Oe=Je.concat(["SHADOWS_SINGLE_CASCADE"])}const Fe=st?"fillExtrusionDepth":X?"fillExtrusionPattern":"fillExtrusion",mt=d.getLayerRenderingStats();for(const ct of _){const Wt=c.getTile(ct),jt=Wt.getBucket(d);if(!jt||jt.projection.name!==U.projection.name)continue;let rn=!1;Ze&&(rn=Ze.getMaxCascadeForTile(ct.toUnwrapped())===0);const Vt=m.isTileAffectedByFog(ct),pn=jt.programConfigurations.get(d.id),fn=m.getOrCreateProgram(Fe,{config:pn,defines:rn?Oe:Je,overrideFog:Vt});if(m.terrain&&m.terrain.setupElevationDraw(Wt,fn,{useMeterToDem:!0}),!jt.centroidVertexBuffer){const ma=fn.attributes.a_centroid_pos;ma!==void 0&&N.vertexAttrib2f(ma,0,0)}!tt&&Ze&&Ze.setupShadows(Wt.tileID.toUnwrapped(),fn,"vector-tile",Wt.tileID.overscaledZ),X&&(m.context.activeTexture.set(N.TEXTURE0),Wt.imageAtlasTexture&&Wt.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),pn.updatePaintBuffers());const Kt=$.constantOr(null);if(Kt&&Wt.imageAtlas){const ma=Wt.imageAtlas.patternPositions[Kt.toString()];ma&&pn.setConstantPatternPositions(ma)}const en=d.paint.get("fill-extrusion-vertical-gradient");let Jn;if(tt&&Ze){if(vo(Wt.tileID,jt,m))continue;const ma=Ze.calculateShadowPassMatrixFromTile(Wt.tileID.toUnwrapped());Jn=_o(ma,ye,Le)}else{const ma=m.translatePosMatrix(ct.expandedProjMatrix,Wt,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ys=U.projection.createInversionMatrix(U,ct.canonical);Jn=X?ph(ma,m,en,Q,re,ye,ct,Wt,xe,pe,we,ys,Ce,Le):_i(ma,m,en,Q,re,ye,ct,xe,pe,we,ys,Ce,Le,Ee,be,$e)}m.uploadCommonUniforms(k,fn,ct.toUnwrapped(),null,nt);let An=jt.segments;if(U.projection.name==="mercator"&&!tt&&(An=jt.getVisibleSegments(Wt.tileID,m.terrain,m.transform.getFrustum(0)),!An.get().length))continue;if(mt)if(tt)for(const ma of An.get())mt.numRenderedVerticesInShadowPass+=ma.primitiveLength;else for(const ma of An.get())mt.numRenderedVerticesInTransparentPass+=ma.primitiveLength;const Pa=[];(m.terrain||z)&&Pa.push(jt.centroidVertexBuffer),ce&&Pa.push(jt.layoutVertexExtBuffer),fn.draw(m,k.gl.TRIANGLES,v,S,E,o.b5.backCCW,Jn,d.id,jt.layoutVertexBuffer,jt.indexBuffer,An,d.paint,m.transform.zoom,pn,Pa)}m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!1)}function Zo(m,c,d,_,v,S,E,z,k,N,U,$,X,Q,ae,se,re,ne,de){const ye=m.context,xe=ye.gl,ce=m.transform,pe=m.transform.zoom,we=[],Ce=$o(m,d.paint.get("fill-extrusion-cutoff-fade-range"));N==="clear"?(we.push("CLEAR_SUBPASS"),de&&(we.push("CLEAR_FROM_TEXTURE"),ye.activeTexture.set(xe.TEXTURE0),de.bind(xe.LINEAR,xe.CLAMP_TO_EDGE))):N==="sdf"&&we.push("SDF_SUBPASS"),re&&we.push("HAS_CENTROID"),Ce.shouldRenderCutoff&&we.push("RENDER_CUTOFF");const Ee=d.layout.get("fill-extrusion-edge-radius"),Le=(nt,$e,Je,Oe,tt)=>{const Ze=$e.programConfigurations.get(d.id),st=m.isTileAffectedByFog(nt),be=m.getOrCreateProgram("fillExtrusionGroundEffect",{config:Ze,defines:we,overrideFog:st}),Fe=((ct,Wt,jt,rn,Vt,pn,fn,Kt,en,Jn,An)=>({u_matrix:Wt,u_opacity:jt,u_ao_pass:rn?1:0,u_meter_to_tile:Vt,u_ao:pn,u_flood_light_intensity:fn,u_flood_light_color:Kt,u_attenuation:en,u_edge_radius:Jn,u_fb:0,u_fb_size:An}))(0,Oe,U,k,tt,[$,X*tt],Q,ae,se,pe>=17?0:Ee*tt,de?de.size[0]:0),mt=[];re&&mt.push($e.hiddenByLandmarkVertexBuffer),m.uploadCommonUniforms(ye,be,nt.toUnwrapped(),null,Ce),be.draw(m,ye.gl.TRIANGLES,v,S,E,z,Fe,d.id,$e.vertexBuffer,$e.indexBuffer,Je,d.paint,pe,Ze,mt)};for(const nt of _){const $e=c.getTile(nt),Je=$e.getBucket(d);if(!Je||Je.projection.name!==ce.projection.name||!Je.groundEffect||Je.groundEffect&&!Je.groundEffect.hasData())continue;const Oe=Je.groundEffect,tt=1/Je.tileToMeter;{const Ze=m.translatePosMatrix(nt.projMatrix,$e,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),st=Oe.getDefaultSegment();Le(nt,Oe,st,Ze,tt)}if(ne)for(let Ze=0;Ze<4;Ze++){const st=o.bP[Ze](nt),be=c.getTile(st);if(!be)continue;const Fe=be.getBucket(d);if(!Fe||Fe.projection.name!==ce.projection.name||!Fe.groundEffect||Fe.groundEffect&&!Fe.groundEffect.hasData())continue;const mt=Fe.groundEffect;let ct,Wt;Ze===0?(ct=[-o.J,0,0],Wt=1):Ze===1?(ct=[o.J,0,0],Wt=0):Ze===2?(ct=[0,-o.J,0],Wt=3):(ct=[0,o.J,0],Wt=2);const jt=mt.regionSegments[Wt];if(!jt)continue;const rn=new Float32Array(16);o.m.translate(rn,nt.projMatrix,ct),Le(nt,mt,jt,m.translatePosMatrix(rn,$e,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),tt)}}}function zp(m,c,d,_,v,S,E){_.centroidVertexArray.length===0&&_.createCentroidsBuffer();const z=S?S.findDEMTileFor(d):null;if(!(z&&z.dem||E))return;const k=ne=>new o.P(Math.ceil((ne+o.bS)*o.bT),0),N=ne=>{const de=c.getSource().minzoom,ye=ce=>{const pe=c.getTileByID(ce);if(pe&&pe.hasData())return pe.getBucket(v)},xe=[0,-1,1];for(const ce of xe){if(ne.overscaledZ+ce<de)continue;const pe=ye(ne.calculateScaledKey(ne.overscaledZ+ce));if(pe)return pe}},U=[0,0,0],$=(ne,de)=>(U[0]=Math.min(ne.min.y,de.min.y),U[1]=Math.max(ne.max.y,de.max.y),U[2]=o.J-de.min.x>ne.max.x?de.min.x-o.J:ne.max.x,U),X=(ne,de)=>(U[0]=Math.min(ne.min.x,de.min.x),U[1]=Math.max(ne.max.x,de.max.x),U[2]=o.J-de.min.y>ne.max.y?de.min.y-o.J:ne.max.y,U),Q=[(ne,de)=>$(ne,de),(ne,de)=>$(de,ne),(ne,de)=>X(ne,de),(ne,de)=>X(de,ne)],ae=(ne,de,ye,xe,ce,pe,we)=>{if(!S)return 0;const Ce=[[pe?ye:ne,pe?ne:ye,0],[pe?ye:de,pe?de:ye,0]],Ee=we<0?o.J+we:we,Le=[pe?Ee:(ne+de)/2,pe?(ne+de)/2:Ee,0];return ye===0&&we<0||ye!==0&&we>0?S.getForTilePoints(ce,[Le],!0,xe):Ce.push(Le),S.getForTilePoints(d,Ce,!0,z),Math.max(Ce[0][2],Ce[1][2],Le[2])/S.exaggeration()};for(let ne=0;ne<4;ne++){const de=_.borderFeatureIndices[ne];if(de.length===0)continue;const ye=o.bP[ne](d),xe=N(ye);if(!(xe&&xe instanceof o.bQ)||_.borderDoneWithNeighborZ[ne]===xe.canonical.z)continue;xe.centroidVertexArray.length===0&&xe.createCentroidsBuffer();const ce=S?S.findDEMTileFor(ye):null;if(!(ce&&ce.dem||E))continue;const pe=(ne<2?1:5)-ne,we=xe.borderDoneWithNeighborZ[pe]!==_.canonical.z,Ce=xe.borderFeatureIndices[pe];let Ee=0;if(_.canonical.z!==xe.canonical.z){for(const Le of de)_.showCentroid(_.featuresOnBorder[Le]);if(we)for(const Le of Ce)xe.showCentroid(xe.featuresOnBorder[Le]);_.borderDoneWithNeighborZ[ne]=xe.canonical.z,xe.borderDoneWithNeighborZ[pe]=_.canonical.z}for(const Le of de){const nt=_.featuresOnBorder[Le],$e=_.centroidData[nt.centroidDataIndex],Je=nt.borders[ne];let Oe;for(;Ee<Ce.length;){Oe=xe.featuresOnBorder[Ce[Ee]];const tt=Oe.borders[pe];if(tt[1]>Je[0]+3||tt[0]>Je[0]-3)break;xe.showCentroid(Oe),Ee++}if(Oe&&Ee<Ce.length){const tt=Ee;let Ze=0;for(;!(Oe.borders[pe][0]>Je[1]-3)&&(Ze++,++Ee!==Ce.length);)Oe=xe.featuresOnBorder[Ce[Ee]];if(Oe=xe.featuresOnBorder[Ce[tt]],Ze>1){const Fe=Oe.borders[pe];Math.abs(Je[0]-Fe[0])<3&&Math.abs(Je[1]-Fe[1])<3&&(Ze=1,Ee=tt+1)}else if(Ze===0){_.showCentroid(nt);continue}const st=xe.centroidData[Oe.centroidDataIndex];E&&Ze===1&&(((se=$e).flags|(re=st).flags)&o.bR?(se.flags|=o.bR,re.flags|=o.bR):(se.flags&=~o.bR,re.flags&=~o.bR));const be=nt.intersectsCount()>1||Oe.intersectsCount()>1;if(Ze>1)Ee=tt,$e.centroidXY=st.centroidXY=new o.P(0,0);else if(ce&&ce.dem&&!be){const Fe=Q[ne]($e,st),mt=ne%2?o.J-1:0,ct=ae(Fe[0],Math.min(o.J-1,Fe[1]),mt,ce,ye,ne<2,Fe[2]);$e.centroidXY=st.centroidXY=k(ct)}else be?$e.centroidXY=st.centroidXY=new o.P(0,0):($e.centroidXY=_.encodeBorderCentroid(nt),st.centroidXY=xe.encodeBorderCentroid(Oe));_.writeCentroidToBuffer($e),xe.writeCentroidToBuffer(st)}else _.showCentroid(nt)}_.borderDoneWithNeighborZ[ne]=xe.canonical.z,xe.borderDoneWithNeighborZ[pe]=_.canonical.z}var se,re;(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(m)}const va=[1,0,0],Ia=[0,1,0],tu=[0,0,1];function vo(m,c,d){const _=d.transform,v=d.shadowRenderer;if(!v)return!0;const S=m.toUnwrapped(),E=_.tileSize*v._cascades[d.currentShadowCascade].scale;let z=c.maxHeight;if(_.elevation){const se=_.elevation.getMinMaxForTile(m);se&&(z+=se.max)}const k=[...v.shadowDirection];k[2]=-k[2];const N=v.computeSimplifiedTileShadowVolume(S,z,E,k);if(!N)return!1;const U=[va,Ia,tu,k,[k[0],0,k[2]],[0,k[1],k[2]]],$=_.projection.name==="globe",X=_.scaleZoom(E),Q=o.F.fromInvProjectionMatrix(_.invProjMatrix,_.worldSize,X,!$),ae=v.getCurrentCascadeFrustum();return Q.intersectsPrecise(N.vertices,N.planes,U)===0||ae.intersectsPrecise(N.vertices,N.planes,U)===0}function _d(m){const c=m._nearZ,d=m.projection.farthestPixelDistance(m),_=d-c,v=.2*m.height,S=c+v;return[c,d,(S-v-c)/_,(S-c)/_]}const is=new o.C(1,0,0,1),ni=new o.C(0,1,0,1),vi=new o.C(0,0,1,1),Yo=new o.C(1,0,1,1),ul=new o.C(0,1,1,1);function Ds(m,c,d,_,v,S){const E=m.context,z=m.transform,k=E.gl,N=z.projection.name==="globe",U=N?["PROJECTION_GLOBE_VIEW"]:[];let $=o.m.clone(d.projMatrix);if(N&&o.ao(z.zoom)>0){const Oe=o.bU(d.canonical,z),tt=o.bV(Oe);$=o.m.multiply(new Float32Array(16),z.globeMatrix,tt),o.m.multiply($,z.projMatrix,$)}const X=o.m.create();X[12]+=2*v/(o.a4.devicePixelRatio*z.width),X[13]+=2*S/(o.a4.devicePixelRatio*z.height),o.m.multiply($,X,$);const Q=m.getOrCreateProgram("debug",{defines:U}),ae=c.getTileByID(d.key);m.terrain&&m.terrain.setupElevationDraw(ae,Q);const se=o.b4.disabled,re=o.b6.disabled,ne=m.colorModeForRenderPass(),de="$debug";E.activeTexture.set(k.TEXTURE0),m.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),N?ae._makeGlobeTileDebugBuffers(m.context,z):ae._makeDebugTileBoundsBuffers(m.context,z.projection);const ye=ae._tileDebugBuffer||m.debugBuffer,xe=ae._tileDebugIndexBuffer||m.debugIndexBuffer,ce=ae._tileDebugSegments||m.debugSegments;Q.draw(m,k.LINE_STRIP,se,re,ne,o.b5.disabled,ol($,_),de,ye,xe,ce,null,null,null,[ae._globeTileDebugBorderBuffer]);const pe=ae.latestRawTileData,we=Math.floor((pe&&pe.byteLength||0)/1024),Ce=c.getTile(d).tileSize,Ee=512/Math.min(Ce,512)*(d.overscaledZ/z.zoom)*.5;let Le=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Le+=` => ${d.overscaledZ}`),Le+=` ${we}kb`,function(Oe,tt){Oe.initDebugOverlayCanvas();const Ze=Oe.debugOverlayCanvas,st=Oe.context.gl,be=Oe.debugOverlayCanvas.getContext("2d");be.clearRect(0,0,Ze.width,Ze.height),be.shadowColor="white",be.shadowBlur=2,be.lineWidth=1.5,be.strokeStyle="white",be.textBaseline="top",be.font="bold 36px Open Sans, sans-serif",be.fillText(tt,5,5),be.strokeText(tt,5,5),Oe.debugOverlayTexture.update(Ze),Oe.debugOverlayTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE)}(m,Le);const nt=ae._tileDebugTextBuffer||m.debugBuffer,$e=ae._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Je=ae._tileDebugTextSegments||m.debugSegments;Q.draw(m,k.TRIANGLES,se,re,o.a.alphaBlended,o.b5.disabled,ol($,o.C.transparent,Ee),de,nt,$e,Je,null,null,null,[ae._globeTileDebugTextBuffer])}function xo(m,c,d,_){ai(m,0,c+d/2,m.transform.width,d,_)}function Xo(m,c,d,_){ai(m,c-d/2,0,d,m.transform.height,_)}function ai(m,c,d,_,v,S){const E=m.context,z=E.gl;z.enable(z.SCISSOR_TEST),z.scissor(c*o.a4.devicePixelRatio,d*o.a4.devicePixelRatio,_*o.a4.devicePixelRatio,v*o.a4.devicePixelRatio),E.clear({color:S}),z.disable(z.SCISSOR_TEST)}const nu=o.bW([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Jo}=nu;function _s(m,c,d,_){m.emplaceBack(c,d,_)}class Os{constructor(c){this.vertexArray=new o.bX,this.indices=new o.bp,_s(this.vertexArray,-1,-1,1),_s(this.vertexArray,1,-1,1),_s(this.vertexArray,-1,1,1),_s(this.vertexArray,1,1,1),_s(this.vertexArray,-1,-1,-1),_s(this.vertexArray,1,-1,-1),_s(this.vertexArray,-1,1,-1),_s(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,Jo),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=o.bm.simpleSegment(0,0,36,12)}}function ri(m,c,d,_,v,S){const E=m.context.gl,z=c.paint.get("sky-atmosphere-color"),k=c.paint.get("sky-atmosphere-halo-color"),N=c.paint.get("sky-atmosphere-sun-intensity"),U=(($,X,Q,ae,se)=>({u_matrix_3f:$,u_sun_direction:X,u_sun_intensity:Q,u_color_tint_r:[ae.r,ae.g,ae.b,ae.a],u_color_tint_m:[se.r,se.g,se.b,se.a],u_luminance:5e-5}))(o.bx.fromMat4(o.bx.create(),_),v,N,z,k);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+S,c.skyboxTexture,0),d.draw(m,E.TRIANGLES,o.b4.disabled,o.b6.disabled,o.a.unblended,o.b5.frontCW,U,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const dl=o.bW([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class hh{constructor(c){const d=new o.bY;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const _=new o.bp;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(d,dl.members),this.indexBuffer=c.createIndexBuffer(_),this.segments=o.bm.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const tg=o.bW([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class mh{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15}}class _y{constructor(c){this.colorModeAlphaBlendedWriteRGB=new o.a([o.bZ,o.b_,o.bZ,o.b_],o.C.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new o.a([o.bZ,o.b$,o.bZ,o.b$],o.C.transparent,[!1,!1,!1,!0]),this.params=new mh,this.allocatedStarsCount=0,c.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1}),c.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01})}update(c){const d=c.context;if(!this.atmosphereBuffer||this.allocatedStarsCount!==this.params.starsCount){this.atmosphereBuffer=new hh(d),this.allocatedStarsCount=this.params.starsCount;const _=100,v=200,S=function(U){const $=o.c2(30),X=[];for(let Q=0;Q<U;++Q){const ae=2*Math.PI*$(),se=Math.acos(1-2*$())-.5*Math.PI;X.push(o.v.fromValues(Math.cos(se)*Math.cos(ae),Math.cos(se)*Math.sin(ae),Math.sin(se)))}return X}(this.allocatedStarsCount),E=o.c2(300),z=new o.c0,k=new o.bp;let N=0;for(let U=0;U<S.length;++U){const $=o.v.scale([],S[U],200),X=Math.max(0,1+.01*_*(1*E()-.5)),Q=Math.max(0,1+.01*v*(1*E()-.5));z.emplaceBack($[0],$[1],$[2],-1,-1,X,Q),z.emplaceBack($[0],$[1],$[2],1,-1,X,Q),z.emplaceBack($[0],$[1],$[2],1,1,X,Q),z.emplaceBack($[0],$[1],$[2],-1,1,X,Q),k.emplaceBack(N+0,N+1,N+2),k.emplaceBack(N+0,N+2,N+3),N+=4}this.starsVx=d.createVertexBuffer(z,tg.members),this.starsIdx=d.createIndexBuffer(k),this.starsSegments=o.bm.simpleSegment(0,0,z.length,k.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(c,d){const _=c.context,v=_.gl,S=c.transform,E=new o.b4(v.LEQUAL,o.b4.ReadOnly,[0,1]),z=o.ao(S.zoom),k=d.properties.get("color").toArray01(),N=d.properties.get("high-color").toArray01(),U=d.properties.get("space-color").toArray01PremultipliedAlpha(),$=5e-4,X=o.c1(d.properties.get("horizon-blend"),0,1,$,.25),Q=o.bb(c,_,S)&&X===$?S.worldSize/(2*Math.PI*1.025)-1:S.globeRadius,ae=c.frameCounter/1e3%1,se=o.v.length(S.globeCenterInViewSpace),re=Math.sqrt(Math.pow(se,2)-Math.pow(Q,2)),ne=Math.acos(re/se),de=ye=>{const xe=S.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ye&&xe.push("ALPHA_PASS");const ce=c.getOrCreateProgram("globeAtmosphere",{defines:xe}),pe=((Ce,Ee,Le,nt,$e,Je,Oe,tt,Ze,st,be,Fe)=>({u_frustum_tl:Ce,u_frustum_tr:Ee,u_frustum_br:Le,u_frustum_bl:nt,u_horizon:$e,u_transition:Je,u_fadeout_range:Oe,u_color:tt,u_high_color:Ze,u_space_color:st,u_temporal_offset:be,u_horizon_angle:Fe}))(S.frustumCorners.TL,S.frustumCorners.TR,S.frustumCorners.BR,S.frustumCorners.BL,S.frustumCorners.horizon,z,X,k,N,U,ae,ne);c.uploadCommonUniforms(_,ce);const we=this.atmosphereBuffer;we&&ce.draw(c,v.TRIANGLES,E,o.b6.disabled,ye?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,o.b5.backCW,pe,ye?"atmosphere_glow_alpha":"atmosphere_glow",we.vertexBuffer,we.indexBuffer,we.segments)};de(!1),de(!0)}drawStars(c,d){const _=o.c(d.properties.get("star-intensity"),0,1);if(_===0)return;const v=c.context,S=v.gl,E=c.transform,z=c.getOrCreateProgram("stars"),k=o.q.identity([]);o.q.rotateX(k,k,-E._pitch),o.q.rotateZ(k,k,-E.angle),o.q.rotateX(k,k,o.d(E._center.lat)),o.q.rotateY(k,k,-o.d(E._center.lng));const N=o.m.fromQuat(new Float32Array(16),k),U=o.m.multiply([],E.starsProjMatrix,N),$=o.bx.fromMat4([],N),X=o.bx.invert([],$),Q=[0,1,0];o.v.transformMat3(Q,Q,X),o.v.scale(Q,Q,this.params.sizeMultiplier);const ae=[1,0,0];o.v.transformMat3(ae,ae,X),o.v.scale(ae,ae,this.params.sizeMultiplier);const se=(re=Q,ne=ae,de=_,{u_matrix:Float32Array.from(U),u_up:re,u_right:ne,u_intensity_multiplier:de});var re,ne,de;c.uploadCommonUniforms(v,z),this.starsVx&&this.starsIdx&&z.draw(c,S.TRIANGLES,o.b4.disabled,o.b6.disabled,this.colorModeAlphaBlendedWriteRGB,o.b5.disabled,se,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Ap(m,c){const d=[...m],_=c.cameraWorldSizeForFog/c.worldSize,v=o.m.identity([]);return o.m.scale(v,v,[_,_,1]),o.m.multiply(d,v,d),o.m.multiply(d,c.worldToFogMatrix,d),d}function gh(m,c,d,_){const v=d.material,S=_.context,{baseColorTexture:E,metallicRoughnessTexture:z}=v.pbrMetallicRoughness,{normalTexture:k,occlusionTexture:N,emissionTexture:U}=v;function $(X,Q,ae){if(X&&(m.push(Q),S.activeTexture.set(S.gl.TEXTURE0+ae),X.gfxTexture)){const{minFilter:se,magFilter:re,wrapS:ne,wrapT:de}=X.sampler;X.gfxTexture.bindExtraParam(se,re,ne,de)}}$(E,"HAS_TEXTURE_u_baseColorTexture",Dn.BaseColor),$(z,"HAS_TEXTURE_u_metallicRoughnessTexture",Dn.MetallicRoughness),$(k,"HAS_TEXTURE_u_normalTexture",Dn.Normal),$(N,"HAS_TEXTURE_u_occlusionTexture",Dn.Occlusion),$(U,"HAS_TEXTURE_u_emissionTexture",Dn.Emission),d.texcoordBuffer&&(m.push("HAS_ATTRIBUTE_a_uv_2f"),c.push(d.texcoordBuffer)),d.colorBuffer&&(m.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),c.push(d.colorBuffer)),d.normalBuffer&&(m.push("HAS_ATTRIBUTE_a_normal_3f"),c.push(d.normalBuffer)),d.pbrBuffer&&(m.push("HAS_ATTRIBUTE_a_pbr"),m.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),c.push(d.pbrBuffer)),v.alphaMode!=="OPAQUE"&&v.alphaMode!=="MASK"||m.push("UNPREMULT_TEXTURE_IN_SHADER"),v.defined||m.push("DIFFUSE_SHADED"),m.push("USE_STANDARD_DERIVATIVES")}function pl(m,c,d,_,v,S){const E=d.paint.get("model-opacity"),z=c.context,k=new o.b4(c.context.gl.LEQUAL,o.b4.ReadWrite,c.depthRangeFor3D),N=c.transform,U=m.mesh,$=U.material,X=$.pbrMetallicRoughness,Q=c.style.fog;let ae;ae=c.transform.projection.zAxisUnit==="pixels"?[...m.nodeModelMatrix]:o.m.multiply([],_.zScaleMatrix,m.nodeModelMatrix),o.m.multiply(ae,_.negCameraPosMatrix,ae);const se=o.m.invert([],ae);o.m.transpose(se,se);const re=d.paint.get("model-emissive-strength").constantOr(0),ne=$a(new Float32Array(m.worldViewProjection),new Float32Array(ae),new Float32Array(se),c,E,X.baseColorFactor,$.emissiveFactor,X.metallicFactor,X.roughnessFactor,$,re,d),de={defines:[]},ye=[];gh(de.defines,ye,U,c);const xe=c.shadowRenderer;xe&&(xe.useNormalOffset=!1);let ce=null;if(Q){const Ce=Ap(m.nodeModelMatrix,c.transform);if(ce=new Float32Array(Ce),N.projection.name!=="globe"){const Ee=U.aabb.min,Le=U.aabb.max,[nt,$e]=Q.getOpacityForBounds(Ce,Ee[0],Ee[1],Le[0],Le[1]);de.overrideFog=nt>=as||$e>=as}}const pe=$o(c,d.paint.get("model-cutoff-fade-range"));pe.shouldRenderCutoff&&de.defines.push("RENDER_CUTOFF");const we=c.getOrCreateProgram("model",de);c.uploadCommonUniforms(z,we,null,ce,pe),c.renderPass!=="shadow"&&xe&&xe.setupShadowsFromMatrix(m.nodeModelMatrix,we),we.draw(c,z.gl.TRIANGLES,k,v,S,U.material.doubleSided?o.b5.disabled:o.b5.backCCW,ne,d.id,U.vertexBuffer,U.indexBuffer,U.segments,d.paint,c.transform.zoom,void 0,ye)}function ng(m,c,d,_,v,S,E){let z;z=m.projection.name==="globe"?o.c5(d,m):[...d],o.m.multiply(z,z,c.matrix);const k=o.m.multiply([],_,z);if(c.meshes)for(const N of c.meshes){if(N.material.alphaMode!=="BLEND"){E.push({mesh:N,depth:0,modelIndex:v,worldViewProjection:k,nodeModelMatrix:z});continue}const U=o.v.transformMat4([],N.centroid,k);U[2]>0&&S.push({mesh:N,depth:U[2],modelIndex:v,worldViewProjection:k,nodeModelMatrix:z})}if(c.children)for(const N of c.children)ng(m,N,d,_,v,S,E)}function yd(m,c,d,_){const v=d.shadowRenderer;if(!v)return;const S=v.getShadowPassDepthMode(),E=v.getShadowPassColorMode(),z=v.calculateShadowPassMatrixFromMatrix(c),k=ss(z);d.getOrCreateProgram("modelDepth",{defines:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,S,o.b6.disabled,E,o.b5.backCCW,k,_.id,m.vertexBuffer,m.indexBuffer,m.segments,_.paint,d.transform.zoom,void 0,void 0)}function yy(m,c,d){const _=c.updateZoomBasedPaintProperties(),v=function(S,E,z){let k,N,U,$=S.terrain?S.terrain.exaggeration():0;if(S.terrain&&$>0){const X=S.terrain,Q=X.findDEMTileFor(z);Q&&Q.dem?k=o.c7.create(X,z,Q):$=0}if($===0&&(E.terrainElevationMin=0,E.terrainElevationMax=0),$===E.validForExaggeration&&($===0||k&&k._demTile&&k._demTile.tileID===E.validForDEMTile.id&&k._dem._timestamp===E.validForDEMTile.timestamp))return!1;for(const X in E.instancesPerModel){const Q=E.instancesPerModel[X];for(let ae=0;ae<Q.instancedDataArray.length;++ae){const se=(k?$*k.getElevationAt(0|Q.instancedDataArray.float32[16*ae],0|Q.instancedDataArray.float32[16*ae+1],!0,!0):0)+Q.instancesEvaluatedElevation[ae];Q.instancedDataArray.float32[16*ae+6]=se,N=N?Math.min(E.terrainElevationMin,se):se,U=U?Math.max(E.terrainElevationMax,se):se}}return E.terrainElevationMin=N||0,E.terrainElevationMax=U||0,E.validForExaggeration=$,E.validForDEMTile=k&&k._demTile?{id:k._demTile.tileID,timestamp:k._dem._timestamp}:{id:void 0,timestamp:0},!0}(m,c,d);(_||v)&&(c.uploaded=!1,c.upload(m.context))}const xi={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new o.c3([0,0,0],[o.J,o.J,0])};function vy(m,c){const d=1<<m.canonical.z,_=c.getFreeCameraOptions().position,v=c.elevation,S=m.canonical.x/d,E=(m.canonical.x+1)/d,z=m.canonical.y/d,k=(m.canonical.y+1)/d;let N=c._centerAltitude;if(v){const Q=v.getMinMaxForTile(m);Q&&Q.max>N&&(N=Q.max)}const U=o.c(_.x,S,E)-_.x,$=o.c(_.y,z,k)-_.y,X=o.b(N,c.center.lat)-_.z;return c._zoomFromMercatorZ(Math.sqrt(U*U+$*$+X*X))}function vd(m,c,d,_,v,S,E){const z=m.context,k=m.renderPass==="shadow",N=m.shadowRenderer,U=k&&N?N.getShadowPassDepthMode():new o.b4(z.gl.LEQUAL,o.b4.ReadWrite,m.depthRangeFor3D),$=m.isTileAffectedByFog(S);if(d.meshes)for(const X of d.meshes){const Q=["MODEL_POSITION_ON_GPU"],ae=[];let se,re,ne;_.instancedDataArray.length>20&&Q.push("INSTANCED_ARRAYS");const de=$o(m,c.paint.get("model-cutoff-fade-range"));if(de.shouldRenderCutoff&&Q.push("RENDER_CUTOFF"),k&&N)se=m.getOrCreateProgram("modelDepth",{defines:Q}),re=ss(E.shadowTileMatrix,E.shadowTileMatrix,Float32Array.from(d.matrix)),ne=N.getShadowPassColorMode();else{gh(Q,ae,X,m),se=m.getOrCreateProgram("model",{defines:Q,overrideFog:$});const xe=X.material,ce=xe.pbrMetallicRoughness,pe=c.paint.get("model-opacity"),we=c.paint.get("model-emissive-strength").constantOr(0);re=$a(S.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),m,pe,ce.baseColorFactor,xe.emissiveFactor,ce.metallicFactor,ce.roughnessFactor,xe,we,c,v),N&&(E.shadowUniformsInitialized?se.setShadowUniformValues(z,N.getShadowUniformValues()):(N.setupShadows(S.toUnwrapped(),se,"model-tile",S.overscaledZ),E.shadowUniformsInitialized=!0)),ne=de.shouldRenderCutoff||pe<1||xe.alphaMode!=="OPAQUE"?o.a.alphaBlended:o.a.unblended}m.uploadCommonUniforms(z,se,S.toUnwrapped(),null,de);const ye=X.material.doubleSided?o.b5.disabled:o.b5.backCCW;if(_.instancedDataArray.length>20)ae.push(_.instancedDataBuffer),se.draw(m,z.gl.TRIANGLES,U,o.b6.disabled,ne,ye,re,c.id,X.vertexBuffer,X.indexBuffer,X.segments,c.paint,m.transform.zoom,void 0,ae,_.instancedDataArray.length);else{const xe=k?"u_instance":"u_normal_matrix";for(let ce=0;ce<_.instancedDataArray.length;++ce)re[xe]=new Float32Array(_.instancedDataArray.arrayBuffer,64*ce,16),se.draw(m,z.gl.TRIANGLES,U,o.b6.disabled,ne,ye,re,c.id,X.vertexBuffer,X.indexBuffer,X.segments,c.paint,m.transform.zoom,void 0,ae)}}if(d.children)for(const X of d.children)vd(m,c,X,_,v,S,E)}const xy=[1,-1,1];function ag(m,c,d,_){if(!d.modelManager)return!0;const v=d.modelManager;if(!d.shadowRenderer)return!0;const S=d.shadowRenderer,E=c.aabb;let z=!0,k=m.maxHeight;if(k===0){let U=0;for(const $ in m.instancesPerModel){const X=v.getModel($,_);X?U=Math.max(U,Math.max(Math.max(X.aabb.max[0],X.aabb.max[1]),X.aabb.max[2])):z=!1}k=m.maxScale*U*1.41+m.maxVerticalOffset,z&&(m.maxHeight=k)}E.max[2]=k,E.min[2]+=m.terrainElevationMin,E.max[2]+=m.terrainElevationMax,o.v.transformMat4(E.min,E.min,c.tileMatrix),o.v.transformMat4(E.max,E.max,c.tileMatrix);const N=E.intersects(S.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(m.isInsideFirstShadowMapFrustum=N===2),N===0}class rg{}class au{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(c,d,_){{const $=this._storage.get(d.id);if($)return $.lastUsedFrameIdx=c,$.buf}const v=_.gl,S=v.getBufferParameter(v.ELEMENT_ARRAY_BUFFER,v.BUFFER_SIZE),E=new ArrayBuffer(S),z=new Int16Array(E);v.getBufferSubData(v.ELEMENT_ARRAY_BUFFER,0,new Int16Array(E));const k=new o.c9;for(let $=0;$<S/2;$+=3){const X=z[$],Q=z[$+1],ae=z[$+2];k.emplaceBack(X,Q),k.emplaceBack(Q,ae),k.emplaceBack(ae,X)}const N=_.bindVertexArrayOES.current,U=new rg;return U.buf=new o.I(_,k),U.lastUsedFrameIdx=c,this._storage.set(d.id,U),_.bindVertexArrayOES.set(N),U.buf}update(c){for(const[d,_]of this._storage)c-_.lastUsedFrameIdx>30&&(_.buf.destroy(),this._storage.delete(d))}destroy(){for(const[c,d]of this._storage)d.buf.destroy(),this._storage.delete(c)}}class sg{registerParameter(c,d,_,v,S){}registerButton(c,d,_){}}const bh={symbol:function(m,c,d,_,v){if(m.renderPass!=="translucent")return;const S=o.b6.disabled,E=m.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(z,k,N,U,$,X,Q){const ae=k.transform,se=$==="map",re=X==="map";for(const ne of z){const de=U.getTile(ne),ye=de.getBucket(N);if(!ye||!ye.text||!ye.text.segments.get().length)continue;const xe=o.i(ye.textSizeData,ae.zoom),ce=Ca(ne,ye.getProjection(),ae),pe=ae.calculatePixelsToTileUnitsMatrix(de),we=It(ce,de.tileID.canonical,re,se,ae,ye.getProjection(),pe),Ce=ye.hasIconTextFit()&&ye.hasIconData();if(xe){const Ee=Math.pow(2,ae.zoom-de.tileID.overscaledZ);ti(ye,se,re,Q,o.bG,ae,we,ne,Ee,xe,Ce)}}}(_,m,d,c,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),v),d.paint.get("icon-opacity").constantOr(1)!==0&&On(m,c,d,_,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),d.paint.get("icon-color-saturation"),S,E),d.paint.get("text-opacity").constantOr(1)!==0&&On(m,c,d,_,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),d.paint.get("icon-color-saturation"),S,E),c.map.showCollisionBoxes&&(ks(m,c,d,_,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),ks(m,c,d,_,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(m,c,d,_){if(m.renderPass!=="translucent")return;const v=d.paint.get("circle-opacity"),S=d.paint.get("circle-stroke-width"),E=d.paint.get("circle-stroke-opacity"),z=d.layout.get("circle-sort-key").constantOr(1)!==void 0,k=d.paint.get("circle-emissive-strength");if(v.constantOr(1)===0&&(S.constantOr(1)===0||E.constantOr(1)===0))return;const N=m.context,U=N.gl,$=m.transform,X=m.depthModeForSublayer(0,o.b4.ReadOnly),Q=o.b6.disabled,ae=m.colorModeForDrapableLayerRenderPass(k),se=$.projection.name==="globe",re=[o.E($.center.lng),o.H($.center.lat)],ne=[];for(let ye=0;ye<_.length;ye++){const xe=_[ye],ce=c.getTile(xe),pe=ce.getBucket(d);if(!pe||pe.projection.name!==$.projection.name)continue;const we=pe.programConfigurations.get(d.id),Ce=o.bH(d),Ee=m.isTileAffectedByFog(xe);se&&Ce.push("PROJECTION_GLOBE_VIEW");const Le=m.getOrCreateProgram("circle",{config:we,defines:Ce,overrideFog:Ee}),nt=pe.layoutVertexBuffer,$e=pe.globeExtVertexBuffer,Je=pe.indexBuffer,Oe=$.projection.createInversionMatrix($,xe.canonical),tt={programConfiguration:we,program:Le,layoutVertexBuffer:nt,globeExtVertexBuffer:$e,indexBuffer:Je,uniformValues:o.bI(m,xe,ce,Oe,re,d),tile:ce};if(z){const Ze=pe.segments.get();for(const st of Ze)ne.push({segments:new o.bm([st]),sortKey:st.sortKey,state:tt})}else ne.push({segments:pe.segments,sortKey:0,state:tt})}z&&ne.sort((ye,xe)=>ye.sortKey-xe.sortKey);const de={useDepthForOcclusion:$.depthOcclusionForSymbolsAndCircles};for(const ye of ne){const{programConfiguration:xe,program:ce,layoutVertexBuffer:pe,globeExtVertexBuffer:we,indexBuffer:Ce,uniformValues:Ee,tile:Le}=ye.state,nt=ye.segments;m.terrain&&m.terrain.setupElevationDraw(Le,ce,de),m.uploadCommonUniforms(N,ce,Le.tileID.toUnwrapped()),ce.draw(m,U.TRIANGLES,X,Q,ae,o.b5.disabled,Ee,d.id,pe,Ce,nt,d.paint,$.zoom,xe,[we])}},heatmap:function(m,c,d,_){if(d.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const v=m.context,S=v.gl,E=o.b6.disabled,z=new o.a([S.ONE,S.ONE,S.ONE,S.ONE],o.C.transparent,[!0,!0,!0,!0]);(function(Q,ae,se,re){const ne=Q.gl,de=ae.width*re,ye=ae.height*re;Q.activeTexture.set(ne.TEXTURE1),Q.viewport.set([0,0,de,ye]);let xe=se.heatmapFbo;if(!xe||xe&&(xe.width!==de||xe.height!==ye)){xe&&xe.destroy();const ce=ne.createTexture();ne.bindTexture(ne.TEXTURE_2D,ce),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,ne.LINEAR),xe=se.heatmapFbo=Q.createFramebuffer(de,ye,!0,null),function(pe,we,Ce,Ee,Le,nt){const $e=pe.gl;$e.texImage2D($e.TEXTURE_2D,0,pe.extRenderToTextureHalfFloat?$e.RGBA16F:$e.RGBA,Le,nt,0,$e.RGBA,pe.extRenderToTextureHalfFloat?$e.HALF_FLOAT:$e.UNSIGNED_BYTE,null),Ee.colorAttachment.set(Ce)}(Q,0,ce,xe,de,ye)}else ne.bindTexture(ne.TEXTURE_2D,xe.colorAttachment.get()),Q.bindFramebuffer.set(xe.framebuffer)})(v,m,d,m.transform.projection.name==="globe"?.5:.25),v.clear({color:o.C.transparent});const k=m.transform,N=k.projection.name==="globe",U=N?["PROJECTION_GLOBE_VIEW"]:[],$=N?o.b5.frontCCW:o.b5.disabled,X=[o.E(k.center.lng),o.H(k.center.lat)];for(let Q=0;Q<_.length;Q++){const ae=_[Q];if(c.hasRenderableParent(ae))continue;const se=c.getTile(ae),re=se.getBucket(d);if(!re||re.projection.name!==k.projection.name)continue;const ne=m.isTileAffectedByFog(ae),de=re.programConfigurations.get(d.id),ye=m.getOrCreateProgram("heatmap",{config:de,defines:U,overrideFog:ne}),{zoom:xe}=m.transform;m.terrain&&m.terrain.setupElevationDraw(se,ye),m.uploadCommonUniforms(v,ye,ae.toUnwrapped());const ce=k.projection.createInversionMatrix(k,ae.canonical);ye.draw(m,S.TRIANGLES,o.b4.disabled,E,z,$,md(m,ae,se,ce,X,xe,d.paint.get("heatmap-intensity")),d.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,d.paint,m.transform.zoom,de,N?[re.globeExtVertexBuffer]:null)}v.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(v,S){const E=v.context,z=E.gl,k=S.heatmapFbo;if(!k)return;E.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,k.colorAttachment.get()),E.activeTexture.set(z.TEXTURE1);let N=S.colorRampTexture;N||(N=S.colorRampTexture=new o.a9(E,S.colorRamp,z.RGBA)),N.bind(z.LINEAR,z.CLAMP_TO_EDGE),v.getOrCreateProgram("heatmapTexture").draw(v,z.TRIANGLES,o.b4.disabled,o.b6.disabled,v.colorModeForRenderPass(),o.b5.disabled,((U,$,X,Q)=>({u_image:0,u_color_ramp:1,u_opacity:$.paint.get("heatmap-opacity")}))(0,S),S.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,S.paint,v.transform.zoom)}(m,d))},line:function(m,c,d,_){if(m.renderPass!=="translucent")return;const v=d.paint.get("line-opacity"),S=d.paint.get("line-width");if(v.constantOr(1)===0||S.constantOr(1)===0)return;const E=d.paint.get("line-emissive-strength"),z=m.depthModeForSublayer(0,o.b4.ReadOnly),k=m.colorModeForDrapableLayerRenderPass(E),N=m.terrain&&m.terrain.renderingToTexture?1:o.a4.devicePixelRatio,U=d.paint.get("line-dasharray"),$=U.constantOr(1),X=d.layout.get("line-cap"),Q=d.paint.get("line-pattern"),ae=Q.constantOr(1),se=d.paint.get("line-pattern").constantOr(1),re=d.paint.get("line-opacity").constantOr(1)!==1;let ne=!se&&re;const de=d.paint.get("line-gradient"),ye=ae?"linePattern":"line",xe=m.context,ce=xe.gl,pe=o.bJ(d);m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(ne=!1);for(const we of _){const Ce=c.getTile(we);if(ae&&!Ce.patternsLoaded())continue;const Ee=Ce.getBucket(d);if(!Ee)continue;m.prepareDrawTile();const Le=Ee.programConfigurations.get(d.id),nt=m.isTileAffectedByFog(we),$e=m.getOrCreateProgram(ye,{config:Le,defines:pe,overrideFog:nt}),Je=Q.constantOr(null);if(Je&&Ce.imageAtlas){const ct=Ce.imageAtlas.patternPositions[Je.toString()];ct&&Le.setConstantPatternPositions(ct)}const Oe=U.constantOr(null),tt=X.constantOr(null);if(!ae&&Oe&&tt&&Ce.lineAtlas){const ct=Ce.lineAtlas.getDash(Oe,tt);ct&&Le.setConstantPatternPositions(ct)}let[Ze,st]=d.paint.get("line-trim-offset");(tt==="round"||tt==="square")&&Ze!==st&&(Ze===0&&(Ze-=1),st===1&&(st+=1));const be=m.terrain?we.projMatrix:null,Fe=ae?o.bK(m,Ce,d,be,N):o.bL(m,Ce,d,be,Ee.lineClipsArray.length,N,[Ze,st]);if(de){const ct=Ee.gradients[d.id];let Wt=ct.texture;if(d.gradientVersion!==ct.version){let jt=256;if(d.stepInterpolant){const rn=c.getSource().maxzoom,Vt=we.canonical.z===rn?Math.ceil(1<<m.transform.maxZoom-we.canonical.z):1;jt=o.c(o.bM(Ee.maxLineLength/o.J*1024*Vt),256,xe.maxTextureSize)}ct.gradient=o.bN({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:jt,image:ct.gradient||void 0,clips:Ee.lineClipsArray}),ct.texture?ct.texture.update(ct.gradient):ct.texture=new o.a9(xe,ct.gradient,ce.RGBA),ct.version=d.gradientVersion,Wt=ct.texture}xe.activeTexture.set(ce.TEXTURE1),Wt.bind(d.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}$&&(xe.activeTexture.set(ce.TEXTURE0),Ce.lineAtlasTexture&&Ce.lineAtlasTexture.bind(ce.LINEAR,ce.REPEAT),Le.updatePaintBuffers()),ae&&(xe.activeTexture.set(ce.TEXTURE0),Ce.imageAtlasTexture&&Ce.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),Le.updatePaintBuffers()),m.uploadCommonUniforms(xe,$e,we.toUnwrapped());const mt=ct=>{$e.draw(m,ce.TRIANGLES,z,ct,k,o.b5.disabled,Fe,d.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,d.paint,m.transform.zoom,Le,[Ee.layoutVertexBuffer2])};if(ne){const ct=m.stencilModeForClipping(we).ref;ct===0&&m.terrain&&xe.clear({stencil:0});const Wt={func:ce.EQUAL,mask:255};Fe.u_alpha_discard_threshold=.8,mt(new o.b6(Wt,ct,255,ce.KEEP,ce.KEEP,ce.INVERT)),Fe.u_alpha_discard_threshold=0,mt(new o.b6(Wt,ct,255,ce.KEEP,ce.KEEP,ce.KEEP))}else mt(m.stencilModeForClipping(we))}ne&&(m.resetStencilClippingMasks(),m.terrain&&xe.clear({stencil:0}))},fill:function(m,c,d,_){const v=d.paint.get("fill-color"),S=d.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const E=d.paint.get("fill-emissive-strength"),z=m.colorModeForDrapableLayerRenderPass(E),k=d.paint.get("fill-pattern"),N=m.opaquePassEnabledForLayer()&&!k.constantOr(1)&&v.constantOr(o.C.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===N){const U=m.depthModeForSublayer(1,m.renderPass==="opaque"?o.b4.ReadWrite:o.b4.ReadOnly);qi(m,c,d,_,U,z,!1)}if(m.renderPass==="translucent"&&d.paint.get("fill-antialias")){const U=m.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,o.b4.ReadOnly);qi(m,c,d,_,U,z,!0)}},"fill-extrusion":function(m,c,d,_){const v=d.paint.get("fill-extrusion-opacity"),S=m.context,E=S.gl,z=m.terrain,k=z&&z.renderingToTexture;if(v===0)return;const N=m.conflationActive&&m.layerUsedInConflation(d,c.getSource());if(N&&function(U,$,X,Q){for(const ae of Q){const se=$.getTile(ae).getBucket(X);se&&(se.updateReplacement(ae,U.replacementSource),se.uploadCentroid(U.context))}}(m,c,d,_),z||N)for(const U of _){const $=c.getTile(U).getBucket(d);$&&zp(m.context,c,U,$,d,z,N)}if(m.renderPass==="shadow"&&m.shadowRenderer){const U=m.shadowRenderer;if(z&&v<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof o.am)return;const $=U.getShadowPassDepthMode(),X=U.getShadowPassColorMode();Tc(m,c,d,_,$,o.b6.disabled,X,N)}else if(m.renderPass==="translucent"){const U=!d.paint.get("fill-extrusion-pattern").constantOr(1),$=d.paint.get("fill-extrusion-color").constantOr(o.C.white);if(!k&&$.a!==0){const X=new o.b4(m.context.gl.LEQUAL,o.b4.ReadWrite,m.depthRangeFor3D);v===1&&U?Tc(m,c,d,_,X,o.b6.disabled,o.a.unblended,N):(Tc(m,c,d,_,X,o.b6.disabled,o.a.disabled,N),Tc(m,c,d,_,X,m.stencilModeFor3D(),m.colorModeForRenderPass(),N),m.resetStencilClippingMasks())}if(m.style.enable3dLights()&&U&&(!z&&m.transform.projection.name!=="globe"||k)){const X=d.paint.get("fill-extrusion-opacity"),Q=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),ae=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),se=d.paint.get("fill-extrusion-flood-light-intensity"),re=d.paint.get("fill-extrusion-flood-light-color").toArray01().slice(0,3),ne=Q>0&&ae>0,de=se>0,ye=(ce,pe,we)=>(1-we)*ce+we*pe,xe=ce=>{const pe=m.depthModeForSublayer(1,o.b4.ReadOnly,E.LEQUAL,!0),we=d.paint.get(ce?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ce=ye(.1,3,we),Ee=m._showOverdrawInspector;if(!Ee){const Le=new o.b6({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),nt=new o.a([E.ONE,E.ONE,E.ONE,E.ONE],o.C.transparent,[!1,!1,!1,!0],E.MIN);Zo(m,c,d,_,pe,Le,nt,o.b5.disabled,ce,"sdf",X,Q,ae,se,re,Ce,N,!1)}{const Le=Ee?o.b6.disabled:new o.b6({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),nt=Ee?m.colorModeForRenderPass():new o.a([E.ONE_MINUS_DST_ALPHA,E.DST_ALPHA,E.ONE,E.ONE],o.C.transparent,[!0,!0,!0,!0]);Zo(m,c,d,_,pe,Le,nt,o.b5.disabled,ce,"color",X,Q,ae,se,re,Ce,N,!1)}};if(k){const ce=(pe,we,Ce)=>{const Ee=m.depthModeForSublayer(1,o.b4.ReadOnly,E.LEQUAL,!1),Le=d.paint.get(pe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),nt=ye(.1,3,Le);{const $e=new o.a([E.ONE,E.ONE,E.ONE,E.ONE],o.C.transparent,[!1,!1,!1,!0]);Zo(m,c,d,_,Ee,o.b6.disabled,$e,o.b5.disabled,pe,"clear",X,Q,ae,se,re,nt,N,we)}{const $e=new o.b6({func:E.ALWAYS,mask:255},255,255,E.KEEP,E.KEEP,E.REPLACE),Je=new o.a([E.ONE,E.ONE,E.ONE,E.ONE],o.C.transparent,[!1,!1,!1,!0],E.MIN);Zo(m,c,d,_,Ee,$e,Je,o.b5.disabled,pe,"sdf",X,Q,ae,se,re,nt,N,we)}{const $e=pe?E.ZERO:E.ONE_MINUS_DST_ALPHA,Je=new o.b6({func:E.EQUAL,mask:255},255,255,E.KEEP,E.DECR,E.DECR),Oe=new o.a([$e,E.DST_ALPHA,E.ONE_MINUS_DST_ALPHA,E.ZERO],o.C.transparent,[!0,!0,!0,!0]);Zo(m,c,d,_,Ee,Je,Oe,o.b5.disabled,pe,"color",X,Q,ae,se,re,nt,N,we)}{const $e=new o.a([E.ONE,E.ONE,E.ONE,pe?E.ZERO:E.ONE],o.C.transparent,[!1,!1,!1,!0],pe?E.FUNC_ADD:E.MAX);Zo(m,c,d,_,Ee,o.b6.disabled,$e,o.b5.disabled,pe,"clear",X,Q,ae,se,re,nt,N,we,Ce)}};if(ne||de){let pe;if(m.prepareDrawTile(),z){const we=z.drapeBufferSize[0],Ce=z.drapeBufferSize[1];pe=z.framebufferCopyTexture,pe&&(!pe||pe.size[0]===we&&pe.size[1]===Ce)||(pe&&pe.destroy(),pe=z.framebufferCopyTexture=new o.a9(S,new o.a5({width:we,height:Ce}),E.RGBA)),pe.bind(E.LINEAR,E.CLAMP_TO_EDGE),E.copyTexImage2D(E.TEXTURE_2D,0,E.RGBA,0,0,we,Ce,0)}ne&&ce(!0,!1,pe),de&&ce(!1,!0,pe)}}else ne&&xe(!0),de&&xe(!1)}}},hillshade:function(m,c,d,_){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent"||m.style.disableElevatedTerrain)return;const v=m.context,S=m.terrain&&m.terrain.renderingToTexture,[E,z]=m.renderPass!=="translucent"||S?[{},_]:m.stencilConfigForOverlap(_);for(const k of z){const N=c.getTile(k);if(N.needsHillshadePrepare&&m.renderPass==="offscreen")rl(m,N,d);else if(m.renderPass==="translucent"){const U=m.depthModeForSublayer(0,o.b4.ReadOnly),$=d.paint.get("hillshade-emissive-strength"),X=m.colorModeForDrapableLayerRenderPass($),Q=S&&m.terrain?m.terrain.stencilModeForRTTOverlap(k):E[k.overscaledZ];cd(m,k,N,d,U,Q,X)}}v.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,c,d,_,v,S){if(m.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const E=m.context,z=E.gl,k=c.getSource(),N=function(we,Ce,Ee){const Le=we.paint.get("raster-color"),nt=[],$e=we.paint.get("raster-resampling"),Je=we.paint.get("raster-color-mix"),Oe=we.paint.get("raster-color-range"),tt=[Je[0],Je[1],Je[2],0],Ze=Je[3],st=$e==="nearest"?Ee.NEAREST:Ee.LINEAR;if(Le&&nt.push("RASTER_COLOR"),Le){Ce.activeTexture.set(Ee.TEXTURE2);let be=we.colorRampTexture;be||(be=we.colorRampTexture=new o.a9(Ce,we.colorRamp,Ee.RGBA)),be.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE)}return{mix:tt,range:Oe,offset:Ze,defines:nt,resampling:st}}(d,E,z),U=N.defines,$=m.transform.projection.name==="globe";let X=!1;if(k instanceof o.aK&&!_.length){if(!$)return;if(k.onNorthPole)X=!0,U.push("GLOBE_POLES");else{if(!k.onSouthPole)return;X=!0,U.push("GLOBE_POLES")}}const Q=d.paint.get("raster-emissive-strength"),ae=m.colorModeForDrapableLayerRenderPass(Q),se=m.terrain&&m.terrain.renderingToTexture,re=k instanceof o.aK&&d.paint.get("raster-elevation")!==0,ne=!m.options.moving,de=d.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;if(X){const we=c.getSource();if(!(we instanceof o.aK))return;const Ce=we.texture;if(!Ce)return;const Ee=m.globeSharedBuffers;if(!Ee)return;const Le=new o.b4(z.LEQUAL,o.b4.ReadWrite,m.depthRangeFor3D),nt=Float32Array.from(m.transform.expandedFarZProjMatrix);let $e=o.bj(0,0,m.transform);const Je=Float32Array.from(o.bh(o.bi(new o.t(0,0,0)))),Oe={opacity:1,mix:0};m.terrain&&m.terrain.prepareDrawTile(),E.activeTexture.set(z.TEXTURE0),Ce.bind(de,z.CLAMP_TO_EDGE),E.activeTexture.set(z.TEXTURE1),Ce.bind(de,z.CLAMP_TO_EDGE),Ce.useMipmap&&E.extTextureFilterAnisotropic&&m.transform.pitch>20&&z.texParameterf(z.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax);const[tt,Ze,st,be]=Ee.getPoleBuffers(0,!0);let Fe;we.onNorthPole?(Fe=tt,m.renderDefaultNorthPole=!1):($e=o.m.scale(o.m.create(),$e,[1,-1,1]),Fe=Ze,m.renderDefaultSouthPole=!1);const mt=((Wt,jt,rn,Vt,pn,fn,Kt,en,Jn,An,Pa,ma)=>gd(Wt,jt,rn,new Float32Array(16),new Float32Array(9),[0,0],0,[0,0],[0,0,0,0],1,Vt,pn,[0,0],Kt,2,Jn,An,Pa,1,0,ma))(nt,Je,$e,Oe,d,0,d.paint.get("raster-elevation"),0,N.mix,N.offset,N.range,Q),ct=m.getOrCreateProgram("raster",{defines:N.defines});return m.uploadCommonUniforms(E,ct,null),void ct.draw(m,z.TRIANGLES,Le,o.b6.disabled,ae,o.b5.disabled,mt,d.id,Fe,st,be)}if(!_.length)return;const[ye,xe]=k instanceof o.aK||se?[{},_]:m.stencilConfigForOverlap(_),ce=xe[xe.length-1].overscaledZ,pe=re&&$;pe&&N.defines.push("PROJECTION_GLOBE_VIEW"),re&&N.defines.push("RENDER_CUTOFF");for(const we of xe){const Ce=we.toUnwrapped(),Ee=c.getTile(we);if(se&&(!Ee||!Ee.hasData())||!Ee.texture)continue;let Le,nt;se?(Le=o.b4.disabled,nt=we.projMatrix):re?(Le=new o.b4(z.LEQUAL,o.b4.ReadWrite,m.depthRangeFor3D),nt=$?Float32Array.from(m.transform.expandedFarZProjMatrix):m.transform.calculateProjMatrix(Ce,ne)):(Le=m.depthModeForSublayer(we.overscaledZ-ce,d.paint.get("raster-opacity")===1?o.b4.ReadWrite:o.b4.ReadOnly,z.LESS),nt=m.transform.calculateProjMatrix(Ce,ne));const $e=m.terrain&&se?m.terrain.stencilModeForRTTOverlap(we):ye[we.overscaledZ],Je=S?0:d.paint.get("raster-fade-duration");Ee.registerFadeDuration(Je);const Oe=c.findLoadedParent(we,0),tt=qo(Ee,Oe,c,m.transform,Je);let Ze,st;m.terrain&&m.terrain.prepareDrawTile(),E.activeTexture.set(z.TEXTURE0),Ee.texture&&Ee.texture.bind(de,z.CLAMP_TO_EDGE),E.activeTexture.set(z.TEXTURE1),Oe?(Oe.texture&&Oe.texture.bind(de,z.CLAMP_TO_EDGE),Ze=Math.pow(2,Oe.tileID.overscaledZ-Ee.tileID.overscaledZ),st=[Ee.tileID.canonical.x*Ze%1,Ee.tileID.canonical.y*Ze%1]):Ee.texture&&Ee.texture.bind(de,z.CLAMP_TO_EDGE),Ee.texture&&Ee.texture.useMipmap&&E.extTextureFilterAnisotropic&&m.transform.pitch>20&&z.texParameterf(z.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax);const be=m.transform;let Fe;const mt=re?_d(be):[0,0,0,0];let ct,Wt,jt,rn,Vt;pe&&k instanceof o.aK&&k.coordinates.length>3?(ct=Float32Array.from(o.bh(o.bi(new o.t(0,0,0)))),Wt=Float32Array.from(be.globeMatrix),jt=Float32Array.from(o.bc(be)),rn=[o.E(be.center.lng),o.H(be.center.lat)],Fe=k.elevatedGlobePerspectiveTransform,Vt=k.elevatedGlobeGridMatrix||new Float32Array(9)):(Fe=k instanceof o.aK?k.perspectiveTransform:[0,0],ct=new Float32Array(16),Wt=new Float32Array(9),jt=new Float32Array(16),rn=[0,0],Vt=new Float32Array(9));const pn=gd(nt,ct,Wt,jt,Vt,st||[0,0],o.ao(m.transform.zoom),rn,mt,Ze||1,tt,d,Fe,re?d.paint.get("raster-elevation"):0,2,N.mix,N.offset,N.range,1,0,Q),fn=m.isTileAffectedByFog(we),Kt=m.getOrCreateProgram("raster",{defines:N.defines,overrideFog:fn});if(m.uploadCommonUniforms(E,Kt,Ce),k instanceof o.aK){const en=k.elevatedGlobeVertexBuffer,Jn=k.elevatedGlobeIndexBuffer;if(se||!$)k.boundsBuffer&&k.boundsSegments&&Kt.draw(m,z.TRIANGLES,Le,o.b6.disabled,ae,o.b5.disabled,pn,d.id,k.boundsBuffer,m.quadTriangleIndexBuffer,k.boundsSegments);else if(en&&Jn){const An=be.zoom<=o.Z?k.elevatedGlobeSegments:k.getSegmentsForLongitude(be.center.lng);An&&(Kt.draw(m,z.TRIANGLES,Le,o.b6.disabled,ae,o.b5.backCW,pn,d.id,en,Jn,An),Kt.draw(m,z.TRIANGLES,Le,o.b6.disabled,ae,o.b5.frontCW,pn,d.id,en,Jn,An))}}else{const{tileBoundsBuffer:en,tileBoundsIndexBuffer:Jn,tileBoundsSegments:An}=m.getTileBoundsBuffers(Ee);Kt.draw(m,z.TRIANGLES,Le,$e,ae,o.b5.disabled,pn,d.id,en,Jn,An)}}m.resetStencilClippingMasks()},background:function(m,c,d,_){const v=d.paint.get("background-color"),S=d.paint.get("background-opacity"),E=d.paint.get("background-emissive-strength");if(S===0)return;const z=m.context,k=z.gl,N=m.transform,U=N.tileSize,$=d.paint.get("background-pattern");if(m.isPatternMissing($,d.scope))return;const X=!$&&v.a===1&&S===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==X)return;const Q=o.b6.disabled,ae=m.depthModeForSublayer(0,X==="opaque"?o.b4.ReadWrite:o.b4.ReadOnly),se=m.colorModeForDrapableLayerRenderPass(E),re=$?"backgroundPattern":"background";let ne,de=_;de||(ne=m.getBackgroundTiles(),de=Object.values(ne).map(ye=>ye.tileID)),$&&(z.activeTexture.set(k.TEXTURE0),m.imageManager.bind(m.context,d.scope));for(const ye of de){const xe=m.isTileAffectedByFog(ye),ce=m.getOrCreateProgram(re,{overrideFog:xe}),pe=ye.toUnwrapped(),we=_?ye.projMatrix:m.transform.calculateProjMatrix(pe);m.prepareDrawTile();const Ce=c?c.getTile(ye):ne?ne[ye.key]:new o.bt(ye,U,N.zoom,m),Ee=$?Ea(we,E,S,m,$,d.scope,{tileID:ye,tileSize:U}):En(we,E,S,v);m.uploadCommonUniforms(z,ce,pe);const{tileBoundsBuffer:Le,tileBoundsIndexBuffer:nt,tileBoundsSegments:$e}=m.getTileBoundsBuffers(Ce);ce.draw(m,k.TRIANGLES,ae,Q,se,o.b5.disabled,Ee,d.id,Le,nt,$e)}},sky:function(m,c,d){const _=m._atmosphere?o.ao(m.transform.zoom):1,v=d.paint.get("sky-opacity")*_;if(v===0)return;const S=m.context,E=d.paint.get("sky-type"),z=new o.b4(S.gl.LEQUAL,o.b4.ReadOnly,[0,1]),k=m.frameCounter/1e3%1;E==="atmosphere"?m.renderPass==="offscreen"?d.needsSkyboxCapture(m)&&(function(N,U,$,X){const Q=N.context,ae=Q.gl;let se=U.skyboxFbo;if(!se){se=U.skyboxFbo=Q.createFramebuffer(32,32,!0,null),U.skyboxGeometry=new Os(Q),U.skyboxTexture=Q.gl.createTexture(),ae.bindTexture(ae.TEXTURE_CUBE_MAP,U.skyboxTexture),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MAG_FILTER,ae.LINEAR);for(let ye=0;ye<6;++ye)ae.texImage2D(ae.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,ae.RGBA,32,32,0,ae.RGBA,ae.UNSIGNED_BYTE,null)}Q.bindFramebuffer.set(se.framebuffer),Q.viewport.set([0,0,32,32]);const re=U.getCenter(N,!0),ne=N.getOrCreateProgram("skyboxCapture"),de=new Float64Array(16);o.m.identity(de),o.m.rotateY(de,de,.5*-Math.PI),ri(N,U,ne,de,re,0),o.m.identity(de),o.m.rotateY(de,de,.5*Math.PI),ri(N,U,ne,de,re,1),o.m.identity(de),o.m.rotateX(de,de,.5*-Math.PI),ri(N,U,ne,de,re,2),o.m.identity(de),o.m.rotateX(de,de,.5*Math.PI),ri(N,U,ne,de,re,3),o.m.identity(de),ri(N,U,ne,de,re,4),o.m.identity(de),o.m.rotateY(de,de,Math.PI),ri(N,U,ne,de,re,5),Q.viewport.set([0,0,N.width,N.height])}(m,d),d.markSkyboxValid(m)):m.renderPass==="sky"&&function(N,U,$,X,Q){const ae=N.context,se=ae.gl,re=N.transform,ne=N.getOrCreateProgram("skybox");ae.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_CUBE_MAP,U.skyboxTexture);const de=((ye,xe,ce,pe,we)=>({u_matrix:ye,u_sun_direction:xe,u_cubemap:0,u_opacity:pe,u_temporal_offset:we}))(re.skyboxMatrix,U.getCenter(N,!1),0,X,Q);N.uploadCommonUniforms(ae,ne),ne.draw(N,se.TRIANGLES,$,o.b6.disabled,N.colorModeForRenderPass(),o.b5.backCW,de,"skybox",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}(m,d,z,v,k):E==="gradient"&&m.renderPass==="sky"&&function(N,U,$,X,Q){const ae=N.context,se=ae.gl,re=N.transform,ne=N.getOrCreateProgram("skyboxGradient");U.skyboxGeometry||(U.skyboxGeometry=new Os(ae)),ae.activeTexture.set(se.TEXTURE0);let de=U.colorRampTexture;de||(de=U.colorRampTexture=new o.a9(ae,U.colorRamp,se.RGBA)),de.bind(se.LINEAR,se.CLAMP_TO_EDGE);const ye=((xe,ce,pe,we,Ce)=>({u_matrix:xe,u_color_ramp:0,u_center_direction:ce,u_radius:o.d(pe),u_opacity:we,u_temporal_offset:Ce}))(re.skyboxMatrix,U.getCenter(N,!1),U.paint.get("sky-gradient-radius"),X,Q);N.uploadCommonUniforms(ae,ne),ne.draw(N,se.TRIANGLES,$,o.b6.disabled,N.colorModeForRenderPass(),o.b5.backCW,ye,"skyboxGradient",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}(m,d,z,v,k)},debug:function(m,c,d,_,v){for(let S=0;S<d.length;S++)if(v){const k=new o.C(_.r*.8,_.g*.8,_.b*.8,1);Ds(m,c,d[S],_,-1,-1),Ds(m,c,d[S],_,-1,1),Ds(m,c,d[S],_,1,1),Ds(m,c,d[S],_,1,-1),Ds(m,c,d[S],k,0,0)}else Ds(m,c,d[S],_,0,0)},custom:function(m,c,d,_){const v=m.context,S=d.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&d.isLayerDraped(c)){if(m.renderPass==="offscreen"){const E=S.prerender;if(E){if(m.setCustomLayerDefaults(),v.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const z=m.transform.pointMerc;E.call(S,v.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.ao(m.transform.zoom),[z.x,z.y],m.transform.pixelsPerMeterRatio)}else E.call(S,v.gl,m.transform.customLayerMatrix());v.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const z=S.renderToTile;if(z){const k=_[0].canonical,N=new o.M(k.x+_[0].wrap*(1<<k.z),k.y,k.z);v.setDepthMode(o.b4.disabled),v.setStencilMode(o.b6.disabled),v.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),z.call(S,v.gl,N),v.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),v.setColorMode(m.colorModeForRenderPass()),v.setStencilMode(o.b6.disabled);const E=S.renderingMode==="3d"?new o.b4(m.context.gl.LEQUAL,o.b4.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,o.b4.ReadOnly);if(v.setDepthMode(E),m.transform.projection.name==="globe"){const z=m.transform.pointMerc;S.render(v.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.ao(m.transform.zoom),[z.x,z.y],m.transform.pixelsPerMeterRatio)}else S.render(v.gl,m.transform.customLayerMatrix());v.setDirty(),m.setBaseState(),v.bindFramebuffer.set(null)}}else o.X("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(m,c,d,_){if(m.renderPass==="opaque")return;const v=d.paint.get("model-opacity");if(v===0)return;const S=d.paint.get("model-cast-shadows");if(m.renderPass==="shadow"&&(!S||m.terrain&&v<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof o.am))return;const E=m.shadowRenderer,z=d.paint.get("model-receive-shadows");E&&(E.useNormalOffset=!0,z||(E.enabled=!1));const k=()=>{E&&(E.useNormalOffset=!0,z||(E.enabled=!0))},N=c.getSource();if(m.renderPass==="light-beam"&&N.type!=="batched-model")return;if(N.type==="vector"||N.type==="geojson")return function(ne,de,ye,xe){const ce=ne.transform;if(ce.projection.name!=="mercator")return void o.X(`Drawing 3D models for ${ce.projection.name} projection is not yet implemented`);const pe=ce.getFreeCameraOptions().position;if(!ne.modelManager)return;const we=ne.modelManager,Ce=ne.shadowRenderer;if(!ye._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Ee=ye._unevaluatedLayout._values["model-id"],Le={...ye.layout.get("model-id").parameters};for(const nt of xe){const $e=de.getTile(nt).getBucket(ye);if(!$e||$e.projection.name!==ce.projection.name)continue;const Je=vy(nt,ce);Le.zoom=Je;const Oe=Ee.possiblyEvaluate(Le);if(yy(ne,$e,nt),xi.shadowUniformsInitialized=!1,xi.useSingleShadowCascade=!!Ce&&Ce.getMaxCascadeForTile(nt.toUnwrapped())===0,ne.renderPass==="shadow"&&Ce){if(ne.currentShadowCascade===1&&$e.isInsideFirstShadowMapFrustum)continue;const st=ce.calculatePosMatrix(nt.toUnwrapped(),ce.worldSize);if(xi.tileMatrix.set(st),xi.shadowTileMatrix=Float32Array.from(Ce.calculateShadowPassMatrixFromMatrix(st)),xi.aabb.min.fill(0),xi.aabb.max[0]=xi.aabb.max[1]=o.J,xi.aabb.max[2]=0,ag($e,xi,ne,ye.scope))continue}const tt=1<<nt.canonical.z,Ze=[((pe.x-nt.wrap)*tt-nt.canonical.x)*o.J,(pe.y*tt-nt.canonical.y)*o.J,pe.z*tt*o.J];for(let st in $e.instancesPerModel){const be=$e.instancesPerModel[st];be.features.length>0&&(st=Oe.evaluate(be.features[0].feature,{}));const Fe=we.getModel(st,ye.scope);if(Fe&&Fe.uploaded)for(const mt of Fe.nodes)vd(ne,ye,mt,be,Ze,nt,xi)}}}(m,c,d,_),void k();if(!N.loaded())return;if(N.type==="batched-model")return function(ne,de,ye,xe){const ce=ne.context,pe=ne.transform,we=ne.style.fog,Ce=ne.shadowRenderer;if(pe.projection.name!=="mercator")return void o.X(`Drawing 3D landmark models for ${pe.projection.name} projection is not yet implemented`);const Ee=ne.transform.getFreeCameraOptions().position,Le=o.v.scale([],[Ee.x,Ee.y,Ee.z],ne.transform.worldSize);o.v.negate(Le,Le);const nt=o.m.identity([]),$e=o.c4(pe.center.lat,pe.zoom),Je=o.m.fromScaling([],[1,1,1/$e]);o.m.translate(nt,nt,Le);const Oe=ye.paint.get("model-opacity"),tt=new o.b4(ce.gl.LEQUAL,o.b4.ReadWrite,ne.depthRangeFor3D),Ze=new o.b4(ce.gl.LEQUAL,o.b4.ReadOnly,ne.depthRangeFor3D),st=function(be,Fe){for(const mt of xe){const ct=de.getTile(mt).getBucket(ye);if(!ct||!ct.uploaded)continue;let Wt=!1;Ce&&(Wt=Ce.getMaxCascadeForTile(mt.toUnwrapped())===0);const jt=pe.calculatePosMatrix(mt.toUnwrapped(),pe.worldSize),rn=ct.modelTraits;for(const Vt of ct.getNodesInfo()){if(Vt.hiddenByReplacement||!Vt.node.meshes)continue;const pn=Vt.node,fn=ne.renderPass==="light-beam",Kt=[...jt],en=Vt.evaluatedScale;let Jn=0;ne.terrain&&pn.elevation&&(Jn=pn.elevation*ne.terrain.exaggeration()),o.m.translate(Kt,Kt,[(pn.anchor?pn.anchor[0]:0)*(en[0]-1),(pn.anchor?pn.anchor[1]:0)*(en[1]-1),Jn]),en!==o.c6&&o.m.scale(Kt,Kt,en),o.m.multiply(Kt,Kt,pn.matrix);const An=o.m.multiply([],Je,Kt);o.m.multiply(An,nt,An);const Pa=o.m.invert([],An);o.m.transpose(Pa,Pa),o.m.scale(Pa,Pa,xy);const ma=o.m.multiply([],pe.expandedFarZProjMatrix,Kt),ys=rn&o.c8.HasMapboxMeshFeatures,Si=ys?0:Vt.evaluatedRMEA[0][2];for(let ua=0;ua<pn.meshes.length;++ua){const Qn=pn.meshes[ua],sa=ua===pn.lightMeshIndex;if(sa){if(!fn&&!ne.terrain&&ne.shadowRenderer){ne.currentLayer<ne.firstLightBeamLayer&&(ne.firstLightBeamLayer=ne.currentLayer);continue}}else if(fn)continue;const Oa={defines:[]},Br=[];gh(Oa.defines,Br,Qn,ne),ys||Oa.defines.push("DIFFUSE_SHADED"),Wt&&Oa.defines.push("SHADOWS_SINGLE_CASCADE");const Ma=ne.renderPass==="shadow";if(Ma){yd(Qn,Kt,ne,ye);continue}let Jr=null;if(we){const Hi=Ap(Kt,ne.transform);if(Jr=new Float32Array(Hi),pe.projection.name!=="globe"){const ba=Qn.aabb.min,Zi=Qn.aabb.max,[So,Qo]=we.getOpacityForBounds(Hi,ba[0],ba[1],Zi[0],Zi[1]);Oa.overrideFog=So>=as||Qo>=as}}const vs=ne.getOrCreateProgram("model",Oa);!Ma&&Ce&&(Ce.useNormalOffset=!!Qn.normalBuffer,Ce.setupShadowsFromMatrix(Kt,vs,Ce.useNormalOffset)),ne.uploadCommonUniforms(ce,vs,mt.toUnwrapped(),Jr);const Kr=Qn.material,Ti=Kr.pbrMetallicRoughness;Ti.metallicFactor=.9,Ti.roughnessFactor=.5;const Ko=$a(new Float32Array(ma),new Float32Array(An),new Float32Array(Pa),ne,Oe,Ti.baseColorFactor,Kr.emissiveFactor,Ti.metallicFactor,Ti.roughnessFactor,Kr,Si,ye);vs.draw(ne,ce.gl.TRIANGLES,Fe&&!sa?tt:Ze,o.b6.disabled,be?sa||Oe<1||Vt.hasTranslucentParts?o.a.alphaBlended:o.a.unblended:o.a.disabled,o.b5.backCCW,Ko,ye.id,Qn.vertexBuffer,Qn.indexBuffer,Qn.segments,ye.paint,ne.transform.zoom,void 0,Br)}}}};(function(be,Fe,mt,ct){const Wt=be.terrain?be.terrain.exaggeration():0,jt=be.transform.zoom;for(const rn of ct){const Vt=Fe.getTile(rn).getBucket(mt);Vt&&(be.conflationActive&&Vt.updateReplacement(rn,be.replacementSource),Vt.evaluateScale(be,mt),be.terrain&&Wt>0&&Vt.elevationUpdate(be.terrain,Wt,rn,mt.source),Vt.needsReEvaluation(be,jt,mt)&&Vt.evaluate(mt))}})(ne,de,ye,xe),Oe===1?st(!0,!0):(st(!1,!0),st(!0,!1))}(m,c,d,_),void k();const U=N.getModels(),$=[],X=m.transform.getFreeCameraOptions().position,Q=o.v.scale([],[X.x,X.y,X.z],m.transform.worldSize);o.v.negate(Q,Q);const ae=[],se=[];let re=0;for(const ne of U){const de=d.paint.get("model-rotation").constantOr(null),ye=d.paint.get("model-scale").constantOr(null),xe=d.paint.get("model-translation").constantOr(null);ne.computeModelMatrix(m,de,ye,xe,!0,!0,!1);const ce=o.m.identity([]),pe=o.c4(ne.position.lat,m.transform.zoom),we=o.m.fromScaling([],[1,1,1/pe]);o.m.translate(ce,ce,Q),$.push({zScaleMatrix:we,negCameraPosMatrix:ce});for(const Ce of ne.nodes)ng(m.transform,Ce,ne.matrix,m.transform.expandedFarZProjMatrix,re,ae,se);re++}if(ae.sort((ne,de)=>de.depth-ne.depth),m.renderPass!=="shadow"){if(v===1)for(const ne of se)pl(ne,m,d,$[ne.modelIndex],o.b6.disabled,m.colorModeForRenderPass());else{for(const ne of se)pl(ne,m,d,$[ne.modelIndex],o.b6.disabled,o.a.disabled);for(const ne of se)pl(ne,m,d,$[ne.modelIndex],m.stencilModeFor3D(),m.colorModeForRenderPass());m.resetStencilClippingMasks()}for(const ne of ae)pl(ne,m,d,$[ne.modelIndex],o.b6.disabled,m.colorModeForRenderPass());k()}else{for(const ne of se)yd(ne.mesh,ne.nodeModelMatrix,m,d);for(const ne of ae)yd(ne.mesh,ne.nodeModelMatrix,m,d);k()}}},ig={modelUpload:function(m,c,d){const _=c.getSource();if(!_.loaded())return;if(_.type==="vector"||_.type==="geojson")return void(m.modelManager&&m.modelManager.upload(m,d));if(_.type==="batched-model")return;const v=_.getModels();for(const S of v)S.upload(m.context)}};class wy{constructor(c,d,_,v){this.context=new La(c,d),this.transform=_,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=v,this._debugParams={showTerrainProxyTiles:!1},v.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),this.setup(),this.numSublayers=o.bq.maxUnderzooming+o.bq.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new o.ca,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new yh(this),this._wireframeDebugCache=new au,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0}updateTerrain(c,d){const _=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ho(this,c));const v=this._terrain;this.transform.elevation=_?v:null,v.update(c,this.transform,d),this.transform.elevation&&!v.enabled&&(this.transform.elevation=null)}_updateFog(c){const d=c.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,v]=d.getFovAdjustedRange(this.transform._fov);if(_>v)return void(this.transform.fogCullDistSq=null);const S=_+.78*(v-_);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(c,d){if(this.width=c*o.a4.devicePixelRatio,this.height=d*o.a4.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._mergedLayers[_].resize()}setup(){const c=this.context,d=new o.bo;d.emplaceBack(0,0),d.emplaceBack(o.J,0),d.emplaceBack(0,o.J),d.emplaceBack(o.J,o.J),this.tileExtentBuffer=c.createVertexBuffer(d,o.bl.members),this.tileExtentSegments=o.bm.simpleSegment(0,0,4,2);const _=new o.bo;_.emplaceBack(0,0),_.emplaceBack(o.J,0),_.emplaceBack(0,o.J),_.emplaceBack(o.J,o.J),this.debugBuffer=c.createVertexBuffer(_,o.bl.members),this.debugSegments=o.bm.simpleSegment(0,0,4,5);const v=new o.bo;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(v,o.bl.members),this.viewportSegments=o.bm.simpleSegment(0,0,4,2);const S=new o.cb;S.emplaceBack(0,0,0,0),S.emplaceBack(o.J,0,o.J,0),S.emplaceBack(0,o.J,0,o.J),S.emplaceBack(o.J,o.J,o.J,o.J),this.mercatorBoundsBuffer=c.createVertexBuffer(S,o.cc.members),this.mercatorBoundsSegments=o.bm.simpleSegment(0,0,4,2);const E=new o.bp;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(E);const z=new o.cd;for(const N of[0,1,3,2,0])z.emplaceBack(N);this.debugIndexBuffer=c.createIndexBuffer(z),this.emptyTexture=new o.a9(c,new o.a5({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=o.m.create();const k=this.context.gl;this.stencilClearMode=new o.b6({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,c.TRIANGLES,o.b4.disabled,this.stencilClearMode,o.a.disabled,o.b5.disabled,bi(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,d,_){if(!d||this.currentStencilSource===d.id||!c.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let z=!1;for(const k of _)if(this._tileClippingMaskIDs[k.key]===void 0){z=!0;break}if(!z)return}this.currentStencilSource=d.id;const v=this.context,S=v.gl;this.nextStencilID+_.length>256&&this.clearStencil(),v.setColorMode(o.a.disabled),v.setDepthMode(o.b4.disabled);const E=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const z of _){const k=d.getTile(z),N=this._tileClippingMaskIDs[z.key]=this.nextStencilID++,{tileBoundsBuffer:U,tileBoundsIndexBuffer:$,tileBoundsSegments:X}=this.getTileBoundsBuffers(k);E.draw(this,S.TRIANGLES,o.b4.disabled,new o.b6({func:S.ALWAYS,mask:0},N,255,S.KEEP,S.KEEP,S.REPLACE),o.a.disabled,o.b5.disabled,bi(z.projMatrix),"$clipping",U,$,X)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,d=this.context.gl;return new o.b6({func:d.NOTEQUAL,mask:255},c,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const d=this.context.gl;return new o.b6({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(c){const d=this.context.gl,_=c.sort((E,z)=>z.overscaledZ-E.overscaledZ),v=_[_.length-1].overscaledZ,S=_[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const E={};for(let z=0;z<S;z++)E[z+v]=new o.b6({func:d.GEQUAL,mask:255},z+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=S,[E,_]}return[{[v]:o.b6.disabled},_]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new o.a([c.CONSTANT_COLOR,c.ONE,c.CONSTANT_COLOR,c.ONE],new o.C(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.a.unblended:o.a.alphaBlended}colorModeForDrapableLayerRenderPass(c){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new o.a([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new o.C(0,0,0,c===void 0?0:c),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(c,d,_,v=!1){if(!this.opaquePassEnabledForLayer()&&!v)return o.b4.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new o.b4(_||this.context.gl.LEQUAL,d,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,d){this._wireframeDebugCache.update(this.frameCounter),this.style=c,this.options=d;const _=this.style._mergedLayers,v=this.style.order,S=v.map(ce=>_[ce]),E=this.style._mergedSourceCaches;this.imageManager=c.imageManager,this.modelManager=c.modelManager,this.symbolFadeChange=c.placement.symbolFadeChange(o.a4.now()),this.imageManager.beginFrame();let z=0,k=!1;for(const ce in E){const pe=E[ce];pe.used&&(pe.prepare(this.context),pe.getSource().usedInConflation&&++z)}const N={},U={},$={},X={},Q={};for(const ce in E){const pe=E[ce];N[ce]=pe.getVisibleCoordinates(),U[ce]=N[ce].slice().reverse(),$[ce]=pe.getVisibleCoordinates(!0).reverse(),X[ce]=pe.getShadowCasterCoordinates(),Q[ce]=pe.sortCoordinatesByDistance(N[ce])}const ae=ce=>{const pe=this.style.getLayerSourceCache(ce);return pe&&pe.used?pe.getSource():null};if(z){const ce=[];for(const pe of S)this.layerUsedInConflation(pe,ae(pe))&&ce.push(pe);if(ce&&ce.length>1){const pe=[];for(const we of ce){const Ce=this.style.getLayerSourceCache(we);Ce&&Ce.used&&Ce.getSource().usedInConflation&&pe.push({layer:we.fqid,cache:Ce})}this.replacementSource.setSources(pe),k=!0}}k||this.replacementSource.clear(),this.conflationActive=k,this.minCutoffZoom=0,this.longestCutoffRange=0;for(const ce of S){const pe=ce.cutoffRange();if(this.longestCutoffRange=Math.max(pe,this.longestCutoffRange),pe>0){const we=ae(ce);we&&(this.minCutoffZoom=Math.max(we.minzoom,this.minCutoffZoom)),ce.minzoom&&(this.minCutoffZoom=Math.max(ce.minzoom,this.minCutoffZoom))}}this.opaquePassCutoff=1/0;for(let ce=0;ce<S.length;ce++)if(S[ce].is3D()){this.opaquePassCutoff=ce;break}const se=this.style&&this.style.fog;se?(this._fogVisible=se.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=se.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding($),this.opaquePassCutoff=0);const re=this._shadowRenderer;if(re){re.updateShadowParameters(this.transform,this.style.directionalLight);for(const ce in E)for(const pe of N[ce]){let we={min:0,max:0};this.terrain&&(we=this.terrain.getMinMaxForTile(pe)||we),re.addShadowReceiver(pe.toUnwrapped(),we.min,we.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.ce(this.context));for(const ce of S){if(ce.isHidden(this.transform.zoom))continue;const pe=c.getLayerSourceCache(ce);this.uploadLayer(this,ce,pe)}if(this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new _y(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!o.cf(this.context.gl))return;this.renderPass="offscreen";for(const ce of S){const pe=c.getLayerSourceCache(ce);if(!ce.hasOffscreenPass()||ce.isHidden(this.transform.zoom))continue;const we=pe?U[pe.id]:void 0;(ce.type==="custom"||ce.type==="raster"||ce.isSky()||we&&we.length)&&this.renderLayer(this,pe,ce,we)}this.depthRangeFor3D=[0,1-(S.length+2)*this.numSublayers*this.depthEpsilon];const ne=this.terrain;ne&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&!this.transform.isOrthographic&&ne.drawDepth(),this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,X)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const de=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),ye=(()=>{if(d.showOverdrawInspector)return o.C.black;if(this.style.fog&&this.transform.projection.supportsFog&&!de){const ce=this.style.fog.properties.get("color").toArray01();return new o.C(...ce)}if(this.style.fog&&this.transform.projection.supportsFog&&de){const ce=this.style.fog.properties.get("space-color").toArray01();return new o.C(...ce)}return o.C.transparent})();if(this.context.clear({color:ye,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&de&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const ce=S[this.currentLayer],pe=c.getLayerSourceCache(ce);if(ce.isSky())continue;const we=pe?(ce.is3D()?Q:U)[pe.id]:void 0;this._renderTileClippingMasks(ce,pe,we),this.renderLayer(this,pe,ce,we)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&de&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||o.ao(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const ce=S[this.currentLayer],pe=c.getLayerSourceCache(ce);ce.isSky()&&this.renderLayer(this,pe,ce,pe?U[pe.id]:void 0)}this.renderPass="translucent",this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let xe=0;for(re&&(xe=re.getShadowCastingLayerCount());this.currentLayer<v.length;){const ce=S[this.currentLayer],pe=c.getLayerSourceCache(ce);if(ce.isSky()){++this.currentLayer;continue}if(ne&&this.style.isLayerDraped(ce)){if(ce.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=ne.renderBatch(this.currentLayer);continue}let we;if(pe&&(we=(ce.type==="symbol"?$:ce.is3D()?Q:U)[pe.id]),this._renderTileClippingMasks(ce,pe,pe?N[pe.id]:void 0),this.renderLayer(this,pe,ce,we),!ne&&re&&xe>0&&ce.hasShadowPass()&&--xe==0&&(re.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Ce=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Ce;this.currentLayer++){const Ee=S[this.currentLayer];if(!Ee.hasLightBeamPass())continue;const Le=c.getLayerSourceCache(Ee);this.renderLayer(this,Le,Ee,Le?U[Le.id]:void 0)}this.currentLayer=Ce,this.renderPass="translucent"}++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let ce=null;S.forEach(pe=>{const we=c.getLayerSourceCache(pe);we&&!pe.isHidden(this.transform.zoom)&&we.getVisibleCoordinates().length&&(!ce||ce.getSource().maxzoom<we.getSource().maxzoom)&&(ce=we)}),ce&&this.options.showTileBoundaries&&bh.debug(this,ce,ce.getVisibleCoordinates(),o.C.red,!1)}this.terrain&&this._debugParams.showTerrainProxyTiles&&bh.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new o.C(1,.8,.1,1),!0),this.options.showPadding&&function(ce){const pe=ce.transform.padding;xo(ce,ce.transform.height-(pe.top||0),3,is),xo(ce,pe.bottom||0,3,ni),Xo(ce,pe.left||0,3,vi),Xo(ce,ce.transform.width-(pe.right||0),3,Yo);const we=ce.transform.centerPoint;(function(Ce,Ee,Le,nt){ai(Ce,Ee-1,Le-10,2,20,nt),ai(Ce,Ee-10,Le-1,20,2,nt)})(ce,we.x,ce.transform.height-we.y,ul)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),k||(this.conflationActive=!1)}uploadLayer(c,d,_){this.gpuTimingStart(d),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(d.type)||c.terrain&&d.type==="custom")&&ig[`${d.type}Upload`]&&ig[`${d.type}Upload`](c,_,d.scope),this.gpuTimingEnd()}renderLayer(c,d,_,v){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||_.type==="model"||_.type==="raster"||v&&v.length)&&(this.id=_.id,this.gpuTimingStart(_),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(_.type)||c.terrain&&_.type==="custom")&&bh[_.type](c,d,_,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,_=this.context.gl;let v=this.gpuTimers[c.id];v||(v=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:_.createQuery()}),v.calls++,_.beginQuery(d.TIME_ELAPSED_EXT,v.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,d=this.context.gl,_=d.createQuery();this.deferredRenderGpuTimeQueries.push(_),d.beginQuery(c.TIME_ELAPSED_EXT,_)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const d={};for(const _ in c){const v=c[_],S=this.context.extTimerQuery,E=S.getQueryParameter(v.query,this.context.gl.QUERY_RESULT)/1e6;S.deleteQueryEXT(v.query),d[_]=E}return d}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.extTimerQuery,_=this.context.gl;let v=0;for(const S of c)v+=d.getQueryParameter(S,_.QUERY_RESULT)/1e6,d.deleteQueryEXT(S);return v}translatePosMatrix(c,d,_,v,S){if(!_[0]&&!_[1])return c;const E=S?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(E){const N=Math.sin(E),U=Math.cos(E);_=[_[0]*U-_[1]*N,_[0]*N+_[1]*U]}const z=[S?_[0]:o.ay(d,_[0],this.transform.zoom),S?_[1]:o.ay(d,_[1],this.transform.zoom),0],k=new Float32Array(16);return o.m.translate(k,c,z),k}saveTileTexture(c){const d=c.size[0],_=this._tileTextures[d];_?_.push(c):this._tileTextures[d]=[c]}getTileTexture(c){const d=this._tileTextures[c];return d&&d.length>0?d.pop():null}isPatternMissing(c,d){return c===null||c!==void 0&&!this.imageManager.getPattern(c.toString(),d)}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(c,d,_){const v=_===void 0?this.terrain&&this.terrain.renderingToTexture:_,S=this.terrain&&this.terrain.exaggeration()===0,E=[];return this.style&&this.style.enable3dLights()&&(c==="globeRaster"||c==="terrainRaster"?(E.push("LIGHTING_3D_MODE"),E.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):v||E.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||E.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?E.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):E.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(E.push("TERRAIN"),this.linearFloatFilteringSupported()&&E.push("TERRAIN_DEM_FLOAT_FORMAT"),S&&E.push("ZERO_EXAGGERATION")),this.transform.projection.name==="globe"&&E.push("GLOBE"),!this._fogVisible||v||d!==void 0&&!d||E.push("FOG","FOG_DITHERING"),v&&E.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&E.push("OVERDRAW_INSPECTOR"),E}getOrCreateProgram(c,d){this.cache=this.cache||{};const _=d&&d.defines||[],v=d&&d.config,S=this.currentGlobalDefines(c,d&&d.overrideFog,d&&d.overrideRtt).concat(_),E=Ql.cacheKey(id[c],c,S,v);return this.cache[E]||(this.cache[E]=new Ql(this.context,c,id[c],v,Sr[c],S)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.a9(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(c,d){if(this.style.enable3dLights()){const _=this.style.directionalLight,v=this.style.ambientLight;if(_&&v){const S=((E,z)=>{const k=E.properties.get("direction"),N=E.properties.get("color").toArray01(),U=E.properties.get("intensity"),$=z.properties.get("color").toArray01(),X=z.properties.get("intensity"),Q=[k.x,k.y,k.z],ae=o.bv($,X),se=o.bv(N,U);return{u_lighting_ambient_color:ae,u_lighting_directional_dir:Q,u_lighting_directional_color:se,u_ground_radiance:pd(Q,se,ae)}})(_,v);d.setLightsUniformValues(c,S)}}}uploadCommonUniforms(c,d,_,v,S){if(this.uploadCommonLightUniforms(c,d),this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const z=E.getOpacity(this.transform.pitch),k=((N,U,$,X,Q,ae,se,re,ne,de,ye,xe)=>{const ce=N.transform,pe=U.properties.get("color").toArray01();pe[3]=X;const we=N.frameCounter/1e3%1,[Ce,Ee]=U.properties.get("vertical-range");return{u_fog_matrix:$?ce.calculateFogTileMatrix($):xe||N.identityMat,u_fog_range:U.getFovAdjustedRange(ce._fov),u_fog_color:pe,u_fog_horizon_blend:U.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ce,Ee),Ee],u_fog_temporal_offset:we,u_frustum_tl:Q,u_frustum_tr:ae,u_frustum_br:se,u_frustum_bl:re,u_globe_pos:ne,u_globe_radius:de,u_viewport:ye,u_globe_transition:o.ao(ce.zoom),u_is_globe:+(ce.projection.name==="globe")}})(this,E,_,z,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.a4.devicePixelRatio,this.transform.height*o.a4.devicePixelRatio],v);d.setFogUniformValues(c,k)}S&&d.setCutoffUniformValues(c,S.uniformValues)}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,d=c.createTexture();return c.bindTexture(c.TEXTURE_2D,d),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,d=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const v of _)d[v.key]=c[v.key]||new o.bt(v,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}layerUsedInConflation(c,d){return!(!c.is3D()||c.minzoom&&c.minzoom>this.transform.zoom||c.sourceLayer!=="building"&&(!d||d.type!=="batched-model"))}isTileAffectedByFog(c){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[c.key];return d||(this._cachedTileFogOpacities[c.key]=d=this.style.fog.getOpacityForTile(c)),d[0]>=as||d[1]>=as}}const Bs={cascadeCount:2,shadowMapResolution:2048};class Sy{constructor(c,d){this.aabb=c,this.lastCascade=d}}class _h{add(c,d){const _=this.receivers[c.key];_!==void 0?(_.aabb.min[0]=Math.min(_.aabb.min[0],d.min[0]),_.aabb.min[1]=Math.min(_.aabb.min[1],d.min[1]),_.aabb.min[2]=Math.min(_.aabb.min[2],d.min[2]),_.aabb.max[0]=Math.max(_.aabb.max[0],d.max[0]),_.aabb.max[1]=Math.max(_.aabb.max[1],d.max[1]),_.aabb.max[2]=Math.max(_.aabb.max[2],d.max[2])):this.receivers[c.key]=new Sy(d,null)}clear(){this.receivers={}}get(c){return this.receivers[c.key]}computeRequiredCascades(c,d,_){const v=o.c3.fromPoints(c.points);let S=0;for(const E in this.receivers){const z=this.receivers[E];if(!z||!v.intersectsAabb(z.aabb))continue;z.aabb.min=v.closestPoint(z.aabb.min),z.aabb.max=v.closestPoint(z.aabb.max);const k=z.aabb.getCorners();for(let N=0;N<_.length;N++){let U=!0;for(const $ of k){const X=[$[0]*d,$[1]*d,$[2]];if(o.v.transformMat4(X,X,_[N].matrix),X[0]<-1||X[0]>1||X[1]<-1||X[1]>1){U=!1;break}}if(z.lastCascade=N,S=Math.max(S,N),U)break}}return S+1}}class yh{constructor(c){this.painter=c,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new _h,this._depthMode=new o.b4(c.context.gl.LEQUAL,o.b4.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this.useNormalOffset=!1,c.tp.registerParameter(Bs,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),c.tp.registerParameter(Bs,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32})}destroy(){for(const c of this._cascades)c.texture.destroy(),c.framebuffer.destroy();this._cascades=[]}updateShadowParameters(c,d){const _=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const v=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||v<=0||(this._shadowLayerCount=_.style.order.reduce((ae,se)=>{const re=_.style._mergedLayers[se];return ae+(re.hasShadowPass()&&!re.isHidden(c.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this._enabled))return;const S=_.context,E=Bs.shadowMapResolution,z=Bs.shadowMapResolution;if(this._cascades.length===0||Bs.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let ae=0;ae<Bs.cascadeCount;++ae){const se=_._shadowMapDebug,re=S.gl,ne=S.createFramebuffer(E,z,se,"texture"),de=new o.a9(S,{width:E,height:z,data:null},re.DEPTH_COMPONENT);if(ne.depthAttachment.set(de.texture),se){const ye=new o.a9(S,{width:E,height:z,data:null},re.RGBA);ne.colorAttachment.set(ye.texture)}this._cascades.push({framebuffer:ne,texture:de,matrix:[],far:0,boundingSphereRadius:0,frustum:new o.F,scale:0})}}this.shadowDirection=vh(d);let k=0;if(c.elevation){const ae=c.elevation,se=[1e4,-1e4];ae.visibleDemTiles.filter(re=>re.dem).forEach(re=>{const ne=re.dem.tree;se[0]=Math.min(se[0],ne.minimums[0]),se[1]=Math.max(se[1],ne.maximums[0])}),se[0]!==1e4&&(k=(se[1]-se[0])*ae.exaggeration())}const N=1.5*c.cameraToCenterDistance,U=3*N,$=new Float64Array(16);for(let ae=0;ae<this._cascades.length;++ae){const se=this._cascades[ae];let re=c.height/50,ne=1;Bs.cascadeCount===1?ne=U:ae===0?ne=N:(re=N,ne=U);const[de,ye]=og(c,this.shadowDirection,re,ne,Bs.shadowMapResolution,k);se.scale=c.scale,se.matrix=de,se.boundingSphereRadius=ye,o.m.invert($,se.matrix),se.frustum=o.F.fromInvProjectionMatrix($,1,0,!0),se.far=ne}const X=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[X].far,this._cascades[X].far],this._uniformValues.u_shadow_intensity=v,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Bs.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Bs.shadowMapResolution,this._uniformValues.u_shadowmap_0=Dn.ShadowMap0,this._uniformValues.u_shadowmap_1=Dn.ShadowMap0+1,this._groundShadowTiles=_.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Q=_.transform.elevation;for(const ae of this._groundShadowTiles){let se={min:0,max:0};if(Q){const re=Q.getMinMaxForTile(ae);re&&(se=re)}this.addShadowReceiver(ae.toUnwrapped(),se.min,se.max)}}get enabled(){return this._enabled}set enabled(c){this._enabled=c}drawShadowPass(c,d){if(!this._enabled)return;const _=this.painter,v=_.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(_.transform.getFrustum(0),_.transform.worldSize,this._cascades),v.viewport.set([0,0,Bs.shadowMapResolution,Bs.shadowMapResolution]);for(let S=0;S<this._numCascadesToRender;++S){_.currentShadowCascade=S,v.bindFramebuffer.set(this._cascades[S].framebuffer.framebuffer),v.clear({color:o.C.white,depth:1});for(const E of c.order){const z=c._mergedLayers[E];if(!z.hasShadowPass()||z.isHidden(_.transform.zoom))continue;const k=c.getLayerSourceCache(z),N=k?d[k.id]:void 0;(z.type==="model"||N&&N.length)&&_.renderLayer(_,k,z,N)}}_.currentShadowCascade=0}drawGroundShadows(){if(!this._enabled)return;const c=this.painter,d=c.style,_=c.context,v=d.directionalLight,S=d.ambientLight;if(!v||!S)return;const E=[],z=$o(c,c.longestCutoffRange);z.shouldRenderCutoff&&E.push("RENDER_CUTOFF");const k=Cp(v,S),N=new o.b4(_.gl.LEQUAL,o.b4.ReadOnly,c.depthRangeFor3D);for(const U of this._groundShadowTiles){const $=U.toUnwrapped(),X=c.isTileAffectedByFog(U),Q=c.getOrCreateProgram("groundShadow",{defines:E,overrideFog:X});this.setupShadows($,Q),c.uploadCommonUniforms(_,Q,$,null,z);const ae={u_matrix:c.transform.calculateProjMatrix($),u_ground_shadow_factor:k};Q.draw(c,_.gl.TRIANGLES,N,o.b6.disabled,o.a.multiply,o.b5.disabled,ae,"ground_shadow",c.tileExtentBuffer,c.quadTriangleIndexBuffer,c.tileExtentSegments,{},c.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?o.a.unblended:o.a.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(c){const d=this.painter.transform,_=d.calculatePosMatrix(c,d.worldSize);return o.m.multiply(_,this._cascades[this.painter.currentShadowCascade].matrix,_),Float32Array.from(_)}calculateShadowPassMatrixFromMatrix(c){return o.m.multiply(c,this._cascades[this.painter.currentShadowCascade].matrix,c),Float32Array.from(c)}setupShadows(c,d,_,v=0){if(!this._enabled)return;const S=this.painter.transform,E=this.painter.context,z=E.gl,k=this._uniformValues,N=new Float64Array(16),U=S.calculatePosMatrix(c,S.worldSize);for(let $=0;$<this._cascades.length;$++)o.m.multiply(N,this._cascades[$].matrix,U),k[$===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(N),E.activeTexture.set(z.TEXTURE0+Dn.ShadowMap0+$),this._cascades[$].texture.bind(z.NEAREST,z.CLAMP_TO_EDGE);if(this.useNormalOffset=!!_,this.useNormalOffset){const $=o.cg(c.canonical),X=2/S.tileSize*o.J/Bs.shadowMapResolution,Q=X*this._cascades[0].boundingSphereRadius,ae=X*this._cascades[this._cascades.length-1].boundingSphereRadius,se=(_==="vector-tile"?1:3)/Math.pow(2,v-c.canonical.z-(1-S.zoom+Math.floor(S.zoom)));k.u_shadow_normal_offset=[$,Q*se,ae*se],k.u_shadow_bias=[6e-5,.0012,.012]}else k.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(E,k)}setupShadowsFromMatrix(c,d,_=!1){if(!this._enabled)return;const v=this.painter.context,S=v.gl,E=this._uniformValues,z=new Float64Array(16);for(let k=0;k<Bs.cascadeCount;k++)o.m.multiply(z,this._cascades[k].matrix,c),E[k===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(z),v.activeTexture.set(S.TEXTURE0+Dn.ShadowMap0+k),this._cascades[k].texture.bind(S.NEAREST,S.CLAMP_TO_EDGE);this.useNormalOffset=_,_?(E.u_shadow_normal_offset=[1,5,5],E.u_shadow_bias=[6e-5,.0012,.012]):E.u_shadow_bias=[36e-5,.0012,.012],d.setShadowUniformValues(v,E)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(c,d,_,v){if(v[2]>=0)return{};const S=function(k,N,U){const $=U/(1<<k.canonical.z);return new o.c3([k.canonical.x*$+k.wrap*U,k.canonical.y*$+k.wrap*U,0],[(k.canonical.x+1)*$+k.wrap*U,(k.canonical.y+1)*$+k.wrap*U,N])}(c,d,_).getCorners(),E=d/-v[2];v[0]<0?(o.v.add(S[0],S[0],[v[0]*E,0,0]),o.v.add(S[3],S[3],[v[0]*E,0,0])):v[0]>0&&(o.v.add(S[1],S[1],[v[0]*E,0,0]),o.v.add(S[2],S[2],[v[0]*E,0,0])),v[1]<0?(o.v.add(S[0],S[0],[0,v[1]*E,0]),o.v.add(S[1],S[1],[0,v[1]*E,0])):v[1]>0&&(o.v.add(S[2],S[2],[0,v[1]*E,0]),o.v.add(S[3],S[3],[0,v[1]*E,0]));const z={};return z.vertices=S,z.planes=[xd(S[1],S[0],S[4]),xd(S[2],S[1],S[5]),xd(S[3],S[2],S[6]),xd(S[0],S[3],S[7])],z}addShadowReceiver(c,d,_){this._receivers.add(c,o.c3.fromTileIdAndHeight(c,d,_))}getMaxCascadeForTile(c){const d=this._receivers.get(c);return d&&d.lastCascade?d.lastCascade:0}}function xd(m,c,d){const _=o.v.sub([],d,c),v=o.v.sub([],m,c),S=o.v.cross([],_,v),E=o.v.length(S);return E===0?[0,0,1,0]:(o.v.scale(S,S,1/E),[S[0],S[1],S[2],-o.v.dot(S,c)])}function vh(m){const c=m.properties.get("direction"),d=o.b3(c.x,c.y,c.z);d[2]=o.c(d[2],0,75);const _=o.ch([d[0],d[1],d[2]]);return o.v.fromValues(_.x,_.y,_.z)}function Cp(m,c){const d=m.properties.get("color"),_=m.properties.get("intensity"),v=m.properties.get("direction"),S=[v.x,v.y,v.z],E=c.properties.get("color"),z=c.properties.get("intensity"),k=Math.max(o.v.dot([0,0,1],S),0),N=[0,0,0];o.v.scale(N,E.toArray01Linear().slice(0,3),z);const U=[0,0,0];return o.v.scale(U,d.toArray01Linear().slice(0,3),k*_),o.bw([N[0]>0?N[0]/(N[0]+U[0]):0,N[1]>0?N[1]/(N[1]+U[1]):0,N[2]>0?N[2]/(N[2]+U[2]):0])}function og(m,c,d,_,v,S){const E=m.zoom,z=m.scale,k=m.worldSize,N=1/k,U=m.aspect,$=Math.sqrt(1+U*U)*Math.tan(.5*m.fovX),X=$*$,Q=_-d,ae=_+d;let se,re;X>Q/ae?(se=_,re=_*$):(se=.5*ae*(1+X),re=.5*Math.sqrt(Q*Q+2*(_*_+d*d)*X+ae*ae*X*X));const ne=m.projection.pixelsPerMeter(m.center.lat,k),de=m._camera.getCameraToWorldMercator(),ye=[0,0,-se*N];o.v.transformMat4(ye,ye,de);let xe=re*N;const ce=m._edgeInsets;if(!(ce.left===0&&ce.top===0&&ce.right===0&&ce.bottom===0||ce.left===ce.right&&ce.top===ce.bottom)){const ct=m._camera.getWorldToCamera(m.worldSize,m.projection.zAxisUnit==="meters"?ne:1),Wt=m._camera.getCameraToClipPerspective(m._fov,m.width/m.height,d,_);Wt[8]=2*-m.centerOffset.x/m.width,Wt[9]=2*m.centerOffset.y/m.height;const jt=new Float64Array(16);o.m.mul(jt,Wt,ct);const rn=new Float64Array(16);o.m.invert(rn,jt);const Vt=o.F.fromInvProjectionMatrix(rn,k,E,!0);for(const pn of Vt.points){const fn=((pe=pn)[0]/=z,pe[1]/=z,pe[2]=o.b(pe[2],m._center.lat),pe);xe=Math.max(xe,o.v.len(o.v.subtract([],ye,fn)))}}var pe;xe*=v/(v-1);const we=Math.acos(c[2]),Ce=Math.atan2(-c[0],-c[1]),Ee=new Xr;Ee.position=ye,Ee.setPitchBearing(we,Ce);const Le=Ee.getWorldToCamera(k,ne),nt=xe*k,$e=Math.min(m._mercatorZfromZoom(17)*k*-2,-2*nt),Je=Ee.getCameraToClipOrthographic(-nt,nt,-nt,nt,$e,(nt+S*ne)/c[2]),Oe=new Float64Array(16);o.m.multiply(Oe,Je,Le);const tt=o.v.fromValues(Math.floor(1e6*ye[0])/1e6*k,Math.floor(1e6*ye[1])/1e6*k,0),Ze=.5*v,st=[0,0,0];o.v.transformMat4(st,tt,Oe),o.v.scale(st,st,Ze);const be=[Math.floor(st[0]),Math.floor(st[1]),Math.floor(st[2])],Fe=[0,0,0];o.v.sub(Fe,st,be),o.v.scale(Fe,Fe,-1/Ze);const mt=new Float64Array(16);return o.m.identity(mt),o.m.translate(mt,mt,Fe),o.m.multiply(Oe,mt,Oe),[Oe,nt]}class cg extends o.a6{constructor(c){super(),this.requestManager=c,this.models={"":{}},this.numModelsLoading={}}loadModel(c,d){return o.aO(this.requestManager.transformRequest(d,o.a2.Model).url).then(_=>{if(!_)return;const v=o.aP(_),S=new o.aQ(c,void 0,void 0,v);return S.computeBoundsAndApplyParent(),S}).catch(_=>{this.fire(new o.a7(new Error(`Could not load model ${c} from ${d}: ${_.message}`)))})}load(c,d){this.models[d]||(this.models[d]={});const _=Object.keys(c);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+_.length;const v=[];for(const S of _)v.push(this.loadModel(S,c[S]));Promise.allSettled(v).then(S=>{for(let E=0;E<S.length;E++){const{status:z,value:k}=S[E];z==="fulfilled"&&k&&(this.models[d][_[E]]=k)}this.numModelsLoading[d]-=_.length,this.fire(new o.a8("data",{dataType:"style"}))}).catch(S=>{this.fire(new o.a7(new Error(`Could not load models: ${S.message}`)))})}isLoaded(){for(const c in this.numModelsLoading)if(this.numModelsLoading[c]>0)return!1;return!0}hasModel(c,d){return!!this.getModel(c,d)}getModel(c,d){return this.models[d]||(this.models[d]={}),this.models[d][c]}addModel(c,d,_){this.models[_]||(this.models[_]={}),this.hasModel(c,_)&&this.removeModel(c,_),this.load({[c]:this.requestManager.normalizeModelURL(d)},_)}addModels(c,d){const _={};for(const v in c)_[v]=this.requestManager.normalizeModelURL(c[v]);this.load(_,d)}removeModel(c,d){this.models[d]||(this.models[d]={});const _=this.models[d][c];delete this.models[d][c],_.destroy()}listModels(c){return this.models[c]||(this.models[c]={}),Object.keys(this.models[c])}upload(c,d){this.models[d]||(this.models[d]={});for(const _ in this.models[d])this.models[d][_].upload(c.context)}}const fl=(m,c)=>o.ai(m,c&&c.filter(d=>d.identifier!=="source.canvas")),lg=o.p(ot,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","setImportUrl","setImportData","setImportConfig"]),ug=o.p(ot,["setCenter","setZoom","setBearing","setPitch"]),xh={version:8,layers:[],sources:{}},Ec={duration:300,delay:0},wd=new Set(["fill","line","background","hillshade","raster"]);class wi extends o.a6{constructor(c,d={}){super(),this.map=c,this.scope=d.scope||"",this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=o.ak({},Ec),this._buildingIndex=new td(this),this.crossTileSymbolIndex=new dh,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new ge,this.dispatcher=d.dispatcher?d.dispatcher:new o.br(o.bs(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new ka,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new o.cj(c._requestManager,d.localFontFamily?o.ck.all:d.localIdeographFontFamily?o.ck.ideographs:o.ck.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new cg(c._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this.dispatcher.broadcast("setReferrer",o.cl());const _=this;this._rtlTextPluginCallback=wi.registerForPluginStateChange(v=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(S,E)=>{if(o.cm(S),E&&E.every(z=>z))for(const z in _._sourceCaches){const k=_._sourceCaches[z],N=k.getSource().type;N!=="vector"&&N!=="geojson"||k.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const S=this.getOwnSource(v.sourceId);if(S&&S.vectorLayerIds)for(const E in this._layers){const z=this._layers[E];z.source===S.id&&this._validateLayer(z)}})}loadURL(c,d={}){this.fire(new o.a8("dataloading",{dataType:"style"}));const _=typeof d.validate=="boolean"?d.validate:!o.cn(c);c=this.map._requestManager.normalizeStyleURL(c,d.accessToken),this.resolvedImports.add(c);const v=this.importsCache.get(c);if(v)return this._load(v,_);const S=this.map._requestManager.transformRequest(c,o.a2.Style);this._request=o.a1(S,(E,z)=>{if(this._request=null,E)this.fire(new o.a7(E));else if(z)return this.importsCache.set(c,z),this._load(z,_)})}loadJSON(c,d={}){this.fire(new o.a8("dataloading",{dataType:"style"})),this._request=o.a4.frame(()=>{this._request=null,this._load(c,d.validate!==!1)})}loadEmpty(){this.fire(new o.a8("dataloading",{dataType:"style"})),this._load(xh,!1)}_loadImports(c,d){if(this.importDepth>=4)return o.X("Style doesn't support nesting deeper than 5"),Promise.resolve();const _=[];for(const v of c){const S=this._createFragmentStyle(v),E=new Promise(k=>{S.once("style.import.load",k),S.once("error",k)}).then(()=>this.mergeAll());if(_.push(E),this.resolvedImports.has(v.url)){S.loadEmpty();continue}const z=v.data||this.importsCache.get(v.url);z?S.loadJSON(z,{validate:d}):v.url?S.loadURL(v.url,{validate:d}):S.loadEmpty(),this.fragments.push({style:S,id:v.id,config:v.config})}return Promise.allSettled(_)}_createFragmentStyle(c){const d=this.scope?o.aE(c.id,this.scope):c.id,_=new wi(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:c.config,configOptions:this.options,configDependentLayers:this._configDependentLayers});return _.setEventedParent(this.map,{style:_}),_}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options});const c=this.isRootStyle();this._shouldPrecompile=c,this.fire(new o.a8(c?"style.load":"style.import.load"))}_load(c,d){const _=c.schema;if(this.isRootStyle()&&(c.fragment||_&&c.fragment!==!1)){const E=o.ak({},xh,{imports:[{id:"basemap",data:c,url:""}]});return void this._load(E,d)}if(this.setConfig(this._config,_),d&&fl(this,o.aj(c)))return;this._loaded=!0,this.stylesheet=o.co(c);for(const E in c.sources)this.addSource(E,c.sources[E],{validate:!1,isInitialLoad:!0});c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(c.glyphs,this.scope);const v=Uo(this.stylesheet.layers);if(this._order=v.map(E=>E.id),this.stylesheet.light&&o.X("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const E=this.stylesheet.lights[0];this.light=new Lr(E.properties,E.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Lr(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const E of v){const z=o.cp(E,this.scope,this.options);z.isConfigDependent&&this._configDependentLayers.add(z.fqid),z.setEventedParent(this,{layer:{id:z.id}}),this._layers[z.id]=z,this._serializedLayers[z.id]=z.serialize();const k=this.getOwnLayerSourceCache(z),N=!!this.directionalLight&&this.directionalLight.shadowsEnabled();k&&z.canCastShadows()&&N&&(k.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const S=this.stylesheet.terrain;S&&(this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=o.a4.hasCanvasFingerprintNoise()),this.disableElevatedTerrain?o.X("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."):this.terrainSetForDrapingOnly()||this._createTerrain(S,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new o.a8("data",{dataType:"style"})),c.imports?this._loadImports(c.imports,d).then(()=>this._reloadImports()):this._reloadImports()}isRootStyle(){return this.importDepth===0}mergeAll(){let c,d,_,v,S,E,z,k;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(N=>{if(N.stylesheet){if(N.light!=null&&(c=N.light),N.stylesheet.lights)for(const U of N.stylesheet.lights)U.type==="ambient"&&N.ambientLight!=null&&(d=N.ambientLight),U.type==="directional"&&N.directionalLight!=null&&(_=N.directionalLight);v=this._prioritizeTerrain(v,N.terrain,N.stylesheet.terrain),N.stylesheet.fog&&N.fog!=null&&(S=N.fog),N.stylesheet.camera!=null&&(k=N.stylesheet.camera),N.stylesheet.projection!=null&&(E=N.stylesheet.projection),N.stylesheet.transition!=null&&(z=N.stylesheet.transition)}}),this.light=c,this.ambientLight=d,this.directionalLight=_,this.fog=S,v===null?delete this.terrain:this.terrain=v,this.camera=k||{"camera-projection":"perspective"},this.projection=E||{name:"mercator"},this.transition=o.ak({},Ec,z),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(c){const d=_=>{for(const v of _.fragments)d(v.style);c(_)};d(this)}_prioritizeTerrain(c,d,_){const v=c&&c.drapeRenderMode===0;return _===null?d&&d.drapeRenderMode===0?d:v?c:null:d!=null&&(!c||v||d&&d.drapeRenderMode===1)?d:c}mergeTerrain(){let c;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{c=this._prioritizeTerrain(c,d.terrain,d.stylesheet.terrain)}),c===null?delete this.terrain:this.terrain=c}mergeProjection(){let c;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(c=d.stylesheet.projection)}),this.projection=c||{name:"mercator"}}mergeSources(){const c={},d={},_={};this.forEachFragmentStyle(v=>{for(const S in v._sourceCaches){const E=o.aE(S,v.scope);c[E]=v._sourceCaches[S]}for(const S in v._otherSourceCaches){const E=o.aE(S,v.scope);d[E]=v._otherSourceCaches[S]}for(const S in v._symbolSourceCaches){const E=o.aE(S,v.scope);_[E]=v._symbolSourceCaches[S]}}),this._mergedSourceCaches=c,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=_}mergeLayers(){const c={},d=[],_={};this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(S=>{for(const E of S._order){const z=S._layers[E];if(z.type==="slot"){const k=o.cq(E);if(c[k])continue;c[k]=[]}z.slot&&c[z.slot]?c[z.slot].push(z):d.push(z)}}),this._mergedOrder=[];const v=(S=[])=>{for(const E of S)if(E.type==="slot"){const z=o.cq(E.id);c[z]&&v(c[z])}else{const z=o.aE(E.id,E.scope);this._mergedOrder.push(z),_[z]=E,E.is3D()&&(this._has3DLayers=!0),E.type==="circle"&&(this._hasCircleLayers=!0),E.type==="symbol"&&(this._hasSymbolLayers=!0)}};v(d),this._mergedLayers=_,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(c){return this.stylesheet.camera=o.ak({},this.stylesheet.camera,c),this.camera=this.stylesheet.camera,this}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(c){this._spriteRequest=function(d,_,v){let S,E,z;const k=o.a4.devicePixelRatio>1?"@2x":"";let N=o.a1(_.transformRequest(_.normalizeSpriteURL(d,k,".json"),o.a2.SpriteJSON),(X,Q)=>{N=null,z||(z=X,S=Q,$())}),U=o.a3(_.transformRequest(_.normalizeSpriteURL(d,k,".png"),o.a2.SpriteImage),(X,Q)=>{U=null,z||(z=X,E=Q,$())});function $(){if(z)v(z);else if(S&&E){const X=o.a4.getImageData(E),Q={};for(const ae in S){const{width:se,height:re,x:ne,y:de,sdf:ye,pixelRatio:xe,stretchX:ce,stretchY:pe,content:we}=S[ae],Ce=new o.a5({width:se,height:re});o.a5.copy(X,Ce,{x:ne,y:de},{x:0,y:0},{width:se,height:re}),Q[ae]={data:Ce,pixelRatio:xe,sdf:ye,stretchX:ce,stretchY:pe,content:we}}v(null,Q)}}return{cancel(){N&&(N.cancel(),N=null),U&&(U.cancel(),U=null)}}}(c,this.map._requestManager,(d,_)=>{if(this._spriteRequest=null,d)this.fire(new o.a7(d));else if(_)for(const v in _)this.imageManager.addImage(v,this.scope,_[v]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new o.a8("data",{dataType:"style"}))})}_validateLayer(c){const d=this.getOwnSource(c.source);if(!d)return;const _=c.sourceLayer;_&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.a7(new Error(`Source layer "${_}" does not exist on source "${d.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded())return!1;for(const{style:c}of this.fragments)if(!c.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((c,d)=>{const _=this.fragments[d];return _&&_.style&&(c.data=_.style.serialize()),c})}_serializeSources(){const c={};for(const d in this._sourceCaches){const _=this._sourceCaches[d].getSource();c[_.id]||(c[_.id]=_.serialize())}return c}_serializeLayers(c){const d=[];for(const _ of c){const v=this._layers[_];v&&v.type!=="custom"&&d.push(v.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(c){return!!this.terrain&&(typeof c.isLayerDraped=="function"?c.isLayerDraped(this.getLayerSourceCache(c)):wd.has(c.type))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(c){const d=this.getOwnLayer(c);if(d)return d;this.fire(new o.a7(new Error(`The layer '${c}' does not exist in the map's style.`)))}_checkSource(c){const d=this.getOwnSource(c);if(d)return d;this.fire(new o.a7(new Error(`The source '${c}' does not exist in the map's style.`)))}update(c){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(c),this.directionalLight&&this.directionalLight.recalculate(c);const d=this.calculateLightsBrightness();c.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const _=this._changes.isDirty();if(this._changes.isDirty()){const S=this._changes.getLayerUpdatesByScope();for(const E in S){const{updatedIds:z,removedIds:k}=S[E];(z||k)&&this._updateWorkerLayers(E,z,k)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(c),this.light&&this.light.updateTransitions(c),this.ambientLight&&this.ambientLight.updateTransitions(c),this.directionalLight&&this.directionalLight.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._changes.reset()}const v={};for(const S in this._mergedSourceCaches){const E=this._mergedSourceCaches[S];v[S]=E.used,E.used=!1}for(const S of this._mergedOrder){const E=this._mergedLayers[S];if(E.recalculate(c,this._availableImages),!E.isHidden(c.zoom)){const z=this.getLayerSourceCache(E);z&&(z.used=!0)}if(!this._precompileDone&&this._shouldPrecompile)for(let z=E.minzoom||0;z<(E.maxzoom||25.5);z++){const k=this.map.painter;if(k){const N=E.getProgramIds();if(!N)continue;for(const U of N){const $=E.getDefaultProgramParams(U,c.zoom);$&&(k.style=this,this.fog&&(k._fogVisible=!0,$.overrideFog=!0,k.getOrCreateProgram(U,$)),k._fogVisible=!1,$.overrideFog=!1,k.getOrCreateProgram(U,$),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&($.overrideRtt=!0,k.getOrCreateProgram(U,$)))}}}}this._shouldPrecompile&&(this._precompileDone=!0);for(const S in v){const E=this._mergedSourceCaches[S];v[S]!==E.used&&E.getSource().fire(new o.a8("data",{sourceDataType:"visibility",dataType:"source",sourceId:E.getSource().id}))}this.light&&this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),_&&this.fire(new o.a8("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=this._changes.getUpdatedImages();if(c.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],c);this._changes.resetUpdatedImages()}}_updateWorkerLayers(c,d,_){const v=this.getFragmentStyle(c);v&&this.dispatcher.broadcast("updateLayers",{layers:d?v._serializeLayers(d):[],scope:c,removedIds:_||[],options:v.options})}setState(c){if(this._checkLoaded(),fl(this,o.aj(c)))return!1;(c=o.co(c)).layers=Uo(c.layers);const d=function(v,S){if(!v)return[{command:ot.setStyle,args:[S]}];let E=[];try{if(!M(v.version,S.version))return[{command:ot.setStyle,args:[S]}];M(v.center,S.center)||E.push({command:ot.setCenter,args:[S.center]}),M(v.zoom,S.zoom)||E.push({command:ot.setZoom,args:[S.zoom]}),M(v.bearing,S.bearing)||E.push({command:ot.setBearing,args:[S.bearing]}),M(v.pitch,S.pitch)||E.push({command:ot.setPitch,args:[S.pitch]}),M(v.sprite,S.sprite)||E.push({command:ot.setSprite,args:[S.sprite]}),M(v.glyphs,S.glyphs)||E.push({command:ot.setGlyphs,args:[S.glyphs]}),M(v.imports,S.imports)||function($=[],X=[],Q){X=X||[];const ae=($=$||[]).map(Be),se=X.map(Be),re=$.reduce(qe,{}),ne=X.reduce(qe,{}),de=ae.slice();let ye,xe,ce,pe;for(ye=0,xe=0;ye<ae.length;ye++)ce=ae[ye],ne.hasOwnProperty(ce)?xe++:(Q.push({command:ot.removeImport,args:[ce]}),de.splice(de.indexOf(ce,xe),1));for(ye=0,xe=0;ye<se.length;ye++)ce=se[se.length-1-ye],de[de.length-1-ye]!==ce&&(re.hasOwnProperty(ce)?(Q.push({command:ot.removeImport,args:[ce]}),de.splice(de.lastIndexOf(ce,de.length-xe),1)):xe++,pe=de[de.length-ye],Q.push({command:ot.addImport,args:[ne[ce],pe]}),de.splice(de.length-ye,0,ce));for(const we of X){const Ce=re[we.id];if(!Ce||M(Ce,we))continue;M(Ce.config,we.config)||Q.push({command:ot.setImportConfig,args:[we.id,we.config]}),M(Ce.url,we.url)||Q.push({command:ot.setImportUrl,args:[we.id,we.url]});const Ee=we.data;M(Ce&&Ce.data,Ee)||Q.push({command:ot.setImportData,args:[we.id,Ee]})}}(v.imports,S.imports,E),M(v.transition,S.transition)||E.push({command:ot.setTransition,args:[S.transition]}),M(v.light,S.light)||E.push({command:ot.setLight,args:[S.light]}),M(v.fog,S.fog)||E.push({command:ot.setFog,args:[S.fog]}),M(v.projection,S.projection)||E.push({command:ot.setProjection,args:[S.projection]}),M(v.lights,S.lights)||E.push({command:ot.setLights,args:[S.lights]}),M(v.camera,S.camera)||E.push({command:ot.setCamera,args:[S.camera]});const z={},k=[];(function($,X,Q,ae){let se;for(se in X=X||{},$=$||{})$.hasOwnProperty(se)&&(X.hasOwnProperty(se)||G(se,Q,ae));for(se in X){if(!X.hasOwnProperty(se))continue;const re=X[se];$.hasOwnProperty(se)?M($[se],re)||($[se].type==="geojson"&&re.type==="geojson"&&Pe($,X,se)?Q.push({command:ot.setGeoJSONSourceData,args:[se,re.data]}):ue(se,X,Q,ae)):C(se,X,Q)}})(v.sources,S.sources,k,z);const N=[];v.layers&&v.layers.forEach($=>{$.source&&z[$.source]?E.push({command:ot.removeLayer,args:[$.id]}):N.push($)});let U=v.terrain;U&&z[U.source]&&(E.push({command:ot.setTerrain,args:[void 0]}),U=void 0),E=E.concat(k),M(U,S.terrain)||E.push({command:ot.setTerrain,args:[S.terrain]}),function($,X,Q){X=X||[];const ae=($=$||[]).map(Be),se=X.map(Be),re=$.reduce(qe,{}),ne=X.reduce(qe,{}),de=ae.slice(),ye=Object.create(null);let xe,ce,pe,we,Ce,Ee,Le;for(xe=0,ce=0;xe<ae.length;xe++)pe=ae[xe],ne.hasOwnProperty(pe)?ce++:(Q.push({command:ot.removeLayer,args:[pe]}),de.splice(de.indexOf(pe,ce),1));for(xe=0,ce=0;xe<se.length;xe++)pe=se[se.length-1-xe],de[de.length-1-xe]!==pe&&(re.hasOwnProperty(pe)?(Q.push({command:ot.removeLayer,args:[pe]}),de.splice(de.lastIndexOf(pe,de.length-ce),1)):ce++,Ee=de[de.length-xe],Q.push({command:ot.addLayer,args:[ne[pe],Ee]}),de.splice(de.length-xe,0,pe),ye[pe]=!0);for(xe=0;xe<se.length;xe++)if(pe=se[xe],we=re[pe],Ce=ne[pe],!ye[pe]&&!M(we,Ce))if(M(we.source,Ce.source)&&M(we["source-layer"],Ce["source-layer"])&&M(we.type,Ce.type)){for(Le in Ae(we.layout,Ce.layout,Q,pe,null,ot.setLayoutProperty),Ae(we.paint,Ce.paint,Q,pe,null,ot.setPaintProperty),M(we.slot,Ce.slot)||Q.push({command:ot.setSlot,args:[pe,Ce.slot]}),M(we.filter,Ce.filter)||Q.push({command:ot.setFilter,args:[pe,Ce.filter]}),M(we.minzoom,Ce.minzoom)&&M(we.maxzoom,Ce.maxzoom)||Q.push({command:ot.setLayerZoomRange,args:[pe,Ce.minzoom,Ce.maxzoom]}),we)we.hasOwnProperty(Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&Le!=="slot"&&(Le.indexOf("paint.")===0?Ae(we[Le],Ce[Le],Q,pe,Le.slice(6),ot.setPaintProperty):M(we[Le],Ce[Le])||Q.push({command:ot.setLayerProperty,args:[pe,Le,Ce[Le]]}));for(Le in Ce)Ce.hasOwnProperty(Le)&&!we.hasOwnProperty(Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&Le!=="slot"&&(Le.indexOf("paint.")===0?Ae(we[Le],Ce[Le],Q,pe,Le.slice(6),ot.setPaintProperty):M(we[Le],Ce[Le])||Q.push({command:ot.setLayerProperty,args:[pe,Le,Ce[Le]]}))}else Q.push({command:ot.removeLayer,args:[pe]}),Ee=de[de.lastIndexOf(pe)+1],Q.push({command:ot.addLayer,args:[Ce,Ee]})}(N,S.layers,E)}catch(z){console.warn("Unable to compute style diff:",z),E=[{command:ot.setStyle,args:[S]}]}return E}(this.serialize(),c).filter(v=>!(v.command in ug));if(d.length===0)return!1;const _=d.filter(v=>!(v.command in lg));if(_.length>0)throw new Error(`Unimplemented: ${_.map(v=>v.command).join(", ")}.`);return d.forEach(v=>{this[v.command].apply(this,v.args)}),this.stylesheet=c,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(c,d){return this.getImage(c)?this.fire(new o.a7(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,this.scope,d),this._afterImageUpdated(c),this)}updateImage(c,d){this.imageManager.updateImage(c,this.scope,d)}getImage(c){return this.imageManager.getImage(c,this.scope)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c,this.scope),this._afterImageUpdated(c),this):this.fire(new o.a7(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(c),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new o.a8("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(c,d,_={}){return this._checkLoaded(),this._validate(o.cr,`models.${c}`,d,null,_)||(this.modelManager.addModel(c,d,this.scope),this._changes.setDirty()),this}hasModel(c){return this.modelManager.hasModel(c,this.scope)}removeModel(c){return this.hasModel(c)?(this.modelManager.removeModel(c,this.scope),this):this.fire(new o.a7(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(c,d,_={}){if(this._checkLoaded(),this.getOwnSource(c)!==void 0)throw new Error(`There is already a source with ID "${c}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.cs,`sources.${c}`,d,null,_))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const v=Ys(c,d,this.dispatcher,this);v.scope=this.scope,v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(v.id),source:v.serialize(),sourceId:v.id}));const S=E=>{const z=(E?"symbol:":"other:")+v.id,k=o.aE(z,this.scope),N=this._sourceCaches[z]=new o.bq(k,v,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[v.id]=N,N.onAdd(this.map)};S(!1),d.type!=="vector"&&d.type!=="geojson"||S(!0),v.onAdd&&v.onAdd(this.map),_.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(c){this._checkLoaded();const d=this.getOwnSource(c);if(!d)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===c)return this.fire(new o.a7(new Error(`Source "${c}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===c)return this.fire(new o.a7(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const _=this.getOwnSourceCaches(c);for(const v of _){const S=o.cq(v.id);delete this._sourceCaches[S],this._changes.discardSourceCacheUpdate(v.id),v.fire(new o.a8("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles()}return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(c,d){this._checkLoaded(),this.getOwnSource(c).setData(d),this._changes.setDirty()}getOwnSource(c){const d=this.getOwnSourceCache(c);return d&&d.getSource()}getOwnSources(){const c=[];for(const d in this._otherSourceCaches){const _=this.getOwnSourceCache(d);_&&c.push(_.getSource())}return c}areTilesLoaded(){const c=this._mergedSourceCaches;for(const d in c){const _=c[d]._tiles;for(const v in _){const S=_[v];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}setLights(c){if(this._checkLoaded(),!c)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const v of c){if(this._validate(o.ct,"lights",v))return;switch(v.type){case"ambient":if(this.ambientLight){const S=this.ambientLight;S.set(v),S.updateTransitions(d)}else this.ambientLight=new jo(v,Xa,this.scope,this.options);break;case"directional":if(this.directionalLight){const S=this.directionalLight;S.set(v),S.updateTransitions(d)}else this.directionalLight=new jo(v,ed,this.scope,this.options)}}const _=new o.al(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(_),this.directionalLight&&this.directionalLight.recalculate(_),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const c=this.directionalLight,d=this.ambientLight;if(!c||!d)return;const _=$=>.2126*($[0]<=.03928?$[0]/12.92:Math.pow(($[0]+.055)/1.055,2.4))+.7152*($[1]<=.03928?$[1]/12.92:Math.pow(($[1]+.055)/1.055,2.4))+.0722*($[2]<=.03928?$[2]/12.92:Math.pow(($[2]+.055)/1.055,2.4)),v=c.properties.get("color").toArray01(),S=c.properties.get("intensity"),E=c.properties.get("direction"),z=1-o.b3(E.x,E.y,E.z)[2]/90,k=_(v)*S*z,N=d.properties.get("color").toArray01(),U=d.properties.get("intensity");return(k+_(N)*U)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const c=[];return this.directionalLight&&c.push(this.directionalLight.get()),this.ambientLight&&c.push(this.ambientLight.get()),c}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(c){if(!c)return this;if(o.cu(c)){const d=o.cv(c),_=this.fragments.find(({id:S})=>S===d);if(!_)throw new Error(`Style import not found: ${c}`);const v=o.cq(c);return _.style.getFragmentStyle(v)}{const d=this.fragments.find(({id:_})=>_===c);if(!d)throw new Error(`Style import not found: ${c}`);return d.style}}getConfigProperty(c,d){const _=this.getFragmentStyle(c);if(!_)return null;const v=o.aE(d,_.scope),S=_.options.get(v),E=S?S.value||S.default:null;return E?E.serialize():null}setConfigProperty(c,d,_){const v=o.cw(_);if(v.result!=="success")return void fl(this,v.value);const S=v.value.expression,E=this.getFragmentStyle(c);if(!E)return;const z=o.aE(d,E.scope),k=E.options.get(z);k&&(this.options.set(z,{...k,value:S}),this.updateConfigDependencies())}setConfig(c,d){if(this._config=c,c||d)if(d)for(const _ in d){let v,S;const E=o.cw(d[_].default);if(E.result==="success"&&(v=E.value.expression),c&&c[_]!==void 0){const X=o.cw(c[_]);X.result==="success"&&(S=X.value.expression)}const{minValue:z,maxValue:k,stepValue:N,type:U,values:$}=d[_];if(v){const X=o.aE(_,this.scope);this.options.set(X,{default:v,value:S,minValue:z,maxValue:k,stepValue:N,type:U,values:$})}else this.fire(new o.a7(new Error(`No schema defined for config option "${_}".`)))}else this.fire(new o.a7(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(){for(const c of this._configDependentLayers){const d=this.getLayer(c);d&&(d.possiblyEvaluateVisibility(),this._updateLayer(d))}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this._changes.setDirty()}addLayer(c,d,_={}){this._checkLoaded();const v=c.id;if(this._layers[v])return void this.fire(new o.a7(new Error(`Layer with id "${v}" already exists on this map`)));let S;if(c.type==="custom"){if(fl(this,o.cx(c)))return;S=o.cp(c,this.scope,this.options)}else{if(typeof c.source=="object"&&(this.addSource(v,c.source),c=o.co(c),c=o.ak(c,{source:v})),this._validate(o.cy,`layers.${v}`,c,{arrayIndex:-1},_))return;S=o.cp(c,this.scope,this.options),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[S.id]=S.serialize()}S.isConfigDependent&&this._configDependentLayers.add(S.fqid);let E=this._order.length;if(d){const U=this._order.indexOf(d);if(U===-1)return void this.fire(new o.a7(new Error(`Layer with id "${d}" does not exist on this map.`)));S.slot===this._layers[d].slot?E=U:o.X(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(E,0,v),this._layerOrderChanged=!0,this._layers[v]=S;const z=this.getOwnLayerSourceCache(S),k=!!this.directionalLight&&this.directionalLight.shadowsEnabled();z&&S.canCastShadows()&&k&&(z.castsShadows=!0);const N=this._changes.getRemovedLayer(S);if(N&&S.source&&z&&S.type!=="custom"){this._changes.discardLayerRemoval(S);const U=o.aE(S.source,S.scope);N.type!==S.type?this._changes.updateSourceCache(U,"clear"):(this._changes.updateSourceCache(U,"reload"),z.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),S.scope=this.scope,this.mergeLayers()}moveLayer(c,d){this._checkLoaded();const _=this._checkLayer(c);if(!_||c===d)return;const v=this._order.indexOf(c);this._order.splice(v,1);let S=this._order.length;if(d){const E=this._order.indexOf(d);if(E===-1)return void this.fire(new o.a7(new Error(`Layer with id "${d}" does not exist on this map.`)));_.slot===this._layers[d].slot?S=E:o.X(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,c),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(c){this._checkLoaded();const d=this._checkLayer(c);if(!d)return;d.setEventedParent(null);const _=this._order.indexOf(c);this._order.splice(_,1),delete this._layers[c],delete this._serializedLayers[c],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const v=this.getOwnLayerSourceCache(d);if(v&&v.castsShadows){let S=!1;for(const E in this._layers)if(this._layers[E].source===d.source&&this._layers[E].canCastShadows()){S=!0;break}v.castsShadows=S}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(c){return this._layers[c]}hasLayer(c){return c in this._mergedLayers}hasLayerType(c){for(const d in this._layers)if(this._layers[d].type===c)return!0;return!1}setLayerZoomRange(c,d,_){this._checkLoaded();const v=this._checkLayer(c);v&&(v.minzoom===d&&v.maxzoom===_||(d!=null&&(v.minzoom=d),_!=null&&(v.maxzoom=_),this._updateLayer(v)))}setSlot(c,d){this._checkLoaded();const _=this._checkLayer(c);_&&_.slot!==d&&(_.slot=d,this._updateLayer(_))}setFilter(c,d,_={}){this._checkLoaded();const v=this._checkLayer(c);if(v&&!M(v.filter,d))return d==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(o.cz,`layers.${v.id}.filter`,d,{layerType:v.type},_)||(v.filter=o.co(d),this._updateLayer(v)))}getFilter(c){const d=this._checkLayer(c);if(d)return o.co(d.filter)}setLayoutProperty(c,d,_,v={}){this._checkLoaded();const S=this._checkLayer(c);S&&(M(S.getLayoutProperty(d),_)||(S.setLayoutProperty(d,_,v),S.isConfigDependent&&this._configDependentLayers.add(S.fqid),this._updateLayer(S)))}getLayoutProperty(c,d){const _=this._checkLayer(c);if(_)return _.getLayoutProperty(d)}setPaintProperty(c,d,_,v={}){this._checkLoaded();const S=this._checkLayer(c);if(!S||M(S.getPaintProperty(d),_))return;const E=S.setPaintProperty(d,_,v);S.isConfigDependent&&this._configDependentLayers.add(S.fqid),E&&this._updateLayer(S),this._changes.updatePaintProperties(S)}getPaintProperty(c,d){const _=this._checkLayer(c);if(_)return _.getPaintProperty(d)}setFeatureState(c,d){this._checkLoaded();const _=c.source,v=c.sourceLayer,S=this._checkSource(_);if(!S)return;const E=S.type;if(E==="geojson"&&v)return void this.fire(new o.a7(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(E==="vector"&&!v)return void this.fire(new o.a7(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new o.a7(new Error("The feature id parameter must be provided.")));const z=this.getOwnSourceCaches(_);for(const k of z)k.setFeatureState(v,c.id,d)}removeFeatureState(c,d){this._checkLoaded();const _=c.source,v=this._checkSource(_);if(!v)return;const S=v.type,E=S==="vector"?c.sourceLayer:void 0;if(S==="vector"&&!E)return void this.fire(new o.a7(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new o.a7(new Error("A feature id is required to remove its specific state property.")));const z=this.getOwnSourceCaches(_);for(const k of z)k.removeFeatureState(E,c.id,d)}getFeatureState(c){this._checkLoaded();const d=c.source,_=c.sourceLayer,v=this._checkSource(d);if(v){if(v.type!=="vector"||_)return c.id===void 0&&this.fire(new o.a7(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(_,c.id);this.fire(new o.a7(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(c){return this.stylesheet.transition=o.ak({},this.stylesheet.transition,c),this.transition=this.stylesheet.transition,this}getTransition(){return o.ak({},this.stylesheet.transition)}serialize(){this._checkLoaded();const c=this.getTerrain(),d=c&&this.terrain&&this.terrain.scope===this.scope?c:this.stylesheet.terrain;return o.cA({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},_=>_!==void 0)}_updateLayer(c){this._changes.updateLayer(c);const d=this.getLayerSourceCache(c),_=o.aE(c.source,c.scope),v=this._changes.getUpdatedSourceCaches();c.source&&!v[_]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(_,"reload"),d.pause()),c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const d=z=>this._mergedLayers[z].type==="fill-extrusion",_=this.order,v={},S=[];for(let z=_.length-1;z>=0;z--){const k=_[z];if(d(k)){v[k]=z;for(const N of c){const U=N[k];if(U)for(const $ of U)S.push($)}}}S.sort((z,k)=>k.intersectionZ-z.intersectionZ);const E=[];for(let z=_.length-1;z>=0;z--){const k=_[z];if(d(k))for(let N=S.length-1;N>=0;N--){const U=S[N].feature;if(v[U.layer.id]<z)break;E.push(U),S.pop()}else for(const N of c){const U=N[k];if(U)for(const $ of U)E.push($.feature)}}return E}queryRenderedFeatures(c,d,_){d&&d.filter&&this._validate(o.cz,"queryRenderedFeatures.filter",d.filter,null,d),d.scope=this.scope,d.availableImages=this._availableImages,d.serializedLayers=this._serializedLayers;const v={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new o.a7(new Error("parameters.layers must be an Array."))),[];for(const N of d.layers){const U=this._mergedLayers[N];if(!U)return this.fire(new o.a7(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];v[U.source]=!0}}const S=[],E=d.serializedLayers||{},z=d&&d.layers?d.layers.some(N=>{const U=this.getLayer(N);return U&&U.is3D()}):this.has3DLayers(),k=Gr.createFromScreenPoints(c,_);for(const N in this._mergedSourceCaches){const U=this._mergedSourceCaches[N].getSource();if(!U||U.scope!==d.scope)continue;const $=this._mergedSourceCaches[N].getSource().id;d.layers&&!v[$]||S.push(Xs(this._mergedSourceCaches[N],this._mergedLayers,E,k,d,_,z,!!this.map._showQueryGeometry))}return this.placement&&S.push(function(N,U,$,X,Q,ae,se){const re={},ne=ae.queryRenderedSymbols(X),de=[];for(const ye of Object.keys(ne).map(Number))de.push(se[ye]);de.sort(Cs);for(const ye of de){const xe=ye.featureIndex.lookupSymbolFeatures(ne[ye.bucketInstanceId],U,ye.bucketIndex,ye.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,N);for(const ce in xe){const pe=re[ce]=re[ce]||[],we=xe[ce];we.sort((Ce,Ee)=>{const Le=ye.featureSortOrder;if(Le){const nt=Le.indexOf(Ce.featureIndex);return Le.indexOf(Ee.featureIndex)-nt}return Ee.featureIndex-Ce.featureIndex});for(const Ce of we)pe.push(Ce)}}for(const ye in re)re[ye].forEach(xe=>{const ce=xe.feature,pe=$(N[ye]);if(!pe)return;const we=pe.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=we});return re}(this._mergedLayers,E,this.getLayerSourceCache.bind(this),k.screenGeometry,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(c,d){d&&d.filter&&this._validate(o.cz,"querySourceFeatures.filter",d.filter,null,d);const _=this.getOwnSourceCaches(c);let v=[];for(const S of _)v=v.concat(Ep(S,d));return v}addSourceType(c,d,_){return wi.getSourceType(c)?_(new Error(`A source type called "${c}" already exists.`)):(wi.setSourceType(c,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:d.workerSourceURL},_):_(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(c,d,_={}){this._checkLoaded();const v=this.light.getLight();let S=!1;for(const z in c)if(!M(c[z],v[z])){S=!0;break}if(!S)return;const E=this._getTransitionParameters();this.light.setLight(c,d,_),this.light.updateTransitions(E)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,d=1){if(this._checkLoaded(),!c)return delete this.terrain,c===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=c;const v=c.source==null;if(d===1){if(typeof _.source=="object"){const z="terrain-dem-src";this.addSource(z,_.source),_=o.co(_),_=o.ak(_,{source:z})}const S=o.ak({},_),E={};if(this.terrain&&v){S.source=this.terrain.get().source;const z=this.terrain?this.getFragmentStyle(this.terrain.scope):null;z&&(E.style=z.serialize())}if(this._validate(o.cB,"terrain",S,E))return}if(!this.terrain||this.terrain.scope!==this.scope&&!v||this.terrain&&d!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,d),this.fire(new o.a8("data",{dataType:"style"}))}else{const S=this.terrain,E=S.get();for(const z of Object.keys(o.ae.terrain))!_.hasOwnProperty(z)&&o.ae.terrain[z].default&&(_[z]=o.ae.terrain[z].default);for(const z in c)if(!M(c[z],E[z])){S.set(c,this.options),this.stylesheet.terrain=c;const k=this._getTransitionParameters({duration:0});S.updateTransitions(k),this.fire(new o.a8("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const d=this.fog=new Jc(c,this.map.transform);this.stylesheet.fog=d.get();const _=this._getTransitionParameters({duration:0});d.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!M(d.get(),c)){d.set(c),this.stylesheet.fog=d.get();const _=this._getTransitionParameters({duration:0});d.updateTransitions(_)}}else this._createFog(c);this._markersNeedUpdate=!0}_getTransitionParameters(c){return{now:o.a4.now(),transition:o.ak(this.transition,c)}}updateDrapeFirstLayers(){if(!this.terrain)return;const c=[],d=[];for(const _ in this._mergedLayers)this.isLayerDraped(this._mergedLayers[_])?c.push(_):d.push(_);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...d)}_createTerrain(c,d){const _=this.terrain=new Ga(c,d,this.scope,this.options);d===1&&(this.stylesheet.terrain=c),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const v=this._getTransitionParameters({duration:0});_.updateTransitions(v)}_force3DLayerUpdate(){for(const c in this._layers){const d=this._layers[c];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const d=this._layers[c];d.type==="symbol"&&this._updateLayer(d)}}_validate(c,d,_,v,S={}){if(S&&S.validate===!1)return!1;const E=o.ak({},this.serialize());return fl(this,c.call(o.aj,o.ak({key:d,style:E,value:_,styleSpec:o.ae},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.cC.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._mergedLayers)this._mergedLayers[c].setEventedParent(null);for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].clearTiles(),this._mergedSourceCaches[c].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(c){const d=this.getSourceCaches(c);for(const _ of d)_.clearTiles()}clearSources(){for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].clearTiles()}reloadSource(c){const d=this.getSourceCaches(c);for(const _ of d)_.resume(),_.reload()}reloadSources(){for(const c of this.getSources())c.reload&&c.reload()}updateSources(c){let d;this.directionalLight&&(d=vh(this.directionalLight));for(const _ in this._mergedSourceCaches)this._mergedSourceCaches[_].update(c,void 0,void 0,d)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const d=this._sourceCaches[c];d.resume(),d.reload()}}_updatePlacement(c,d,_,v,S=!1){let E=!1,z=!1;const k={},N={};for(const U of this._mergedOrder){const $=this._mergedLayers[U];if($.type!=="symbol")continue;const X=o.aE($.source,$.scope);let Q=k[X];if(!Q){const se=this.getLayerSourceCache($);if(!se)continue;const re=se.getRenderableIds(!0).map(ne=>se.getTileByID(ne));N[X]=re.slice(),Q=k[X]=re.sort((ne,de)=>de.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(de.tileID)?-1:1))}const ae=this.crossTileSymbolIndex.addLayer($,Q,c.center.lng,c.projection);E=E||ae}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),S=S||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new o.a8("neworder")),(S||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.a4.now(),c.zoom))&&(this.pauseablePlacement=new rd(c,this._mergedOrder,S,d,_,v,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,k,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.a4.now()),z=!0),E&&this.pauseablePlacement.placement.setStale()),z||E)for(const U of this._mergedOrder){const $=this._mergedLayers[U];$.type==="symbol"&&this.placement.updateLayerOpacities($,k[o.aE($.source,$.scope)])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.a4.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}addImport(c){this._checkLoaded();const d=this.stylesheet.imports=this.stylesheet.imports||[];return d.findIndex(({id:_})=>_===c.id)!==-1?this.fire(new o.a7(new Error(`Import with id '${c.id}' already exists in the map's style.`))):(d.push(c),this._loadImports([c],!0),this)}setImportUrl(c,d){this._checkLoaded();const _=this.stylesheet.imports||[],v=this.getImportIndex(c);if(v===-1)return this;_[v].url=d;const S=this.fragments[v];return S.style=this._createFragmentStyle(_[v]),S.style.on("style.import.load",()=>this.mergeAll()),S.style.loadURL(d),this}setImportData(c,d){this._checkLoaded();const _=this.getImportIndex(c),v=this.stylesheet.imports||[];return _===-1?this:d?(this.fragments[_].style.setState(d),this._reloadImports(),this):(delete v[_].data,this.setImportUrl(c,v[_].url))}setImportConfig(c,d){this._checkLoaded();const _=this.getImportIndex(c),v=this.stylesheet.imports||[];if(_===-1)return this;d?v[_].config=d:delete v[_].config;const S=this.fragments[_],E=S.style.stylesheet&&S.style.stylesheet.schema;return S.config=d,S.style.setConfig(d,E),this.updateConfigDependencies(),this}removeImport(c){this._checkLoaded();const d=this.stylesheet.imports||[],_=this.getImportIndex(c);return _===-1||(d.splice(_,1),this.fragments[_].style._remove(),this.fragments.splice(_,1),this._reloadImports()),this}getImportIndex(c){const d=(this.stylesheet.imports||[]).findIndex(_=>_.id===c);return d===-1&&this.fire(new o.a7(new Error(`Import '${c}' does not exist in the map's style and cannot be updated.`))),d}getLayer(c){return this._mergedLayers[c]}getSources(){const c=[];for(const d in this._mergedOtherSourceCaches){const _=this._mergedOtherSourceCaches[d];_&&c.push(_.getSource())}return c}getSource(c,d){const _=this.getSourceCache(c,d);return _&&_.getSource()}getLayerSource(c){const d=this.getLayerSourceCache(c);return d&&d.getSource()}getSourceCache(c,d){const _=o.aE(c,d);return this._mergedOtherSourceCaches[_]}getLayerSourceCache(c){const d=o.aE(c.source,c.scope);return c.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(c){const d=[];return this._mergedOtherSourceCaches[c]&&d.push(this._mergedOtherSourceCaches[c]),this._mergedSymbolSourceCaches[c]&&d.push(this._mergedSymbolSourceCaches[c]),d}updateSourceCaches(){const c=this._changes.getUpdatedSourceCaches();for(const d in c){const _=c[d];_==="reload"?this.reloadSource(d):_==="clear"&&this.clearSource(d)}}updateLayers(c){const d=this._changes.getUpdatedPaintProperties();for(const _ of d){const v=this.getLayer(_);v&&v.updateTransitions(c)}}getImages(c,d,_){this.imageManager.getImages(d.icons,d.scope,_),this._updateTilesForChangedImages();const v=S=>{S&&S.setDependencies(d.tileID.key,d.type,d.icons)};v(this._otherSourceCaches[d.source]),v(this._symbolSourceCaches[d.source])}getGlyphs(c,d,_){this.glyphManager.getGlyphs(d.stacks,d.scope,_)}getResource(c,d,_){return o.cD(d,_)}getOwnSourceCache(c){return this._otherSourceCaches[c]}getOwnLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}getOwnSourceCaches(c){const d=[];return this._otherSourceCaches[c]&&d.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&d.push(this._symbolSourceCaches[c]),d}_isSourceCacheLoaded(c){const d=this.getOwnSourceCaches(c);return d.length===0?(this.fire(new o.a7(new Error(`There is no source with ID '${c}'`))),!1):d.every(_=>_.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}function Ic(m,c){let d=!1,_=null;const v=()=>{_=null,d&&(m(),_=setTimeout(v,c),d=!1)};return()=>(d=!0,_||v(),_)}wi.getSourceType=function(m){return mi[m]},wi.setSourceType=function(m,c){mi[m]=c},wi.registerForPluginStateChange=o.ci;class dg{constructor(c){this._hashName=c&&encodeURIComponent(c),o.aR(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ic(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const d=Pc(c);if(this._hashName){const _=this._hashName;let v=!1;const S=location.hash.slice(1).split("&").map(E=>{const z=E.split("=")[0];return z===_?(v=!0,`${z}=${d}`):E}).filter(E=>E);return v||S.push(`${_}=${d}`),`#${S.join("&")}`}return`#${d}`}_getCurrentHash(){const c=location.hash.replace("#","");if(this._hashName){let d;return c.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(d=_)}),(d&&d[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(_=>isNaN(_))){const _=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(d[3]||0):c.getBearing();return c.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:_,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Pc(m,c){const d=m.getCenter(),_=Math.round(100*m.getZoom())/100,v=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),E=Math.round(d.lng*S)/S,z=Math.round(d.lat*S)/S,k=m.getBearing(),N=m.getPitch();let U=c?`/${E}/${z}/${_}`:`${_}/${z}/${E}`;return(k||N)&&(U+="/"+Math.round(10*k)/10),N&&(U+=`/${Math.round(N)}`),U}const Sd={linearity:.3,easing:o.cE(0,0,.3,1)},wh=o.ak({deceleration:2500,maxSpeed:1400},Sd),Sh=o.ak({deceleration:20,maxSpeed:1400},Sd),Mp=o.ak({deceleration:1e3,maxSpeed:360},Sd),Ty=o.ak({deceleration:1e3,maxSpeed:90},Sd);class pg{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.a4.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,d=o.a4.now();for(;c.length>0&&d-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)d.zoom+=S.zoomDelta||0,d.bearing+=S.bearingDelta||0,d.pitch+=S.pitchDelta||0,S.panDelta&&d.pan._add(S.panDelta),S.around&&(d.around=S.around),S.pinchAround&&(d.pinchAround=S.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(d.pan.mag()){const S=Rp(d.pan.mag(),_,o.ak({},wh,c||{}));v.offset=d.pan.mult(S.amount/d.pan.mag()),v.center=this._map.transform.center,zc(v,S)}if(d.zoom){const S=Rp(d.zoom,_,Sh);v.zoom=this._map.transform.zoom+S.amount,zc(v,S)}if(d.bearing){const S=Rp(d.bearing,_,Mp);v.bearing=this._map.transform.bearing+o.c(S.amount,-179,179),zc(v,S)}if(d.pitch){const S=Rp(d.pitch,_,Ty);v.pitch=this._map.transform.pitch+S.amount,zc(v,S)}if(v.zoom||v.bearing){const S=d.pinchAround===void 0?d.around:d.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function zc(m,c){(!m.duration||m.duration<c.duration)&&(m.duration=c.duration,m.easing=c.easing)}function Rp(m,c,d){const{maxSpeed:_,linearity:v,deceleration:S}=d,E=o.c(m*v/(c/1e3),-_,_),z=Math.abs(E)/(S*v);return{easing:d.easing,duration:1e3*z,amount:E*(z/2)}}class si extends o.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,d,_,v={}){const S=Se(d.getCanvasContainer(),_),E=d.unproject(S);super(c,o.ak({point:S,lngLat:E,originalEvent:_},v)),this._defaultPrevented=!1,this.target=d}}class Td extends o.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,d,_){const v=c==="touchend"?_.changedTouches:_.touches,S=Me(d.getCanvasContainer(),v),E=S.map(k=>d.unproject(k)),z=S.reduce((k,N,U,$)=>k.add(N.div($.length)),new o.P(0,0));super(c,{points:S,point:z,lngLats:E,lngLat:d.unproject(z),originalEvent:_}),this._defaultPrevented=!1}}class Ey extends o.a8{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,d,_){super(c,{originalEvent:_}),this._defaultPrevented=!1}}class Th{constructor(c,d){this._map=c,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new Ey(c.type,this._map,c))}mousedown(c,d){return this._mousedownPos=d,this._firePreventable(new si(c.type,this._map,c))}mouseup(c){this._map.fire(new si(c.type,this._map,c))}preclick(c){const d=o.ak({},c);d.type="preclick",this._map.fire(new si(d.type,this._map,d))}click(c,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(c),this._map.fire(new si(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new si(c.type,this._map,c))}mouseover(c){this._map.fire(new si(c.type,this._map,c))}mouseout(c){this._map.fire(new si(c.type,this._map,c))}touchstart(c){return this._firePreventable(new Td(c.type,this._map,c))}touchmove(c){this._map.fire(new Td(c.type,this._map,c))}touchend(c){this._map.fire(new Td(c.type,this._map,c))}touchcancel(c){this._map.fire(new Td(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kp{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new si(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new si(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ed{constructor(c,d){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,d){this.isEnabled()&&c.shiftKey&&c.button===0&&(K(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(c,d){if(!this._active)return;const _=d,v=this._startPos,S=this._lastPos;if(!v||!S||S.equals(_)||!this._box&&_.dist(v)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=j("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const E=Math.min(v.x,_.x),z=Math.max(v.x,_.x),k=Math.min(v.y,_.y),N=Math.max(v.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${k}px)`,this._box.style.width=z-E+"px",this._box.style.height=N-k+"px")})}mouseupWindow(c,d){if(!this._active)return;const _=this._startPos,v=d;if(_&&c.button===0){if(this.reset(),me(),_.x!==v.x||_.y!==v.y)return this._map.fire(new o.a8("boxzoomend",{originalEvent:c})),{cameraAnimation:S=>S.fitScreenCoordinates(_,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),W(),delete this._startPos,delete this._lastPos}_fireEvent(c,d){return this._map.fire(new o.a8(c,{originalEvent:d}))}}function Id(m,c){const d={};for(let _=0;_<m.length;_++)d[m[_].identifier]=c[_];return d}class Pd{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,d,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),_.length===this.numTouches&&(this.centroid=function(v){const S=new o.P(0,0);for(const E of v)S._add(E);return S.div(v.length)}(d),this.touches=Id(_,d)))}touchmove(c,d,_){if(this.aborted||!this.centroid)return;const v=Id(_,d);for(const S in this.touches){const E=v[S];(!E||E.dist(this.touches[S])>30)&&(this.aborted=!0)}}touchend(c,d,_){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class zd{constructor(c){this.singleTap=new Pd(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,d,_){this.singleTap.touchstart(c,d,_)}touchmove(c,d,_){this.singleTap.touchmove(c,d,_)}touchend(c,d,_){const v=this.singleTap.touchend(c,d,_);if(v){const S=c.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(v)<30;if(S&&E||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Lp{constructor(){this._zoomIn=new zd({numTouches:1,numTaps:2}),this._zoomOut=new zd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,d,_){this._zoomIn.touchstart(c,d,_),this._zoomOut.touchstart(c,d,_)}touchmove(c,d,_){this._zoomIn.touchmove(c,d,_),this._zoomOut.touchmove(c,d,_)}touchend(c,d,_){const v=this._zoomIn.touchend(c,d,_),S=this._zoomOut.touchend(c,d,_);return v?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(v)},{originalEvent:c})}):S?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(S)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Dp={0:1,2:2};class Ns{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,d){return!1}_move(c,d){return{}}mousedown(c,d){if(this._lastPoint)return;const _=Ie(c);this._correctButton(c,_)&&(this._lastPoint=d,this._eventButton=_)}mousemoveWindow(c,d){const _=this._lastPoint;if(_){if(c.preventDefault(),this._eventButton!=null&&function(v,S){const E=Dp[S];return v.buttons===void 0||(v.buttons&E)!==E}(c,this._eventButton))this.reset();else if(this._moved||!(d.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(_,d)}}mouseupWindow(c){this._lastPoint&&Ie(c)===this._eventButton&&(this._moved&&me(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fg extends Ns{mousedown(c,d){super.mousedown(c,d),this._lastPoint&&(this._active=!0)}_correctButton(c,d){return d===0&&!c.ctrlKey}_move(c,d){return{around:d,panDelta:d.sub(c)}}}class Eh extends Ns{_correctButton(c,d){return d===0&&c.ctrlKey||d===2}_move(c,d){const _=.8*(d.x-c.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(c){c.preventDefault()}}class Ih extends Ns{_correctButton(c,d){return d===0&&c.ctrlKey||d===2}_move(c,d){const _=-.5*(d.y-c.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(c){c.preventDefault()}}class hl{constructor(c,d){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),o.aR(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}touchstart(c,d,_){return this._calculateTransform(c,d,_)}touchmove(c,d,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!o.cF())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,d,_)}}touchend(c,d,_){this._calculateTransform(c,d,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,d,_){_.length>0&&(this._active=!0);const v=Id(_,d),S=new o.P(0,0),E=new o.P(0,0);let z=0;for(const N in v){const U=v[N],$=this._touches[N];$&&(S._add(U),E._add(U.sub($)),z++,v[N]=U)}if(this._touches=v,z<this._minTouches||!E.mag())return;const k=E.div(z);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(z),panDelta:k}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=j("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Op{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,d,_){return{}}touchstart(c,d,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([d[0],d[1]]))}touchmove(c,d,_){const v=this._firstTwoTouches;if(!v)return;c.preventDefault();const[S,E]=v,z=ml(_,d,S),k=ml(_,d,E);if(!z||!k)return;const N=this._aroundCenter?null:z.add(k).div(2);return this._move([z,k],N,c)}touchend(c,d,_){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,E=ml(_,d,v),z=ml(_,d,S);E&&z||(this._active&&me(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ml(m,c,d){for(let _=0;_<m.length;_++)if(m[_].identifier===d)return c[_]}function Bp(m,c){return Math.log(m/c)/Math.LN2}class Np extends Op{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,d){const _=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Bp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bp(this._distance,_),pinchAround:d}}}function Ph(m,c){return 180*m.angleWith(c)/Math.PI}class hg extends Op{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,d){const _=this._vector;if(this._vector=c[0].sub(c[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ph(this._vector,_),pinchAround:d}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const d=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const v=Ph(c,_);return Math.abs(v)<d}}function Ac(m){return Math.abs(m.y)>Math.abs(m.x)}class Iy extends Op{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,Ac(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,d,_){const v=this._lastPoints;if(!v)return;const S=c[0].sub(v[0]),E=c[1].sub(v[1]);return this._map._cooperativeGestures&&!o.cF()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(S,E,_.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(S.y+E.y)/2*-.5})}gestureBeginsVertically(c,d,_){if(this._valid!==void 0)return this._valid;const v=c.mag()>=2,S=d.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const E=c.y>0==d.y>0;return Ac(c)&&Ac(d)&&E}}const Py={panStep:100,bearingStep:15,pitchStep:10};class mg{constructor(){const c=Py;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let d=0,_=0,v=0,S=0,E=0;switch(c.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:c.shiftKey?_=-1:(c.preventDefault(),S=-1);break;case 39:c.shiftKey?_=1:(c.preventDefault(),S=1);break;case 38:c.shiftKey?v=1:(c.preventDefault(),E=-1);break;case 40:c.shiftKey?v=-1:(c.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(_=0,v=0),{cameraAnimation:z=>{const k=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:Fp,zoom:d?Math.round(k)+d*(c.shiftKey?2:1):k,bearing:z.getBearing()+_*this._bearingStep,pitch:z.getPitch()+v*this._pitchStep,offset:[-S*this._panStep,-E*this._panStep],center:z.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Fp(m){return m*(2-m)}const jp=4.000244140625;class gg{constructor(c,d){this._map=c,this._el=c.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.aR(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||o.cF()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const _=o.a4.now(),v=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,d!==0&&d%jp==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(v*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),c.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=c,this._delta-=d,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=Se(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;this._type==="wheel"&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const N=this._type==="wheel"&&Math.abs(this._delta)>jp?this._wheelZoomRate:this._defaultZoomRate;let U=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&U!==0&&(U=1/U);const $=d(),X=Math.pow(2,$),Q=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):X;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(Q*U))),this._type==="wheel"&&(this._startZoom=$,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:d(),v=this._startZoom,S=this._easing;let E,z=!1;if(this._type==="wheel"&&v&&S){const N=Math.min((o.a4.now()-this._lastWheelEventTime)/200,1),U=S(N);E=o.n(v,_,U),N<1?this._frameId||(this._frameId=!0):z=!0}else E=_,z=!0;this._active=!0,z&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let k=E-d();return k*this._lastDelta<0&&(k=0),{noInertia:!0,needsRenderFrame:!z,zoomDelta:k,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let d=o.cG;if(this._prevEase){const _=this._prevEase,v=(o.a4.now()-_.start)/_.duration,S=_.easing(v+.01)-_.easing(v),E=.27/Math.sqrt(S*S+1e-4)*.01,z=Math.sqrt(.0729-E*E);d=o.cE(E,z,.25,1)}return this._prevEase={start:o.a4.now(),duration:c,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=j("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class bg{constructor(c,d){this._clickZoom=c,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Up{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,d){return c.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(c.shiftKey?-1:1),around:_.unproject(d)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zh{constructor(){this._tap=new zd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,d,_){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=d[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(c,d,_))}touchmove(c,d,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const v=d[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,c.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(c,d,_)}touchend(c,d,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(c,d,_)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _g{constructor(c,d,_){this._el=c,this._mousePan=d,this._touchPan=_}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class yg{constructor(c,d,_){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=d,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class vg{constructor(c,d,_,v){this._el=c,this._touchZoom=d,this._touchRotate=_,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ad=m=>m.zoom||m.drag||m.pitch||m.rotate;class xg extends o.a8{}class ru{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,d){const _=o.v.sub([],d,c);this.radius=o.v.length(_[2]<0?o.v.div([],_,this.constants):[_[0],_[1],0])}projectRay(c){o.v.div(c,c,this.constants),o.v.normalize(c,c),o.v.mul(c,c,this.constants);const d=o.v.scale([],c,this.radius);if(d[2]>0){const _=o.v.scale([],[0,0,1],o.v.dot(d,[0,0,1])),v=o.v.scale([],o.v.normalize([],[d[0],d[1],0]),this.radius),S=o.v.add([],d,o.v.scale([],o.v.sub([],o.v.add([],v,_),d),2));d[0]=S[0],d[1]=S[1]}return d}}function Cd(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class wg{constructor(c,d){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new pg(c),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ru,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),o.aR(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,S,E]of this._listeners){const z=v===document?this.handleWindowEvent:this.handleEvent;v.addEventListener(S,z,E)}}destroy(){for(const[c,d,_]of this._listeners){const v=c===document?this.handleWindowEvent:this.handleEvent;c.removeEventListener(d,v,_)}}_addDefaultHandlers(c){const d=this._map,_=d.getCanvasContainer();this._add("mapEvent",new Th(d,c));const v=d.boxZoom=new Ed(d,c);this._add("boxZoom",v);const S=new Lp,E=new Up;d.doubleClickZoom=new bg(E,S),this._add("tapZoom",S),this._add("clickZoom",E);const z=new zh;this._add("tapDragZoom",z);const k=d.touchPitch=new Iy(d);this._add("touchPitch",k);const N=new Eh(c),U=new Ih(c);d.dragRotate=new yg(c,N,U),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);const $=new fg(c),X=new hl(d,c);d.dragPan=new _g(_,$,X),this._add("mousePan",$),this._add("touchPan",X,["touchZoom","touchRotate"]);const Q=new hg,ae=new Np;d.touchZoomRotate=new vg(_,ae,Q,z),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),this._add("blockableMapEvent",new kp(d));const se=d.scrollZoom=new gg(d,this);this._add("scrollZoom",se,["mousePan"]);const re=d.keyboard=new mg;this._add("keyboard",re);for(const ne of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[ne]&&d[ne].enable(c[ne])}_add(c,d,_){this._handlers.push({handlerName:c,handler:d,allowed:_}),this._handlersById[c]=d}stop(c){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ad(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,d,_){for(const v in c)if(v!==_&&(!d||d.indexOf(v)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const d=[];for(const _ of c)this._el.contains(_.target)&&d.push(_);return d}handleEvent(c,d){this._updatingCamera=!0;const _=c.type==="renderFrame",v=_?void 0:c,S={needsRenderFrame:!1},E={},z={},k=c.touches?this._getMapTouches(c.touches):void 0,N=k?Me(this._el,k):_?void 0:Se(this._el,c);for(const{handlerName:X,handler:Q,allowed:ae}of this._handlers){if(!Q.isEnabled())continue;let se;this._blockedByActive(z,ae,X)?Q.reset():Q[d||c.type]&&(se=Q[d||c.type](c,N,k),this.mergeHandlerResult(S,E,se,X,v),se&&se.needsRenderFrame&&this._triggerRenderFrame()),(se||Q.isActive())&&(z[X]=Q)}const U={};for(const X in this._previousActiveHandlers)z[X]||(U[X]=v);this._previousActiveHandlers=z,(Object.keys(U).length||Cd(S))&&(this._changes.push([S,E,U]),this._triggerRenderFrame()),(Object.keys(z).length||Cd(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:$}=S;$&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],$(this._map))}mergeHandlerResult(c,d,_,v,S){if(!_)return;o.ak(c,_);const E={handlerName:v,originalEvent:_.originalEvent||S};_.zoomDelta!==void 0&&(d.zoom=E),_.panDelta!==void 0&&(d.drag=E),_.pitchDelta!==void 0&&(d.pitch=E),_.bearingDelta!==void 0&&(d.rotate=E)}_applyChanges(){const c={},d={},_={};for(const[v,S,E]of this._changes)v.panDelta&&(c.panDelta=(c.panDelta||new o.P(0,0))._add(v.panDelta)),v.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(c.around=v.around),v.aroundCoord!==void 0&&(c.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(c.pinchAround=v.pinchAround),v.noInertia&&(c.noInertia=v.noInertia),o.ak(d,S),o.ak(_,E);this._updateMapTransform(c,d,_),this._changes=[]}_updateMapTransform(c,d,_){const v=this._map,S=v.transform,E=de=>[de.x,de.y,de.z];if((de=>{const ye=this._eventsInProgress.drag;return ye&&!this._handlersById[ye.handlerName].isActive()})()&&!Cd(c)){const de=S.zoom;S.cameraElevationReference="sea",this._originalZoom!=null&&S._orthographicProjectionAtLowPitch&&S.projection.name!=="globe"&&S.pitch===0?(S.cameraElevationReference="ground",S.zoom=this._originalZoom):(S.recenterOnTerrain(),S.cameraElevationReference="ground"),de!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&v._stop(!0),!Cd(c))return void this._fireEvents(d,_,!0);let{panDelta:z,zoomDelta:k,bearingDelta:N,pitchDelta:U,around:$,aroundCoord:X,pinchAround:Q}=c;S._isCameraConstrained&&(k>0&&(k=0),S._isCameraConstrained=!1),Q!==void 0&&($=Q),(k||(de=>d[de]&&!this._eventsInProgress[de])("drag"))&&$&&(this._dragOrigin=E(S.pointCoordinate3D($)),this._originalZoom=S.zoom,this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",v._stop(!0),$=$||v.transform.centerPoint,N&&(S.bearing+=N),U&&(S.pitch+=U),S._updateCameraState();const ae=[0,0,0];if(z)if(S.projection.name==="mercator"){const de=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay($).dir),ye=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay($.sub(z)).dir);ae[0]=ye[0]-de[0],ae[1]=ye[1]-de[1]}else{const de=S.pointCoordinate($);if(S.projection.name==="globe"){z=z.rotate(-S.angle);const ye=S._pixelsPerMercatorPixel/S.worldSize;ae[0]=-z.x*o.cH(o.l(de.y))*ye,ae[1]=-z.y*o.cH(S.center.lat)*ye}else{const ye=S.pointCoordinate($.sub(z));de&&ye&&(ae[0]=ye.x-de.x,ae[1]=ye.y-de.y)}}const se=S.zoom,re=[0,0,0];if(k){const de=E(X||S.pointCoordinate3D($)),ye={dir:o.v.normalize([],o.v.sub([],de,S._camera.position))};if(ye.dir[2]<0){const xe=S.zoomDeltaToMovement(de,k);o.v.scale(re,ye.dir,xe)}}const ne=o.v.add(ae,ae,re);S._translateCameraConstrained(ne),k&&Math.abs(S.zoom-se)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(d,_,!0)}_fireEvents(c,d,_){const v=Ad(this._eventsInProgress),S=Ad(c),E={};for(const U in c){const{originalEvent:$}=c[U];this._eventsInProgress[U]||(E[`${U}start`]=$),this._eventsInProgress[U]=c[U]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const U in E)this._fireEvent(U,E[U]);S&&this._fireEvent("move",S.originalEvent);for(const U in c){const{originalEvent:$}=c[U];this._fireEvent(U,$)}const z={};let k;for(const U in this._eventsInProgress){const{handlerName:$,originalEvent:X}=this._eventsInProgress[U];this._handlersById[$].isActive()||(delete this._eventsInProgress[U],k=d[$]||X,z[`${U}end`]=k)}for(const U in z)this._fireEvent(U,z[U]);const N=Ad(this._eventsInProgress);if(_&&(v||S)&&!N){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;U?($(U.bearing||this._map.getBearing())&&(U.bearing=0),this._map.easeTo(U,{originalEvent:k})):(this._map.fire(new o.a8("moveend",{originalEvent:k})),$(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,d){this._map.fire(new o.a8(c,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new xg("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Sg="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Tg extends o.a6{constructor(c,d){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,o.aR(["_renderFrameCallback"],this)}getCenter(){return new o.L(this.transform.center.lng,this.transform.center.lat)}setCenter(c,d){return this.jumpTo({center:c},d)}panBy(c,d,_){return c=o.P.convert(c).mult(-1),this.panTo(this.transform.center,o.ak({offset:c},d),_)}panTo(c,d,_){return this.easeTo(o.ak({center:c},d),_)}getZoom(){return this.transform.zoom}setZoom(c,d){return this.jumpTo({zoom:c},d),this}zoomTo(c,d,_){return this.easeTo(o.ak({zoom:c},d),_)}zoomIn(c,d){return this.zoomTo(this.getZoom()+1,c,d),this}zoomOut(c,d){return this.zoomTo(this.getZoom()-1,c,d),this}getBearing(){return this.transform.bearing}setBearing(c,d){return this.jumpTo({bearing:c},d),this}getPadding(){return this.transform.padding}setPadding(c,d){return this.jumpTo({padding:c},d),this}rotateTo(c,d,_){return this.easeTo(o.ak({bearing:c},d),_)}resetNorth(c,d){return this.rotateTo(0,o.ak({duration:1e3},c),d),this}resetNorthPitch(c,d){return this.easeTo(o.ak({bearing:0,pitch:0,duration:1e3},c),d),this}snapToNorth(c,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,d):this}getPitch(){return this.transform.pitch}setPitch(c,d){return this.jumpTo({pitch:c},d),this}cameraForBounds(c,d){c=o.D.convert(c);const _=d&&d.bearing||0,v=d&&d.pitch||0,S=c.getNorthWest(),E=c.getSouthEast();return this._cameraForBounds(this.transform,S,E,_,v,d)}_extendCameraOptions(c){const d={top:0,bottom:0,right:0,left:0};if(typeof(c=o.ak({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=="number"){const _=c.padding;c.padding={top:_,bottom:_,right:_,left:_}}return c.padding=o.ak(d,c.padding),c}_minimumAABBFrustumDistance(c,d){const _=d.max[0]-d.min[0],v=d.max[1]-d.min[1];return _/v>c.aspect?_/(2*Math.tan(.5*c.fovX)*c.aspect):v/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,d,_,v,S,E){const z=c.clone(),k=this._extendCameraOptions(E);z.bearing=v,z.pitch=S;const N=o.L.convert(d),U=o.L.convert(_),$=.5*(N.lat+U.lat),X=.5*(N.lng+U.lng),Q=o.cI($,X),ae=o.v.normalize([],Q),se=o.v.normalize([],o.v.cross([],ae,[0,1,0])),re=o.v.cross([],se,ae),ne=[se[0],se[1],se[2],0,re[0],re[1],re[2],0,ae[0],ae[1],ae[2],0,0,0,0,1],de=[Q,o.cI(N.lat,N.lng),o.cI(U.lat,N.lng),o.cI(U.lat,U.lng),o.cI(N.lat,U.lng),o.cI($,N.lng),o.cI($,U.lng),o.cI(N.lat,X),o.cI(U.lat,X)];let ye=o.c3.fromPoints(de.map(Fe=>[o.v.dot(se,Fe),o.v.dot(re,Fe),o.v.dot(ae,Fe)]));const xe=o.v.transformMat4([],ye.center,ne);o.v.squaredLength(xe)===0&&o.v.set(xe,0,0,1),o.v.normalize(xe,xe),o.v.scale(xe,xe,o.aC),z.center=o.cJ(xe);const ce=z.getWorldToCameraMatrix(),pe=o.m.invert(new Float64Array(16),ce);ye=o.c3.applyTransform(ye,o.m.multiply([],ce,ne)),o.v.transformMat4(xe,xe,ce);const we=.5*(ye.max[2]-ye.min[2]),Ce=this._minimumAABBFrustumDistance(z,ye),Ee=o.v.scale([],[0,0,1],we),Le=o.v.add(Ee,xe,Ee),nt=Ce+(z.pitch===0?0:o.v.distance(xe,Le)),$e=z.globeCenterInViewSpace,Je=o.v.sub([],xe,[$e[0],$e[1],$e[2]]);o.v.normalize(Je,Je),o.v.scale(Je,Je,nt);const Oe=o.v.add([],xe,Je);o.v.transformMat4(Oe,Oe,pe);const tt=o.cL/o.aC,Ze=o.v.length(Oe),st=o.b(Math.max(Ze*tt-o.cL,Number.EPSILON),0),be=Math.min(z.zoomFromMercatorZAdjusted(st),k.maxZoom);return be>.5*(o.Z+o.G)?(z.setProjection({name:"mercator"}),z.zoom=be,this._cameraForBounds(z,d,_,v,S,E)):{center:z.center,zoom:be,bearing:v,pitch:S}}queryTerrainElevation(c,d){const _=this.transform.elevation;return _?(d=o.ak({},{exaggerated:!0},d),_.getAtPoint(o.M.fromLngLat(c),null,d.exaggerated)):null}_cameraForBounds(c,d,_,v,S,E){if(c.projection.name==="globe")return this._cameraForBoundsOnGlobe(c,d,_,v,S,E);const z=c.clone(),k=this._extendCameraOptions(E),N=z.padding;z.bearing=v,z.pitch=S;const U=o.L.convert(d),$=o.L.convert(_),X=new o.L(U.lng,$.lat),Q=new o.L($.lng,U.lat),ae=z.project(U),se=z.project($),re=this.queryTerrainElevation(U),ne=this.queryTerrainElevation($),de=this.queryTerrainElevation(X),ye=this.queryTerrainElevation(Q),xe=[[ae.x,ae.y,Math.min(re||0,ne||0,de||0,ye||0)],[se.x,se.y,Math.max(re||0,ne||0,de||0,ye||0)]];let ce=o.c3.fromPoints(xe);const pe=z.getWorldToCameraMatrix(),we=o.m.invert(new Float64Array(16),pe);ce=o.c3.applyTransform(ce,pe);const Ce=o.v.sub([],ce.max,ce.min),Ee=N.left||0,Le=N.right||0,nt=N.bottom||0,$e=N.top||0,{left:Je,right:Oe,top:tt,bottom:Ze}=k.padding,st=.5*(Ee+Le),be=.5*($e+nt),Fe=Math.min(z.scaleZoom(z.scale*Math.min((z.width-(Ee+Le+Je+Oe))/Ce[0],(z.height-(nt+$e+Ze+tt))/Ce[1])),k.maxZoom),mt=z.scale/z.zoomScale(Fe);ce=new o.c3([ce.min[0]-(Je+st)*mt,ce.min[1]-(Ze+be)*mt,ce.min[2]],[ce.max[0]+(Oe+st)*mt,ce.max[1]+(tt+be)*mt,ce.max[2]]);const ct=.5*Ce[2],Wt=this._minimumAABBFrustumDistance(z,ce),jt=[0,0,1,0];o.e.transformMat4(jt,jt,pe),o.e.normalize(jt,jt);const rn=o.v.scale([],jt,Wt+ct),Vt=o.v.add([],ce.center,rn),pn=(typeof k.offset.x=="number"&&typeof k.offset.y=="number"?new o.P(k.offset.x,k.offset.y):o.P.convert(k.offset)).rotate(-o.d(v));ce.center[0]-=pn.x*mt,ce.center[1]+=pn.y*mt,o.v.transformMat4(ce.center,ce.center,we),o.v.transformMat4(Vt,Vt,we);const fn=[ce.center[0],ce.center[1],Vt[2]*z.pixelsPerMeter];o.v.scale(fn,fn,1/z.worldSize);const Kt=o.cK(fn[0]),en=o.l(fn[1]),Jn=Math.min(z._zoomFromMercatorZ(fn[2]),k.maxZoom),An=new o.L(Kt,en);return z.mercatorFromTransition&&Jn<.5*(o.Z+o.G)?(z.setProjection({name:"globe"}),z.zoom=Jn,this._cameraForBounds(z,d,_,v,S,E)):{center:An,zoom:Jn,bearing:v,pitch:S}}fitBounds(c,d,_){const v=this.cameraForBounds(c,d);return this._fitInternal(v,d,_)}fitScreenCoordinates(c,d,_,v,S){const E=o.P.convert(c),z=o.P.convert(d),k=new o.P(Math.min(E.x,z.x),Math.min(E.y,z.y)),N=new o.P(Math.max(E.x,z.x),Math.max(E.y,z.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(E,z))return this;const U=this.transform.pointLocation3D(k),$=this.transform.pointLocation3D(N),X=this.transform.pointLocation3D(new o.P(k.x,N.y)),Q=this.transform.pointLocation3D(new o.P(N.x,k.y)),ae=[Math.min(U.lng,$.lng,X.lng,Q.lng),Math.min(U.lat,$.lat,X.lat,Q.lat)],se=[Math.max(U.lng,$.lng,X.lng,Q.lng),Math.max(U.lat,$.lat,X.lat,Q.lat)],re=v&&v.pitch?v.pitch:this.getPitch(),ne=this._cameraForBounds(this.transform,ae,se,_,re,v);return this._fitInternal(ne,v,S)}_fitInternal(c,d,_){return c?(delete(d=o.ak(c,d)).padding,d.linear?this.easeTo(d,_):this.flyTo(d,_)):this}jumpTo(c,d){this.stop();const _=c.preloadOnly?this.transform.clone():this.transform;let v=!1,S=!1,E=!1;return"zoom"in c&&_.zoom!==+c.zoom&&(v=!0,_.zoom=+c.zoom),c.center!==void 0&&(_.center=o.L.convert(c.center)),"bearing"in c&&_.bearing!==+c.bearing&&(S=!0,_.bearing=+c.bearing),"pitch"in c&&_.pitch!==+c.pitch&&(E=!0,_.pitch=+c.pitch),c.padding==null||_.isPaddingEqual(c.padding)||(_.padding=c.padding),c.preloadOnly?(this._preloadTiles(_),this):(this.fire(new o.a8("movestart",d)).fire(new o.a8("move",d)),v&&this.fire(new o.a8("zoomstart",d)).fire(new o.a8("zoom",d)).fire(new o.a8("zoomend",d)),S&&this.fire(new o.a8("rotatestart",d)).fire(new o.a8("rotate",d)).fire(new o.a8("rotateend",d)),E&&this.fire(new o.a8("pitchstart",d)).fire(new o.a8("pitch",d)).fire(new o.a8("pitchend",d)),this.fire(new o.a8("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.X(Sg),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,d){const _=this.transform;if(!_.projection.supportsFreeCamera)return o.X(Sg),this;this.stop();const v=_.zoom,S=_.pitch,E=_.bearing;_.setFreeCameraOptions(c);const z=v!==_.zoom,k=S!==_.pitch,N=E!==_.bearing;return this.fire(new o.a8("movestart",d)).fire(new o.a8("move",d)),z&&this.fire(new o.a8("zoomstart",d)).fire(new o.a8("zoom",d)).fire(new o.a8("zoomend",d)),N&&this.fire(new o.a8("rotatestart",d)).fire(new o.a8("rotate",d)).fire(new o.a8("rotateend",d)),k&&this.fire(new o.a8("pitchstart",d)).fire(new o.a8("pitch",d)).fire(new o.a8("pitchend",d)),this.fire(new o.a8("moveend",d)),this}easeTo(c,d){this._stop(!1,c.easeId),((c=o.ak({offset:[0,0],duration:500,easing:o.cG},c)).animate===!1||this._prefersReducedMotion(c))&&(c.duration=0);const _=this.transform,v=this.getZoom(),S=this.getBearing(),E=this.getPitch(),z=this.getPadding(),k="zoom"in c?+c.zoom:v,N="bearing"in c?this._normalizeBearing(c.bearing,S):S,U="pitch"in c?+c.pitch:E,$="padding"in c?c.padding:_.padding,X=o.P.convert(c.offset);let Q,ae,se;if(_.projection.name==="globe"){const Ee=o.M.fromLngLat(_.center),Le=X.rotate(-_.angle);Ee.x+=Le.x/_.worldSize,Ee.y+=Le.y/_.worldSize;const nt=Ee.toLngLat(),$e=o.L.convert(c.center||nt);this._normalizeCenter($e),Q=_.centerPoint.add(Le),ae=new o.P(Ee.x,Ee.y).mult(_.worldSize),se=new o.P(o.E($e.lng),o.H($e.lat)).mult(_.worldSize).sub(ae)}else{Q=_.centerPoint.add(X);const Ee=_.pointLocation(Q),Le=o.L.convert(c.center||Ee);this._normalizeCenter(Le),ae=_.project(Ee),se=_.project(Le).sub(ae)}const re=_.zoomScale(k-v);let ne,de;c.around&&(ne=o.L.convert(c.around),de=_.locationPoint(ne));const ye=this._zooming||k!==v,xe=this._rotating||S!==N,ce=this._pitching||U!==E,pe=!_.isPaddingEqual($),we=Ee=>Le=>{if(ye&&(Ee.zoom=o.n(v,k,Le)),xe&&(Ee.bearing=o.n(S,N,Le)),ce&&(Ee.pitch=o.n(E,U,Le)),pe&&(Ee.interpolatePadding(z,$,Le),Q=Ee.centerPoint.add(X)),ne)Ee.setLocationAtPoint(ne,de);else{const nt=Ee.zoomScale(Ee.zoom-v),$e=k>v?Math.min(2,re):Math.max(.5,re),Je=Math.pow($e,1-Le),Oe=Ee.unproject(ae.add(se.mult(Le*Je)).mult(nt));Ee.setLocationAtPoint(Ee.renderWorldCopies?Oe.wrap():Oe,Q)}return c.preloadOnly||this._fireMoveEvents(d),Ee};if(c.preloadOnly){const Ee=this._emulate(we,c.duration,_);return this._preloadTiles(Ee),this}const Ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ye,this._rotating=xe,this._pitching=ce,this._easeId=c.easeId,this._prepareEase(d,c.noMoveStart,Ce),this._ease(we(_),Ee=>{_.cameraElevationReference==="sea"&&_.recenterOnTerrain(),this._afterEase(d,Ee)},c),this}_prepareEase(c,d,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||_.moving||this.fire(new o.a8("movestart",c)),this._zooming&&!_.zooming&&this.fire(new o.a8("zoomstart",c)),this._rotating&&!_.rotating&&this.fire(new o.a8("rotatestart",c)),this._pitching&&!_.pitching&&this.fire(new o.a8("pitchstart",c))}_fireMoveEvents(c){this.fire(new o.a8("move",c)),this._zooming&&this.fire(new o.a8("zoom",c)),this._rotating&&this.fire(new o.a8("rotate",c)),this._pitching&&this.fire(new o.a8("pitch",c))}_afterEase(c,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,v=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,_&&this.fire(new o.a8("zoomend",c)),v&&this.fire(new o.a8("rotateend",c)),S&&this.fire(new o.a8("pitchend",c)),this.fire(new o.a8("moveend",c))}flyTo(c,d){if(this._prefersReducedMotion(c)){const Ze=o.p(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ze,d)}this.stop(),c=o.ak({offset:[0,0],speed:1.2,curve:1.42,easing:o.cG},c);const _=this.transform,v=this.getZoom(),S=this.getBearing(),E=this.getPitch(),z="zoom"in c?o.c(+c.zoom,_.minZoom,_.maxZoom):v,k="bearing"in c?this._normalizeBearing(c.bearing,S):S,N="pitch"in c?+c.pitch:E,U=_.zoomScale(z-v),$=o.P.convert(c.offset),X=_.centerPoint.add($),Q=_.pointLocation(X);let ae=c.center;if(ae&&c.padding){const Ze=this._cameraForBounds(this.transform,ae,ae,k,N,c);Ze&&(ae=Ze.center)}ae=o.L.convert(ae||Q),this._normalizeCenter(ae);const se=_.project(Q),re=_.project(ae).sub(se);let ne=c.curve;const de=Math.max(_.width,_.height),ye=de/U,xe=re.mag();if("minZoom"in c){const Ze=o.c(Math.min(c.minZoom,v,z),_.minZoom,_.maxZoom),st=de/_.zoomScale(Ze-v);ne=Math.sqrt(st/xe*2)}const ce=ne*ne;function pe(Ze){const st=(ye*ye-de*de+(Ze?-1:1)*ce*ce*xe*xe)/(2*(Ze?ye:de)*ce*xe);return Math.log(Math.sqrt(st*st+1)-st)}function we(Ze){return(Math.exp(Ze)-Math.exp(-Ze))/2}function Ce(Ze){return(Math.exp(Ze)+Math.exp(-Ze))/2}const Ee=pe(0);let Le=function(Ze){return Ce(Ee)/Ce(Ee+ne*Ze)},nt=function(Ze){return de*((Ce(Ee)*(we(st=Ee+ne*Ze)/Ce(st))-we(Ee))/ce)/xe;var st},$e=(pe(1)-Ee)/ne;if(Math.abs(xe)<1e-6||!isFinite($e)){if(Math.abs(de-ye)<1e-6)return this.easeTo(c,d);const Ze=ye<de?-1:1;$e=Math.abs(Math.log(ye/de))/ne,nt=function(){return 0},Le=function(st){return Math.exp(Ze*ne*st)}}c.duration="duration"in c?+c.duration:1e3*$e/("screenSpeed"in c?+c.screenSpeed/ne:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const Je=S!==k,Oe=N!==E,tt=Ze=>st=>{const be=st*$e,Fe=1/Le(be);Ze.zoom=st===1?z:v+Ze.scaleZoom(Fe),Je&&(Ze.bearing=o.n(S,k,st)),Oe&&(Ze.pitch=o.n(E,N,st));const mt=st===1?ae:Ze.unproject(se.add(re.mult(nt(be))).mult(Fe));return Ze.setLocationAtPoint(Ze.renderWorldCopies?mt.wrap():mt,X),Ze._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(d),Ze};if(c.preloadOnly){const Ze=this._emulate(tt,c.duration,_);return this._preloadTiles(Ze),this}return this._zooming=!0,this._rotating=Je,this._pitching=Oe,this._prepareEase(d,!1),this._ease(tt(_),()=>this._afterEase(d),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,d)}if(!c){const _=this.handlers;_&&_.stop(!1)}return this}_ease(c,d,_){_.animate===!1||_.duration===0?(c(1),d()):(this._easeStart=o.a4.now(),this._easeOptions=_,this._onEaseFrame=c,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((o.a4.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,d){c=o.w(c,-180,180);const _=Math.abs(c-d);return Math.abs(c-360-d)<_&&(c-=360),Math.abs(c+360-d)<_&&(c+=360),c}_normalizeCenter(c){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const _=c.lng-d.center.lng;c.lng+=_>180?-360:_<-180?360:0}_prefersReducedMotion(c){return this._respectPrefersReducedMotion&&o.a4.prefersReducedMotion&&!(c&&c.essential)}_emulate(c,d,_){const v=Math.ceil(15*d/1e3),S=[],E=c(_.clone());for(let z=0;z<=v;z++){const k=E(z/v);S.push(k.clone())}return S}}class Ah{constructor(c={}){this.options=c,o.aR(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const d=this.options&&this.options.compact;return this._map=c,this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=j("button","mapboxgl-ctrl-attrib-button",this._container),j("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,d){const _=this._map._getUIString(`AttributionControl.${d}`);c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.cM.ACCESS_TOKEN}];if(c){const _=d.reduce((v,S,E)=>(S.value&&(v+=`${S.key}=${S.value}${E<d.length-1?"&":""}`),v),"?");c.href=`${o.cM.FEEDBACK_URL}/${_}#${Pc(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const d=this._map.style._mergedSourceCaches;for(const v in d){const S=d[v];if(S.used){const E=S.getSource();E.attribution&&c.indexOf(E.attribution)<0&&c.push(E.attribution)}}c.sort((v,S)=>v.length-S.length),c=c.filter((v,S)=>{for(let E=S+1;E<c.length;E++)if(c[E].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const _=c.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,c.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ch{constructor(){o.aR(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=j("div","mapboxgl-ctrl");const d=j("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const d in c){const _=c[d].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const d=c[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class Mh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const d=++this._id;return this._queue.push({callback:c,id:d,cancelled:!1}),d}remove(c){const d=this._currentlyRunning,_=d?this._queue.concat(d):this._queue;for(const v of _)if(v.id===c)return void(v.cancelled=!0)}run(c=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const _ of d)if(!_.cancelled&&(_.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Rh(m,c,d){if(m=new o.L(m.lng,m.lat),c){const _=new o.L(m.lng-360,m.lat),v=new o.L(m.lng+360,m.lat),S=360*Math.ceil(Math.abs(m.lng-d.center.lng)/360),E=d.locationPoint(m).distSqr(c),z=c.x<0||c.y<0||c.x>d.width||c.y>d.height;d.locationPoint(_).distSqr(c)<E&&(z||Math.abs(_.lng-d.center.lng)<S)?m=_:d.locationPoint(v).distSqr(c)<E&&(z||Math.abs(v.lng-d.center.lng)<S)&&(m=v)}for(;Math.abs(m.lng-d.center.lng)>180;){const _=d.locationPoint(m);if(_.x>=0&&_.y>=0&&_.x<=d.width&&_.y<=d.height)break;m.lng>d.center.lng?m.lng-=360:m.lng+=360}return m}const Vp={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ir extends o.a6{constructor(c,d){if(super(),(c instanceof HTMLElement||d)&&(c=o.ak({element:c},d)),o.aR(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=c&&c.occludedOpacity||.2,c&&c.element)this._element=c.element,this._offset=o.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=j("div");const S=41,E=27,z=Z("svg",{display:"block",height:S*this._scale+"px",width:E*this._scale+"px",viewBox:`0 0 ${E} ${S}`},this._element),k=Z("radialGradient",{id:"shadowGradient"},Z("defs",{},z));Z("stop",{offset:"10%","stop-opacity":.4},k),Z("stop",{offset:"100%","stop-opacity":.05},k),Z("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},z),Z("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},z),Z("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},z),Z("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},z),this._offset=o.P.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",S=>{S.preventDefault()}),this._element.addEventListener("mousedown",S=>{S.preventDefault()});const _=this._element.classList;for(const S in Vp)_.remove(`mapboxgl-marker-anchor-${S}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`);const v=c&&c.className?c.className.trim().split(/\s+/):[];_.add(...v),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.L.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const d=c.code,_=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(c){const d=c.originalEvent.target,_=this._element;this._popup&&(d===_||_.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,d=this._pos;if(!c||!d)return!1;const _=c.unproject(d),v=c.getFreeCameraOptions();if(!v.position)return!1;const S=v.position.toLngLat();return S.distanceTo(_)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const d=this._pos;if(!d||d.x<0||d.x>c.transform.width||d.y<0||d.y>c.transform.height)return void this._clearFadeTimer();const _=c.unproject(d);let v;c._showingGlobe()&&o.cN(c.transform,this._lngLat)?v=0:(v=1-c._queryFogOpacity(_),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${Vp[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const c=this._pos,d=this._map,_=this.getPitchAlignment();if(!d||!c||_!=="map")return"";if(!d._showingGlobe()){const k=d.getPitch();return k?`rotateX(${k}deg)`:""}const v=o.Y(o.cO(d.transform,this._lngLat)),S=c.sub(o.cP(d.transform)),E=Math.abs(S.x)+Math.abs(S.y);if(E===0)return"";const z=v/E;return`rotateX(${-S.y*z}deg) rotateY(${S.x*z}deg)`}_calculateZTransform(){const c=this._pos,d=this._map;if(!d||!c)return"";let _=0;const v=this.getRotationAlignment();if(v==="map")if(d._showingGlobe()){const S=d.project(new o.L(this._lngLat.lng,this._lngLat.lat+.001)),E=d.project(new o.L(this._lngLat.lng,this._lngLat.lat-.001)).sub(S);_=o.Y(Math.atan2(E.y,E.x))-90}else _=-d.getBearing();else if(v==="horizon"){const S=o.an(4,6,d.getZoom()),E=o.cP(d.transform);E.y+=S*d.transform.height;const z=c.sub(E),k=o.Y(Math.atan2(z.y,z.x));_=(k>90?k-270:k+90)*(1-S)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(c){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=Rh(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),c===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=o.P.convert(c),this._update(),this}addClassName(c){return this._element.classList.add(c),this}removeClassName(c){return this._element.classList.remove(c),this}toggleClassName(c){return this._element.classList.toggle(c)}_onMove(c){const d=this._map;if(!d)return;const _=this._pointerdownPos,v=this._positionDelta;if(_&&v){if(!this._isDragging){const S=this._clickTolerance||d._clickTolerance;if(c.point.dist(_)<S)return;this._isDragging=!0}this._pos=c.point.sub(v),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.a8("dragstart"))),this.fire(new o.a8("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.a8("dragend")),this._state="inactive"}_addDragHandler(c){const d=this._map,_=this._pos;d&&_&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(_),this._pointerdownPos=c.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const d=this._map;return d&&(c?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const zy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Eg=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function kh(m=new o.P(0,0),c="bottom"){if(typeof m=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(c){case"top":return new o.P(0,m);case"top-left":return new o.P(d,d);case"top-right":return new o.P(-d,d);case"bottom":return new o.P(0,-m);case"bottom-left":return new o.P(d,-d);case"bottom-right":return new o.P(-d,-d);case"left":return new o.P(m,0);case"right":return new o.P(-m,0)}return new o.P(0,0)}return m instanceof o.P||Array.isArray(m)?o.P.convert(m):o.P.convert(m[c]||[0,0])}class Ay{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const d=o.ba((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,d,_){this._start=this.getValue(d),this._end=c,this._startTime=d,this._endTime=d+_}}const Cy={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Wi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1};class Ig{constructor(){this.showOverdrawInspector=!1,this.showTileBoundaries=!1,this.continuousRedraw=!1,this.showTerrainWireframe=!1,this.showLayers2DWireframe=!1,this.showLayers3DWireframe=!1}}const My={showCompass:!0,showZoom:!0,visualizePitch:!1};class Cc{constructor(c,d,_=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Eh({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,_&&(this.mousePitch=new Ih({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),o.aR(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(c,d){this.mouseRotate.mousedown(c,d),this.mousePitch&&this.mousePitch.mousedown(c,d),K()}move(c,d){const _=this.map,v=this.mouseRotate.mousemoveWindow(c,d),S=v&&v.bearingDelta;if(S&&_.setBearing(_.getBearing()+S),this.mousePitch){const E=this.mousePitch.mousemoveWindow(c,d),z=E&&E.pitchDelta;z&&_.setPitch(_.getPitch()+z)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){W(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(o.ak({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),Se(this.element,c)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,Se(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Me(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=Me(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const wo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},su={maxWidth:100,unit:"metric"},Gp={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:o.c$,supported:B,setRTLTextPlugin:o.d1,getRTLTextPluginStatus:o.d2,Map:class extends Tg{constructor(m){const c=m;if((m=o.ak({},Wi,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&o.cQ(window)&&(m.antialias=!1,o.X("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Kn(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._repaint=!1,this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new Mh,this._domRenderTaskQueue=new Mh,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.cR(),this._locale=o.ak({},Cy,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Ay(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.cS(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,this._contextCreateOptions=m.contextCreateOptions?{...m.contextCreateOptions}:{},typeof m.container=="string"){const d=document.getElementById(m.container);if(!d)throw new Error(`Container '${m.container.toString()}' not found.`);this._container=d}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&o.X("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),o.aR(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._debugParams=new Ig,this._tp=m.devtools?new sg(this):new sg,this._tp.registerParameter(this._debugParams,["Debug"],"showOverdrawInspector",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"showTileBoundaries",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug"],"continuousRedraw",void 0,d=>{this.repaint=d}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showTerrainWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers2DWireframe",void 0,()=>{this._update()}),this._tp.registerParameter(this._debugParams,["Debug","Wireframe"],"showLayers3DWireframe",void 0,()=>{this._update()}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new wg(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,(m.style||!m.testMode)&&this.setStyle(m.style||o.cM.DEFAULT_STYLE,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),m.hash&&(this._hash=new dg(typeof m.hash=="string"&&m.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){c.center==null&&c.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch});const d=m.bounds;d&&(this.resize(),this.fitBounds(d,o.ak({},m.fitBoundsOptions,{duration:0})))}this.resize(),m.attributionControl&&this.addControl(new Ah({customAttribution:m.customAttribution})),this._logoControl=new Ch,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new o.a8(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new o.a8(`${d.dataType}dataloading`,d))})}_getMapId(){return this._mapId}addControl(m,c){if(c===void 0&&(c=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.a7(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=m.onAdd(this);this._controls.push(m);const _=this._controlPositions[c];return c.indexOf("bottom")!==-1?_.insertBefore(d,_.firstChild):_.appendChild(d),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new o.a7(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(m);return c>-1&&this._controls.splice(c,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new o.a8("movestart",m)).fire(new o.a8("move",m)),this.fire(new o.a8("resize",m)),c&&this.fire(new o.a8("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(o.D.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new o.a8("zoomstart")).fire(new o.a8("zoom")).fire(new o.a8("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new o.a8("zoomstart")).fire(new o.a8("zoom")).fire(new o.a8("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new o.a8("pitchstart")).fire(new o.a8("pitch")).fire(new o.a8("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new o.a8("pitchstart")).fire(new o.a8("pitch")).fire(new o.a8("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(c=>c==="auto"?navigator.language:c):m}setLanguage(m){const c=this._parseLanguage(m);if(!this.style||c===this._language)return this;this._language=c,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,c=m.projection.name;let d;c==="globe"&&m.zoom>=o.G?(m.setMercatorFromTransition(),d=!0):c==="mercator"&&m.zoom<o.G&&(m.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,c){return this._updateProjection(m||c||{name:"mercator"})}_updateProjection(m){let c;return c=m.name==="globe"&&this.transform.zoom>=o.G?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),c&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(m){return this.transform.locationPoint3D(o.L.convert(m))}unproject(m){return this.transform.pointLocation3D(o.P.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,c,d){if(m==="mouseenter"||m==="mouseover"){let _=!1;const v=E=>{const z=c.filter(N=>this.getLayer(N)),k=z.length?this.queryRenderedFeatures(E.point,{layers:z}):[];k.length?_||(_=!0,d.call(this,new si(m,this,E.originalEvent,{features:k}))):_=!1},S=()=>{_=!1};return{layers:new Set(c),listener:d,delegates:{mousemove:v,mouseout:S}}}if(m==="mouseleave"||m==="mouseout"){let _=!1;const v=E=>{const z=c.filter(k=>this.getLayer(k));(z.length?this.queryRenderedFeatures(E.point,{layers:z}):[]).length?_=!0:_&&(_=!1,d.call(this,new si(m,this,E.originalEvent)))},S=E=>{_&&(_=!1,d.call(this,new si(m,this,E.originalEvent)))};return{layers:new Set(c),listener:d,delegates:{mousemove:v,mouseout:S}}}{const _=v=>{const S=c.filter(z=>this.getLayer(z)),E=S.length?this.queryRenderedFeatures(v.point,{layers:S}):[];E.length&&(v.features=E,d.call(this,v),delete v.features)};return{layers:new Set(c),listener:d,delegates:{[m]:_}}}}on(m,c,d){if(d===void 0)return super.on(m,c);if(Array.isArray(c)||(c=[c]),c){for(const v of c)if(!this._isValidId(v))return this}const _=this._createDelegatedListener(m,c,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(_);for(const v in _.delegates)this.on(v,_.delegates[v]);return this}once(m,c,d){if(d===void 0)return super.once(m,c);if(Array.isArray(c)||(c=[c]),c){for(const v of c)if(!this._isValidId(v))return this}const _=this._createDelegatedListener(m,c,d);for(const v in _.delegates)this.once(v,_.delegates[v]);return this}off(m,c,d){if(d===void 0)return super.off(m,c);c=new Set(Array.isArray(c)?c:[c]);for(const S of c)if(!this._isValidId(S))return this;const _=(S,E)=>{if(S.size!==E.size)return!1;for(const z of S)if(!E.has(z))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[m]:void 0;return v&&(S=>{for(let E=0;E<S.length;E++){const z=S[E];if(z.listener===d&&_(z.layers,c)){for(const k in z.delegates)this.off(k,z.delegates[k]);return S.splice(E,1),this}}})(v),this}queryRenderedFeatures(m,c){if(!this.style)return[];if(c!==void 0||m===void 0||m instanceof o.P||Array.isArray(m)||(c=m,m=void 0),m=m||[[0,0],[this.transform.width,this.transform.height]],(c=c||{}).layers&&Array.isArray(c.layers)){for(const d of c.layers)if(!this._isValidId(d))return[]}return this.style.queryRenderedFeatures(m,c,this.transform)}querySourceFeatures(m,c){return this._isValidId(m)?this.style.querySourceFeatures(m,c):[]}isPointOnSurface(m){const{name:c}=this.transform.projection;return c!=="globe"&&c!=="mercator"&&o.X(`${c} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.P.convert(m))}setStyle(m,c){return(c=o.ak({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(m,c))}_getUIString(m){const c=this._locale[m];if(c==null)throw new Error(`Missing UI string '${m}'`);return c}_updateStyle(m,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new wi(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new wi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,c){if(typeof m=="string"){const d=this._requestManager.normalizeStyleURL(m),_=this._requestManager.transformRequest(d,o.a2.Style);o.a1(_,(v,S)=>{v?this.fire(new o.a7(v)):S&&this._updateDiff(S,c)})}else typeof m=="object"&&this._updateDiff(m,c)}_updateDiff(m,c){try{this.style.setState(m)&&this._update(!0)}catch(d){o.X(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(m,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.X("There is no style added to the map."),!1)}_isValidId(m){return m==null?(this.fire(new o.a7(new Error("IDs can't be empty."))),!1):!o.cu(m)||(this.fire(new o.a7(new Error(`IDs can't contain special symbols: "${m}".`))),!1)}addSource(m,c){return this._isValidId(m)?(this._lazyInitEmptyStyle(),this.style.addSource(m,c),this._update(!0)):this}isSourceLoaded(m){return!!this._isValidId(m)&&!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(m,c,d){this._lazyInitEmptyStyle(),this.style.addSourceType(m,c,d)}removeSource(m){return this._isValidId(m)?(this.style.removeSource(m),this._updateTerrain(),this._update(!0)):this}getSource(m){return this._isValidId(m)?this.style.getOwnSource(m):null}addImage(m,c,{pixelRatio:d=1,sdf:_=!1,stretchX:v,stretchY:S,content:E}={}){if(this._lazyInitEmptyStyle(),c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap){const{width:z,height:k,data:N}=o.a4.getImageData(c);this.style.addImage(m,{data:new o.a5({width:z,height:k},N),pixelRatio:d,stretchX:v,stretchY:S,content:E,sdf:_,version:0})}else if(c.width===void 0||c.height===void 0)this.fire(new o.a7(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:z,height:k}=c,N=c;this.style.addImage(m,{data:new o.a5({width:z,height:k},new Uint8Array(N.data)),pixelRatio:d,stretchX:v,stretchY:S,content:E,sdf:_,version:0,userImage:N}),N.onAdd&&N.onAdd(this,m)}}updateImage(m,c){this._lazyInitEmptyStyle();const d=this.style.getImage(m);if(!d)return void this.fire(new o.a7(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap?o.a4.getImageData(c):c,{width:v,height:S}=_,E=_.data;if(v===void 0||S===void 0)return void this.fire(new o.a7(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==d.data.width||S!==d.data.height)return void this.fire(new o.a7(new Error(`The width and height of the updated image (${v}, ${S})
                must be that same as the previous version of the image
                (${d.data.width}, ${d.data.height})`)));const z=!(c instanceof HTMLImageElement||ImageBitmap&&c instanceof ImageBitmap);d.data.replace(E,z),this.style.updateImage(m,d)}hasImage(m){return m?!!this.style&&!!this.style.getImage(m):(this.fire(new o.a7(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,c){o.a3(this._requestManager.transformRequest(m,o.a2.Image),(d,_)=>{c(d,_ instanceof HTMLImageElement?o.a4.getImageData(_):_)})}listImages(){return this.style.listImages()}addModel(m,c){this._lazyInitEmptyStyle(),this.style.addModel(m,c)}hasModel(m){return m?this.style.hasModel(m):(this.fire(new o.a7(new Error("Missing required model id"))),!1)}removeModel(m){this.style.removeModel(m)}listModels(){return this.style.listModels()}addLayer(m,c){return this._isValidId(m.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(m,c),this._update(!0)):this}moveLayer(m,c){return this._isValidId(m)?(this.style.moveLayer(m,c),this._update(!0)):this}removeLayer(m){return this._isValidId(m)?(this.style.removeLayer(m),this._update(!0)):this}getLayer(m){return this._isValidId(m)?this.style.getOwnLayer(m):null}setLayerZoomRange(m,c,d){return this._isValidId(m)?(this.style.setLayerZoomRange(m,c,d),this._update(!0)):this}setFilter(m,c,d={}){return this._isValidId(m)?(this.style.setFilter(m,c,d),this._update(!0)):this}getFilter(m){return this._isValidId(m)?this.style.getFilter(m):null}setPaintProperty(m,c,d,_={}){return this._isValidId(m)?(this.style.setPaintProperty(m,c,d,_),this._update(!0)):this}getPaintProperty(m,c){return this._isValidId(m)?this.style.getPaintProperty(m,c):null}setLayoutProperty(m,c,d,_={}){return this._isValidId(m)?(this.style.setLayoutProperty(m,c,d,_),this._update(!0)):this}getLayoutProperty(m,c){return this._isValidId(m)?this.style.getLayoutProperty(m,c):null}getConfigProperty(m,c){return this.style.getConfigProperty(m,c)}setConfigProperty(m,c,d){return this.style.setConfigProperty(m,c,d),this._update(!0)}setLights(m){if(this._lazyInitEmptyStyle(),m&&m.length===1&&m[0].type==="flat"){const c=m[0];c.properties?this.style.setFlatLight(c.properties,c.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(m),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const m=this.style.getLights()||[];return m.length===0&&m.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),m}setLight(m,c={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:m}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setCamera(m){return this.style.setCamera(m),this._triggerCameraUpdate(m)}_triggerCameraUpdate(m){return this._update(this.transform.setOrthographicProjectionAtLowPitch(m["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.L.convert(m),this.transform):0}setFeatureState(m,c){return this._isValidId(m.source)?(this.style.setFeatureState(m,c),this._update()):this}removeFeatureState(m,c){return this._isValidId(m.source)?(this.style.removeFeatureState(m,c),this._update()):this}getFeatureState(m){return this._isValidId(m.source)?this.style.getFeatureState(m):null}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let d,_,v,S=this._container;for(;S&&(!_||!v);){const E=window.getComputedStyle(S).transform;E&&E!=="none"&&(d=E.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(_=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(v=d[3])),S=S.parentElement}this._containerWidth=_?Math.abs(m/_):m,this._containerHeight=v?Math.abs(c/v):c}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.X("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=j("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=j("div","mapboxgl-canvas-container",m);this._canvas=j("canvas","mapboxgl-canvas",c),this._interactive&&(c.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=j("div","mapboxgl-control-container",m),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{_[v]=j("div",`mapboxgl-ctrl-${v}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,c){const d=o.a4.devicePixelRatio||1;this._canvas.width=d*Math.ceil(m),this._canvas.height=d*Math.ceil(c),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${c}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const c=this._markers.indexOf(m);c!==-1&&this._markers.splice(c,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const c=this._popups.indexOf(m);c!==-1&&this._popups.splice(c,1)}_setupPainter(){const m=o.ak({},B.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._canvas.getContext("webgl2",m);c?(o.cT(c,!0),this.painter=new wy(c,this._contextCreateOptions,this.transform,this._tp),this.on("data",d=>{d.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.cU.testSupport(c)):this.fire(new o.a7(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.a8("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.a8("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let c;this.fire(new o.a8("renderstart"));const d=this.painter.context.extTimerQuery,_=o.a4.now(),v=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(c=v.createQuery(),v.beginQuery(d.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const S=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,N=this.transform.pitch,U=o.a4.now(),$=new o.al(k,{now:U,fadeDuration:S,pitch:N,transition:this.style.transition});this.style.update($)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(_),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):E=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,S,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries||this._debugParams.showTileBoundaries,wireframe:{terrain:this.showTerrainWireframe||this._debugParams.showTerrainWireframe,layers2D:this.showLayers2DWireframe||this._debugParams.showLayers2DWireframe,layers3D:this.showLayers3DWireframe||this._debugParams.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector||this._debugParams.showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.a8("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.a8("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const k=o.a4.now()-_;v.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const N=v.getQueryParameter(c,v.QUERY_RESULT)/1e6;v.deleteQuery(c),this.fire(new o.a8("gpu-timing-frame",{cpuTime:k,gpuTime:N}))},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const N=this.painter.queryGpuTimers(k);this.fire(new o.a8("gpu-timing-layer",{layerTimes:N}))},50)}if(this.listens("gpu-timing-deferred-render")){const k=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const N=this.painter.queryGpuTimeDeferredRender(k);this.fire(new o.a8("gpu-timing-deferred-render",{gpuTime:N}))},50)}const z=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(z||this._repaint)this.triggerRepaint();else{const k=!this.isMoving()&&this.loaded();if(k&&(E=this._updateAverageElevation(_,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),k&&(this.fire(new o.a8("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const N=this._calculateSpeedIndex();this.fire(new o.a8("speedindexcompleted",{speedIndex:N})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||z||(this._fullyLoaded=!0,this._performanceMetricsCollection&&o.cV(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const c of this._markers)m&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!m||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(m,c=!1){const d=v=>(this.transform.averageElevation=v,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const _=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(_||(c||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const v=this.transform.averageElevation;let S=this.transform.sampleAverageElevation();this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(S)?S=0:this._averageElevationLastSampledAt=m;const E=Math.abs(v-S);if(E>1){if(this._isInitialLoad||_)return this._averageElevation.jumpTo(S),d(S);this._averageElevation.easeTo(S,m,300)}else if(E>1e-4)return this._averageElevation.jumpTo(S),d(S)}return!!this._averageElevation.isEasing(m)&&d(this._averageElevation.getValue(m))}_authenticate(){o.cW(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===o.cX||m.status===401)){const c=this.painter.context.gl;o.cT(c,!1),this._logoControl instanceof Ch&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.a7(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.cY(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const d=this.painter.context.gl,_=d.createFramebuffer();function v(S){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,S,0);const E=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,E),E}return d.bindFramebuffer(d.FRAMEBUFFER,_),this._canvasPixelComparison(v(m),c.canvasCopies.map(v),c.timeStamps)}_canvasPixelComparison(m,c,d){let _=d[1]-d[0];const v=m.length/4;for(let S=0;S<c.length;S++){const E=c[S];let z=0;for(let k=0;k<E.length;k+=4)E[k]===m[k]&&E[k+1]===m[k+1]&&E[k+2]===m[k+2]&&E[k+3]===m[k+3]&&(z+=1);_+=(d[S+2]-d[S+1])*(1-z/v)}return _}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.cZ(this.painter.context.gl),this._removed=!0,this.fire(new o.a8("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=o.a4.frame(c=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(c)}))}_preloadTiles(m){const c=this.style?Object.values(this.style._sourceCaches):[];return o.c_(c,(d,_)=>d._preloadTiles(m,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(m){this._showLayers2DWireframe!==m&&(this._showLayers2DWireframe=m,this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(m){this._showLayers3DWireframe!==m&&(this._showLayers3DWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,c){o.d0(m,c)}get version(){return o.c$}},NavigationControl:class{constructor(m){this.options=o.ak({},My,m),this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(o.aR(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),j("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),j("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.aR(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:c}):d.resetNorth({},{originalEvent:c}))}),this._compassIcon=j("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const c=m.getZoom(),d=c===m.getMaxZoom(),_=c===m.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cc(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,c){const d=j("button",m,this._container);return d.type="button",d.addEventListener("click",c),d}_setButtonTitle(m,c){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${c}`);m.setAttribute("aria-label",d),m.firstElementChild&&m.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends o.a6{constructor(m){super();const c=navigator.geolocation;this.options=o.ak({geolocation:c},wo,m),o.aR(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ic(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const c=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,m(d)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>c(d.state!=="denied")).catch(()=>c()):c()}_isOutOfMapMaxBounds(m){const c=this._map.getMaxBounds(),d=m.coords;return!!c&&(d.longitude<c.getWest()||d.longitude>c.getEast()||d.latitude<c.getSouth()||d.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new o.a8("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new o.a8("geolocate",m)),this._finish()}}_updateCamera(m){const c=new o.L(m.coords.longitude,m.coords.latitude),d=m.coords.accuracy,_=this._map.getBearing(),v=o.ak({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(d),v,{geolocateSource:!0})}_updateMarker(m){if(m){const c=new o.L(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,c=o.b(1,m._center.lat)*m.worldSize,d=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new o.a8("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=j("button","mapboxgl-ctrl-geolocate",this._container),j("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){o.X("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j("div","mapboxgl-user-location"),this._dotElement.appendChild(j("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(j("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ir({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=j("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ir({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.a8("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.X("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.a8("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.a8("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.a8("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(c=>{c==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ah,ScaleControl:class{constructor(m){this.options=o.ak({},su,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.aR(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,c=this._map,d=c._containerHeight/2,_=c._containerWidth/2-m/2,v=c.unproject([_,d]),S=c.unproject([_+m,d]),E=v.distanceTo(S);if(this.options.unit==="imperial"){const z=3.2808*E;z>5280?this._setScale(m,z/5280,"mile"):this._setScale(m,z,"foot")}else this.options.unit==="nautical"?this._setScale(m,E/1852,"nautical-mile"):E>=1e3?this._setScale(m,E/1e3,"kilometer"):this._setScale(m,E,"meter")}_setScale(m,c,d){this._map._requestDomTask(()=>{const _=function(S){const E=Math.pow(10,`${Math.floor(S)}`.length-1);let z=S/E;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(k){const N=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*N)/N}(z),E*z}(c),v=_/c;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(_):`${_}&nbsp;${Gp[d]}`,this._container.style.width=m*v+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=j("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:o.X("Full screen control 'container' must be a DOM element.")),o.aR(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=j("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.X("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=j("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.a6{constructor(m){super(),this.options=o.ak(Object.create(zy),m),o.aR(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new o.a8("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new o.a8("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=o.L.convert(m),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const c=document.createDocumentFragment(),d=document.createElement("body");let _;for(d.innerHTML=m;_=d.firstChild,_;)c.appendChild(_);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=j("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(m),this.options.closeButton){const d=this._closeButton=j("button","mapboxgl-popup-close-button",c);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let c;return this._classList.delete(m)?c=!1:(this._classList.add(m),c=!0),this._updateClassList(),c}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const c=this._map,d=this._container,_=this._pos;if(!c||!d||!_)return"bottom";const v=d.offsetWidth,S=d.offsetHeight,E=_.x<v/2,z=_.x>c.transform.width-v/2;if(_.y+m<S)return E?"top-left":z?"top-right":"top";if(_.y>c.transform.height-S){if(E)return"bottom-left";if(z)return"bottom-right"}return E?"left":z?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),m.className=c.join(" ")}_update(m){const c=this._map,d=this._content;if(!c||!this._lngLat&&!this._trackPointer||!d)return;let _=this._container;if(_||(_=this._container=j("div","mapboxgl-popup",c.getContainer()),this._tip=j("div","mapboxgl-popup-tip",_),_.appendChild(d)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rh(this._lngLat,this._pos,c.transform)),!this._trackPointer||m){const v=this._pos=this._trackPointer&&m?m:c.project(this._lngLat),S=kh(this.options.offset),E=this._anchor=this._getAnchor(S.y),z=kh(this.options.offset,E),k=v.add(z).round();c._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${Vp[E]} translate(${k.x}px,${k.y}px)`)})}if(!this._marker&&c._showingGlobe()){const v=o.cN(c.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Eg);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Ir,Style:wi,LngLat:o.L,LngLatBounds:o.D,Point:o.P,MercatorCoordinate:o.M,FreeCameraOptions:Ua,Evented:o.a6,config:o.cM,prewarm:o.d3,clearPrewarmedResources:o.d4,get accessToken(){return o.cM.ACCESS_TOKEN},set accessToken(m){o.cM.ACCESS_TOKEN=m},get baseApiUrl(){return o.cM.API_URL},set baseApiUrl(m){o.cM.API_URL=m},get workerCount(){return o.d5.workerCount},set workerCount(m){o.d5.workerCount=m},get maxParallelImageRequests(){return o.cM.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){o.cM.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){o.d6(m)},get workerUrl(){return o.d7.workerUrl},set workerUrl(m){o.d7.workerUrl=m},get workerClass(){return o.d7.workerClass},set workerClass(m){o.d7.workerClass=m},get workerParams(){return o.d7.workerParams},set workerParams(m){o.d7.workerParams=m},get dracoUrl(){return o.d8()},set dracoUrl(m){o.d9(m)},setNow:o.a4.setNow,restoreNow:o.a4.restoreNow}});var I=g;return I})})(Zz);var dU=Zz.exports;const Ym=eh(dU);var Xz={exports:{}};(function(t,a){(function(s,l){t.exports=l()})(gf,function(){var s=function(C,G){var ue={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},Pe={on:function(Be,qe,Rt){if(ue[Be]===void 0)throw new Error("Invalid event type: "+Be);ue[Be].push({selector:qe,fn:Rt})},render:function(Be){G.store.featureChanged(Be)}},Ae=function(Be,qe){for(var Rt=ue[Be],kt=Rt.length;kt--;){var zt=Rt[kt];if(zt.selector(qe)){zt.fn.call(Pe,qe)||G.store.render(),G.ui.updateMapClasses();break}}};return C.start.call(Pe),{render:C.render,stop:function(){C.stop&&C.stop()},trash:function(){C.trash&&(C.trash(),G.store.render())},combineFeatures:function(){C.combineFeatures&&C.combineFeatures()},uncombineFeatures:function(){C.uncombineFeatures&&C.uncombineFeatures()},drag:function(Be){Ae("drag",Be)},click:function(Be){Ae("click",Be)},mousemove:function(Be){Ae("mousemove",Be)},mousedown:function(Be){Ae("mousedown",Be)},mouseup:function(Be){Ae("mouseup",Be)},mouseout:function(Be){Ae("mouseout",Be)},keydown:function(Be){Ae("keydown",Be)},keyup:function(Be){Ae("keyup",Be)},touchstart:function(Be){Ae("touchstart",Be)},touchmove:function(Be){Ae("touchmove",Be)},touchend:function(Be){Ae("touchend",Be)},tap:function(Be){Ae("tap",Be)}}};function l(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}function f(C){if(C.__esModule)return C;var G=C.default;if(typeof G=="function"){var ue=function Pe(){if(this instanceof Pe){var Ae=[null];Ae.push.apply(Ae,arguments);var Be=Function.bind.apply(G,Ae);return new Be}return G.apply(this,arguments)};ue.prototype=G.prototype}else ue={};return Object.defineProperty(ue,"__esModule",{value:!0}),Object.keys(C).forEach(function(Pe){var Ae=Object.getOwnPropertyDescriptor(C,Pe);Object.defineProperty(ue,Pe,Ae.get?Ae:{enumerable:!0,get:function(){return C[Pe]}})}),ue}var g={},w={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},I=w;function o(C){var G=0;if(C&&C.length>0){G+=Math.abs(M(C[0]));for(var ue=1;ue<C.length;ue++)G-=Math.abs(M(C[ue]))}return G}function M(C){var G,ue,Pe,Ae,Be,qe,Rt=0,kt=C.length;if(kt>2){for(qe=0;qe<kt;qe++)qe===kt-2?(Pe=kt-2,Ae=kt-1,Be=0):qe===kt-1?(Pe=kt-1,Ae=0,Be=1):(Pe=qe,Ae=qe+1,Be=qe+2),G=C[Pe],ue=C[Ae],Rt+=(B(C[Be][0])-B(G[0]))*Math.sin(B(ue[1]));Rt=Rt*I.RADIUS*I.RADIUS/2}return Rt}function B(C){return C*Math.PI/180}g.geometry=function C(G){var ue,Pe=0;switch(G.type){case"Polygon":return o(G.coordinates);case"MultiPolygon":for(ue=0;ue<G.coordinates.length;ue++)Pe+=o(G.coordinates[ue]);return Pe;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(ue=0;ue<G.geometries.length;ue++)Pe+=C(G.geometries[ue]);return Pe}},g.ring=M;var L={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},O={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},j={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},Z={POLYGON:"polygon",LINE:"line_string",POINT:"point"},H={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},te={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},J={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},K={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},W={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},ee={ACTIVE:"true",INACTIVE:"false"},me=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Se=-85,Me=Object.freeze({__proto__:null,classes:L,sources:O,cursors:j,types:Z,geojsonTypes:H,modes:te,events:J,updateActions:K,meta:W,activeStates:ee,interactions:me,LAT_MIN:-90,LAT_RENDERED_MIN:Se,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),Ie={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Ge(C,G){var ue=Ie[C.geometry.type]-Ie[G.geometry.type];return ue===0&&C.geometry.type===H.POLYGON?C.area-G.area:ue}function ge(C){return C.map(function(G){return G.geometry.type===H.POLYGON&&(G.area=g.geometry({type:H.FEATURE,property:{},geometry:G.geometry})),G}).sort(Ge).map(function(G){return delete G.area,G})}function Xe(C,G){return G===void 0&&(G=0),[[C.point.x-G,C.point.y-G],[C.point.x+G,C.point.y+G]]}function rt(C){if(this._items={},this._nums={},this._length=C?C.length:0,C)for(var G=0,ue=C.length;G<ue;G++)this.add(C[G]),C[G]!==void 0&&(typeof C[G]=="string"?this._items[C[G]]=G:this._nums[C[G]]=G)}rt.prototype.add=function(C){return this.has(C)||(this._length++,typeof C=="string"?this._items[C]=this._length:this._nums[C]=this._length),this},rt.prototype.delete=function(C){return this.has(C)===!1||(this._length--,delete this._items[C],delete this._nums[C]),this},rt.prototype.has=function(C){return(typeof C=="string"||typeof C=="number")&&(this._items[C]!==void 0||this._nums[C]!==void 0)},rt.prototype.values=function(){var C=this,G=[];return Object.keys(this._items).forEach(function(ue){G.push({k:ue,v:C._items[ue]})}),Object.keys(this._nums).forEach(function(ue){G.push({k:JSON.parse(ue),v:C._nums[ue]})}),G.sort(function(ue,Pe){return ue.v-Pe.v}).map(function(ue){return ue.k})},rt.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Ue=[W.FEATURE,W.MIDPOINT,W.VERTEX],Bt={click:function(C,G,ue){return un(C,G,ue,ue.options.clickBuffer)},touch:function(C,G,ue){return un(C,G,ue,ue.options.touchBuffer)}};function un(C,G,ue,Pe){if(ue.map===null)return[];var Ae=C?Xe(C,Pe):G,Be={};ue.options.styles&&(Be.layers=ue.options.styles.map(function(zt){return zt.id}).filter(function(zt){return ue.map.getLayer(zt)!=null}));var qe=ue.map.queryRenderedFeatures(Ae,Be).filter(function(zt){return Ue.indexOf(zt.properties.meta)!==-1}),Rt=new rt,kt=[];return qe.forEach(function(zt){var cn=zt.properties.id;Rt.has(cn)||(Rt.add(cn),kt.push(zt))}),ge(kt)}function Tn(C,G){var ue=Bt.click(C,null,G),Pe={mouse:j.NONE};return ue[0]&&(Pe.mouse=ue[0].properties.active===ee.ACTIVE?j.MOVE:j.POINTER,Pe.feature=ue[0].properties.meta),G.events.currentModeName().indexOf("draw")!==-1&&(Pe.mouse=j.ADD),G.ui.queueMapClasses(Pe),G.ui.updateMapClasses(),ue[0]}function ea(C,G){var ue=C.x-G.x,Pe=C.y-G.y;return Math.sqrt(ue*ue+Pe*Pe)}function St(C,G,ue){ue===void 0&&(ue={});var Pe=ue.fineTolerance!=null?ue.fineTolerance:4,Ae=ue.grossTolerance!=null?ue.grossTolerance:12,Be=ue.interval!=null?ue.interval:500;C.point=C.point||G.point,C.time=C.time||G.time;var qe=ea(C.point,G.point);return qe<Pe||qe<Ae&&G.time-C.time<Be}function ke(C,G,ue){ue===void 0&&(ue={});var Pe=ue.tolerance!=null?ue.tolerance:25,Ae=ue.interval!=null?ue.interval:250;return C.point=C.point||G.point,C.time=C.time||G.time,ea(C.point,G.point)<Pe&&G.time-C.time<Ae}var Ct={exports:{}},Et=Ct.exports=function(C,G){if(G||(G=16),C===void 0&&(C=128),C<=0)return"0";for(var ue=Math.log(Math.pow(2,C))/Math.log(G),Pe=2;ue===1/0;Pe*=2)ue=Math.log(Math.pow(2,C/Pe))/Math.log(G)*Pe;var Ae=ue-Math.floor(ue),Be="";for(Pe=0;Pe<Math.floor(ue);Pe++)Be=Math.floor(Math.random()*G).toString(G)+Be;if(Ae){var qe=Math.pow(G,Ae);Be=Math.floor(Math.random()*qe).toString(G)+Be}var Rt=parseInt(Be,G);return Rt!==1/0&&Rt>=Math.pow(2,C)?Et(C,G):Be};Et.rack=function(C,G,ue){var Pe=function(Be){var qe=0;do{if(qe++>10){if(!ue)throw new Error("too many ID collisions, use more bits");C+=ue}var Rt=Et(C,G)}while(Object.hasOwnProperty.call(Ae,Rt));return Ae[Rt]=Be,Rt},Ae=Pe.hats={};return Pe.get=function(Be){return Pe.hats[Be]},Pe.set=function(Be,qe){return Pe.hats[Be]=qe,Pe},Pe.bits=C||128,Pe.base=G||16,Pe};var Nt=l(Ct.exports),Sn=function(C,G){this.ctx=C,this.properties=G.properties||{},this.coordinates=G.geometry.coordinates,this.id=G.id||Nt(),this.type=G.geometry.type};Sn.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Sn.prototype.incomingCoords=function(C){this.setCoordinates(C)},Sn.prototype.setCoordinates=function(C){this.coordinates=C,this.changed()},Sn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Sn.prototype.setProperty=function(C,G){this.properties[C]=G},Sn.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:H.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Sn.prototype.internal=function(C){var G={id:this.id,meta:W.FEATURE,"meta:type":this.type,active:ee.INACTIVE,mode:C};if(this.ctx.options.userProperties)for(var ue in this.properties)G["user_"+ue]=this.properties[ue];return{type:H.FEATURE,properties:G,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Fn=function(C,G){Sn.call(this,C,G)};(Fn.prototype=Object.create(Sn.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Fn.prototype.updateCoordinate=function(C,G,ue){this.coordinates=arguments.length===3?[G,ue]:[C,G],this.changed()},Fn.prototype.getCoordinate=function(){return this.getCoordinates()};var nr=function(C,G){Sn.call(this,C,G)};(nr.prototype=Object.create(Sn.prototype)).isValid=function(){return this.coordinates.length>1},nr.prototype.addCoordinate=function(C,G,ue){this.changed();var Pe=parseInt(C,10);this.coordinates.splice(Pe,0,[G,ue])},nr.prototype.getCoordinate=function(C){var G=parseInt(C,10);return JSON.parse(JSON.stringify(this.coordinates[G]))},nr.prototype.removeCoordinate=function(C){this.changed(),this.coordinates.splice(parseInt(C,10),1)},nr.prototype.updateCoordinate=function(C,G,ue){var Pe=parseInt(C,10);this.coordinates[Pe]=[G,ue],this.changed()};var Zn=function(C,G){Sn.call(this,C,G),this.coordinates=this.coordinates.map(function(ue){return ue.slice(0,-1)})};(Zn.prototype=Object.create(Sn.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(C){return C.length>2})},Zn.prototype.incomingCoords=function(C){this.coordinates=C.map(function(G){return G.slice(0,-1)}),this.changed()},Zn.prototype.setCoordinates=function(C){this.coordinates=C,this.changed()},Zn.prototype.addCoordinate=function(C,G,ue){this.changed();var Pe=C.split(".").map(function(Ae){return parseInt(Ae,10)});this.coordinates[Pe[0]].splice(Pe[1],0,[G,ue])},Zn.prototype.removeCoordinate=function(C){this.changed();var G=C.split(".").map(function(Pe){return parseInt(Pe,10)}),ue=this.coordinates[G[0]];ue&&(ue.splice(G[1],1),ue.length<3&&this.coordinates.splice(G[0],1))},Zn.prototype.getCoordinate=function(C){var G=C.split(".").map(function(Pe){return parseInt(Pe,10)}),ue=this.coordinates[G[0]];return JSON.parse(JSON.stringify(ue[G[1]]))},Zn.prototype.getCoordinates=function(){return this.coordinates.map(function(C){return C.concat([C[0]])})},Zn.prototype.updateCoordinate=function(C,G,ue){this.changed();var Pe=C.split("."),Ae=parseInt(Pe[0],10),Be=parseInt(Pe[1],10);this.coordinates[Ae]===void 0&&(this.coordinates[Ae]=[]),this.coordinates[Ae][Be]=[G,ue]};var cr={MultiPoint:Fn,MultiLineString:nr,MultiPolygon:Zn},Vr=function(C,G,ue,Pe,Ae){var Be=ue.split("."),qe=parseInt(Be[0],10),Rt=Be[1]?Be.slice(1).join("."):null;return C[qe][G](Rt,Pe,Ae)},Ya=function(C,G){if(Sn.call(this,C,G),delete this.coordinates,this.model=cr[G.geometry.type],this.model===void 0)throw new TypeError(G.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(G.geometry.coordinates)};function jn(C){this.map=C.map,this.drawConfig=JSON.parse(JSON.stringify(C.options||{})),this._ctx=C}(Ya.prototype=Object.create(Sn.prototype))._coordinatesToFeatures=function(C){var G=this,ue=this.model.bind(this);return C.map(function(Pe){return new ue(G.ctx,{id:Nt(),type:H.FEATURE,properties:{},geometry:{coordinates:Pe,type:G.type.replace("Multi","")}})})},Ya.prototype.isValid=function(){return this.features.every(function(C){return C.isValid()})},Ya.prototype.setCoordinates=function(C){this.features=this._coordinatesToFeatures(C),this.changed()},Ya.prototype.getCoordinate=function(C){return Vr(this.features,"getCoordinate",C)},Ya.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(C){return C.type===H.POLYGON?C.getCoordinates():C.coordinates})))},Ya.prototype.updateCoordinate=function(C,G,ue){Vr(this.features,"updateCoordinate",C,G,ue),this.changed()},Ya.prototype.addCoordinate=function(C,G,ue){Vr(this.features,"addCoordinate",C,G,ue),this.changed()},Ya.prototype.removeCoordinate=function(C){Vr(this.features,"removeCoordinate",C),this.changed()},Ya.prototype.getFeatures=function(){return this.features},jn.prototype.setSelected=function(C){return this._ctx.store.setSelected(C)},jn.prototype.setSelectedCoordinates=function(C){var G=this;this._ctx.store.setSelectedCoordinates(C),C.reduce(function(ue,Pe){return ue[Pe.feature_id]===void 0&&(ue[Pe.feature_id]=!0,G._ctx.store.get(Pe.feature_id).changed()),ue},{})},jn.prototype.getSelected=function(){return this._ctx.store.getSelected()},jn.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},jn.prototype.isSelected=function(C){return this._ctx.store.isSelected(C)},jn.prototype.getFeature=function(C){return this._ctx.store.get(C)},jn.prototype.select=function(C){return this._ctx.store.select(C)},jn.prototype.deselect=function(C){return this._ctx.store.deselect(C)},jn.prototype.deleteFeature=function(C,G){return G===void 0&&(G={}),this._ctx.store.delete(C,G)},jn.prototype.addFeature=function(C){return this._ctx.store.add(C)},jn.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},jn.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},jn.prototype.setActionableState=function(C){C===void 0&&(C={});var G={trash:C.trash||!1,combineFeatures:C.combineFeatures||!1,uncombineFeatures:C.uncombineFeatures||!1};return this._ctx.events.actionable(G)},jn.prototype.changeMode=function(C,G,ue){return G===void 0&&(G={}),ue===void 0&&(ue={}),this._ctx.events.changeMode(C,G,ue)},jn.prototype.updateUIClasses=function(C){return this._ctx.ui.queueMapClasses(C)},jn.prototype.activateUIButton=function(C){return this._ctx.ui.setActiveButton(C)},jn.prototype.featuresAt=function(C,G,ue){if(ue===void 0&&(ue="click"),ue!=="click"&&ue!=="touch")throw new Error("invalid buffer type");return Bt[ue](C,G,this._ctx)},jn.prototype.newFeature=function(C){var G=C.geometry.type;return G===H.POINT?new Fn(this._ctx,C):G===H.LINE_STRING?new nr(this._ctx,C):G===H.POLYGON?new Zn(this._ctx,C):new Ya(this._ctx,C)},jn.prototype.isInstanceOf=function(C,G){if(C===H.POINT)return G instanceof Fn;if(C===H.LINE_STRING)return G instanceof nr;if(C===H.POLYGON)return G instanceof Zn;if(C==="MultiFeature")return G instanceof Ya;throw new Error("Unknown feature class: "+C)},jn.prototype.doRender=function(C){return this._ctx.store.featureChanged(C)},jn.prototype.onSetup=function(){},jn.prototype.onDrag=function(){},jn.prototype.onClick=function(){},jn.prototype.onMouseMove=function(){},jn.prototype.onMouseDown=function(){},jn.prototype.onMouseUp=function(){},jn.prototype.onMouseOut=function(){},jn.prototype.onKeyUp=function(){},jn.prototype.onKeyDown=function(){},jn.prototype.onTouchStart=function(){},jn.prototype.onTouchMove=function(){},jn.prototype.onTouchEnd=function(){},jn.prototype.onTap=function(){},jn.prototype.onStop=function(){},jn.prototype.onTrash=function(){},jn.prototype.onCombineFeature=function(){},jn.prototype.onUncombineFeature=function(){},jn.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var As={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},vr=Object.keys(As);function sn(C){var G=Object.keys(C);return function(ue,Pe){Pe===void 0&&(Pe={});var Ae={},Be=G.reduce(function(qe,Rt){return qe[Rt]=C[Rt],qe},new jn(ue));return{start:function(){var qe=this;Ae=Be.onSetup(Pe),vr.forEach(function(Rt){var kt,zt=As[Rt],cn=function(){return!1};C[zt]&&(cn=function(){return!0}),qe.on(Rt,cn,(kt=zt,function(Gt){return Be[kt](Ae,Gt)}))})},stop:function(){Be.onStop(Ae)},trash:function(){Be.onTrash(Ae)},combineFeatures:function(){Be.onCombineFeatures(Ae)},uncombineFeatures:function(){Be.onUncombineFeatures(Ae)},render:function(qe,Rt){Be.toDisplayFeatures(Ae,qe,Rt)}}}}function kn(C){return[].concat(C).filter(function(G){return G!==void 0})}function an(){var C=this;if(!(C.ctx.map&&C.ctx.map.getSource(O.HOT)!==void 0))return kt();var G=C.ctx.events.currentModeName();C.ctx.ui.queueMapClasses({mode:G});var ue=[],Pe=[];C.isDirty?Pe=C.getAllIds():(ue=C.getChangedIds().filter(function(zt){return C.get(zt)!==void 0}),Pe=C.sources.hot.filter(function(zt){return zt.properties.id&&ue.indexOf(zt.properties.id)===-1&&C.get(zt.properties.id)!==void 0}).map(function(zt){return zt.properties.id})),C.sources.hot=[];var Ae=C.sources.cold.length;C.sources.cold=C.isDirty?[]:C.sources.cold.filter(function(zt){var cn=zt.properties.id||zt.properties.parent;return ue.indexOf(cn)===-1});var Be=Ae!==C.sources.cold.length||Pe.length>0;function qe(zt,cn){var Gt=C.get(zt).internal(G);C.ctx.events.currentModeRender(Gt,function(Vn){C.sources[cn].push(Vn)})}if(ue.forEach(function(zt){return qe(zt,"hot")}),Pe.forEach(function(zt){return qe(zt,"cold")}),Be&&C.ctx.map.getSource(O.COLD).setData({type:H.FEATURE_COLLECTION,features:C.sources.cold}),C.ctx.map.getSource(O.HOT).setData({type:H.FEATURE_COLLECTION,features:C.sources.hot}),C._emitSelectionChange&&(C.ctx.map.fire(J.SELECTION_CHANGE,{features:C.getSelected().map(function(zt){return zt.toGeoJSON()}),points:C.getSelectedCoordinates().map(function(zt){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:zt.coordinates}}})}),C._emitSelectionChange=!1),C._deletedFeaturesToEmit.length){var Rt=C._deletedFeaturesToEmit.map(function(zt){return zt.toGeoJSON()});C._deletedFeaturesToEmit=[],C.ctx.map.fire(J.DELETE,{features:Rt})}function kt(){C.isDirty=!1,C.clearChangedIds()}kt(),C.ctx.map.fire(J.RENDER,{})}function Yt(C){var G,ue=this;this._features={},this._featureIds=new rt,this._selectedFeatureIds=new rt,this._selectedCoordinates=[],this._changedFeatureIds=new rt,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=C,this.sources={hot:[],cold:[]},this.render=function(){G||(G=requestAnimationFrame(function(){G=null,an.call(ue)}))},this.isDirty=!1}function it(C,G){var ue=C._selectedCoordinates.filter(function(Pe){return C._selectedFeatureIds.has(Pe.feature_id)});C._selectedCoordinates.length===ue.length||G.silent||(C._emitSelectionChange=!0),C._selectedCoordinates=ue}Yt.prototype.createRenderBatch=function(){var C=this,G=this.render,ue=0;return this.render=function(){ue++},function(){C.render=G,ue>0&&C.render()}},Yt.prototype.setDirty=function(){return this.isDirty=!0,this},Yt.prototype.featureChanged=function(C){return this._changedFeatureIds.add(C),this},Yt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Yt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Yt.prototype.getAllIds=function(){return this._featureIds.values()},Yt.prototype.add=function(C){return this.featureChanged(C.id),this._features[C.id]=C,this._featureIds.add(C.id),this},Yt.prototype.delete=function(C,G){var ue=this;return G===void 0&&(G={}),kn(C).forEach(function(Pe){ue._featureIds.has(Pe)&&(ue._featureIds.delete(Pe),ue._selectedFeatureIds.delete(Pe),G.silent||ue._deletedFeaturesToEmit.indexOf(ue._features[Pe])===-1&&ue._deletedFeaturesToEmit.push(ue._features[Pe]),delete ue._features[Pe],ue.isDirty=!0)}),it(this,G),this},Yt.prototype.get=function(C){return this._features[C]},Yt.prototype.getAll=function(){var C=this;return Object.keys(this._features).map(function(G){return C._features[G]})},Yt.prototype.select=function(C,G){var ue=this;return G===void 0&&(G={}),kn(C).forEach(function(Pe){ue._selectedFeatureIds.has(Pe)||(ue._selectedFeatureIds.add(Pe),ue._changedFeatureIds.add(Pe),G.silent||(ue._emitSelectionChange=!0))}),this},Yt.prototype.deselect=function(C,G){var ue=this;return G===void 0&&(G={}),kn(C).forEach(function(Pe){ue._selectedFeatureIds.has(Pe)&&(ue._selectedFeatureIds.delete(Pe),ue._changedFeatureIds.add(Pe),G.silent||(ue._emitSelectionChange=!0))}),it(this,G),this},Yt.prototype.clearSelected=function(C){return C===void 0&&(C={}),this.deselect(this._selectedFeatureIds.values(),{silent:C.silent}),this},Yt.prototype.setSelected=function(C,G){var ue=this;return G===void 0&&(G={}),C=kn(C),this.deselect(this._selectedFeatureIds.values().filter(function(Pe){return C.indexOf(Pe)===-1}),{silent:G.silent}),this.select(C.filter(function(Pe){return!ue._selectedFeatureIds.has(Pe)}),{silent:G.silent}),this},Yt.prototype.setSelectedCoordinates=function(C){return this._selectedCoordinates=C,this._emitSelectionChange=!0,this},Yt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Yt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Yt.prototype.getSelected=function(){var C=this;return this._selectedFeatureIds.values().map(function(G){return C.get(G)})},Yt.prototype.getSelectedCoordinates=function(){var C=this;return this._selectedCoordinates.map(function(G){return{coordinates:C.get(G.feature_id).getCoordinate(G.coord_path)}})},Yt.prototype.isSelected=function(C){return this._selectedFeatureIds.has(C)},Yt.prototype.setFeatureProperty=function(C,G,ue){this.get(C).setProperty(G,ue),this.featureChanged(C)},Yt.prototype.storeMapConfig=function(){var C=this;me.forEach(function(G){C.ctx.map[G]&&(C._mapInitialConfig[G]=C.ctx.map[G].isEnabled())})},Yt.prototype.restoreMapConfig=function(){var C=this;Object.keys(this._mapInitialConfig).forEach(function(G){C._mapInitialConfig[G]?C.ctx.map[G].enable():C.ctx.map[G].disable()})},Yt.prototype.getInitialConfigValue=function(C){return this._mapInitialConfig[C]===void 0||this._mapInitialConfig[C]};var fe=function(){for(var C=arguments,G={},ue=0;ue<arguments.length;ue++){var Pe=C[ue];for(var Ae in Pe)ve.call(Pe,Ae)&&(G[Ae]=Pe[Ae])}return G},ve=Object.prototype.hasOwnProperty,Re=l(fe),dt=["mode","feature","mouse"];function ut(C){var G=null,ue=null,Pe={onRemove:function(){return C.map.off("load",Pe.connect),clearInterval(ue),Pe.removeLayers(),C.store.restoreMapConfig(),C.ui.removeButtons(),C.events.removeEventListeners(),C.ui.clearMapClasses(),C.boxZoomInitial&&C.map.boxZoom.enable(),C.map=null,C.container=null,C.store=null,G&&G.parentNode&&G.parentNode.removeChild(G),G=null,this},connect:function(){C.map.off("load",Pe.connect),clearInterval(ue),Pe.addLayers(),C.store.storeMapConfig(),C.events.addEventListeners()},onAdd:function(Ae){var Be=Ae.fire;return Ae.fire=function(qe,Rt){var kt=arguments;return Be.length===1&&arguments.length!==1&&(kt=[Re({},{type:qe},Rt)]),Be.apply(Ae,kt)},C.map=Ae,C.events=function(qe){var Rt=Object.keys(qe.options.modes).reduce(function(xt,yn){return xt[yn]=sn(qe.options.modes[yn]),xt},{}),kt={},zt={},cn={},Gt=null,Vn=null;cn.drag=function(xt,yn){yn({point:xt.point,time:new Date().getTime()})?(qe.ui.queueMapClasses({mouse:j.DRAG}),Vn.drag(xt)):xt.originalEvent.stopPropagation()},cn.mousedrag=function(xt){cn.drag(xt,function(yn){return!St(kt,yn)})},cn.touchdrag=function(xt){cn.drag(xt,function(yn){return!ke(zt,yn)})},cn.mousemove=function(xt){if((xt.originalEvent.buttons!==void 0?xt.originalEvent.buttons:xt.originalEvent.which)===1)return cn.mousedrag(xt);var yn=Tn(xt,qe);xt.featureTarget=yn,Vn.mousemove(xt)},cn.mousedown=function(xt){kt={time:new Date().getTime(),point:xt.point};var yn=Tn(xt,qe);xt.featureTarget=yn,Vn.mousedown(xt)},cn.mouseup=function(xt){var yn=Tn(xt,qe);xt.featureTarget=yn,St(kt,{point:xt.point,time:new Date().getTime()})?Vn.click(xt):Vn.mouseup(xt)},cn.mouseout=function(xt){Vn.mouseout(xt)},cn.touchstart=function(xt){if(qe.options.touchEnabled){zt={time:new Date().getTime(),point:xt.point};var yn=Bt.touch(xt,null,qe)[0];xt.featureTarget=yn,Vn.touchstart(xt)}},cn.touchmove=function(xt){if(qe.options.touchEnabled)return Vn.touchmove(xt),cn.touchdrag(xt)},cn.touchend=function(xt){if(xt.originalEvent.preventDefault(),qe.options.touchEnabled){var yn=Bt.touch(xt,null,qe)[0];xt.featureTarget=yn,ke(zt,{time:new Date().getTime(),point:xt.point})?Vn.tap(xt):Vn.touchend(xt)}};var Ca=function(xt){return!(xt===8||xt===46||xt>=48&&xt<=57)};function qn(xt,yn,ya){ya===void 0&&(ya={}),Vn.stop();var wr=Rt[xt];if(wr===void 0)throw new Error(xt+" is not valid");Gt=xt;var ha=wr(qe,yn);Vn=s(ha,qe),ya.silent||qe.map.fire(J.MODE_CHANGE,{mode:xt}),qe.store.setDirty(),qe.store.render()}cn.keydown=function(xt){(xt.srcElement||xt.target).classList.contains("mapboxgl-canvas")&&(xt.keyCode!==8&&xt.keyCode!==46||!qe.options.controls.trash?Ca(xt.keyCode)?Vn.keydown(xt):xt.keyCode===49&&qe.options.controls.point?qn(te.DRAW_POINT):xt.keyCode===50&&qe.options.controls.line_string?qn(te.DRAW_LINE_STRING):xt.keyCode===51&&qe.options.controls.polygon&&qn(te.DRAW_POLYGON):(xt.preventDefault(),Vn.trash()))},cn.keyup=function(xt){Ca(xt.keyCode)&&Vn.keyup(xt)},cn.zoomend=function(){qe.store.changeZoom()},cn.data=function(xt){if(xt.dataType==="style"){var yn=qe.setup,ya=qe.map,wr=qe.options,ha=qe.store;wr.styles.some(function(wa){return ya.getLayer(wa.id)})||(yn.addLayers(),ha.setDirty(),ha.render())}};var Ja={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Gt=qe.options.defaultMode,Vn=s(Rt[Gt](qe),qe)},changeMode:qn,actionable:function(xt){var yn=!1;Object.keys(xt).forEach(function(ya){if(Ja[ya]===void 0)throw new Error("Invalid action type");Ja[ya]!==xt[ya]&&(yn=!0),Ja[ya]=xt[ya]}),yn&&qe.map.fire(J.ACTIONABLE,{actions:Ja})},currentModeName:function(){return Gt},currentModeRender:function(xt,yn){return Vn.render(xt,yn)},fire:function(xt,yn){cn[xt]&&cn[xt](yn)},addEventListeners:function(){qe.map.on("mousemove",cn.mousemove),qe.map.on("mousedown",cn.mousedown),qe.map.on("mouseup",cn.mouseup),qe.map.on("data",cn.data),qe.map.on("touchmove",cn.touchmove),qe.map.on("touchstart",cn.touchstart),qe.map.on("touchend",cn.touchend),qe.container.addEventListener("mouseout",cn.mouseout),qe.options.keybindings&&(qe.container.addEventListener("keydown",cn.keydown),qe.container.addEventListener("keyup",cn.keyup))},removeEventListeners:function(){qe.map.off("mousemove",cn.mousemove),qe.map.off("mousedown",cn.mousedown),qe.map.off("mouseup",cn.mouseup),qe.map.off("data",cn.data),qe.map.off("touchmove",cn.touchmove),qe.map.off("touchstart",cn.touchstart),qe.map.off("touchend",cn.touchend),qe.container.removeEventListener("mouseout",cn.mouseout),qe.options.keybindings&&(qe.container.removeEventListener("keydown",cn.keydown),qe.container.removeEventListener("keyup",cn.keyup))},trash:function(xt){Vn.trash(xt)},combineFeatures:function(){Vn.combineFeatures()},uncombineFeatures:function(){Vn.uncombineFeatures()},getMode:function(){return Gt}}}(C),C.ui=function(qe){var Rt={},kt=null,zt={mode:null,feature:null,mouse:null},cn={mode:null,feature:null,mouse:null};function Gt(xt){cn=Re(cn,xt)}function Vn(){var xt,yn;if(qe.container){var ya=[],wr=[];dt.forEach(function(ha){cn[ha]!==zt[ha]&&(ya.push(ha+"-"+zt[ha]),cn[ha]!==null&&wr.push(ha+"-"+cn[ha]))}),ya.length>0&&(xt=qe.container.classList).remove.apply(xt,ya),wr.length>0&&(yn=qe.container.classList).add.apply(yn,wr),zt=Re(zt,cn)}}function Ca(xt,yn){yn===void 0&&(yn={});var ya=document.createElement("button");return ya.className=L.CONTROL_BUTTON+" "+yn.className,ya.setAttribute("title",yn.title),yn.container.appendChild(ya),ya.addEventListener("click",function(wr){if(wr.preventDefault(),wr.stopPropagation(),wr.target===kt)return qn(),void yn.onDeactivate();Ja(xt),yn.onActivate()},!0),ya}function qn(){kt&&(kt.classList.remove(L.ACTIVE_BUTTON),kt=null)}function Ja(xt){qn();var yn=Rt[xt];yn&&yn&&xt!=="trash"&&(yn.classList.add(L.ACTIVE_BUTTON),kt=yn)}return{setActiveButton:Ja,queueMapClasses:Gt,updateMapClasses:Vn,clearMapClasses:function(){Gt({mode:null,feature:null,mouse:null}),Vn()},addButtons:function(){var xt=qe.options.controls,yn=document.createElement("div");return yn.className=L.CONTROL_GROUP+" "+L.CONTROL_BASE,xt&&(xt[Z.LINE]&&(Rt[Z.LINE]=Ca(Z.LINE,{container:yn,className:L.CONTROL_BUTTON_LINE,title:"LineString tool "+(qe.options.keybindings?"(l)":""),onActivate:function(){return qe.events.changeMode(te.DRAW_LINE_STRING)},onDeactivate:function(){return qe.events.trash()}})),xt[Z.POLYGON]&&(Rt[Z.POLYGON]=Ca(Z.POLYGON,{container:yn,className:L.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(qe.options.keybindings?"(p)":""),onActivate:function(){return qe.events.changeMode(te.DRAW_POLYGON)},onDeactivate:function(){return qe.events.trash()}})),xt[Z.POINT]&&(Rt[Z.POINT]=Ca(Z.POINT,{container:yn,className:L.CONTROL_BUTTON_POINT,title:"Marker tool "+(qe.options.keybindings?"(m)":""),onActivate:function(){return qe.events.changeMode(te.DRAW_POINT)},onDeactivate:function(){return qe.events.trash()}})),xt.trash&&(Rt.trash=Ca("trash",{container:yn,className:L.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){qe.events.trash()}})),xt.combine_features&&(Rt.combine_features=Ca("combineFeatures",{container:yn,className:L.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){qe.events.combineFeatures()}})),xt.uncombine_features&&(Rt.uncombine_features=Ca("uncombineFeatures",{container:yn,className:L.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){qe.events.uncombineFeatures()}}))),yn},removeButtons:function(){Object.keys(Rt).forEach(function(xt){var yn=Rt[xt];yn.parentNode&&yn.parentNode.removeChild(yn),delete Rt[xt]})}}}(C),C.container=Ae.getContainer(),C.store=new Yt(C),G=C.ui.addButtons(),C.options.boxSelect&&(C.boxZoomInitial=Ae.boxZoom.isEnabled(),Ae.boxZoom.disable(),Ae.dragPan.disable(),Ae.dragPan.enable()),Ae.loaded()?Pe.connect():(Ae.on("load",Pe.connect),ue=setInterval(function(){Ae.loaded()&&Pe.connect()},16)),C.events.start(),G},addLayers:function(){C.map.addSource(O.COLD,{data:{type:H.FEATURE_COLLECTION,features:[]},type:"geojson"}),C.map.addSource(O.HOT,{data:{type:H.FEATURE_COLLECTION,features:[]},type:"geojson"}),C.options.styles.forEach(function(Ae){C.map.addLayer(Ae)}),C.store.setDirty(!0),C.store.render()},removeLayers:function(){C.options.styles.forEach(function(Ae){C.map.getLayer(Ae.id)&&C.map.removeLayer(Ae.id)}),C.map.getSource(O.COLD)&&C.map.removeSource(O.COLD),C.map.getSource(O.HOT)&&C.map.removeSource(O.HOT)}};return C.setup=Pe,Pe}var Ft=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Ut(C){return function(G){var ue=G.featureTarget;return!!ue&&!!ue.properties&&ue.properties.meta===C}}function pt(C){return!!C.originalEvent&&!!C.originalEvent.shiftKey&&C.originalEvent.button===0}function nn(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.active===ee.ACTIVE&&C.featureTarget.properties.meta===W.FEATURE}function gn(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.active===ee.INACTIVE&&C.featureTarget.properties.meta===W.FEATURE}function bn(C){return C.featureTarget===void 0}function aa(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.meta===W.FEATURE}function la(C){var G=C.featureTarget;return!!G&&!!G.properties&&G.properties.meta===W.VERTEX}function La(C){return!!C.originalEvent&&C.originalEvent.shiftKey===!0}function ra(C){return C.keyCode===27}function fa(C){return C.keyCode===13}var ca=Object.freeze({__proto__:null,isOfMetaType:Ut,isShiftMousedown:pt,isActiveFeature:nn,isInactiveFeature:gn,noTarget:bn,isFeature:aa,isVertex:la,isShiftDown:La,isEscapeKey:ra,isEnterKey:fa,isTrue:function(){return!0}}),mr=Ua;function Ua(C,G){this.x=C,this.y=G}Ua.prototype={clone:function(){return new Ua(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,G){return this.clone()._rotateAround(C,G)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var G=C.x-this.x,ue=C.y-this.y;return G*G+ue*ue},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,G){return Math.atan2(this.x*G-this.y*C,this.x*C+this.y*G)},_matMult:function(C){var G=C[0]*this.x+C[1]*this.y,ue=C[2]*this.x+C[3]*this.y;return this.x=G,this.y=ue,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var G=Math.cos(C),ue=Math.sin(C),Pe=G*this.x-ue*this.y,Ae=ue*this.x+G*this.y;return this.x=Pe,this.y=Ae,this},_rotateAround:function(C,G){var ue=Math.cos(C),Pe=Math.sin(C),Ae=G.x+ue*(this.x-G.x)-Pe*(this.y-G.y),Be=G.y+Pe*(this.x-G.x)+ue*(this.y-G.y);return this.x=Ae,this.y=Be,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ua.convert=function(C){return C instanceof Ua?C:Array.isArray(C)?new Ua(C[0],C[1]):C};var Xr=l(mr);function xr(C,G){var ue=G.getBoundingClientRect();return new Xr(C.clientX-ue.left-(G.clientLeft||0),C.clientY-ue.top-(G.clientTop||0))}function kr(C,G,ue,Pe){return{type:H.FEATURE,properties:{meta:W.VERTEX,parent:C,coord_path:ue,active:Pe?ee.ACTIVE:ee.INACTIVE},geometry:{type:H.POINT,coordinates:G}}}function It(C,G,ue){var Pe=G.geometry.coordinates,Ae=ue.geometry.coordinates;if(Pe[1]>85||Pe[1]<Se||Ae[1]>85||Ae[1]<Se)return null;var Be={lng:(Pe[0]+Ae[0])/2,lat:(Pe[1]+Ae[1])/2};return{type:H.FEATURE,properties:{meta:W.MIDPOINT,parent:C,lng:Be.lng,lat:Be.lat,coord_path:ue.properties.coord_path},geometry:{type:H.POINT,coordinates:[Be.lng,Be.lat]}}}function _n(C,G,ue){G===void 0&&(G={}),ue===void 0&&(ue=null);var Pe,Ae=C.geometry,Be=Ae.type,qe=Ae.coordinates,Rt=C.properties&&C.properties.id,kt=[];function zt(Gt,Vn){var Ca="",qn=null;Gt.forEach(function(Ja,xt){var yn=Vn!=null?Vn+"."+xt:String(xt),ya=kr(Rt,Ja,yn,cn(yn));if(G.midpoints&&qn){var wr=It(Rt,qn,ya);wr&&kt.push(wr)}qn=ya;var ha=JSON.stringify(Ja);Ca!==ha&&kt.push(ya),xt===0&&(Ca=ha)})}function cn(Gt){return!!G.selectedPaths&&G.selectedPaths.indexOf(Gt)!==-1}return Be===H.POINT?kt.push(kr(Rt,qe,ue,cn(ue))):Be===H.POLYGON?qe.forEach(function(Gt,Vn){zt(Gt,ue!==null?ue+"."+Vn:String(Vn))}):Be===H.LINE_STRING?zt(qe,ue):Be.indexOf(H.MULTI_PREFIX)===0&&(Pe=Be.replace(H.MULTI_PREFIX,""),qe.forEach(function(Gt,Vn){var Ca={type:H.FEATURE,properties:C.properties,geometry:{type:Pe,coordinates:Gt}};kt=kt.concat(_n(Ca,G,Vn))})),kt}var Ln={enable:function(C){setTimeout(function(){C.map&&C.map.doubleClickZoom&&C._ctx&&C._ctx.store&&C._ctx.store.getInitialConfigValue&&C._ctx.store.getInitialConfigValue("doubleClickZoom")&&C.map.doubleClickZoom.enable()},0)},disable:function(C){setTimeout(function(){C.map&&C.map.doubleClickZoom&&C.map.doubleClickZoom.disable()},0)}},Pn={exports:{}},Ye=function(C){if(!C||!C.type)return null;var G=Ke[C.type];if(!G)return null;if(G==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:C}]};if(G==="feature")return{type:"FeatureCollection",features:[C]};if(G==="featurecollection")return C},Ke={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},ft=l(Ye),yt=Object.freeze({__proto__:null,default:function C(G){switch(G&&G.type||null){case"FeatureCollection":return G.features=G.features.reduce(function(ue,Pe){return ue.concat(C(Pe))},[]),G;case"Feature":return G.geometry?C(G.geometry).map(function(ue){var Pe={type:"Feature",properties:JSON.parse(JSON.stringify(G.properties)),geometry:ue};return G.id!==void 0&&(Pe.id=G.id),Pe}):[G];case"MultiPoint":return G.coordinates.map(function(ue){return{type:"Point",coordinates:ue}});case"MultiPolygon":return G.coordinates.map(function(ue){return{type:"Polygon",coordinates:ue}});case"MultiLineString":return G.coordinates.map(function(ue){return{type:"LineString",coordinates:ue}});case"GeometryCollection":return G.geometries.map(C).reduce(function(ue,Pe){return ue.concat(Pe)},[]);case"Point":case"Polygon":case"LineString":return[G]}}}),Tt=Ye,Mt=f(yt),Ot=function(C){return function G(ue){return Array.isArray(ue)&&ue.length&&typeof ue[0]=="number"?[ue]:ue.reduce(function(Pe,Ae){return Array.isArray(Ae)&&Array.isArray(Ae[0])?Pe.concat(G(Ae)):(Pe.push(Ae),Pe)},[])}(C)};Mt instanceof Function||(Mt=Mt.default);var Pt={exports:{}},Zt=Pt.exports=function(C){return new gt(C)};function gt(C){this.value=C}function In(C,G,ue){var Pe=[],Ae=[],Be=!0;return function qe(Rt){var kt=ue?na(Rt):Rt,zt={},cn=!0,Gt={node:kt,node_:Rt,path:[].concat(Pe),parent:Ae[Ae.length-1],parents:Ae,key:Pe.slice(-1)[0],isRoot:Pe.length===0,level:Pe.length,circular:null,update:function(qn,Ja){Gt.isRoot||(Gt.parent.node[Gt.key]=qn),Gt.node=qn,Ja&&(cn=!1)},delete:function(qn){delete Gt.parent.node[Gt.key],qn&&(cn=!1)},remove:function(qn){Da(Gt.parent.node)?Gt.parent.node.splice(Gt.key,1):delete Gt.parent.node[Gt.key],qn&&(cn=!1)},keys:null,before:function(qn){zt.before=qn},after:function(qn){zt.after=qn},pre:function(qn){zt.pre=qn},post:function(qn){zt.post=qn},stop:function(){Be=!1},block:function(){cn=!1}};if(!Be)return Gt;function Vn(){if(typeof Gt.node=="object"&&Gt.node!==null){Gt.keys&&Gt.node_===Gt.node||(Gt.keys=on(Gt.node)),Gt.isLeaf=Gt.keys.length==0;for(var qn=0;qn<Ae.length;qn++)if(Ae[qn].node_===Rt){Gt.circular=Ae[qn];break}}else Gt.isLeaf=!0,Gt.keys=null;Gt.notLeaf=!Gt.isLeaf,Gt.notRoot=!Gt.isRoot}Vn();var Ca=G.call(Gt,Gt.node);return Ca!==void 0&&Gt.update&&Gt.update(Ca),zt.before&&zt.before.call(Gt,Gt.node),cn&&(typeof Gt.node!="object"||Gt.node===null||Gt.circular||(Ae.push(Gt),Vn(),ka(Gt.keys,function(qn,Ja){Pe.push(qn),zt.pre&&zt.pre.call(Gt,Gt.node[qn],qn);var xt=qe(Gt.node[qn]);ue&&Va.call(Gt.node,qn)&&(Gt.node[qn]=xt.node),xt.isLast=Ja==Gt.keys.length-1,xt.isFirst=Ja==0,zt.post&&zt.post.call(Gt,xt),Pe.pop()}),Ae.pop()),zt.after&&zt.after.call(Gt,Gt.node)),Gt}(C).node}function na(C){if(typeof C=="object"&&C!==null){var G;if(Da(C))G=[];else if(Kn(C)==="[object Date]")G=new Date(C.getTime?C.getTime():C);else if(function(Ae){return Kn(Ae)==="[object RegExp]"}(C))G=new RegExp(C);else if(function(Ae){return Kn(Ae)==="[object Error]"}(C))G={message:C.message};else if(function(Ae){return Kn(Ae)==="[object Boolean]"}(C))G=new Boolean(C);else if(function(Ae){return Kn(Ae)==="[object Number]"}(C))G=new Number(C);else if(function(Ae){return Kn(Ae)==="[object String]"}(C))G=new String(C);else if(Object.create&&Object.getPrototypeOf)G=Object.create(Object.getPrototypeOf(C));else if(C.constructor===Object)G={};else{var ue=C.constructor&&C.constructor.prototype||C.__proto__||{},Pe=function(){};Pe.prototype=ue,G=new Pe}return ka(on(C),function(Ae){G[Ae]=C[Ae]}),G}return C}gt.prototype.get=function(C){for(var G=this.value,ue=0;ue<C.length;ue++){var Pe=C[ue];if(!G||!Va.call(G,Pe)){G=void 0;break}G=G[Pe]}return G},gt.prototype.has=function(C){for(var G=this.value,ue=0;ue<C.length;ue++){var Pe=C[ue];if(!G||!Va.call(G,Pe))return!1;G=G[Pe]}return!0},gt.prototype.set=function(C,G){for(var ue=this.value,Pe=0;Pe<C.length-1;Pe++){var Ae=C[Pe];Va.call(ue,Ae)||(ue[Ae]={}),ue=ue[Ae]}return ue[C[Pe]]=G,G},gt.prototype.map=function(C){return In(this.value,C,!0)},gt.prototype.forEach=function(C){return this.value=In(this.value,C,!1),this.value},gt.prototype.reduce=function(C,G){var ue=arguments.length===1,Pe=ue?this.value:G;return this.forEach(function(Ae){this.isRoot&&ue||(Pe=C.call(this,Pe,Ae))}),Pe},gt.prototype.paths=function(){var C=[];return this.forEach(function(G){C.push(this.path)}),C},gt.prototype.nodes=function(){var C=[];return this.forEach(function(G){C.push(this.node)}),C},gt.prototype.clone=function(){var C=[],G=[];return function ue(Pe){for(var Ae=0;Ae<C.length;Ae++)if(C[Ae]===Pe)return G[Ae];if(typeof Pe=="object"&&Pe!==null){var Be=na(Pe);return C.push(Pe),G.push(Be),ka(on(Pe),function(qe){Be[qe]=ue(Pe[qe])}),C.pop(),G.pop(),Be}return Pe}(this.value)};var on=Object.keys||function(C){var G=[];for(var ue in C)G.push(ue);return G};function Kn(C){return Object.prototype.toString.call(C)}var Da=Array.isArray||function(C){return Object.prototype.toString.call(C)==="[object Array]"},ka=function(C,G){if(C.forEach)return C.forEach(G);for(var ue=0;ue<C.length;ue++)G(C[ue],ue,C)};ka(on(gt.prototype),function(C){Zt[C]=function(G){var ue=[].slice.call(arguments,1),Pe=new gt(G);return Pe[C].apply(Pe,ue)}});var Va=Object.hasOwnProperty||function(C,G){return G in C},Lr=Pt.exports,ms=Ga;function Ga(C){if(!(this instanceof Ga))return new Ga(C);this._bbox=C||[1/0,1/0,-1/0,-1/0],this._valid=!!C}Ga.prototype.include=function(C){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],C[0]),this._bbox[1]=Math.min(this._bbox[1],C[1]),this._bbox[2]=Math.max(this._bbox[2],C[0]),this._bbox[3]=Math.max(this._bbox[3],C[1]),this},Ga.prototype.equals=function(C){var G;return G=C instanceof Ga?C.bbox():C,this._bbox[0]==G[0]&&this._bbox[1]==G[1]&&this._bbox[2]==G[2]&&this._bbox[3]==G[3]},Ga.prototype.center=function(C){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Ga.prototype.union=function(C){var G;return this._valid=!0,G=C instanceof Ga?C.bbox():C,this._bbox[0]=Math.min(this._bbox[0],G[0]),this._bbox[1]=Math.min(this._bbox[1],G[1]),this._bbox[2]=Math.max(this._bbox[2],G[2]),this._bbox[3]=Math.max(this._bbox[3],G[3]),this},Ga.prototype.bbox=function(){return this._valid?this._bbox:null},Ga.prototype.contains=function(C){if(!C)return this._fastContains();if(!this._valid)return null;var G=C[0],ue=C[1];return this._bbox[0]<=G&&this._bbox[1]<=ue&&this._bbox[2]>=G&&this._bbox[3]>=ue},Ga.prototype.intersect=function(C){return this._valid?(G=C instanceof Ga?C.bbox():C,!(this._bbox[0]>G[2]||this._bbox[2]<G[0]||this._bbox[3]<G[1]||this._bbox[1]>G[3])):null;var G},Ga.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var C="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",C)},Ga.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var gs=function(C){if(!C)return[];var G=Mt(Tt(C)),ue=[];return G.features.forEach(function(Pe){Pe.geometry&&(ue=ue.concat(Ot(Pe.geometry.coordinates)))}),ue},Dr=Lr,as=ms,hi={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},yc=Object.keys(hi);function Xc(C){for(var G=as(),ue=gs(C),Pe=0;Pe<ue.length;Pe++)G.include(ue[Pe]);return G}Pn.exports=function(C){return Xc(C).bbox()},Pn.exports.polygon=function(C){return Xc(C).polygon()},Pn.exports.bboxify=function(C){return Dr(C).map(function(G){G&&yc.some(function(ue){return!!G[ue]&&hi[ue].indexOf(G.type)!==-1})&&(G.bbox=Xc(G).bbox(),this.update(G))})};var Hl=l(Pn.exports),Fo=-90;function Jc(C,G){var ue=Fo,Pe=90,Ae=Fo,Be=90,qe=270,Rt=-270;C.forEach(function(zt){var cn=Hl(zt),Gt=cn[1],Vn=cn[3],Ca=cn[0],qn=cn[2];Gt>ue&&(ue=Gt),Vn<Pe&&(Pe=Vn),Vn>Ae&&(Ae=Vn),Gt<Be&&(Be=Gt),Ca<qe&&(qe=Ca),qn>Rt&&(Rt=qn)});var kt=G;return ue+kt.lat>85&&(kt.lat=85-ue),Ae+kt.lat>90&&(kt.lat=90-Ae),Pe+kt.lat<-85&&(kt.lat=-85-Pe),Be+kt.lat<Fo&&(kt.lat=Fo-Be),qe+kt.lng<=-270&&(kt.lng+=360*Math.ceil(Math.abs(kt.lng)/360)),Rt+kt.lng>=270&&(kt.lng-=360*Math.ceil(Math.abs(kt.lng)/360)),kt}function jo(C,G){var ue=Jc(C.map(function(Pe){return Pe.toGeoJSON()}),G);C.forEach(function(Pe){var Ae,Be=Pe.getCoordinates(),qe=function(kt){var zt={lng:kt[0]+ue.lng,lat:kt[1]+ue.lat};return[zt.lng,zt.lat]},Rt=function(kt){return kt.map(function(zt){return qe(zt)})};Pe.type===H.POINT?Ae=qe(Be):Pe.type===H.LINE_STRING||Pe.type===H.MULTI_POINT?Ae=Be.map(qe):Pe.type===H.POLYGON||Pe.type===H.MULTI_LINE_STRING?Ae=Be.map(Rt):Pe.type===H.MULTI_POLYGON&&(Ae=Be.map(function(kt){return kt.map(function(zt){return Rt(zt)})})),Pe.incomingCoords(Ae)})}var Xa={onSetup:function(C){var G=this,ue={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:C.featureIds||[]};return this.setSelected(ue.initiallySelectedFeatureIds.filter(function(Pe){return G.getFeature(Pe)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),ue},fireUpdate:function(){this.map.fire(J.UPDATE,{action:K.MOVE,features:this.getSelected().map(function(C){return C.toGeoJSON()})})},fireActionable:function(){var C=this,G=this.getSelected(),ue=G.filter(function(Rt){return C.isInstanceOf("MultiFeature",Rt)}),Pe=!1;if(G.length>1){Pe=!0;var Ae=G[0].type.replace("Multi","");G.forEach(function(Rt){Rt.type.replace("Multi","")!==Ae&&(Pe=!1)})}var Be=ue.length>0,qe=G.length>0;this.setActionableState({combineFeatures:Pe,uncombineFeatures:Be,trash:qe})},getUniqueIds:function(C){return C.length?C.map(function(G){return G.properties.id}).filter(function(G){return G!==void 0}).reduce(function(G,ue){return G.add(ue),G},new rt).values():[]},stopExtendedInteractions:function(C){C.boxSelectElement&&(C.boxSelectElement.parentNode&&C.boxSelectElement.parentNode.removeChild(C.boxSelectElement),C.boxSelectElement=null),this.map.dragPan.enable(),C.boxSelecting=!1,C.canBoxSelect=!1,C.dragMoving=!1,C.canDragMove=!1},onStop:function(){Ln.enable(this)},onMouseMove:function(C,G){return aa(G)&&C.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(C),!0},onMouseOut:function(C){return!C.dragMoving||this.fireUpdate()}};Xa.onTap=Xa.onClick=function(C,G){return bn(G)?this.clickAnywhere(C,G):Ut(W.VERTEX)(G)?this.clickOnVertex(C,G):aa(G)?this.clickOnFeature(C,G):void 0},Xa.clickAnywhere=function(C){var G=this,ue=this.getSelectedIds();ue.length&&(this.clearSelectedFeatures(),ue.forEach(function(Pe){return G.doRender(Pe)})),Ln.enable(this),this.stopExtendedInteractions(C)},Xa.clickOnVertex=function(C,G){this.changeMode(te.DIRECT_SELECT,{featureId:G.featureTarget.properties.parent,coordPath:G.featureTarget.properties.coord_path,startPos:G.lngLat}),this.updateUIClasses({mouse:j.MOVE})},Xa.startOnActiveFeature=function(C,G){this.stopExtendedInteractions(C),this.map.dragPan.disable(),this.doRender(G.featureTarget.properties.id),C.canDragMove=!0,C.dragMoveLocation=G.lngLat},Xa.clickOnFeature=function(C,G){var ue=this;Ln.disable(this),this.stopExtendedInteractions(C);var Pe=La(G),Ae=this.getSelectedIds(),Be=G.featureTarget.properties.id,qe=this.isSelected(Be);if(!Pe&&qe&&this.getFeature(Be).type!==H.POINT)return this.changeMode(te.DIRECT_SELECT,{featureId:Be});qe&&Pe?(this.deselect(Be),this.updateUIClasses({mouse:j.POINTER}),Ae.length===1&&Ln.enable(this)):!qe&&Pe?(this.select(Be),this.updateUIClasses({mouse:j.MOVE})):qe||Pe||(Ae.forEach(function(Rt){return ue.doRender(Rt)}),this.setSelected(Be),this.updateUIClasses({mouse:j.MOVE})),this.doRender(Be)},Xa.onMouseDown=function(C,G){return nn(G)?this.startOnActiveFeature(C,G):this.drawConfig.boxSelect&&pt(G)?this.startBoxSelect(C,G):void 0},Xa.startBoxSelect=function(C,G){this.stopExtendedInteractions(C),this.map.dragPan.disable(),C.boxSelectStartLocation=xr(G.originalEvent,this.map.getContainer()),C.canBoxSelect=!0},Xa.onTouchStart=function(C,G){if(nn(G))return this.startOnActiveFeature(C,G)},Xa.onDrag=function(C,G){return C.canDragMove?this.dragMove(C,G):this.drawConfig.boxSelect&&C.canBoxSelect?this.whileBoxSelect(C,G):void 0},Xa.whileBoxSelect=function(C,G){C.boxSelecting=!0,this.updateUIClasses({mouse:j.ADD}),C.boxSelectElement||(C.boxSelectElement=document.createElement("div"),C.boxSelectElement.classList.add(L.BOX_SELECT),this.map.getContainer().appendChild(C.boxSelectElement));var ue=xr(G.originalEvent,this.map.getContainer()),Pe=Math.min(C.boxSelectStartLocation.x,ue.x),Ae=Math.max(C.boxSelectStartLocation.x,ue.x),Be=Math.min(C.boxSelectStartLocation.y,ue.y),qe=Math.max(C.boxSelectStartLocation.y,ue.y),Rt="translate("+Pe+"px, "+Be+"px)";C.boxSelectElement.style.transform=Rt,C.boxSelectElement.style.WebkitTransform=Rt,C.boxSelectElement.style.width=Ae-Pe+"px",C.boxSelectElement.style.height=qe-Be+"px"},Xa.dragMove=function(C,G){C.dragMoving=!0,G.originalEvent.stopPropagation();var ue={lng:G.lngLat.lng-C.dragMoveLocation.lng,lat:G.lngLat.lat-C.dragMoveLocation.lat};jo(this.getSelected(),ue),C.dragMoveLocation=G.lngLat},Xa.onTouchEnd=Xa.onMouseUp=function(C,G){var ue=this;if(C.dragMoving)this.fireUpdate();else if(C.boxSelecting){var Pe=[C.boxSelectStartLocation,xr(G.originalEvent,this.map.getContainer())],Ae=this.featuresAt(null,Pe,"click"),Be=this.getUniqueIds(Ae).filter(function(qe){return!ue.isSelected(qe)});Be.length&&(this.select(Be),Be.forEach(function(qe){return ue.doRender(qe)}),this.updateUIClasses({mouse:j.MOVE}))}this.stopExtendedInteractions(C)},Xa.toDisplayFeatures=function(C,G,ue){G.properties.active=this.isSelected(G.properties.id)?ee.ACTIVE:ee.INACTIVE,ue(G),this.fireActionable(),G.properties.active===ee.ACTIVE&&G.geometry.type!==H.POINT&&_n(G).forEach(ue)},Xa.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Xa.onCombineFeatures=function(){var C=this.getSelected();if(!(C.length===0||C.length<2)){for(var G=[],ue=[],Pe=C[0].type.replace("Multi",""),Ae=0;Ae<C.length;Ae++){var Be=C[Ae];if(Be.type.replace("Multi","")!==Pe)return;Be.type.includes("Multi")?Be.getCoordinates().forEach(function(Rt){G.push(Rt)}):G.push(Be.getCoordinates()),ue.push(Be.toGeoJSON())}if(ue.length>1){var qe=this.newFeature({type:H.FEATURE,properties:ue[0].properties,geometry:{type:"Multi"+Pe,coordinates:G}});this.addFeature(qe),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([qe.id]),this.map.fire(J.COMBINE_FEATURES,{createdFeatures:[qe.toGeoJSON()],deletedFeatures:ue})}this.fireActionable()}},Xa.onUncombineFeatures=function(){var C=this,G=this.getSelected();if(G.length!==0){for(var ue=[],Pe=[],Ae=function(qe){var Rt=G[qe];C.isInstanceOf("MultiFeature",Rt)&&(Rt.getFeatures().forEach(function(kt){C.addFeature(kt),kt.properties=Rt.properties,ue.push(kt.toGeoJSON()),C.select([kt.id])}),C.deleteFeature(Rt.id,{silent:!0}),Pe.push(Rt.toGeoJSON()))},Be=0;Be<G.length;Be++)Ae(Be);ue.length>1&&this.map.fire(J.UNCOMBINE_FEATURES,{createdFeatures:ue,deletedFeatures:Pe}),this.fireActionable()}};var ed=Ut(W.VERTEX),Gr=Ut(W.MIDPOINT),Zs={fireUpdate:function(){this.map.fire(J.UPDATE,{action:K.CHANGE_COORDINATES,features:this.getSelected().map(function(C){return C.toGeoJSON()})})},fireActionable:function(C){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:C.selectedCoordPaths.length>0})},startDragging:function(C,G){this.map.dragPan.disable(),C.canDragMove=!0,C.dragMoveLocation=G.lngLat},stopDragging:function(C){this.map.dragPan.enable(),C.dragMoving=!1,C.canDragMove=!1,C.dragMoveLocation=null},onVertex:function(C,G){this.startDragging(C,G);var ue=G.featureTarget.properties,Pe=C.selectedCoordPaths.indexOf(ue.coord_path);La(G)||Pe!==-1?La(G)&&Pe===-1&&C.selectedCoordPaths.push(ue.coord_path):C.selectedCoordPaths=[ue.coord_path];var Ae=this.pathsToCoordinates(C.featureId,C.selectedCoordPaths);this.setSelectedCoordinates(Ae)},onMidpoint:function(C,G){this.startDragging(C,G);var ue=G.featureTarget.properties;C.feature.addCoordinate(ue.coord_path,ue.lng,ue.lat),this.fireUpdate(),C.selectedCoordPaths=[ue.coord_path]},pathsToCoordinates:function(C,G){return G.map(function(ue){return{feature_id:C,coord_path:ue}})},onFeature:function(C,G){C.selectedCoordPaths.length===0?this.startDragging(C,G):this.stopDragging(C)},dragFeature:function(C,G,ue){jo(this.getSelected(),ue),C.dragMoveLocation=G.lngLat},dragVertex:function(C,G,ue){for(var Pe=C.selectedCoordPaths.map(function(Rt){return C.feature.getCoordinate(Rt)}),Ae=Jc(Pe.map(function(Rt){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:Rt}}}),ue),Be=0;Be<Pe.length;Be++){var qe=Pe[Be];C.feature.updateCoordinate(C.selectedCoordPaths[Be],qe[0]+Ae.lng,qe[1]+Ae.lat)}},clickNoTarget:function(){this.changeMode(te.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(te.SIMPLE_SELECT)},clickActiveFeature:function(C){C.selectedCoordPaths=[],this.clearSelectedCoordinates(),C.feature.changed()},onSetup:function(C){var G=C.featureId,ue=this.getFeature(G);if(!ue)throw new Error("You must provide a featureId to enter direct_select mode");if(ue.type===H.POINT)throw new TypeError("direct_select mode doesn't handle point features");var Pe={featureId:G,feature:ue,dragMoveLocation:C.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:C.coordPath?[C.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(G,Pe.selectedCoordPaths)),this.setSelected(G),Ln.disable(this),this.setActionableState({trash:!0}),Pe},onStop:function(){Ln.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(C,G,ue){C.featureId===G.properties.id?(G.properties.active=ee.ACTIVE,ue(G),_n(G,{map:this.map,midpoints:!0,selectedPaths:C.selectedCoordPaths}).forEach(ue)):(G.properties.active=ee.INACTIVE,ue(G)),this.fireActionable(C)},onTrash:function(C){C.selectedCoordPaths.sort(function(G,ue){return ue.localeCompare(G,"en",{numeric:!0})}).forEach(function(G){return C.feature.removeCoordinate(G)}),this.fireUpdate(),C.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(C),C.feature.isValid()===!1&&(this.deleteFeature([C.featureId]),this.changeMode(te.SIMPLE_SELECT,{}))},onMouseMove:function(C,G){var ue=nn(G),Pe=ed(G),Ae=Gr(G),Be=C.selectedCoordPaths.length===0;return ue&&Be||Pe&&!Be?this.updateUIClasses({mouse:j.MOVE}):this.updateUIClasses({mouse:j.NONE}),(Pe||ue||Ae)&&C.dragMoving&&this.fireUpdate(),this.stopDragging(C),!0},onMouseOut:function(C){return C.dragMoving&&this.fireUpdate(),!0}};Zs.onTouchStart=Zs.onMouseDown=function(C,G){return ed(G)?this.onVertex(C,G):nn(G)?this.onFeature(C,G):Gr(G)?this.onMidpoint(C,G):void 0},Zs.onDrag=function(C,G){if(C.canDragMove===!0){C.dragMoving=!0,G.originalEvent.stopPropagation();var ue={lng:G.lngLat.lng-C.dragMoveLocation.lng,lat:G.lngLat.lat-C.dragMoveLocation.lat};C.selectedCoordPaths.length>0?this.dragVertex(C,G,ue):this.dragFeature(C,G,ue),C.dragMoveLocation=G.lngLat}},Zs.onClick=function(C,G){return bn(G)?this.clickNoTarget(C,G):nn(G)?this.clickActiveFeature(C,G):gn(G)?this.clickInactive(C,G):void this.stopDragging(C)},Zs.onTap=function(C,G){return bn(G)?this.clickNoTarget(C,G):nn(G)?this.clickActiveFeature(C,G):gn(G)?this.clickInactive(C,G):void 0},Zs.onTouchEnd=Zs.onMouseUp=function(C){C.dragMoving&&this.fireUpdate(),this.stopDragging(C)};var $r={};function rs(C,G){return!!C.lngLat&&C.lngLat.lng===G[0]&&C.lngLat.lat===G[1]}$r.onSetup=function(){var C=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:[]}});return this.addFeature(C),this.clearSelectedFeatures(),this.updateUIClasses({mouse:j.ADD}),this.activateUIButton(Z.POINT),this.setActionableState({trash:!0}),{point:C}},$r.stopDrawingAndRemove=function(C){this.deleteFeature([C.point.id],{silent:!0}),this.changeMode(te.SIMPLE_SELECT)},$r.onTap=$r.onClick=function(C,G){this.updateUIClasses({mouse:j.MOVE}),C.point.updateCoordinate("",G.lngLat.lng,G.lngLat.lat),this.map.fire(J.CREATE,{features:[C.point.toGeoJSON()]}),this.changeMode(te.SIMPLE_SELECT,{featureIds:[C.point.id]})},$r.onStop=function(C){this.activateUIButton(),C.point.getCoordinate().length||this.deleteFeature([C.point.id],{silent:!0})},$r.toDisplayFeatures=function(C,G,ue){var Pe=G.properties.id===C.point.id;if(G.properties.active=Pe?ee.ACTIVE:ee.INACTIVE,!Pe)return ue(G)},$r.onTrash=$r.stopDrawingAndRemove,$r.onKeyUp=function(C,G){if(ra(G)||fa(G))return this.stopDrawingAndRemove(C,G)};var bs={onSetup:function(){var C=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.POLYGON,coordinates:[[]]}});return this.addFeature(C),this.clearSelectedFeatures(),Ln.disable(this),this.updateUIClasses({mouse:j.ADD}),this.activateUIButton(Z.POLYGON),this.setActionableState({trash:!0}),{polygon:C,currentVertexPosition:0}},clickAnywhere:function(C,G){if(C.currentVertexPosition>0&&rs(G,C.polygon.coordinates[0][C.currentVertexPosition-1]))return this.changeMode(te.SIMPLE_SELECT,{featureIds:[C.polygon.id]});this.updateUIClasses({mouse:j.ADD}),C.polygon.updateCoordinate("0."+C.currentVertexPosition,G.lngLat.lng,G.lngLat.lat),C.currentVertexPosition++,C.polygon.updateCoordinate("0."+C.currentVertexPosition,G.lngLat.lng,G.lngLat.lat)},clickOnVertex:function(C){return this.changeMode(te.SIMPLE_SELECT,{featureIds:[C.polygon.id]})},onMouseMove:function(C,G){C.polygon.updateCoordinate("0."+C.currentVertexPosition,G.lngLat.lng,G.lngLat.lat),la(G)&&this.updateUIClasses({mouse:j.POINTER})}};bs.onTap=bs.onClick=function(C,G){return la(G)?this.clickOnVertex(C,G):this.clickAnywhere(C,G)},bs.onKeyUp=function(C,G){ra(G)?(this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(te.SIMPLE_SELECT)):fa(G)&&this.changeMode(te.SIMPLE_SELECT,{featureIds:[C.polygon.id]})},bs.onStop=function(C){this.updateUIClasses({mouse:j.NONE}),Ln.enable(this),this.activateUIButton(),this.getFeature(C.polygon.id)!==void 0&&(C.polygon.removeCoordinate("0."+C.currentVertexPosition),C.polygon.isValid()?this.map.fire(J.CREATE,{features:[C.polygon.toGeoJSON()]}):(this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(te.SIMPLE_SELECT,{},{silent:!0})))},bs.toDisplayFeatures=function(C,G,ue){var Pe=G.properties.id===C.polygon.id;if(G.properties.active=Pe?ee.ACTIVE:ee.INACTIVE,!Pe)return ue(G);if(G.geometry.coordinates.length!==0){var Ae=G.geometry.coordinates[0].length;if(!(Ae<3)){if(G.properties.meta=W.FEATURE,ue(kr(C.polygon.id,G.geometry.coordinates[0][0],"0.0",!1)),Ae>3){var Be=G.geometry.coordinates[0].length-3;ue(kr(C.polygon.id,G.geometry.coordinates[0][Be],"0."+Be,!1))}if(Ae<=4){var qe=[[G.geometry.coordinates[0][0][0],G.geometry.coordinates[0][0][1]],[G.geometry.coordinates[0][1][0],G.geometry.coordinates[0][1][1]]];if(ue({type:H.FEATURE,properties:G.properties,geometry:{coordinates:qe,type:H.LINE_STRING}}),Ae===3)return}return ue(G)}}},bs.onTrash=function(C){this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(te.SIMPLE_SELECT)};var qr={onSetup:function(C){var G,ue,Pe=(C=C||{}).featureId,Ae="forward";if(Pe){if(!(G=this.getFeature(Pe)))throw new Error("Could not find a feature with the provided featureId");var Be=C.from;if(Be&&Be.type==="Feature"&&Be.geometry&&Be.geometry.type==="Point"&&(Be=Be.geometry),Be&&Be.type==="Point"&&Be.coordinates&&Be.coordinates.length===2&&(Be=Be.coordinates),!Be||!Array.isArray(Be))throw new Error("Please use the `from` property to indicate which point to continue the line from");var qe=G.coordinates.length-1;if(G.coordinates[qe][0]===Be[0]&&G.coordinates[qe][1]===Be[1])ue=qe+1,G.addCoordinate.apply(G,[ue].concat(G.coordinates[qe]));else{if(G.coordinates[0][0]!==Be[0]||G.coordinates[0][1]!==Be[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Ae="backwards",ue=0,G.addCoordinate.apply(G,[ue].concat(G.coordinates[0]))}}else G=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.LINE_STRING,coordinates:[]}}),ue=0,this.addFeature(G);return this.clearSelectedFeatures(),Ln.disable(this),this.updateUIClasses({mouse:j.ADD}),this.activateUIButton(Z.LINE),this.setActionableState({trash:!0}),{line:G,currentVertexPosition:ue,direction:Ae}},clickAnywhere:function(C,G){if(C.currentVertexPosition>0&&rs(G,C.line.coordinates[C.currentVertexPosition-1])||C.direction==="backwards"&&rs(G,C.line.coordinates[C.currentVertexPosition+1]))return this.changeMode(te.SIMPLE_SELECT,{featureIds:[C.line.id]});this.updateUIClasses({mouse:j.ADD}),C.line.updateCoordinate(C.currentVertexPosition,G.lngLat.lng,G.lngLat.lat),C.direction==="forward"?(C.currentVertexPosition++,C.line.updateCoordinate(C.currentVertexPosition,G.lngLat.lng,G.lngLat.lat)):C.line.addCoordinate(0,G.lngLat.lng,G.lngLat.lat)},clickOnVertex:function(C){return this.changeMode(te.SIMPLE_SELECT,{featureIds:[C.line.id]})},onMouseMove:function(C,G){C.line.updateCoordinate(C.currentVertexPosition,G.lngLat.lng,G.lngLat.lat),la(G)&&this.updateUIClasses({mouse:j.POINTER})}};qr.onTap=qr.onClick=function(C,G){if(la(G))return this.clickOnVertex(C,G);this.clickAnywhere(C,G)},qr.onKeyUp=function(C,G){fa(G)?this.changeMode(te.SIMPLE_SELECT,{featureIds:[C.line.id]}):ra(G)&&(this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(te.SIMPLE_SELECT))},qr.onStop=function(C){Ln.enable(this),this.activateUIButton(),this.getFeature(C.line.id)!==void 0&&(C.line.removeCoordinate(""+C.currentVertexPosition),C.line.isValid()?this.map.fire(J.CREATE,{features:[C.line.toGeoJSON()]}):(this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(te.SIMPLE_SELECT,{},{silent:!0})))},qr.onTrash=function(C){this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(te.SIMPLE_SELECT)},qr.toDisplayFeatures=function(C,G,ue){var Pe=G.properties.id===C.line.id;if(G.properties.active=Pe?ee.ACTIVE:ee.INACTIVE,!Pe)return ue(G);G.geometry.coordinates.length<2||(G.properties.meta=W.FEATURE,ue(kr(C.line.id,G.geometry.coordinates[C.direction==="forward"?G.geometry.coordinates.length-2:1],""+(C.direction==="forward"?G.geometry.coordinates.length-2:1),!1)),ue(G))};var Ve={simple_select:Xa,direct_select:Zs,draw_point:$r,draw_polygon:bs,draw_line_string:qr},Xt={defaultMode:te.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Ft,modes:Ve,controls:{},userProperties:!1},mi={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Ys={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function ar(C,G){return C.map(function(ue){return ue.source?ue:Re(ue,{id:ue.id+"."+G,source:G==="hot"?O.HOT:O.COLD})})}var Xs={exports:{}};(function(C,G){var ue="__lodash_hash_undefined__",Pe=9007199254740991,Ae="[object Arguments]",Be="[object Array]",qe="[object Boolean]",Rt="[object Date]",kt="[object Error]",zt="[object Function]",cn="[object Map]",Gt="[object Number]",Vn="[object Object]",Ca="[object Promise]",qn="[object RegExp]",Ja="[object Set]",xt="[object String]",yn="[object Symbol]",ya="[object WeakMap]",wr="[object ArrayBuffer]",ha="[object DataView]",wa=/^\[object .+?Constructor\]$/,nd=/^(?:0|[1-9]\d*)$/,Sa={};Sa["[object Float32Array]"]=Sa["[object Float64Array]"]=Sa["[object Int8Array]"]=Sa["[object Int16Array]"]=Sa["[object Int32Array]"]=Sa["[object Uint8Array]"]=Sa["[object Uint8ClampedArray]"]=Sa["[object Uint16Array]"]=Sa["[object Uint32Array]"]=!0,Sa[Ae]=Sa[Be]=Sa[wr]=Sa[qe]=Sa[ha]=Sa[Rt]=Sa[kt]=Sa[zt]=Sa[cn]=Sa[Gt]=Sa[Vn]=Sa[qn]=Sa[Ja]=Sa[xt]=Sa[ya]=!1;var Wr=typeof gf=="object"&&gf&&gf.Object===Object&&gf,Ms=typeof self=="object"&&self&&self.Object===Object&&self,gi=Wr||Ms||Function("return this")(),Vo=G&&!G.nodeType&&G,dr=Vo&&C&&!C.nodeType&&C,vc=dr&&dr.exports===Vo,Kc=vc&&Wr.process,Go=function(){try{return Kc&&Kc.binding&&Kc.binding("util")}catch{}}(),rr=Go&&Go.isTypedArray;function ad(We,lt){for(var Qt=-1,En=We==null?0:We.length;++Qt<En;)if(lt(We[Qt],Qt,We))return!0;return!1}function rd(We){var lt=-1,Qt=Array(We.size);return We.forEach(function(En,Ea){Qt[++lt]=[Ea,En]}),Qt}function Js(We){var lt=-1,Qt=Array(We.size);return We.forEach(function(En){Qt[++lt]=En}),Qt}var xc,wc,ta,dh=Array.prototype,Zl=Function.prototype,Ks=Object.prototype,Yl=gi["__core-js_shared__"],Xl=Zl.toString,Or=Ks.hasOwnProperty,sd=(xc=/[^.]+$/.exec(Yl&&Yl.keys&&Yl.keys.IE_PROTO||""))?"Symbol(src)_1."+xc:"",Rs=Ks.toString,Qc=RegExp("^"+Xl.call(Or).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jl=vc?gi.Buffer:void 0,el=gi.Symbol,tl=gi.Uint8Array,Ni=Ks.propertyIsEnumerable,mo=dh.splice,go=el?el.toStringTag:void 0,bo=Object.getOwnPropertySymbols,id=Jl?Jl.isBuffer:void 0,Fi=(wc=Object.keys,ta=Object,function(We){return wc(ta(We))}),Gn=_o(gi,"DataView"),nl=_o(gi,"Map"),od=_o(gi,"Promise"),cd=_o(gi,"Set"),al=_o(gi,"WeakMap"),rl=_o(Object,"create"),Kl=Gi(Gn),ld=Gi(nl),ud=Gi(od),$o=Gi(cd),dd=Gi(al),Qs=el?el.prototype:void 0,Sc=Qs?Qs.valueOf:void 0;function ji(We){var lt=-1,Qt=We==null?0:We.length;for(this.clear();++lt<Qt;){var En=We[lt];this.set(En[0],En[1])}}function ei(We){var lt=-1,Qt=We==null?0:We.length;for(this.clear();++lt<Qt;){var En=We[lt];this.set(En[0],En[1])}}function bi(We){var lt=-1,Qt=We==null?0:We.length;for(this.clear();++lt<Qt;){var En=We[lt];this.set(En[0],En[1])}}function qo(We){var lt=-1,Qt=We==null?0:We.length;for(this.__data__=new bi;++lt<Qt;)this.add(We[lt])}function vt(We){var lt=this.__data__=new ei(We);this.size=lt.size}function Ip(We,lt){var Qt=ol(We),En=!Qt&&fh(We),Ea=!Qt&&!En&&hd(We),Dn=!Qt&&!En&&!Ea&&bd(We),$a=Qt||En||Ea||Dn,qa=$a?function(sr,ks){for(var Ls=-1,Mr=Array(sr);++Ls<sr;)Mr[Ls]=ks(Ls);return Mr}(We.length,String):[],ss=qa.length;for(var Sr in We)!lt&&!Or.call(We,Sr)||$a&&(Sr=="length"||Ea&&(Sr=="offset"||Sr=="parent")||Dn&&(Sr=="buffer"||Sr=="byteLength"||Sr=="byteOffset")||fd(Sr,ss))||qa.push(Sr);return qa}function Wo(We,lt){for(var Qt=We.length;Qt--;)if(Pp(We[Qt][0],lt))return Qt;return-1}function Ho(We){return We==null?We===void 0?"[object Undefined]":"[object Null]":go&&go in Object(We)?function(lt){var Qt=Or.call(lt,go),En=lt[go];try{lt[go]=void 0;var Ea=!0}catch{}var Dn=Rs.call(lt);return Ea&&(Qt?lt[go]=En:delete lt[go]),Dn}(We):function(lt){return Rs.call(lt)}(We)}function pd(We){return ll(We)&&Ho(We)==Ae}function sl(We,lt,Qt,En,Ea){return We===lt||(We==null||lt==null||!ll(We)&&!ll(lt)?We!=We&&lt!=lt:function(Dn,$a,qa,ss,Sr,sr){var ks=ol(Dn),Ls=ol($a),Mr=ks?Be:yi(Dn),ti=Ls?Be:yi($a),yo=(Mr=Mr==Ae?Vn:Mr)==Vn,On=(ti=ti==Ae?Vn:ti)==Vn,$i=Mr==ti;if($i&&hd(Dn)){if(!hd($a))return!1;ks=!0,yo=!1}if($i&&!yo)return sr||(sr=new vt),ks||bd(Dn)?Vi(Dn,$a,qa,ss,Sr,sr):function(va,Ia,tu,vo,_d,is,ni){switch(tu){case ha:if(va.byteLength!=Ia.byteLength||va.byteOffset!=Ia.byteOffset)return!1;va=va.buffer,Ia=Ia.buffer;case wr:return!(va.byteLength!=Ia.byteLength||!is(new tl(va),new tl(Ia)));case qe:case Rt:case Gt:return Pp(+va,+Ia);case kt:return va.name==Ia.name&&va.message==Ia.message;case qn:case xt:return va==Ia+"";case cn:var vi=rd;case Ja:var Yo=1&vo;if(vi||(vi=Js),va.size!=Ia.size&&!Yo)return!1;var ul=ni.get(va);if(ul)return ul==Ia;vo|=2,ni.set(va,Ia);var Ds=Vi(vi(va),vi(Ia),vo,_d,is,ni);return ni.delete(va),Ds;case yn:if(Sc)return Sc.call(va)==Sc.call(Ia)}return!1}(Dn,$a,Mr,qa,ss,Sr,sr);if(!(1&qa)){var qi=yo&&Or.call(Dn,"__wrapped__"),Tc=On&&Or.call($a,"__wrapped__");if(qi||Tc){var Zo=qi?Dn.value():Dn,zp=Tc?$a.value():$a;return sr||(sr=new vt),Sr(Zo,zp,qa,ss,sr)}}return $i?(sr||(sr=new vt),function(va,Ia,tu,vo,_d,is){var ni=1&tu,vi=il(va),Yo=vi.length,ul=il(Ia).length;if(Yo!=ul&&!ni)return!1;for(var Ds=Yo;Ds--;){var xo=vi[Ds];if(!(ni?xo in Ia:Or.call(Ia,xo)))return!1}var Xo=is.get(va);if(Xo&&is.get(Ia))return Xo==Ia;var ai=!0;is.set(va,Ia),is.set(Ia,va);for(var nu=ni;++Ds<Yo;){var Jo=va[xo=vi[Ds]],_s=Ia[xo];if(vo)var Os=ni?vo(_s,Jo,xo,Ia,va,is):vo(Jo,_s,xo,va,Ia,is);if(!(Os===void 0?Jo===_s||_d(Jo,_s,tu,vo,is):Os)){ai=!1;break}nu||(nu=xo=="constructor")}if(ai&&!nu){var ri=va.constructor,dl=Ia.constructor;ri==dl||!("constructor"in va)||!("constructor"in Ia)||typeof ri=="function"&&ri instanceof ri&&typeof dl=="function"&&dl instanceof dl||(ai=!1)}return is.delete(va),is.delete(Ia),ai}(Dn,$a,qa,ss,Sr,sr)):!1}(We,lt,Qt,En,sl,Ea))}function Ui(We){return!(!cl(We)||function(lt){return!!sd&&sd in lt}(We))&&(md(We)?Qc:wa).test(Gi(We))}function Ql(We){if(Qt=(lt=We)&&lt.constructor,En=typeof Qt=="function"&&Qt.prototype||Ks,lt!==En)return Fi(We);var lt,Qt,En,Ea=[];for(var Dn in Object(We))Or.call(We,Dn)&&Dn!="constructor"&&Ea.push(Dn);return Ea}function Vi(We,lt,Qt,En,Ea,Dn){var $a=1&Qt,qa=We.length,ss=lt.length;if(qa!=ss&&!($a&&ss>qa))return!1;var Sr=Dn.get(We);if(Sr&&Dn.get(lt))return Sr==lt;var sr=-1,ks=!0,Ls=2&Qt?new qo:void 0;for(Dn.set(We,lt),Dn.set(lt,We);++sr<qa;){var Mr=We[sr],ti=lt[sr];if(En)var yo=$a?En(ti,Mr,sr,lt,We,Dn):En(Mr,ti,sr,We,lt,Dn);if(yo!==void 0){if(yo)continue;ks=!1;break}if(Ls){if(!ad(lt,function(On,$i){if(qi=$i,!Ls.has(qi)&&(Mr===On||Ea(Mr,On,Qt,En,Dn)))return Ls.push($i);var qi})){ks=!1;break}}else if(Mr!==ti&&!Ea(Mr,ti,Qt,En,Dn)){ks=!1;break}}return Dn.delete(We),Dn.delete(lt),ks}function il(We){return function(lt,Qt,En){var Ea=Qt(lt);return ol(lt)?Ea:function(Dn,$a){for(var qa=-1,ss=$a.length,Sr=Dn.length;++qa<ss;)Dn[Sr+qa]=$a[qa];return Dn}(Ea,En(lt))}(We,eu,ph)}function _i(We,lt){var Qt,En,Ea=We.__data__;return((En=typeof(Qt=lt))=="string"||En=="number"||En=="symbol"||En=="boolean"?Qt!=="__proto__":Qt===null)?Ea[typeof lt=="string"?"string":"hash"]:Ea.map}function _o(We,lt){var Qt=function(En,Ea){return En==null?void 0:En[Ea]}(We,lt);return Ui(Qt)?Qt:void 0}ji.prototype.clear=function(){this.__data__=rl?rl(null):{},this.size=0},ji.prototype.delete=function(We){var lt=this.has(We)&&delete this.__data__[We];return this.size-=lt?1:0,lt},ji.prototype.get=function(We){var lt=this.__data__;if(rl){var Qt=lt[We];return Qt===ue?void 0:Qt}return Or.call(lt,We)?lt[We]:void 0},ji.prototype.has=function(We){var lt=this.__data__;return rl?lt[We]!==void 0:Or.call(lt,We)},ji.prototype.set=function(We,lt){var Qt=this.__data__;return this.size+=this.has(We)?0:1,Qt[We]=rl&&lt===void 0?ue:lt,this},ei.prototype.clear=function(){this.__data__=[],this.size=0},ei.prototype.delete=function(We){var lt=this.__data__,Qt=Wo(lt,We);return!(Qt<0)&&(Qt==lt.length-1?lt.pop():mo.call(lt,Qt,1),--this.size,!0)},ei.prototype.get=function(We){var lt=this.__data__,Qt=Wo(lt,We);return Qt<0?void 0:lt[Qt][1]},ei.prototype.has=function(We){return Wo(this.__data__,We)>-1},ei.prototype.set=function(We,lt){var Qt=this.__data__,En=Wo(Qt,We);return En<0?(++this.size,Qt.push([We,lt])):Qt[En][1]=lt,this},bi.prototype.clear=function(){this.size=0,this.__data__={hash:new ji,map:new(nl||ei),string:new ji}},bi.prototype.delete=function(We){var lt=_i(this,We).delete(We);return this.size-=lt?1:0,lt},bi.prototype.get=function(We){return _i(this,We).get(We)},bi.prototype.has=function(We){return _i(this,We).has(We)},bi.prototype.set=function(We,lt){var Qt=_i(this,We),En=Qt.size;return Qt.set(We,lt),this.size+=Qt.size==En?0:1,this},qo.prototype.add=qo.prototype.push=function(We){return this.__data__.set(We,ue),this},qo.prototype.has=function(We){return this.__data__.has(We)},vt.prototype.clear=function(){this.__data__=new ei,this.size=0},vt.prototype.delete=function(We){var lt=this.__data__,Qt=lt.delete(We);return this.size=lt.size,Qt},vt.prototype.get=function(We){return this.__data__.get(We)},vt.prototype.has=function(We){return this.__data__.has(We)},vt.prototype.set=function(We,lt){var Qt=this.__data__;if(Qt instanceof ei){var En=Qt.__data__;if(!nl||En.length<199)return En.push([We,lt]),this.size=++Qt.size,this;Qt=this.__data__=new bi(En)}return Qt.set(We,lt),this.size=Qt.size,this};var ph=bo?function(We){return We==null?[]:(We=Object(We),function(lt,Qt){for(var En=-1,Ea=lt==null?0:lt.length,Dn=0,$a=[];++En<Ea;){var qa=lt[En];Qt(qa,En,lt)&&($a[Dn++]=qa)}return $a}(bo(We),function(lt){return Ni.call(We,lt)}))}:function(){return[]},yi=Ho;function fd(We,lt){return!!(lt=lt??Pe)&&(typeof We=="number"||nd.test(We))&&We>-1&&We%1==0&&We<lt}function Gi(We){if(We!=null){try{return Xl.call(We)}catch{}try{return We+""}catch{}}return""}function Pp(We,lt){return We===lt||We!=We&&lt!=lt}(Gn&&yi(new Gn(new ArrayBuffer(1)))!=ha||nl&&yi(new nl)!=cn||od&&yi(od.resolve())!=Ca||cd&&yi(new cd)!=Ja||al&&yi(new al)!=ya)&&(yi=function(We){var lt=Ho(We),Qt=lt==Vn?We.constructor:void 0,En=Qt?Gi(Qt):"";if(En)switch(En){case Kl:return ha;case ld:return cn;case ud:return Ca;case $o:return Ja;case dd:return ya}return lt});var fh=pd(function(){return arguments}())?pd:function(We){return ll(We)&&Or.call(We,"callee")&&!Ni.call(We,"callee")},ol=Array.isArray,hd=id||function(){return!1};function md(We){if(!cl(We))return!1;var lt=Ho(We);return lt==zt||lt=="[object GeneratorFunction]"||lt=="[object AsyncFunction]"||lt=="[object Proxy]"}function gd(We){return typeof We=="number"&&We>-1&&We%1==0&&We<=Pe}function cl(We){var lt=typeof We;return We!=null&&(lt=="object"||lt=="function")}function ll(We){return We!=null&&typeof We=="object"}var bd=rr?function(We){return function(lt){return We(lt)}}(rr):function(We){return ll(We)&&gd(We.length)&&!!Sa[Ho(We)]};function eu(We){return(lt=We)!=null&&gd(lt.length)&&!md(lt)?Ip(We):Ql(We);var lt}C.exports=function(We,lt){return sl(We,lt)}})(Xs,Xs.exports);var Ep=l(Xs.exports);function Cs(C,G){return C.length===G.length&&JSON.stringify(C.map(function(ue){return ue}).sort())===JSON.stringify(G.map(function(ue){return ue}).sort())}var td={Polygon:Zn,LineString:nr,Point:Fn,MultiPolygon:Ya,MultiLineString:Ya,MultiPoint:Ya},uh=Object.freeze({__proto__:null,CommonSelectors:ca,constrainFeatureMovement:Jc,createMidPoint:It,createSupplementaryPoints:_n,createVertex:kr,doubleClickZoom:Ln,euclideanDistance:ea,featuresAt:Bt,getFeatureAtAndSetCursors:Tn,isClick:St,isEventAtCoordinates:rs,isTap:ke,mapEventToBoundingBox:Xe,ModeHandler:s,moveFeatures:jo,sortFeatures:ge,stringSetsAreEqual:Cs,StringSet:rt,theme:Ft,toDenseArray:kn}),Uo=function(C,G){var ue={options:C=function(Ae){Ae===void 0&&(Ae={});var Be=Re(Ae);return Ae.controls||(Be.controls={}),Ae.displayControlsDefault===!1?Be.controls=Re(Ys,Ae.controls):Be.controls=Re(mi,Ae.controls),(Be=Re(Xt,Be)).styles=ar(Be.styles,"cold").concat(ar(Be.styles,"hot")),Be}(C)};G=function(Ae,Be){return Be.modes=te,Be.getFeatureIdsAt=function(qe){return Bt.click({point:qe},null,Ae).map(function(Rt){return Rt.properties.id})},Be.getSelectedIds=function(){return Ae.store.getSelectedIds()},Be.getSelected=function(){return{type:H.FEATURE_COLLECTION,features:Ae.store.getSelectedIds().map(function(qe){return Ae.store.get(qe)}).map(function(qe){return qe.toGeoJSON()})}},Be.getSelectedPoints=function(){return{type:H.FEATURE_COLLECTION,features:Ae.store.getSelectedCoordinates().map(function(qe){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:qe.coordinates}}})}},Be.set=function(qe){if(qe.type===void 0||qe.type!==H.FEATURE_COLLECTION||!Array.isArray(qe.features))throw new Error("Invalid FeatureCollection");var Rt=Ae.store.createRenderBatch(),kt=Ae.store.getAllIds().slice(),zt=Be.add(qe),cn=new rt(zt);return(kt=kt.filter(function(Gt){return!cn.has(Gt)})).length&&Be.delete(kt),Rt(),zt},Be.add=function(qe){var Rt=JSON.parse(JSON.stringify(ft(qe))).features.map(function(kt){if(kt.id=kt.id||Nt(),kt.geometry===null)throw new Error("Invalid geometry: null");if(Ae.store.get(kt.id)===void 0||Ae.store.get(kt.id).type!==kt.geometry.type){var zt=td[kt.geometry.type];if(zt===void 0)throw new Error("Invalid geometry type: "+kt.geometry.type+".");var cn=new zt(Ae,kt);Ae.store.add(cn)}else{var Gt=Ae.store.get(kt.id);Gt.properties=kt.properties,Ep(Gt.properties,kt.properties)||Ae.store.featureChanged(Gt.id),Ep(Gt.getCoordinates(),kt.geometry.coordinates)||Gt.incomingCoords(kt.geometry.coordinates)}return kt.id});return Ae.store.render(),Rt},Be.get=function(qe){var Rt=Ae.store.get(qe);if(Rt)return Rt.toGeoJSON()},Be.getAll=function(){return{type:H.FEATURE_COLLECTION,features:Ae.store.getAll().map(function(qe){return qe.toGeoJSON()})}},Be.delete=function(qe){return Ae.store.delete(qe,{silent:!0}),Be.getMode()!==te.DIRECT_SELECT||Ae.store.getSelectedIds().length?Ae.store.render():Ae.events.changeMode(te.SIMPLE_SELECT,void 0,{silent:!0}),Be},Be.deleteAll=function(){return Ae.store.delete(Ae.store.getAllIds(),{silent:!0}),Be.getMode()===te.DIRECT_SELECT?Ae.events.changeMode(te.SIMPLE_SELECT,void 0,{silent:!0}):Ae.store.render(),Be},Be.changeMode=function(qe,Rt){return Rt===void 0&&(Rt={}),qe===te.SIMPLE_SELECT&&Be.getMode()===te.SIMPLE_SELECT?(Cs(Rt.featureIds||[],Ae.store.getSelectedIds())||(Ae.store.setSelected(Rt.featureIds,{silent:!0}),Ae.store.render()),Be):(qe===te.DIRECT_SELECT&&Be.getMode()===te.DIRECT_SELECT&&Rt.featureId===Ae.store.getSelectedIds()[0]||Ae.events.changeMode(qe,Rt,{silent:!0}),Be)},Be.getMode=function(){return Ae.events.getMode()},Be.trash=function(){return Ae.events.trash({silent:!0}),Be},Be.combineFeatures=function(){return Ae.events.combineFeatures({silent:!0}),Be},Be.uncombineFeatures=function(){return Ae.events.uncombineFeatures({silent:!0}),Be},Be.setFeatureProperty=function(qe,Rt,kt){return Ae.store.setFeatureProperty(qe,Rt,kt),Be},Be}(ue,G),ue.api=G;var Pe=ut(ue);return G.onAdd=Pe.onAdd,G.onRemove=Pe.onRemove,G.types=Z,G.options=C,G};function ot(C){Uo(C,this)}return ot.modes=Ve,ot.constants=Me,ot.lib=uh,ot})})(Xz);var pU=Xz.exports;const Jz=eh(pU);Ym.accessToken="pk.eyJ1IjoiYWJpZXNwYW5hIiwiYSI6ImNsb3N4NzllYzAyOWYybWw5ZzNpNXlqaHkifQ.UxlTvUuSq9L5jt0jRtRR-A";const fU=({handler:t,isVisible:a,coordinates:s,setCoordinates:l,handleClearPolygon:f})=>{const g=Te.useRef(null),w=Te.useRef(null);return Te.useEffect(()=>{const I=new Ym.Map({container:g.current,style:"mapbox://styles/abiespana/cltfmyy4800pr01qn2r78be0e",center:[55.057714357334135,25.087631004515043],zoom:10,scrollZoom:!0}),o=new Jz({displayControlsDefault:!1,controls:{polygon:!0,trash:!0}});return I.addControl(o),I.on("load",()=>{I.addSource("draw-layer",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),I.addLayer({id:"draw-layer",type:"fill",source:"draw-layer",paint:{"fill-color":"#088","fill-opacity":.5}}),w.current=o,I.on("draw.create",M=>{const L=M.features[0].geometry.coordinates[0].map(O=>({lat:O[1],lng:O[0]}));l(O=>({...O,polygonCoordinates:L}))})}),o.add({type:"Feature",geometry:{type:"Polygon",coordinates:s.polygonCoordinates?[s.polygonCoordinates.map(M=>[M.lng,M.lat])]:[]}}),()=>{I.remove()}},[s]),q.jsx("div",{className:"popupMap",children:q.jsx(ql,{handlerClose:I=>{I.preventDefault(),t(!1)},isVisible:a,children:q.jsxs("div",{className:"popupMap__content",children:[q.jsx("button",{className:"popupMap__content-delete",onClick:f,children:q.jsx("img",{src:"/assets/ProjectPage/trash.svg",alt:"Image trash",width:16,height:16})}),q.jsx("div",{className:"popupMap__content-closeWrapper",children:q.jsx(Zc,{handler:()=>t(!1),children:q.jsx("img",{src:"/assets/ProjectPage/close.svg",alt:"close image",className:"popupMap__content-close",width:25,height:25})})}),q.jsx("div",{className:"popupMap__content-mapProject",children:q.jsx("div",{className:"popupMap__content-mapProjectContent",children:q.jsx("div",{ref:g,className:"popupMap__content-map"})})})]})})})},hU=({handler:t,isVisible:a,coordinates:s,setCoordinates:l})=>{const f=Te.useRef(null),g=Te.useRef(null);return Te.useEffect(()=>{const w=new Ym.Map({container:f.current,style:"mapbox://styles/abiespana/cltfmyy4800pr01qn2r78be0e",center:[55.057714357334135,25.087631004515043],zoom:10,scrollZoom:!0}),I=new Jz({displayControlsDefault:!1});return w.addControl(I),w.on("load",()=>{w.addSource("draw-layer",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),g.current=new Ym.Marker({color:"red"}).setLngLat([s.geoLocation.lng,s.geoLocation.lat]).addTo(w),w.on("click",o=>{const M=o.lngLat;l({...s,geoLocation:{lat:String(M.lat),lng:String(M.lng)}}),g.current?g.current.setLngLat([M.lng,M.lat]):g.current=new Ym.Marker({color:"red"}).setLngLat([M.lng,M.lat]).addTo(w)})}),()=>{w.remove()}},[]),q.jsx("div",{className:"popupMap",children:q.jsx(ql,{handlerClose:w=>{w.preventDefault(),t(!1)},isVisible:a,children:q.jsxs("div",{className:"popupMap__content",children:[q.jsx("div",{className:"popupMap__content-closeWrapper",children:q.jsx(Zc,{handler:()=>t(!1),children:q.jsx("img",{src:"/assets/ProjectPage/close.svg",alt:"close image",className:"popupMap__content-close",width:25,height:25})})}),q.jsx("div",{className:"popupMap__content-mapProject",children:q.jsx("div",{className:"popupMap__content-mapProjectContent",children:q.jsx("div",{ref:f,className:"popupMap__content-map"})})})]})})})},mU=({handler:t,isVisible:a,info:s,setInfo:l,value:f,refetch:g})=>{const[w,I]=Te.useState({name:"",description:"",website:"",phone:"",logoUrl:null}),o=()=>{I({name:"",description:"",website:"",phone:"",logoUrl:null})},[M,{isLoading:B,isError:L}]=JF(),O=()=>{if(!w.name||!w.description||!w.website||!w.phone||!w.logoUrl)return;const j=new FormData;j.append("name",w.name),j.append("description",w.description),j.append("website",w.website),j.append("phone",w.phone),j.append("logoUrl",w.logoUrl),M(j).unwrap().then(Z=>{g(),setPopupAddFloorPlan(!1)}).catch(Z=>{}),t(!1),o()};return q.jsx("div",{className:"popupAddDeveloper",children:q.jsx(ql,{handlerClose:j=>{j.preventDefault(),t(!1)},isVisible:a,children:q.jsxs("div",{className:"popupAddDeveloper__content",children:[q.jsx("h2",{className:"popupAddDeveloper__content-title",children:"Developer"}),q.jsxs("div",{className:"popupAddDeveloper__content-info",children:[w.logoUrl?q.jsx("div",{className:"floorPlan__information-imgWrapper",children:q.jsx("img",{src:typeof w.logoUrl=="string"?w.logoUrl:URL.createObjectURL(w.logoUrl),alt:"Image developer logo",width:130,height:130,className:"floorPlan__information-img"})}):q.jsx("div",{className:"floorPlan__information-upload",children:q.jsx(lU,{img:w,setImg:I,title:"add developer logo here"})}),q.jsxs("div",{className:"popupAddDeveloper__content-inputs",children:[q.jsx("input",{type:"text",placeholder:"Name developer",className:"floorPlan__information-input active",value:w.name,onChange:j=>I({...w,name:j.target.value})}),q.jsx("input",{type:"text",placeholder:"Name phone number",className:"floorPlan__information-input active",value:w.phone,onChange:j=>I({...w,phone:j.target.value})}),q.jsx("input",{type:"text",placeholder:"Website",className:"floorPlan__information-input active",value:w.website,onChange:j=>I({...w,website:j.target.value})}),q.jsx("input",{type:"text",placeholder:"Description",className:"floorPlan__information-input active",value:w.description,onChange:j=>I({...w,description:j.target.value})})]})]}),q.jsxs("div",{className:"popupAddDeveloper__content-buttons",children:[q.jsx("button",{className:"popupAddDeveloper__content-close",onClick:()=>{t(!1),o()},children:"cancel"}),q.jsx("button",{className:"popupAddDeveloper__content-save",onClick:O,children:"Save"})]})]})})})};function gU({toggleDropdown:t,info:a,setInfo:s,showSelectDev:l,setShowSelectDev:f,value:g,isQr:w}){const[I,o]=Te.useState(""),[M,B]=Te.useState(!1),{data:L,isLoading:O,isError:j,refetch:Z}=YF(),H=Te.useRef(null),te=W=>{H.current&&!H.current.contains(W.target)&&f(!1)};Te.useEffect(()=>(document.addEventListener("mousedown",te),()=>{document.removeEventListener("mousedown",te)}),[]);const J=W=>{W.preventDefault(),f(!1),B(!0)},K=L==null?void 0:L.filter(W=>W.name.toLowerCase().includes(I.toLowerCase()));return q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",ref:H,children:[!w&&q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Developer"}),q.jsxs("div",{className:"buildingInfo__changeSelect-select",children:[q.jsxs("div",{className:"buildingInfo__changeSelect-searchInputWrapper",children:[q.jsx("input",{type:"text",placeholder:`${g||"Developer name"}`,value:I,onChange:W=>o(W.target.value),className:"buildingInfo__changeSelect-searchInput",onClick:()=>t("developer")}),q.jsx("img",{src:"/assets/ProjectPage/arrowSelect.svg",alt:"img arrow",width:8,height:4,className:`buildingInfo__changeSelect-imgSelect ${l?"active":""}`})]}),l&&q.jsx("button",{className:"buildingInfo__changeSelect-addDeveloperBtn",onClick:J,children:"Add developer"}),q.jsx("div",{className:`buildingInfo__changeSelect-dropContent ${l?"activeDeveloper":""}`,children:K&&K.map((W,ee)=>q.jsxs("button",{className:`buildingInfo__changeSelect-btnDropSelect ${g===W._id?"active":""}`,onClick:()=>{f(!1),s({id:W._id,name:W.name,description:W.description,website:W.website,phone:W.phone,logoUrl:W.logoUrl})},children:[W.name,q.jsx("div",{className:`buildingInfo__changeSelect-point ${g===W._id?"active":""}`})]},ee))})]}),q.jsx(mU,{handler:B,isVisible:M,info:a,setInfo:s,value:g,refetch:Z})]})}const xT=["Al Barari","Al Barsha 1","Al Barsha 2","Al Barsha 3","Al Furjan","Al Habtoor City","Al Jaddaf","Al Khail Heights","Al Reem Island, Abu Dhabi","Al Sufouh 1","Al Sufouh 2","Al Wasl (City Walk)","Arabian Ranches","Arabian Ranches 2","Arabian Ranches 3","Arjan","Barsha South","Bluewaters Island","Business Bay","Cherrywoods","City of Arabia","Complex (Dubailand)","Creekside","Culture Village","Damac Hills","Damac Hills 2","Damac Lagoons","Discovery Gardens","Downtown Dubai","Dubai Creek Harbour","Dubai Design District","Dubai Festival City","Dubai Golf City","Dubai Harbour","Dubai Healthcare City","Dubai Hills","Dubai International","Dubai Investment Park","Dubai Islands","Dubai Marina","Dubai Maritime City","Dubai Production City","Dubai Science Park","Dubai Silicon Oasis","Dubai South","Dubai Sports City","Dubai Studio City","Dubai Water Canal","Dubai Waterfront","Emaar South","Emirates Hills","Expo City Dubai","Financial Centre","International City","Jebel Ali","Jumeirah","Jumeirah Beach Residence (JBR)","Jumeirah Golf Estates","Jumeirah Heights","Jumeirah Islands","Jumeirah Lake Towers (JLT)","Jumeirah Park","Jumeirah Village Circle (JVC)","Jumeirah Village Triangle (JVT)","La Mer","Liwan","Madina Jumeirah Living","Mina Al Arab, Ras Al Khaimah","Mina Rashid","Mirdif Hills","Mirdif Tulip","Mohammed Bin Rashid City (MBR)","Motor City","Mudon","Nad Al Sheba","Nshama","Old Town","Oman","Park Gate Residences","Palm Jumeirah","Ras Al Khor","Remraam","Rashid Yachts and Marina","Sharjah","Sheikh Zayed Road","The Greens","The Lakes","The Meadows","The Springs","The Sustainable City","The Valley","The Villa","The World Islands","Tilal Al Ghaf","Town Square","Villanova","Wadi Al Safa 5","YAS Island"];function bU({infoProject:t,setInfoProject:a}){const[s,l]=Te.useState(!1),[f,g]=Te.useState(xT),w=Te.useRef(null);Te.useEffect(()=>{const o=M=>{w.current&&!w.current.contains(M.target)&&l(!1)};return document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}},[]);const I=o=>{const M=o.target.value;a({...t,location:M}),g(xT.filter(B=>B.toLowerCase().includes(M.toLowerCase())))};return q.jsx("div",{className:"selectLocations",onClick:o=>o.stopPropagation(),children:q.jsxs("div",{className:"selectLocations__wrapper",children:[q.jsx("input",{ref:w,type:"text",placeholder:"Locations",className:"selectLocations__wrapper-input",value:t.location,onChange:I,onClick:()=>l(!0)}),q.jsx("div",{className:`selectLocations__wrapper-listWrapper ${s?"active":""}`,children:q.jsx("div",{className:`selectLocations__wrapper-list ${s?"active":""}`,children:f.map((o,M)=>q.jsx("span",{className:"selectLocations__wrapper-item",onClick:()=>{a({...t,location:o}),l(!1)},children:o},M))})})]})})}var Za;(function(t){t.Root="root",t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"})(Za||(Za={}));function _U(t){return t.type===Za.Tag||t.type===Za.Script||t.type===Za.Style}const yU=Za.Root,vU=Za.Text,xU=Za.Directive,wU=Za.Comment,SU=Za.Script,TU=Za.Style,EU=Za.Tag,IU=Za.CDATA,PU=Za.Doctype;class Kz{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(a){this.parent=a}get previousSibling(){return this.prev}set previousSibling(a){this.prev=a}get nextSibling(){return this.next}set nextSibling(a){this.next=a}cloneNode(a=!1){return aA(this,a)}}class i6 extends Kz{constructor(a){super(),this.data=a}get nodeValue(){return this.data}set nodeValue(a){this.data=a}}class Rx extends i6{constructor(){super(...arguments),this.type=Za.Text}get nodeType(){return 3}}class Qz extends i6{constructor(){super(...arguments),this.type=Za.Comment}get nodeType(){return 8}}class eA extends i6{constructor(a,s){super(s),this.name=a,this.type=Za.Directive}get nodeType(){return 1}}class o6 extends Kz{constructor(a){super(),this.children=a}get firstChild(){var a;return(a=this.children[0])!==null&&a!==void 0?a:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(a){this.children=a}}class tA extends o6{constructor(){super(...arguments),this.type=Za.CDATA}get nodeType(){return 4}}class kx extends o6{constructor(){super(...arguments),this.type=Za.Root}get nodeType(){return 9}}let nA=class extends o6{constructor(a,s,l=[],f=a==="script"?Za.Script:a==="style"?Za.Style:Za.Tag){super(l),this.name=a,this.attribs=s,this.type=f}get nodeType(){return 1}get tagName(){return this.name}set tagName(a){this.name=a}get attributes(){return Object.keys(this.attribs).map(a=>{var s,l;return{name:a,value:this.attribs[a],namespace:(s=this["x-attribsNamespace"])===null||s===void 0?void 0:s[a],prefix:(l=this["x-attribsPrefix"])===null||l===void 0?void 0:l[a]}})}};function c6(t){return _U(t)}function zU(t){return t.type===Za.CDATA}function AU(t){return t.type===Za.Text}function CU(t){return t.type===Za.Comment}function MU(t){return t.type===Za.Directive}function RU(t){return t.type===Za.Root}function aA(t,a=!1){let s;if(AU(t))s=new Rx(t.data);else if(CU(t))s=new Qz(t.data);else if(c6(t)){const l=a?rv(t.children):[],f=new nA(t.name,{...t.attribs},l);l.forEach(g=>g.parent=f),t.namespace!=null&&(f.namespace=t.namespace),t["x-attribsNamespace"]&&(f["x-attribsNamespace"]={...t["x-attribsNamespace"]}),t["x-attribsPrefix"]&&(f["x-attribsPrefix"]={...t["x-attribsPrefix"]}),s=f}else if(zU(t)){const l=a?rv(t.children):[],f=new tA(l);l.forEach(g=>g.parent=f),s=f}else if(RU(t)){const l=a?rv(t.children):[],f=new kx(l);l.forEach(g=>g.parent=f),t["x-mode"]&&(f["x-mode"]=t["x-mode"]),s=f}else if(MU(t)){const l=new eA(t.name,t.data);t["x-name"]!=null&&(l["x-name"]=t["x-name"],l["x-publicId"]=t["x-publicId"],l["x-systemId"]=t["x-systemId"]),s=l}else throw new Error(`Not implemented yet: ${t.type}`);return s.startIndex=t.startIndex,s.endIndex=t.endIndex,t.sourceCodeLocation!=null&&(s.sourceCodeLocation=t.sourceCodeLocation),s}function rv(t){const a=t.map(s=>aA(s,!0));for(let s=1;s<a.length;s++)a[s].prev=a[s-1],a[s-1].next=a[s];return a}const wT={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class kU{constructor(a,s,l){this.dom=[],this.root=new kx(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof s=="function"&&(l=s,s=wT),typeof a=="object"&&(s=a,a=void 0),this.callback=a??null,this.options=s??wT,this.elementCB=l??null}onparserinit(a){this.parser=a}onreset(){this.dom=[],this.root=new kx(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(a){this.handleCallback(a)}onclosetag(){this.lastNode=null;const a=this.tagStack.pop();this.options.withEndIndices&&(a.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(a)}onopentag(a,s){const l=this.options.xmlMode?Za.Tag:void 0,f=new nA(a,s,void 0,l);this.addNode(f),this.tagStack.push(f)}ontext(a){const{lastNode:s}=this;if(s&&s.type===Za.Text)s.data+=a,this.options.withEndIndices&&(s.endIndex=this.parser.endIndex);else{const l=new Rx(a);this.addNode(l),this.lastNode=l}}oncomment(a){if(this.lastNode&&this.lastNode.type===Za.Comment){this.lastNode.data+=a;return}const s=new Qz(a);this.addNode(s),this.lastNode=s}oncommentend(){this.lastNode=null}oncdatastart(){const a=new Rx(""),s=new tA([a]);this.addNode(s),a.parent=s,this.lastNode=a}oncdataend(){this.lastNode=null}onprocessinginstruction(a,s){const l=new eA(a,s);this.addNode(l)}handleCallback(a){if(typeof this.callback=="function")this.callback(a,this.dom);else if(a)throw a}addNode(a){const s=this.tagStack[this.tagStack.length-1],l=s.children[s.children.length-1];this.options.withStartIndices&&(a.startIndex=this.parser.startIndex),this.options.withEndIndices&&(a.endIndex=this.parser.endIndex),s.children.push(a),l&&(a.prev=l,l.next=a),a.parent=s,this.lastNode=null}}const LU=/\n/g;function DU(t){const a=[...t.matchAll(LU)].map(l=>l.index||0);a.unshift(-1);const s=Lx(a,0,a.length);return l=>rA(s,l)}function Lx(t,a,s){if(s-a==1)return{offset:t[a],index:a+1};const l=Math.ceil((a+s)/2),f=Lx(t,a,l),g=Lx(t,l,s);return{offset:f.offset,low:f,high:g}}function rA(t,a){return function(s){return Object.prototype.hasOwnProperty.call(s,"index")}(t)?{line:t.index,column:a-t.offset}:rA(t.high.offset<a?t.high:t.low,a)}function sA(t,a="",s={}){const l=typeof a!="string"?a:s,f=typeof a=="string"?a:"",g=t.map(OU),w=!!l.lineNumbers;return function(I,o=0){const M=w?DU(I):()=>({line:0,column:0});let B=o;const L=[];e:for(;B<I.length;){let O=!1;for(const j of g){j.regex.lastIndex=B;const Z=j.regex.exec(I);if(Z&&Z[0].length>0){if(!j.discard){const H=M(B),te=typeof j.replace=="string"?Z[0].replace(new RegExp(j.regex.source,j.regex.flags),j.replace):Z[0];L.push({state:f,name:j.name,text:te,offset:B,len:Z[0].length,line:H.line,column:H.column})}if(B=j.regex.lastIndex,O=!0,j.push){const H=j.push(I,B);L.push(...H.tokens),B=H.offset}if(j.pop)break e;break}}if(!O)break}return{tokens:L,offset:B,complete:I.length<=B}}}function OU(t,a){return{...t,regex:BU(t,a)}}function BU(t,a){if(t.name.length===0)throw new Error(`Rule #${a} has empty name, which is not allowed.`);if(function(s){return Object.prototype.hasOwnProperty.call(s,"regex")}(t))return function(s){if(s.global)throw new Error(`Regular expression /${s.source}/${s.flags} contains the global flag, which is not allowed.`);return s.sticky?s:new RegExp(s.source,s.flags+"y")}(t.regex);if(function(s){return Object.prototype.hasOwnProperty.call(s,"str")}(t)){if(t.str.length===0)throw new Error(`Rule #${a} ("${t.name}") has empty "str" property, which is not allowed.`);return new RegExp(ST(t.str),"y")}return new RegExp(ST(t.name),"y")}function ST(t){return t.replace(/[-[\]{}()*+!<=:?./\\^$|#\s,]/g,"\\$&")}function Wl(t,a){return(s,l)=>{let f=l,g;return l<s.tokens.length?(g=t(s.tokens[l],s,l),g!==void 0&&f++):a==null||a(s,l),g===void 0?{matched:!1}:{matched:!0,position:f,value:g}}}function l6(t,a){return t.matched?{matched:!0,position:t.position,value:a(t.value,t.position)}:t}function s_(t,a){return t.matched?a(t):t}function Oi(t,a){return(s,l)=>l6(t(s,l),(f,g)=>a(f,s,l,g))}function i_(t,a){return(s,l)=>{const f=t(s,l);return f.matched?f:{matched:!0,position:l,value:a}}}function U_(...t){return(a,s)=>{for(const l of t){const f=l(a,s);if(f.matched)return f}return{matched:!1}}}function Tp(t,a){return(s,l)=>{const f=t(s,l);return f.matched?f:a(s,l)}}function NU(t,a){return(s,l)=>{const f=[];let g=!0;do{const w=t(s,l);w.matched&&a(w.value,f.length+1,s,l,w.position)?(f.push(w.value),l=w.position):g=!1}while(g);return{matched:!0,position:l,value:f}}}function u6(t){return NU(t,()=>!0)}function FU(t){return li(t,u6(t),(a,s)=>[a,...s])}function li(t,a,s){return(l,f)=>s_(t(l,f),g=>l6(a(l,g.position),(w,I)=>s(g.value,w,l,f,I)))}function jU(t,a){return li(t,a,s=>s)}function TT(t,a){return li(t,a,(s,l)=>l)}function d6(t,a,s,l){return(f,g)=>s_(t(f,g),w=>s_(a(f,w.position),I=>l6(s(f,I.position),(o,M)=>l(w.value,I.value,o,f,g,M))))}function iA(t,a,s){return d6(t,a,s,(l,f)=>f)}function UU(...t){return(a,s)=>{const l=[];let f=s;for(const g of t){const w=g(a,f);if(w.matched)l.push(w.value),f=w.position;else return{matched:!1}}return{matched:!0,position:f,value:l}}}function VU(...t){return GU(UU(...t))}function GU(t){return Oi(t,a=>a.flatMap(s=>s))}function $U(t,a){return(s,l)=>{let f=!0,g=t,w=l;do{const I=a(g,s,w)(s,w);I.matched?(g=I.value,w=I.position):f=!1}while(f);return{matched:!0,position:w,value:g}}}function qU(t,a,s){return $U(t,l=>Oi(a,(f,g,w,I)=>s(l,f,g,w,I)))}function WU(t,a,s){return HU(t,l=>qU(l,li(a,s,(f,g)=>[f,g]),(f,[g,w])=>g(f,w)))}function HU(t,a){return(s,l)=>s_(t(s,l),f=>a(f.value,s,l,f.position)(s,f.position))}const ZU="(?:[ \\t\\r\\n\\f]*)",oA="(?:\\n|\\r\\n|\\r|\\f)",V_="[^\\x00-\\x7F]",X0="(?:\\\\[0-9a-f]{1,6}(?:\\r\\n|[ \\n\\r\\t\\f])?)",J0="(?:\\\\[^\\n\\r\\f0-9a-f])",YU=`(?:[_a-z]|${V_}|${X0}|${J0})`,cA=`(?:[_a-z0-9-]|${V_}|${X0}|${J0})`,XU=`(?:${cA}+)`,JU=`(?:[-]?${YU}${cA}*)`,KU=`'([^\\n\\r\\f\\\\']|\\\\${oA}|${V_}|${X0}|${J0})*'`,QU=`"([^\\n\\r\\f\\\\"]|\\\\${oA}|${V_}|${X0}|${J0})*"`,eV=sA([{name:"ws",regex:new RegExp(ZU)},{name:"hash",regex:new RegExp(`#${XU}`,"i")},{name:"ident",regex:new RegExp(JU,"i")},{name:"str1",regex:new RegExp(KU,"i")},{name:"str2",regex:new RegExp(QU,"i")},{name:"*"},{name:"."},{name:","},{name:"["},{name:"]"},{name:"="},{name:">"},{name:"|"},{name:"+"},{name:"~"},{name:"^"},{name:"$"}]),tV=sA([{name:"unicode",regex:new RegExp(X0,"i")},{name:"escape",regex:new RegExp(J0,"i")},{name:"any",regex:new RegExp("[\\s\\S]","i")}]);function lA([t,a,s],[l,f,g]){return[t+l,a+f,s+g]}function nV(t){return t.reduce(lA,[0,0,0])}const aV=Wl(t=>t.name==="unicode"?String.fromCodePoint(parseInt(t.text.slice(1),16)):void 0),rV=Wl(t=>t.name==="escape"?t.text.slice(1):void 0),sV=Wl(t=>t.name==="any"?t.text:void 0),iV=Oi(u6(U_(aV,rV,sV)),t=>t.join(""));function p6(t){const a=tV(t);return iV({tokens:a.tokens,options:void 0},0).value}function Tr(t){return Wl(a=>a.name===t?!0:void 0)}const f6=Wl(t=>t.name==="ws"?null:void 0),Dx=i_(f6,null);function P0(t){return iA(Dx,t,Dx)}const z0=Wl(t=>t.name==="ident"?p6(t.text):void 0),oV=Wl(t=>t.name==="hash"?p6(t.text.slice(1)):void 0),cV=Wl(t=>t.name.startsWith("str")?p6(t.text.slice(1,-1)):void 0),uA=jU(i_(z0,""),Tr("|")),h6=Tp(li(uA,z0,(t,a)=>({name:a,namespace:t})),Oi(z0,t=>({name:t,namespace:null}))),lV=Tp(li(uA,Tr("*"),t=>({type:"universal",namespace:t,specificity:[0,0,0]})),Oi(Tr("*"),()=>({type:"universal",namespace:null,specificity:[0,0,0]}))),uV=Oi(h6,({name:t,namespace:a})=>({type:"tag",name:t,namespace:a,specificity:[0,0,1]})),dV=li(Tr("."),z0,(t,a)=>({type:"class",name:a,specificity:[0,1,0]})),pV=Oi(oV,t=>({type:"id",name:t,specificity:[1,0,0]})),ET=Wl(t=>{if(t.name==="ident"){if(t.text==="i"||t.text==="I")return"i";if(t.text==="s"||t.text==="S")return"s"}}),fV=Tp(li(cV,i_(TT(Dx,ET),null),(t,a)=>({value:t,modifier:a})),li(z0,i_(TT(f6,ET),null),(t,a)=>({value:t,modifier:a}))),hV=U_(Oi(Tr("="),()=>"="),li(Tr("~"),Tr("="),()=>"~="),li(Tr("|"),Tr("="),()=>"|="),li(Tr("^"),Tr("="),()=>"^="),li(Tr("$"),Tr("="),()=>"$="),li(Tr("*"),Tr("="),()=>"*=")),mV=d6(Tr("["),P0(h6),Tr("]"),(t,{name:a,namespace:s})=>({type:"attrPresence",name:a,namespace:s,specificity:[0,1,0]})),gV=iA(Tr("["),d6(P0(h6),hV,P0(fV),({name:t,namespace:a},s,{value:l,modifier:f})=>({type:"attrValue",name:t,namespace:a,matcher:s,value:l,modifier:f,specificity:[0,1,0]})),Tr("]")),bV=Tp(mV,gV),_V=Tp(lV,uV),IT=U_(pV,dV,bV),PT=Oi(Tp(VU(_V,u6(IT)),FU(IT)),t=>({type:"compound",list:t,specificity:nV(t.map(a=>a.specificity))})),yV=U_(Oi(Tr(">"),()=>">"),Oi(Tr("+"),()=>"+"),Oi(Tr("~"),()=>"~"),li(Tr("|"),Tr("|"),()=>"||")),vV=Tp(P0(yV),Oi(f6,()=>" ")),xV=WU(PT,Oi(vV,t=>(a,s)=>({type:"compound",list:[...s.list,{type:"combinator",combinator:t,left:a,specificity:a.specificity}],specificity:lA(a.specificity,s.specificity)})),PT);function wV(t,a){if(!(typeof a=="string"||a instanceof String))throw new Error("Expected a selector string. Actual input is not a string!");const s=eV(a);if(!s.complete)throw new Error(`The input "${a}" was only partially tokenized, stopped at offset ${s.offset}!
`+zT(a,s.offset));const l=P0(t)({tokens:s.tokens,options:void 0},0);if(!l.matched)throw new Error(`No match for "${a}" input!`);if(l.position<s.tokens.length){const f=s.tokens[l.position];throw new Error(`The input "${a}" was only partially parsed, stopped at offset ${f.offset}!
`+zT(a,f.offset,f.len))}return l.value}function zT(t,a,s=1){return`${t.replace(/(\t)|(\r)|(\n)/g,(l,f,g)=>f?"":g?"":"")}
${"".padEnd(a)}${"^".repeat(s)}`}function SV(t){return wV(xV,t)}function qc(t){if(!t.type)throw new Error("This is not an AST node.");switch(t.type){case"universal":return Q1(t.namespace)+"*";case"tag":return Q1(t.namespace)+bf(t.name);case"class":return"."+bf(t.name);case"id":return"#"+bf(t.name);case"attrPresence":return`[${Q1(t.namespace)}${bf(t.name)}]`;case"attrValue":return`[${Q1(t.namespace)}${bf(t.name)}${t.matcher}"${TV(t.value)}"${t.modifier?t.modifier:""}]`;case"combinator":return qc(t.left)+t.combinator;case"compound":return t.list.reduce((a,s)=>s.type==="combinator"?qc(s)+a:a+qc(s),"");case"list":return t.list.map(qc).join(",")}}function Q1(t){return t||t===""?bf(t)+"|":""}function Sb(t){return`\\${t.codePointAt(0).toString(16)} `}function bf(t){return t.replace(/(^[0-9])|(^-[0-9])|(^-$)|([-0-9a-zA-Z_]|[^\x00-\x7F])|(\x00)|([\x01-\x1f]|\x7f)|([\s\S])/g,(a,s,l,f,g,w,I,o)=>s?Sb(s):l?"-"+Sb(l.slice(1)):f?"\\-":g||(w?"":I?Sb(I):"\\"+o))}function TV(t){return t.replace(/(")|(\\)|(\x00)|([\x01-\x1f]|\x7f)/g,(a,s,l,f,g)=>s?'\\"':l?"\\\\":f?"":Sb(g))}function Tb(t){if(!t.type)throw new Error("This is not an AST node.");switch(t.type){case"compound":{t.list.forEach(Tb),t.list.sort((a,s)=>pA(AT(a),AT(s)));break}case"combinator":{Tb(t.left);break}case"list":{t.list.forEach(Tb),t.list.sort((a,s)=>qc(a)<qc(s)?-1:1);break}}return t}function AT(t){switch(t.type){case"universal":return[1];case"tag":return[1];case"id":return[2];case"class":return[3,t.name];case"attrPresence":return[4,qc(t)];case"attrValue":return[5,qc(t)];case"combinator":return[15,qc(t)]}}function dA(t,a){return pA(t,a)}function pA(t,a){if(!Array.isArray(t)||!Array.isArray(a))throw new Error("Arguments must be arrays.");const s=t.length<a.length?t.length:a.length;for(let l=0;l<s;l++)if(t[l]!==a[l])return t[l]<a[l]?-1:1;return t.length-a.length}class CT{constructor(a){this.branches=Hf(EV(a))}build(a){return a(this.branches)}}function EV(t){const a=t.length,s=new Array(a);for(let l=0;l<a;l++){const[f,g]=t[l],w=IV(SV(f));s[l]={ast:w,terminal:{type:"terminal",valueContainer:{index:l,value:g,specificity:w.specificity}}}}return s}function IV(t){return fA(t),Tb(t),t}function fA(t){const a=[];t.list.forEach(s=>{switch(s.type){case"class":a.push({matcher:"~=",modifier:null,name:"class",namespace:null,specificity:s.specificity,type:"attrValue",value:s.name});break;case"id":a.push({matcher:"=",modifier:null,name:"id",namespace:null,specificity:s.specificity,type:"attrValue",value:s.name});break;case"combinator":fA(s.left),a.push(s);break;case"universal":break;default:a.push(s);break}}),t.list=a}function Hf(t){const a=[];for(;t.length;){const s=gA(t,w=>!0,hA),{matches:l,nonmatches:f,empty:g}=zV(t,s);t=f,l.length&&a.push(AV(s,l)),g.length&&a.push(...PV(g))}return a}function PV(t){const a=[];for(const s of t){const l=s.terminal;if(l.type==="terminal")a.push(l);else{const{matches:f,rest:g}=LV(l.cont,w=>w.type==="terminal");f.forEach(w=>a.push(w)),g.length&&(l.cont=g,a.push(l))}}return a}function zV(t,a){const s=[],l=[],f=[];for(const g of t){const w=g.ast.list;w.length?(w.some(o=>hA(o)===a)?s:l).push(g):f.push(g)}return{matches:s,nonmatches:l,empty:f}}function hA(t){switch(t.type){case"attrPresence":return`attrPresence ${t.name}`;case"attrValue":return`attrValue ${t.name}`;case"combinator":return`combinator ${t.combinator}`;default:return t.type}}function AV(t,a){if(t==="tag")return CV(a);if(t.startsWith("attrValue "))return RV(t.substring(10),a);if(t.startsWith("attrPresence "))return MV(t.substring(13),a);if(t==="combinator >")return MT(">",a);if(t==="combinator +")return MT("+",a);throw new Error(`Unsupported selector kind: ${t}`)}function CV(t){const a=m6(t,l=>l.type==="tag",l=>l.name);return{type:"tagName",variants:Object.entries(a).map(([l,f])=>({type:"variant",value:l,cont:Hf(f.items)}))}}function MV(t,a){for(const s of a)mA(s,l=>l.type==="attrPresence"&&l.name===t);return{type:"attrPresence",name:t,cont:Hf(a)}}function RV(t,a){const s=m6(a,f=>f.type==="attrValue"&&f.name===t,f=>`${f.matcher} ${f.modifier||""} ${f.value}`),l=[];for(const f of Object.values(s)){const g=f.oneSimpleSelector,w=kV(g),I=Hf(f.items);l.push({type:"matcher",matcher:g.matcher,modifier:g.modifier,value:g.value,predicate:w,cont:I})}return{type:"attrValue",name:t,matchers:l}}function kV(t){if(t.modifier==="i"){const a=t.value.toLowerCase();switch(t.matcher){case"=":return s=>a===s.toLowerCase();case"~=":return s=>s.toLowerCase().split(/[ \t]+/).includes(a);case"^=":return s=>s.toLowerCase().startsWith(a);case"$=":return s=>s.toLowerCase().endsWith(a);case"*=":return s=>s.toLowerCase().includes(a);case"|=":return s=>{const l=s.toLowerCase();return a===l||l.startsWith(a)&&l[a.length]==="-"}}}else{const a=t.value;switch(t.matcher){case"=":return s=>a===s;case"~=":return s=>s.split(/[ \t]+/).includes(a);case"^=":return s=>s.startsWith(a);case"$=":return s=>s.endsWith(a);case"*=":return s=>s.includes(a);case"|=":return s=>a===s||s.startsWith(a)&&s[a.length]==="-"}}}function MT(t,a){const s=m6(a,f=>f.type==="combinator"&&f.combinator===t,f=>qc(f.left)),l=[];for(const f of Object.values(s)){const g=Hf(f.items),w=f.oneSimpleSelector.left;l.push({ast:w,terminal:{type:"popElement",cont:g}})}return{type:"pushElement",combinator:t,cont:Hf(l)}}function m6(t,a,s){const l={};for(;t.length;){const f=gA(t,a,s),g=B=>a(B)&&s(B)===f,w=B=>B.ast.list.some(g),{matches:I,rest:o}=DV(t,w);let M=null;for(const B of I){const L=mA(B,g);M||(M=L)}if(M==null)throw new Error("No simple selector is found.");l[f]={oneSimpleSelector:M,items:I},t=o}return l}function mA(t,a){const s=t.ast.list,l=new Array(s.length);let f=-1;for(let w=s.length;w-- >0;)a(s[w])&&(l[w]=!0,f=w);if(f==-1)throw new Error("Couldn't find the required simple selector.");const g=s[f];return t.ast.list=s.filter((w,I)=>!l[I]),g}function gA(t,a,s){const l={};for(const w of t){const I={};for(const o of w.ast.list.filter(a))I[s(o)]=!0;for(const o of Object.keys(I))l[o]?l[o]++:l[o]=1}let f="",g=0;for(const w of Object.entries(l))w[1]>g&&(f=w[0],g=w[1]);return f}function LV(t,a){const s=[],l=[];for(const f of t)a(f)?s.push(f):l.push(f);return{matches:s,rest:l}}function DV(t,a){const s=[],l=[];for(const f of t)a(f)?s.push(f):l.push(f);return{matches:s,rest:l}}class OV{constructor(a){this.f=a}pickAll(a){return this.f(a)}pick1(a,s=!1){const l=this.f(a),f=l.length;if(f===0)return null;if(f===1)return l[0].value;const g=s?BV:NV;let w=l[0];for(let I=1;I<f;I++){const o=l[I];g(w,o)&&(w=o)}return w.value}}function BV(t,a){const s=dA(a.specificity,t.specificity);return s>0||s===0&&a.index<t.index}function NV(t,a){const s=dA(a.specificity,t.specificity);return s>0||s===0&&a.index>t.index}function RT(t){return new OV(sh(t))}function sh(t){const a=t.map(FV);return(s,...l)=>a.flatMap(f=>f(s,...l))}function FV(t){switch(t.type){case"terminal":{const a=[t.valueContainer];return(s,...l)=>a}case"tagName":return jV(t);case"attrValue":return VV(t);case"attrPresence":return UV(t);case"pushElement":return GV(t);case"popElement":return qV(t)}}function jV(t){const a={};for(const s of t.variants)a[s.value]=sh(s.cont);return(s,...l)=>{const f=a[s.name];return f?f(s,...l):[]}}function UV(t){const a=t.name,s=sh(t.cont);return(l,...f)=>Object.prototype.hasOwnProperty.call(l.attribs,a)?s(l,...f):[]}function VV(t){const a=[];for(const l of t.matchers){const f=l.predicate,g=sh(l.cont);a.push((w,I,...o)=>f(w)?g(I,...o):[])}const s=t.name;return(l,...f)=>{const g=l.attribs[s];return g||g===""?a.flatMap(w=>w(g,l,...f)):[]}}function GV(t){const a=sh(t.cont),s=t.combinator==="+"?bA:$V;return(l,...f)=>{const g=s(l);return g===null?[]:a(g,l,...f)}}const bA=t=>{const a=t.prev;return a===null?null:c6(a)?a:bA(a)},$V=t=>{const a=t.parent;return a&&c6(a)?a:null};function qV(t){const a=sh(t.cont);return(s,l,...f)=>a(l,...f)}const _A=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),yA=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(t=>t.charCodeAt(0)));var sv;const WV=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Ox=(sv=String.fromCodePoint)!==null&&sv!==void 0?sv:function(t){let a="";return t>65535&&(t-=65536,a+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),a+=String.fromCharCode(t),a};function vA(t){var a;return t>=55296&&t<=57343||t>1114111?65533:(a=WV.get(t))!==null&&a!==void 0?a:t}var us;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(us||(us={}));const HV=32;var pc;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(pc||(pc={}));function Bx(t){return t>=us.ZERO&&t<=us.NINE}function ZV(t){return t>=us.UPPER_A&&t<=us.UPPER_F||t>=us.LOWER_A&&t<=us.LOWER_F}function YV(t){return t>=us.UPPER_A&&t<=us.UPPER_Z||t>=us.LOWER_A&&t<=us.LOWER_Z||Bx(t)}function XV(t){return t===us.EQUALS||YV(t)}var cs;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(cs||(cs={}));var tp;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(tp||(tp={}));class JV{constructor(a,s,l){this.decodeTree=a,this.emitCodePoint=s,this.errors=l,this.state=cs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=tp.Strict}startEntity(a){this.decodeMode=a,this.state=cs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(a,s){switch(this.state){case cs.EntityStart:return a.charCodeAt(s)===us.NUM?(this.state=cs.NumericStart,this.consumed+=1,this.stateNumericStart(a,s+1)):(this.state=cs.NamedEntity,this.stateNamedEntity(a,s));case cs.NumericStart:return this.stateNumericStart(a,s);case cs.NumericDecimal:return this.stateNumericDecimal(a,s);case cs.NumericHex:return this.stateNumericHex(a,s);case cs.NamedEntity:return this.stateNamedEntity(a,s)}}stateNumericStart(a,s){return s>=a.length?-1:(a.charCodeAt(s)|HV)===us.LOWER_X?(this.state=cs.NumericHex,this.consumed+=1,this.stateNumericHex(a,s+1)):(this.state=cs.NumericDecimal,this.stateNumericDecimal(a,s))}addToNumericResult(a,s,l,f){if(s!==l){const g=l-s;this.result=this.result*Math.pow(f,g)+parseInt(a.substr(s,g),f),this.consumed+=g}}stateNumericHex(a,s){const l=s;for(;s<a.length;){const f=a.charCodeAt(s);if(Bx(f)||ZV(f))s+=1;else return this.addToNumericResult(a,l,s,16),this.emitNumericEntity(f,3)}return this.addToNumericResult(a,l,s,16),-1}stateNumericDecimal(a,s){const l=s;for(;s<a.length;){const f=a.charCodeAt(s);if(Bx(f))s+=1;else return this.addToNumericResult(a,l,s,10),this.emitNumericEntity(f,2)}return this.addToNumericResult(a,l,s,10),-1}emitNumericEntity(a,s){var l;if(this.consumed<=s)return(l=this.errors)===null||l===void 0||l.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(a===us.SEMI)this.consumed+=1;else if(this.decodeMode===tp.Strict)return 0;return this.emitCodePoint(vA(this.result),this.consumed),this.errors&&(a!==us.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(a,s){const{decodeTree:l}=this;let f=l[this.treeIndex],g=(f&pc.VALUE_LENGTH)>>14;for(;s<a.length;s++,this.excess++){const w=a.charCodeAt(s);if(this.treeIndex=wA(l,f,this.treeIndex+Math.max(1,g),w),this.treeIndex<0)return this.result===0||this.decodeMode===tp.Attribute&&(g===0||XV(w))?0:this.emitNotTerminatedNamedEntity();if(f=l[this.treeIndex],g=(f&pc.VALUE_LENGTH)>>14,g!==0){if(w===us.SEMI)return this.emitNamedEntityData(this.treeIndex,g,this.consumed+this.excess);this.decodeMode!==tp.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var a;const{result:s,decodeTree:l}=this,f=(l[s]&pc.VALUE_LENGTH)>>14;return this.emitNamedEntityData(s,f,this.consumed),(a=this.errors)===null||a===void 0||a.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(a,s,l){const{decodeTree:f}=this;return this.emitCodePoint(s===1?f[a]&~pc.VALUE_LENGTH:f[a+1],l),s===3&&this.emitCodePoint(f[a+2],l),l}end(){var a;switch(this.state){case cs.NamedEntity:return this.result!==0&&(this.decodeMode!==tp.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case cs.NumericDecimal:return this.emitNumericEntity(0,2);case cs.NumericHex:return this.emitNumericEntity(0,3);case cs.NumericStart:return(a=this.errors)===null||a===void 0||a.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case cs.EntityStart:return 0}}}function xA(t){let a="";const s=new JV(t,l=>a+=Ox(l));return function(f,g){let w=0,I=0;for(;(I=f.indexOf("&",I))>=0;){a+=f.slice(w,I),s.startEntity(g);const M=s.write(f,I+1);if(M<0){w=I+s.end();break}w=I+M,I=M===0?w+1:w}const o=a+f.slice(w);return a="",o}}function wA(t,a,s,l){const f=(a&pc.BRANCH_LENGTH)>>7,g=a&pc.JUMP_TABLE;if(f===0)return g!==0&&l===g?s:-1;if(g){const o=l-g;return o<0||o>=f?-1:t[s+o]-1}let w=s,I=w+f-1;for(;w<=I;){const o=w+I>>>1,M=t[o];if(M<l)w=o+1;else if(M>l)I=o-1;else return t[o+f]}return-1}xA(_A);xA(yA);var vn;(function(t){t[t.Tab=9]="Tab",t[t.NewLine=10]="NewLine",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationMark=33]="ExclamationMark",t[t.Number=35]="Number",t[t.Amp=38]="Amp",t[t.SingleQuote=39]="SingleQuote",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dash=45]="Dash",t[t.Slash=47]="Slash",t[t.Zero=48]="Zero",t[t.Nine=57]="Nine",t[t.Semi=59]="Semi",t[t.Lt=60]="Lt",t[t.Eq=61]="Eq",t[t.Gt=62]="Gt",t[t.Questionmark=63]="Questionmark",t[t.UpperA=65]="UpperA",t[t.LowerA=97]="LowerA",t[t.UpperF=70]="UpperF",t[t.LowerF=102]="LowerF",t[t.UpperZ=90]="UpperZ",t[t.LowerZ=122]="LowerZ",t[t.LowerX=120]="LowerX",t[t.OpeningSquareBracket=91]="OpeningSquareBracket"})(vn||(vn={}));var Dt;(function(t){t[t.Text=1]="Text",t[t.BeforeTagName=2]="BeforeTagName",t[t.InTagName=3]="InTagName",t[t.InSelfClosingTag=4]="InSelfClosingTag",t[t.BeforeClosingTagName=5]="BeforeClosingTagName",t[t.InClosingTagName=6]="InClosingTagName",t[t.AfterClosingTagName=7]="AfterClosingTagName",t[t.BeforeAttributeName=8]="BeforeAttributeName",t[t.InAttributeName=9]="InAttributeName",t[t.AfterAttributeName=10]="AfterAttributeName",t[t.BeforeAttributeValue=11]="BeforeAttributeValue",t[t.InAttributeValueDq=12]="InAttributeValueDq",t[t.InAttributeValueSq=13]="InAttributeValueSq",t[t.InAttributeValueNq=14]="InAttributeValueNq",t[t.BeforeDeclaration=15]="BeforeDeclaration",t[t.InDeclaration=16]="InDeclaration",t[t.InProcessingInstruction=17]="InProcessingInstruction",t[t.BeforeComment=18]="BeforeComment",t[t.CDATASequence=19]="CDATASequence",t[t.InSpecialComment=20]="InSpecialComment",t[t.InCommentLike=21]="InCommentLike",t[t.BeforeSpecialS=22]="BeforeSpecialS",t[t.SpecialStartSequence=23]="SpecialStartSequence",t[t.InSpecialTag=24]="InSpecialTag",t[t.BeforeEntity=25]="BeforeEntity",t[t.BeforeNumericEntity=26]="BeforeNumericEntity",t[t.InNamedEntity=27]="InNamedEntity",t[t.InNumericEntity=28]="InNumericEntity",t[t.InHexEntity=29]="InHexEntity"})(Dt||(Dt={}));function Ml(t){return t===vn.Space||t===vn.NewLine||t===vn.Tab||t===vn.FormFeed||t===vn.CarriageReturn}function eb(t){return t===vn.Slash||t===vn.Gt||Ml(t)}function kT(t){return t>=vn.Zero&&t<=vn.Nine}function KV(t){return t>=vn.LowerA&&t<=vn.LowerZ||t>=vn.UpperA&&t<=vn.UpperZ}function QV(t){return t>=vn.UpperA&&t<=vn.UpperF||t>=vn.LowerA&&t<=vn.LowerF}var $c;(function(t){t[t.NoValue=0]="NoValue",t[t.Unquoted=1]="Unquoted",t[t.Single=2]="Single",t[t.Double=3]="Double"})($c||($c={}));const Ai={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])};class eG{constructor({xmlMode:a=!1,decodeEntities:s=!0},l){this.cbs=l,this.state=Dt.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Dt.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=a,this.decodeEntities=s,this.entityTrie=a?yA:_A}reset(){this.state=Dt.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=Dt.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(a){this.offset+=this.buffer.length,this.buffer=a,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}getIndex(){return this.index}getSectionStart(){return this.sectionStart}stateText(a){a===vn.Lt||!this.decodeEntities&&this.fastForwardTo(vn.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=Dt.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&a===vn.Amp&&(this.state=Dt.BeforeEntity)}stateSpecialStartSequence(a){const s=this.sequenceIndex===this.currentSequence.length;if(!(s?eb(a):(a|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!s){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=Dt.InTagName,this.stateInTagName(a)}stateInSpecialTag(a){if(this.sequenceIndex===this.currentSequence.length){if(a===vn.Gt||Ml(a)){const s=this.index-this.currentSequence.length;if(this.sectionStart<s){const l=this.index;this.index=s,this.cbs.ontext(this.sectionStart,s),this.index=l}this.isSpecial=!1,this.sectionStart=s+2,this.stateInClosingTagName(a);return}this.sequenceIndex=0}(a|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Ai.TitleEnd?this.decodeEntities&&a===vn.Amp&&(this.state=Dt.BeforeEntity):this.fastForwardTo(vn.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(a===vn.Lt)}stateCDATASequence(a){a===Ai.Cdata[this.sequenceIndex]?++this.sequenceIndex===Ai.Cdata.length&&(this.state=Dt.InCommentLike,this.currentSequence=Ai.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=Dt.InDeclaration,this.stateInDeclaration(a))}fastForwardTo(a){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===a)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(a){a===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Ai.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=Dt.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):a!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(a){return this.xmlMode?!eb(a):KV(a)}startSpecial(a,s){this.isSpecial=!0,this.currentSequence=a,this.sequenceIndex=s,this.state=Dt.SpecialStartSequence}stateBeforeTagName(a){if(a===vn.ExclamationMark)this.state=Dt.BeforeDeclaration,this.sectionStart=this.index+1;else if(a===vn.Questionmark)this.state=Dt.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(a)){const s=a|32;this.sectionStart=this.index,!this.xmlMode&&s===Ai.TitleEnd[2]?this.startSpecial(Ai.TitleEnd,3):this.state=!this.xmlMode&&s===Ai.ScriptEnd[2]?Dt.BeforeSpecialS:Dt.InTagName}else a===vn.Slash?this.state=Dt.BeforeClosingTagName:(this.state=Dt.Text,this.stateText(a))}stateInTagName(a){eb(a)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Dt.BeforeAttributeName,this.stateBeforeAttributeName(a))}stateBeforeClosingTagName(a){Ml(a)||(a===vn.Gt?this.state=Dt.Text:(this.state=this.isTagStartChar(a)?Dt.InClosingTagName:Dt.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(a){(a===vn.Gt||Ml(a))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=Dt.AfterClosingTagName,this.stateAfterClosingTagName(a))}stateAfterClosingTagName(a){(a===vn.Gt||this.fastForwardTo(vn.Gt))&&(this.state=Dt.Text,this.baseState=Dt.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(a){a===vn.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=Dt.InSpecialTag,this.sequenceIndex=0):this.state=Dt.Text,this.baseState=this.state,this.sectionStart=this.index+1):a===vn.Slash?this.state=Dt.InSelfClosingTag:Ml(a)||(this.state=Dt.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(a){a===vn.Gt?(this.cbs.onselfclosingtag(this.index),this.state=Dt.Text,this.baseState=Dt.Text,this.sectionStart=this.index+1,this.isSpecial=!1):Ml(a)||(this.state=Dt.BeforeAttributeName,this.stateBeforeAttributeName(a))}stateInAttributeName(a){(a===vn.Eq||eb(a))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=Dt.AfterAttributeName,this.stateAfterAttributeName(a))}stateAfterAttributeName(a){a===vn.Eq?this.state=Dt.BeforeAttributeValue:a===vn.Slash||a===vn.Gt?(this.cbs.onattribend($c.NoValue,this.index),this.state=Dt.BeforeAttributeName,this.stateBeforeAttributeName(a)):Ml(a)||(this.cbs.onattribend($c.NoValue,this.index),this.state=Dt.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(a){a===vn.DoubleQuote?(this.state=Dt.InAttributeValueDq,this.sectionStart=this.index+1):a===vn.SingleQuote?(this.state=Dt.InAttributeValueSq,this.sectionStart=this.index+1):Ml(a)||(this.sectionStart=this.index,this.state=Dt.InAttributeValueNq,this.stateInAttributeValueNoQuotes(a))}handleInAttributeValue(a,s){a===s||!this.decodeEntities&&this.fastForwardTo(s)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s===vn.DoubleQuote?$c.Double:$c.Single,this.index),this.state=Dt.BeforeAttributeName):this.decodeEntities&&a===vn.Amp&&(this.baseState=this.state,this.state=Dt.BeforeEntity)}stateInAttributeValueDoubleQuotes(a){this.handleInAttributeValue(a,vn.DoubleQuote)}stateInAttributeValueSingleQuotes(a){this.handleInAttributeValue(a,vn.SingleQuote)}stateInAttributeValueNoQuotes(a){Ml(a)||a===vn.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend($c.Unquoted,this.index),this.state=Dt.BeforeAttributeName,this.stateBeforeAttributeName(a)):this.decodeEntities&&a===vn.Amp&&(this.baseState=this.state,this.state=Dt.BeforeEntity)}stateBeforeDeclaration(a){a===vn.OpeningSquareBracket?(this.state=Dt.CDATASequence,this.sequenceIndex=0):this.state=a===vn.Dash?Dt.BeforeComment:Dt.InDeclaration}stateInDeclaration(a){(a===vn.Gt||this.fastForwardTo(vn.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=Dt.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(a){(a===vn.Gt||this.fastForwardTo(vn.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=Dt.Text,this.sectionStart=this.index+1)}stateBeforeComment(a){a===vn.Dash?(this.state=Dt.InCommentLike,this.currentSequence=Ai.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=Dt.InDeclaration}stateInSpecialComment(a){(a===vn.Gt||this.fastForwardTo(vn.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=Dt.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(a){const s=a|32;s===Ai.ScriptEnd[3]?this.startSpecial(Ai.ScriptEnd,4):s===Ai.StyleEnd[3]?this.startSpecial(Ai.StyleEnd,4):(this.state=Dt.InTagName,this.stateInTagName(a))}stateBeforeEntity(a){this.entityExcess=1,this.entityResult=0,a===vn.Number?this.state=Dt.BeforeNumericEntity:a===vn.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=Dt.InNamedEntity,this.stateInNamedEntity(a))}stateInNamedEntity(a){if(this.entityExcess+=1,this.trieIndex=wA(this.entityTrie,this.trieCurrent,this.trieIndex+1,a),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];const s=this.trieCurrent&pc.VALUE_LENGTH;if(s){const l=(s>>14)-1;if(!this.allowLegacyEntity()&&a!==vn.Semi)this.trieIndex+=l;else{const f=this.index-this.entityExcess+1;f>this.sectionStart&&this.emitPartial(this.sectionStart,f),this.entityResult=this.trieIndex,this.trieIndex+=l,this.entityExcess=0,this.sectionStart=this.index+1,l===0&&this.emitNamedEntity()}}}emitNamedEntity(){if(this.state=this.baseState,this.entityResult===0)return;switch((this.entityTrie[this.entityResult]&pc.VALUE_LENGTH)>>14){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~pc.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}stateBeforeNumericEntity(a){(a|32)===vn.LowerX?(this.entityExcess++,this.state=Dt.InHexEntity):(this.state=Dt.InNumericEntity,this.stateInNumericEntity(a))}emitNumericEntity(a){const s=this.index-this.entityExcess-1;s+2+ +(this.state===Dt.InHexEntity)!==this.index&&(s>this.sectionStart&&this.emitPartial(this.sectionStart,s),this.sectionStart=this.index+Number(a),this.emitCodePoint(vA(this.entityResult))),this.state=this.baseState}stateInNumericEntity(a){a===vn.Semi?this.emitNumericEntity(!0):kT(a)?(this.entityResult=this.entityResult*10+(a-vn.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}stateInHexEntity(a){a===vn.Semi?this.emitNumericEntity(!0):kT(a)?(this.entityResult=this.entityResult*16+(a-vn.Zero),this.entityExcess++):QV(a)?(this.entityResult=this.entityResult*16+((a|32)-vn.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)}allowLegacyEntity(){return!this.xmlMode&&(this.baseState===Dt.Text||this.baseState===Dt.InSpecialTag)}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===Dt.Text||this.state===Dt.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===Dt.InAttributeValueDq||this.state===Dt.InAttributeValueSq||this.state===Dt.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const a=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case Dt.Text:{this.stateText(a);break}case Dt.SpecialStartSequence:{this.stateSpecialStartSequence(a);break}case Dt.InSpecialTag:{this.stateInSpecialTag(a);break}case Dt.CDATASequence:{this.stateCDATASequence(a);break}case Dt.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(a);break}case Dt.InAttributeName:{this.stateInAttributeName(a);break}case Dt.InCommentLike:{this.stateInCommentLike(a);break}case Dt.InSpecialComment:{this.stateInSpecialComment(a);break}case Dt.BeforeAttributeName:{this.stateBeforeAttributeName(a);break}case Dt.InTagName:{this.stateInTagName(a);break}case Dt.InClosingTagName:{this.stateInClosingTagName(a);break}case Dt.BeforeTagName:{this.stateBeforeTagName(a);break}case Dt.AfterAttributeName:{this.stateAfterAttributeName(a);break}case Dt.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(a);break}case Dt.BeforeAttributeValue:{this.stateBeforeAttributeValue(a);break}case Dt.BeforeClosingTagName:{this.stateBeforeClosingTagName(a);break}case Dt.AfterClosingTagName:{this.stateAfterClosingTagName(a);break}case Dt.BeforeSpecialS:{this.stateBeforeSpecialS(a);break}case Dt.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(a);break}case Dt.InSelfClosingTag:{this.stateInSelfClosingTag(a);break}case Dt.InDeclaration:{this.stateInDeclaration(a);break}case Dt.BeforeDeclaration:{this.stateBeforeDeclaration(a);break}case Dt.BeforeComment:{this.stateBeforeComment(a);break}case Dt.InProcessingInstruction:{this.stateInProcessingInstruction(a);break}case Dt.InNamedEntity:{this.stateInNamedEntity(a);break}case Dt.BeforeEntity:{this.stateBeforeEntity(a);break}case Dt.InHexEntity:{this.stateInHexEntity(a);break}case Dt.InNumericEntity:{this.stateInNumericEntity(a);break}default:this.stateBeforeNumericEntity(a)}this.index++}this.cleanup()}finish(){this.state===Dt.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const a=this.buffer.length+this.offset;this.state===Dt.InCommentLike?this.currentSequence===Ai.CdataEnd?this.cbs.oncdata(this.sectionStart,a,0):this.cbs.oncomment(this.sectionStart,a,0):this.state===Dt.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Dt.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===Dt.InTagName||this.state===Dt.BeforeAttributeName||this.state===Dt.BeforeAttributeValue||this.state===Dt.AfterAttributeName||this.state===Dt.InAttributeName||this.state===Dt.InAttributeValueSq||this.state===Dt.InAttributeValueDq||this.state===Dt.InAttributeValueNq||this.state===Dt.InClosingTagName||this.cbs.ontext(this.sectionStart,a)}emitPartial(a,s){this.baseState!==Dt.Text&&this.baseState!==Dt.InSpecialTag?this.cbs.onattribdata(a,s):this.cbs.ontext(a,s)}emitCodePoint(a){this.baseState!==Dt.Text&&this.baseState!==Dt.InSpecialTag?this.cbs.onattribentity(a):this.cbs.ontextentity(a)}}const mf=new Set(["input","option","optgroup","select","button","datalist","textarea"]),or=new Set(["p"]),LT=new Set(["thead","tbody"]),DT=new Set(["dd","dt"]),OT=new Set(["rt","rp"]),tG=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",or],["h1",or],["h2",or],["h3",or],["h4",or],["h5",or],["h6",or],["select",mf],["input",mf],["output",mf],["button",mf],["datalist",mf],["textarea",mf],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",DT],["dt",DT],["address",or],["article",or],["aside",or],["blockquote",or],["details",or],["div",or],["dl",or],["fieldset",or],["figcaption",or],["figure",or],["footer",or],["form",or],["header",or],["hr",or],["main",or],["nav",or],["ol",or],["pre",or],["section",or],["table",or],["ul",or],["rt",OT],["rp",OT],["tbody",LT],["tfoot",LT]]),nG=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),BT=new Set(["math","svg"]),NT=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),aG=/\s|\//;class rG{constructor(a,s={}){var l,f,g,w,I;this.options=s,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=a??{},this.lowerCaseTagNames=(l=s.lowerCaseTags)!==null&&l!==void 0?l:!s.xmlMode,this.lowerCaseAttributeNames=(f=s.lowerCaseAttributeNames)!==null&&f!==void 0?f:!s.xmlMode,this.tokenizer=new((g=s.Tokenizer)!==null&&g!==void 0?g:eG)(this.options,this),(I=(w=this.cbs).onparserinit)===null||I===void 0||I.call(w,this)}ontext(a,s){var l,f;const g=this.getSlice(a,s);this.endIndex=s-1,(f=(l=this.cbs).ontext)===null||f===void 0||f.call(l,g),this.startIndex=s}ontextentity(a){var s,l;const f=this.tokenizer.getSectionStart();this.endIndex=f-1,(l=(s=this.cbs).ontext)===null||l===void 0||l.call(s,Ox(a)),this.startIndex=f}isVoidElement(a){return!this.options.xmlMode&&nG.has(a)}onopentagname(a,s){this.endIndex=s;let l=this.getSlice(a,s);this.lowerCaseTagNames&&(l=l.toLowerCase()),this.emitOpenTag(l)}emitOpenTag(a){var s,l,f,g;this.openTagStart=this.startIndex,this.tagname=a;const w=!this.options.xmlMode&&tG.get(a);if(w)for(;this.stack.length>0&&w.has(this.stack[this.stack.length-1]);){const I=this.stack.pop();(l=(s=this.cbs).onclosetag)===null||l===void 0||l.call(s,I,!0)}this.isVoidElement(a)||(this.stack.push(a),BT.has(a)?this.foreignContext.push(!0):NT.has(a)&&this.foreignContext.push(!1)),(g=(f=this.cbs).onopentagname)===null||g===void 0||g.call(f,a),this.cbs.onopentag&&(this.attribs={})}endOpenTag(a){var s,l;this.startIndex=this.openTagStart,this.attribs&&((l=(s=this.cbs).onopentag)===null||l===void 0||l.call(s,this.tagname,this.attribs,a),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(a){this.endIndex=a,this.endOpenTag(!1),this.startIndex=a+1}onclosetag(a,s){var l,f,g,w,I,o;this.endIndex=s;let M=this.getSlice(a,s);if(this.lowerCaseTagNames&&(M=M.toLowerCase()),(BT.has(M)||NT.has(M))&&this.foreignContext.pop(),this.isVoidElement(M))!this.options.xmlMode&&M==="br"&&((f=(l=this.cbs).onopentagname)===null||f===void 0||f.call(l,"br"),(w=(g=this.cbs).onopentag)===null||w===void 0||w.call(g,"br",{},!0),(o=(I=this.cbs).onclosetag)===null||o===void 0||o.call(I,"br",!1));else{const B=this.stack.lastIndexOf(M);if(B!==-1)if(this.cbs.onclosetag){let L=this.stack.length-B;for(;L--;)this.cbs.onclosetag(this.stack.pop(),L!==0)}else this.stack.length=B;else!this.options.xmlMode&&M==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=s+1}onselfclosingtag(a){this.endIndex=a,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=a+1):this.onopentagend(a)}closeCurrentTag(a){var s,l;const f=this.tagname;this.endOpenTag(a),this.stack[this.stack.length-1]===f&&((l=(s=this.cbs).onclosetag)===null||l===void 0||l.call(s,f,!a),this.stack.pop())}onattribname(a,s){this.startIndex=a;const l=this.getSlice(a,s);this.attribname=this.lowerCaseAttributeNames?l.toLowerCase():l}onattribdata(a,s){this.attribvalue+=this.getSlice(a,s)}onattribentity(a){this.attribvalue+=Ox(a)}onattribend(a,s){var l,f;this.endIndex=s,(f=(l=this.cbs).onattribute)===null||f===void 0||f.call(l,this.attribname,this.attribvalue,a===$c.Double?'"':a===$c.Single?"'":a===$c.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(a){const s=a.search(aG);let l=s<0?a:a.substr(0,s);return this.lowerCaseTagNames&&(l=l.toLowerCase()),l}ondeclaration(a,s){this.endIndex=s;const l=this.getSlice(a,s);if(this.cbs.onprocessinginstruction){const f=this.getInstructionName(l);this.cbs.onprocessinginstruction(`!${f}`,`!${l}`)}this.startIndex=s+1}onprocessinginstruction(a,s){this.endIndex=s;const l=this.getSlice(a,s);if(this.cbs.onprocessinginstruction){const f=this.getInstructionName(l);this.cbs.onprocessinginstruction(`?${f}`,`?${l}`)}this.startIndex=s+1}oncomment(a,s,l){var f,g,w,I;this.endIndex=s,(g=(f=this.cbs).oncomment)===null||g===void 0||g.call(f,this.getSlice(a,s-l)),(I=(w=this.cbs).oncommentend)===null||I===void 0||I.call(w),this.startIndex=s+1}oncdata(a,s,l){var f,g,w,I,o,M,B,L,O,j;this.endIndex=s;const Z=this.getSlice(a,s-l);this.options.xmlMode||this.options.recognizeCDATA?((g=(f=this.cbs).oncdatastart)===null||g===void 0||g.call(f),(I=(w=this.cbs).ontext)===null||I===void 0||I.call(w,Z),(M=(o=this.cbs).oncdataend)===null||M===void 0||M.call(o)):((L=(B=this.cbs).oncomment)===null||L===void 0||L.call(B,`[CDATA[${Z}]]`),(j=(O=this.cbs).oncommentend)===null||j===void 0||j.call(O)),this.startIndex=s+1}onend(){var a,s;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let l=this.stack.length;l>0;this.cbs.onclosetag(this.stack[--l],!0));}(s=(a=this.cbs).onend)===null||s===void 0||s.call(a)}reset(){var a,s,l,f;(s=(a=this.cbs).onreset)===null||s===void 0||s.call(a),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(f=(l=this.cbs).onparserinit)===null||f===void 0||f.call(l,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(a){this.reset(),this.end(a)}getSlice(a,s){for(;a-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let l=this.buffers[0].slice(a-this.bufferOffset,s-this.bufferOffset);for(;s-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),l+=this.buffers[0].slice(0,s-this.bufferOffset);return l}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(a){var s,l;if(this.ended){(l=(s=this.cbs).onerror)===null||l===void 0||l.call(s,new Error(".write() after done!"));return}this.buffers.push(a),this.tokenizer.running&&(this.tokenizer.write(a),this.writeIndex++)}end(a){var s,l;if(this.ended){(l=(s=this.cbs).onerror)===null||l===void 0||l.call(s,new Error(".end() after done!"));return}a&&this.write(a),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(a){this.write(a)}done(a){this.end(a)}}const FT=/["&'<>$\x80-\uFFFF]/g,sG=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),iG=String.prototype.codePointAt!=null?(t,a)=>t.codePointAt(a):(t,a)=>(t.charCodeAt(a)&64512)===55296?(t.charCodeAt(a)-55296)*1024+t.charCodeAt(a+1)-56320+65536:t.charCodeAt(a);function SA(t){let a="",s=0,l;for(;(l=FT.exec(t))!==null;){const f=l.index,g=t.charCodeAt(f),w=sG.get(g);w!==void 0?(a+=t.substring(s,f)+w,s=f+1):(a+=`${t.substring(s,f)}&#x${iG(t,f).toString(16)};`,s=FT.lastIndex+=+((g&64512)===55296))}return a+t.substr(s)}function TA(t,a){return function(l){let f,g=0,w="";for(;f=t.exec(l);)g!==f.index&&(w+=l.substring(g,f.index)),w+=a.get(f[0].charCodeAt(0)),g=f.index+1;return w+l.substring(g)}}const oG=TA(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),cG=TA(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),lG=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),uG=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),dG=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function pG(t){return t.replace(/"/g,"&quot;")}function fG(t,a){var s;if(!t)return;const l=((s=a.encodeEntities)!==null&&s!==void 0?s:a.decodeEntities)===!1?pG:a.xmlMode||a.encodeEntities!=="utf8"?SA:oG;return Object.keys(t).map(f=>{var g,w;const I=(g=t[f])!==null&&g!==void 0?g:"";return a.xmlMode==="foreign"&&(f=(w=uG.get(f))!==null&&w!==void 0?w:f),!a.emptyAttrs&&!a.xmlMode&&I===""?f:`${f}="${l(I)}"`}).join(" ")}const jT=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function G_(t,a={}){const s="length"in t?t:[t];let l="";for(let f=0;f<s.length;f++)l+=hG(s[f],a);return l}function hG(t,a){switch(t.type){case yU:return G_(t.children,a);case PU:case xU:return _G(t);case wU:return xG(t);case IU:return vG(t);case SU:case TU:case EU:return bG(t,a);case vU:return yG(t,a)}}const mG=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),gG=new Set(["svg","math"]);function bG(t,a){var s;a.xmlMode==="foreign"&&(t.name=(s=lG.get(t.name))!==null&&s!==void 0?s:t.name,t.parent&&mG.has(t.parent.name)&&(a={...a,xmlMode:!1})),!a.xmlMode&&gG.has(t.name)&&(a={...a,xmlMode:"foreign"});let l=`<${t.name}`;const f=fG(t.attribs,a);return f&&(l+=` ${f}`),t.children.length===0&&(a.xmlMode?a.selfClosingTags!==!1:a.selfClosingTags&&jT.has(t.name))?(a.xmlMode||(l+=" "),l+="/>"):(l+=">",t.children.length>0&&(l+=G_(t.children,a)),(a.xmlMode||!jT.has(t.name))&&(l+=`</${t.name}>`)),l}function _G(t){return`<${t.data}>`}function yG(t,a){var s;let l=t.data||"";return((s=a.encodeEntities)!==null&&s!==void 0?s:a.decodeEntities)!==!1&&!(!a.xmlMode&&t.parent&&dG.has(t.parent.name))&&(l=a.xmlMode||a.encodeEntities!=="utf8"?SA(l):cG(l)),l}function vG(t){return`<![CDATA[${t.children[0].data}]]>`}function xG(t){return`<!--${t.data}-->`}function wG(t,a){const s=new kU(void 0,a);return new rG(s,a).end(t),s.root}var SG=function(a){return TG(a)&&!EG(a)};function TG(t){return!!t&&typeof t=="object"}function EG(t){var a=Object.prototype.toString.call(t);return a==="[object RegExp]"||a==="[object Date]"||zG(t)}var IG=typeof Symbol=="function"&&Symbol.for,PG=IG?Symbol.for("react.element"):60103;function zG(t){return t.$$typeof===PG}function AG(t){return Array.isArray(t)?[]:{}}function A0(t,a){return a.clone!==!1&&a.isMergeableObject(t)?Zf(AG(t),t,a):t}function CG(t,a,s){return t.concat(a).map(function(l){return A0(l,s)})}function MG(t,a){if(!a.customMerge)return Zf;var s=a.customMerge(t);return typeof s=="function"?s:Zf}function RG(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(a){return Object.propertyIsEnumerable.call(t,a)}):[]}function UT(t){return Object.keys(t).concat(RG(t))}function EA(t,a){try{return a in t}catch{return!1}}function kG(t,a){return EA(t,a)&&!(Object.hasOwnProperty.call(t,a)&&Object.propertyIsEnumerable.call(t,a))}function LG(t,a,s){var l={};return s.isMergeableObject(t)&&UT(t).forEach(function(f){l[f]=A0(t[f],s)}),UT(a).forEach(function(f){kG(t,f)||(EA(t,f)&&s.isMergeableObject(a[f])?l[f]=MG(f,s)(t[f],a[f],s):l[f]=A0(a[f],s))}),l}function Zf(t,a,s){s=s||{},s.arrayMerge=s.arrayMerge||CG,s.isMergeableObject=s.isMergeableObject||SG,s.cloneUnlessOtherwiseSpecified=A0;var l=Array.isArray(a),f=Array.isArray(t),g=l===f;return g?l?s.arrayMerge(t,a,s):LG(t,a,s):A0(a,s)}Zf.all=function(a,s){if(!Array.isArray(a))throw new Error("first argument should be an array");return a.reduce(function(l,f){return Zf(l,f,s)},{})};var DG=Zf,OG=DG;const IA=eh(OG);function g6(t,a,s=()=>{}){if(t===void 0){const l=function(...f){return a(l,...f)};return l}return t>=0?function(...l){return a(g6(t-1,a,s),...l)}:s}function PA(t,a){let s=0,l=t.length;for(;s<l&&t[s]===a;)++s;for(;l>s&&t[l-1]===a;)--l;return s>0||l<t.length?t.substring(s,l):t}function BG(t,a){let s=t.length;for(;s>0&&t[s-1]===a;)--s;return s<t.length?t.substring(0,s):t}function NG(t){return t.replace(/[\s\S]/g,a=>"\\u"+a.charCodeAt().toString(16).padStart(4,"0"))}function zA(t,a){const s=new Map;for(let l=t.length;l-- >0;){const f=t[l],g=a(f);s.set(g,s.has(g)?IA(f,s.get(g),{arrayMerge:FG}):f)}return[...s.values()].reverse()}const FG=(t,a,s)=>[...a];function Yf(t,a){for(const s of a){if(!t)return;t=t[s]}return t}function VT(t,a="a",s=26){const l=[];do t-=1,l.push(t%s),t=t/s>>0;while(t>0);const f=a.charCodeAt(0);return l.reverse().map(g=>String.fromCharCode(f+g)).join("")}const iv=["I","X","C","M"],GT=["V","L","D"];function $T(t){return[...t+""].map(a=>+a).reverse().map((a,s)=>a%5<4?(a<5?"":GT[s])+iv[s].repeat(a%5):iv[s]+(a<5?GT[s]:iv[s+1])).reverse().join("")}class AA{constructor(a,s=void 0){this.lines=[],this.nextLineWords=[],this.maxLineLength=s||a.wordwrap||Number.MAX_VALUE,this.nextLineAvailableChars=this.maxLineLength,this.wrapCharacters=Yf(a,["longWordSplit","wrapCharacters"])||[],this.forceWrapOnLimit=Yf(a,["longWordSplit","forceWrapOnLimit"])||!1,this.stashedSpace=!1,this.wordBreakOpportunity=!1}pushWord(a,s=!1){this.nextLineAvailableChars<=0&&!s&&this.startNewLine();const l=this.nextLineWords.length===0,f=a.length+(l?0:1);if(f<=this.nextLineAvailableChars||s)this.nextLineWords.push(a),this.nextLineAvailableChars-=f;else{const[g,...w]=this.splitLongWord(a);l||this.startNewLine(),this.nextLineWords.push(g),this.nextLineAvailableChars-=g.length;for(const I of w)this.startNewLine(),this.nextLineWords.push(I),this.nextLineAvailableChars-=I.length}}popWord(){const a=this.nextLineWords.pop();if(a!==void 0){const s=this.nextLineWords.length===0,l=a.length+(s?0:1);this.nextLineAvailableChars+=l}return a}concatWord(a,s=!1){if(this.wordBreakOpportunity&&a.length>this.nextLineAvailableChars)this.pushWord(a,s),this.wordBreakOpportunity=!1;else{const l=this.popWord();this.pushWord(l?l.concat(a):a,s)}}startNewLine(a=1){this.lines.push(this.nextLineWords),a>1&&this.lines.push(...Array.from({length:a-1},()=>[])),this.nextLineWords=[],this.nextLineAvailableChars=this.maxLineLength}isEmpty(){return this.lines.length===0&&this.nextLineWords.length===0}clear(){this.lines.length=0,this.nextLineWords.length=0,this.nextLineAvailableChars=this.maxLineLength}toString(){return[...this.lines,this.nextLineWords].map(a=>a.join(" ")).join(`
`)}splitLongWord(a){const s=[];let l=0;for(;a.length>this.maxLineLength;){const f=a.substring(0,this.maxLineLength),g=a.substring(this.maxLineLength),w=f.lastIndexOf(this.wrapCharacters[l]);if(w>-1)a=f.substring(w+1)+g,s.push(f.substring(0,w+1));else if(l++,l<this.wrapCharacters.length)a=f+g;else{if(this.forceWrapOnLimit){if(s.push(f),a=g,a.length>this.maxLineLength)continue}else a=f+g;break}}return s.push(a),s}}class K0{constructor(a=null){this.next=a}getRoot(){return this.next?this.next:this}}class Vc extends K0{constructor(a,s=null,l=1,f=void 0){super(s),this.leadingLineBreaks=l,this.inlineTextBuilder=new AA(a,f),this.rawText="",this.stashedLineBreaks=0,this.isPre=s&&s.isPre,this.isNoWrap=s&&s.isNoWrap}}class qT extends Vc{constructor(a,s=null,{interRowLineBreaks:l=1,leadingLineBreaks:f=2,maxLineLength:g=void 0,maxPrefixLength:w=0,prefixAlign:I="left"}={}){super(a,s,f,g),this.maxPrefixLength=w,this.prefixAlign=I,this.interRowLineBreaks=l}}class np extends Vc{constructor(a,s=null,{leadingLineBreaks:l=1,maxLineLength:f=void 0,prefix:g=""}={}){super(a,s,l,f),this.prefix=g}}class WT extends K0{constructor(a=null){super(a),this.rows=[],this.isPre=a&&a.isPre,this.isNoWrap=a&&a.isNoWrap}}class HT extends K0{constructor(a=null){super(a),this.cells=[],this.isPre=a&&a.isPre,this.isNoWrap=a&&a.isNoWrap}}class ap extends K0{constructor(a,s=null,l=void 0){super(s),this.inlineTextBuilder=new AA(a,l),this.rawText="",this.stashedLineBreaks=0,this.isPre=s&&s.isPre,this.isNoWrap=s&&s.isNoWrap}}class jG extends K0{constructor(a=null,s){super(a),this.transform=s}}function UG(t){return[...t].map(a=>"\\u"+a.charCodeAt(0).toString(16).padStart(4,"0")).join("")}class VG{constructor(a){this.whitespaceChars=a.preserveNewlines?a.whitespaceCharacters.replace(/\n/g,""):a.whitespaceCharacters;const s=UG(this.whitespaceChars);if(this.leadingWhitespaceRe=new RegExp(`^[${s}]`),this.trailingWhitespaceRe=new RegExp(`[${s}]$`),this.allWhitespaceOrEmptyRe=new RegExp(`^[${s}]*$`),this.newlineOrNonWhitespaceRe=new RegExp(`(\\n|[^\\n${s}])`,"g"),this.newlineOrNonNewlineStringRe=new RegExp("(\\n|[^\\n]+)","g"),a.preserveNewlines){const l=new RegExp(`\\n|[^\\n${s}]+`,"gm");this.shrinkWrapAdd=function(f,g,w=o=>o,I=!1){if(!f)return;const o=g.stashedSpace;let M=!1,B=l.exec(f);if(B)for(M=!0,B[0]===`
`?g.startNewLine():o||this.testLeadingWhitespace(f)?g.pushWord(w(B[0]),I):g.concatWord(w(B[0]),I);(B=l.exec(f))!==null;)B[0]===`
`?g.startNewLine():g.pushWord(w(B[0]),I);g.stashedSpace=o&&!M||this.testTrailingWhitespace(f)}}else{const l=new RegExp(`[^${s}]+`,"g");this.shrinkWrapAdd=function(f,g,w=o=>o,I=!1){if(!f)return;const o=g.stashedSpace;let M=!1,B=l.exec(f);if(B)for(M=!0,o||this.testLeadingWhitespace(f)?g.pushWord(w(B[0]),I):g.concatWord(w(B[0]),I);(B=l.exec(f))!==null;)g.pushWord(w(B[0]),I);g.stashedSpace=o&&!M||this.testTrailingWhitespace(f)}}}addLiteral(a,s,l=!0){if(!a)return;const f=s.stashedSpace;let g=!1,w=this.newlineOrNonNewlineStringRe.exec(a);if(w)for(g=!0,w[0]===`
`?s.startNewLine():f?s.pushWord(w[0],l):s.concatWord(w[0],l);(w=this.newlineOrNonNewlineStringRe.exec(a))!==null;)w[0]===`
`?s.startNewLine():s.pushWord(w[0],l);s.stashedSpace=f&&!g}testLeadingWhitespace(a){return this.leadingWhitespaceRe.test(a)}testTrailingWhitespace(a){return this.trailingWhitespaceRe.test(a)}testContainsWords(a){return!this.allWhitespaceOrEmptyRe.test(a)}countNewlinesNoWords(a){this.newlineOrNonWhitespaceRe.lastIndex=0;let s=0,l;for(;(l=this.newlineOrNonWhitespaceRe.exec(a))!==null;)if(l[0]===`
`)s++;else return 0;return s}}class GG{constructor(a,s,l=void 0){this.options=a,this.picker=s,this.metadata=l,this.whitespaceProcessor=new VG(a),this._stackItem=new Vc(a),this._wordTransformer=void 0}pushWordTransform(a){this._wordTransformer=new jG(this._wordTransformer,a)}popWordTransform(){if(!this._wordTransformer)return;const a=this._wordTransformer.transform;return this._wordTransformer=this._wordTransformer.next,a}startNoWrap(){this._stackItem.isNoWrap=!0}stopNoWrap(){this._stackItem.isNoWrap=!1}_getCombinedWordTransformer(){const a=this._wordTransformer?l=>CA(l,this._wordTransformer):void 0,s=this.options.encodeCharacters;return a?s?l=>s(a(l)):a:s}_popStackItem(){const a=this._stackItem;return this._stackItem=a.next,a}addLineBreak(){(this._stackItem instanceof Vc||this._stackItem instanceof np||this._stackItem instanceof ap)&&(this._stackItem.isPre?this._stackItem.rawText+=`
`:this._stackItem.inlineTextBuilder.startNewLine())}addWordBreakOpportunity(){(this._stackItem instanceof Vc||this._stackItem instanceof np||this._stackItem instanceof ap)&&(this._stackItem.inlineTextBuilder.wordBreakOpportunity=!0)}addInline(a,{noWordTransform:s=!1}={}){if(this._stackItem instanceof Vc||this._stackItem instanceof np||this._stackItem instanceof ap){if(this._stackItem.isPre){this._stackItem.rawText+=a;return}if(!(a.length===0||this._stackItem.stashedLineBreaks&&!this.whitespaceProcessor.testContainsWords(a))){if(this.options.preserveNewlines){const l=this.whitespaceProcessor.countNewlinesNoWords(a);if(l>0){this._stackItem.inlineTextBuilder.startNewLine(l);return}}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.shrinkWrapAdd(a,this._stackItem.inlineTextBuilder,s?void 0:this._getCombinedWordTransformer(),this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}}addLiteral(a){if((this._stackItem instanceof Vc||this._stackItem instanceof np||this._stackItem instanceof ap)&&a.length!==0){if(this._stackItem.isPre){this._stackItem.rawText+=a;return}this._stackItem.stashedLineBreaks&&this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks),this.whitespaceProcessor.addLiteral(a,this._stackItem.inlineTextBuilder,this._stackItem.isNoWrap),this._stackItem.stashedLineBreaks=0}}openBlock({leadingLineBreaks:a=1,reservedLineLength:s=0,isPre:l=!1}={}){const f=Math.max(20,this._stackItem.inlineTextBuilder.maxLineLength-s);this._stackItem=new Vc(this.options,this._stackItem,a,f),l&&(this._stackItem.isPre=!0)}closeBlock({trailingLineBreaks:a=1,blockTransform:s=void 0}={}){const l=this._popStackItem(),f=s?s(Qd(l)):Qd(l);tb(this._stackItem,f,l.leadingLineBreaks,Math.max(l.stashedLineBreaks,a))}openList({maxPrefixLength:a=0,prefixAlign:s="left",interRowLineBreaks:l=1,leadingLineBreaks:f=2}={}){this._stackItem=new qT(this.options,this._stackItem,{interRowLineBreaks:l,leadingLineBreaks:f,maxLineLength:this._stackItem.inlineTextBuilder.maxLineLength,maxPrefixLength:a,prefixAlign:s})}openListItem({prefix:a=""}={}){if(!(this._stackItem instanceof qT))throw new Error("Can't add a list item to something that is not a list! Check the formatter.");const s=this._stackItem,l=Math.max(a.length,s.maxPrefixLength),f=Math.max(20,s.inlineTextBuilder.maxLineLength-l);this._stackItem=new np(this.options,s,{prefix:a,maxLineLength:f,leadingLineBreaks:s.interRowLineBreaks})}closeListItem(){const a=this._popStackItem(),s=a.next,l=Math.max(a.prefix.length,s.maxPrefixLength),f=`
`+" ".repeat(l),w=(s.prefixAlign==="right"?a.prefix.padStart(l):a.prefix.padEnd(l))+Qd(a).replace(/\n/g,f);tb(s,w,a.leadingLineBreaks,Math.max(a.stashedLineBreaks,s.interRowLineBreaks))}closeList({trailingLineBreaks:a=2}={}){const s=this._popStackItem(),l=Qd(s);l&&tb(this._stackItem,l,s.leadingLineBreaks,a)}openTable(){this._stackItem=new WT(this._stackItem)}openTableRow(){if(!(this._stackItem instanceof WT))throw new Error("Can't add a table row to something that is not a table! Check the formatter.");this._stackItem=new HT(this._stackItem)}openTableCell({maxColumnWidth:a=void 0}={}){if(!(this._stackItem instanceof HT))throw new Error("Can't add a table cell to something that is not a table row! Check the formatter.");this._stackItem=new ap(this.options,this._stackItem,a)}closeTableCell({colspan:a=1,rowspan:s=1}={}){const l=this._popStackItem(),f=PA(Qd(l),`
`);l.next.cells.push({colspan:a,rowspan:s,text:f})}closeTableRow(){const a=this._popStackItem();a.next.rows.push(a.cells)}closeTable({tableToString:a,leadingLineBreaks:s=2,trailingLineBreaks:l=2}){const f=this._popStackItem(),g=a(f.rows);g&&tb(this._stackItem,g,s,l)}toString(){return Qd(this._stackItem.getRoot())}}function Qd(t){if(!(t instanceof Vc||t instanceof np||t instanceof ap))throw new Error("Only blocks, list items and table cells can be requested for text contents.");return t.inlineTextBuilder.isEmpty()?t.rawText:t.rawText+t.inlineTextBuilder.toString()}function tb(t,a,s,l){if(!(t instanceof Vc||t instanceof np||t instanceof ap))throw new Error("Only blocks, list items and table cells can contain text.");const f=Qd(t),g=Math.max(t.stashedLineBreaks,s);t.inlineTextBuilder.clear(),f?t.rawText=f+`
`.repeat(g)+a:(t.rawText=a,t.leadingLineBreaks=g),t.stashedLineBreaks=l}function CA(t,a){return a?CA(a.transform(t),a.next):t}function $G(t={}){const a=t.selectors.filter(w=>!w.format);if(a.length)throw new Error("Following selectors have no specified format: "+a.map(w=>`\`${w.selector}\``).join(", "));const s=new CT(t.selectors.map(w=>[w.selector,w])).build(RT);typeof t.encodeCharacters!="function"&&(t.encodeCharacters=ZG(t.encodeCharacters));const l=new CT(t.baseElements.selectors.map((w,I)=>[w,I+1])).build(RT);function f(w){return WG(w,t,l)}const g=g6(t.limits.maxDepth,HG,function(w,I){I.addInline(t.limits.ellipsis||"")});return function(w,I=void 0){return qG(w,I,t,s,f,g)}}function qG(t,a,s,l,f,g){const w=s.limits.maxInputLength;w&&t&&t.length>w&&(console.warn(`Input length ${t.length} is above allowed limit of ${w}. Truncating without ellipsis.`),t=t.substring(0,w));const I=wG(t,{decodeEntities:s.decodeEntities}),o=f(I.children),M=new GG(s,l,a);return g(o,M),M.toString()}function WG(t,a,s){const l=[];function f(w,I){I=I.slice(0,a.limits.maxChildNodes);for(const o of I){if(o.type!=="tag")continue;const M=s.pick1(o);if(M>0?l.push({selectorIndex:M,element:o}):o.children&&w(o.children),l.length>=a.limits.maxBaseElements)return}}return g6(a.limits.maxDepth,f)(t),a.baseElements.orderBy!=="occurrence"&&l.sort((w,I)=>w.selectorIndex-I.selectorIndex),a.baseElements.returnDomByDefault&&l.length===0?t:l.map(w=>w.element)}function HG(t,a,s){if(!a)return;const l=s.options;a.length>l.limits.maxChildNodes&&(a=a.slice(0,l.limits.maxChildNodes),a.push({data:l.limits.ellipsis,type:"text"}));for(const g of a)switch(g.type){case"text":{s.addInline(g.data);break}case"tag":{const w=s.picker.pick1(g),I=l.formatters[w.format];I(g,t,s,w.options||{});break}}}function ZG(t){if(!t||Object.keys(t).length===0)return;const a=Object.entries(t).filter(([,g])=>g!==!1),s=new RegExp(a.map(([g])=>`(${NG([...g][0])})`).join("|"),"g"),l=a.map(([,g])=>g),f=(g,...w)=>l[w.findIndex(I=>I)];return g=>g.replace(s,f)}function YG(t,a,s,l){}function XG(t,a,s,l){s.addLiteral(l.string||"")}function JG(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks||2}),s.addLiteral(l.string||""),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2})}function KG(t,a,s,l){a(t.children,s)}function QG(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks||2}),a(t.children,s),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2})}function MA(t){const a=t.attribs&&t.attribs.length?" "+Object.entries(t.attribs).map(([s,l])=>l===""?s:`${s}=${l.replace(/"/g,"&quot;")}`).join(" "):"";return`<${t.name}${a}>`}function RA(t){return`</${t.name}>`}function e$(t,a,s,l){s.startNoWrap(),s.addLiteral(MA(t)),s.stopNoWrap(),a(t.children,s),s.startNoWrap(),s.addLiteral(RA(t)),s.stopNoWrap()}function t$(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks||2}),s.startNoWrap(),s.addLiteral(MA(t)),s.stopNoWrap(),a(t.children,s),s.startNoWrap(),s.addLiteral(RA(t)),s.stopNoWrap(),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2})}function n$(t,a,s,l){s.startNoWrap(),s.addLiteral(G_(t,{decodeEntities:s.options.decodeEntities})),s.stopNoWrap()}function a$(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks||2}),s.startNoWrap(),s.addLiteral(G_(t,{decodeEntities:s.options.decodeEntities})),s.stopNoWrap(),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2})}function r$(t,a,s,l){s.addLiteral(l.prefix||""),a(t.children,s),s.addLiteral(l.suffix||"")}var s$=Object.freeze({__proto__:null,block:QG,blockHtml:a$,blockString:JG,blockTag:t$,inline:KG,inlineHtml:n$,inlineString:XG,inlineSurround:r$,inlineTag:e$,skip:YG});function o_(t,a){return t[a]||(t[a]=[]),t[a]}function i$(t,a=0){for(;t[a];)a++;return a}function o$(t,a){for(let s=0;s<a;s++){const l=o_(t,s);for(let f=0;f<s;f++){const g=o_(t,f);if(l[f]||g[s]){const w=l[f];l[f]=g[s],g[s]=w}}}}function c$(t,a,s,l){for(let f=0;f<t.rowspan;f++){const g=o_(a,s+f);for(let w=0;w<t.colspan;w++)g[l+w]=t}}function Nx(t,a){return t[a]===void 0&&(t[a]=a===0?0:1+Nx(t,a-1)),t[a]}function ZT(t,a,s,l){t[a+s]=Math.max(Nx(t,a+s),Nx(t,a)+l)}function l$(t,a,s){const l=[];let f=0;const g=t.length,w=[0];for(let M=0;M<g;M++){const B=o_(l,M),L=t[M];let O=0;for(let j=0;j<L.length;j++){const Z=L[j];O=i$(B,O),c$(Z,l,M,O),O+=Z.colspan,Z.lines=Z.text.split(`
`);const H=Z.lines.length;ZT(w,M,Z.rowspan,H+a)}f=B.length>f?B.length:f}o$(l,g>f?g:f);const I=[],o=[0];for(let M=0;M<f;M++){let B=0,L;const O=Math.min(g,l[M].length);for(;B<O;)if(L=l[M][B],L){if(!L.rendered){let j=0;for(let Z=0;Z<L.lines.length;Z++){const H=L.lines[Z],te=w[B]+Z;I[te]=(I[te]||"").padEnd(o[M])+H,j=H.length>j?H.length:j}ZT(o,M,L.colspan,j+s),L.rendered=!0}B+=L.rowspan}else{const j=w[B];I[j]=I[j]||"",B++}}return I.join(`
`)}function u$(t,a,s,l){s.addLineBreak()}function d$(t,a,s,l){s.addWordBreakOpportunity()}function p$(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks||2}),s.addInline("-".repeat(l.length||s.options.wordwrap||40)),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2})}function f$(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks||2}),a(t.children,s),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2})}function h$(t,a,s,l){s.openBlock({isPre:!0,leadingLineBreaks:l.leadingLineBreaks||2}),a(t.children,s),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2})}function m$(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks||2}),l.uppercase!==!1?(s.pushWordTransform(f=>f.toUpperCase()),a(t.children,s),s.popWordTransform()):a(t.children,s),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2})}function g$(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks||2,reservedLineLength:2}),a(t.children,s),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks||2,blockTransform:f=>(l.trimEmptyLines!==!1?PA(f,`
`):f).split(`
`).map(g=>"> "+g).join(`
`)})}function Fx(t,a){if(!a)return t;const s=typeof a[0]=="string"?a[0]:"[",l=typeof a[1]=="string"?a[1]:"]";return s+t+l}function kA(t,a,s,l,f){const g=typeof a=="function"?a(t,l,f):t;return g[0]==="/"&&s?BG(s,"/")+g:g}function b$(t,a,s,l){const f=t.attribs||{},g=f.alt?f.alt:"",w=f.src?kA(f.src,l.pathRewrite,l.baseUrl,s.metadata,t):"",I=w?g?g+" "+Fx(w,l.linkBrackets):Fx(w,l.linkBrackets):g;s.addInline(I,{noWordTransform:!0})}function _$(t,a,s,l){function f(){if(l.ignoreHref||!t.attribs||!t.attribs.href)return"";let w=t.attribs.href.replace(/^mailto:/,"");return l.noAnchorUrl&&w[0]==="#"?"":(w=kA(w,l.pathRewrite,l.baseUrl,s.metadata,t),w)}const g=f();if(!g)a(t.children,s);else{let w="";s.pushWordTransform(o=>(o&&(w+=o),o)),a(t.children,s),s.popWordTransform(),l.hideLinkHrefIfSameAsText&&g===w||s.addInline(w?" "+Fx(g,l.linkBrackets):g,{noWordTransform:!0})}}function LA(t,a,s,l,f){const g=Yf(t,["parent","name"])==="li";let w=0;const I=(t.children||[]).filter(o=>o.type!=="text"||!/^\s*$/.test(o.data)).map(function(o){if(o.name!=="li")return{node:o,prefix:""};const M=g?f().trimStart():f();return M.length>w&&(w=M.length),{node:o,prefix:M}});if(I.length){s.openList({interRowLineBreaks:1,leadingLineBreaks:g?1:l.leadingLineBreaks||2,maxPrefixLength:w,prefixAlign:"left"});for(const{node:o,prefix:M}of I)s.openListItem({prefix:M}),a([o],s),s.closeListItem();s.closeList({trailingLineBreaks:g?1:l.trailingLineBreaks||2})}}function y$(t,a,s,l){const f=l.itemPrefix||" * ";return LA(t,a,s,l,()=>f)}function v$(t,a,s,l){let f=Number(t.attribs.start||"1");const g=x$(t.attribs.type);return LA(t,a,s,l,()=>" "+g(f++)+". ")}function x$(t="1"){switch(t){case"a":return a=>VT(a,"a");case"A":return a=>VT(a,"A");case"i":return a=>$T(a).toLowerCase();case"I":return a=>$T(a);case"1":default:return a=>a.toString()}}function w$(t){const a=[],s=[];for(const l of t)l.startsWith(".")?a.push(l.substring(1)):l.startsWith("#")&&s.push(l.substring(1));return{classes:a,ids:s}}function S$(t,a){if(a===!0)return!0;if(!t)return!1;const{classes:s,ids:l}=w$(a),f=(t.class||"").split(" "),g=(t.id||"").split(" ");return f.some(w=>s.includes(w))||g.some(w=>l.includes(w))}function T$(t,a,s,l){return S$(t.attribs,s.options.tables)?DA(t,a,s,l):E$(t,a,s,l)}function E$(t,a,s,l){s.openBlock({leadingLineBreaks:l.leadingLineBreaks}),a(t.children,s),s.closeBlock({trailingLineBreaks:l.trailingLineBreaks})}function DA(t,a,s,l){s.openTable(),t.children.forEach(g),s.closeTable({tableToString:w=>l$(w,l.rowSpacing??0,l.colSpacing??3),leadingLineBreaks:l.leadingLineBreaks,trailingLineBreaks:l.trailingLineBreaks});function f(w){const I=+Yf(w,["attribs","colspan"])||1,o=+Yf(w,["attribs","rowspan"])||1;s.openTableCell({maxColumnWidth:l.maxColumnWidth}),a(w.children,s),s.closeTableCell({colspan:I,rowspan:o})}function g(w){if(w.type!=="tag")return;const I=l.uppercaseHeaderCells!==!1?o=>{s.pushWordTransform(M=>M.toUpperCase()),f(o),s.popWordTransform()}:f;switch(w.name){case"thead":case"tbody":case"tfoot":case"center":w.children.forEach(g);return;case"tr":{s.openTableRow();for(const o of w.children)if(o.type==="tag")switch(o.name){case"th":{I(o);break}case"td":{f(o);break}}s.closeTableRow();break}}}}var I$=Object.freeze({__proto__:null,anchor:_$,blockquote:g$,dataTable:DA,heading:m$,horizontalLine:p$,image:b$,lineBreak:u$,orderedList:v$,paragraph:f$,pre:h$,table:T$,unorderedList:y$,wbr:d$});const P$={baseElements:{selectors:["body"],orderBy:"selectors",returnDomByDefault:!0},decodeEntities:!0,encodeCharacters:{},formatters:{},limits:{ellipsis:"...",maxBaseElements:void 0,maxChildNodes:void 0,maxDepth:void 0,maxInputLength:1<<24},longWordSplit:{forceWrapOnLimit:!1,wrapCharacters:[]},preserveNewlines:!1,selectors:[{selector:"*",format:"inline"},{selector:"a",format:"anchor",options:{baseUrl:null,hideLinkHrefIfSameAsText:!1,ignoreHref:!1,linkBrackets:["[","]"],noAnchorUrl:!0}},{selector:"article",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"aside",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"blockquote",format:"blockquote",options:{leadingLineBreaks:2,trailingLineBreaks:2,trimEmptyLines:!0}},{selector:"br",format:"lineBreak"},{selector:"div",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"footer",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"form",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"h1",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h2",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h3",format:"heading",options:{leadingLineBreaks:3,trailingLineBreaks:2,uppercase:!0}},{selector:"h4",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h5",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"h6",format:"heading",options:{leadingLineBreaks:2,trailingLineBreaks:2,uppercase:!0}},{selector:"header",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"hr",format:"horizontalLine",options:{leadingLineBreaks:2,length:void 0,trailingLineBreaks:2}},{selector:"img",format:"image",options:{baseUrl:null,linkBrackets:["[","]"]}},{selector:"main",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"nav",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"ol",format:"orderedList",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"p",format:"paragraph",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"pre",format:"pre",options:{leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"section",format:"block",options:{leadingLineBreaks:1,trailingLineBreaks:1}},{selector:"table",format:"table",options:{colSpacing:3,leadingLineBreaks:2,maxColumnWidth:60,rowSpacing:0,trailingLineBreaks:2,uppercaseHeaderCells:!0}},{selector:"ul",format:"unorderedList",options:{itemPrefix:" * ",leadingLineBreaks:2,trailingLineBreaks:2}},{selector:"wbr",format:"wbr"}],tables:[],whitespaceCharacters:` 	\r
\f`,wordwrap:80},z$=(t,a,s)=>[...t,...a],OA=(t,a,s)=>[...a],A$=(t,a,s)=>t.some(l=>typeof l=="object")?z$(t,a):OA(t,a);function C$(t={}){return t=IA(P$,t,{arrayMerge:OA,customMerge:a=>a==="selectors"?A$:void 0}),t.formatters=Object.assign({},s$,I$,t.formatters),t.selectors=zA(t.selectors,a=>a.selector),R$(t),$G(t)}function M$(t,a={},s=void 0){return C$(a)(t,s)}function R$(t){if(t.tags){const s=Object.entries(t.tags).map(([l,f])=>({...f,selector:l||"*"}));t.selectors.push(...s),t.selectors=zA(t.selectors,l=>l.selector)}function a(s,l,f){const g=l.pop();for(const w of l){let I=s[w];I||(I={},s[w]=I),s=I}s[g]=f}if(t.baseElement){const s=t.baseElement;a(t,["baseElements","selectors"],Array.isArray(s)?s:[s])}t.returnDomByDefault!==void 0&&a(t,["baseElements","returnDomByDefault"],t.returnDomByDefault);for(const s of t.selectors)s.format==="anchor"&&Yf(s,["options","noLinkBrackets"])&&a(s,["options","linkBrackets"],!1)}const BA=t=>{if(!t)return"";const a=new Date(t),s=Math.floor((a.getMonth()+3)/3),l=a.getFullYear();return`Q${s} ${l}`},k$=t=>{if(!t)return"";try{const[a,s,l]=t.split("/").map(Number);return new Date(l,s-1,a).toISOString()}catch{return""}},L$=t=>{switch(t){case"Q1":return"01-01";case"Q2":return"04-01";case"Q3":return"07-01";case"Q4":return"10-01";default:return""}};function Cl(t){let s=new DOMParser().parseFromString(t,"text/html").body.textContent||"";return s=M$(s,{wordwrap:!1,ignoreHref:!0,ignoreImage:!0}),s=s.replace(/\s+/g," ").trim(),s}function ov(t){return new DOMParser().parseFromString(t,"text/html").body.textContent||""}const nb=t=>(typeof t=="number"&&(t=t.toString()),typeof t!="string"?"":t.replace(/\B(?=(\d{3})+(?!\d))/g,".")),NA=({prodProject:t,infoProject:a,setInfoProject:s,coordinates:l,setCoordinates:f,developerInfo:g,addGeneralInfoToProdProject:w,handleClearPolygon:I})=>{const[o,M]=Te.useState(!1),[B,L]=Te.useState(!1),[O,j]=Te.useState(!1),[Z,H]=Te.useState(!1),[te,J]=Te.useState(!1),[K,W]=Te.useState(!1),[ee,me]=Te.useState(!1),[Se,Me]=Te.useState(!1),Ie=Te.useRef(null),Ge=Te.useRef(null),ge=Te.useRef(null),[Xe,rt]=Te.useState(""),[Ue,Bt]=Te.useState(""),un=Et=>{Ie.current&&!Ie.current.contains(Et.target)&&L(!1),Ge.current&&!Ge.current.contains(Et.target)&&j(!1),ge.current&&!ge.current.contains(Et.target)&&H(!1)};Te.useEffect(()=>(document.addEventListener("mousedown",un),()=>{document.removeEventListener("mousedown",un)}),[]),Te.useEffect(()=>{if(a.handover){const Et=new Date(a.handover),Nt=Et.getMonth()+1,Sn=Et.getFullYear();let Fn;Nt>=1&&Nt<=3?Fn="Q1":Nt>=4&&Nt<=6?Fn="Q2":Nt>=7&&Nt<=9?Fn="Q3":Fn="Q4",rt(Fn),Bt(Sn.toString())}},[a.handover]);const Tn=Et=>{Et==="developer"?(M(!o),L(!1),j(!1),H(!1)):Et==="rooms"?(L(!B),M(!1),j(!1),H(!1)):Et==="handover"?(j(!O),M(!1),L(!1),H(!1)):Et==="handoverYear"&&(H(!Z),M(!1),L(!1),j(!1))},ea=Et=>{const Nt=a.pictures.filter((Sn,Fn)=>Fn!==Et);s({...a,pictures:Nt})},[St,ke]=Te.useState("");Te.useEffect(()=>{const Nt=String(a.price).replace(/\B(?=(\d{3})+(?!\d))/g,".");ke(Nt)},[a.price]);const Ct=Et=>{const Nt=Et.target.value.replace(/\./g,"");s({...a,price:Nt})};return q.jsx("section",{className:"buildingInfo",children:q.jsxs("div",{className:"buildingInfo__content ",children:[q.jsx("div",{className:"buildingInfo__content-image",children:t.images[0].photos[0]&&q.jsx("div",{className:"buildingInfo__content-imgWrapper",children:q.jsx("img",{src:typeof t.images[0].photos[0]=="string"?t.images[0].photos[0]:URL.createObjectURL(t.images[0].photos[0]),alt:`Image ${NA+1}`,width:818.54,height:496,className:"buildingInfo__content-img",onClick:()=>J(!0)})})}),t.images[0].photos[0]&&q.jsx(iU,{handler:J,isVisible:te,infoProject:t,onDeletePicture:ea}),K?q.jsxs("div",{className:"buildingInfo__changeInfo",children:[q.jsxs("div",{className:"buildingInfo__changeInfo-priceInfo",children:[q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",children:[q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Price from"}),q.jsx("input",{type:"text",className:"buildingInfo__changeInfo-priceInput",placeholder:"Price from",value:St,onChange:Ct,pattern:"\\d*",onKeyPress:Et=>{/[0-9.]/.test(Et.key)||Et.preventDefault()},maxLength:15})]}),q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",children:[q.jsxs("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:["Price for ft",q.jsx("sub",{className:"square",children:"2"})]}),q.jsx("span",{className:"buildingInfo__changeInfo-sizeM2",children:a.size!==""&&a.size!==""?nb((a.price/a.size).toFixed(0)):"0"})]}),q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",children:[q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Marker"}),q.jsx("div",{className:"buildingInfo__changeInfo-mapImg",onClick:()=>Me(!0),children:q.jsx("img",{src:"/assets/ProjectPage/map.svg",alt:"Image map",width:20,height:20})})]}),q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",children:[q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Map"}),q.jsx("div",{className:"buildingInfo__changeInfo-mapImg",onClick:()=>me(!0),children:q.jsx("img",{src:"/assets/ProjectPage/map.svg",alt:"Image map",width:20,height:20})})]}),q.jsx(fU,{handler:me,isVisible:ee,coordinates:l,setCoordinates:f,handleClearPolygon:I}),q.jsx(hU,{handler:Me,isVisible:Se,coordinates:l,setCoordinates:f})]}),q.jsx("div",{children:q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",children:[q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Name"}),q.jsx("input",{type:"text",className:"buildingInfo__changeInfo-priceInput",placeholder:"Name",value:a.name,onChange:Et=>s({...a,name:Et.target.value})})]})}),q.jsx("div",{children:q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",children:[q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Location"}),q.jsx(bU,{infoProject:a,setInfoProject:s})]})}),q.jsxs("div",{className:"buildingInfo__changeInfo-PRSBWrapper",children:[q.jsx("div",{className:"buildingInfo__changeInfo-PRSWrapper",children:q.jsxs("div",{className:"buildingInfo__changeInfo-inputsRoomsSize",children:[q.jsxs("div",{className:"buildingInfo__changeInfo-insideWrapper",children:[q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs rooms",ref:Ie,children:[q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Rooms"}),q.jsx("div",{className:"buildingInfo__changeInfo-selectRooms",children:q.jsxs("div",{className:"buildingInfo__changeSelect-select rooms",children:[q.jsx("div",{className:"buildingInfo__changeSelect-secondImg",children:q.jsxs(Zc,{handler:()=>Tn("rooms"),className:"buildingInfo__changeSelect-btnSelect",children:[a.rooms?a.rooms:q.jsx("span",{children:"R"}),q.jsx("img",{src:"/assets/ProjectPage/arrowSelect.svg",alt:"img arrow",width:8,height:4,className:`buildingInfo__changeSelect-imgSelect ${B?"active":""}`})]})}),q.jsx("div",{className:`buildingInfo__changeSelect-dropContent ${B?"active":""}`,children:[1,2,3,4,5,6,7,8].map((Et,Nt)=>q.jsx("button",{className:`buildingInfo__changeSelect-btnDropSelect rooms ${a.rooms===Et?"active":""}`,onClick:()=>{L(!1),s({...a,rooms:Et})},children:Et},Nt))})]})})]}),q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",children:[q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Size"}),q.jsx("div",{className:"buildingInfo__changeInfo-selectRooms",children:q.jsxs("div",{className:"buildingInfo__changeInfo-sizeInputWrapper size",children:[q.jsx("input",{type:"text",className:"buildingInfo__changeInfo-sizeInput",placeholder:"Size",value:a.size,onChange:Et=>{const Nt=Et.target.value;/^[0-9]*$/.test(Nt)&&s({...a,size:Nt})},maxLength:10}),q.jsxs("span",{className:"buildingInfo__changeInfo-sizeInputSquare",children:["ft",q.jsx("sub",{className:"square",children:"2"})]})]})})]})]}),q.jsxs("div",{className:"buildingInfo__changeInfo-insideWrapper",children:[q.jsxs("div",{className:"buildingInfo__changeInfo-priceInputs",ref:Ge,children:[q.jsx("span",{className:"buildingInfo__changeInfo-priceInputsTitle",children:"Handover"}),q.jsx("div",{className:"buildingInfo__changeInfo-selectRooms",children:q.jsxs("div",{className:"buildingInfo__changeSelect-select handover",children:[q.jsx("div",{className:"buildingInfo__changeSelect-secondImg",children:q.jsxs(Zc,{handler:()=>Tn("handover"),className:"buildingInfo__changeSelect-btnSelect",children:[Xe?q.jsx("div",{className:"buildingInfo__changeSelect-handover",children:Xe}):q.jsx("span",{children:"Q"}),q.jsx("img",{src:"/assets/ProjectPage/arrowSelect.svg",alt:"img arrow",width:8,height:4,className:`buildingInfo__changeSelect-imgSelect ${O?"active":""}`})]})}),q.jsx("div",{className:`buildingInfo__changeSelect-dropContent ${O?"active":""}`,children:["Q1","Q2","Q3","Q4"].map((Et,Nt)=>q.jsx("button",{className:`buildingInfo__changeSelect-btnDropSelect rooms ${a.handover===Et?"active":""}`,onClick:()=>{j(!1),rt(Et)},children:Et},Nt))})]})})]}),q.jsx("div",{className:"buildingInfo__changeInfo-priceInputs",ref:ge,children:q.jsx("div",{className:"buildingInfo__changeInfo-selectRooms",children:q.jsxs("div",{className:"buildingInfo__changeSelect-select handoverYear",children:[q.jsx("div",{className:"buildingInfo__changeSelect-secondImg",children:q.jsxs(Zc,{handler:()=>Tn("handoverYear"),className:"buildingInfo__changeSelect-btnSelect",children:[Ue||q.jsx("span",{children:"year"}),q.jsx("img",{src:"/assets/ProjectPage/arrowSelect.svg",alt:"img arrow",width:8,height:4,className:`buildingInfo__changeSelect-imgSelect ${Z?"active":""}`})]})}),q.jsx("div",{className:`buildingInfo__changeSelect-dropContent ${Z?"active":""}`,children:["2023","2024","2025","2026","2027","2028","2029","2030"].map((Et,Nt)=>q.jsx("button",{className:`buildingInfo__changeSelect-btnDropSelect rooms ${a.handoverYear===Et?"active":""}`,onClick:()=>{H(!1),Bt(Et)},children:Et},Nt))})]})})})]})]})}),q.jsxs("div",{className:"buildingInfo__changeInfo-buttons",children:[q.jsx("button",{className:`buildingInfo__changeInfo-btn ${a.plan==="Off plan"?"active":""}`,onClick:()=>s(Et=>({...Et,plan:"Off plan"})),children:"Off plan"}),q.jsx("button",{className:`buildingInfo__changeInfo-btn ${a.plan==="Secondary"?"active":""}`,onClick:()=>s(Et=>({...Et,plan:"Secondary"})),children:"Secondary"}),q.jsx("button",{className:`buildingInfo__changeInfo-btn ${a.plan==="Special Offer"?"active":""}`,onClick:()=>s(Et=>({...Et,plan:"Special Offer"})),children:"Special Offer"})]})]}),q.jsxs("div",{className:"buildingInfo__changeInfo-buttonsClose",children:[q.jsx("button",{onClick:()=>W(!1),children:"cancel"}),q.jsx("button",{onClick:()=>{w(Xe,Ue),W(!1)},children:"Confirm changes"})]})]}):q.jsxs("div",{className:"buildingInfo__content-info",children:[q.jsxs("div",{className:"buildingInfo__content-priceInfo",children:[q.jsxs("div",{children:[q.jsxs("div",{className:"buildingInfo__content-price",children:["From",q.jsxs("span",{children:["AED ",a.price]})]}),q.jsxs("div",{className:"buildingInfo__content-priceSquare",children:["AED"," ",a.size!==0&&a.size!==0?nb((a.price/a.size).toFixed(0)):"0"," ","for ft",q.jsx("sub",{className:"square",children:"2"})]})]}),q.jsx("button",{className:"buildingInfo__content-btnChange",onClick:()=>W(!0),children:q.jsx("img",{src:"/assets/ProjectPage/change.svg",alt:"Image change",width:17,height:16})})]}),q.jsxs("div",{className:"buildingInfo__content-infoProject",children:[q.jsx("h4",{className:"buildingInfo__content-name",children:a.name.length>30?a.name.slice(0,30)+"...":a.name}),q.jsx("div",{children:q.jsx("p",{className:"buildingInfo__content-location",children:a.location})})]}),q.jsxs("ul",{className:"buildingInfo__content-list",children:[q.jsxs("li",{className:"buildingInfo__content-item",children:[q.jsx("img",{src:"/assets/ProjectPage/home.svg",alt:"Home image",width:24,height:24}),q.jsxs("div",{children:[q.jsx("span",{children:"Developer"}),q.jsx("span",{children:g.name})]})]}),q.jsxs("li",{className:"buildingInfo__content-item",children:[q.jsx("img",{src:"/assets/ProjectPage/folder.svg",alt:"Folder image",width:24,height:24}),q.jsxs("div",{children:[q.jsx("span",{children:"Rooms"}),q.jsx("span",{children:a.rooms})]})]}),q.jsxs("li",{className:"buildingInfo__content-item",children:[q.jsx("img",{src:"/assets/ProjectPage/price.svg",alt:"Price m^2 image",width:24,height:24}),q.jsxs("div",{children:[q.jsxs("span",{children:["Price per ft",q.jsx("sub",{className:"square",children:"2"})]}),q.jsxs("span",{children:["AED"," ",a.size!==""&&a.size!==""?nb((a.price/a.size).toFixed(0)):"0"]})]})]}),q.jsxs("li",{className:"buildingInfo__content-item",children:[q.jsx("img",{src:"/assets/ProjectPage/size.svg",alt:"Size image",width:24,height:24}),q.jsxs("div",{children:[q.jsx("span",{children:"Size"}),q.jsxs("span",{children:[nb(a.size)," ft",q.jsx("sub",{className:"square",children:"2"})]})]})]}),q.jsxs("li",{className:"buildingInfo__content-item",children:[q.jsx("img",{src:"/assets/ProjectPage/type.svg",alt:"Type image",width:24,height:24}),q.jsxs("div",{children:[q.jsx("span",{children:"Type"}),q.jsx("span",{children:a.plan})]})]}),q.jsxs("li",{className:"buildingInfo__content-item",children:[q.jsx("img",{src:"/assets/ProjectPage/handover.svg",alt:"Type image",width:24,height:24}),q.jsxs("div",{children:[q.jsx("span",{children:"Handover"}),q.jsx("div",{className:"buildingInfo__content-handover",children:q.jsx("span",{children:BA(a.handover)})})]})]})]})]})]})})};function YT({textsLan:t,setTextsLan:a}){return q.jsxs("div",{className:"aboutProject__content-buttons",children:[q.jsx("button",{className:`${t==="EN"?"active":""}`,onClick:()=>a("EN"),children:"EN"}),q.jsx("button",{className:`${t==="RU"?"active":""}`,onClick:()=>a("RU"),children:"RU"}),q.jsx("button",{className:`${t==="UA"?"active":""}`,onClick:()=>a("UA"),children:"UA"})]})}function C0(t){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},C0(t)}function D$(t,a){if(C0(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var l=s.call(t,a||"default");if(C0(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function O$(t){var a=D$(t,"string");return C0(a)=="symbol"?a:a+""}function B$(t,a,s){return a=O$(a),a in t?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s,t}function XT(t,a){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);a&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),s.push.apply(s,l)}return s}function JT(t){for(var a=1;a<arguments.length;a++){var s=arguments[a]!=null?arguments[a]:{};a%2?XT(Object(s),!0).forEach(function(l){B$(t,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):XT(Object(s)).forEach(function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(s,l))})}return t}function Ci(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var KT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),cv=function(){return Math.random().toString(36).substring(7).split("").join(".")},QT={INIT:"@@redux/INIT"+cv(),REPLACE:"@@redux/REPLACE"+cv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cv()}};function N$(t){if(typeof t!="object"||t===null)return!1;for(var a=t;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a}function FA(t,a,s){var l;if(typeof a=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(Ci(0));if(typeof a=="function"&&typeof s>"u"&&(s=a,a=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(Ci(1));return s(FA)(t,a)}if(typeof t!="function")throw new Error(Ci(2));var f=t,g=a,w=[],I=w,o=!1;function M(){I===w&&(I=w.slice())}function B(){if(o)throw new Error(Ci(3));return g}function L(H){if(typeof H!="function")throw new Error(Ci(4));if(o)throw new Error(Ci(5));var te=!0;return M(),I.push(H),function(){if(te){if(o)throw new Error(Ci(6));te=!1,M();var K=I.indexOf(H);I.splice(K,1),w=null}}}function O(H){if(!N$(H))throw new Error(Ci(7));if(typeof H.type>"u")throw new Error(Ci(8));if(o)throw new Error(Ci(9));try{o=!0,g=f(g,H)}finally{o=!1}for(var te=w=I,J=0;J<te.length;J++){var K=te[J];K()}return H}function j(H){if(typeof H!="function")throw new Error(Ci(10));f=H,O({type:QT.REPLACE})}function Z(){var H,te=L;return H={subscribe:function(K){if(typeof K!="object"||K===null)throw new Error(Ci(11));function W(){K.next&&K.next(B())}W();var ee=te(W);return{unsubscribe:ee}}},H[KT]=function(){return this},H}return O({type:QT.INIT}),l={dispatch:O,subscribe:L,getState:B,replaceReducer:j},l[KT]=Z,l}function eE(t,a){return function(){return a(t.apply(this,arguments))}}function tE(t,a){if(typeof t=="function")return eE(t,a);if(typeof t!="object"||t===null)throw new Error(Ci(16));var s={};for(var l in t){var f=t[l];typeof f=="function"&&(s[l]=eE(f,a))}return s}function jA(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return a.length===0?function(l){return l}:a.length===1?a[0]:a.reduce(function(l,f){return function(){return l(f.apply(void 0,arguments))}})}function F$(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return function(l){return function(){var f=l.apply(void 0,arguments),g=function(){throw new Error(Ci(15))},w={getState:f.getState,dispatch:function(){return g.apply(void 0,arguments)}},I=a.map(function(o){return o(w)});return g=jA.apply(void 0,I)(f.dispatch),JT(JT({},f),{},{dispatch:g})}}}var UA={exports:{}},VA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf=Te;function j$(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var U$=typeof Object.is=="function"?Object.is:j$,V$=Xf.useState,G$=Xf.useEffect,$$=Xf.useLayoutEffect,q$=Xf.useDebugValue;function W$(t,a){var s=a(),l=V$({inst:{value:s,getSnapshot:a}}),f=l[0].inst,g=l[1];return $$(function(){f.value=s,f.getSnapshot=a,lv(f)&&g({inst:f})},[t,s,a]),G$(function(){return lv(f)&&g({inst:f}),t(function(){lv(f)&&g({inst:f})})},[t]),q$(s),s}function lv(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!U$(t,s)}catch{return!0}}function H$(t,a){return a()}var Z$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?H$:W$;VA.useSyncExternalStore=Xf.useSyncExternalStore!==void 0?Xf.useSyncExternalStore:Z$;UA.exports=VA;var GA=UA.exports,Y$={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_=Te,X$=GA;function J$(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var K$=typeof Object.is=="function"?Object.is:J$,Q$=X$.useSyncExternalStore,eq=$_.useRef,tq=$_.useEffect,nq=$_.useMemo,aq=$_.useDebugValue;Y$.useSyncExternalStoreWithSelector=function(t,a,s,l,f){var g=eq(null);if(g.current===null){var w={hasValue:!1,value:null};g.current=w}else w=g.current;g=nq(function(){function o(j){if(!M){if(M=!0,B=j,j=l(j),f!==void 0&&w.hasValue){var Z=w.value;if(f(Z,j))return L=Z}return L=j}if(Z=L,K$(B,j))return Z;var H=l(j);return f!==void 0&&f(Z,H)?Z:(B=j,L=H)}var M=!1,B,L,O=s===void 0?null:s;return[function(){return o(a())},O===null?void 0:function(){return o(O())}]},[a,s,l,f]);var I=Q$(t,g[0],g[1]);return tq(function(){w.hasValue=!0,w.value=I},[I]),aq(I),I};function rq(t){t()}let $A=rq;const sq=t=>$A=t,iq=()=>$A,nE=Symbol.for("react-redux-context"),aE=typeof globalThis<"u"?globalThis:{};function oq(){var t;if(!Te.createContext)return{};const a=(t=aE[nE])!=null?t:aE[nE]=new Map;let s=a.get(Te.createContext);return s||(s=Te.createContext(null),a.set(Te.createContext,s)),s}const qA=oq(),cq=()=>{throw new Error("uSES not initialized!")};function Vu(){return Vu=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},Vu.apply(this,arguments)}function WA(t,a){if(t==null)return{};var s={},l=Object.keys(t),f,g;for(g=0;g<l.length;g++)f=l[g],!(a.indexOf(f)>=0)&&(s[f]=t[f]);return s}var HA={exports:{}},er={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hs=typeof Symbol=="function"&&Symbol.for,b6=hs?Symbol.for("react.element"):60103,_6=hs?Symbol.for("react.portal"):60106,q_=hs?Symbol.for("react.fragment"):60107,W_=hs?Symbol.for("react.strict_mode"):60108,H_=hs?Symbol.for("react.profiler"):60114,Z_=hs?Symbol.for("react.provider"):60109,Y_=hs?Symbol.for("react.context"):60110,y6=hs?Symbol.for("react.async_mode"):60111,X_=hs?Symbol.for("react.concurrent_mode"):60111,J_=hs?Symbol.for("react.forward_ref"):60112,K_=hs?Symbol.for("react.suspense"):60113,lq=hs?Symbol.for("react.suspense_list"):60120,Q_=hs?Symbol.for("react.memo"):60115,ey=hs?Symbol.for("react.lazy"):60116,uq=hs?Symbol.for("react.block"):60121,dq=hs?Symbol.for("react.fundamental"):60117,pq=hs?Symbol.for("react.responder"):60118,fq=hs?Symbol.for("react.scope"):60119;function fo(t){if(typeof t=="object"&&t!==null){var a=t.$$typeof;switch(a){case b6:switch(t=t.type,t){case y6:case X_:case q_:case H_:case W_:case K_:return t;default:switch(t=t&&t.$$typeof,t){case Y_:case J_:case ey:case Q_:case Z_:return t;default:return a}}case _6:return a}}}function ZA(t){return fo(t)===X_}er.AsyncMode=y6;er.ConcurrentMode=X_;er.ContextConsumer=Y_;er.ContextProvider=Z_;er.Element=b6;er.ForwardRef=J_;er.Fragment=q_;er.Lazy=ey;er.Memo=Q_;er.Portal=_6;er.Profiler=H_;er.StrictMode=W_;er.Suspense=K_;er.isAsyncMode=function(t){return ZA(t)||fo(t)===y6};er.isConcurrentMode=ZA;er.isContextConsumer=function(t){return fo(t)===Y_};er.isContextProvider=function(t){return fo(t)===Z_};er.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===b6};er.isForwardRef=function(t){return fo(t)===J_};er.isFragment=function(t){return fo(t)===q_};er.isLazy=function(t){return fo(t)===ey};er.isMemo=function(t){return fo(t)===Q_};er.isPortal=function(t){return fo(t)===_6};er.isProfiler=function(t){return fo(t)===H_};er.isStrictMode=function(t){return fo(t)===W_};er.isSuspense=function(t){return fo(t)===K_};er.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===q_||t===X_||t===H_||t===W_||t===K_||t===lq||typeof t=="object"&&t!==null&&(t.$$typeof===ey||t.$$typeof===Q_||t.$$typeof===Z_||t.$$typeof===Y_||t.$$typeof===J_||t.$$typeof===dq||t.$$typeof===pq||t.$$typeof===fq||t.$$typeof===uq)};er.typeOf=fo;HA.exports=er;var hq=HA.exports,v6=hq,mq={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},gq={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},bq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},YA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},x6={};x6[v6.ForwardRef]=bq;x6[v6.Memo]=YA;function rE(t){return v6.isMemo(t)?YA:x6[t.$$typeof]||mq}var _q=Object.defineProperty,yq=Object.getOwnPropertyNames,sE=Object.getOwnPropertySymbols,vq=Object.getOwnPropertyDescriptor,xq=Object.getPrototypeOf,iE=Object.prototype;function XA(t,a,s){if(typeof a!="string"){if(iE){var l=xq(a);l&&l!==iE&&XA(t,l,s)}var f=yq(a);sE&&(f=f.concat(sE(a)));for(var g=rE(t),w=rE(a),I=0;I<f.length;++I){var o=f[I];if(!gq[o]&&!(s&&s[o])&&!(w&&w[o])&&!(g&&g[o])){var M=vq(a,o);try{_q(t,o,M)}catch{}}}}return t}var wq=XA;const oE=eh(wq);var JA={exports:{}},tr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w6=Symbol.for("react.element"),S6=Symbol.for("react.portal"),ty=Symbol.for("react.fragment"),ny=Symbol.for("react.strict_mode"),ay=Symbol.for("react.profiler"),ry=Symbol.for("react.provider"),sy=Symbol.for("react.context"),Sq=Symbol.for("react.server_context"),iy=Symbol.for("react.forward_ref"),oy=Symbol.for("react.suspense"),cy=Symbol.for("react.suspense_list"),ly=Symbol.for("react.memo"),uy=Symbol.for("react.lazy"),Tq=Symbol.for("react.offscreen"),KA;KA=Symbol.for("react.module.reference");function No(t){if(typeof t=="object"&&t!==null){var a=t.$$typeof;switch(a){case w6:switch(t=t.type,t){case ty:case ay:case ny:case oy:case cy:return t;default:switch(t=t&&t.$$typeof,t){case Sq:case sy:case iy:case uy:case ly:case ry:return t;default:return a}}case S6:return a}}}tr.ContextConsumer=sy;tr.ContextProvider=ry;tr.Element=w6;tr.ForwardRef=iy;tr.Fragment=ty;tr.Lazy=uy;tr.Memo=ly;tr.Portal=S6;tr.Profiler=ay;tr.StrictMode=ny;tr.Suspense=oy;tr.SuspenseList=cy;tr.isAsyncMode=function(){return!1};tr.isConcurrentMode=function(){return!1};tr.isContextConsumer=function(t){return No(t)===sy};tr.isContextProvider=function(t){return No(t)===ry};tr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===w6};tr.isForwardRef=function(t){return No(t)===iy};tr.isFragment=function(t){return No(t)===ty};tr.isLazy=function(t){return No(t)===uy};tr.isMemo=function(t){return No(t)===ly};tr.isPortal=function(t){return No(t)===S6};tr.isProfiler=function(t){return No(t)===ay};tr.isStrictMode=function(t){return No(t)===ny};tr.isSuspense=function(t){return No(t)===oy};tr.isSuspenseList=function(t){return No(t)===cy};tr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ty||t===ay||t===ny||t===oy||t===cy||t===Tq||typeof t=="object"&&t!==null&&(t.$$typeof===uy||t.$$typeof===ly||t.$$typeof===ry||t.$$typeof===sy||t.$$typeof===iy||t.$$typeof===KA||t.getModuleId!==void 0)};tr.typeOf=No;JA.exports=tr;var Eq=JA.exports;const Iq=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Pq(t,a,s,l,{areStatesEqual:f,areOwnPropsEqual:g,areStatePropsEqual:w}){let I=!1,o,M,B,L,O;function j(K,W){return o=K,M=W,B=t(o,M),L=a(l,M),O=s(B,L,M),I=!0,O}function Z(){return B=t(o,M),a.dependsOnOwnProps&&(L=a(l,M)),O=s(B,L,M),O}function H(){return t.dependsOnOwnProps&&(B=t(o,M)),a.dependsOnOwnProps&&(L=a(l,M)),O=s(B,L,M),O}function te(){const K=t(o,M),W=!w(K,B);return B=K,W&&(O=s(B,L,M)),O}function J(K,W){const ee=!g(W,M),me=!f(K,o,W,M);return o=K,M=W,ee&&me?Z():ee?H():me?te():O}return function(W,ee){return I?J(W,ee):j(W,ee)}}function zq(t,a){let{initMapStateToProps:s,initMapDispatchToProps:l,initMergeProps:f}=a,g=WA(a,Iq);const w=s(t,g),I=l(t,g),o=f(t,g);return Pq(w,I,o,t,g)}function Aq(t,a){const s={};for(const l in t){const f=t[l];typeof f=="function"&&(s[l]=(...g)=>a(f(...g)))}return s}function jx(t){return function(s){const l=t(s);function f(){return l}return f.dependsOnOwnProps=!1,f}}function cE(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function QA(t,a){return function(l,{displayName:f}){const g=function(I,o){return g.dependsOnOwnProps?g.mapToProps(I,o):g.mapToProps(I,void 0)};return g.dependsOnOwnProps=!0,g.mapToProps=function(I,o){g.mapToProps=t,g.dependsOnOwnProps=cE(t);let M=g(I,o);return typeof M=="function"&&(g.mapToProps=M,g.dependsOnOwnProps=cE(M),M=g(I,o)),M},g}}function T6(t,a){return(s,l)=>{throw new Error(`Invalid value of type ${typeof t} for ${a} argument when connecting component ${l.wrappedComponentName}.`)}}function Cq(t){return t&&typeof t=="object"?jx(a=>Aq(t,a)):t?typeof t=="function"?QA(t):T6(t,"mapDispatchToProps"):jx(a=>({dispatch:a}))}function Mq(t){return t?typeof t=="function"?QA(t):T6(t,"mapStateToProps"):jx(()=>({}))}function Rq(t,a,s){return Vu({},s,t,a)}function kq(t){return function(s,{displayName:l,areMergedPropsEqual:f}){let g=!1,w;return function(o,M,B){const L=t(o,M,B);return g?f(L,w)||(w=L):(g=!0,w=L),w}}}function Lq(t){return t?typeof t=="function"?kq(t):T6(t,"mergeProps"):()=>Rq}function Dq(){const t=iq();let a=null,s=null;return{clear(){a=null,s=null},notify(){t(()=>{let l=a;for(;l;)l.callback(),l=l.next})},get(){let l=[],f=a;for(;f;)l.push(f),f=f.next;return l},subscribe(l){let f=!0,g=s={callback:l,next:null,prev:s};return g.prev?g.prev.next=g:a=g,function(){!f||a===null||(f=!1,g.next?g.next.prev=g.prev:s=g.prev,g.prev?g.prev.next=g.next:a=g.next)}}}}const lE={notify(){},get:()=>[]};function eC(t,a){let s,l=lE,f=0,g=!1;function w(H){B();const te=l.subscribe(H);let J=!1;return()=>{J||(J=!0,te(),L())}}function I(){l.notify()}function o(){Z.onStateChange&&Z.onStateChange()}function M(){return g}function B(){f++,s||(s=a?a.addNestedSub(o):t.subscribe(o),l=Dq())}function L(){f--,s&&f===0&&(s(),s=void 0,l.clear(),l=lE)}function O(){g||(g=!0,B())}function j(){g&&(g=!1,L())}const Z={addNestedSub:w,notifyNestedSubs:I,handleChangeWrapper:o,isSubscribed:M,trySubscribe:O,tryUnsubscribe:j,getListeners:()=>l};return Z}const Oq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c_=Oq?Te.useLayoutEffect:Te.useEffect;function uE(t,a){return t===a?t!==0||a!==0||1/t===1/a:t!==t&&a!==a}function uv(t,a){if(uE(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;const s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(let f=0;f<s.length;f++)if(!Object.prototype.hasOwnProperty.call(a,s[f])||!uE(t[s[f]],a[s[f]]))return!1;return!0}const Bq=["reactReduxForwardedRef"];let tC=cq;const Nq=t=>{tC=t},Fq=[null,null];function jq(t,a,s){c_(()=>t(...a),s)}function Uq(t,a,s,l,f,g){t.current=l,s.current=!1,f.current&&(f.current=null,g())}function Vq(t,a,s,l,f,g,w,I,o,M,B){if(!t)return()=>{};let L=!1,O=null;const j=()=>{if(L||!I.current)return;const H=a.getState();let te,J;try{te=l(H,f.current)}catch(K){J=K,O=K}J||(O=null),te===g.current?w.current||M():(g.current=te,o.current=te,w.current=!0,B())};return s.onStateChange=j,s.trySubscribe(),j(),()=>{if(L=!0,s.tryUnsubscribe(),s.onStateChange=null,O)throw O}}function Gq(t,a){return t===a}function nC(t,a,s,{pure:l,areStatesEqual:f=Gq,areOwnPropsEqual:g=uv,areStatePropsEqual:w=uv,areMergedPropsEqual:I=uv,forwardRef:o=!1,context:M=qA}={}){const B=M,L=Mq(t),O=Cq(a),j=Lq(s),Z=!!t;return te=>{const J=te.displayName||te.name||"Component",K=`Connect(${J})`,W={shouldHandleStateChanges:Z,displayName:K,wrappedComponentName:J,WrappedComponent:te,initMapStateToProps:L,initMapDispatchToProps:O,initMergeProps:j,areStatesEqual:f,areStatePropsEqual:w,areOwnPropsEqual:g,areMergedPropsEqual:I};function ee(Me){const[Ie,Ge,ge]=Te.useMemo(()=>{const{reactReduxForwardedRef:vr}=Me,sn=WA(Me,Bq);return[Me.context,vr,sn]},[Me]),Xe=Te.useMemo(()=>Ie&&Ie.Consumer&&Eq.isContextConsumer(Te.createElement(Ie.Consumer,null))?Ie:B,[Ie,B]),rt=Te.useContext(Xe),Ue=!!Me.store&&!!Me.store.getState&&!!Me.store.dispatch,Bt=!!rt&&!!rt.store,un=Ue?Me.store:rt.store,Tn=Bt?rt.getServerState:un.getState,ea=Te.useMemo(()=>zq(un.dispatch,W),[un]),[St,ke]=Te.useMemo(()=>{if(!Z)return Fq;const vr=eC(un,Ue?void 0:rt.subscription),sn=vr.notifyNestedSubs.bind(vr);return[vr,sn]},[un,Ue,rt]),Ct=Te.useMemo(()=>Ue?rt:Vu({},rt,{subscription:St}),[Ue,rt,St]),Et=Te.useRef(),Nt=Te.useRef(ge),Sn=Te.useRef(),Fn=Te.useRef(!1);Te.useRef(!1);const nr=Te.useRef(!1),Zn=Te.useRef();c_(()=>(nr.current=!0,()=>{nr.current=!1}),[]);const cr=Te.useMemo(()=>()=>Sn.current&&ge===Nt.current?Sn.current:ea(un.getState(),ge),[un,ge]),Vr=Te.useMemo(()=>sn=>St?Vq(Z,un,St,ea,Nt,Et,Fn,nr,Sn,ke,sn):()=>{},[St]);jq(Uq,[Nt,Et,Fn,ge,Sn,ke]);let Ya;try{Ya=tC(Vr,cr,Tn?()=>ea(Tn(),ge):cr)}catch(vr){throw Zn.current&&(vr.message+=`
The error may be correlated with this previous error:
${Zn.current.stack}

`),vr}c_(()=>{Zn.current=void 0,Sn.current=void 0,Et.current=Ya});const jn=Te.useMemo(()=>Te.createElement(te,Vu({},Ya,{ref:Ge})),[Ge,te,Ya]);return Te.useMemo(()=>Z?Te.createElement(Xe.Provider,{value:Ct},jn):jn,[Xe,jn,Ct])}const Se=Te.memo(ee);if(Se.WrappedComponent=te,Se.displayName=ee.displayName=K,o){const Ie=Te.forwardRef(function(ge,Xe){return Te.createElement(Se,Vu({},ge,{reactReduxForwardedRef:Xe}))});return Ie.displayName=K,Ie.WrappedComponent=te,oE(Ie,te)}return oE(Se,te)}}function $q({store:t,context:a,children:s,serverState:l,stabilityCheck:f="once",noopCheck:g="once"}){const w=Te.useMemo(()=>{const M=eC(t);return{store:t,subscription:M,getServerState:l?()=>l:void 0,stabilityCheck:f,noopCheck:g}},[t,l,f,g]),I=Te.useMemo(()=>t.getState(),[t]);c_(()=>{const{subscription:M}=w;return M.onStateChange=M.notifyNestedSubs,M.trySubscribe(),I!==t.getState()&&M.notifyNestedSubs(),()=>{M.tryUnsubscribe(),M.onStateChange=void 0}},[w,I]);const o=a||qA;return Te.createElement(o.Provider,{value:w},s)}Nq(GA.useSyncExternalStore);sq(D_.unstable_batchedUpdates);function qq(t,a){if(t.length!==a.length)return!1;for(var s=0;s<t.length;s++)if(t[s]!==a[s])return!1;return!0}function aC(t,a){var s=Te.useState(function(){return{inputs:a,result:t()}})[0],l=Te.useRef(!0),f=Te.useRef(s),g=l.current||!!(a&&f.current.inputs&&qq(a,f.current.inputs)),w=g?f.current:{inputs:a,result:t()};return Te.useEffect(function(){l.current=!1,f.current=w},[w]),w.result}function Wq(t,a){return aC(function(){return t},a)}var Ta=aC,Bn=Wq,Hq="Invariant failed";function Zq(t,a){if(!t)throw new Error(Hq)}var fc=function(a){var s=a.top,l=a.right,f=a.bottom,g=a.left,w=l-g,I=f-s,o={top:s,right:l,bottom:f,left:g,width:w,height:I,x:g,y:s,center:{x:(l+g)/2,y:(f+s)/2}};return o},E6=function(a,s){return{top:a.top-s.top,left:a.left-s.left,bottom:a.bottom+s.bottom,right:a.right+s.right}},dE=function(a,s){return{top:a.top+s.top,left:a.left+s.left,bottom:a.bottom-s.bottom,right:a.right-s.right}},Yq=function(a,s){return{top:a.top+s.y,left:a.left+s.x,bottom:a.bottom+s.y,right:a.right+s.x}},dv={top:0,right:0,bottom:0,left:0},I6=function(a){var s=a.borderBox,l=a.margin,f=l===void 0?dv:l,g=a.border,w=g===void 0?dv:g,I=a.padding,o=I===void 0?dv:I,M=fc(E6(s,f)),B=fc(dE(s,w)),L=fc(dE(B,o));return{marginBox:M,borderBox:fc(s),paddingBox:B,contentBox:L,margin:f,border:w,padding:o}},Ao=function(a){var s=a.slice(0,-2),l=a.slice(-2);if(l!=="px")return 0;var f=Number(s);return isNaN(f)&&Zq(!1),f},Xq=function(){return{x:window.pageXOffset,y:window.pageYOffset}},l_=function(a,s){var l=a.borderBox,f=a.border,g=a.margin,w=a.padding,I=Yq(l,s);return I6({borderBox:I,border:f,margin:g,padding:w})},u_=function(a,s){return s===void 0&&(s=Xq()),l_(a,s)},rC=function(a,s){var l={top:Ao(s.marginTop),right:Ao(s.marginRight),bottom:Ao(s.marginBottom),left:Ao(s.marginLeft)},f={top:Ao(s.paddingTop),right:Ao(s.paddingRight),bottom:Ao(s.paddingBottom),left:Ao(s.paddingLeft)},g={top:Ao(s.borderTopWidth),right:Ao(s.borderRightWidth),bottom:Ao(s.borderBottomWidth),left:Ao(s.borderLeftWidth)};return I6({borderBox:a,margin:l,padding:f,border:g})},sC=function(a){var s=a.getBoundingClientRect(),l=window.getComputedStyle(a);return rC(s,l)},pE=Number.isNaN||function(a){return typeof a=="number"&&a!==a};function Jq(t,a){return!!(t===a||pE(t)&&pE(a))}function Kq(t,a){if(t.length!==a.length)return!1;for(var s=0;s<t.length;s++)if(!Jq(t[s],a[s]))return!1;return!0}function ps(t,a){a===void 0&&(a=Kq);var s=null;function l(){for(var f=[],g=0;g<arguments.length;g++)f[g]=arguments[g];if(s&&s.lastThis===this&&a(f,s.lastArgs))return s.lastResult;var w=t.apply(this,f);return s={lastResult:w,lastArgs:f,lastThis:this},w}return l.clear=function(){s=null},l}var M0=function(a){var s=[],l=null,f=function(){for(var w=arguments.length,I=new Array(w),o=0;o<w;o++)I[o]=arguments[o];s=I,!l&&(l=requestAnimationFrame(function(){l=null,a.apply(void 0,s)}))};return f.cancel=function(){l&&(cancelAnimationFrame(l),l=null)},f};function iC(t,a){}iC.bind(null,"warn");iC.bind(null,"error");function Gu(){}function Qq(t,a){return{...t,...a}}function ko(t,a,s){const l=a.map(f=>{const g=Qq(s,f.options);return t.addEventListener(f.eventName,f.fn,g),function(){t.removeEventListener(f.eventName,f.fn,g)}});return function(){l.forEach(g=>{g()})}}const eW="Invariant failed";class d_ extends Error{}d_.prototype.toString=function(){return this.message};function ln(t,a){if(!t)throw new d_(eW)}class tW extends Hn.Component{constructor(...a){super(...a),this.callbacks=null,this.unbind=Gu,this.onWindowError=s=>{const l=this.getCallbacks();l.isDragging()&&l.tryAbort(),s.error instanceof d_&&s.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=s=>{this.callbacks=s}}componentDidMount(){this.unbind=ko(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(a){if(a instanceof d_){this.setState({});return}throw a}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const nW=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,p_=t=>t+1,aW=t=>`
  You have lifted an item in position ${p_(t.source.index)}
`,oC=(t,a)=>{const s=t.droppableId===a.droppableId,l=p_(t.index),f=p_(a.index);return s?`
      You have moved the item from position ${l}
      to position ${f}
    `:`
    You have moved the item from position ${l}
    in list ${t.droppableId}
    to list ${a.droppableId}
    in position ${f}
  `},cC=(t,a,s)=>a.droppableId===s.droppableId?`
      The item ${t}
      has been combined with ${s.draggableId}`:`
      The item ${t}
      in list ${a.droppableId}
      has been combined with ${s.draggableId}
      in list ${s.droppableId}
    `,rW=t=>{const a=t.destination;if(a)return oC(t.source,a);const s=t.combine;return s?cC(t.draggableId,t.source,s):"You are over an area that cannot be dropped on"},fE=t=>`
  The item has returned to its starting position
  of ${p_(t.index)}
`,sW=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${fE(t.source)}
    `;const a=t.destination,s=t.combine;return a?`
      You have dropped the item.
      ${oC(t.source,a)}
    `:s?`
      You have dropped the item.
      ${cC(t.draggableId,t.source,s)}
    `:`
    The item has been dropped while not over a drop area.
    ${fE(t.source)}
  `},iW={dragHandleUsageInstructions:nW,onDragStart:aW,onDragUpdate:rW,onDragEnd:sW};var Eb=iW;const fs={x:0,y:0},Is=(t,a)=>({x:t.x+a.x,y:t.y+a.y}),ro=(t,a)=>({x:t.x-a.x,y:t.y-a.y}),$u=(t,a)=>t.x===a.x&&t.y===a.y,ih=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),_p=(t,a,s=0)=>t==="x"?{x:a,y:s}:{x:s,y:a},R0=(t,a)=>Math.sqrt((a.x-t.x)**2+(a.y-t.y)**2),hE=(t,a)=>Math.min(...a.map(s=>R0(t,s))),lC=t=>a=>({x:t(a.x),y:t(a.y)});var oW=(t,a)=>{const s=fc({top:Math.max(a.top,t.top),right:Math.min(a.right,t.right),bottom:Math.min(a.bottom,t.bottom),left:Math.max(a.left,t.left)});return s.width<=0||s.height<=0?null:s};const Q0=(t,a)=>({top:t.top+a.y,left:t.left+a.x,bottom:t.bottom+a.y,right:t.right+a.x}),mE=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],cW={top:0,right:0,bottom:0,left:0},lW=(t,a)=>a?Q0(t,a.scroll.diff.displacement):t,uW=(t,a,s)=>s&&s.increasedBy?{...t,[a.end]:t[a.end]+s.increasedBy[a.line]}:t,dW=(t,a)=>a&&a.shouldClipSubject?oW(a.pageMarginBox,t):fc(t);var Jf=({page:t,withPlaceholder:a,axis:s,frame:l})=>{const f=lW(t.marginBox,l),g=uW(f,s,a),w=dW(g,l);return{page:t,withPlaceholder:a,active:w}},P6=(t,a)=>{t.frame||ln(!1);const s=t.frame,l=ro(a,s.scroll.initial),f=ih(l),g={...s,scroll:{initial:s.scroll.initial,current:a,diff:{value:l,displacement:f},max:s.scroll.max}},w=Jf({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:g});return{...t,frame:g,subject:w}};const uC=ps(t=>t.reduce((a,s)=>(a[s.descriptor.id]=s,a),{})),dC=ps(t=>t.reduce((a,s)=>(a[s.descriptor.id]=s,a),{})),dy=ps(t=>Object.values(t)),pW=ps(t=>Object.values(t));var oh=ps((t,a)=>pW(a).filter(l=>t===l.descriptor.droppableId).sort((l,f)=>l.descriptor.index-f.descriptor.index));function z6(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function py(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var fy=ps((t,a)=>a.filter(s=>s.descriptor.id!==t.descriptor.id)),fW=({isMovingForward:t,draggable:a,destination:s,insideDestination:l,previousImpact:f})=>{if(!s.isCombineEnabled||!z6(f))return null;function w(j){const Z={type:"COMBINE",combine:{draggableId:j,droppableId:s.descriptor.id}};return{...f,at:Z}}const I=f.displaced.all,o=I.length?I[0]:null;if(t)return o?w(o):null;const M=fy(a,l);if(!o){if(!M.length)return null;const j=M[M.length-1];return w(j.descriptor.id)}const B=M.findIndex(j=>j.descriptor.id===o);B===-1&&ln(!1);const L=B-1;if(L<0)return null;const O=M[L];return w(O.descriptor.id)},ch=(t,a)=>t.descriptor.droppableId===a.descriptor.id;const pC={point:fs,value:0},k0={invisible:{},visible:{},all:[]},hW={displaced:k0,displacedBy:pC,at:null};var mW=hW,Do=(t,a)=>s=>t<=s&&s<=a,fC=t=>{const a=Do(t.top,t.bottom),s=Do(t.left,t.right);return l=>{if(a(l.top)&&a(l.bottom)&&s(l.left)&&s(l.right))return!0;const g=a(l.top)||a(l.bottom),w=s(l.left)||s(l.right);if(g&&w)return!0;const o=l.top<t.top&&l.bottom>t.bottom,M=l.left<t.left&&l.right>t.right;return o&&M?!0:o&&w||M&&g}},gW=t=>{const a=Do(t.top,t.bottom),s=Do(t.left,t.right);return l=>a(l.top)&&a(l.bottom)&&s(l.left)&&s(l.right)};const A6={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},hC={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var bW=t=>a=>{const s=Do(a.top,a.bottom),l=Do(a.left,a.right);return f=>t===A6?s(f.top)&&s(f.bottom):l(f.left)&&l(f.right)};const _W=(t,a)=>{const s=a.frame?a.frame.scroll.diff.displacement:fs;return Q0(t,s)},yW=(t,a,s)=>a.subject.active?s(a.subject.active)(t):!1,vW=(t,a,s)=>s(a)(t),C6=({target:t,destination:a,viewport:s,withDroppableDisplacement:l,isVisibleThroughFrameFn:f})=>{const g=l?_W(t,a):t;return yW(g,a,f)&&vW(g,s,f)},xW=t=>C6({...t,isVisibleThroughFrameFn:fC}),mC=t=>C6({...t,isVisibleThroughFrameFn:gW}),wW=t=>C6({...t,isVisibleThroughFrameFn:bW(t.destination.axis)}),SW=(t,a,s)=>{if(typeof s=="boolean")return s;if(!a)return!0;const{invisible:l,visible:f}=a;if(l[t])return!1;const g=f[t];return g?g.shouldAnimate:!0};function TW(t,a){const s=t.page.marginBox,l={top:a.point.y,right:0,bottom:0,left:a.point.x};return fc(E6(s,l))}function L0({afterDragging:t,destination:a,displacedBy:s,viewport:l,forceShouldAnimate:f,last:g}){return t.reduce(function(I,o){const M=TW(o,s),B=o.descriptor.id;if(I.all.push(B),!xW({target:M,destination:a,viewport:l,withDroppableDisplacement:!0}))return I.invisible[o.descriptor.id]=!0,I;const O=SW(B,g,f),j={draggableId:B,shouldAnimate:O};return I.visible[B]=j,I},{all:[],visible:{},invisible:{}})}function EW(t,a){if(!t.length)return 0;const s=t[t.length-1].descriptor.index;return a.inHomeList?s:s+1}function gE({insideDestination:t,inHomeList:a,displacedBy:s,destination:l}){const f=EW(t,{inHomeList:a});return{displaced:k0,displacedBy:s,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:f}}}}function f_({draggable:t,insideDestination:a,destination:s,viewport:l,displacedBy:f,last:g,index:w,forceShouldAnimate:I}){const o=ch(t,s);if(w==null)return gE({insideDestination:a,inHomeList:o,displacedBy:f,destination:s});const M=a.find(Z=>Z.descriptor.index===w);if(!M)return gE({insideDestination:a,inHomeList:o,displacedBy:f,destination:s});const B=fy(t,a),L=a.indexOf(M),O=B.slice(L);return{displaced:L0({afterDragging:O,destination:s,displacedBy:f,last:g,viewport:l.frame,forceShouldAnimate:I}),displacedBy:f,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:w}}}}function Yu(t,a){return!!a.effected[t]}var IW=({isMovingForward:t,destination:a,draggables:s,combine:l,afterCritical:f})=>{if(!a.isCombineEnabled)return null;const g=l.draggableId,I=s[g].descriptor.index;return Yu(g,f)?t?I:I-1:t?I+1:I},PW=({isMovingForward:t,isInHomeList:a,insideDestination:s,location:l})=>{if(!s.length)return null;const f=l.index,g=t?f+1:f-1,w=s[0].descriptor.index,I=s[s.length-1].descriptor.index,o=a?I:I+1;return g<w||g>o?null:g},zW=({isMovingForward:t,isInHomeList:a,draggable:s,draggables:l,destination:f,insideDestination:g,previousImpact:w,viewport:I,afterCritical:o})=>{const M=w.at;if(M||ln(!1),M.type==="REORDER"){const L=PW({isMovingForward:t,isInHomeList:a,location:M.destination,insideDestination:g});return L==null?null:f_({draggable:s,insideDestination:g,destination:f,viewport:I,last:w.displaced,displacedBy:w.displacedBy,index:L})}const B=IW({isMovingForward:t,destination:f,displaced:w.displaced,draggables:l,combine:M.combine,afterCritical:o});return B==null?null:f_({draggable:s,insideDestination:g,destination:f,viewport:I,last:w.displaced,displacedBy:w.displacedBy,index:B})},AW=({displaced:t,afterCritical:a,combineWith:s,displacedBy:l})=>{const f=!!(t.visible[s]||t.invisible[s]);return Yu(s,a)?f?fs:ih(l.point):f?l.point:fs},CW=({afterCritical:t,impact:a,draggables:s})=>{const l=py(a);l||ln(!1);const f=l.draggableId,g=s[f].page.borderBox.center,w=AW({displaced:a.displaced,afterCritical:t,combineWith:f,displacedBy:a.displacedBy});return Is(g,w)};const gC=(t,a)=>a.margin[t.start]+a.borderBox[t.size]/2,MW=(t,a)=>a.margin[t.end]+a.borderBox[t.size]/2,M6=(t,a,s)=>a[t.crossAxisStart]+s.margin[t.crossAxisStart]+s.borderBox[t.crossAxisSize]/2,bE=({axis:t,moveRelativeTo:a,isMoving:s})=>_p(t.line,a.marginBox[t.end]+gC(t,s),M6(t,a.marginBox,s)),_E=({axis:t,moveRelativeTo:a,isMoving:s})=>_p(t.line,a.marginBox[t.start]-MW(t,s),M6(t,a.marginBox,s)),RW=({axis:t,moveInto:a,isMoving:s})=>_p(t.line,a.contentBox[t.start]+gC(t,s),M6(t,a.contentBox,s));var kW=({impact:t,draggable:a,draggables:s,droppable:l,afterCritical:f})=>{const g=oh(l.descriptor.id,s),w=a.page,I=l.axis;if(!g.length)return RW({axis:I,moveInto:l.page,isMoving:w});const{displaced:o,displacedBy:M}=t,B=o.all[0];if(B){const O=s[B];if(Yu(B,f))return _E({axis:I,moveRelativeTo:O.page,isMoving:w});const j=l_(O.page,M.point);return _E({axis:I,moveRelativeTo:j,isMoving:w})}const L=g[g.length-1];if(L.descriptor.id===a.descriptor.id)return w.borderBox.center;if(Yu(L.descriptor.id,f)){const O=l_(L.page,ih(f.displacedBy.point));return bE({axis:I,moveRelativeTo:O,isMoving:w})}return bE({axis:I,moveRelativeTo:L.page,isMoving:w})},Ux=(t,a)=>{const s=t.frame;return s?Is(a,s.scroll.diff.displacement):a};const LW=({impact:t,draggable:a,droppable:s,draggables:l,afterCritical:f})=>{const g=a.page.borderBox.center,w=t.at;return!s||!w?g:w.type==="REORDER"?kW({impact:t,draggable:a,draggables:l,droppable:s,afterCritical:f}):CW({impact:t,draggables:l,afterCritical:f})};var hy=t=>{const a=LW(t),s=t.droppable;return s?Ux(s,a):a},bC=(t,a)=>{const s=ro(a,t.scroll.initial),l=ih(s);return{frame:fc({top:a.y,bottom:a.y+t.frame.height,left:a.x,right:a.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:a,diff:{value:s,displacement:l}}}};function yE(t,a){return t.map(s=>a[s])}function DW(t,a){for(let s=0;s<a.length;s++){const l=a[s].visible[t];if(l)return l}return null}var OW=({impact:t,viewport:a,destination:s,draggables:l,maxScrollChange:f})=>{const g=bC(a,Is(a.scroll.current,f)),w=s.frame?P6(s,Is(s.frame.scroll.current,f)):s,I=t.displaced,o=L0({afterDragging:yE(I.all,l),destination:s,displacedBy:t.displacedBy,viewport:g.frame,last:I,forceShouldAnimate:!1}),M=L0({afterDragging:yE(I.all,l),destination:w,displacedBy:t.displacedBy,viewport:a.frame,last:I,forceShouldAnimate:!1}),B={},L={},O=[I,o,M];return I.all.forEach(Z=>{const H=DW(Z,O);if(H){L[Z]=H;return}B[Z]=!0}),{...t,displaced:{all:I.all,invisible:B,visible:L}}},BW=(t,a)=>Is(t.scroll.diff.displacement,a),R6=({pageBorderBoxCenter:t,draggable:a,viewport:s})=>{const l=BW(s,t),f=ro(l,a.page.borderBox.center);return Is(a.client.borderBox.center,f)},_C=({draggable:t,destination:a,newPageBorderBoxCenter:s,viewport:l,withDroppableDisplacement:f,onlyOnMainAxis:g=!1})=>{const w=ro(s,t.page.borderBox.center),o={target:Q0(t.page.borderBox,w),destination:a,withDroppableDisplacement:f,viewport:l};return g?wW(o):mC(o)},NW=({isMovingForward:t,draggable:a,destination:s,draggables:l,previousImpact:f,viewport:g,previousPageBorderBoxCenter:w,previousClientSelection:I,afterCritical:o})=>{if(!s.isEnabled)return null;const M=oh(s.descriptor.id,l),B=ch(a,s),L=fW({isMovingForward:t,draggable:a,destination:s,insideDestination:M,previousImpact:f})||zW({isMovingForward:t,isInHomeList:B,draggable:a,draggables:l,destination:s,insideDestination:M,previousImpact:f,viewport:g,afterCritical:o});if(!L)return null;const O=hy({impact:L,draggable:a,droppable:s,draggables:l,afterCritical:o});if(_C({draggable:a,destination:s,newPageBorderBoxCenter:O,viewport:g.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:R6({pageBorderBoxCenter:O,draggable:a,viewport:g}),impact:L,scrollJumpRequest:null};const Z=ro(O,w),H=OW({impact:L,viewport:g,destination:s,draggables:l,maxScrollChange:Z});return{clientSelection:I,impact:H,scrollJumpRequest:Z}};const oi=t=>{const a=t.subject.active;return a||ln(!1),a};var FW=({isMovingForward:t,pageBorderBoxCenter:a,source:s,droppables:l,viewport:f})=>{const g=s.subject.active;if(!g)return null;const w=s.axis,I=Do(g[w.start],g[w.end]),o=dy(l).filter(B=>B!==s).filter(B=>B.isEnabled).filter(B=>!!B.subject.active).filter(B=>fC(f.frame)(oi(B))).filter(B=>{const L=oi(B);return t?g[w.crossAxisEnd]<L[w.crossAxisEnd]:L[w.crossAxisStart]<g[w.crossAxisStart]}).filter(B=>{const L=oi(B),O=Do(L[w.start],L[w.end]);return I(L[w.start])||I(L[w.end])||O(g[w.start])||O(g[w.end])}).sort((B,L)=>{const O=oi(B)[w.crossAxisStart],j=oi(L)[w.crossAxisStart];return t?O-j:j-O}).filter((B,L,O)=>oi(B)[w.crossAxisStart]===oi(O[0])[w.crossAxisStart]);if(!o.length)return null;if(o.length===1)return o[0];const M=o.filter(B=>Do(oi(B)[w.start],oi(B)[w.end])(a[w.line]));return M.length===1?M[0]:M.length>1?M.sort((B,L)=>oi(B)[w.start]-oi(L)[w.start])[0]:o.sort((B,L)=>{const O=hE(a,mE(oi(B))),j=hE(a,mE(oi(L)));return O!==j?O-j:oi(B)[w.start]-oi(L)[w.start]})[0]};const vE=(t,a)=>{const s=t.page.borderBox.center;return Yu(t.descriptor.id,a)?ro(s,a.displacedBy.point):s},jW=(t,a)=>{const s=t.page.borderBox;return Yu(t.descriptor.id,a)?Q0(s,ih(a.displacedBy.point)):s};var UW=({pageBorderBoxCenter:t,viewport:a,destination:s,insideDestination:l,afterCritical:f})=>l.filter(w=>mC({target:jW(w,f),destination:s,viewport:a.frame,withDroppableDisplacement:!0})).sort((w,I)=>{const o=R0(t,Ux(s,vE(w,f))),M=R0(t,Ux(s,vE(I,f)));return o<M?-1:M<o?1:w.descriptor.index-I.descriptor.index})[0]||null,eg=ps(function(a,s){const l=s[a.line];return{value:l,point:_p(a.line,l)}});const VW=(t,a,s)=>{const l=t.axis;if(t.descriptor.mode==="virtual")return _p(l.line,a[l.line]);const f=t.subject.page.contentBox[l.size],o=oh(t.descriptor.id,s).reduce((M,B)=>M+B.client.marginBox[l.size],0)+a[l.line]-f;return o<=0?null:_p(l.line,o)},yC=(t,a)=>({...t,scroll:{...t.scroll,max:a}}),vC=(t,a,s)=>{const l=t.frame;ch(a,t)&&ln(!1),t.subject.withPlaceholder&&ln(!1);const f=eg(t.axis,a.displaceBy).point,g=VW(t,f,s),w={placeholderSize:f,increasedBy:g,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!l){const B=Jf({page:t.subject.page,withPlaceholder:w,axis:t.axis,frame:t.frame});return{...t,subject:B}}const I=g?Is(l.scroll.max,g):l.scroll.max,o=yC(l,I),M=Jf({page:t.subject.page,withPlaceholder:w,axis:t.axis,frame:o});return{...t,subject:M,frame:o}},GW=t=>{const a=t.subject.withPlaceholder;a||ln(!1);const s=t.frame;if(!s){const w=Jf({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:w}}const l=a.oldFrameMaxScroll;l||ln(!1);const f=yC(s,l),g=Jf({page:t.subject.page,axis:t.axis,frame:f,withPlaceholder:null});return{...t,subject:g,frame:f}};var $W=({previousPageBorderBoxCenter:t,moveRelativeTo:a,insideDestination:s,draggable:l,draggables:f,destination:g,viewport:w,afterCritical:I})=>{if(!a){if(s.length)return null;const L={displaced:k0,displacedBy:pC,at:{type:"REORDER",destination:{droppableId:g.descriptor.id,index:0}}},O=hy({impact:L,draggable:l,droppable:g,draggables:f,afterCritical:I}),j=ch(l,g)?g:vC(g,l,f);return _C({draggable:l,destination:j,newPageBorderBoxCenter:O,viewport:w.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?L:null}const o=t[g.axis.line]<=a.page.borderBox.center[g.axis.line],M=(()=>{const L=a.descriptor.index;return a.descriptor.id===l.descriptor.id||o?L:L+1})(),B=eg(g.axis,l.displaceBy);return f_({draggable:l,insideDestination:s,destination:g,viewport:w,displacedBy:B,last:k0,index:M})},qW=({isMovingForward:t,previousPageBorderBoxCenter:a,draggable:s,isOver:l,draggables:f,droppables:g,viewport:w,afterCritical:I})=>{const o=FW({isMovingForward:t,pageBorderBoxCenter:a,source:l,droppables:g,viewport:w});if(!o)return null;const M=oh(o.descriptor.id,f),B=UW({pageBorderBoxCenter:a,viewport:w,destination:o,insideDestination:M,afterCritical:I}),L=$W({previousPageBorderBoxCenter:a,destination:o,draggable:s,draggables:f,moveRelativeTo:B,insideDestination:M,viewport:w,afterCritical:I});if(!L)return null;const O=hy({impact:L,draggable:s,droppable:o,draggables:f,afterCritical:I});return{clientSelection:R6({pageBorderBoxCenter:O,draggable:s,viewport:w}),impact:L,scrollJumpRequest:null}},io=t=>{const a=t.at;return a?a.type==="REORDER"?a.destination.droppableId:a.combine.droppableId:null};const WW=(t,a)=>{const s=io(t);return s?a[s]:null};var HW=({state:t,type:a})=>{const s=WW(t.impact,t.dimensions.droppables),l=!!s,f=t.dimensions.droppables[t.critical.droppable.id],g=s||f,w=g.axis.direction,I=w==="vertical"&&(a==="MOVE_UP"||a==="MOVE_DOWN")||w==="horizontal"&&(a==="MOVE_LEFT"||a==="MOVE_RIGHT");if(I&&!l)return null;const o=a==="MOVE_DOWN"||a==="MOVE_RIGHT",M=t.dimensions.draggables[t.critical.draggable.id],B=t.current.page.borderBoxCenter,{draggables:L,droppables:O}=t.dimensions;return I?NW({isMovingForward:o,previousPageBorderBoxCenter:B,draggable:M,destination:g,draggables:L,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):qW({isMovingForward:o,previousPageBorderBoxCenter:B,draggable:M,isOver:g,draggables:L,droppables:O,viewport:t.viewport,afterCritical:t.afterCritical})};function ep(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function xC(t){const a=Do(t.top,t.bottom),s=Do(t.left,t.right);return function(f){return a(f.y)&&s(f.x)}}function ZW(t,a){return t.left<a.right&&t.right>a.left&&t.top<a.bottom&&t.bottom>a.top}function YW({pageBorderBox:t,draggable:a,candidates:s}){const l=a.page.borderBox.center,f=s.map(g=>{const w=g.axis,I=_p(g.axis.line,t.center[w.line],g.page.borderBox.center[w.crossAxisLine]);return{id:g.descriptor.id,distance:R0(l,I)}}).sort((g,w)=>w.distance-g.distance);return f[0]?f[0].id:null}function XW({pageBorderBox:t,draggable:a,droppables:s}){const l=dy(s).filter(f=>{if(!f.isEnabled)return!1;const g=f.subject.active;if(!g||!ZW(t,g))return!1;if(xC(g)(t.center))return!0;const w=f.axis,I=g.center[w.crossAxisLine],o=t[w.crossAxisStart],M=t[w.crossAxisEnd],B=Do(g[w.crossAxisStart],g[w.crossAxisEnd]),L=B(o),O=B(M);return!L&&!O?!0:L?o<I:M>I});return l.length?l.length===1?l[0].descriptor.id:YW({pageBorderBox:t,draggable:a,candidates:l}):null}const wC=(t,a)=>fc(Q0(t,a));var JW=(t,a)=>{const s=t.frame;return s?wC(a,s.scroll.diff.value):a};function SC({displaced:t,id:a}){return!!(t.visible[a]||t.invisible[a])}function KW({draggable:t,closest:a,inHomeList:s}){return a?s&&a.descriptor.index>t.descriptor.index?a.descriptor.index-1:a.descriptor.index:null}var QW=({pageBorderBoxWithDroppableScroll:t,draggable:a,destination:s,insideDestination:l,last:f,viewport:g,afterCritical:w})=>{const I=s.axis,o=eg(s.axis,a.displaceBy),M=o.value,B=t[I.start],L=t[I.end],j=fy(a,l).find(H=>{const te=H.descriptor.id,J=H.page.borderBox.center[I.line],K=Yu(te,w),W=SC({displaced:f,id:te});return K?W?L<=J:B<J-M:W?L<=J+M:B<J})||null,Z=KW({draggable:a,closest:j,inHomeList:ch(a,s)});return f_({draggable:a,insideDestination:l,destination:s,viewport:g,last:f,displacedBy:o,index:Z})};const eH=4;var tH=({draggable:t,pageBorderBoxWithDroppableScroll:a,previousImpact:s,destination:l,insideDestination:f,afterCritical:g})=>{if(!l.isCombineEnabled)return null;const w=l.axis,I=eg(l.axis,t.displaceBy),o=I.value,M=a[w.start],B=a[w.end],O=fy(t,f).find(Z=>{const H=Z.descriptor.id,te=Z.page.borderBox,K=te[w.size]/eH,W=Yu(H,g),ee=SC({displaced:s.displaced,id:H});return W?ee?B>te[w.start]+K&&B<te[w.end]-K:M>te[w.start]-o+K&&M<te[w.end]-o-K:ee?B>te[w.start]+o+K&&B<te[w.end]+o-K:M>te[w.start]+K&&M<te[w.end]-K});return O?{displacedBy:I,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:O.descriptor.id,droppableId:l.descriptor.id}}}:null},TC=({pageOffset:t,draggable:a,draggables:s,droppables:l,previousImpact:f,viewport:g,afterCritical:w})=>{const I=wC(a.page.borderBox,t),o=XW({pageBorderBox:I,draggable:a,droppables:l});if(!o)return mW;const M=l[o],B=oh(M.descriptor.id,s),L=JW(M,I);return tH({pageBorderBoxWithDroppableScroll:L,draggable:a,previousImpact:f,destination:M,insideDestination:B,afterCritical:w})||QW({pageBorderBoxWithDroppableScroll:L,draggable:a,destination:M,insideDestination:B,last:f.displaced,viewport:g,afterCritical:w})},k6=(t,a)=>({...t,[a.descriptor.id]:a});const nH=({previousImpact:t,impact:a,droppables:s})=>{const l=io(t),f=io(a);if(!l||l===f)return s;const g=s[l];if(!g.subject.withPlaceholder)return s;const w=GW(g);return k6(s,w)};var aH=({draggable:t,draggables:a,droppables:s,previousImpact:l,impact:f})=>{const g=nH({previousImpact:l,impact:f,droppables:s}),w=io(f);if(!w)return g;const I=s[w];if(ch(t,I)||I.subject.withPlaceholder)return g;const o=vC(I,t,a);return k6(g,o)},Xm=({state:t,clientSelection:a,dimensions:s,viewport:l,impact:f,scrollJumpRequest:g})=>{const w=l||t.viewport,I=s||t.dimensions,o=a||t.current.client.selection,M=ro(o,t.initial.client.selection),B={offset:M,selection:o,borderBoxCenter:Is(t.initial.client.borderBoxCenter,M)},L={selection:Is(B.selection,w.scroll.current),borderBoxCenter:Is(B.borderBoxCenter,w.scroll.current),offset:Is(B.offset,w.scroll.diff.value)},O={client:B,page:L};if(t.phase==="COLLECTING")return{...t,dimensions:I,viewport:w,current:O};const j=I.draggables[t.critical.draggable.id],Z=f||TC({pageOffset:L.offset,draggable:j,draggables:I.draggables,droppables:I.droppables,previousImpact:t.impact,viewport:w,afterCritical:t.afterCritical}),H=aH({draggable:j,impact:Z,previousImpact:t.impact,draggables:I.draggables,droppables:I.droppables});return{...t,current:O,dimensions:{draggables:I.draggables,droppables:H},impact:Z,viewport:w,scrollJumpRequest:g||null,forceShouldAnimate:g?!1:null}};function rH(t,a){return t.map(s=>a[s])}var EC=({impact:t,viewport:a,draggables:s,destination:l,forceShouldAnimate:f})=>{const g=t.displaced,w=rH(g.all,s),I=L0({afterDragging:w,destination:l,displacedBy:t.displacedBy,viewport:a.frame,forceShouldAnimate:f,last:g});return{...t,displaced:I}},IC=({impact:t,draggable:a,droppable:s,draggables:l,viewport:f,afterCritical:g})=>{const w=hy({impact:t,draggable:a,draggables:l,droppable:s,afterCritical:g});return R6({pageBorderBoxCenter:w,draggable:a,viewport:f})},PC=({state:t,dimensions:a,viewport:s})=>{t.movementMode!=="SNAP"&&ln(!1);const l=t.impact,f=s||t.viewport,g=a||t.dimensions,{draggables:w,droppables:I}=g,o=w[t.critical.draggable.id],M=io(l);M||ln(!1);const B=I[M],L=EC({impact:l,viewport:f,destination:B,draggables:w}),O=IC({impact:L,draggable:o,droppable:B,draggables:w,viewport:f,afterCritical:t.afterCritical});return Xm({impact:L,clientSelection:O,state:t,dimensions:g,viewport:f})},sH=t=>({index:t.index,droppableId:t.droppableId}),zC=({draggable:t,home:a,draggables:s,viewport:l})=>{const f=eg(a.axis,t.displaceBy),g=oh(a.descriptor.id,s),w=g.indexOf(t);w===-1&&ln(!1);const I=g.slice(w+1),o=I.reduce((O,j)=>(O[j.descriptor.id]=!0,O),{}),M={inVirtualList:a.descriptor.mode==="virtual",displacedBy:f,effected:o};return{impact:{displaced:L0({afterDragging:I,destination:a,displacedBy:f,last:null,viewport:l.frame,forceShouldAnimate:!1}),displacedBy:f,at:{type:"REORDER",destination:sH(t.descriptor)}},afterCritical:M}},iH=(t,a)=>({draggables:t.draggables,droppables:k6(t.droppables,a)}),oH=({draggable:t,offset:a,initialWindowScroll:s})=>{const l=l_(t.client,a),f=u_(l,s);return{...t,placeholder:{...t.placeholder,client:l},client:l,page:f}},cH=t=>{const a=t.frame;return a||ln(!1),a},lH=({additions:t,updatedDroppables:a,viewport:s})=>{const l=s.scroll.diff.value;return t.map(f=>{const g=f.descriptor.droppableId,w=a[g],o=cH(w).scroll.diff.value,M=Is(l,o);return oH({draggable:f,offset:M,initialWindowScroll:s.scroll.initial})})},uH=({state:t,published:a})=>{const s=a.modified.map(J=>{const K=t.dimensions.droppables[J.droppableId];return P6(K,J.scroll)}),l={...t.dimensions.droppables,...uC(s)},f=dC(lH({additions:a.additions,updatedDroppables:l,viewport:t.viewport})),g={...t.dimensions.draggables,...f};a.removals.forEach(J=>{delete g[J]});const w={droppables:l,draggables:g},I=io(t.impact),o=I?w.droppables[I]:null,M=w.draggables[t.critical.draggable.id],B=w.droppables[t.critical.droppable.id],{impact:L,afterCritical:O}=zC({draggable:M,home:B,draggables:g,viewport:t.viewport}),j=o&&o.isCombineEnabled?t.impact:L,Z=TC({pageOffset:t.current.page.offset,draggable:w.draggables[t.critical.draggable.id],draggables:w.draggables,droppables:w.droppables,previousImpact:j,viewport:t.viewport,afterCritical:O}),H={...t,phase:"DRAGGING",impact:Z,onLiftImpact:L,dimensions:w,afterCritical:O,forceShouldAnimate:!1};return t.phase==="COLLECTING"?H:{...H,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const Vx=t=>t.movementMode==="SNAP",pv=(t,a,s)=>{const l=iH(t.dimensions,a);return!Vx(t)||s?Xm({state:t,dimensions:l}):PC({state:t,dimensions:l})};function fv(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const xE={phase:"IDLE",completed:null,shouldFlush:!1};var dH=(t=xE,a)=>{if(a.type==="FLUSH")return{...xE,shouldFlush:!0};if(a.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ln(!1);const{critical:s,clientSelection:l,viewport:f,dimensions:g,movementMode:w}=a.payload,I=g.draggables[s.draggable.id],o=g.droppables[s.droppable.id],M={selection:l,borderBoxCenter:I.client.borderBox.center,offset:fs},B={client:M,page:{selection:Is(M.selection,f.scroll.initial),borderBoxCenter:Is(M.selection,f.scroll.initial),offset:Is(M.selection,f.scroll.diff.value)}},L=dy(g.droppables).every(H=>!H.isFixedOnPage),{impact:O,afterCritical:j}=zC({draggable:I,home:o,draggables:g.draggables,viewport:f});return{phase:"DRAGGING",isDragging:!0,critical:s,movementMode:w,dimensions:g,initial:B,current:B,isWindowScrollAllowed:L,impact:O,afterCritical:j,onLiftImpact:O,viewport:f,scrollJumpRequest:null,forceShouldAnimate:null}}if(a.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&ln(!1),{...t,phase:"COLLECTING"});if(a.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ln(!1),uH({state:t,published:a.payload});if(a.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;ep(t)||ln(!1);const{client:s}=a.payload;return $u(s,t.current.client.selection)?t:Xm({state:t,clientSelection:s,impact:Vx(t)?t.impact:null})}if(a.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return fv(t);ep(t)||ln(!1);const{id:s,newScroll:l}=a.payload,f=t.dimensions.droppables[s];if(!f)return t;const g=P6(f,l);return pv(t,g,!1)}if(a.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;ep(t)||ln(!1);const{id:s,isEnabled:l}=a.payload,f=t.dimensions.droppables[s];f||ln(!1),f.isEnabled===l&&ln(!1);const g={...f,isEnabled:l};return pv(t,g,!0)}if(a.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;ep(t)||ln(!1);const{id:s,isCombineEnabled:l}=a.payload,f=t.dimensions.droppables[s];f||ln(!1),f.isCombineEnabled===l&&ln(!1);const g={...f,isCombineEnabled:l};return pv(t,g,!0)}if(a.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;ep(t)||ln(!1),t.isWindowScrollAllowed||ln(!1);const s=a.payload.newScroll;if($u(t.viewport.scroll.current,s))return fv(t);const l=bC(t.viewport,s);return Vx(t)?PC({state:t,viewport:l}):Xm({state:t,viewport:l})}if(a.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!ep(t))return t;const s=a.payload.maxScroll;if($u(s,t.viewport.scroll.max))return t;const l={...t.viewport,scroll:{...t.viewport.scroll,max:s}};return{...t,viewport:l}}if(a.type==="MOVE_UP"||a.type==="MOVE_DOWN"||a.type==="MOVE_LEFT"||a.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ln(!1);const s=HW({state:t,type:a.type});return s?Xm({state:t,impact:s.impact,clientSelection:s.clientSelection,scrollJumpRequest:s.scrollJumpRequest}):t}if(a.type==="DROP_PENDING"){const s=a.payload.reason;return t.phase!=="COLLECTING"&&ln(!1),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:s}}if(a.type==="DROP_ANIMATE"){const{completed:s,dropDuration:l,newHomeClientOffset:f}=a.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ln(!1),{phase:"DROP_ANIMATING",completed:s,dropDuration:l,newHomeClientOffset:f,dimensions:t.dimensions}}if(a.type==="DROP_COMPLETE"){const{completed:s}=a.payload;return{phase:"IDLE",completed:s,shouldFlush:!1}}return t};const pH=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),fH=t=>({type:"LIFT",payload:t}),hH=t=>({type:"INITIAL_PUBLISH",payload:t}),mH=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),gH=()=>({type:"COLLECTION_STARTING",payload:null}),bH=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),_H=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),yH=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),AC=t=>({type:"MOVE",payload:t}),vH=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),xH=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),wH=()=>({type:"MOVE_UP",payload:null}),SH=()=>({type:"MOVE_DOWN",payload:null}),TH=()=>({type:"MOVE_RIGHT",payload:null}),EH=()=>({type:"MOVE_LEFT",payload:null}),L6=()=>({type:"FLUSH",payload:null}),IH=t=>({type:"DROP_ANIMATE",payload:t}),D6=t=>({type:"DROP_COMPLETE",payload:t}),CC=t=>({type:"DROP",payload:t}),PH=t=>({type:"DROP_PENDING",payload:t}),MC=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var zH=t=>({getState:a,dispatch:s})=>l=>f=>{if(f.type!=="LIFT"){l(f);return}const{id:g,clientSelection:w,movementMode:I}=f.payload,o=a();o.phase==="DROP_ANIMATING"&&s(D6({completed:o.completed})),a().phase!=="IDLE"&&ln(!1),s(L6()),s(pH({draggableId:g,movementMode:I}));const B={draggableId:g,scrollOptions:{shouldPublishImmediately:I==="SNAP"}},{critical:L,dimensions:O,viewport:j}=t.startPublishing(B);s(hH({critical:L,dimensions:O,clientSelection:w,movementMode:I,viewport:j}))},AH=t=>()=>a=>s=>{s.type==="INITIAL_PUBLISH"&&t.dragging(),s.type==="DROP_ANIMATE"&&t.dropping(s.payload.completed.result.reason),(s.type==="FLUSH"||s.type==="DROP_COMPLETE")&&t.resting(),a(s)};const O6={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},D0={opacity:{drop:0,combining:.7},scale:{drop:.75}},RC={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Yd=`${RC.outOfTheWay}s ${O6.outOfTheWay}`,Jm={fluid:`opacity ${Yd}`,snap:`transform ${Yd}, opacity ${Yd}`,drop:t=>{const a=`${t}s ${O6.drop}`;return`transform ${a}, opacity ${a}`},outOfTheWay:`transform ${Yd}`,placeholder:`height ${Yd}, width ${Yd}, margin ${Yd}`},wE=t=>$u(t,fs)?void 0:`translate(${t.x}px, ${t.y}px)`,Gx={moveTo:wE,drop:(t,a)=>{const s=wE(t);if(s)return a?`${s} scale(${D0.scale.drop})`:s}},{minDropTime:$x,maxDropTime:kC}=RC,CH=kC-$x,SE=1500,MH=.6;var RH=({current:t,destination:a,reason:s})=>{const l=R0(t,a);if(l<=0)return $x;if(l>=SE)return kC;const f=l/SE,g=$x+CH*f,w=s==="CANCEL"?g*MH:g;return Number(w.toFixed(2))},kH=({impact:t,draggable:a,dimensions:s,viewport:l,afterCritical:f})=>{const{draggables:g,droppables:w}=s,I=io(t),o=I?w[I]:null,M=w[a.descriptor.droppableId],B=IC({impact:t,draggable:a,draggables:g,afterCritical:f,droppable:o||M,viewport:l});return ro(B,a.client.borderBox.center)},LH=({draggables:t,reason:a,lastImpact:s,home:l,viewport:f,onLiftImpact:g})=>!s.at||a!=="DROP"?{impact:EC({draggables:t,impact:g,destination:l,viewport:f,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:s.at.type==="REORDER"?{impact:s,didDropInsideDroppable:!0}:{impact:{...s,displaced:k0},didDropInsideDroppable:!0};const DH=({getState:t,dispatch:a})=>s=>l=>{if(l.type!=="DROP"){s(l);return}const f=t(),g=l.payload.reason;if(f.phase==="COLLECTING"){a(PH({reason:g}));return}if(f.phase==="IDLE")return;f.phase==="DROP_PENDING"&&f.isWaiting&&ln(!1),f.phase==="DRAGGING"||f.phase==="DROP_PENDING"||ln(!1);const I=f.critical,o=f.dimensions,M=o.draggables[f.critical.draggable.id],{impact:B,didDropInsideDroppable:L}=LH({reason:g,lastImpact:f.impact,afterCritical:f.afterCritical,onLiftImpact:f.onLiftImpact,home:f.dimensions.droppables[f.critical.droppable.id],viewport:f.viewport,draggables:f.dimensions.draggables}),O=L?z6(B):null,j=L?py(B):null,Z={index:I.draggable.index,droppableId:I.droppable.id},H={draggableId:M.descriptor.id,type:M.descriptor.type,source:Z,reason:g,mode:f.movementMode,destination:O,combine:j},te=kH({impact:B,draggable:M,dimensions:o,viewport:f.viewport,afterCritical:f.afterCritical}),J={critical:f.critical,afterCritical:f.afterCritical,result:H,impact:B};if(!(!$u(f.current.client.offset,te)||!!H.combine)){a(D6({completed:J}));return}const W=RH({current:f.current.client.offset,destination:te,reason:g});a(IH({newHomeClientOffset:te,dropDuration:W,completed:J}))};var OH=DH,LC=()=>({x:window.pageXOffset,y:window.pageYOffset});function BH(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:a=>{a.target!==window&&a.target!==window.document||t()}}}function NH({onWindowScroll:t}){function a(){t(LC())}const s=M0(a),l=BH(s);let f=Gu;function g(){return f!==Gu}function w(){g()&&ln(!1),f=ko(window,[l])}function I(){g()||ln(!1),s.cancel(),f(),f=Gu}return{start:w,stop:I,isActive:g}}const FH=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH",jH=t=>{const a=NH({onWindowScroll:s=>{t.dispatch(vH({newScroll:s}))}});return s=>l=>{!a.isActive()&&l.type==="INITIAL_PUBLISH"&&a.start(),a.isActive()&&FH(l)&&a.stop(),s(l)}};var UH=jH,VH=t=>{let a=!1,s=!1;const l=setTimeout(()=>{s=!0}),f=g=>{a||s||(a=!0,t(g),clearTimeout(l))};return f.wasCalled=()=>a,f},GH=()=>{const t=[],a=f=>{const g=t.findIndex(I=>I.timerId===f);g===-1&&ln(!1);const[w]=t.splice(g,1);w.callback()};return{add:f=>{const g=setTimeout(()=>a(g)),w={timerId:g,callback:f};t.push(w)},flush:()=>{if(!t.length)return;const f=[...t];t.length=0,f.forEach(g=>{clearTimeout(g.timerId),g.callback()})}}};const $H=(t,a)=>t==null&&a==null?!0:t==null||a==null?!1:t.droppableId===a.droppableId&&t.index===a.index,qH=(t,a)=>t==null&&a==null?!0:t==null||a==null?!1:t.draggableId===a.draggableId&&t.droppableId===a.droppableId,WH=(t,a)=>{if(t===a)return!0;const s=t.draggable.id===a.draggable.id&&t.draggable.droppableId===a.draggable.droppableId&&t.draggable.type===a.draggable.type&&t.draggable.index===a.draggable.index,l=t.droppable.id===a.droppable.id&&t.droppable.type===a.droppable.type;return s&&l},Pm=(t,a)=>{a()},ab=(t,a)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:a});function hv(t,a,s,l){if(!t){s(l(a));return}const f=VH(s);t(a,{announce:f}),f.wasCalled()||s(l(a))}var HH=(t,a)=>{const s=GH();let l=null;const f=(L,O)=>{l&&ln(!1),Pm("onBeforeCapture",()=>{const j=t().onBeforeCapture;j&&j({draggableId:L,mode:O})})},g=(L,O)=>{l&&ln(!1),Pm("onBeforeDragStart",()=>{const j=t().onBeforeDragStart;j&&j(ab(L,O))})},w=(L,O)=>{l&&ln(!1);const j=ab(L,O);l={mode:O,lastCritical:L,lastLocation:j.source,lastCombine:null},s.add(()=>{Pm("onDragStart",()=>hv(t().onDragStart,j,a,Eb.onDragStart))})},I=(L,O)=>{const j=z6(O),Z=py(O);l||ln(!1);const H=!WH(L,l.lastCritical);H&&(l.lastCritical=L);const te=!$H(l.lastLocation,j);te&&(l.lastLocation=j);const J=!qH(l.lastCombine,Z);if(J&&(l.lastCombine=Z),!H&&!te&&!J)return;const K={...ab(L,l.mode),combine:Z,destination:j};s.add(()=>{Pm("onDragUpdate",()=>hv(t().onDragUpdate,K,a,Eb.onDragUpdate))})},o=()=>{l||ln(!1),s.flush()},M=L=>{l||ln(!1),l=null,Pm("onDragEnd",()=>hv(t().onDragEnd,L,a,Eb.onDragEnd))};return{beforeCapture:f,beforeStart:g,start:w,update:I,flush:o,drop:M,abort:()=>{if(!l)return;const L={...ab(l.lastCritical,l.mode),combine:null,destination:null,reason:"CANCEL"};M(L)}}},ZH=(t,a)=>{const s=HH(t,a);return l=>f=>g=>{if(g.type==="BEFORE_INITIAL_CAPTURE"){s.beforeCapture(g.payload.draggableId,g.payload.movementMode);return}if(g.type==="INITIAL_PUBLISH"){const I=g.payload.critical;s.beforeStart(I,g.payload.movementMode),f(g),s.start(I,g.payload.movementMode);return}if(g.type==="DROP_COMPLETE"){const I=g.payload.completed.result;s.flush(),f(g),s.drop(I);return}if(f(g),g.type==="FLUSH"){s.abort();return}const w=l.getState();w.phase==="DRAGGING"&&s.update(w.critical,w.impact)}};const YH=t=>a=>s=>{if(s.type!=="DROP_ANIMATION_FINISHED"){a(s);return}const l=t.getState();l.phase!=="DROP_ANIMATING"&&ln(!1),t.dispatch(D6({completed:l.completed}))};var XH=YH;const JH=t=>{let a=null,s=null;function l(){s&&(cancelAnimationFrame(s),s=null),a&&(a(),a=null)}return f=>g=>{if((g.type==="FLUSH"||g.type==="DROP_COMPLETE"||g.type==="DROP_ANIMATION_FINISHED")&&l(),f(g),g.type!=="DROP_ANIMATE")return;const w={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(MC())}};s=requestAnimationFrame(()=>{s=null,a=ko(window,[w])})}};var KH=JH,QH=t=>()=>a=>s=>{(s.type==="DROP_COMPLETE"||s.type==="FLUSH"||s.type==="DROP_ANIMATE")&&t.stopPublishing(),a(s)},eZ=t=>{let a=!1;return()=>s=>l=>{if(l.type==="INITIAL_PUBLISH"){a=!0,t.tryRecordFocus(l.payload.critical.draggable.id),s(l),t.tryRestoreFocusRecorded();return}if(s(l),!!a){if(l.type==="FLUSH"){a=!1,t.tryRestoreFocusRecorded();return}if(l.type==="DROP_COMPLETE"){a=!1;const f=l.payload.completed.result;f.combine&&t.tryShiftRecord(f.draggableId,f.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const tZ=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH";var nZ=t=>a=>s=>l=>{if(tZ(l)){t.stop(),s(l);return}if(l.type==="INITIAL_PUBLISH"){s(l);const f=a.getState();f.phase!=="DRAGGING"&&ln(!1),t.start(f);return}s(l),t.scroll(a.getState())};const aZ=t=>a=>s=>{if(a(s),s.type!=="PUBLISH_WHILE_DRAGGING")return;const l=t.getState();l.phase==="DROP_PENDING"&&(l.isWaiting||t.dispatch(CC({reason:l.reason})))};var rZ=aZ;const sZ=jA;var iZ=({dimensionMarshal:t,focusMarshal:a,styleMarshal:s,getResponders:l,announce:f,autoScroller:g})=>FA(dH,sZ(F$(AH(s),QH(t),zH(t),OH,XH,KH,rZ,nZ(g),UH,eZ(a),ZH(l,f))));const mv=()=>({additions:{},removals:{},modified:{}});function oZ({registry:t,callbacks:a}){let s=mv(),l=null;const f=()=>{l||(a.collectionStarting(),l=requestAnimationFrame(()=>{l=null;const{additions:o,removals:M,modified:B}=s,L=Object.keys(o).map(Z=>t.draggable.getById(Z).getDimension(fs)).sort((Z,H)=>Z.descriptor.index-H.descriptor.index),O=Object.keys(B).map(Z=>{const te=t.droppable.getById(Z).callbacks.getScrollWhileDragging();return{droppableId:Z,scroll:te}}),j={additions:L,removals:Object.keys(M),modified:O};s=mv(),a.publish(j)}))};return{add:o=>{const M=o.descriptor.id;s.additions[M]=o,s.modified[o.descriptor.droppableId]=!0,s.removals[M]&&delete s.removals[M],f()},remove:o=>{const M=o.descriptor;s.removals[M.id]=!0,s.modified[M.droppableId]=!0,s.additions[M.id]&&delete s.additions[M.id],f()},stop:()=>{l&&(cancelAnimationFrame(l),l=null,s=mv())}}}var DC=({scrollHeight:t,scrollWidth:a,height:s,width:l})=>{const f=ro({x:a,y:t},{x:l,y:s});return{x:Math.max(0,f.x),y:Math.max(0,f.y)}},OC=()=>{const t=document.documentElement;return t||ln(!1),t},BC=()=>{const t=OC();return DC({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},cZ=()=>{const t=LC(),a=BC(),s=t.y,l=t.x,f=OC(),g=f.clientWidth,w=f.clientHeight,I=l+g,o=s+w;return{frame:fc({top:s,left:l,right:I,bottom:o}),scroll:{initial:t,current:t,max:a,diff:{value:fs,displacement:fs}}}},lZ=({critical:t,scrollOptions:a,registry:s})=>{const l=cZ(),f=l.scroll.current,g=t.droppable,w=s.droppable.getAllByType(g.type).map(B=>B.callbacks.getDimensionAndWatchScroll(f,a)),I=s.draggable.getAllByType(t.draggable.type).map(B=>B.getDimension(f));return{dimensions:{draggables:dC(I),droppables:uC(w)},critical:t,viewport:l}};function TE(t,a,s){return!(s.descriptor.id===a.id||s.descriptor.type!==a.type||t.droppable.getById(s.descriptor.droppableId).descriptor.mode!=="virtual")}var uZ=(t,a)=>{let s=null;const l=oZ({callbacks:{publish:a.publishWhileDragging,collectionStarting:a.collectionStarting},registry:t}),f=(O,j)=>{t.droppable.exists(O)||ln(!1),s&&a.updateDroppableIsEnabled({id:O,isEnabled:j})},g=(O,j)=>{s&&(t.droppable.exists(O)||ln(!1),a.updateDroppableIsCombineEnabled({id:O,isCombineEnabled:j}))},w=(O,j)=>{s&&(t.droppable.exists(O)||ln(!1),a.updateDroppableScroll({id:O,newScroll:j}))},I=(O,j)=>{s&&t.droppable.getById(O).callbacks.scroll(j)},o=()=>{if(!s)return;l.stop();const O=s.critical.droppable;t.droppable.getAllByType(O.type).forEach(j=>j.callbacks.dragStopped()),s.unsubscribe(),s=null},M=O=>{s||ln(!1);const j=s.critical.draggable;O.type==="ADDITION"&&TE(t,j,O.value)&&l.add(O.value),O.type==="REMOVAL"&&TE(t,j,O.value)&&l.remove(O.value)};return{updateDroppableIsEnabled:f,updateDroppableIsCombineEnabled:g,scrollDroppable:I,updateDroppableScroll:w,startPublishing:O=>{s&&ln(!1);const j=t.draggable.getById(O.draggableId),Z=t.droppable.getById(j.descriptor.droppableId),H={draggable:j.descriptor,droppable:Z.descriptor},te=t.subscribe(M);return s={critical:H,unsubscribe:te},lZ({critical:H,registry:t,scrollOptions:O.scrollOptions})},stopPublishing:o}},NC=(t,a)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===a?!1:t.completed.result.reason==="DROP",dZ=t=>{window.scrollBy(t.x,t.y)};const pZ=ps(t=>dy(t).filter(a=>!(!a.isEnabled||!a.frame))),fZ=(t,a)=>pZ(a).find(l=>(l.frame||ln(!1),xC(l.frame.pageMarginBox)(t)))||null;var hZ=({center:t,destination:a,droppables:s})=>{if(a){const f=s[a];return f.frame?f:null}return fZ(t,s)};const O0={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var mZ=(t,a,s=()=>O0)=>{const l=s(),f=t[a.size]*l.startFromPercentage,g=t[a.size]*l.maxScrollAtPercentage;return{startScrollingFrom:f,maxScrollValueAt:g}},FC=({startOfRange:t,endOfRange:a,current:s})=>{const l=a-t;return l===0?0:(s-t)/l},B6=1,gZ=(t,a,s=()=>O0)=>{const l=s();if(t>a.startScrollingFrom)return 0;if(t<=a.maxScrollValueAt)return l.maxPixelScroll;if(t===a.startScrollingFrom)return B6;const g=1-FC({startOfRange:a.maxScrollValueAt,endOfRange:a.startScrollingFrom,current:t}),w=l.maxPixelScroll*l.ease(g);return Math.ceil(w)},bZ=(t,a,s)=>{const l=s(),f=l.durationDampening.accelerateAt,g=l.durationDampening.stopDampeningAt,w=a,I=g,M=Date.now()-w;if(M>=g)return t;if(M<f)return B6;const B=FC({startOfRange:f,endOfRange:I,current:M}),L=t*l.ease(B);return Math.ceil(L)},EE=({distanceToEdge:t,thresholds:a,dragStartTime:s,shouldUseTimeDampening:l,getAutoScrollerOptions:f})=>{const g=gZ(t,a,f);return g===0?0:l?Math.max(bZ(g,s,f),B6):g},IE=({container:t,distanceToEdges:a,dragStartTime:s,axis:l,shouldUseTimeDampening:f,getAutoScrollerOptions:g})=>{const w=mZ(t,l,g);return a[l.end]<a[l.start]?EE({distanceToEdge:a[l.end],thresholds:w,dragStartTime:s,shouldUseTimeDampening:f,getAutoScrollerOptions:g}):-1*EE({distanceToEdge:a[l.start],thresholds:w,dragStartTime:s,shouldUseTimeDampening:f,getAutoScrollerOptions:g})},_Z=({container:t,subject:a,proposedScroll:s})=>{const l=a.height>t.height,f=a.width>t.width;return!f&&!l?s:f&&l?null:{x:f?0:s.x,y:l?0:s.y}};const yZ=lC(t=>t===0?0:t);var jC=({dragStartTime:t,container:a,subject:s,center:l,shouldUseTimeDampening:f,getAutoScrollerOptions:g})=>{const w={top:l.y-a.top,right:a.right-l.x,bottom:a.bottom-l.y,left:l.x-a.left},I=IE({container:a,distanceToEdges:w,dragStartTime:t,axis:A6,shouldUseTimeDampening:f,getAutoScrollerOptions:g}),o=IE({container:a,distanceToEdges:w,dragStartTime:t,axis:hC,shouldUseTimeDampening:f,getAutoScrollerOptions:g}),M=yZ({x:o,y:I});if($u(M,fs))return null;const B=_Z({container:a,subject:s,proposedScroll:M});return B?$u(B,fs)?null:B:null};const vZ=lC(t=>t===0?0:t>0?1:-1),N6=(()=>{const t=(a,s)=>a<0?a:a>s?a-s:0;return({current:a,max:s,change:l})=>{const f=Is(a,l),g={x:t(f.x,s.x),y:t(f.y,s.y)};return $u(g,fs)?null:g}})(),UC=({max:t,current:a,change:s})=>{const l={x:Math.max(a.x,t.x),y:Math.max(a.y,t.y)},f=vZ(s),g=N6({max:l,current:a,change:f});return!g||f.x!==0&&g.x===0||f.y!==0&&g.y===0},F6=(t,a)=>UC({current:t.scroll.current,max:t.scroll.max,change:a}),xZ=(t,a)=>{if(!F6(t,a))return null;const s=t.scroll.max,l=t.scroll.current;return N6({current:l,max:s,change:a})},j6=(t,a)=>{const s=t.frame;return s?UC({current:s.scroll.current,max:s.scroll.max,change:a}):!1},wZ=(t,a)=>{const s=t.frame;return!s||!j6(t,a)?null:N6({current:s.scroll.current,max:s.scroll.max,change:a})};var SZ=({viewport:t,subject:a,center:s,dragStartTime:l,shouldUseTimeDampening:f,getAutoScrollerOptions:g})=>{const w=jC({dragStartTime:l,container:t.frame,subject:a,center:s,shouldUseTimeDampening:f,getAutoScrollerOptions:g});return w&&F6(t,w)?w:null},TZ=({droppable:t,subject:a,center:s,dragStartTime:l,shouldUseTimeDampening:f,getAutoScrollerOptions:g})=>{const w=t.frame;if(!w)return null;const I=jC({dragStartTime:l,container:w.pageMarginBox,subject:a,center:s,shouldUseTimeDampening:f,getAutoScrollerOptions:g});return I&&j6(t,I)?I:null},PE=({state:t,dragStartTime:a,shouldUseTimeDampening:s,scrollWindow:l,scrollDroppable:f,getAutoScrollerOptions:g})=>{const w=t.current.page.borderBoxCenter,o=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const L=t.viewport,O=SZ({dragStartTime:a,viewport:L,subject:o,center:w,shouldUseTimeDampening:s,getAutoScrollerOptions:g});if(O){l(O);return}}const M=hZ({center:w,destination:io(t.impact),droppables:t.dimensions.droppables});if(!M)return;const B=TZ({dragStartTime:a,droppable:M,subject:o,center:w,shouldUseTimeDampening:s,getAutoScrollerOptions:g});B&&f(M.descriptor.id,B)},EZ=({scrollWindow:t,scrollDroppable:a,getAutoScrollerOptions:s=()=>O0})=>{const l=M0(t),f=M0(a);let g=null;const w=M=>{g||ln(!1);const{shouldUseTimeDampening:B,dragStartTime:L}=g;PE({state:M,scrollWindow:l,scrollDroppable:f,dragStartTime:L,shouldUseTimeDampening:B,getAutoScrollerOptions:s})};return{start:M=>{g&&ln(!1);const B=Date.now();let L=!1;const O=()=>{L=!0};PE({state:M,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:O,scrollDroppable:O,getAutoScrollerOptions:s}),g={dragStartTime:B,shouldUseTimeDampening:L},L&&w(M)},stop:()=>{g&&(l.cancel(),f.cancel(),g=null)},scroll:w}},IZ=({move:t,scrollDroppable:a,scrollWindow:s})=>{const l=(I,o)=>{const M=Is(I.current.client.selection,o);t({client:M})},f=(I,o)=>{if(!j6(I,o))return o;const M=wZ(I,o);if(!M)return a(I.descriptor.id,o),null;const B=ro(o,M);return a(I.descriptor.id,B),ro(o,B)},g=(I,o,M)=>{if(!I||!F6(o,M))return M;const B=xZ(o,M);if(!B)return s(M),null;const L=ro(M,B);return s(L),ro(M,L)};return I=>{const o=I.scrollJumpRequest;if(!o)return;const M=io(I.impact);M||ln(!1);const B=f(I.dimensions.droppables[M],o);if(!B)return;const L=I.viewport,O=g(I.isWindowScrollAllowed,L,B);O&&l(I,O)}},PZ=({scrollDroppable:t,scrollWindow:a,move:s,getAutoScrollerOptions:l})=>{const f=EZ({scrollWindow:a,scrollDroppable:t,getAutoScrollerOptions:l}),g=IZ({move:s,scrollWindow:a,scrollDroppable:t});return{scroll:o=>{if(!(l().disabled||o.phase!=="DRAGGING")){if(o.movementMode==="FLUID"){f.scroll(o);return}o.scrollJumpRequest&&g(o)}},start:f.start,stop:f.stop}};const Kf="data-rfd",Qf=(()=>{const t=`${Kf}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),qx=(()=>{const t=`${Kf}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),zZ=(()=>{const t=`${Kf}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),zE={contextId:`${Kf}-scroll-container-context-id`},AZ=t=>a=>`[${a}="${t}"]`,zm=(t,a)=>t.map(s=>{const l=s.styles[a];return l?`${s.selector} { ${l} }`:""}).join(" "),CZ="pointer-events: none;";var MZ=t=>{const a=AZ(t),s=(()=>{const I=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:a(Qf.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:I,dragging:CZ,dropAnimating:I}}})(),l=(()=>{const I=`
      transition: ${Jm.outOfTheWay};
    `;return{selector:a(qx.contextId),styles:{dragging:I,dropAnimating:I,userCancel:I}}})(),f={selector:a(zZ.contextId),styles:{always:"overflow-anchor: none;"}},w=[l,s,f,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:zm(w,"always"),resting:zm(w,"resting"),dragging:zm(w,"dragging"),dropAnimating:zm(w,"dropAnimating"),userCancel:zm(w,"userCancel")}};const RZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Te.useLayoutEffect:Te.useEffect;var oo=RZ;const gv=()=>{const t=document.querySelector("head");return t||ln(!1),t},AE=t=>{const a=document.createElement("style");return t&&a.setAttribute("nonce",t),a.type="text/css",a};function kZ(t,a){const s=Ta(()=>MZ(t),[t]),l=Te.useRef(null),f=Te.useRef(null),g=Bn(ps(L=>{const O=f.current;O||ln(!1),O.textContent=L}),[]),w=Bn(L=>{const O=l.current;O||ln(!1),O.textContent=L},[]);oo(()=>{!l.current&&!f.current||ln(!1);const L=AE(a),O=AE(a);return l.current=L,f.current=O,L.setAttribute(`${Kf}-always`,t),O.setAttribute(`${Kf}-dynamic`,t),gv().appendChild(L),gv().appendChild(O),w(s.always),g(s.resting),()=>{const j=Z=>{const H=Z.current;H||ln(!1),gv().removeChild(H),Z.current=null};j(l),j(f)}},[a,w,g,s.always,s.resting,t]);const I=Bn(()=>g(s.dragging),[g,s.dragging]),o=Bn(L=>{if(L==="DROP"){g(s.dropAnimating);return}g(s.userCancel)},[g,s.dropAnimating,s.userCancel]),M=Bn(()=>{f.current&&g(s.resting)},[g,s.resting]);return Ta(()=>({dragging:I,dropping:o,resting:M}),[I,o,M])}function VC(t,a){return Array.from(t.querySelectorAll(a))}var GC=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function my(t){return t instanceof GC(t).HTMLElement}function LZ(t,a){const s=`[${Qf.contextId}="${t}"]`,l=VC(document,s);if(!l.length)return null;const f=l.find(g=>g.getAttribute(Qf.draggableId)===a);return!f||!my(f)?null:f}function DZ(t){const a=Te.useRef({}),s=Te.useRef(null),l=Te.useRef(null),f=Te.useRef(!1),g=Bn(function(O,j){const Z={id:O,focus:j};return a.current[O]=Z,function(){const te=a.current;te[O]!==Z&&delete te[O]}},[]),w=Bn(function(O){const j=LZ(t,O);j&&j!==document.activeElement&&j.focus()},[t]),I=Bn(function(O,j){s.current===O&&(s.current=j)},[]),o=Bn(function(){l.current||f.current&&(l.current=requestAnimationFrame(()=>{l.current=null;const O=s.current;O&&w(O)}))},[w]),M=Bn(function(O){s.current=null;const j=document.activeElement;j&&j.getAttribute(Qf.draggableId)===O&&(s.current=O)},[]);return oo(()=>(f.current=!0,function(){f.current=!1;const O=l.current;O&&cancelAnimationFrame(O)}),[]),Ta(()=>({register:g,tryRecordFocus:M,tryRestoreFocusRecorded:o,tryShiftRecord:I}),[g,M,o,I])}function OZ(){const t={draggables:{},droppables:{}},a=[];function s(L){return a.push(L),function(){const j=a.indexOf(L);j!==-1&&a.splice(j,1)}}function l(L){a.length&&a.forEach(O=>O(L))}function f(L){return t.draggables[L]||null}function g(L){const O=f(L);return O||ln(!1),O}const w={register:L=>{t.draggables[L.descriptor.id]=L,l({type:"ADDITION",value:L})},update:(L,O)=>{const j=t.draggables[O.descriptor.id];j&&j.uniqueId===L.uniqueId&&(delete t.draggables[O.descriptor.id],t.draggables[L.descriptor.id]=L)},unregister:L=>{const O=L.descriptor.id,j=f(O);j&&L.uniqueId===j.uniqueId&&(delete t.draggables[O],t.droppables[L.descriptor.droppableId]&&l({type:"REMOVAL",value:L}))},getById:g,findById:f,exists:L=>!!f(L),getAllByType:L=>Object.values(t.draggables).filter(O=>O.descriptor.type===L)};function I(L){return t.droppables[L]||null}function o(L){const O=I(L);return O||ln(!1),O}const M={register:L=>{t.droppables[L.descriptor.id]=L},unregister:L=>{const O=I(L.descriptor.id);O&&L.uniqueId===O.uniqueId&&delete t.droppables[L.descriptor.id]},getById:o,findById:I,exists:L=>!!I(L),getAllByType:L=>Object.values(t.droppables).filter(O=>O.descriptor.type===L)};function B(){t.draggables={},t.droppables={},a.length=0}return{draggable:w,droppable:M,subscribe:s,clean:B}}function BZ(){const t=Ta(OZ,[]);return Te.useEffect(()=>function(){Hn.version.startsWith("16")||Hn.version.startsWith("17")?requestAnimationFrame(t.clean):t.clean()},[t]),t}var U6=Hn.createContext(null),h_=()=>{const t=document.body;return t||ln(!1),t};const NZ={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var FZ=NZ;const jZ=t=>`rfd-announcement-${t}`;function UZ(t){const a=Ta(()=>jZ(t),[t]),s=Te.useRef(null);return Te.useEffect(function(){const g=document.createElement("div");return s.current=g,g.id=a,g.setAttribute("aria-live","assertive"),g.setAttribute("aria-atomic","true"),Vu(g.style,FZ),h_().appendChild(g),function(){setTimeout(function(){const o=h_();o.contains(g)&&o.removeChild(g),g===s.current&&(s.current=null)})}},[a]),Bn(f=>{const g=s.current;if(g){g.textContent=f;return}},[])}let VZ=0;const $C={separator:"::"};function GZ(t,a=$C){return Ta(()=>`${t}${a.separator}${VZ++}`,[a.separator,t])}function $Z(t,a=$C){const s=Hn.useId();return Ta(()=>`${t}${a.separator}${s}`,[a.separator,t,s])}var V6="useId"in Hn?$Z:GZ;function qZ({contextId:t,uniqueId:a}){return`rfd-hidden-text-${t}-${a}`}function WZ({contextId:t,text:a}){const s=V6("hidden-text",{separator:"-"}),l=Ta(()=>qZ({contextId:t,uniqueId:s}),[s,t]);return Te.useEffect(function(){const g=document.createElement("div");return g.id=l,g.textContent=a,g.style.display="none",h_().appendChild(g),function(){const I=h_();I.contains(g)&&I.removeChild(g)}},[l,a]),l}var gy=Hn.createContext(null);function qC(t){const a=Te.useRef(t);return Te.useEffect(()=>{a.current=t}),a}function HZ(){let t=null;function a(){return!!t}function s(w){return w===t}function l(w){t&&ln(!1);const I={abandon:w};return t=I,I}function f(){t||ln(!1),t=null}function g(){t&&(t.abandon(),f())}return{isClaimed:a,isActive:s,claim:l,release:f,tryAbandon:g}}function B0(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const ZZ=9,YZ=13,G6=27,WC=32,XZ=33,JZ=34,KZ=35,QZ=36,eY=37,tY=38,nY=39,aY=40,rY={[YZ]:!0,[ZZ]:!0};var HC=t=>{rY[t.keyCode]&&t.preventDefault()};const sY=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(l=>`on${l}`in document)||t})();var by=sY;const ZC=0,CE=5;function iY(t,a){return Math.abs(a.x-t.x)>=CE||Math.abs(a.y-t.y)>=CE}const ME={type:"IDLE"};function oY({cancel:t,completed:a,getPhase:s,setPhase:l}){return[{eventName:"mousemove",fn:f=>{const{button:g,clientX:w,clientY:I}=f;if(g!==ZC)return;const o={x:w,y:I},M=s();if(M.type==="DRAGGING"){f.preventDefault(),M.actions.move(o);return}M.type!=="PENDING"&&ln(!1);const B=M.point;if(!iY(B,o))return;f.preventDefault();const L=M.actions.fluidLift(o);l({type:"DRAGGING",actions:L})}},{eventName:"mouseup",fn:f=>{const g=s();if(g.type!=="DRAGGING"){t();return}f.preventDefault(),g.actions.drop({shouldBlockNextClick:!0}),a()}},{eventName:"mousedown",fn:f=>{s().type==="DRAGGING"&&f.preventDefault(),t()}},{eventName:"keydown",fn:f=>{if(s().type==="PENDING"){t();return}if(f.keyCode===G6){f.preventDefault(),t();return}HC(f)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{s().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:f=>{const g=s();if(g.type==="IDLE"&&ln(!1),g.actions.shouldRespectForcePress()){t();return}f.preventDefault()}},{eventName:by,fn:t}]}function cY(t){const a=Te.useRef(ME),s=Te.useRef(Gu),l=Ta(()=>({eventName:"mousedown",fn:function(L){if(L.defaultPrevented||L.button!==ZC||L.ctrlKey||L.metaKey||L.shiftKey||L.altKey)return;const O=t.findClosestDraggableId(L);if(!O)return;const j=t.tryGetLock(O,w,{sourceEvent:L});if(!j)return;L.preventDefault();const Z={x:L.clientX,y:L.clientY};s.current(),M(j,Z)}}),[t]),f=Ta(()=>({eventName:"webkitmouseforcewillbegin",fn:B=>{if(B.defaultPrevented)return;const L=t.findClosestDraggableId(B);if(!L)return;const O=t.findOptionsForDraggable(L);O&&(O.shouldRespectForcePress||t.canGetLock(L)&&B.preventDefault())}}),[t]),g=Bn(function(){const L={passive:!1,capture:!0};s.current=ko(window,[f,l],L)},[f,l]),w=Bn(()=>{a.current.type!=="IDLE"&&(a.current=ME,s.current(),g())},[g]),I=Bn(()=>{const B=a.current;w(),B.type==="DRAGGING"&&B.actions.cancel({shouldBlockNextClick:!0}),B.type==="PENDING"&&B.actions.abort()},[w]),o=Bn(function(){const L={capture:!0,passive:!1},O=oY({cancel:I,completed:w,getPhase:()=>a.current,setPhase:j=>{a.current=j}});s.current=ko(window,O,L)},[I,w]),M=Bn(function(L,O){a.current.type!=="IDLE"&&ln(!1),a.current={type:"PENDING",point:O,actions:L},o()},[o]);oo(function(){return g(),function(){s.current()}},[g])}function lY(){}const uY={[JZ]:!0,[XZ]:!0,[QZ]:!0,[KZ]:!0};function dY(t,a){function s(){a(),t.cancel()}function l(){a(),t.drop()}return[{eventName:"keydown",fn:f=>{if(f.keyCode===G6){f.preventDefault(),s();return}if(f.keyCode===WC){f.preventDefault(),l();return}if(f.keyCode===aY){f.preventDefault(),t.moveDown();return}if(f.keyCode===tY){f.preventDefault(),t.moveUp();return}if(f.keyCode===nY){f.preventDefault(),t.moveRight();return}if(f.keyCode===eY){f.preventDefault(),t.moveLeft();return}if(uY[f.keyCode]){f.preventDefault();return}HC(f)}},{eventName:"mousedown",fn:s},{eventName:"mouseup",fn:s},{eventName:"click",fn:s},{eventName:"touchstart",fn:s},{eventName:"resize",fn:s},{eventName:"wheel",fn:s,options:{passive:!0}},{eventName:by,fn:s}]}function pY(t){const a=Te.useRef(lY),s=Ta(()=>({eventName:"keydown",fn:function(g){if(g.defaultPrevented||g.keyCode!==WC)return;const w=t.findClosestDraggableId(g);if(!w)return;const I=t.tryGetLock(w,B,{sourceEvent:g});if(!I)return;g.preventDefault();let o=!0;const M=I.snapLift();a.current();function B(){o||ln(!1),o=!1,a.current(),l()}a.current=ko(window,dY(M,B),{capture:!0,passive:!1})}}),[t]),l=Bn(function(){const g={passive:!1,capture:!0};a.current=ko(window,[s],g)},[s]);oo(function(){return l(),function(){a.current()}},[l])}const bv={type:"IDLE"},fY=120,hY=.15;function mY({cancel:t,getPhase:a}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:s=>{s.preventDefault()}},{eventName:"keydown",fn:s=>{if(a().type!=="DRAGGING"){t();return}s.keyCode===G6&&s.preventDefault(),t()}},{eventName:by,fn:t}]}function gY({cancel:t,completed:a,getPhase:s}){return[{eventName:"touchmove",options:{capture:!1},fn:l=>{const f=s();if(f.type!=="DRAGGING"){t();return}f.hasMoved=!0;const{clientX:g,clientY:w}=l.touches[0],I={x:g,y:w};l.preventDefault(),f.actions.move(I)}},{eventName:"touchend",fn:l=>{const f=s();if(f.type!=="DRAGGING"){t();return}l.preventDefault(),f.actions.drop({shouldBlockNextClick:!0}),a()}},{eventName:"touchcancel",fn:l=>{if(s().type!=="DRAGGING"){t();return}l.preventDefault(),t()}},{eventName:"touchforcechange",fn:l=>{const f=s();f.type==="IDLE"&&ln(!1);const g=l.touches[0];if(!g||!(g.force>=hY))return;const I=f.actions.shouldRespectForcePress();if(f.type==="PENDING"){I&&t();return}if(I){if(f.hasMoved){l.preventDefault();return}t();return}l.preventDefault()}},{eventName:by,fn:t}]}function bY(t){const a=Te.useRef(bv),s=Te.useRef(Gu),l=Bn(function(){return a.current},[]),f=Bn(function(j){a.current=j},[]),g=Ta(()=>({eventName:"touchstart",fn:function(j){if(j.defaultPrevented)return;const Z=t.findClosestDraggableId(j);if(!Z)return;const H=t.tryGetLock(Z,I,{sourceEvent:j});if(!H)return;const te=j.touches[0],{clientX:J,clientY:K}=te,W={x:J,y:K};s.current(),L(H,W)}}),[t]),w=Bn(function(){const j={capture:!0,passive:!1};s.current=ko(window,[g],j)},[g]),I=Bn(()=>{const O=a.current;O.type!=="IDLE"&&(O.type==="PENDING"&&clearTimeout(O.longPressTimerId),f(bv),s.current(),w())},[w,f]),o=Bn(()=>{const O=a.current;I(),O.type==="DRAGGING"&&O.actions.cancel({shouldBlockNextClick:!0}),O.type==="PENDING"&&O.actions.abort()},[I]),M=Bn(function(){const j={capture:!0,passive:!1},Z={cancel:o,completed:I,getPhase:l},H=ko(window,gY(Z),j),te=ko(window,mY(Z),j);s.current=function(){H(),te()}},[o,l,I]),B=Bn(function(){const j=l();j.type!=="PENDING"&&ln(!1);const Z=j.actions.fluidLift(j.point);f({type:"DRAGGING",actions:Z,hasMoved:!1})},[l,f]),L=Bn(function(j,Z){l().type!=="IDLE"&&ln(!1);const H=setTimeout(B,fY);f({type:"PENDING",point:Z,actions:j,longPressTimerId:H}),M()},[M,l,f,B]);oo(function(){return w(),function(){s.current();const Z=l();Z.type==="PENDING"&&(clearTimeout(Z.longPressTimerId),f(bv))}},[l,w,f]),oo(function(){return ko(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const _Y=["input","button","textarea","select","option","optgroup","video","audio"];function YC(t,a){if(a==null)return!1;if(_Y.includes(a.tagName.toLowerCase()))return!0;const l=a.getAttribute("contenteditable");return l==="true"||l===""?!0:a===t?!1:YC(t,a.parentElement)}function yY(t,a){const s=a.target;return my(s)?YC(t,s):!1}var vY=t=>fc(t.getBoundingClientRect()).center;function xY(t){return t instanceof GC(t).Element}const wY=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(l=>l in Element.prototype)||t})();function XC(t,a){return t==null?null:t[wY](a)?t:XC(t.parentElement,a)}function SY(t,a){return t.closest?t.closest(a):XC(t,a)}function TY(t){return`[${Qf.contextId}="${t}"]`}function EY(t,a){const s=a.target;if(!xY(s))return null;const l=TY(t),f=SY(s,l);return!f||!my(f)?null:f}function IY(t,a){const s=EY(t,a);return s?s.getAttribute(Qf.draggableId):null}function PY(t,a){const s=`[${qx.contextId}="${t}"]`,f=VC(document,s).find(g=>g.getAttribute(qx.id)===a);return!f||!my(f)?null:f}function zY(t){t.preventDefault()}function rb({expected:t,phase:a,isLockActive:s,shouldWarn:l}){return!(!s()||t!==a)}function JC({lockAPI:t,store:a,registry:s,draggableId:l}){if(t.isClaimed())return!1;const f=s.draggable.findById(l);return!(!f||!f.options.isEnabled||!NC(a.getState(),l))}function AY({lockAPI:t,contextId:a,store:s,registry:l,draggableId:f,forceSensorStop:g,sourceEvent:w}){if(!JC({lockAPI:t,store:s,registry:l,draggableId:f}))return null;const o=l.draggable.getById(f),M=PY(a,o.descriptor.id);if(!M||w&&!o.options.canDragInteractiveElements&&yY(M,w))return null;const B=t.claim(g||Gu);let L="PRE_DRAG";function O(){return o.options.shouldRespectForcePress}function j(){return t.isActive(B)}function Z(me,Se){rb({expected:me,phase:L,isLockActive:j,shouldWarn:!0})&&s.dispatch(Se())}const H=Z.bind(null,"DRAGGING");function te(me){function Se(){t.release(),L="COMPLETED"}L!=="PRE_DRAG"&&(Se(),ln(!1)),s.dispatch(fH(me.liftActionArgs)),L="DRAGGING";function Me(Ie,Ge={shouldBlockNextClick:!1}){if(me.cleanup(),Ge.shouldBlockNextClick){const ge=ko(window,[{eventName:"click",fn:zY,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(ge)}Se(),s.dispatch(CC({reason:Ie}))}return{isActive:()=>rb({expected:"DRAGGING",phase:L,isLockActive:j,shouldWarn:!1}),shouldRespectForcePress:O,drop:Ie=>Me("DROP",Ie),cancel:Ie=>Me("CANCEL",Ie),...me.actions}}function J(me){const Se=M0(Ie=>{H(()=>AC({client:Ie}))});return{...te({liftActionArgs:{id:f,clientSelection:me,movementMode:"FLUID"},cleanup:()=>Se.cancel(),actions:{move:Se}}),move:Se}}function K(){const me={moveUp:()=>H(wH),moveRight:()=>H(TH),moveDown:()=>H(SH),moveLeft:()=>H(EH)};return te({liftActionArgs:{id:f,clientSelection:vY(M),movementMode:"SNAP"},cleanup:Gu,actions:me})}function W(){rb({expected:"PRE_DRAG",phase:L,isLockActive:j,shouldWarn:!0})&&t.release()}return{isActive:()=>rb({expected:"PRE_DRAG",phase:L,isLockActive:j,shouldWarn:!1}),shouldRespectForcePress:O,fluidLift:J,snapLift:K,abort:W}}const CY=[cY,pY,bY];function MY({contextId:t,store:a,registry:s,customSensors:l,enableDefaultSensors:f}){const g=[...f?CY:[],...l||[]],w=Te.useState(()=>HZ())[0],I=Bn(function(te,J){B0(te)&&!B0(J)&&w.tryAbandon()},[w]);oo(function(){let te=a.getState();return a.subscribe(()=>{const K=a.getState();I(te,K),te=K})},[w,a,I]),oo(()=>w.tryAbandon,[w.tryAbandon]);const o=Bn(H=>JC({lockAPI:w,registry:s,store:a,draggableId:H}),[w,s,a]),M=Bn((H,te,J)=>AY({lockAPI:w,registry:s,contextId:t,store:a,draggableId:H,forceSensorStop:te||null,sourceEvent:J&&J.sourceEvent?J.sourceEvent:null}),[t,w,s,a]),B=Bn(H=>IY(t,H),[t]),L=Bn(H=>{const te=s.draggable.findById(H);return te?te.options:null},[s.draggable]),O=Bn(function(){w.isClaimed()&&(w.tryAbandon(),a.getState().phase!=="IDLE"&&a.dispatch(L6()))},[w,a]),j=Bn(()=>w.isClaimed(),[w]),Z=Ta(()=>({canGetLock:o,tryGetLock:M,findClosestDraggableId:B,findOptionsForDraggable:L,tryReleaseLock:O,isLockClaimed:j}),[o,M,B,L,O,j]);for(let H=0;H<g.length;H++)g[H](Z)}const RY=t=>({onBeforeCapture:a=>{const s=()=>{t.onBeforeCapture&&t.onBeforeCapture(a)};Hn.version.startsWith("16")||Hn.version.startsWith("17")?s():D_.flushSync(s)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),kY=t=>({...O0,...t.autoScrollerOptions,durationDampening:{...O0.durationDampening,...t.autoScrollerOptions}});function Am(t){return t.current||ln(!1),t.current}function LY(t){const{contextId:a,setCallbacks:s,sensors:l,nonce:f,dragHandleUsageInstructions:g}=t,w=Te.useRef(null),I=qC(t),o=Bn(()=>RY(I.current),[I]),M=Bn(()=>kY(I.current),[I]),B=UZ(a),L=WZ({contextId:a,text:g}),O=kZ(a,f),j=Bn(ge=>{Am(w).dispatch(ge)},[]),Z=Ta(()=>tE({publishWhileDragging:mH,updateDroppableScroll:bH,updateDroppableIsEnabled:_H,updateDroppableIsCombineEnabled:yH,collectionStarting:gH},j),[j]),H=BZ(),te=Ta(()=>uZ(H,Z),[H,Z]),J=Ta(()=>PZ({scrollWindow:dZ,scrollDroppable:te.scrollDroppable,getAutoScrollerOptions:M,...tE({move:AC},j)}),[te.scrollDroppable,j,M]),K=DZ(a),W=Ta(()=>iZ({announce:B,autoScroller:J,dimensionMarshal:te,focusMarshal:K,getResponders:o,styleMarshal:O}),[B,J,te,K,o,O]);w.current=W;const ee=Bn(()=>{const ge=Am(w);ge.getState().phase!=="IDLE"&&ge.dispatch(L6())},[]),me=Bn(()=>{const ge=Am(w).getState();return ge.phase==="DROP_ANIMATING"?!0:ge.phase==="IDLE"?!1:ge.isDragging},[]),Se=Ta(()=>({isDragging:me,tryAbort:ee}),[me,ee]);s(Se);const Me=Bn(ge=>NC(Am(w).getState(),ge),[]),Ie=Bn(()=>ep(Am(w).getState()),[]),Ge=Ta(()=>({marshal:te,focus:K,contextId:a,canLift:Me,isMovementAllowed:Ie,dragHandleUsageInstructionsId:L,registry:H}),[a,te,L,K,Me,Ie,H]);return MY({contextId:a,store:W,registry:H,customSensors:l||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),Te.useEffect(()=>ee,[ee]),Hn.createElement(gy.Provider,{value:Ge},Hn.createElement($q,{context:U6,store:W},t.children))}let DY=0;function OY(){return Ta(()=>`${DY++}`,[])}function BY(){return Hn.useId()}var NY="useId"in Hn?BY:OY;function FY(t){const a=NY(),s=t.dragHandleUsageInstructions||Eb.dragHandleUsageInstructions;return Hn.createElement(tW,null,l=>Hn.createElement(LY,{nonce:t.nonce,contextId:a,setCallbacks:l,dragHandleUsageInstructions:s,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const RE={dragging:5e3,dropAnimating:4500},jY=(t,a)=>a?Jm.drop(a.duration):t?Jm.snap:Jm.fluid,UY=(t,a)=>{if(t)return a?D0.opacity.drop:D0.opacity.combining},VY=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function GY(t){const s=t.dimension.client,{offset:l,combineWith:f,dropping:g}=t,w=!!f,I=VY(t),o=!!g,M=o?Gx.drop(l,w):Gx.moveTo(l);return{position:"fixed",top:s.marginBox.top,left:s.marginBox.left,boxSizing:"border-box",width:s.borderBox.width,height:s.borderBox.height,transition:jY(I,g),transform:M,opacity:UY(w,o),zIndex:o?RE.dropAnimating:RE.dragging,pointerEvents:"none"}}function $Y(t){return{transform:Gx.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function qY(t){return t.type==="DRAGGING"?GY(t):$Y(t)}function WY(t,a,s=fs){const l=window.getComputedStyle(a),f=a.getBoundingClientRect(),g=rC(f,l),w=u_(g,s),I={client:g,tagName:a.tagName.toLowerCase(),display:l.display},o={x:g.marginBox.width,y:g.marginBox.height};return{descriptor:t,placeholder:I,displaceBy:o,client:g,page:w}}function HY(t){const a=V6("draggable"),{descriptor:s,registry:l,getDraggableRef:f,canDragInteractiveElements:g,shouldRespectForcePress:w,isEnabled:I}=t,o=Ta(()=>({canDragInteractiveElements:g,shouldRespectForcePress:w,isEnabled:I}),[g,I,w]),M=Bn(j=>{const Z=f();return Z||ln(!1),WY(s,Z,j)},[s,f]),B=Ta(()=>({uniqueId:a,descriptor:s,options:o,getDimension:M}),[s,M,o,a]),L=Te.useRef(B),O=Te.useRef(!0);oo(()=>(l.draggable.register(L.current),()=>l.draggable.unregister(L.current)),[l.draggable]),oo(()=>{if(O.current){O.current=!1;return}const j=L.current;L.current=B,l.draggable.update(B,j)},[B,l.draggable])}var $6=Hn.createContext(null);function m_(t){const a=Te.useContext(t);return a||ln(!1),a}function ZY(t){t.preventDefault()}const YY=t=>{const a=Te.useRef(null),s=Bn((Se=null)=>{a.current=Se},[]),l=Bn(()=>a.current,[]),{contextId:f,dragHandleUsageInstructionsId:g,registry:w}=m_(gy),{type:I,droppableId:o}=m_($6),M=Ta(()=>({id:t.draggableId,index:t.index,type:I,droppableId:o}),[t.draggableId,t.index,I,o]),{children:B,draggableId:L,isEnabled:O,shouldRespectForcePress:j,canDragInteractiveElements:Z,isClone:H,mapped:te,dropAnimationFinished:J}=t;if(!H){const Se=Ta(()=>({descriptor:M,registry:w,getDraggableRef:l,canDragInteractiveElements:Z,shouldRespectForcePress:j,isEnabled:O}),[M,w,l,Z,j,O]);HY(Se)}const K=Ta(()=>O?{tabIndex:0,role:"button","aria-describedby":g,"data-rfd-drag-handle-draggable-id":L,"data-rfd-drag-handle-context-id":f,draggable:!1,onDragStart:ZY}:null,[f,g,L,O]),W=Bn(Se=>{te.type==="DRAGGING"&&te.dropping&&Se.propertyName==="transform"&&(Hn.version.startsWith("16")||Hn.version.startsWith("17")?J():D_.flushSync(J))},[J,te]),ee=Ta(()=>{const Se=qY(te),Me=te.type==="DRAGGING"&&te.dropping?W:void 0;return{innerRef:s,draggableProps:{"data-rfd-draggable-context-id":f,"data-rfd-draggable-id":L,style:Se,onTransitionEnd:Me},dragHandleProps:K}},[f,K,L,te,W,s]),me=Ta(()=>({draggableId:M.id,type:M.type,source:{index:M.index,droppableId:M.droppableId}}),[M.droppableId,M.id,M.index,M.type]);return Hn.createElement(Hn.Fragment,null,B(ee,te.snapshot,me))};var XY=YY,KC=(t,a)=>t===a,QC=t=>{const{combine:a,destination:s}=t;return s?s.droppableId:a?a.droppableId:null};const JY=t=>t.combine?t.combine.draggableId:null,KY=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function QY(){const t=ps((f,g)=>({x:f,y:g})),a=ps((f,g,w=null,I=null,o=null)=>({isDragging:!0,isClone:g,isDropAnimating:!!o,dropAnimation:o,mode:f,draggingOver:w,combineWith:I,combineTargetFor:null})),s=ps((f,g,w,I,o=null,M=null,B=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:o,combineWith:M,mode:g,offset:f,dimension:w,forceShouldAnimate:B,snapshot:a(g,I,o,M,null)}}));return(f,g)=>{if(B0(f)){if(f.critical.draggable.id!==g.draggableId)return null;const w=f.current.client.offset,I=f.dimensions.draggables[g.draggableId],o=io(f.impact),M=KY(f.impact),B=f.forceShouldAnimate;return s(t(w.x,w.y),f.movementMode,I,g.isClone,o,M,B)}if(f.phase==="DROP_ANIMATING"){const w=f.completed;if(w.result.draggableId!==g.draggableId)return null;const I=g.isClone,o=f.dimensions.draggables[g.draggableId],M=w.result,B=M.mode,L=QC(M),O=JY(M),Z={duration:f.dropDuration,curve:O6.drop,moveTo:f.newHomeClientOffset,opacity:O?D0.opacity.drop:null,scale:O?D0.scale.drop:null};return{mapped:{type:"DRAGGING",offset:f.newHomeClientOffset,dimension:o,dropping:Z,draggingOver:L,combineWith:O,mode:B,forceShouldAnimate:null,snapshot:a(B,I,L,O,Z)}}}return null}}function eM(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const eX={mapped:{type:"SECONDARY",offset:fs,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:eM(null)}};function tX(){const t=ps((w,I)=>({x:w,y:I})),a=ps(eM),s=ps((w,I=null,o)=>({mapped:{type:"SECONDARY",offset:w,combineTargetFor:I,shouldAnimateDisplacement:o,snapshot:a(I)}})),l=w=>w?s(fs,w,!0):null,f=(w,I,o,M)=>{const B=o.displaced.visible[w],L=!!(M.inVirtualList&&M.effected[w]),O=py(o),j=O&&O.draggableId===w?I:null;if(!B){if(!L)return l(j);if(o.displaced.invisible[w])return null;const te=ih(M.displacedBy.point),J=t(te.x,te.y);return s(J,j,!0)}if(L)return l(j);const Z=o.displacedBy.point,H=t(Z.x,Z.y);return s(H,j,B.shouldAnimate)};return(w,I)=>{if(B0(w))return w.critical.draggable.id===I.draggableId?null:f(I.draggableId,w.critical.draggable.id,w.impact,w.afterCritical);if(w.phase==="DROP_ANIMATING"){const o=w.completed;return o.result.draggableId===I.draggableId?null:f(I.draggableId,o.result.draggableId,o.impact,o.afterCritical)}return null}}const nX=()=>{const t=QY(),a=tX();return(l,f)=>t(l,f)||a(l,f)||eX},aX={dropAnimationFinished:MC},rX=nC(nX,aX,null,{context:U6,areStatePropsEqual:KC})(XY);var sX=rX;function tM(t){return m_($6).isUsingCloneFor===t.draggableId&&!t.isClone?null:Hn.createElement(sX,t)}function iX(t){const a=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,s=!!t.disableInteractiveElementBlocking,l=!!t.shouldRespectForcePress;return Hn.createElement(tM,Vu({},t,{isClone:!1,isEnabled:a,canDragInteractiveElements:s,shouldRespectForcePress:l}))}const nM=t=>a=>t===a,oX=nM("scroll"),cX=nM("auto"),kE=(t,a)=>a(t.overflowX)||a(t.overflowY),lX=t=>{const a=window.getComputedStyle(t),s={overflowX:a.overflowX,overflowY:a.overflowY};return kE(s,oX)||kE(s,cX)},uX=()=>!1,aM=t=>t==null?null:t===document.body?uX()?t:null:t===document.documentElement?null:lX(t)?t:aM(t.parentElement);var Wx=t=>({x:t.scrollLeft,y:t.scrollTop});const rM=t=>t?window.getComputedStyle(t).position==="fixed"?!0:rM(t.parentElement):!1;var dX=t=>{const a=aM(t),s=rM(t);return{closestScrollable:a,isFixedOnPage:s}},pX=({descriptor:t,isEnabled:a,isCombineEnabled:s,isFixedOnPage:l,direction:f,client:g,page:w,closest:I})=>{const o=(()=>{if(!I)return null;const{scrollSize:O,client:j}=I,Z=DC({scrollHeight:O.scrollHeight,scrollWidth:O.scrollWidth,height:j.paddingBox.height,width:j.paddingBox.width});return{pageMarginBox:I.page.marginBox,frameClient:j,scrollSize:O,shouldClipSubject:I.shouldClipSubject,scroll:{initial:I.scroll,current:I.scroll,max:Z,diff:{value:fs,displacement:fs}}}})(),M=f==="vertical"?A6:hC,B=Jf({page:w,withPlaceholder:null,axis:M,frame:o});return{descriptor:t,isCombineEnabled:s,isFixedOnPage:l,axis:M,isEnabled:a,client:g,page:w,frame:o,subject:B}};const fX=(t,a)=>{const s=sC(t);if(!a||t!==a)return s;const l=s.paddingBox.top-a.scrollTop,f=s.paddingBox.left-a.scrollLeft,g=l+a.scrollHeight,w=f+a.scrollWidth,o=E6({top:l,right:w,bottom:g,left:f},s.border);return I6({borderBox:o,margin:s.margin,border:s.border,padding:s.padding})};var hX=({ref:t,descriptor:a,env:s,windowScroll:l,direction:f,isDropDisabled:g,isCombineEnabled:w,shouldClipSubject:I})=>{const o=s.closestScrollable,M=fX(t,o),B=u_(M,l),L=(()=>{if(!o)return null;const j=sC(o),Z={scrollHeight:o.scrollHeight,scrollWidth:o.scrollWidth};return{client:j,page:u_(j,l),scroll:Wx(o),scrollSize:Z,shouldClipSubject:I}})();return pX({descriptor:a,isEnabled:!g,isCombineEnabled:w,isFixedOnPage:s.isFixedOnPage,direction:f,client:M,page:B,closest:L})};const mX={passive:!1},gX={passive:!0};var LE=t=>t.shouldPublishImmediately?mX:gX;const sb=t=>t&&t.env.closestScrollable||null;function bX(t){const a=Te.useRef(null),s=m_(gy),l=V6("droppable"),{registry:f,marshal:g}=s,w=qC(t),I=Ta(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),o=Te.useRef(I),M=Ta(()=>ps((ee,me)=>{a.current||ln(!1);const Se={x:ee,y:me};g.updateDroppableScroll(I.id,Se)}),[I.id,g]),B=Bn(()=>{const ee=a.current;return!ee||!ee.env.closestScrollable?fs:Wx(ee.env.closestScrollable)},[]),L=Bn(()=>{const ee=B();M(ee.x,ee.y)},[B,M]),O=Ta(()=>M0(L),[L]),j=Bn(()=>{const ee=a.current,me=sb(ee);if(ee&&me||ln(!1),ee.scrollOptions.shouldPublishImmediately){L();return}O()},[O,L]),Z=Bn((ee,me)=>{a.current&&ln(!1);const Se=w.current,Me=Se.getDroppableRef();Me||ln(!1);const Ie=dX(Me),Ge={ref:Me,descriptor:I,env:Ie,scrollOptions:me};a.current=Ge;const ge=hX({ref:Me,descriptor:I,env:Ie,windowScroll:ee,direction:Se.direction,isDropDisabled:Se.isDropDisabled,isCombineEnabled:Se.isCombineEnabled,shouldClipSubject:!Se.ignoreContainerClipping}),Xe=Ie.closestScrollable;return Xe&&(Xe.setAttribute(zE.contextId,s.contextId),Xe.addEventListener("scroll",j,LE(Ge.scrollOptions))),ge},[s.contextId,I,j,w]),H=Bn(()=>{const ee=a.current,me=sb(ee);return ee&&me||ln(!1),Wx(me)},[]),te=Bn(()=>{const ee=a.current;ee||ln(!1);const me=sb(ee);a.current=null,me&&(O.cancel(),me.removeAttribute(zE.contextId),me.removeEventListener("scroll",j,LE(ee.scrollOptions)))},[j,O]),J=Bn(ee=>{const me=a.current;me||ln(!1);const Se=sb(me);Se||ln(!1),Se.scrollTop+=ee.y,Se.scrollLeft+=ee.x},[]),K=Ta(()=>({getDimensionAndWatchScroll:Z,getScrollWhileDragging:H,dragStopped:te,scroll:J}),[te,Z,H,J]),W=Ta(()=>({uniqueId:l,descriptor:I,callbacks:K}),[K,I,l]);oo(()=>(o.current=W.descriptor,f.droppable.register(W),()=>{a.current&&te(),f.droppable.unregister(W)}),[K,I,te,W,g,f.droppable]),oo(()=>{a.current&&g.updateDroppableIsEnabled(o.current.id,!t.isDropDisabled)},[t.isDropDisabled,g]),oo(()=>{a.current&&g.updateDroppableIsCombineEnabled(o.current.id,t.isCombineEnabled)},[t.isCombineEnabled,g])}function _v(){}const DE={width:0,height:0,margin:cW},_X=({isAnimatingOpenOnMount:t,placeholder:a,animate:s})=>t||s==="close"?DE:{height:a.client.borderBox.height,width:a.client.borderBox.width,margin:a.client.margin},yX=({isAnimatingOpenOnMount:t,placeholder:a,animate:s})=>{const l=_X({isAnimatingOpenOnMount:t,placeholder:a,animate:s});return{display:a.display,boxSizing:"border-box",width:l.width,height:l.height,marginTop:l.margin.top,marginRight:l.margin.right,marginBottom:l.margin.bottom,marginLeft:l.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?Jm.placeholder:null}},vX=t=>{const a=Te.useRef(null),s=Bn(()=>{a.current&&(clearTimeout(a.current),a.current=null)},[]),{animate:l,onTransitionEnd:f,onClose:g,contextId:w}=t,[I,o]=Te.useState(t.animate==="open");Te.useEffect(()=>I?l!=="open"?(s(),o(!1),_v):a.current?_v:(a.current=setTimeout(()=>{a.current=null,o(!1)}),s):_v,[l,I,s]);const M=Bn(L=>{L.propertyName==="height"&&(f(),l==="close"&&g())},[l,g,f]),B=yX({isAnimatingOpenOnMount:I,animate:t.animate,placeholder:t.placeholder});return Hn.createElement(t.placeholder.tagName,{style:B,"data-rfd-placeholder-context-id":w,onTransitionEnd:M,ref:t.innerRef})};var xX=Hn.memo(vX);class wX extends Hn.PureComponent{constructor(...a){super(...a),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(a,s){return a.shouldAnimate?a.on?{isVisible:!0,data:a.on,animate:"open"}:s.isVisible?{isVisible:!0,data:s.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!a.on,data:a.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const a={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(a)}}const SX=t=>{const a=Te.useContext(gy);a||ln(!1);const{contextId:s,isMovementAllowed:l}=a,f=Te.useRef(null),g=Te.useRef(null),{children:w,droppableId:I,type:o,mode:M,direction:B,ignoreContainerClipping:L,isDropDisabled:O,isCombineEnabled:j,snapshot:Z,useClone:H,updateViewportMaxScroll:te,getContainerForClone:J}=t,K=Bn(()=>f.current,[]),W=Bn((Xe=null)=>{f.current=Xe},[]);Bn(()=>g.current,[]);const ee=Bn((Xe=null)=>{g.current=Xe},[]),me=Bn(()=>{l()&&te({maxScroll:BC()})},[l,te]);bX({droppableId:I,type:o,mode:M,direction:B,isDropDisabled:O,isCombineEnabled:j,ignoreContainerClipping:L,getDroppableRef:K});const Se=Ta(()=>Hn.createElement(wX,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:Xe,data:rt,animate:Ue})=>Hn.createElement(xX,{placeholder:rt,onClose:Xe,innerRef:ee,animate:Ue,contextId:s,onTransitionEnd:me})),[s,me,t.placeholder,t.shouldAnimatePlaceholder,ee]),Me=Ta(()=>({innerRef:W,placeholder:Se,droppableProps:{"data-rfd-droppable-id":I,"data-rfd-droppable-context-id":s}}),[s,I,Se,W]),Ie=H?H.dragging.draggableId:null,Ge=Ta(()=>({droppableId:I,type:o,isUsingCloneFor:Ie}),[I,Ie,o]);function ge(){if(!H)return null;const{dragging:Xe,render:rt}=H,Ue=Hn.createElement(tM,{draggableId:Xe.draggableId,index:Xe.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Bt,un)=>rt(Bt,un,Xe));return sz.createPortal(Ue,J())}return Hn.createElement($6.Provider,{value:Ge},w(Me,Z),ge())};var TX=SX;function EX(){return document.body||ln(!1),document.body}const OE={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:EX},sM=t=>{let a={...t},s;for(s in OE)t[s]===void 0&&(a={...a,[s]:OE[s]});return a},yv=(t,a)=>t===a.droppable.type,BE=(t,a)=>a.draggables[t.draggable.id],IX=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},a={...t,shouldAnimatePlaceholder:!1},s=ps(g=>({draggableId:g.id,type:g.type,source:{index:g.index,droppableId:g.droppableId}})),l=ps((g,w,I,o,M,B)=>{const L=M.descriptor.id;if(M.descriptor.droppableId===g){const Z=B?{render:B,dragging:s(M.descriptor)}:null,H={isDraggingOver:I,draggingOverWith:I?L:null,draggingFromThisWith:L,isUsingPlaceholder:!0};return{placeholder:M.placeholder,shouldAnimatePlaceholder:!1,snapshot:H,useClone:Z}}if(!w)return a;if(!o)return t;const j={isDraggingOver:I,draggingOverWith:L,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:M.placeholder,shouldAnimatePlaceholder:!0,snapshot:j,useClone:null}});return(g,w)=>{const I=sM(w),o=I.droppableId,M=I.type,B=!I.isDropDisabled,L=I.renderClone;if(B0(g)){const O=g.critical;if(!yv(M,O))return a;const j=BE(O,g.dimensions),Z=io(g.impact)===o;return l(o,B,Z,Z,j,L)}if(g.phase==="DROP_ANIMATING"){const O=g.completed;if(!yv(M,O.critical))return a;const j=BE(O.critical,g.dimensions);return l(o,B,QC(O.result)===o,io(O.impact)===o,j,L)}if(g.phase==="IDLE"&&g.completed&&!g.shouldFlush){const O=g.completed;if(!yv(M,O.critical))return a;const j=io(O.impact)===o,Z=!!(O.impact.at&&O.impact.at.type==="COMBINE"),H=O.critical.droppable.id===o;return j?Z?t:a:H?t:a}return a}},PX={updateViewportMaxScroll:xH},zX=nC(IX,PX,(t,a,s)=>({...sM(s),...t,...a}),{context:U6,areStatePropsEqual:KC})(TX);var AX=zX;const CX=({handler:t,isVisible:a,children:s,onDeletePicture:l,features:f,setFeatures:g,index:w,item:I,addImagesToProdProject:o,handleDeleteFeatures:M})=>{const B=(O,j,Z)=>{g(H=>{const te=[...H];return te[O]={...te[O],name:{...te[O].name,[j]:Z}},te})},L=O=>{if(!O.destination)return;const j=Array.from(I.photos),[Z]=j.splice(O.source.index,1);j.splice(O.destination.index,0,Z),g(H=>{const te=[...H];return te[w]={...te[w],photos:j},te})};return q.jsx("div",{className:"popupProjects",children:q.jsx(ql,{handlerClose:O=>{O.preventDefault(),t(!1)},isVisible:a,children:q.jsxs("div",{className:"popupProjects__content",children:[q.jsx("div",{className:"popupProjects__content-images",children:q.jsx(FY,{onDragEnd:L,children:q.jsx(AX,{droppableId:"photos",children:O=>q.jsxs("ul",{className:"popupProjects__content-list",...O.droppableProps,ref:O.innerRef,children:[I.photos.map((j,Z)=>q.jsx(iX,{draggableId:String(Z),index:Z,children:H=>q.jsxs("li",{className:"popupProjects__content-item",ref:H.innerRef,...H.draggableProps,...H.dragHandleProps,children:[q.jsx("img",{src:typeof j=="string"?j:URL.createObjectURL(j),alt:`Image ${Z+1}`,width:384,height:203}),q.jsx("div",{className:"popupProjects__content-button",children:q.jsx("button",{className:"popupProjects__content-btn",onClick:()=>l(Z),children:q.jsx("img",{src:"/assets/ProjectPage/trash.svg",alt:"Image trash",width:16,height:16})})})]})},Z)),O.placeholder]})})})}),q.jsxs("div",{className:"popupProjects__content-upload",children:[q.jsx("button",{className:"popupProjects__content-delete",onClick:()=>{M(w),t(!1)},children:q.jsx("img",{src:"/assets/ProjectPage/trash.svg",alt:"Image trash",width:16,height:16})}),q.jsxs("div",{className:"popupProjects__content-wrapper images",children:[q.jsxs("div",{className:"popupProjects__content-inputs",children:[q.jsxs("div",{className:"popupProjects__content-inputWrapper",children:[q.jsx("span",{children:"EN"}),q.jsx("input",{type:"text",placeholder:"Name here",value:I.name.EN,onChange:O=>B(w,"EN",O.target.value)})]}),q.jsxs("div",{className:"popupProjects__content-inputWrapper",children:[q.jsx("span",{children:"RU"}),q.jsx("input",{type:"text",placeholder:" ",value:I.name.RU,onChange:O=>B(w,"RU",O.target.value)})]}),q.jsxs("div",{className:"popupProjects__content-inputWrapper",children:[q.jsx("span",{children:"UA"}),q.jsx("input",{type:"text",placeholder:"  ",value:I.name.UA,onChange:O=>B(w,"UA",O.target.value)})]})]}),s,q.jsxs("div",{className:"popupProjects__content-buttons",children:[q.jsx("button",{onClick:()=>t(!1),children:"cancel"}),q.jsx("button",{onClick:()=>{o(),t(!1)},children:"Confirm changes"})]})]})]})]})})})},MX=({handler:t,isVisible:a,children:s,handleAddFloorPlan:l,tempInfoFloorPlan:f,setTempInfoFloorPlan:g,handleCloseFloorPlan:w,addFloorPlanToProdProject:I,projectData:o,handleChangeToAddFloorPlan:M})=>{const[B,L]=Te.useState(!1),O=Te.useRef(null),j=Z=>{O.current&&!O.current.contains(Z.target)&&L(!1)};return Te.useEffect(()=>(document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}),[]),q.jsx("div",{className:"popupAddFloorPlan",children:q.jsx(ql,{handlerClose:Z=>{Z.preventDefault(),t(!1)},isVisible:a,children:q.jsxs("div",{className:"popupAddFloorPlan__content",children:[q.jsxs("div",{className:"popupAddFloorPlan__content-body",children:[f.tempImg?q.jsx("div",{className:"popupAddFloorPlan__content-selectImage",children:q.jsx("img",{src:URL.createObjectURL(f.tempImg),alt:"Image floor plan",width:268,height:239})}):s,q.jsxs("div",{className:"popupAddFloorPlan__content-inputs",children:[q.jsxs("div",{className:"popupAddFloorPlan__content-inputsWrapper",children:[q.jsx("span",{children:"Price"}),q.jsxs("div",{className:"popupAddFloorPlan__content-inputsInsideWrapper",children:[q.jsx("div",{children:"AED"}),q.jsx("input",{type:"text",placeholder:"type here",value:f.tempPrice,onChange:Z=>{const J=Z.target.value.replace(/[^0-9.,]/g,"").replace(",",".");g({...f,tempPrice:J})},maxLength:15})]})]}),q.jsxs("div",{className:"popupAddFloorPlan__content-inputsWrapper",children:[q.jsx("span",{children:"Size"}),q.jsxs("div",{className:"popupAddFloorPlan__content-inputsInsideWrapper",children:[q.jsx("div",{children:"sq.ft"}),q.jsx("input",{type:"text",placeholder:"type here",value:f.tempSize,onChange:Z=>{const te=Z.target.value.replace(/\D/g,"");g({...f,tempSize:te})},maxLength:15})]})]}),q.jsxs("div",{className:"popupAddFloorPlan__content-inputsWrapper popupAddFloorPlanSelect",children:[q.jsx("span",{children:"Type"}),q.jsxs("div",{className:"buildingInfo__changeSelect-select",ref:O,children:[q.jsx("div",{className:"buildingInfo__changeSelect-secondImg",children:q.jsxs(Zc,{handler:()=>L(!B),className:"buildingInfo__changeSelect-btnSelect",children:[f.tempType?f.tempType:q.jsx("span",{className:"popupAddFloorPlan__content-typePlaceholder",children:"Type here"}),q.jsx("img",{src:"/assets/ProjectPage/arrowSelect.svg",alt:"img arrow",width:8,height:4,className:`buildingInfo__changeSelect-imgSelect ${B?"active":""}`})]})}),q.jsx("div",{className:`buildingInfo__changeSelect-dropContent ${B?"active":""}`,children:["Apartment","Townhouse","Penthouse","Villa","Office"].map((Z,H)=>q.jsxs("button",{className:`buildingInfo__changeSelect-btnDropSelect ${f.tempType===Z?"active":""}`,onClick:()=>{g({...f,tempType:Z}),L(!1)},children:[Z,q.jsx("div",{className:`buildingInfo__changeSelect-point ${f.tempType===Z?"active":""}`})]},H))})]})]})]})]}),q.jsxs("div",{className:"popupAddFloorPlan__content-closseWrapper",children:[q.jsx("button",{onClick:()=>w(),children:"cancel"}),o?q.jsx("button",{onClick:()=>M(),children:"Save"}):q.jsx("button",{onClick:()=>l(),children:"Save"})]})]})})})},iM=({handler:t,isVisible:a,descr:s,title:l})=>q.jsx("div",{className:"popupError",children:q.jsx(ql,{handlerClose:f=>{f.preventDefault(),t(!1)},isVisible:a,children:q.jsx("div",{className:"popupError__content",children:q.jsxs("div",{className:"popupError__content-wrapper",children:[q.jsx("img",{src:"/assets/components/deleteAlert.png",alt:"Image alert",width:35,height:35}),q.jsxs("div",{className:"popupError__content-texts",children:[q.jsx("h5",{className:"popupError__content-title",children:l}),q.jsx("p",{className:"popupError__content-descr",children:s})]}),q.jsx("div",{className:"popupError__content-buttons",children:q.jsx(Zc,{className:"button--orange",handler:()=>t(!1),children:"Close"})})]})})})});function NE(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function q6(t,a){t===void 0&&(t={}),a===void 0&&(a={}),Object.keys(a).forEach(s=>{typeof t[s]>"u"?t[s]=a[s]:NE(a[s])&&NE(t[s])&&Object.keys(a[s]).length>0&&q6(t[s],a[s])})}const oM={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function lh(){const t=typeof document<"u"?document:{};return q6(t,oM),t}const RX={document:oM,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function ho(){const t=typeof window<"u"?window:{};return q6(t,RX),t}function kX(t){return t===void 0&&(t=""),t.trim().split(" ").filter(a=>!!a.trim())}function LX(t){const a=t;Object.keys(a).forEach(s=>{try{a[s]=null}catch{}try{delete a[s]}catch{}})}function Hx(t,a){return a===void 0&&(a=0),setTimeout(t,a)}function g_(){return Date.now()}function DX(t){const a=ho();let s;return a.getComputedStyle&&(s=a.getComputedStyle(t,null)),!s&&t.currentStyle&&(s=t.currentStyle),s||(s=t.style),s}function OX(t,a){a===void 0&&(a="x");const s=ho();let l,f,g;const w=DX(t);return s.WebKitCSSMatrix?(f=w.transform||w.webkitTransform,f.split(",").length>6&&(f=f.split(", ").map(I=>I.replace(",",".")).join(", ")),g=new s.WebKitCSSMatrix(f==="none"?"":f)):(g=w.MozTransform||w.OTransform||w.MsTransform||w.msTransform||w.transform||w.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),l=g.toString().split(",")),a==="x"&&(s.WebKitCSSMatrix?f=g.m41:l.length===16?f=parseFloat(l[12]):f=parseFloat(l[4])),a==="y"&&(s.WebKitCSSMatrix?f=g.m42:l.length===16?f=parseFloat(l[13]):f=parseFloat(l[5])),f||0}function ib(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function BX(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function to(){const t=Object(arguments.length<=0?void 0:arguments[0]),a=["__proto__","constructor","prototype"];for(let s=1;s<arguments.length;s+=1){const l=s<0||arguments.length<=s?void 0:arguments[s];if(l!=null&&!BX(l)){const f=Object.keys(Object(l)).filter(g=>a.indexOf(g)<0);for(let g=0,w=f.length;g<w;g+=1){const I=f[g],o=Object.getOwnPropertyDescriptor(l,I);o!==void 0&&o.enumerable&&(ib(t[I])&&ib(l[I])?l[I].__swiper__?t[I]=l[I]:to(t[I],l[I]):!ib(t[I])&&ib(l[I])?(t[I]={},l[I].__swiper__?t[I]=l[I]:to(t[I],l[I])):t[I]=l[I])}}}return t}function ob(t,a,s){t.style.setProperty(a,s)}function cM(t){let{swiper:a,targetPosition:s,side:l}=t;const f=ho(),g=-a.translate;let w=null,I;const o=a.params.speed;a.wrapperEl.style.scrollSnapType="none",f.cancelAnimationFrame(a.cssModeFrameID);const M=s>g?"next":"prev",B=(O,j)=>M==="next"&&O>=j||M==="prev"&&O<=j,L=()=>{I=new Date().getTime(),w===null&&(w=I);const O=Math.max(Math.min((I-w)/o,1),0),j=.5-Math.cos(O*Math.PI)/2;let Z=g+j*(s-g);if(B(Z,s)&&(Z=s),a.wrapperEl.scrollTo({[l]:Z}),B(Z,s)){a.wrapperEl.style.overflow="hidden",a.wrapperEl.style.scrollSnapType="",setTimeout(()=>{a.wrapperEl.style.overflow="",a.wrapperEl.scrollTo({[l]:Z})}),f.cancelAnimationFrame(a.cssModeFrameID);return}a.cssModeFrameID=f.requestAnimationFrame(L)};L()}function Bl(t,a){return a===void 0&&(a=""),[...t.children].filter(s=>s.matches(a))}function b_(t){try{console.warn(t);return}catch{}}function Zx(t,a){a===void 0&&(a=[]);const s=document.createElement(t);return s.classList.add(...Array.isArray(a)?a:kX(a)),s}function NX(t,a){const s=[];for(;t.previousElementSibling;){const l=t.previousElementSibling;a?l.matches(a)&&s.push(l):s.push(l),t=l}return s}function FX(t,a){const s=[];for(;t.nextElementSibling;){const l=t.nextElementSibling;a?l.matches(a)&&s.push(l):s.push(l),t=l}return s}function Ru(t,a){return ho().getComputedStyle(t,null).getPropertyValue(a)}function FE(t){let a=t,s;if(a){for(s=0;(a=a.previousSibling)!==null;)a.nodeType===1&&(s+=1);return s}}function jX(t,a){const s=[];let l=t.parentElement;for(;l;)a?l.matches(a)&&s.push(l):s.push(l),l=l.parentElement;return s}function jE(t,a,s){const l=ho();return s?t[a==="width"?"offsetWidth":"offsetHeight"]+parseFloat(l.getComputedStyle(t,null).getPropertyValue(a==="width"?"margin-right":"margin-top"))+parseFloat(l.getComputedStyle(t,null).getPropertyValue(a==="width"?"margin-left":"margin-bottom")):t.offsetWidth}let vv;function UX(){const t=ho(),a=lh();return{smoothScroll:a.documentElement&&a.documentElement.style&&"scrollBehavior"in a.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&a instanceof t.DocumentTouch)}}function lM(){return vv||(vv=UX()),vv}let xv;function VX(t){let{userAgent:a}=t===void 0?{}:t;const s=lM(),l=ho(),f=l.navigator.platform,g=a||l.navigator.userAgent,w={ios:!1,android:!1},I=l.screen.width,o=l.screen.height,M=g.match(/(Android);?[\s\/]+([\d.]+)?/);let B=g.match(/(iPad).*OS\s([\d_]+)/);const L=g.match(/(iPod)(.*OS\s([\d_]+))?/),O=!B&&g.match(/(iPhone\sOS|iOS)\s([\d_]+)/),j=f==="Win32";let Z=f==="MacIntel";const H=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!B&&Z&&s.touch&&H.indexOf(`${I}x${o}`)>=0&&(B=g.match(/(Version)\/([\d.]+)/),B||(B=[0,1,"13_0_0"]),Z=!1),M&&!j&&(w.os="android",w.android=!0),(B||O||L)&&(w.os="ios",w.ios=!0),w}function uM(t){return t===void 0&&(t={}),xv||(xv=VX(t)),xv}let wv;function GX(){const t=ho(),a=uM();let s=!1;function l(){const I=t.navigator.userAgent.toLowerCase();return I.indexOf("safari")>=0&&I.indexOf("chrome")<0&&I.indexOf("android")<0}if(l()){const I=String(t.navigator.userAgent);if(I.includes("Version/")){const[o,M]=I.split("Version/")[1].split(" ")[0].split(".").map(B=>Number(B));s=o<16||o===16&&M<2}}const f=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),g=l(),w=g||f&&a.ios;return{isSafari:s||g,needPerspectiveFix:s,need3dFix:w,isWebView:f}}function $X(){return wv||(wv=GX()),wv}function qX(t){let{swiper:a,on:s,emit:l}=t;const f=ho();let g=null,w=null;const I=()=>{!a||a.destroyed||!a.initialized||(l("beforeResize"),l("resize"))},o=()=>{!a||a.destroyed||!a.initialized||(g=new ResizeObserver(L=>{w=f.requestAnimationFrame(()=>{const{width:O,height:j}=a;let Z=O,H=j;L.forEach(te=>{let{contentBoxSize:J,contentRect:K,target:W}=te;W&&W!==a.el||(Z=K?K.width:(J[0]||J).inlineSize,H=K?K.height:(J[0]||J).blockSize)}),(Z!==O||H!==j)&&I()})}),g.observe(a.el))},M=()=>{w&&f.cancelAnimationFrame(w),g&&g.unobserve&&a.el&&(g.unobserve(a.el),g=null)},B=()=>{!a||a.destroyed||!a.initialized||l("orientationchange")};s("init",()=>{if(a.params.resizeObserver&&typeof f.ResizeObserver<"u"){o();return}f.addEventListener("resize",I),f.addEventListener("orientationchange",B)}),s("destroy",()=>{M(),f.removeEventListener("resize",I),f.removeEventListener("orientationchange",B)})}function WX(t){let{swiper:a,extendParams:s,on:l,emit:f}=t;const g=[],w=ho(),I=function(B,L){L===void 0&&(L={});const O=w.MutationObserver||w.WebkitMutationObserver,j=new O(Z=>{if(a.__preventObserver__)return;if(Z.length===1){f("observerUpdate",Z[0]);return}const H=function(){f("observerUpdate",Z[0])};w.requestAnimationFrame?w.requestAnimationFrame(H):w.setTimeout(H,0)});j.observe(B,{attributes:typeof L.attributes>"u"?!0:L.attributes,childList:typeof L.childList>"u"?!0:L.childList,characterData:typeof L.characterData>"u"?!0:L.characterData}),g.push(j)},o=()=>{if(a.params.observer){if(a.params.observeParents){const B=jX(a.hostEl);for(let L=0;L<B.length;L+=1)I(B[L])}I(a.hostEl,{childList:a.params.observeSlideChildren}),I(a.wrapperEl,{attributes:!1})}},M=()=>{g.forEach(B=>{B.disconnect()}),g.splice(0,g.length)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),l("init",o),l("destroy",M)}var HX={on(t,a,s){const l=this;if(!l.eventsListeners||l.destroyed||typeof a!="function")return l;const f=s?"unshift":"push";return t.split(" ").forEach(g=>{l.eventsListeners[g]||(l.eventsListeners[g]=[]),l.eventsListeners[g][f](a)}),l},once(t,a,s){const l=this;if(!l.eventsListeners||l.destroyed||typeof a!="function")return l;function f(){l.off(t,f),f.__emitterProxy&&delete f.__emitterProxy;for(var g=arguments.length,w=new Array(g),I=0;I<g;I++)w[I]=arguments[I];a.apply(l,w)}return f.__emitterProxy=a,l.on(t,f,s)},onAny(t,a){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;const l=a?"unshift":"push";return s.eventsAnyListeners.indexOf(t)<0&&s.eventsAnyListeners[l](t),s},offAny(t){const a=this;if(!a.eventsListeners||a.destroyed||!a.eventsAnyListeners)return a;const s=a.eventsAnyListeners.indexOf(t);return s>=0&&a.eventsAnyListeners.splice(s,1),a},off(t,a){const s=this;return!s.eventsListeners||s.destroyed||!s.eventsListeners||t.split(" ").forEach(l=>{typeof a>"u"?s.eventsListeners[l]=[]:s.eventsListeners[l]&&s.eventsListeners[l].forEach((f,g)=>{(f===a||f.__emitterProxy&&f.__emitterProxy===a)&&s.eventsListeners[l].splice(g,1)})}),s},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let a,s,l;for(var f=arguments.length,g=new Array(f),w=0;w<f;w++)g[w]=arguments[w];return typeof g[0]=="string"||Array.isArray(g[0])?(a=g[0],s=g.slice(1,g.length),l=t):(a=g[0].events,s=g[0].data,l=g[0].context||t),s.unshift(l),(Array.isArray(a)?a:a.split(" ")).forEach(o=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(M=>{M.apply(l,[o,...s])}),t.eventsListeners&&t.eventsListeners[o]&&t.eventsListeners[o].forEach(M=>{M.apply(l,s)})}),t}};function ZX(){const t=this;let a,s;const l=t.el;typeof t.params.width<"u"&&t.params.width!==null?a=t.params.width:a=l.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?s=t.params.height:s=l.clientHeight,!(a===0&&t.isHorizontal()||s===0&&t.isVertical())&&(a=a-parseInt(Ru(l,"padding-left")||0,10)-parseInt(Ru(l,"padding-right")||0,10),s=s-parseInt(Ru(l,"padding-top")||0,10)-parseInt(Ru(l,"padding-bottom")||0,10),Number.isNaN(a)&&(a=0),Number.isNaN(s)&&(s=0),Object.assign(t,{width:a,height:s,size:t.isHorizontal()?a:s}))}function YX(){const t=this;function a(ge,Xe){return parseFloat(ge.getPropertyValue(t.getDirectionLabel(Xe))||0)}const s=t.params,{wrapperEl:l,slidesEl:f,size:g,rtlTranslate:w,wrongRTL:I}=t,o=t.virtual&&s.virtual.enabled,M=o?t.virtual.slides.length:t.slides.length,B=Bl(f,`.${t.params.slideClass}, swiper-slide`),L=o?t.virtual.slides.length:B.length;let O=[];const j=[],Z=[];let H=s.slidesOffsetBefore;typeof H=="function"&&(H=s.slidesOffsetBefore.call(t));let te=s.slidesOffsetAfter;typeof te=="function"&&(te=s.slidesOffsetAfter.call(t));const J=t.snapGrid.length,K=t.slidesGrid.length;let W=s.spaceBetween,ee=-H,me=0,Se=0;if(typeof g>"u")return;typeof W=="string"&&W.indexOf("%")>=0?W=parseFloat(W.replace("%",""))/100*g:typeof W=="string"&&(W=parseFloat(W)),t.virtualSize=-W,B.forEach(ge=>{w?ge.style.marginLeft="":ge.style.marginRight="",ge.style.marginBottom="",ge.style.marginTop=""}),s.centeredSlides&&s.cssMode&&(ob(l,"--swiper-centered-offset-before",""),ob(l,"--swiper-centered-offset-after",""));const Me=s.grid&&s.grid.rows>1&&t.grid;Me?t.grid.initSlides(B):t.grid&&t.grid.unsetSlides();let Ie;const Ge=s.slidesPerView==="auto"&&s.breakpoints&&Object.keys(s.breakpoints).filter(ge=>typeof s.breakpoints[ge].slidesPerView<"u").length>0;for(let ge=0;ge<L;ge+=1){Ie=0;let Xe;if(B[ge]&&(Xe=B[ge]),Me&&t.grid.updateSlide(ge,Xe,B),!(B[ge]&&Ru(Xe,"display")==="none")){if(s.slidesPerView==="auto"){Ge&&(B[ge].style[t.getDirectionLabel("width")]="");const rt=getComputedStyle(Xe),Ue=Xe.style.transform,Bt=Xe.style.webkitTransform;if(Ue&&(Xe.style.transform="none"),Bt&&(Xe.style.webkitTransform="none"),s.roundLengths)Ie=t.isHorizontal()?jE(Xe,"width",!0):jE(Xe,"height",!0);else{const un=a(rt,"width"),Tn=a(rt,"padding-left"),ea=a(rt,"padding-right"),St=a(rt,"margin-left"),ke=a(rt,"margin-right"),Ct=rt.getPropertyValue("box-sizing");if(Ct&&Ct==="border-box")Ie=un+St+ke;else{const{clientWidth:Et,offsetWidth:Nt}=Xe;Ie=un+Tn+ea+St+ke+(Nt-Et)}}Ue&&(Xe.style.transform=Ue),Bt&&(Xe.style.webkitTransform=Bt),s.roundLengths&&(Ie=Math.floor(Ie))}else Ie=(g-(s.slidesPerView-1)*W)/s.slidesPerView,s.roundLengths&&(Ie=Math.floor(Ie)),B[ge]&&(B[ge].style[t.getDirectionLabel("width")]=`${Ie}px`);B[ge]&&(B[ge].swiperSlideSize=Ie),Z.push(Ie),s.centeredSlides?(ee=ee+Ie/2+me/2+W,me===0&&ge!==0&&(ee=ee-g/2-W),ge===0&&(ee=ee-g/2-W),Math.abs(ee)<1/1e3&&(ee=0),s.roundLengths&&(ee=Math.floor(ee)),Se%s.slidesPerGroup===0&&O.push(ee),j.push(ee)):(s.roundLengths&&(ee=Math.floor(ee)),(Se-Math.min(t.params.slidesPerGroupSkip,Se))%t.params.slidesPerGroup===0&&O.push(ee),j.push(ee),ee=ee+Ie+W),t.virtualSize+=Ie+W,me=Ie,Se+=1}}if(t.virtualSize=Math.max(t.virtualSize,g)+te,w&&I&&(s.effect==="slide"||s.effect==="coverflow")&&(l.style.width=`${t.virtualSize+W}px`),s.setWrapperSize&&(l.style[t.getDirectionLabel("width")]=`${t.virtualSize+W}px`),Me&&t.grid.updateWrapperSize(Ie,O),!s.centeredSlides){const ge=[];for(let Xe=0;Xe<O.length;Xe+=1){let rt=O[Xe];s.roundLengths&&(rt=Math.floor(rt)),O[Xe]<=t.virtualSize-g&&ge.push(rt)}O=ge,Math.floor(t.virtualSize-g)-Math.floor(O[O.length-1])>1&&O.push(t.virtualSize-g)}if(o&&s.loop){const ge=Z[0]+W;if(s.slidesPerGroup>1){const Xe=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/s.slidesPerGroup),rt=ge*s.slidesPerGroup;for(let Ue=0;Ue<Xe;Ue+=1)O.push(O[O.length-1]+rt)}for(let Xe=0;Xe<t.virtual.slidesBefore+t.virtual.slidesAfter;Xe+=1)s.slidesPerGroup===1&&O.push(O[O.length-1]+ge),j.push(j[j.length-1]+ge),t.virtualSize+=ge}if(O.length===0&&(O=[0]),W!==0){const ge=t.isHorizontal()&&w?"marginLeft":t.getDirectionLabel("marginRight");B.filter((Xe,rt)=>!s.cssMode||s.loop?!0:rt!==B.length-1).forEach(Xe=>{Xe.style[ge]=`${W}px`})}if(s.centeredSlides&&s.centeredSlidesBounds){let ge=0;Z.forEach(rt=>{ge+=rt+(W||0)}),ge-=W;const Xe=ge-g;O=O.map(rt=>rt<=0?-H:rt>Xe?Xe+te:rt)}if(s.centerInsufficientSlides){let ge=0;if(Z.forEach(Xe=>{ge+=Xe+(W||0)}),ge-=W,ge<g){const Xe=(g-ge)/2;O.forEach((rt,Ue)=>{O[Ue]=rt-Xe}),j.forEach((rt,Ue)=>{j[Ue]=rt+Xe})}}if(Object.assign(t,{slides:B,snapGrid:O,slidesGrid:j,slidesSizesGrid:Z}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){ob(l,"--swiper-centered-offset-before",`${-O[0]}px`),ob(l,"--swiper-centered-offset-after",`${t.size/2-Z[Z.length-1]/2}px`);const ge=-t.snapGrid[0],Xe=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(rt=>rt+ge),t.slidesGrid=t.slidesGrid.map(rt=>rt+Xe)}if(L!==M&&t.emit("slidesLengthChange"),O.length!==J&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),j.length!==K&&t.emit("slidesGridLengthChange"),s.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!o&&!s.cssMode&&(s.effect==="slide"||s.effect==="fade")){const ge=`${s.containerModifierClass}backface-hidden`,Xe=t.el.classList.contains(ge);L<=s.maxBackfaceHiddenSlides?Xe||t.el.classList.add(ge):Xe&&t.el.classList.remove(ge)}}function XX(t){const a=this,s=[],l=a.virtual&&a.params.virtual.enabled;let f=0,g;typeof t=="number"?a.setTransition(t):t===!0&&a.setTransition(a.params.speed);const w=I=>l?a.slides[a.getSlideIndexByData(I)]:a.slides[I];if(a.params.slidesPerView!=="auto"&&a.params.slidesPerView>1)if(a.params.centeredSlides)(a.visibleSlides||[]).forEach(I=>{s.push(I)});else for(g=0;g<Math.ceil(a.params.slidesPerView);g+=1){const I=a.activeIndex+g;if(I>a.slides.length&&!l)break;s.push(w(I))}else s.push(w(a.activeIndex));for(g=0;g<s.length;g+=1)if(typeof s[g]<"u"){const I=s[g].offsetHeight;f=I>f?I:f}(f||f===0)&&(a.wrapperEl.style.height=`${f}px`)}function JX(){const t=this,a=t.slides,s=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let l=0;l<a.length;l+=1)a[l].swiperSlideOffset=(t.isHorizontal()?a[l].offsetLeft:a[l].offsetTop)-s-t.cssOverflowAdjustment()}function KX(t){t===void 0&&(t=this&&this.translate||0);const a=this,s=a.params,{slides:l,rtlTranslate:f,snapGrid:g}=a;if(l.length===0)return;typeof l[0].swiperSlideOffset>"u"&&a.updateSlidesOffset();let w=-t;f&&(w=t),l.forEach(o=>{o.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass)}),a.visibleSlidesIndexes=[],a.visibleSlides=[];let I=s.spaceBetween;typeof I=="string"&&I.indexOf("%")>=0?I=parseFloat(I.replace("%",""))/100*a.size:typeof I=="string"&&(I=parseFloat(I));for(let o=0;o<l.length;o+=1){const M=l[o];let B=M.swiperSlideOffset;s.cssMode&&s.centeredSlides&&(B-=l[0].swiperSlideOffset);const L=(w+(s.centeredSlides?a.minTranslate():0)-B)/(M.swiperSlideSize+I),O=(w-g[0]+(s.centeredSlides?a.minTranslate():0)-B)/(M.swiperSlideSize+I),j=-(w-B),Z=j+a.slidesSizesGrid[o],H=j>=0&&j<=a.size-a.slidesSizesGrid[o];(j>=0&&j<a.size-1||Z>1&&Z<=a.size||j<=0&&Z>=a.size)&&(a.visibleSlides.push(M),a.visibleSlidesIndexes.push(o),l[o].classList.add(s.slideVisibleClass)),H&&l[o].classList.add(s.slideFullyVisibleClass),M.progress=f?-L:L,M.originalProgress=f?-O:O}}function QX(t){const a=this;if(typeof t>"u"){const B=a.rtlTranslate?-1:1;t=a&&a.translate&&a.translate*B||0}const s=a.params,l=a.maxTranslate()-a.minTranslate();let{progress:f,isBeginning:g,isEnd:w,progressLoop:I}=a;const o=g,M=w;if(l===0)f=0,g=!0,w=!0;else{f=(t-a.minTranslate())/l;const B=Math.abs(t-a.minTranslate())<1,L=Math.abs(t-a.maxTranslate())<1;g=B||f<=0,w=L||f>=1,B&&(f=0),L&&(f=1)}if(s.loop){const B=a.getSlideIndexByData(0),L=a.getSlideIndexByData(a.slides.length-1),O=a.slidesGrid[B],j=a.slidesGrid[L],Z=a.slidesGrid[a.slidesGrid.length-1],H=Math.abs(t);H>=O?I=(H-O)/Z:I=(H+Z-j)/Z,I>1&&(I-=1)}Object.assign(a,{progress:f,progressLoop:I,isBeginning:g,isEnd:w}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&a.updateSlidesProgress(t),g&&!o&&a.emit("reachBeginning toEdge"),w&&!M&&a.emit("reachEnd toEdge"),(o&&!g||M&&!w)&&a.emit("fromEdge"),a.emit("progress",f)}const Sv=(t,a,s)=>{a&&!t.classList.contains(s)?t.classList.add(s):!a&&t.classList.contains(s)&&t.classList.remove(s)};function eJ(){const t=this,{slides:a,params:s,slidesEl:l,activeIndex:f}=t,g=t.virtual&&s.virtual.enabled,w=t.grid&&s.grid&&s.grid.rows>1,I=L=>Bl(l,`.${s.slideClass}${L}, swiper-slide${L}`)[0];let o,M,B;if(g)if(s.loop){let L=f-t.virtual.slidesBefore;L<0&&(L=t.virtual.slides.length+L),L>=t.virtual.slides.length&&(L-=t.virtual.slides.length),o=I(`[data-swiper-slide-index="${L}"]`)}else o=I(`[data-swiper-slide-index="${f}"]`);else w?(o=a.filter(L=>L.column===f)[0],B=a.filter(L=>L.column===f+1)[0],M=a.filter(L=>L.column===f-1)[0]):o=a[f];o&&(w||(B=FX(o,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!B&&(B=a[0]),M=NX(o,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!M===0&&(M=a[a.length-1]))),a.forEach(L=>{Sv(L,L===o,s.slideActiveClass),Sv(L,L===B,s.slideNextClass),Sv(L,L===M,s.slidePrevClass)}),t.emitSlidesClasses()}const Ib=(t,a)=>{if(!t||t.destroyed||!t.params)return;const s=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,l=a.closest(s());if(l){let f=l.querySelector(`.${t.params.lazyPreloaderClass}`);!f&&t.isElement&&(l.shadowRoot?f=l.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{l.shadowRoot&&(f=l.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),f&&f.remove())})),f&&f.remove()}},Tv=(t,a)=>{if(!t.slides[a])return;const s=t.slides[a].querySelector('[loading="lazy"]');s&&s.removeAttribute("loading")},Yx=t=>{if(!t||t.destroyed||!t.params)return;let a=t.params.lazyPreloadPrevNext;const s=t.slides.length;if(!s||!a||a<0)return;a=Math.min(a,s);const l=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),f=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const w=f,I=[w-a];I.push(...Array.from({length:a}).map((o,M)=>w+l+M)),t.slides.forEach((o,M)=>{I.includes(o.column)&&Tv(t,M)});return}const g=f+l-1;if(t.params.rewind||t.params.loop)for(let w=f-a;w<=g+a;w+=1){const I=(w%s+s)%s;(I<f||I>g)&&Tv(t,I)}else for(let w=Math.max(f-a,0);w<=Math.min(g+a,s-1);w+=1)w!==f&&(w>g||w<f)&&Tv(t,w)};function tJ(t){const{slidesGrid:a,params:s}=t,l=t.rtlTranslate?t.translate:-t.translate;let f;for(let g=0;g<a.length;g+=1)typeof a[g+1]<"u"?l>=a[g]&&l<a[g+1]-(a[g+1]-a[g])/2?f=g:l>=a[g]&&l<a[g+1]&&(f=g+1):l>=a[g]&&(f=g);return s.normalizeSlideIndex&&(f<0||typeof f>"u")&&(f=0),f}function nJ(t){const a=this,s=a.rtlTranslate?a.translate:-a.translate,{snapGrid:l,params:f,activeIndex:g,realIndex:w,snapIndex:I}=a;let o=t,M;const B=j=>{let Z=j-a.virtual.slidesBefore;return Z<0&&(Z=a.virtual.slides.length+Z),Z>=a.virtual.slides.length&&(Z-=a.virtual.slides.length),Z};if(typeof o>"u"&&(o=tJ(a)),l.indexOf(s)>=0)M=l.indexOf(s);else{const j=Math.min(f.slidesPerGroupSkip,o);M=j+Math.floor((o-j)/f.slidesPerGroup)}if(M>=l.length&&(M=l.length-1),o===g&&!a.params.loop){M!==I&&(a.snapIndex=M,a.emit("snapIndexChange"));return}if(o===g&&a.params.loop&&a.virtual&&a.params.virtual.enabled){a.realIndex=B(o);return}const L=a.grid&&f.grid&&f.grid.rows>1;let O;if(a.virtual&&f.virtual.enabled&&f.loop)O=B(o);else if(L){const j=a.slides.filter(H=>H.column===o)[0];let Z=parseInt(j.getAttribute("data-swiper-slide-index"),10);Number.isNaN(Z)&&(Z=Math.max(a.slides.indexOf(j),0)),O=Math.floor(Z/f.grid.rows)}else if(a.slides[o]){const j=a.slides[o].getAttribute("data-swiper-slide-index");j?O=parseInt(j,10):O=o}else O=o;Object.assign(a,{previousSnapIndex:I,snapIndex:M,previousRealIndex:w,realIndex:O,previousIndex:g,activeIndex:o}),a.initialized&&Yx(a),a.emit("activeIndexChange"),a.emit("snapIndexChange"),(a.initialized||a.params.runCallbacksOnInit)&&(w!==O&&a.emit("realIndexChange"),a.emit("slideChange"))}function aJ(t,a){const s=this,l=s.params;let f=t.closest(`.${l.slideClass}, swiper-slide`);!f&&s.isElement&&a&&a.length>1&&a.includes(t)&&[...a.slice(a.indexOf(t)+1,a.length)].forEach(I=>{!f&&I.matches&&I.matches(`.${l.slideClass}, swiper-slide`)&&(f=I)});let g=!1,w;if(f){for(let I=0;I<s.slides.length;I+=1)if(s.slides[I]===f){g=!0,w=I;break}}if(f&&g)s.clickedSlide=f,s.virtual&&s.params.virtual.enabled?s.clickedIndex=parseInt(f.getAttribute("data-swiper-slide-index"),10):s.clickedIndex=w;else{s.clickedSlide=void 0,s.clickedIndex=void 0;return}l.slideToClickedSlide&&s.clickedIndex!==void 0&&s.clickedIndex!==s.activeIndex&&s.slideToClickedSlide()}var rJ={updateSize:ZX,updateSlides:YX,updateAutoHeight:XX,updateSlidesOffset:JX,updateSlidesProgress:KX,updateProgress:QX,updateSlidesClasses:eJ,updateActiveIndex:nJ,updateClickedSlide:aJ};function sJ(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const a=this,{params:s,rtlTranslate:l,translate:f,wrapperEl:g}=a;if(s.virtualTranslate)return l?-f:f;if(s.cssMode)return f;let w=OX(g,t);return w+=a.cssOverflowAdjustment(),l&&(w=-w),w||0}function iJ(t,a){const s=this,{rtlTranslate:l,params:f,wrapperEl:g,progress:w}=s;let I=0,o=0;const M=0;s.isHorizontal()?I=l?-t:t:o=t,f.roundLengths&&(I=Math.floor(I),o=Math.floor(o)),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?I:o,f.cssMode?g[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-I:-o:f.virtualTranslate||(s.isHorizontal()?I-=s.cssOverflowAdjustment():o-=s.cssOverflowAdjustment(),g.style.transform=`translate3d(${I}px, ${o}px, ${M}px)`);let B;const L=s.maxTranslate()-s.minTranslate();L===0?B=0:B=(t-s.minTranslate())/L,B!==w&&s.updateProgress(t),s.emit("setTranslate",s.translate,a)}function oJ(){return-this.snapGrid[0]}function cJ(){return-this.snapGrid[this.snapGrid.length-1]}function lJ(t,a,s,l,f){t===void 0&&(t=0),a===void 0&&(a=this.params.speed),s===void 0&&(s=!0),l===void 0&&(l=!0);const g=this,{params:w,wrapperEl:I}=g;if(g.animating&&w.preventInteractionOnTransition)return!1;const o=g.minTranslate(),M=g.maxTranslate();let B;if(l&&t>o?B=o:l&&t<M?B=M:B=t,g.updateProgress(B),w.cssMode){const L=g.isHorizontal();if(a===0)I[L?"scrollLeft":"scrollTop"]=-B;else{if(!g.support.smoothScroll)return cM({swiper:g,targetPosition:-B,side:L?"left":"top"}),!0;I.scrollTo({[L?"left":"top"]:-B,behavior:"smooth"})}return!0}return a===0?(g.setTransition(0),g.setTranslate(B),s&&(g.emit("beforeTransitionStart",a,f),g.emit("transitionEnd"))):(g.setTransition(a),g.setTranslate(B),s&&(g.emit("beforeTransitionStart",a,f),g.emit("transitionStart")),g.animating||(g.animating=!0,g.onTranslateToWrapperTransitionEnd||(g.onTranslateToWrapperTransitionEnd=function(O){!g||g.destroyed||O.target===this&&(g.wrapperEl.removeEventListener("transitionend",g.onTranslateToWrapperTransitionEnd),g.onTranslateToWrapperTransitionEnd=null,delete g.onTranslateToWrapperTransitionEnd,g.animating=!1,s&&g.emit("transitionEnd"))}),g.wrapperEl.addEventListener("transitionend",g.onTranslateToWrapperTransitionEnd))),!0}var uJ={getTranslate:sJ,setTranslate:iJ,minTranslate:oJ,maxTranslate:cJ,translateTo:lJ};function dJ(t,a){const s=this;s.params.cssMode||(s.wrapperEl.style.transitionDuration=`${t}ms`,s.wrapperEl.style.transitionDelay=t===0?"0ms":""),s.emit("setTransition",t,a)}function dM(t){let{swiper:a,runCallbacks:s,direction:l,step:f}=t;const{activeIndex:g,previousIndex:w}=a;let I=l;if(I||(g>w?I="next":g<w?I="prev":I="reset"),a.emit(`transition${f}`),s&&g!==w){if(I==="reset"){a.emit(`slideResetTransition${f}`);return}a.emit(`slideChangeTransition${f}`),I==="next"?a.emit(`slideNextTransition${f}`):a.emit(`slidePrevTransition${f}`)}}function pJ(t,a){t===void 0&&(t=!0);const s=this,{params:l}=s;l.cssMode||(l.autoHeight&&s.updateAutoHeight(),dM({swiper:s,runCallbacks:t,direction:a,step:"Start"}))}function fJ(t,a){t===void 0&&(t=!0);const s=this,{params:l}=s;s.animating=!1,!l.cssMode&&(s.setTransition(0),dM({swiper:s,runCallbacks:t,direction:a,step:"End"}))}var hJ={setTransition:dJ,transitionStart:pJ,transitionEnd:fJ};function mJ(t,a,s,l,f){t===void 0&&(t=0),s===void 0&&(s=!0),typeof t=="string"&&(t=parseInt(t,10));const g=this;let w=t;w<0&&(w=0);const{params:I,snapGrid:o,slidesGrid:M,previousIndex:B,activeIndex:L,rtlTranslate:O,wrapperEl:j,enabled:Z}=g;if(!Z&&!l&&!f||g.destroyed||g.animating&&I.preventInteractionOnTransition)return!1;typeof a>"u"&&(a=g.params.speed);const H=Math.min(g.params.slidesPerGroupSkip,w);let te=H+Math.floor((w-H)/g.params.slidesPerGroup);te>=o.length&&(te=o.length-1);const J=-o[te];if(I.normalizeSlideIndex)for(let W=0;W<M.length;W+=1){const ee=-Math.floor(J*100),me=Math.floor(M[W]*100),Se=Math.floor(M[W+1]*100);typeof M[W+1]<"u"?ee>=me&&ee<Se-(Se-me)/2?w=W:ee>=me&&ee<Se&&(w=W+1):ee>=me&&(w=W)}if(g.initialized&&w!==L&&(!g.allowSlideNext&&(O?J>g.translate&&J>g.minTranslate():J<g.translate&&J<g.minTranslate())||!g.allowSlidePrev&&J>g.translate&&J>g.maxTranslate()&&(L||0)!==w))return!1;w!==(B||0)&&s&&g.emit("beforeSlideChangeStart"),g.updateProgress(J);let K;if(w>L?K="next":w<L?K="prev":K="reset",O&&-J===g.translate||!O&&J===g.translate)return g.updateActiveIndex(w),I.autoHeight&&g.updateAutoHeight(),g.updateSlidesClasses(),I.effect!=="slide"&&g.setTranslate(J),K!=="reset"&&(g.transitionStart(s,K),g.transitionEnd(s,K)),!1;if(I.cssMode){const W=g.isHorizontal(),ee=O?J:-J;if(a===0){const me=g.virtual&&g.params.virtual.enabled;me&&(g.wrapperEl.style.scrollSnapType="none",g._immediateVirtual=!0),me&&!g._cssModeVirtualInitialSet&&g.params.initialSlide>0?(g._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{j[W?"scrollLeft":"scrollTop"]=ee})):j[W?"scrollLeft":"scrollTop"]=ee,me&&requestAnimationFrame(()=>{g.wrapperEl.style.scrollSnapType="",g._immediateVirtual=!1})}else{if(!g.support.smoothScroll)return cM({swiper:g,targetPosition:ee,side:W?"left":"top"}),!0;j.scrollTo({[W?"left":"top"]:ee,behavior:"smooth"})}return!0}return g.setTransition(a),g.setTranslate(J),g.updateActiveIndex(w),g.updateSlidesClasses(),g.emit("beforeTransitionStart",a,l),g.transitionStart(s,K),a===0?g.transitionEnd(s,K):g.animating||(g.animating=!0,g.onSlideToWrapperTransitionEnd||(g.onSlideToWrapperTransitionEnd=function(ee){!g||g.destroyed||ee.target===this&&(g.wrapperEl.removeEventListener("transitionend",g.onSlideToWrapperTransitionEnd),g.onSlideToWrapperTransitionEnd=null,delete g.onSlideToWrapperTransitionEnd,g.transitionEnd(s,K))}),g.wrapperEl.addEventListener("transitionend",g.onSlideToWrapperTransitionEnd)),!0}function gJ(t,a,s,l){t===void 0&&(t=0),s===void 0&&(s=!0),typeof t=="string"&&(t=parseInt(t,10));const f=this;if(f.destroyed)return;typeof a>"u"&&(a=f.params.speed);const g=f.grid&&f.params.grid&&f.params.grid.rows>1;let w=t;if(f.params.loop)if(f.virtual&&f.params.virtual.enabled)w=w+f.virtual.slidesBefore;else{let I;if(g){const O=w*f.params.grid.rows;I=f.slides.filter(j=>j.getAttribute("data-swiper-slide-index")*1===O)[0].column}else I=f.getSlideIndexByData(w);const o=g?Math.ceil(f.slides.length/f.params.grid.rows):f.slides.length,{centeredSlides:M}=f.params;let B=f.params.slidesPerView;B==="auto"?B=f.slidesPerViewDynamic():(B=Math.ceil(parseFloat(f.params.slidesPerView,10)),M&&B%2===0&&(B=B+1));let L=o-I<B;if(M&&(L=L||I<Math.ceil(B/2)),l&&M&&f.params.slidesPerView!=="auto"&&!g&&(L=!1),L){const O=M?I<f.activeIndex?"prev":"next":I-f.activeIndex-1<f.params.slidesPerView?"next":"prev";f.loopFix({direction:O,slideTo:!0,activeSlideIndex:O==="next"?I+1:I-o+1,slideRealIndex:O==="next"?f.realIndex:void 0})}if(g){const O=w*f.params.grid.rows;w=f.slides.filter(j=>j.getAttribute("data-swiper-slide-index")*1===O)[0].column}else w=f.getSlideIndexByData(w)}return requestAnimationFrame(()=>{f.slideTo(w,a,s,l)}),f}function bJ(t,a,s){a===void 0&&(a=!0);const l=this,{enabled:f,params:g,animating:w}=l;if(!f||l.destroyed)return l;typeof t>"u"&&(t=l.params.speed);let I=g.slidesPerGroup;g.slidesPerView==="auto"&&g.slidesPerGroup===1&&g.slidesPerGroupAuto&&(I=Math.max(l.slidesPerViewDynamic("current",!0),1));const o=l.activeIndex<g.slidesPerGroupSkip?1:I,M=l.virtual&&g.virtual.enabled;if(g.loop){if(w&&!M&&g.loopPreventsSliding)return!1;if(l.loopFix({direction:"next"}),l._clientLeft=l.wrapperEl.clientLeft,l.activeIndex===l.slides.length-1&&g.cssMode)return requestAnimationFrame(()=>{l.slideTo(l.activeIndex+o,t,a,s)}),!0}return g.rewind&&l.isEnd?l.slideTo(0,t,a,s):l.slideTo(l.activeIndex+o,t,a,s)}function _J(t,a,s){a===void 0&&(a=!0);const l=this,{params:f,snapGrid:g,slidesGrid:w,rtlTranslate:I,enabled:o,animating:M}=l;if(!o||l.destroyed)return l;typeof t>"u"&&(t=l.params.speed);const B=l.virtual&&f.virtual.enabled;if(f.loop){if(M&&!B&&f.loopPreventsSliding)return!1;l.loopFix({direction:"prev"}),l._clientLeft=l.wrapperEl.clientLeft}const L=I?l.translate:-l.translate;function O(J){return J<0?-Math.floor(Math.abs(J)):Math.floor(J)}const j=O(L),Z=g.map(J=>O(J));let H=g[Z.indexOf(j)-1];if(typeof H>"u"&&f.cssMode){let J;g.forEach((K,W)=>{j>=K&&(J=W)}),typeof J<"u"&&(H=g[J>0?J-1:J])}let te=0;if(typeof H<"u"&&(te=w.indexOf(H),te<0&&(te=l.activeIndex-1),f.slidesPerView==="auto"&&f.slidesPerGroup===1&&f.slidesPerGroupAuto&&(te=te-l.slidesPerViewDynamic("previous",!0)+1,te=Math.max(te,0))),f.rewind&&l.isBeginning){const J=l.params.virtual&&l.params.virtual.enabled&&l.virtual?l.virtual.slides.length-1:l.slides.length-1;return l.slideTo(J,t,a,s)}else if(f.loop&&l.activeIndex===0&&f.cssMode)return requestAnimationFrame(()=>{l.slideTo(te,t,a,s)}),!0;return l.slideTo(te,t,a,s)}function yJ(t,a,s){a===void 0&&(a=!0);const l=this;if(!l.destroyed)return typeof t>"u"&&(t=l.params.speed),l.slideTo(l.activeIndex,t,a,s)}function vJ(t,a,s,l){a===void 0&&(a=!0),l===void 0&&(l=.5);const f=this;if(f.destroyed)return;typeof t>"u"&&(t=f.params.speed);let g=f.activeIndex;const w=Math.min(f.params.slidesPerGroupSkip,g),I=w+Math.floor((g-w)/f.params.slidesPerGroup),o=f.rtlTranslate?f.translate:-f.translate;if(o>=f.snapGrid[I]){const M=f.snapGrid[I],B=f.snapGrid[I+1];o-M>(B-M)*l&&(g+=f.params.slidesPerGroup)}else{const M=f.snapGrid[I-1],B=f.snapGrid[I];o-M<=(B-M)*l&&(g-=f.params.slidesPerGroup)}return g=Math.max(g,0),g=Math.min(g,f.slidesGrid.length-1),f.slideTo(g,t,a,s)}function xJ(){const t=this;if(t.destroyed)return;const{params:a,slidesEl:s}=t,l=a.slidesPerView==="auto"?t.slidesPerViewDynamic():a.slidesPerView;let f=t.clickedIndex,g;const w=t.isElement?"swiper-slide":`.${a.slideClass}`;if(a.loop){if(t.animating)return;g=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),a.centeredSlides?f<t.loopedSlides-l/2||f>t.slides.length-t.loopedSlides+l/2?(t.loopFix(),f=t.getSlideIndex(Bl(s,`${w}[data-swiper-slide-index="${g}"]`)[0]),Hx(()=>{t.slideTo(f)})):t.slideTo(f):f>t.slides.length-l?(t.loopFix(),f=t.getSlideIndex(Bl(s,`${w}[data-swiper-slide-index="${g}"]`)[0]),Hx(()=>{t.slideTo(f)})):t.slideTo(f)}else t.slideTo(f)}var wJ={slideTo:mJ,slideToLoop:gJ,slideNext:bJ,slidePrev:_J,slideReset:yJ,slideToClosest:vJ,slideToClickedSlide:xJ};function SJ(t){const a=this,{params:s,slidesEl:l}=a;if(!s.loop||a.virtual&&a.params.virtual.enabled)return;const f=()=>{Bl(l,`.${s.slideClass}, swiper-slide`).forEach((L,O)=>{L.setAttribute("data-swiper-slide-index",O)})},g=a.grid&&s.grid&&s.grid.rows>1,w=s.slidesPerGroup*(g?s.grid.rows:1),I=a.slides.length%w!==0,o=g&&a.slides.length%s.grid.rows!==0,M=B=>{for(let L=0;L<B;L+=1){const O=a.isElement?Zx("swiper-slide",[s.slideBlankClass]):Zx("div",[s.slideClass,s.slideBlankClass]);a.slidesEl.append(O)}};if(I){if(s.loopAddBlankSlides){const B=w-a.slides.length%w;M(B),a.recalcSlides(),a.updateSlides()}else b_("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");f()}else if(o){if(s.loopAddBlankSlides){const B=s.grid.rows-a.slides.length%s.grid.rows;M(B),a.recalcSlides(),a.updateSlides()}else b_("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");f()}else f();a.loopFix({slideRealIndex:t,direction:s.centeredSlides?void 0:"next"})}function TJ(t){let{slideRealIndex:a,slideTo:s=!0,direction:l,setTranslate:f,activeSlideIndex:g,byController:w,byMousewheel:I}=t===void 0?{}:t;const o=this;if(!o.params.loop)return;o.emit("beforeLoopFix");const{slides:M,allowSlidePrev:B,allowSlideNext:L,slidesEl:O,params:j}=o,{centeredSlides:Z}=j;if(o.allowSlidePrev=!0,o.allowSlideNext=!0,o.virtual&&j.virtual.enabled){s&&(!j.centeredSlides&&o.snapIndex===0?o.slideTo(o.virtual.slides.length,0,!1,!0):j.centeredSlides&&o.snapIndex<j.slidesPerView?o.slideTo(o.virtual.slides.length+o.snapIndex,0,!1,!0):o.snapIndex===o.snapGrid.length-1&&o.slideTo(o.virtual.slidesBefore,0,!1,!0)),o.allowSlidePrev=B,o.allowSlideNext=L,o.emit("loopFix");return}let H=j.slidesPerView;H==="auto"?H=o.slidesPerViewDynamic():(H=Math.ceil(parseFloat(j.slidesPerView,10)),Z&&H%2===0&&(H=H+1));const te=j.slidesPerGroupAuto?H:j.slidesPerGroup;let J=te;J%te!==0&&(J+=te-J%te),J+=j.loopAdditionalSlides,o.loopedSlides=J;const K=o.grid&&j.grid&&j.grid.rows>1;M.length<H+J?b_("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):K&&j.grid.fill==="row"&&b_("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const W=[],ee=[];let me=o.activeIndex;typeof g>"u"?g=o.getSlideIndex(M.filter(Ue=>Ue.classList.contains(j.slideActiveClass))[0]):me=g;const Se=l==="next"||!l,Me=l==="prev"||!l;let Ie=0,Ge=0;const ge=K?Math.ceil(M.length/j.grid.rows):M.length,rt=(K?M[g].column:g)+(Z&&typeof f>"u"?-H/2+.5:0);if(rt<J){Ie=Math.max(J-rt,te);for(let Ue=0;Ue<J-rt;Ue+=1){const Bt=Ue-Math.floor(Ue/ge)*ge;if(K){const un=ge-Bt-1;for(let Tn=M.length-1;Tn>=0;Tn-=1)M[Tn].column===un&&W.push(Tn)}else W.push(ge-Bt-1)}}else if(rt+H>ge-J){Ge=Math.max(rt-(ge-J*2),te);for(let Ue=0;Ue<Ge;Ue+=1){const Bt=Ue-Math.floor(Ue/ge)*ge;K?M.forEach((un,Tn)=>{un.column===Bt&&ee.push(Tn)}):ee.push(Bt)}}if(o.__preventObserver__=!0,requestAnimationFrame(()=>{o.__preventObserver__=!1}),Me&&W.forEach(Ue=>{M[Ue].swiperLoopMoveDOM=!0,O.prepend(M[Ue]),M[Ue].swiperLoopMoveDOM=!1}),Se&&ee.forEach(Ue=>{M[Ue].swiperLoopMoveDOM=!0,O.append(M[Ue]),M[Ue].swiperLoopMoveDOM=!1}),o.recalcSlides(),j.slidesPerView==="auto"?o.updateSlides():K&&(W.length>0&&Me||ee.length>0&&Se)&&o.slides.forEach((Ue,Bt)=>{o.grid.updateSlide(Bt,Ue,o.slides)}),j.watchSlidesProgress&&o.updateSlidesOffset(),s){if(W.length>0&&Me){if(typeof a>"u"){const Ue=o.slidesGrid[me],un=o.slidesGrid[me+Ie]-Ue;I?o.setTranslate(o.translate-un):(o.slideTo(me+Math.ceil(Ie),0,!1,!0),f&&(o.touchEventsData.startTranslate=o.touchEventsData.startTranslate-un,o.touchEventsData.currentTranslate=o.touchEventsData.currentTranslate-un))}else if(f){const Ue=K?W.length/j.grid.rows:W.length;o.slideTo(o.activeIndex+Ue,0,!1,!0),o.touchEventsData.currentTranslate=o.translate}}else if(ee.length>0&&Se)if(typeof a>"u"){const Ue=o.slidesGrid[me],un=o.slidesGrid[me-Ge]-Ue;I?o.setTranslate(o.translate-un):(o.slideTo(me-Ge,0,!1,!0),f&&(o.touchEventsData.startTranslate=o.touchEventsData.startTranslate-un,o.touchEventsData.currentTranslate=o.touchEventsData.currentTranslate-un))}else{const Ue=K?ee.length/j.grid.rows:ee.length;o.slideTo(o.activeIndex-Ue,0,!1,!0)}}if(o.allowSlidePrev=B,o.allowSlideNext=L,o.controller&&o.controller.control&&!w){const Ue={slideRealIndex:a,direction:l,setTranslate:f,activeSlideIndex:g,byController:!0};Array.isArray(o.controller.control)?o.controller.control.forEach(Bt=>{!Bt.destroyed&&Bt.params.loop&&Bt.loopFix({...Ue,slideTo:Bt.params.slidesPerView===j.slidesPerView?s:!1})}):o.controller.control instanceof o.constructor&&o.controller.control.params.loop&&o.controller.control.loopFix({...Ue,slideTo:o.controller.control.params.slidesPerView===j.slidesPerView?s:!1})}o.emit("loopFix")}function EJ(){const t=this,{params:a,slidesEl:s}=t;if(!a.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const l=[];t.slides.forEach(f=>{const g=typeof f.swiperSlideIndex>"u"?f.getAttribute("data-swiper-slide-index")*1:f.swiperSlideIndex;l[g]=f}),t.slides.forEach(f=>{f.removeAttribute("data-swiper-slide-index")}),l.forEach(f=>{s.append(f)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var IJ={loopCreate:SJ,loopFix:TJ,loopDestroy:EJ};function PJ(t){const a=this;if(!a.params.simulateTouch||a.params.watchOverflow&&a.isLocked||a.params.cssMode)return;const s=a.params.touchEventsTarget==="container"?a.el:a.wrapperEl;a.isElement&&(a.__preventObserver__=!0),s.style.cursor="move",s.style.cursor=t?"grabbing":"grab",a.isElement&&requestAnimationFrame(()=>{a.__preventObserver__=!1})}function zJ(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var AJ={setGrabCursor:PJ,unsetGrabCursor:zJ};function CJ(t,a){a===void 0&&(a=this);function s(l){if(!l||l===lh()||l===ho())return null;l.assignedSlot&&(l=l.assignedSlot);const f=l.closest(t);return!f&&!l.getRootNode?null:f||s(l.getRootNode().host)}return s(a)}function UE(t,a,s){const l=ho(),{params:f}=t,g=f.edgeSwipeDetection,w=f.edgeSwipeThreshold;return g&&(s<=w||s>=l.innerWidth-w)?g==="prevent"?(a.preventDefault(),!0):!1:!0}function MJ(t){const a=this,s=lh();let l=t;l.originalEvent&&(l=l.originalEvent);const f=a.touchEventsData;if(l.type==="pointerdown"){if(f.pointerId!==null&&f.pointerId!==l.pointerId)return;f.pointerId=l.pointerId}else l.type==="touchstart"&&l.targetTouches.length===1&&(f.touchId=l.targetTouches[0].identifier);if(l.type==="touchstart"){UE(a,l,l.targetTouches[0].pageX);return}const{params:g,touches:w,enabled:I}=a;if(!I||!g.simulateTouch&&l.pointerType==="mouse"||a.animating&&g.preventInteractionOnTransition)return;!a.animating&&g.cssMode&&g.loop&&a.loopFix();let o=l.target;if(g.touchEventsTarget==="wrapper"&&!a.wrapperEl.contains(o)||"which"in l&&l.which===3||"button"in l&&l.button>0||f.isTouched&&f.isMoved)return;const M=!!g.noSwipingClass&&g.noSwipingClass!=="",B=l.composedPath?l.composedPath():l.path;M&&l.target&&l.target.shadowRoot&&B&&(o=B[0]);const L=g.noSwipingSelector?g.noSwipingSelector:`.${g.noSwipingClass}`,O=!!(l.target&&l.target.shadowRoot);if(g.noSwiping&&(O?CJ(L,o):o.closest(L))){a.allowClick=!0;return}if(g.swipeHandler&&!o.closest(g.swipeHandler))return;w.currentX=l.pageX,w.currentY=l.pageY;const j=w.currentX,Z=w.currentY;if(!UE(a,l,j))return;Object.assign(f,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),w.startX=j,w.startY=Z,f.touchStartTime=g_(),a.allowClick=!0,a.updateSize(),a.swipeDirection=void 0,g.threshold>0&&(f.allowThresholdMove=!1);let H=!0;o.matches(f.focusableElements)&&(H=!1,o.nodeName==="SELECT"&&(f.isTouched=!1)),s.activeElement&&s.activeElement.matches(f.focusableElements)&&s.activeElement!==o&&s.activeElement.blur();const te=H&&a.allowTouchMove&&g.touchStartPreventDefault;(g.touchStartForcePreventDefault||te)&&!o.isContentEditable&&l.preventDefault(),g.freeMode&&g.freeMode.enabled&&a.freeMode&&a.animating&&!g.cssMode&&a.freeMode.onTouchStart(),a.emit("touchStart",l)}function RJ(t){const a=lh(),s=this,l=s.touchEventsData,{params:f,touches:g,rtlTranslate:w,enabled:I}=s;if(!I||!f.simulateTouch&&t.pointerType==="mouse")return;let o=t;if(o.originalEvent&&(o=o.originalEvent),o.type==="pointermove"&&(l.touchId!==null||o.pointerId!==l.pointerId))return;let M;if(o.type==="touchmove"){if(M=[...o.changedTouches].filter(Se=>Se.identifier===l.touchId)[0],!M||M.identifier!==l.touchId)return}else M=o;if(!l.isTouched){l.startMoving&&l.isScrolling&&s.emit("touchMoveOpposite",o);return}const B=M.pageX,L=M.pageY;if(o.preventedByNestedSwiper){g.startX=B,g.startY=L;return}if(!s.allowTouchMove){o.target.matches(l.focusableElements)||(s.allowClick=!1),l.isTouched&&(Object.assign(g,{startX:B,startY:L,currentX:B,currentY:L}),l.touchStartTime=g_());return}if(f.touchReleaseOnEdges&&!f.loop){if(s.isVertical()){if(L<g.startY&&s.translate<=s.maxTranslate()||L>g.startY&&s.translate>=s.minTranslate()){l.isTouched=!1,l.isMoved=!1;return}}else if(B<g.startX&&s.translate<=s.maxTranslate()||B>g.startX&&s.translate>=s.minTranslate())return}if(a.activeElement&&o.target===a.activeElement&&o.target.matches(l.focusableElements)){l.isMoved=!0,s.allowClick=!1;return}l.allowTouchCallbacks&&s.emit("touchMove",o),g.previousX=g.currentX,g.previousY=g.currentY,g.currentX=B,g.currentY=L;const O=g.currentX-g.startX,j=g.currentY-g.startY;if(s.params.threshold&&Math.sqrt(O**2+j**2)<s.params.threshold)return;if(typeof l.isScrolling>"u"){let Se;s.isHorizontal()&&g.currentY===g.startY||s.isVertical()&&g.currentX===g.startX?l.isScrolling=!1:O*O+j*j>=25&&(Se=Math.atan2(Math.abs(j),Math.abs(O))*180/Math.PI,l.isScrolling=s.isHorizontal()?Se>f.touchAngle:90-Se>f.touchAngle)}if(l.isScrolling&&s.emit("touchMoveOpposite",o),typeof l.startMoving>"u"&&(g.currentX!==g.startX||g.currentY!==g.startY)&&(l.startMoving=!0),l.isScrolling||o.type==="touchmove"&&l.preventTouchMoveFromPointerMove){l.isTouched=!1;return}if(!l.startMoving)return;s.allowClick=!1,!f.cssMode&&o.cancelable&&o.preventDefault(),f.touchMoveStopPropagation&&!f.nested&&o.stopPropagation();let Z=s.isHorizontal()?O:j,H=s.isHorizontal()?g.currentX-g.previousX:g.currentY-g.previousY;f.oneWayMovement&&(Z=Math.abs(Z)*(w?1:-1),H=Math.abs(H)*(w?1:-1)),g.diff=Z,Z*=f.touchRatio,w&&(Z=-Z,H=-H);const te=s.touchesDirection;s.swipeDirection=Z>0?"prev":"next",s.touchesDirection=H>0?"prev":"next";const J=s.params.loop&&!f.cssMode,K=s.touchesDirection==="next"&&s.allowSlideNext||s.touchesDirection==="prev"&&s.allowSlidePrev;if(!l.isMoved){if(J&&K&&s.loopFix({direction:s.swipeDirection}),l.startTranslate=s.getTranslate(),s.setTransition(0),s.animating){const Se=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});s.wrapperEl.dispatchEvent(Se)}l.allowMomentumBounce=!1,f.grabCursor&&(s.allowSlideNext===!0||s.allowSlidePrev===!0)&&s.setGrabCursor(!0),s.emit("sliderFirstMove",o)}let W;if(new Date().getTime(),l.isMoved&&l.allowThresholdMove&&te!==s.touchesDirection&&J&&K&&Math.abs(Z)>=1){Object.assign(g,{startX:B,startY:L,currentX:B,currentY:L,startTranslate:l.currentTranslate}),l.loopSwapReset=!0,l.startTranslate=l.currentTranslate;return}s.emit("sliderMove",o),l.isMoved=!0,l.currentTranslate=Z+l.startTranslate;let ee=!0,me=f.resistanceRatio;if(f.touchReleaseOnEdges&&(me=0),Z>0?(J&&K&&!W&&l.allowThresholdMove&&l.currentTranslate>(f.centeredSlides?s.minTranslate()-s.slidesSizesGrid[s.activeIndex+1]:s.minTranslate())&&s.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),l.currentTranslate>s.minTranslate()&&(ee=!1,f.resistance&&(l.currentTranslate=s.minTranslate()-1+(-s.minTranslate()+l.startTranslate+Z)**me))):Z<0&&(J&&K&&!W&&l.allowThresholdMove&&l.currentTranslate<(f.centeredSlides?s.maxTranslate()+s.slidesSizesGrid[s.slidesSizesGrid.length-1]:s.maxTranslate())&&s.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:s.slides.length-(f.slidesPerView==="auto"?s.slidesPerViewDynamic():Math.ceil(parseFloat(f.slidesPerView,10)))}),l.currentTranslate<s.maxTranslate()&&(ee=!1,f.resistance&&(l.currentTranslate=s.maxTranslate()+1-(s.maxTranslate()-l.startTranslate-Z)**me))),ee&&(o.preventedByNestedSwiper=!0),!s.allowSlideNext&&s.swipeDirection==="next"&&l.currentTranslate<l.startTranslate&&(l.currentTranslate=l.startTranslate),!s.allowSlidePrev&&s.swipeDirection==="prev"&&l.currentTranslate>l.startTranslate&&(l.currentTranslate=l.startTranslate),!s.allowSlidePrev&&!s.allowSlideNext&&(l.currentTranslate=l.startTranslate),f.threshold>0)if(Math.abs(Z)>f.threshold||l.allowThresholdMove){if(!l.allowThresholdMove){l.allowThresholdMove=!0,g.startX=g.currentX,g.startY=g.currentY,l.currentTranslate=l.startTranslate,g.diff=s.isHorizontal()?g.currentX-g.startX:g.currentY-g.startY;return}}else{l.currentTranslate=l.startTranslate;return}!f.followFinger||f.cssMode||((f.freeMode&&f.freeMode.enabled&&s.freeMode||f.watchSlidesProgress)&&(s.updateActiveIndex(),s.updateSlidesClasses()),f.freeMode&&f.freeMode.enabled&&s.freeMode&&s.freeMode.onTouchMove(),s.updateProgress(l.currentTranslate),s.setTranslate(l.currentTranslate))}function kJ(t){const a=this,s=a.touchEventsData;let l=t;l.originalEvent&&(l=l.originalEvent);let f;if(l.type==="touchend"||l.type==="touchcancel"){if(f=[...l.changedTouches].filter(me=>me.identifier===s.touchId)[0],!f||f.identifier!==s.touchId)return}else{if(s.touchId!==null||l.pointerId!==s.pointerId)return;f=l}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(l.type)&&!(["pointercancel","contextmenu"].includes(l.type)&&(a.browser.isSafari||a.browser.isWebView)))return;s.pointerId=null,s.touchId=null;const{params:w,touches:I,rtlTranslate:o,slidesGrid:M,enabled:B}=a;if(!B||!w.simulateTouch&&l.pointerType==="mouse")return;if(s.allowTouchCallbacks&&a.emit("touchEnd",l),s.allowTouchCallbacks=!1,!s.isTouched){s.isMoved&&w.grabCursor&&a.setGrabCursor(!1),s.isMoved=!1,s.startMoving=!1;return}w.grabCursor&&s.isMoved&&s.isTouched&&(a.allowSlideNext===!0||a.allowSlidePrev===!0)&&a.setGrabCursor(!1);const L=g_(),O=L-s.touchStartTime;if(a.allowClick){const me=l.path||l.composedPath&&l.composedPath();a.updateClickedSlide(me&&me[0]||l.target,me),a.emit("tap click",l),O<300&&L-s.lastClickTime<300&&a.emit("doubleTap doubleClick",l)}if(s.lastClickTime=g_(),Hx(()=>{a.destroyed||(a.allowClick=!0)}),!s.isTouched||!s.isMoved||!a.swipeDirection||I.diff===0&&!s.loopSwapReset||s.currentTranslate===s.startTranslate&&!s.loopSwapReset){s.isTouched=!1,s.isMoved=!1,s.startMoving=!1;return}s.isTouched=!1,s.isMoved=!1,s.startMoving=!1;let j;if(w.followFinger?j=o?a.translate:-a.translate:j=-s.currentTranslate,w.cssMode)return;if(w.freeMode&&w.freeMode.enabled){a.freeMode.onTouchEnd({currentPos:j});return}const Z=j>=-a.maxTranslate()&&!a.params.loop;let H=0,te=a.slidesSizesGrid[0];for(let me=0;me<M.length;me+=me<w.slidesPerGroupSkip?1:w.slidesPerGroup){const Se=me<w.slidesPerGroupSkip-1?1:w.slidesPerGroup;typeof M[me+Se]<"u"?(Z||j>=M[me]&&j<M[me+Se])&&(H=me,te=M[me+Se]-M[me]):(Z||j>=M[me])&&(H=me,te=M[M.length-1]-M[M.length-2])}let J=null,K=null;w.rewind&&(a.isBeginning?K=w.virtual&&w.virtual.enabled&&a.virtual?a.virtual.slides.length-1:a.slides.length-1:a.isEnd&&(J=0));const W=(j-M[H])/te,ee=H<w.slidesPerGroupSkip-1?1:w.slidesPerGroup;if(O>w.longSwipesMs){if(!w.longSwipes){a.slideTo(a.activeIndex);return}a.swipeDirection==="next"&&(W>=w.longSwipesRatio?a.slideTo(w.rewind&&a.isEnd?J:H+ee):a.slideTo(H)),a.swipeDirection==="prev"&&(W>1-w.longSwipesRatio?a.slideTo(H+ee):K!==null&&W<0&&Math.abs(W)>w.longSwipesRatio?a.slideTo(K):a.slideTo(H))}else{if(!w.shortSwipes){a.slideTo(a.activeIndex);return}a.navigation&&(l.target===a.navigation.nextEl||l.target===a.navigation.prevEl)?l.target===a.navigation.nextEl?a.slideTo(H+ee):a.slideTo(H):(a.swipeDirection==="next"&&a.slideTo(J!==null?J:H+ee),a.swipeDirection==="prev"&&a.slideTo(K!==null?K:H))}}function VE(){const t=this,{params:a,el:s}=t;if(s&&s.offsetWidth===0)return;a.breakpoints&&t.setBreakpoint();const{allowSlideNext:l,allowSlidePrev:f,snapGrid:g}=t,w=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const I=w&&a.loop;(a.slidesPerView==="auto"||a.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!I?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!w?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=f,t.allowSlideNext=l,t.params.watchOverflow&&g!==t.snapGrid&&t.checkOverflow()}function LJ(t){const a=this;a.enabled&&(a.allowClick||(a.params.preventClicks&&t.preventDefault(),a.params.preventClicksPropagation&&a.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function DJ(){const t=this,{wrapperEl:a,rtlTranslate:s,enabled:l}=t;if(!l)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-a.scrollLeft:t.translate=-a.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let f;const g=t.maxTranslate()-t.minTranslate();g===0?f=0:f=(t.translate-t.minTranslate())/g,f!==t.progress&&t.updateProgress(s?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function OJ(t){const a=this;Ib(a,t.target),!(a.params.cssMode||a.params.slidesPerView!=="auto"&&!a.params.autoHeight)&&a.update()}function BJ(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const pM=(t,a)=>{const s=lh(),{params:l,el:f,wrapperEl:g,device:w}=t,I=!!l.nested,o=a==="on"?"addEventListener":"removeEventListener",M=a;s[o]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:I}),f[o]("touchstart",t.onTouchStart,{passive:!1}),f[o]("pointerdown",t.onTouchStart,{passive:!1}),s[o]("touchmove",t.onTouchMove,{passive:!1,capture:I}),s[o]("pointermove",t.onTouchMove,{passive:!1,capture:I}),s[o]("touchend",t.onTouchEnd,{passive:!0}),s[o]("pointerup",t.onTouchEnd,{passive:!0}),s[o]("pointercancel",t.onTouchEnd,{passive:!0}),s[o]("touchcancel",t.onTouchEnd,{passive:!0}),s[o]("pointerout",t.onTouchEnd,{passive:!0}),s[o]("pointerleave",t.onTouchEnd,{passive:!0}),s[o]("contextmenu",t.onTouchEnd,{passive:!0}),(l.preventClicks||l.preventClicksPropagation)&&f[o]("click",t.onClick,!0),l.cssMode&&g[o]("scroll",t.onScroll),l.updateOnWindowResize?t[M](w.ios||w.android?"resize orientationchange observerUpdate":"resize observerUpdate",VE,!0):t[M]("observerUpdate",VE,!0),f[o]("load",t.onLoad,{capture:!0})};function NJ(){const t=this,{params:a}=t;t.onTouchStart=MJ.bind(t),t.onTouchMove=RJ.bind(t),t.onTouchEnd=kJ.bind(t),t.onDocumentTouchStart=BJ.bind(t),a.cssMode&&(t.onScroll=DJ.bind(t)),t.onClick=LJ.bind(t),t.onLoad=OJ.bind(t),pM(t,"on")}function FJ(){pM(this,"off")}var jJ={attachEvents:NJ,detachEvents:FJ};const GE=(t,a)=>t.grid&&a.grid&&a.grid.rows>1;function UJ(){const t=this,{realIndex:a,initialized:s,params:l,el:f}=t,g=l.breakpoints;if(!g||g&&Object.keys(g).length===0)return;const w=t.getBreakpoint(g,t.params.breakpointsBase,t.el);if(!w||t.currentBreakpoint===w)return;const o=(w in g?g[w]:void 0)||t.originalParams,M=GE(t,l),B=GE(t,o),L=t.params.grabCursor,O=o.grabCursor,j=l.enabled;M&&!B?(f.classList.remove(`${l.containerModifierClass}grid`,`${l.containerModifierClass}grid-column`),t.emitContainerClasses()):!M&&B&&(f.classList.add(`${l.containerModifierClass}grid`),(o.grid.fill&&o.grid.fill==="column"||!o.grid.fill&&l.grid.fill==="column")&&f.classList.add(`${l.containerModifierClass}grid-column`),t.emitContainerClasses()),L&&!O?t.unsetGrabCursor():!L&&O&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(W=>{if(typeof o[W]>"u")return;const ee=l[W]&&l[W].enabled,me=o[W]&&o[W].enabled;ee&&!me&&t[W].disable(),!ee&&me&&t[W].enable()});const Z=o.direction&&o.direction!==l.direction,H=l.loop&&(o.slidesPerView!==l.slidesPerView||Z),te=l.loop;Z&&s&&t.changeDirection(),to(t.params,o);const J=t.params.enabled,K=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),j&&!J?t.disable():!j&&J&&t.enable(),t.currentBreakpoint=w,t.emit("_beforeBreakpoint",o),s&&(H?(t.loopDestroy(),t.loopCreate(a),t.updateSlides()):!te&&K?(t.loopCreate(a),t.updateSlides()):te&&!K&&t.loopDestroy()),t.emit("breakpoint",o)}function VJ(t,a,s){if(a===void 0&&(a="window"),!t||a==="container"&&!s)return;let l=!1;const f=ho(),g=a==="window"?f.innerHeight:s.clientHeight,w=Object.keys(t).map(I=>{if(typeof I=="string"&&I.indexOf("@")===0){const o=parseFloat(I.substr(1));return{value:g*o,point:I}}return{value:I,point:I}});w.sort((I,o)=>parseInt(I.value,10)-parseInt(o.value,10));for(let I=0;I<w.length;I+=1){const{point:o,value:M}=w[I];a==="window"?f.matchMedia(`(min-width: ${M}px)`).matches&&(l=o):M<=s.clientWidth&&(l=o)}return l||"max"}var GJ={setBreakpoint:UJ,getBreakpoint:VJ};function $J(t,a){const s=[];return t.forEach(l=>{typeof l=="object"?Object.keys(l).forEach(f=>{l[f]&&s.push(a+f)}):typeof l=="string"&&s.push(a+l)}),s}function qJ(){const t=this,{classNames:a,params:s,rtl:l,el:f,device:g}=t,w=$J(["initialized",s.direction,{"free-mode":t.params.freeMode&&s.freeMode.enabled},{autoheight:s.autoHeight},{rtl:l},{grid:s.grid&&s.grid.rows>1},{"grid-column":s.grid&&s.grid.rows>1&&s.grid.fill==="column"},{android:g.android},{ios:g.ios},{"css-mode":s.cssMode},{centered:s.cssMode&&s.centeredSlides},{"watch-progress":s.watchSlidesProgress}],s.containerModifierClass);a.push(...w),f.classList.add(...a),t.emitContainerClasses()}function WJ(){const t=this,{el:a,classNames:s}=t;a.classList.remove(...s),t.emitContainerClasses()}var HJ={addClasses:qJ,removeClasses:WJ};function ZJ(){const t=this,{isLocked:a,params:s}=t,{slidesOffsetBefore:l}=s;if(l){const f=t.slides.length-1,g=t.slidesGrid[f]+t.slidesSizesGrid[f]+l*2;t.isLocked=t.size>g}else t.isLocked=t.snapGrid.length===1;s.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),s.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),a&&a!==t.isLocked&&(t.isEnd=!1),a!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var YJ={checkOverflow:ZJ},Xx={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function XJ(t,a){return function(l){l===void 0&&(l={});const f=Object.keys(l)[0],g=l[f];if(typeof g!="object"||g===null){to(a,l);return}if(t[f]===!0&&(t[f]={enabled:!0}),f==="navigation"&&t[f]&&t[f].enabled&&!t[f].prevEl&&!t[f].nextEl&&(t[f].auto=!0),["pagination","scrollbar"].indexOf(f)>=0&&t[f]&&t[f].enabled&&!t[f].el&&(t[f].auto=!0),!(f in t&&"enabled"in g)){to(a,l);return}typeof t[f]=="object"&&!("enabled"in t[f])&&(t[f].enabled=!0),t[f]||(t[f]={enabled:!1}),to(a,l)}}const Ev={eventsEmitter:HX,update:rJ,translate:uJ,transition:hJ,slide:wJ,loop:IJ,grabCursor:AJ,events:jJ,breakpoints:GJ,checkOverflow:YJ,classes:HJ},Iv={};let W6=class Rl{constructor(){let a,s;for(var l=arguments.length,f=new Array(l),g=0;g<l;g++)f[g]=arguments[g];f.length===1&&f[0].constructor&&Object.prototype.toString.call(f[0]).slice(8,-1)==="Object"?s=f[0]:[a,s]=f,s||(s={}),s=to({},s),a&&!s.el&&(s.el=a);const w=lh();if(s.el&&typeof s.el=="string"&&w.querySelectorAll(s.el).length>1){const B=[];return w.querySelectorAll(s.el).forEach(L=>{const O=to({},s,{el:L});B.push(new Rl(O))}),B}const I=this;I.__swiper__=!0,I.support=lM(),I.device=uM({userAgent:s.userAgent}),I.browser=$X(),I.eventsListeners={},I.eventsAnyListeners=[],I.modules=[...I.__modules__],s.modules&&Array.isArray(s.modules)&&I.modules.push(...s.modules);const o={};I.modules.forEach(B=>{B({params:s,swiper:I,extendParams:XJ(s,o),on:I.on.bind(I),once:I.once.bind(I),off:I.off.bind(I),emit:I.emit.bind(I)})});const M=to({},Xx,o);return I.params=to({},M,Iv,s),I.originalParams=to({},I.params),I.passedParams=to({},s),I.params&&I.params.on&&Object.keys(I.params.on).forEach(B=>{I.on(B,I.params.on[B])}),I.params&&I.params.onAny&&I.onAny(I.params.onAny),Object.assign(I,{enabled:I.params.enabled,el:a,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return I.params.direction==="horizontal"},isVertical(){return I.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:I.params.allowSlideNext,allowSlidePrev:I.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:I.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:I.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),I.emit("_swiper"),I.params.init&&I.init(),I}getDirectionLabel(a){return this.isHorizontal()?a:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[a]}getSlideIndex(a){const{slidesEl:s,params:l}=this,f=Bl(s,`.${l.slideClass}, swiper-slide`),g=FE(f[0]);return FE(a)-g}getSlideIndexByData(a){return this.getSlideIndex(this.slides.filter(s=>s.getAttribute("data-swiper-slide-index")*1===a)[0])}recalcSlides(){const a=this,{slidesEl:s,params:l}=a;a.slides=Bl(s,`.${l.slideClass}, swiper-slide`)}enable(){const a=this;a.enabled||(a.enabled=!0,a.params.grabCursor&&a.setGrabCursor(),a.emit("enable"))}disable(){const a=this;a.enabled&&(a.enabled=!1,a.params.grabCursor&&a.unsetGrabCursor(),a.emit("disable"))}setProgress(a,s){const l=this;a=Math.min(Math.max(a,0),1);const f=l.minTranslate(),w=(l.maxTranslate()-f)*a+f;l.translateTo(w,typeof s>"u"?0:s),l.updateActiveIndex(),l.updateSlidesClasses()}emitContainerClasses(){const a=this;if(!a.params._emitClasses||!a.el)return;const s=a.el.className.split(" ").filter(l=>l.indexOf("swiper")===0||l.indexOf(a.params.containerModifierClass)===0);a.emit("_containerClasses",s.join(" "))}getSlideClasses(a){const s=this;return s.destroyed?"":a.className.split(" ").filter(l=>l.indexOf("swiper-slide")===0||l.indexOf(s.params.slideClass)===0).join(" ")}emitSlidesClasses(){const a=this;if(!a.params._emitClasses||!a.el)return;const s=[];a.slides.forEach(l=>{const f=a.getSlideClasses(l);s.push({slideEl:l,classNames:f}),a.emit("_slideClass",l,f)}),a.emit("_slideClasses",s)}slidesPerViewDynamic(a,s){a===void 0&&(a="current"),s===void 0&&(s=!1);const l=this,{params:f,slides:g,slidesGrid:w,slidesSizesGrid:I,size:o,activeIndex:M}=l;let B=1;if(typeof f.slidesPerView=="number")return f.slidesPerView;if(f.centeredSlides){let L=g[M]?Math.ceil(g[M].swiperSlideSize):0,O;for(let j=M+1;j<g.length;j+=1)g[j]&&!O&&(L+=Math.ceil(g[j].swiperSlideSize),B+=1,L>o&&(O=!0));for(let j=M-1;j>=0;j-=1)g[j]&&!O&&(L+=g[j].swiperSlideSize,B+=1,L>o&&(O=!0))}else if(a==="current")for(let L=M+1;L<g.length;L+=1)(s?w[L]+I[L]-w[M]<o:w[L]-w[M]<o)&&(B+=1);else for(let L=M-1;L>=0;L-=1)w[M]-w[L]<o&&(B+=1);return B}update(){const a=this;if(!a||a.destroyed)return;const{snapGrid:s,params:l}=a;l.breakpoints&&a.setBreakpoint(),[...a.el.querySelectorAll('[loading="lazy"]')].forEach(w=>{w.complete&&Ib(a,w)}),a.updateSize(),a.updateSlides(),a.updateProgress(),a.updateSlidesClasses();function f(){const w=a.rtlTranslate?a.translate*-1:a.translate,I=Math.min(Math.max(w,a.maxTranslate()),a.minTranslate());a.setTranslate(I),a.updateActiveIndex(),a.updateSlidesClasses()}let g;if(l.freeMode&&l.freeMode.enabled&&!l.cssMode)f(),l.autoHeight&&a.updateAutoHeight();else{if((l.slidesPerView==="auto"||l.slidesPerView>1)&&a.isEnd&&!l.centeredSlides){const w=a.virtual&&l.virtual.enabled?a.virtual.slides:a.slides;g=a.slideTo(w.length-1,0,!1,!0)}else g=a.slideTo(a.activeIndex,0,!1,!0);g||f()}l.watchOverflow&&s!==a.snapGrid&&a.checkOverflow(),a.emit("update")}changeDirection(a,s){s===void 0&&(s=!0);const l=this,f=l.params.direction;return a||(a=f==="horizontal"?"vertical":"horizontal"),a===f||a!=="horizontal"&&a!=="vertical"||(l.el.classList.remove(`${l.params.containerModifierClass}${f}`),l.el.classList.add(`${l.params.containerModifierClass}${a}`),l.emitContainerClasses(),l.params.direction=a,l.slides.forEach(g=>{a==="vertical"?g.style.width="":g.style.height=""}),l.emit("changeDirection"),s&&l.update()),l}changeLanguageDirection(a){const s=this;s.rtl&&a==="rtl"||!s.rtl&&a==="ltr"||(s.rtl=a==="rtl",s.rtlTranslate=s.params.direction==="horizontal"&&s.rtl,s.rtl?(s.el.classList.add(`${s.params.containerModifierClass}rtl`),s.el.dir="rtl"):(s.el.classList.remove(`${s.params.containerModifierClass}rtl`),s.el.dir="ltr"),s.update())}mount(a){const s=this;if(s.mounted)return!0;let l=a||s.params.el;if(typeof l=="string"&&(l=document.querySelector(l)),!l)return!1;l.swiper=s,l.parentNode&&l.parentNode.host&&l.parentNode.host.nodeName===s.params.swiperElementNodeName.toUpperCase()&&(s.isElement=!0);const f=()=>`.${(s.params.wrapperClass||"").trim().split(" ").join(".")}`;let w=l&&l.shadowRoot&&l.shadowRoot.querySelector?l.shadowRoot.querySelector(f()):Bl(l,f())[0];return!w&&s.params.createElements&&(w=Zx("div",s.params.wrapperClass),l.append(w),Bl(l,`.${s.params.slideClass}`).forEach(I=>{w.append(I)})),Object.assign(s,{el:l,wrapperEl:w,slidesEl:s.isElement&&!l.parentNode.host.slideSlots?l.parentNode.host:w,hostEl:s.isElement?l.parentNode.host:l,mounted:!0,rtl:l.dir.toLowerCase()==="rtl"||Ru(l,"direction")==="rtl",rtlTranslate:s.params.direction==="horizontal"&&(l.dir.toLowerCase()==="rtl"||Ru(l,"direction")==="rtl"),wrongRTL:Ru(w,"display")==="-webkit-box"}),!0}init(a){const s=this;if(s.initialized||s.mount(a)===!1)return s;s.emit("beforeInit"),s.params.breakpoints&&s.setBreakpoint(),s.addClasses(),s.updateSize(),s.updateSlides(),s.params.watchOverflow&&s.checkOverflow(),s.params.grabCursor&&s.enabled&&s.setGrabCursor(),s.params.loop&&s.virtual&&s.params.virtual.enabled?s.slideTo(s.params.initialSlide+s.virtual.slidesBefore,0,s.params.runCallbacksOnInit,!1,!0):s.slideTo(s.params.initialSlide,0,s.params.runCallbacksOnInit,!1,!0),s.params.loop&&s.loopCreate(),s.attachEvents();const f=[...s.el.querySelectorAll('[loading="lazy"]')];return s.isElement&&f.push(...s.hostEl.querySelectorAll('[loading="lazy"]')),f.forEach(g=>{g.complete?Ib(s,g):g.addEventListener("load",w=>{Ib(s,w.target)})}),Yx(s),s.initialized=!0,Yx(s),s.emit("init"),s.emit("afterInit"),s}destroy(a,s){a===void 0&&(a=!0),s===void 0&&(s=!0);const l=this,{params:f,el:g,wrapperEl:w,slides:I}=l;return typeof l.params>"u"||l.destroyed||(l.emit("beforeDestroy"),l.initialized=!1,l.detachEvents(),f.loop&&l.loopDestroy(),s&&(l.removeClasses(),g.removeAttribute("style"),w.removeAttribute("style"),I&&I.length&&I.forEach(o=>{o.classList.remove(f.slideVisibleClass,f.slideFullyVisibleClass,f.slideActiveClass,f.slideNextClass,f.slidePrevClass),o.removeAttribute("style"),o.removeAttribute("data-swiper-slide-index")})),l.emit("destroy"),Object.keys(l.eventsListeners).forEach(o=>{l.off(o)}),a!==!1&&(l.el.swiper=null,LX(l)),l.destroyed=!0),null}static extendDefaults(a){to(Iv,a)}static get extendedDefaults(){return Iv}static get defaults(){return Xx}static installModule(a){Rl.prototype.__modules__||(Rl.prototype.__modules__=[]);const s=Rl.prototype.__modules__;typeof a=="function"&&s.indexOf(a)<0&&s.push(a)}static use(a){return Array.isArray(a)?(a.forEach(s=>Rl.installModule(s)),Rl):(Rl.installModule(a),Rl)}};Object.keys(Ev).forEach(t=>{Object.keys(Ev[t]).forEach(a=>{W6.prototype[a]=Ev[t][a]})});W6.use([qX,WX]);const fM=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function yp(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function Nf(t,a){const s=["__proto__","constructor","prototype"];Object.keys(a).filter(l=>s.indexOf(l)<0).forEach(l=>{typeof t[l]>"u"?t[l]=a[l]:yp(a[l])&&yp(t[l])&&Object.keys(a[l]).length>0?a[l].__swiper__?t[l]=a[l]:Nf(t[l],a[l]):t[l]=a[l]})}function hM(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function mM(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function gM(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function bM(t){t===void 0&&(t="");const a=t.split(" ").map(l=>l.trim()).filter(l=>!!l),s=[];return a.forEach(l=>{s.indexOf(l)<0&&s.push(l)}),s.join(" ")}function JJ(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function KJ(t){let{swiper:a,slides:s,passedParams:l,changedParams:f,nextEl:g,prevEl:w,scrollbarEl:I,paginationEl:o}=t;const M=f.filter(Ge=>Ge!=="children"&&Ge!=="direction"&&Ge!=="wrapperClass"),{params:B,pagination:L,navigation:O,scrollbar:j,virtual:Z,thumbs:H}=a;let te,J,K,W,ee,me,Se,Me;f.includes("thumbs")&&l.thumbs&&l.thumbs.swiper&&B.thumbs&&!B.thumbs.swiper&&(te=!0),f.includes("controller")&&l.controller&&l.controller.control&&B.controller&&!B.controller.control&&(J=!0),f.includes("pagination")&&l.pagination&&(l.pagination.el||o)&&(B.pagination||B.pagination===!1)&&L&&!L.el&&(K=!0),f.includes("scrollbar")&&l.scrollbar&&(l.scrollbar.el||I)&&(B.scrollbar||B.scrollbar===!1)&&j&&!j.el&&(W=!0),f.includes("navigation")&&l.navigation&&(l.navigation.prevEl||w)&&(l.navigation.nextEl||g)&&(B.navigation||B.navigation===!1)&&O&&!O.prevEl&&!O.nextEl&&(ee=!0);const Ie=Ge=>{a[Ge]&&(a[Ge].destroy(),Ge==="navigation"?(a.isElement&&(a[Ge].prevEl.remove(),a[Ge].nextEl.remove()),B[Ge].prevEl=void 0,B[Ge].nextEl=void 0,a[Ge].prevEl=void 0,a[Ge].nextEl=void 0):(a.isElement&&a[Ge].el.remove(),B[Ge].el=void 0,a[Ge].el=void 0))};f.includes("loop")&&a.isElement&&(B.loop&&!l.loop?me=!0:!B.loop&&l.loop?Se=!0:Me=!0),M.forEach(Ge=>{if(yp(B[Ge])&&yp(l[Ge]))Object.assign(B[Ge],l[Ge]),(Ge==="navigation"||Ge==="pagination"||Ge==="scrollbar")&&"enabled"in l[Ge]&&!l[Ge].enabled&&Ie(Ge);else{const ge=l[Ge];(ge===!0||ge===!1)&&(Ge==="navigation"||Ge==="pagination"||Ge==="scrollbar")?ge===!1&&Ie(Ge):B[Ge]=l[Ge]}}),M.includes("controller")&&!J&&a.controller&&a.controller.control&&B.controller&&B.controller.control&&(a.controller.control=B.controller.control),f.includes("children")&&s&&Z&&B.virtual.enabled?(Z.slides=s,Z.update(!0)):f.includes("virtual")&&Z&&B.virtual.enabled&&(s&&(Z.slides=s),Z.update(!0)),f.includes("children")&&s&&B.loop&&(Me=!0),te&&H.init()&&H.update(!0),J&&(a.controller.control=B.controller.control),K&&(a.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-pagination"),o.part.add("pagination"),a.el.appendChild(o)),o&&(B.pagination.el=o),L.init(),L.render(),L.update()),W&&(a.isElement&&(!I||typeof I=="string")&&(I=document.createElement("div"),I.classList.add("swiper-scrollbar"),I.part.add("scrollbar"),a.el.appendChild(I)),I&&(B.scrollbar.el=I),j.init(),j.updateSize(),j.setTranslate()),ee&&(a.isElement&&((!g||typeof g=="string")&&(g=document.createElement("div"),g.classList.add("swiper-button-next"),g.innerHTML=a.hostEl.constructor.nextButtonSvg,g.part.add("button-next"),a.el.appendChild(g)),(!w||typeof w=="string")&&(w=document.createElement("div"),w.classList.add("swiper-button-prev"),w.innerHTML=a.hostEl.constructor.prevButtonSvg,w.part.add("button-prev"),a.el.appendChild(w))),g&&(B.navigation.nextEl=g),w&&(B.navigation.prevEl=w),O.init(),O.update()),f.includes("allowSlideNext")&&(a.allowSlideNext=l.allowSlideNext),f.includes("allowSlidePrev")&&(a.allowSlidePrev=l.allowSlidePrev),f.includes("direction")&&a.changeDirection(l.direction,!1),(me||Me)&&a.loopDestroy(),(Se||Me)&&a.loopCreate(),a.update()}function QJ(t,a){t===void 0&&(t={}),a===void 0&&(a=!0);const s={on:{}},l={},f={};Nf(s,Xx),s._emitClasses=!0,s.init=!1;const g={},w=fM.map(o=>o.replace(/_/,"")),I=Object.assign({},t);return Object.keys(I).forEach(o=>{typeof t[o]>"u"||(w.indexOf(o)>=0?yp(t[o])?(s[o]={},f[o]={},Nf(s[o],t[o]),Nf(f[o],t[o])):(s[o]=t[o],f[o]=t[o]):o.search(/on[A-Z]/)===0&&typeof t[o]=="function"?a?l[`${o[2].toLowerCase()}${o.substr(3)}`]=t[o]:s.on[`${o[2].toLowerCase()}${o.substr(3)}`]=t[o]:g[o]=t[o])}),["navigation","pagination","scrollbar"].forEach(o=>{s[o]===!0&&(s[o]={}),s[o]===!1&&delete s[o]}),{params:s,passedParams:f,rest:g,events:l}}function eK(t,a){let{el:s,nextEl:l,prevEl:f,paginationEl:g,scrollbarEl:w,swiper:I}=t;hM(a)&&l&&f&&(I.params.navigation.nextEl=l,I.originalParams.navigation.nextEl=l,I.params.navigation.prevEl=f,I.originalParams.navigation.prevEl=f),mM(a)&&g&&(I.params.pagination.el=g,I.originalParams.pagination.el=g),gM(a)&&w&&(I.params.scrollbar.el=w,I.originalParams.scrollbar.el=w),I.init(s)}function tK(t,a,s,l,f){const g=[];if(!a)return g;const w=o=>{g.indexOf(o)<0&&g.push(o)};if(s&&l){const o=l.map(f),M=s.map(f);o.join("")!==M.join("")&&w("children"),l.length!==s.length&&w("children")}return fM.filter(o=>o[0]==="_").map(o=>o.replace(/_/,"")).forEach(o=>{if(o in t&&o in a)if(yp(t[o])&&yp(a[o])){const M=Object.keys(t[o]),B=Object.keys(a[o]);M.length!==B.length?w(o):(M.forEach(L=>{t[o][L]!==a[o][L]&&w(o)}),B.forEach(L=>{t[o][L]!==a[o][L]&&w(o)}))}else t[o]!==a[o]&&w(o)}),g}const nK=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function __(){return __=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},__.apply(this,arguments)}function _M(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function yM(t){const a=[];return Hn.Children.toArray(t).forEach(s=>{_M(s)?a.push(s):s.props&&s.props.children&&yM(s.props.children).forEach(l=>a.push(l))}),a}function aK(t){const a=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Hn.Children.toArray(t).forEach(l=>{if(_M(l))a.push(l);else if(l.props&&l.props.slot&&s[l.props.slot])s[l.props.slot].push(l);else if(l.props&&l.props.children){const f=yM(l.props.children);f.length>0?f.forEach(g=>a.push(g)):s["container-end"].push(l)}else s["container-end"].push(l)}),{slides:a,slots:s}}function rK(t,a,s){if(!s)return null;const l=B=>{let L=B;return B<0?L=a.length+B:L>=a.length&&(L=L-a.length),L},f=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${s.offset}px`}:{top:`${s.offset}px`},{from:g,to:w}=s,I=t.params.loop?-a.length:0,o=t.params.loop?a.length*2:a.length,M=[];for(let B=I;B<o;B+=1)B>=g&&B<=w&&M.push(a[l(B)]);return M.map((B,L)=>Hn.cloneElement(B,{swiper:t,style:f,key:B.props.virtualIndex||B.key||`slide-${L}`}))}function Km(t,a){return typeof window>"u"?Te.useEffect(t,a):Te.useLayoutEffect(t,a)}const $E=Te.createContext(null),sK=Te.createContext(null),vM=Te.forwardRef(function(t,a){let{className:s,tag:l="div",wrapperTag:f="div",children:g,onSwiper:w,...I}=t===void 0?{}:t,o=!1;const[M,B]=Te.useState("swiper"),[L,O]=Te.useState(null),[j,Z]=Te.useState(!1),H=Te.useRef(!1),te=Te.useRef(null),J=Te.useRef(null),K=Te.useRef(null),W=Te.useRef(null),ee=Te.useRef(null),me=Te.useRef(null),Se=Te.useRef(null),Me=Te.useRef(null),{params:Ie,passedParams:Ge,rest:ge,events:Xe}=QJ(I),{slides:rt,slots:Ue}=aK(g),Bt=()=>{Z(!j)};Object.assign(Ie.on,{_containerClasses(ke,Ct){B(Ct)}});const un=()=>{Object.assign(Ie.on,Xe),o=!0;const ke={...Ie};if(delete ke.wrapperClass,J.current=new W6(ke),J.current.virtual&&J.current.params.virtual.enabled){J.current.virtual.slides=rt;const Ct={cache:!1,slides:rt,renderExternal:O,renderExternalUpdate:!1};Nf(J.current.params.virtual,Ct),Nf(J.current.originalParams.virtual,Ct)}};te.current||un(),J.current&&J.current.on("_beforeBreakpoint",Bt);const Tn=()=>{o||!Xe||!J.current||Object.keys(Xe).forEach(ke=>{J.current.on(ke,Xe[ke])})},ea=()=>{!Xe||!J.current||Object.keys(Xe).forEach(ke=>{J.current.off(ke,Xe[ke])})};Te.useEffect(()=>()=>{J.current&&J.current.off("_beforeBreakpoint",Bt)}),Te.useEffect(()=>{!H.current&&J.current&&(J.current.emitSlidesClasses(),H.current=!0)}),Km(()=>{if(a&&(a.current=te.current),!!te.current)return J.current.destroyed&&un(),eK({el:te.current,nextEl:ee.current,prevEl:me.current,paginationEl:Se.current,scrollbarEl:Me.current,swiper:J.current},Ie),w&&!J.current.destroyed&&w(J.current),()=>{J.current&&!J.current.destroyed&&J.current.destroy(!0,!1)}},[]),Km(()=>{Tn();const ke=tK(Ge,K.current,rt,W.current,Ct=>Ct.key);return K.current=Ge,W.current=rt,ke.length&&J.current&&!J.current.destroyed&&KJ({swiper:J.current,slides:rt,passedParams:Ge,changedParams:ke,nextEl:ee.current,prevEl:me.current,scrollbarEl:Me.current,paginationEl:Se.current}),()=>{ea()}}),Km(()=>{nK(J.current)},[L]);function St(){return Ie.virtual?rK(J.current,rt,L):rt.map((ke,Ct)=>Hn.cloneElement(ke,{swiper:J.current,swiperSlideIndex:Ct}))}return Hn.createElement(l,__({ref:te,className:bM(`${M}${s?` ${s}`:""}`)},ge),Hn.createElement(sK.Provider,{value:J.current},Ue["container-start"],Hn.createElement(f,{className:JJ(Ie.wrapperClass)},Ue["wrapper-start"],St(),Ue["wrapper-end"]),hM(Ie)&&Hn.createElement(Hn.Fragment,null,Hn.createElement("div",{ref:me,className:"swiper-button-prev"}),Hn.createElement("div",{ref:ee,className:"swiper-button-next"})),gM(Ie)&&Hn.createElement("div",{ref:Me,className:"swiper-scrollbar"}),mM(Ie)&&Hn.createElement("div",{ref:Se,className:"swiper-pagination"}),Ue["container-end"]))});vM.displayName="Swiper";const Jx=Te.forwardRef(function(t,a){let{tag:s="div",children:l,className:f="",swiper:g,zoom:w,lazy:I,virtualIndex:o,swiperSlideIndex:M,...B}=t===void 0?{}:t;const L=Te.useRef(null),[O,j]=Te.useState("swiper-slide"),[Z,H]=Te.useState(!1);function te(ee,me,Se){me===L.current&&j(Se)}Km(()=>{if(typeof M<"u"&&(L.current.swiperSlideIndex=M),a&&(a.current=L.current),!(!L.current||!g)){if(g.destroyed){O!=="swiper-slide"&&j("swiper-slide");return}return g.on("_slideClass",te),()=>{g&&g.off("_slideClass",te)}}}),Km(()=>{g&&L.current&&!g.destroyed&&j(g.getSlideClasses(L.current))},[g]);const J={isActive:O.indexOf("swiper-slide-active")>=0,isVisible:O.indexOf("swiper-slide-visible")>=0,isPrev:O.indexOf("swiper-slide-prev")>=0,isNext:O.indexOf("swiper-slide-next")>=0},K=()=>typeof l=="function"?l(J):l,W=()=>{H(!0)};return Hn.createElement(s,__({ref:L,className:bM(`${O}${f?` ${f}`:""}`),"data-swiper-slide-index":o,onLoad:W},B),w&&Hn.createElement($E.Provider,{value:J},Hn.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof w=="number"?w:void 0},K(),I&&!Z&&Hn.createElement("div",{className:"swiper-lazy-preloader"}))),!w&&Hn.createElement($E.Provider,{value:J},K(),I&&!Z&&Hn.createElement("div",{className:"swiper-lazy-preloader"})))});Jx.displayName="SwiperSlide";const xM=({about:t,setAbout:a,features:s,setFeatures:l,qrCodeInfo:f,setQrCodeInfo:g,prodProject:w,setProdProject:I,floorPlanInfo:o,setFloorPlanInfo:M,developerInfo:B,setDeveloperInfo:L,projectData:O,addAboutInfoToProdProject:j,addInformationToProdProject:Z,addImagesToProdProject:H,refetchProjects:te,handleDeleteFeatures:J})=>{var Ua,Xr,xr,kr;const[K,W]=Te.useState("EN"),[ee,me]=Te.useState("EN"),[Se,Me]=Te.useState(!1),[Ie,Ge]=Te.useState(!1),[ge,Xe]=Te.useState(!1),[rt,Ue]=Te.useState(!0),[Bt,un]=Te.useState(!1),[Tn,ea]=Te.useState(-1),[St,ke]=Te.useState(""),[Ct,Et]=Te.useState(!1),[Nt,Sn]=Te.useState("Studio"),[Fn,nr]=Te.useState(!0),[Zn,cr]=Te.useState(o),[Vr,{isLoading:Ya,isError:jn}]=$F(),[As]=qF(),[vr]=WF(),sn=Te.useRef(null),[kn,an]=Te.useState(!1),Yt=It=>{const _n={...w},Ln=_n.amenities.findIndex(Pn=>Pn===It);Ln!==-1?_n.amenities.splice(Ln,1):_n.amenities.push(It),I(_n)},it=It=>w.amenities.some(_n=>_n===It),fe=(It,_n)=>{const Ln=It.target.value;if(Ln.length<=1400){const Pn={...t,about:{...t.about,[_n]:{...t.about[_n],description:Ln}}};a(Pn)}},ve=()=>q.jsxs("div",{className:"aboutProject__content-buttonsControllers",children:[q.jsx("button",{onClick:()=>Me(!1),children:"cancel"}),q.jsx("button",{onClick:()=>{j(),Me(!1)},children:"Confirm changes"})]}),Re=(It,_n)=>{l(Ln=>{const Pn=[...Ln],Ye=Pn[It].photos.filter((Ke,ft)=>ft!==_n);return Pn[It]={...Pn[It],photos:Ye},Pn})},dt=()=>{g({trakheesiNumber:"",date:"",website:"",qrCode:null,file:null,brochure:null,logo:null}),L({id:"",name:"",description:"",website:"",phone:"",logoUrl:null})},ut=It=>{It==="developer"&&Xe(!ge)},Ft=["Gym","Bank","Concierge","Elevator","Storage room","Green areas","Private pool","Sea view","Air-conditioning","Private parking","Private entrance","Built-in wardrobes","Garage","Sauna","Cinema"],Ut=()=>{const It={image:Zn.tempImg,price:Zn.tempPrice,size:Zn.tempSize,type:Zn.tempType,visible:!0};if(!It.price||!It.size||!It.type){Et(!0),un(!1);return}M(_n=>{const Ln={..._n};return Ln[Nt]||(Ln[Nt]=[]),Ln[Nt]=[...Ln[Nt],It],Ln}),cr({tempImg:null,tempPrice:"",tempType:"",tempSize:""}),un(!1)},pt=()=>{const It={image:Zn.tempImg,price:Zn.tempPrice,size:Zn.tempSize,type:Zn.tempType,visible:!0};if(!It.price||!It.size||!It.type){Et(!0),un(!1);return}M(Ye=>{const Ke={...Ye};return Ke[Nt]||(Ke[Nt]=[]),Ke[Nt]=[...Ke[Nt],It],Ke});const _n=new FormData;_n.append("image",Zn.tempImg),_n.append("price",`${Zn.tempPrice}`),_n.append("size",`${Zn.tempSize}`),_n.append("type",`${Zn.tempType}`),_n.append("visible","true");const Ln=O._id;Vr({id:Ln,key:Nt,data:_n}).unwrap().then(Ye=>{un(!1)}).catch(Ye=>{Et(!0)}),cr({tempImg:null,tempPrice:"",tempType:"",tempSize:""}),te()},nn=(It,_n,Ln)=>{M(Pn=>{const Ye={...Pn};return Ye.hasOwnProperty(_n)&&(Ye[_n]=Ye[_n].filter((Ke,ft)=>ft!==Ln)),Ye}),I(Pn=>{const Ye={...Pn};return Ye.floorPlans.hasOwnProperty(_n)&&(Ye.floorPlans[_n]=Ye.floorPlans[_n].filter((Ke,ft)=>ft!==Ln)),Ye}),As({id:It,key:_n,position:Ln}).unwrap().then(Pn=>{te()}).catch(Pn=>{console.error("Error deleting plan on server:",Pn)})},gn=(It,_n,Ln)=>{vr({id:It,key:_n,position:Ln}).unwrap().then(Pn=>{te()}).catch(Pn=>{console.error("Error hiding plan on server:",Pn)})},bn=()=>{cr({tempImg:null,tempPrice:"",tempSize:"",tempType:""}),un(!1)},aa=(It,_n)=>{const Ln=[...w.paymentPlans];Ln[It].percent=_n,I({...w,paymentPlans:Ln})},la=()=>{if(St.trim()!==""){const It=[...w.paymentPlans];It.push({name:{UA:St,EN:St,RU:St},percent:0}),I({...w,paymentPlans:It}),ke("")}},La=(It,_n)=>{M(Ln=>{const Pn={...Ln};return Pn.hasOwnProperty(It)&&(Pn[It]=Pn[It].filter((Ye,Ke)=>Ke!==_n)),Pn}),I(Ln=>{const Pn={...Ln};return Pn.floorPlans.hasOwnProperty(It)&&(Pn.floorPlans[It]=Pn.floorPlans[It].filter((Ye,Ke)=>Ke!==_n)),Pn})},[ra,fa]=Te.useState(!1),ca=It=>{Ge(!0),fa(It)},mr=()=>{const It={name:{UA:"",EN:"",RU:""},photos:[]};l([...s,It])};return q.jsx("section",{className:"aboutProject",children:q.jsxs("div",{className:"aboutProject__content",children:[q.jsxs("div",{className:"aboutProject__content-info",children:[q.jsxs("div",{className:"aboutProject__content-features",children:[q.jsxs("div",{className:"aboutProject__content-headerInfo",children:[q.jsx("h4",{className:"aboutProject__content-title",children:"Features"}),q.jsx("span",{children:"Scroll to see more"})]}),q.jsxs("div",{className:"aboutProject__content-uploaders",children:[q.jsxs(vM,{ref:sn,spaceBetween:15,slidesPerView:"auto",style:{borderRadius:"6px",display:"flex"},children:[s.map((It,_n)=>q.jsx(Jx,{children:q.jsxs("div",{children:[It.photos.length>0&&q.jsxs("div",{className:"aboutProject__content-image",onClick:()=>ca(_n),children:[q.jsx("img",{src:typeof It.photos[0]=="string"?It.photos[0]:URL.createObjectURL(It.photos[0]),alt:"Image exterior",width:200,height:125,className:"aboutProject__content-img"}),q.jsxs("div",{className:"aboutProject__content-count",children:[q.jsx("span",{children:It.photos.length}),q.jsx("img",{src:"/assets/ProjectPage/camera.svg",alt:"Image camera",width:12,height:12})]})]}),It.photos.length===0&&q.jsx(vT,{setImg:l,index:_n})]})},_n)),q.jsx(Jx,{children:q.jsx("div",{className:"aboutProject__content-add",onClick:mr,children:q.jsx("img",{src:"/assets/ProjectPage/addPhoto.svg",alt:"Img clip",className:"nextChat__content-clip",width:29,height:29})})},xM)]}),Ie&&q.jsx(CX,{handler:Ge,isVisible:Ie,features:s,setFeatures:l,onDeletePicture:It=>Re(ra,It),index:ra,item:s[ra],addImagesToProdProject:H,handleDeleteFeatures:J,children:q.jsx(vT,{setImg:l,index:ra,title:"add photo here"})})]})]}),q.jsxs("div",{className:"aboutProject__content-texts",children:[q.jsxs("div",{className:"aboutProject__content-header",children:[q.jsx("h4",{className:"aboutProject__content-title",children:"About the project"}),q.jsx(YT,{textsLan:K,setTextsLan:W})]}),K==="EN"&&q.jsxs("div",{className:"aboutProject__content-text",children:[Se?q.jsx("textarea",{type:"text",value:t.about.additionalProp1.description,onChange:It=>fe(It,"additionalProp1"),className:`aboutProject__content-input ${Se?"active":""}`}):q.jsx("p",{onClick:()=>Me(!0),className:"aboutProject__content-descrAbout",children:ov(t.about.additionalProp1.description)}),q.jsx("div",{className:"aboutProject__content-line"}),q.jsxs("div",{className:"aboutProject__content-controllers",children:[q.jsxs("div",{className:"aboutProject__content-symbols",children:["Characters:"," ",ov((Xr=(Ua=t.about.additionalProp1)==null?void 0:Ua.description)==null?void 0:Xr.length)," ","/ 1400"]}),Se&&ve()]})]}),K==="RU"&&q.jsxs("div",{className:"aboutProject__content-text",children:[Se?q.jsx("textarea",{value:t.about.additionalProp2.description,onChange:It=>fe(It,"additionalProp2"),className:`aboutProject__content-input ${Se?"active":""}`}):q.jsx("p",{onClick:()=>Me(!0),className:"aboutProject__content-descrAbout",children:ov(t.about.additionalProp2.description)}),q.jsx("div",{className:"aboutProject__content-line"}),q.jsxs("div",{className:"aboutProject__content-controllers",children:[q.jsxs("div",{className:"aboutProject__content-symbols",children:["Characters:"," ",(xr=t.about.additionalProp2.description)==null?void 0:xr.length," ","/ 1400"]}),Se&&ve()]})]}),K==="UA"&&q.jsxs("div",{className:"aboutProject__content-text",children:[Se?q.jsx("textarea",{value:t.about.additionalProp3.description,onChange:It=>fe(It,"additionalProp3"),className:`aboutProject__content-input ${Se?"active":""}`}):q.jsx("p",{onClick:()=>Me(!0),className:"aboutProject__content-descrAbout",children:t.about.additionalProp3.description}),q.jsx("div",{className:"aboutProject__content-line"}),q.jsxs("div",{className:"aboutProject__content-controllers",children:[q.jsxs("div",{className:"aboutProject__content-symbols",children:["Characters:"," ",(kr=t.about.additionalProp3.description)==null?void 0:kr.length," ","/ 1400"]}),Se&&ve()]})]})]}),q.jsxs("div",{className:"floorPlan__floorPlans",children:[q.jsxs("div",{className:"floorPlan__floorPlans-header",children:[q.jsx("h2",{className:"floorPlan__floorPlans-title",children:"Floor Plans"}),q.jsx("div",{className:"floorPlan__floorPlans-buttons",children:q.jsx("ul",{className:"floorPlan__floorPlans-listNumber",children:["Studio","1","2","3","4","5","6","7","8"].map((It,_n)=>q.jsx("li",{className:`floorPlan__floorPlans-itemNumber ${Nt===It?"active":""}`,onClick:()=>Sn(It),children:It},_n))})})]}),q.jsxs("div",{className:"floorPlan__floorPlans-body",children:[q.jsxs("ul",{className:"floorPlan__floorPlans-list",children:[o[Nt].map((It,_n)=>(It.image||It.price||It.size||It.type)&&q.jsxs("li",{className:"floorPlan__floorPlans-item",children:[It.image?q.jsx("img",{className:"floorPlan__floorPlans-imgFloor",src:typeof It.image=="string"?It.image:URL.createObjectURL(It.image),alt:"Image floor plan",width:200,height:225}):q.jsx("div",{className:"floorPlan__floorPlans-notImage",children:q.jsx("img",{src:"/assets/ProjectPage/addPhoto.svg",alt:"Img clip",className:"nextChat__content-clip",width:29,height:29})}),q.jsxs("div",{className:"floorPlan__floorPlans-info",children:[q.jsx("h3",{className:"floorPlan__floorPlans-aed",children:It.price&&`AED ${It.price.length>15?It.price.slice(0,15)+"...":It.price}`}),q.jsxs("div",{className:"floorPlan__floorPlans-texts",children:[q.jsx("span",{className:"floorPlan__floorPlans-ft",children:It.size&&`${It.size.length>10?It.size.slice(0,10)+"...":It.size} sq.ft`}),q.jsx("span",{className:"floorPlan__floorPlans-type",children:It.type})]})]}),q.jsxs("div",{className:"floorPlan__floorPlans-buttonsController",children:[q.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>O?nn(O._id,Nt,_n):La(Nt,_n),children:[q.jsxs("g",{filter:"url(#filter0_b_2362_2868)",children:[q.jsx("rect",{width:"28",height:"28",rx:"8",fill:"white"}),q.jsx("path",{d:"M8 10.257C8 9.93402 8.23025 9.6722 8.51429 9.6722L10.2904 9.67189C10.6433 9.66172 10.9547 9.40656 11.0748 9.02909C11.0779 9.01916 11.0815 9.00692 11.0946 8.9625L11.1711 8.70138C11.2179 8.54128 11.2587 8.4018 11.3158 8.27712C11.5414 7.78458 11.9587 7.44255 12.441 7.35499C12.563 7.33282 12.6923 7.33291 12.8407 7.33302H15.1594C15.3078 7.33291 15.4371 7.33282 15.5591 7.35499C16.0414 7.44255 16.4587 7.78458 16.6843 8.27712C16.7414 8.4018 16.7822 8.54128 16.829 8.70138L16.9055 8.9625C16.9186 9.00692 16.9222 9.01916 16.9254 9.02909C17.0454 9.40656 17.4185 9.66203 17.7714 9.6722H19.4857C19.7697 9.6722 20 9.93402 20 10.257C20 10.58 19.7697 10.8418 19.4857 10.8418H8.51429C8.23025 10.8418 8 10.58 8 10.257Z",fill:"#FF5959"}),q.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7304 20.6664H14.2696C16.1247 20.6664 17.0523 20.6664 17.6554 20.0758C18.2585 19.4852 18.3202 18.5164 18.4436 16.5788L18.6214 13.7868C18.6884 12.7355 18.7219 12.2098 18.4193 11.8767C18.1167 11.5436 17.6058 11.5436 16.584 11.5436H11.416C10.3942 11.5436 9.88325 11.5436 9.5807 11.8767C9.27815 12.2098 9.31163 12.7355 9.37858 13.7868L9.55639 16.5788C9.6798 18.5164 9.7415 19.4852 10.3446 20.0758C10.9477 20.6664 11.8753 20.6664 13.7304 20.6664ZM12.8309 14.1254C12.8034 13.8362 12.5584 13.6252 12.2836 13.6541C12.0088 13.683 11.8083 13.9409 11.8358 14.2302L12.1691 17.7389C12.1966 18.0282 12.4416 18.2392 12.7164 18.2103C12.9912 18.1813 13.1917 17.9234 13.1642 17.6342L12.8309 14.1254ZM15.7164 13.6541C15.9912 13.683 16.1917 13.9409 16.1642 14.2302L15.8309 17.7389C15.8034 18.0282 15.5584 18.2392 15.2836 18.2103C15.0088 18.1813 14.8083 17.9234 14.8358 17.6342L15.1691 14.1254C15.1966 13.8362 15.4416 13.6252 15.7164 13.6541Z",fill:"#FF5959"})]}),q.jsx("defs",{children:q.jsxs("filter",{id:"filter0_b_2362_2868",x:"-50.9",y:"-50.9",width:"129.8",height:"129.8",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[q.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),q.jsx("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"25.45"}),q.jsx("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_2362_2868"}),q.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_2362_2868",result:"shape"})]})})]}),q.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>O&&gn(O._id,Nt,_n),children:[q.jsxs("g",{filter:"url(#filter0_b_2362_2870)",children:[q.jsx("rect",{width:"28",height:"28",rx:"8",fill:"white"}),q.jsx("path",{d:"M9.48387 17.4552L7.68913 19.25L8.75 20.3105L10.7394 18.3211C11.7001 18.872 12.7955 19.25 14 19.25C18.5 19.25 21.5 14 21.5 14C21.5 14 20.3926 12.0653 18.5161 10.5447L20.3109 8.74995L19.25 7.68945L17.2606 9.67883C16.2999 9.12795 15.2045 8.74995 14 8.74995C9.5 8.74995 6.5 14 6.5 14C6.5 14 7.60737 15.9346 9.48387 17.4552ZM11 14C11 12.3432 12.3432 11 14 11C14.5561 11 15.0751 11.1541 15.5218 11.4177L14.3836 12.5558C14.2603 12.5232 14.1335 12.5 14 12.5C13.1727 12.5 12.5 13.1727 12.5 14C12.5 14.1335 12.5233 14.2602 12.5559 14.3836L11.4178 15.5217C11.1541 15.0751 11 14.5561 11 14ZM17 14C17 15.6567 15.6567 17 14 17C13.4439 17 12.9249 16.8458 12.4782 16.5822L13.6164 15.4441C13.7397 15.4767 13.8665 15.5 14 15.5C14.8273 15.5 15.5 14.8272 15.5 14C15.5 13.8665 15.4768 13.7397 15.4441 13.6163L16.5822 12.4782C16.8459 12.9248 17 13.4438 17 14Z",fill:It.visible?"#4D4D4D":"red"})]}),q.jsx("defs",{children:q.jsxs("filter",{id:"filter0_b_2362_2870",x:"-50.9",y:"-50.9",width:"129.8",height:"129.8",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[q.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),q.jsx("feGaussianBlur",{in:"BackgroundImageFix",stdDeviation:"25.45"}),q.jsx("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_2362_2870"}),q.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_backgroundBlur_2362_2870",result:"shape"})]})})]})]})]},_n)),q.jsx("li",{className:"floorPlan__floorPlans-item add",children:q.jsx("div",{className:"floorPlan__floorPlans-addButton",children:q.jsx("button",{className:"floorPlan__floorPlans-addBtn",onClick:()=>un(!0),children:"Add plan"})})})]}),q.jsx(MX,{handler:un,isVisible:Bt,tempInfoFloorPlan:Zn,setTempInfoFloorPlan:cr,handleCloseFloorPlan:bn,handleAddFloorPlan:Ut,projectData:O,handleChangeToAddFloorPlan:pt,children:q.jsx(oU,{img:Zn,setImg:cr,title:"add photo here"})}),q.jsx(iM,{handler:Et,isVisible:Ct,title:"At least on plan must exist",descr:"This action cannot be performed because at least the price and floor dimensions must exist in the system."})]})]})]}),q.jsxs("div",{className:"aboutProject__content-infoRight",children:[q.jsxs("div",{className:"aboutProject__content-amenities",children:[q.jsx("h4",{className:"aboutProject__content-title",children:"Amenities"}),q.jsx("ul",{className:"aboutProject__content-list",children:Ft.map((It,_n)=>q.jsx("li",{className:`aboutProject__content-item ${it(It)?"active":""}`,onClick:()=>Yt(It),children:q.jsx("span",{children:It})},_n))})]}),q.jsxs("div",{className:"floorPlan__information",children:[q.jsx("h2",{className:"floorPlan__information-title",children:"Information"}),q.jsxs("div",{className:"floorPlan__information-controllers",children:[q.jsxs("div",{className:"floorPlan__information-images",children:[f.qrCode?q.jsx("div",{className:"floorPlan__information-imgWrapper",onClick:()=>an(!0),children:q.jsx("img",{src:typeof f.qrCode=="string"?f.qrCode:URL.createObjectURL(f.qrCode),alt:"Image QR Code",width:130,height:130,className:"floorPlan__information-img"})}):q.jsx("div",{className:"floorPlan__information-upload",onClick:()=>an(!0),children:q.jsx(cU,{img:f,setImg:g,title:"add QR here"})}),f.logo?q.jsx("div",{className:"floorPlan__information-imgWrapper",onClick:()=>an(!0),children:q.jsx("img",{src:typeof f.logo=="string"?f.logo:URL.createObjectURL(f.logo),alt:"Image logo Code",width:130,height:130,className:"floorPlan__information-img"})}):q.jsx("div",{className:"floorPlan__information-upload",onClick:()=>an(!0),children:q.jsx(uU,{img:f,setImg:g,title:"add logo here"})})]}),q.jsxs("div",{className:"floorPlan__information-inputs",children:[q.jsxs("div",{className:"floorPlan__information-inputsInputs",children:[q.jsx("input",{type:"text",placeholder:"Trakheesi number",className:"floorPlan__information-input active",value:f.trakheesiNumber,onChange:It=>g({...f,trakheesiNumber:It.target.value}),onClick:()=>an(!0)}),q.jsx("input",{type:"text",placeholder:"Date of expiration",className:"floorPlan__information-input active",value:f.date,maxLength:"10",onChange:It=>{const Ln=It.target.value.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{2})\/(\d{2})(\d{4})/,"$1/$2/$3");g({...f,date:Ln})},onClick:()=>an(!0)}),q.jsx("input",{type:"text",placeholder:"Developer website link",className:"floorPlan__information-input active",value:f.website,onChange:It=>g({...f,website:It.target.value}),onClick:()=>an(!0)}),q.jsx("div",{onClick:()=>an(!0),children:q.jsx(gU,{toggleDropdown:ut,info:B,setInfo:L,showSelectDev:ge,setShowSelectDev:Xe,value:B.name,isQr:!0})}),q.jsx("input",{type:"text",placeholder:"Developer phone number",className:"floorPlan__information-input",value:B.phone,disabled:!0,onClick:()=>an(!0)}),q.jsx("input",{type:"text",placeholder:"Developer website link",className:"floorPlan__information-input",value:B.website,disabled:!0,onClick:()=>an(!0)}),q.jsx("input",{type:"text",placeholder:"Developer description",className:"floorPlan__information-input",value:B.description,disabled:!0,onClick:()=>an(!0)}),q.jsxs("div",{className:"floorPlan__information-presentation",onClick:()=>an(!0),children:[q.jsx(_T,{img:f,setImg:g,children:q.jsx("img",{className:"floorPlan__information-presentationLink",src:"/assets/ProjectPage/link.svg",alt:"Link image",width:20,height:20})}),q.jsx("input",{className:"floorPlan__information-presentationBody",type:"text",disabled:!0,value:f.file?typeof f.file=="string"?f.file:f.file.name:"",placeholder:"Insert file here"}),q.jsx(_T,{img:f,setImg:g,children:q.jsx("button",{className:"floorPlan__information-presentationBtn",children:"Browse"})})]}),q.jsxs("div",{className:"floorPlan__information-presentation",onClick:()=>an(!0),children:[q.jsx(yT,{img:f,setImg:g,children:q.jsx("img",{className:"floorPlan__information-presentationLink",src:"/assets/ProjectPage/link.svg",alt:"Link image",width:20,height:20})}),q.jsx("input",{className:"floorPlan__information-presentationBody",type:"text",disabled:!0,value:f.brochure?typeof f.brochure=="string"?f.brochure:f.brochure.name:"",placeholder:"Insert brochure here"}),q.jsx(yT,{img:f,setImg:g,children:q.jsx("button",{className:"floorPlan__information-presentationBtn",children:"Browse"})})]})]}),kn&&q.jsx("div",{className:"floorPlan__information-buttonsWrapper",children:q.jsxs("div",{className:"floorPlan__information-buttons",children:[q.jsx("button",{onClick:()=>{dt(),an(!1)},children:"cancel"}),q.jsx("button",{onClick:()=>{Z(),an(!1)},children:"Save"})]})})]})]})]}),q.jsxs("div",{className:"floorPlan__information-wrapper",children:[q.jsxs("div",{className:"floorPlan__descr",children:[q.jsx("div",{className:"floorPlan__descr-selectWrapper",children:q.jsxs("div",{className:"floorPlan__descr-select",onClick:()=>nr(!Fn),children:[q.jsx("div",{className:`floorPlan__descr-leftSelect ${Fn?"active":""}`}),q.jsx("div",{className:`floorPlan__descr-rightSelect ${Fn?"":"active"}`})]})}),q.jsx("div",{className:"floorPlan__descr-texts",children:Fn?q.jsx("p",{className:"floorPlan__descr-descr",children:"Data regarding property inventory, pricing, and other details were sourced from public platforms including Property Finder, Bayut, Reelly, Alnair, etc. PRO PART REAL ESTATE L.L.C is not affiliated with these sources and assumes no liability for the accuracy of information or images presented on the website."}):q.jsx("p",{className:"floorPlan__descr-descr",children:"Data regarding property inventory, pricing, and other details were sourced from public platforms including Property Finder, Bayut, Reelly, Alnair, etc. PRO PART REAL ESTATE L.L.C is not affiliated with these sources and assumes no liability for the accuracy of information or images presented on the website."})})]}),q.jsxs("div",{className:"floorPlan__percent",children:[q.jsx("h2",{className:"floorPlan__information-title",children:"Payment plan"}),q.jsxs("div",{className:"floorPlan__percent-inputs",children:[w.paymentPlans.map((It,_n)=>q.jsx("div",{children:q.jsxs("div",{className:"popupAddFloorPlan__content-inputsWrapper",children:[Tn===_n?q.jsx("input",{type:"text",value:It.name[ee],onChange:Ln=>{const Pn=[...w.paymentPlans];Pn[_n].name[ee]=Ln.target.value,I({...w,paymentPlans:Pn})},onBlur:()=>ea(-1),className:"popupAddFloorPlan__content-editTitleInput"}):q.jsx("span",{onClick:()=>ea(_n),children:It.name[ee]}),q.jsxs("div",{className:"popupAddFloorPlan__content-inputsInsideWrapper",children:[q.jsx("div",{children:"%"}),q.jsx("input",{type:"text",placeholder:"type here",value:It.percent,disabled:!rt,onChange:Ln=>{const Pn=Ln.target.value;/^\d*\.?\d*$/.test(Pn)&&aa(_n,Pn)}})]})]})},_n)),q.jsxs("div",{className:"popupAddFloorPlan__content-inputsWrapper",children:[q.jsx("span",{children:"Add own plan"}),q.jsxs("div",{className:"popupAddFloorPlan__content-inputsInsideWrapper",children:[q.jsx("div",{children:q.jsx("button",{onClick:la,children:"+"})}),q.jsx("input",{type:"text",placeholder:"Name payment plan",value:St,onChange:It=>ke(It.target.value)})]})]})]}),q.jsxs("div",{className:"popupAddFloorPlan__content-fixedAndLan",children:[q.jsxs("div",{className:"floorPlan__percent-select",children:[q.jsx("div",{className:"floorPlan__descr-selectWrapper",children:q.jsxs("div",{className:"floorPlan__descr-select",onClick:()=>Ue(!rt),children:[q.jsx("div",{className:`floorPlan__descr-leftSelect ${rt?"active":""}`}),q.jsx("div",{className:`floorPlan__descr-rightSelect ${rt?"":"active"}`})]})}),q.jsx("span",{children:"Fixed price"})]}),q.jsx(YT,{textsLan:ee,setTextsLan:me})]})]})]})]})]})})},wM=({handler:t,isVisible:a,title:s})=>{const l=Y0();return q.jsx("div",{className:"popupSaveProject",children:q.jsx(ql,{handlerClose:f=>{f.preventDefault(),t(!1)},isVisible:a,children:q.jsx("div",{className:"popupSaveProject__content",children:q.jsxs("div",{className:"popupSaveProject__content-wrapper",children:[q.jsx("img",{src:"/assets/components/success.svg",alt:"Image alert",width:35.88,height:35.88}),q.jsxs("div",{className:"popupSaveProject__content-texts",children:[q.jsx("h5",{className:"popupSaveProject__content-title",children:"Your project was saved"}),q.jsx("p",{className:"popupSaveProject__content-descr",children:s})]}),q.jsxs("div",{className:"popupSaveProject__content-buttons",children:[q.jsx(Zm,{onClick:()=>t(!1),children:q.jsx("button",{className:"popupSaveProject__content-btn",children:"Edit"})}),q.jsx(Zc,{className:"button--orange",handler:()=>{t(!1),l("/")},children:"Back to home"})]})]})})})})},iK=({handleCreateProject:t,handleChangeProject:a,projectData:s,handleToggleTop:l})=>{const[f,g]=Te.useState(!1);return q.jsxs("header",{className:"headerProjectsP",children:[q.jsx("nav",{className:"headerProjectsP__wrapper",children:q.jsxs("ul",{className:"headerProjectsP__wrapper-list",children:[q.jsx("li",{className:"headerProjectsP__wrapper-item",children:q.jsx(Zm,{to:"/",children:q.jsxs("button",{className:"headerProjectsP__wrapper-btnFirst",children:[q.jsx("img",{src:"/assets/ProjectPage/arrow.svg",alt:"Image arrow",width:8,height:14}),"Back"]})})}),q.jsxs("li",{className:"headerProjectsP__wrapper-item",children:[q.jsx("button",{className:"headerProjectsP__wrapper-btn",onClick:()=>l(s._id,!s.isTop),children:"Add to top"}),s?q.jsx("button",{className:"headerProjectsP__wrapper-btn",onClick:a,children:"Save project"}):q.jsx("button",{className:"headerProjectsP__wrapper-btn",onClick:t,children:"Save project"})]})]})}),q.jsx("div",{className:"headerProjectsP__line"}),q.jsx(wM,{handler:g,isVisible:f})]})},qE=()=>{const{id:t}=Ij(),a=Y0(),[s,l]=Te.useState(null),{data:f,isLoading:g,isError:w,refetch:I}=Lz(),[o,M]=Te.useState(!1),[B,L]=Te.useState(!1),[O]=Dz(),[j,Z]=Te.useState("Error saving project");Te.useEffect(()=>{if(!g&&f){const sn=f.find(kn=>kn._id===t);sn&&l(sn)}},[t,f,g,w,a]);const[H,te]=Te.useState({name:"",price:0,sizeM2:"",location:"",developer:"",plan:"",rooms:0,size:0,pictures:[],handover:"",handoverMounth:"",handoverYear:""}),[J,K]=Te.useState({polygonCoordinates:null,geoLocation:{lat:"55.057714357334135",lng:"25.087631004515043"}}),[W,ee]=Te.useState({about:{additionalProp1:{title:"",description:""},additionalProp2:{title:"",description:""},additionalProp3:{title:"",description:""}}}),[me,Se]=Te.useState({trakheesiNumber:"",date:"",website:"",qrCode:null,file:null,brochure:null,logo:null}),[Me,Ie]=Te.useState({id:"",name:"",description:"",website:"",phone:"",logoUrl:null}),[Ge,ge]=Te.useState({Studio:[{image:null,price:null,size:null,type:null,visible:null}],1:[{image:null,price:null,size:null,type:null,visible:null}],2:[{image:null,price:null,size:null,type:null,visible:null}],3:[{image:null,price:null,size:null,type:null,visible:null}],4:[{image:null,price:null,size:null,type:null,visible:null}],5:[{image:null,price:null,size:null,type:null,visible:null}],6:[{image:null,price:null,size:null,type:null,visible:null}],7:[{image:null,price:null,size:null,type:null,visible:null}],8:[{image:null,price:null,size:null,type:null,visible:null}]}),[Xe,rt]=Te.useState([{name:{UA:"",EN:"",RU:""},photos:[]}]);console.log(typeof H.price);const[Ue,{isLoading:Bt,isError:un}]=UF(),[Tn,{isLoading:ea,isError:St}]=GF(),[ke,Ct]=Te.useState({isTop:!1,hidden:!1,generalInfo:{name:"",location:"",coordinates:{lat:"",lng:""},priceFrom:0,projectMainInfo:{developer:"",rooms:0,size:0,type:"",handover:""},website:"",polygon:[],logo:""},images:[{name:{UA:"",EN:"",RU:""},photos:[""]}],about:{UA:"",EN:"",RU:""},amenities:[],information:{qrCode:"",trakhesi:"",dateOfExpiration:"",file:""},paymentPlans:[],brochure:"",floorPlans:{}}),{data:Et,isLoading:Nt,isError:Sn}=XF(ke.generalInfo.projectMainInfo.developer),Fn=()=>{if(!ke.generalInfo.name){L(!0),Z("The project must have a name.");return}const sn=new FormData;let kn="";if(ke&&ke.generalInfo&&ke.generalInfo.projectMainInfo&&ke.generalInfo.projectMainInfo.handover){const an=new Date(ke.generalInfo.projectMainInfo.handover);isNaN(an)||(kn=an.toISOString())}else kn="";sn.append("generalInfo",`{ "name": "${ke.generalInfo.name}", "location": "${ke.generalInfo.location}", "coordinates": { "lat": "${ke.generalInfo.coordinates.lat}", "lng": "${ke.generalInfo.coordinates.lng}" }, "priceFrom": ${ke.generalInfo.priceFrom||"0"}, "projectMainInfo": { "developer": "${ke.generalInfo.projectMainInfo.developer}","handover":"${kn}", "rooms": ${ke.generalInfo.projectMainInfo.rooms}, "size": ${ke.generalInfo.projectMainInfo.size||"0"}, "type": "${ke.generalInfo.projectMainInfo.type}" }, "website": "${ke.generalInfo.website}", "polygon": ${JSON.stringify(ke.generalInfo.polygon)} }`);for(let an=0;an<ke.images.length;an++){sn.append(`images[${an}].name.UA`,ke.images[an].name.UA),sn.append(`images[${an}].name.EN`,ke.images[an].name.EN),sn.append(`images[${an}].name.RU`,ke.images[an].name.RU);for(let Yt=0;Yt<ke.images[an].photos.length;Yt++)sn.append(`images[${an}].photos[${Yt}]`,ke.images[an].photos[Yt])}sn.append("logo",ke.generalInfo.logo),sn.append("about",`{ "UA": "${Cl(ke.about.UA)}", "EN": "${Cl(ke.about.EN)}", "RU": "${Cl(ke.about.RU)}" }`),sn.append("amenities",JSON.stringify(ke.amenities)),sn.append("qrCode",ke.information.qrCode),sn.append("file",ke.information.file),sn.append("information",`{ "trakhesi": "${ke.information.trakhesi}", "dateOfExpiration": "${ke.information.dateOfExpiration}" }`),sn.append("paymentPlans",JSON.stringify(ke.paymentPlans)),sn.append("brochure",ke.brochure);for(const an in ke==null?void 0:ke.floorPlans)if(ke.floorPlans.hasOwnProperty(an)){const Yt=ke.floorPlans[an];if(Array.isArray(Yt)&&Yt.length!==0)for(let it=0;it<Yt.length;it++){const fe=Yt[it];sn.append(`floorPlans[${an}][${it}].image`,fe.image),sn.append(`floorPlans['${an}'][${it}].price`,fe.price),sn.append(`floorPlans['${an}'][${it}].size`,fe.size),sn.append(`floorPlans['${an}'][${it}].visible`,fe.visible)}}Ue(sn).unwrap().then(an=>{I(),M(!0)}).catch(an=>{L(!0),Z(an)})},nr=()=>{if(!ke.generalInfo.name){L(!0),Z("The project must have a name.");return}const sn=new FormData;let kn="";if(ke&&ke.generalInfo&&ke.generalInfo.projectMainInfo&&ke.generalInfo.projectMainInfo.handover){const an=new Date(ke.generalInfo.projectMainInfo.handover);isNaN(an)||(kn=an.toISOString())}else kn="";sn.append("generalInfo",`{ "name": "${ke.generalInfo.name}", "location": "${ke.generalInfo.location}", "coordinates": { "lat": "${ke.generalInfo.coordinates.lat}", "lng": "${ke.generalInfo.coordinates.lng}" }, "priceFrom": ${ke.generalInfo.priceFrom||"0"}, "projectMainInfo": { "developer": "${ke.generalInfo.projectMainInfo.developer}","handover":"${kn}", "rooms": ${ke.generalInfo.projectMainInfo.rooms}, "size": ${ke.generalInfo.projectMainInfo.size||"0"}, "type": "${ke.generalInfo.projectMainInfo.type}" }, "website": "${ke.generalInfo.website}", "polygon": ${JSON.stringify(ke.generalInfo.polygon)} }`);for(let an=0;an<ke.images.length;an++){sn.append(`images[${an}].name.UA`,ke.images[an].name.UA),sn.append(`images[${an}].name.EN`,ke.images[an].name.EN),sn.append(`images[${an}].name.RU`,ke.images[an].name.RU);for(let Yt=0;Yt<ke.images[an].photos.length;Yt++)sn.append(`images[${an}].photos[${Yt}]`,ke.images[an].photos[Yt])}sn.append("logo",ke.generalInfo.logo),sn.append("about",`{ "UA": "${Cl(ke.about.UA)}", "EN": "${Cl(ke.about.EN)}", "RU": "${Cl(ke.about.RU)}" }`),sn.append("amenities",JSON.stringify(ke.amenities)),sn.append("qrCode",ke.information.qrCode),sn.append("file",ke.information.file),sn.append("information",`{ "trakhesi": "${ke.information.trakhesi}", "dateOfExpiration": "${ke.information.dateOfExpiration}" }`),sn.append("paymentPlans",JSON.stringify(ke.paymentPlans)),sn.append("brochure",ke.brochure);for(const an in ke==null?void 0:ke.floorPlans)if(ke.floorPlans.hasOwnProperty(an)){const Yt=ke.floorPlans[an];if(Array.isArray(Yt)&&Yt.length!==0)for(let it=0;it<Yt.length;it++){const fe=Yt[it];sn.append(`floorPlans[${an}][${it}].image`,fe.image),sn.append(`floorPlans['${an}'][${it}].price`,fe.price),sn.append(`floorPlans['${an}'][${it}].size`,fe.size),sn.append(`floorPlans['${an}'][${it}].visible`,fe.visible)}}sn.append("id",`${s._id}`),Tn(sn).unwrap().then(an=>{I(),M(!0)}).catch(an=>{L(!0),Z(an)})},Zn=(sn,kn)=>{const an=sn&&kn?`${kn}-${L$(sn)}T18:14:51.000+00:00`:"";Ct(Yt=>({...Yt,generalInfo:{...Yt.generalInfo,name:H.name,location:H.location,coordinates:{lat:J.geoLocation.lat,lng:J.geoLocation.lng},priceFrom:H.price,projectMainInfo:{...Yt.generalInfo.projectMainInfo,developer:Me.id,rooms:H.rooms,size:H.size,type:H.plan,handover:an},polygon:[...Yt.generalInfo.polygon,...J.polygonCoordinates||[]]}})),te(Yt=>({...Yt,handover:an}))},cr=()=>{Ct(sn=>({...sn,about:{UA:W.about.additionalProp3.description,EN:W.about.additionalProp1.description,RU:W.about.additionalProp2.description}}))},Vr=()=>{Ct(sn=>({...sn,generalInfo:{...sn.generalInfo,website:me.website,logo:me.logo,projectMainInfo:{...sn.generalInfo.projectMainInfo,developer:Me.id}},information:{...sn.information,qrCode:me.qrCode,trakhesi:me.trakheesiNumber,dateOfExpiration:k$(me.date),file:me.file},brochure:me.brochure}))};Te.useEffect(()=>{const sn=Object.entries(Ge).reduce((kn,[an,Yt])=>{const it=Yt.filter(fe=>Object.values(fe).some(ve=>ve!==null));return it.length>0&&(kn[an]=it),kn},{});Ct(kn=>({...kn,floorPlans:sn}))},[Ge]);const Ya=()=>{Ct(sn=>({...sn,images:Xe.map(kn=>({name:{UA:kn.name.UA,EN:kn.name.EN,RU:kn.name.RU},photos:kn.photos}))}))},jn=sn=>{rt(kn=>kn.length===1?[{name:{UA:"",EN:"",RU:""},photos:[]}]:kn.filter((an,Yt)=>Yt!==sn)),Ct(kn=>kn.images.length===1?{...kn,images:[{name:{UA:"",EN:"",RU:""},photos:[]}]}:{...kn,images:kn.images.filter((an,Yt)=>Yt!==sn)})},As=()=>{K(sn=>({...sn,polygonCoordinates:[]})),Ct(sn=>({...sn,generalInfo:{...sn.generalInfo,polygon:[]}}))},vr=async(sn,kn)=>{try{await O({id:sn,value:kn}),refetch()}catch(an){console.error("Failed to hide project:",an)}};return Te.useEffect(()=>{var sn,kn,an,Yt,it;ke&&!w&&!g&&f&&(s&&Ct(()=>{var fe,ve,Re,dt,ut,Ft,Ut,pt;return{isTop:!1,hidden:!1,generalInfo:{name:s.generalInfo.name,location:s.generalInfo.location,coordinates:{lat:s.generalInfo.coordinates.lat,lng:s.generalInfo.coordinates.lng},priceFrom:s.generalInfo.priceFrom,projectMainInfo:{developer:s.generalInfo.projectMainInfo.developer,rooms:s.generalInfo.projectMainInfo.rooms,size:s.generalInfo.projectMainInfo.size,type:s.generalInfo.projectMainInfo.type,handover:s.generalInfo.projectMainInfo.handover},website:s.generalInfo.website,polygon:(fe=s==null?void 0:s.generalInfo)!=null&&fe.polygon?s.generalInfo.polygon.map(nn=>({lat:nn.lat,lng:nn.lng})):[],logo:s.generalInfo.logo},images:[...s.generalInfo.images],about:{UA:Cl((ve=s==null?void 0:s.about)==null?void 0:ve.UA),EN:Cl((Re=s==null?void 0:s.about)==null?void 0:Re.EN),RU:Cl((dt=s==null?void 0:s.about)==null?void 0:dt.RU)},amenities:Array.isArray(s.amenities)?[...s.amenities]:[],information:{qrCode:((ut=s.information)==null?void 0:ut.qrCode)||"",trakhesi:((Ft=s.information)==null?void 0:Ft.trakhesi)||"",dateOfExpiration:((Ut=s.information)==null?void 0:Ut.dateOfExpiration)||"",file:((pt=s.information)==null?void 0:pt.file)||""},paymentPlans:[...s.paymentPlans],brochure:s.brochure,floorPlans:{...s.floorPlans}}}),s&&te(fe=>({...fe,name:s.generalInfo.name,price:s.generalInfo.priceFrom,location:s.generalInfo.location,developer:s.generalInfo.projectMainInfo.developer,plan:s.generalInfo.projectMainInfo.type,rooms:s.generalInfo.projectMainInfo.rooms,size:s.generalInfo.projectMainInfo.size,handover:s.generalInfo.projectMainInfo.handover})),s&&K({polygonCoordinates:(sn=s==null?void 0:s.generalInfo)!=null&&sn.polygon?s.generalInfo.polygon.map(fe=>({lat:fe.lat,lng:fe.lng})):[],geoLocation:(kn=s==null?void 0:s.generalInfo)!=null&&kn.coordinates?{lat:s.generalInfo.coordinates.lat,lng:s.generalInfo.coordinates.lng}:{lat:"0",lng:"0"}}),s&&Se(fe=>{var ve,Re,dt,ut,Ft,Ut;return{...fe,trakheesiNumber:((ve=s==null?void 0:s.information)==null?void 0:ve.trakhesi)||"",date:BA((Re=s==null?void 0:s.information)==null?void 0:Re.dateOfExpiration)||"",website:((dt=s==null?void 0:s.generalInfo)==null?void 0:dt.website)||"",qrCode:((ut=s==null?void 0:s.information)==null?void 0:ut.qrCode)||"",file:((Ft=s==null?void 0:s.information)==null?void 0:Ft.file)||"",brochure:(s==null?void 0:s.brochure)||"",logo:((Ut=s==null?void 0:s.generalInfo)==null?void 0:Ut.logo)||""}}),s&&ee({about:{additionalProp1:{title:"",description:(an=s==null?void 0:s.about)==null?void 0:an.EN},additionalProp2:{title:"",description:(Yt=s==null?void 0:s.about)==null?void 0:Yt.RU},additionalProp3:{title:"",description:(it=s==null?void 0:s.about)==null?void 0:it.UA}}}),s&&ge(fe=>({...fe,...s.floorPlans})),s&&rt([...s.generalInfo.images]))},[f,s]),Te.useEffect(()=>{ke&&!w&&!g&&f&&s&&Et&&Ie({id:Et._id,name:Et.name,description:Et.description,website:Et.website,phone:Et.phone,logoUrl:Et.logoUrl})},[f,s,Et]),q.jsx("main",{className:"createProject",children:g||w?q.jsx("div",{className:"loaderProjects__wrapper map",children:q.jsx("span",{className:"loaderProjects"})}):q.jsxs(sU,{children:[q.jsx(iK,{handleCreateProject:Fn,handleChangeProject:nr,projectData:s,handleToggleTop:vr}),q.jsx(NA,{prodProject:ke,infoProject:H,setInfoProject:te,coordinates:J,setCoordinates:K,developerInfo:Me,addGeneralInfoToProdProject:Zn,handleClearPolygon:As}),q.jsx(xM,{prodProject:ke,setProdProject:Ct,about:W,setAbout:ee,features:Xe,setFeatures:rt,qrCodeInfo:me,setQrCodeInfo:Se,floorPlanInfo:Ge,setFloorPlanInfo:ge,developerInfo:Me,setDeveloperInfo:Ie,projectData:s,addAboutInfoToProdProject:cr,addInformationToProdProject:Vr,addImagesToProdProject:Ya,refetchProjects:I,handleDeleteFeatures:jn}),q.jsx(wM,{handler:M,isVisible:o,title:"You can return to home page, with all projects or if you need edit more - press Edit"}),q.jsx(iM,{handler:L,isVisible:B,title:j})]})})};function oK(){const[t,a]=Te.useState(!1);return Te.useEffect(()=>{const s=localStorage.getItem("token");a(!!s)},[]),q.jsx(Zj,{children:q.jsx(Uj,{children:t?q.jsxs(q.Fragment,{children:[q.jsx(Dm,{path:"/",element:q.jsx(rU,{token:t})}),q.jsx(Dm,{path:"/project",element:q.jsx(qE,{})}),q.jsx(Dm,{path:"/project/:id",element:q.jsx(qE,{})})]}):q.jsx(Dm,{path:"*",element:q.jsx(Qj,{})})})})}sz.render(q.jsx(Hn.StrictMode,{children:q.jsx(YB,{store:Oz,children:q.jsx(oK,{})})}),document.getElementById("root"));
